var Bo=Object.defineProperty;var Ho=(i,e,o)=>e in i?Bo(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var zn=(i,e,o)=>(Ho(i,typeof e!="symbol"?e+"":e,o),o),wr=(i,e,o)=>{if(!e.has(i))throw TypeError("Cannot "+o)};var ot=(i,e,o)=>(wr(i,e,"read from private field"),o?o.call(i):e.get(i)),Nt=(i,e,o)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,o)},Yt=(i,e,o,s)=>(wr(i,e,"write to private field"),s?s.call(i,o):e.set(i,o),o);var nr=(i,e,o,s)=>({set _(a){Yt(i,e,a,o)},get _(){return ot(i,e,s)}}),jt=(i,e,o)=>(wr(i,e,"access private method"),o);function _mergeNamespaces(i,e){for(var o=0;o<e.length;o++){const s=e[o];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in i)){const c=Object.getOwnPropertyDescriptor(s,a);c&&Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var o=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var a=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(o,s,a.get?a:{enumerable:!0,get:function(){return i[s]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(i){return i===null||typeof i!="object"?null:(i=z$1&&i[z$1]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,e,o){this.props=i,this.context=e,this.refs=D$1,this.updater=o||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,e,o){this.props=i,this.context=e,this.refs=D$1,this.updater=o||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,e,o){var s,a={},c=null,h=null;if(e!=null)for(s in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,s)&&!L$1.hasOwnProperty(s)&&(a[s]=e[s]);var d=arguments.length-2;if(d===1)a.children=o;else if(1<d){for(var g=Array(d),_=0;_<d;_++)g[_]=arguments[_+2];a.children=g}if(i&&i.defaultProps)for(s in d=i.defaultProps,d)a[s]===void 0&&(a[s]=d[s]);return{$$typeof:l$1,type:i,key:c,ref:h,props:a,_owner:K$1.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(o){return e[o]})}var P$1=/\/+/g;function Q$1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$1(i,e,o,s,a){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var h=!1;if(i===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:h=!0}}if(h)return h=i,a=a(h),i=s===""?"."+Q$1(h,0):s,I$1(a)?(o="",i!=null&&(o=i.replace(P$1,"$&/")+"/"),R$1(a,e,o,"",function(_){return _})):a!=null&&(O$1(a)&&(a=N$1(a,o+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+i)),e.push(a)),1;if(h=0,s=s===""?".":s+":",I$1(i))for(var d=0;d<i.length;d++){c=i[d];var g=s+Q$1(c,d);h+=R$1(c,e,o,g,a)}else if(g=A$1(i),typeof g=="function")for(i=g.call(i),d=0;!(c=i.next()).done;)c=c.value,g=s+Q$1(c,d++),h+=R$1(c,e,o,g,a);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function S$1(i,e,o){if(i==null)return i;var s=[],a=0;return R$1(i,s,"","",function(c){return e.call(o,c,a++)}),s}function T$1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(o){(i._status===0||i._status===-1)&&(i._status=1,i._result=o)},function(o){(i._status===0||i._status===-1)&&(i._status=2,i._result=o)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(i,e,o){S$1(i,function(){e.apply(this,arguments)},o)},count:function(i){var e=0;return S$1(i,function(){e++}),e},toArray:function(i){return S$1(i,function(e){return e})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,e,o){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var s=C$1({},i.props),a=i.key,c=i.ref,h=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,h=K$1.current),e.key!==void 0&&(a=""+e.key),i.type&&i.type.defaultProps)var d=i.type.defaultProps;for(g in e)J.call(e,g)&&!L$1.hasOwnProperty(g)&&(s[g]=e[g]===void 0&&d!==void 0?d[g]:e[g])}var g=arguments.length-2;if(g===1)s.children=o;else if(1<g){d=Array(g);for(var _=0;_<g;_++)d[_]=arguments[_+2];s.children=d}return{$$typeof:l$1,type:i.type,key:a,ref:c,props:s,_owner:h}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var e=M$1.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,e){return{$$typeof:x,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,o){return U$1.current.useImperativeHandle(i,e,o)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,o){return U$1.current.useReducer(i,e,o)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,o){return U$1.current.useSyncExternalStore(i,e,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,o){var s,a={},c=null,h=null;o!==void 0&&(c=""+o),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(h=e.ref);for(s in e)m$1.call(e,s)&&!p$1.hasOwnProperty(s)&&(a[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:k,type:i,key:c,ref:h,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(_t,Ut){var St=_t.length;_t.push(Ut);e:for(;0<St;){var rn=St-1>>>1,an=_t[rn];if(0<a(an,Ut))_t[rn]=Ut,_t[St]=an,St=rn;else break e}}function o(_t){return _t.length===0?null:_t[0]}function s(_t){if(_t.length===0)return null;var Ut=_t[0],St=_t.pop();if(St!==Ut){_t[0]=St;e:for(var rn=0,an=_t.length,dt=an>>>1;rn<dt;){var ct=2*(rn+1)-1,gt=_t[ct],ut=ct+1,Et=_t[ut];if(0>a(gt,St))ut<an&&0>a(Et,gt)?(_t[rn]=Et,_t[ut]=St,rn=ut):(_t[rn]=gt,_t[ct]=St,rn=ct);else if(ut<an&&0>a(Et,St))_t[rn]=Et,_t[ut]=St,rn=ut;else break e}}return Ut}function a(_t,Ut){var St=_t.sortIndex-Ut.sortIndex;return St!==0?St:_t.id-Ut.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,d=h.now();i.unstable_now=function(){return h.now()-d}}var g=[],_=[],b=1,j=null,_e=3,$=!1,et=!1,rt=!1,st=typeof setTimeout=="function"?setTimeout:null,tt=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function it(_t){for(var Ut=o(_);Ut!==null;){if(Ut.callback===null)s(_);else if(Ut.startTime<=_t)s(_),Ut.sortIndex=Ut.expirationTime,e(g,Ut);else break;Ut=o(_)}}function pt(_t){if(rt=!1,it(_t),!et)if(o(g)!==null)et=!0,Bt(lt);else{var Ut=o(_);Ut!==null&&Kt(pt,Ut.startTime-_t)}}function lt(_t,Ut){et=!1,rt&&(rt=!1,tt(vt),vt=-1),$=!0;var St=_e;try{for(it(Ut),j=o(g);j!==null&&(!(j.expirationTime>Ut)||_t&&!yt());){var rn=j.callback;if(typeof rn=="function"){j.callback=null,_e=j.priorityLevel;var an=rn(j.expirationTime<=Ut);Ut=i.unstable_now(),typeof an=="function"?j.callback=an:j===o(g)&&s(g),it(Ut)}else s(g);j=o(g)}if(j!==null)var dt=!0;else{var ct=o(_);ct!==null&&Kt(pt,ct.startTime-Ut),dt=!1}return dt}finally{j=null,_e=St,$=!1}}var at=!1,At=null,vt=-1,ft=5,mt=-1;function yt(){return!(i.unstable_now()-mt<ft)}function bt(){if(At!==null){var _t=i.unstable_now();mt=_t;var Ut=!0;try{Ut=At(!0,_t)}finally{Ut?Mt():(at=!1,At=null)}}else at=!1}var Mt;if(typeof nt=="function")Mt=function(){nt(bt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,Lt=Tt.port2;Tt.port1.onmessage=bt,Mt=function(){Lt.postMessage(null)}}else Mt=function(){st(bt,0)};function Bt(_t){At=_t,at||(at=!0,Mt())}function Kt(_t,Ut){vt=st(function(){_t(i.unstable_now())},Ut)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(_t){_t.callback=null},i.unstable_continueExecution=function(){et||$||(et=!0,Bt(lt))},i.unstable_forceFrameRate=function(_t){0>_t||125<_t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ft=0<_t?Math.floor(1e3/_t):5},i.unstable_getCurrentPriorityLevel=function(){return _e},i.unstable_getFirstCallbackNode=function(){return o(g)},i.unstable_next=function(_t){switch(_e){case 1:case 2:case 3:var Ut=3;break;default:Ut=_e}var St=_e;_e=Ut;try{return _t()}finally{_e=St}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(_t,Ut){switch(_t){case 1:case 2:case 3:case 4:case 5:break;default:_t=3}var St=_e;_e=_t;try{return Ut()}finally{_e=St}},i.unstable_scheduleCallback=function(_t,Ut,St){var rn=i.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?rn+St:rn):St=rn,_t){case 1:var an=-1;break;case 2:an=250;break;case 5:an=1073741823;break;case 4:an=1e4;break;default:an=5e3}return an=St+an,_t={id:b++,callback:Ut,priorityLevel:_t,startTime:St,expirationTime:an,sortIndex:-1},St>rn?(_t.sortIndex=St,e(_,_t),o(g)===null&&_t===o(_)&&(rt?(tt(vt),vt=-1):rt=!0,Kt(pt,St-rn))):(_t.sortIndex=an,e(g,_t),et||$||(et=!0,Bt(lt))),_t},i.unstable_shouldYield=yt,i.unstable_wrapCallback=function(_t){var Ut=_e;return function(){var St=_e;_e=Ut;try{return _t.apply(this,arguments)}finally{_e=St}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,o,s){if(o!==null&&o.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,o,s){if(e===null||typeof e>"u"||pa(i,e,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(i,e,o,s,a,c,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=o,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=h}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z[e]=new v(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,o,s){var a=z.hasOwnProperty(e)?z[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,o,a,s)&&(o=null),s||a===null?oa(e)&&(o===null?i.removeAttribute(e):i.setAttribute(e,""+o)):a.mustUseProperty?i[a.propertyName]=o===null?a.type===3?!1:"":o:(e=a.attributeName,s=a.attributeNamespace,o===null?i.removeAttribute(e):(a=a.type,o=a===3||a===4&&o===!0?"":""+o,s?i.setAttributeNS(s,e,o):i.setAttribute(e,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(o){var e=o.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_){var s=_}Reflect.construct(i,[],e)}else{try{e.call()}catch(_){s=_}i.call(e.prototype)}else{try{throw Error()}catch(_){s=_}i()}}catch(_){if(_&&s&&typeof _.stack=="string"){for(var a=_.stack.split(`
`),c=s.stack.split(`
`),h=a.length-1,d=c.length-1;1<=h&&0<=d&&a[h]!==c[d];)d--;for(;1<=h&&0<=d;h--,d--)if(a[h]!==c[d]){if(h!==1||d!==1)do if(h--,d--,0>d||a[h]!==c[d]){var g=`
`+a[h].replace(" at new "," at ");return i.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",i.displayName)),g}while(1<=h&&0<=d);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),s=""+i[e];if(!i.hasOwnProperty(e)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var a=o.get,c=o.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){s=""+h,c.call(this,h)}}),Object.defineProperty(i,e,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var o=e.getValue(),s="";return i&&(s=Ta(i)?i.checked?"true":"false":i.value),i=s,i!==o?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var o=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??i._wrapperState.initialChecked})}function Za(i,e){var o=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;o=Sa(e.value!=null?e.value:o),i._wrapperState={initialChecked:s,initialValue:o,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var o=Sa(e.value),s=e.type;if(o!=null)s==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+o):i.value!==""+o&&(i.value=""+o);else if(s==="submit"||s==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,o):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,o||e===i.value||(i.value=e),i.defaultValue=e}o=i.name,o!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,o!==""&&(i.name=o)}function cb(i,e,o){(e!=="number"||Xa(i.ownerDocument)!==i)&&(o==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+o&&(i.defaultValue=""+o))}var eb=Array.isArray;function fb(i,e,o,s){if(i=i.options,e){e={};for(var a=0;a<o.length;a++)e["$"+o[a]]=!0;for(o=0;o<i.length;o++)a=e.hasOwnProperty("$"+i[o].value),i[o].selected!==a&&(i[o].selected=a),a&&s&&(i[o].defaultSelected=!0)}else{for(o=""+Sa(o),e=null,a=0;a<i.length;a++){if(i[a].value===o){i[a].selected=!0,s&&(i[a].defaultSelected=!0);return}e!==null||i[a].disabled||(e=i[a])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var o=e.value;if(o==null){if(o=e.children,e=e.defaultValue,o!=null){if(e!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}e=o}e==null&&(e=""),o=e}i._wrapperState={initialValue:Sa(o)}}function ib(i,e){var o=Sa(e.value),s=Sa(e.defaultValue);o!=null&&(o=""+o,o!==i.value&&(i.value=o),e.defaultValue==null&&i.defaultValue!==o&&(i.defaultValue=o)),s!=null&&(i.defaultValue=""+s)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,o,s,a){MSApp.execUnsafeLocalFunction(function(){return i(e,o,s,a)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,o){return e==null||typeof e=="boolean"||e===""?"":o||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var o in e)if(e.hasOwnProperty(o)){var s=o.indexOf("--")===0,a=rb(o,e[o],s);o==="float"&&(o="cssFloat"),s?i.setProperty(o,a):i[o]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,o){if(Ib)return i(e,o);Ib=!0;try{return Gb(i,e,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var o=i.stateNode;if(o===null)return null;var s=Db(o);if(s===null)return null;o=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(i=i.type,s=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!s;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(p(231,e,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,o,s,a,c,h,d,g){var _=Array.prototype.slice.call(arguments,3);try{e.apply(o,_)}catch(b){this.onError(b)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,o,s,a,c,h,d,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,o,s,a,c,h,d,g){if(Tb.apply(this,arguments),Ob){if(Ob){var _=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=_)}}function Vb(i){var e=i,o=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(o=e.return),i=e.return;while(i)}return e.tag===3?o:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var o=i,s=e;;){var a=o.return;if(a===null)break;var c=a.alternate;if(c===null){if(s=a.return,s!==null){o=s;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===o)return Xb(a),i;if(c===s)return Xb(a),e;c=c.sibling}throw Error(p(188))}if(o.return!==s.return)o=a,s=c;else{for(var h=!1,d=a.child;d;){if(d===o){h=!0,o=a,s=c;break}if(d===s){h=!0,s=a,o=c;break}d=d.sibling}if(!h){for(d=c.child;d;){if(d===o){h=!0,o=c,s=a;break}if(d===s){h=!0,s=c,o=a;break}d=d.sibling}if(!h)throw Error(p(189))}}if(o.alternate!==s)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var o=i.pendingLanes;if(o===0)return 0;var s=0,a=i.suspendedLanes,c=i.pingedLanes,h=o&268435455;if(h!==0){var d=h&~a;d!==0?s=tc(d):(c&=h,c!==0&&(s=tc(c)))}else h=o&~a,h!==0?s=tc(h):c!==0&&(s=tc(c));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(s&4&&(s|=o&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=s;0<e;)o=31-oc(e),a=1<<o,s|=i[o],e&=~a;return s}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var o=i.suspendedLanes,s=i.pingedLanes,a=i.expirationTimes,c=i.pendingLanes;0<c;){var h=31-oc(c),d=1<<h,g=a[h];g===-1?(!(d&o)||d&s)&&(a[h]=vc(d,e)):g<=e&&(i.expiredLanes|=d),c&=~d}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],o=0;31>o;o++)e.push(i);return e}function Ac(i,e,o){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=o}function Bc(i,e){var o=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var s=i.eventTimes;for(i=i.expirationTimes;0<o;){var a=31-oc(o),c=1<<a;e[a]=0,s[a]=-1,i[a]=-1,o&=~c}}function Cc(i,e){var o=i.entangledLanes|=e;for(i=i.entanglements;o;){var s=31-oc(o),a=1<<s;a&e|i[s]&e&&(i[s]|=e),o&=~a}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,o,s,a,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:o,eventSystemFlags:s,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=s,e=i.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),i)}function Uc(i,e,o,s,a){switch(e){case"focusin":return Lc=Tc(Lc,i,e,o,s,a),!0;case"dragenter":return Mc=Tc(Mc,i,e,o,s,a),!0;case"mouseover":return Nc=Tc(Nc,i,e,o,s,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,o,s,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,o,s,a)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var o=Vb(e);if(o!==null){if(e=o.tag,e===13){if(e=Wb(o),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(o)});return}}else if(e===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var o=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(o===null){o=i.nativeEvent;var s=new o.constructor(o.type,o);wb=s,o.target.dispatchEvent(s),wb=null}else return e=Cb(o),e!==null&&Fc(e),i.blockedOn=o,!1;e.shift()}return!0}function Zc(i,e,o){Xc(i)&&o.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(a){return ad(a,i)}if(0<Kc.length){ad(Kc[0],i);for(var o=1;o<Kc.length;o++){var s=Kc[o];s.blockedOn===i&&(s.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),o=0;o<Qc.length;o++)s=Qc[o],s.blockedOn===i&&(s.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,o,s){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(i,e,o,s)}finally{C=a,cd.transition=c}}function gd(i,e,o,s){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(i,e,o,s)}finally{C=a,cd.transition=c}}function fd(i,e,o,s){if(dd){var a=Yc(i,e,o,s);if(a===null)hd(i,e,s,id,o),Sc(i,s);else if(Uc(a,i,e,o,s))s.stopPropagation();else if(Sc(i,s),e&4&&-1<Rc.indexOf(i)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(i,e,o,s),c===null&&hd(i,e,s,id,o),c===a)break;a=c}a!==null&&s.stopPropagation()}else hd(i,e,s,null,o)}}var id=null;function Yc(i,e,o,s){if(id=null,i=xb(s),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(o=e.tag,o===13){if(i=Wb(e),i!==null)return i;i=null}else if(o===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,o=e.length,s,a="value"in kd?kd.value:kd.textContent,c=a.length;for(i=0;i<o&&e[i]===a[i];i++);var h=o-i;for(s=1;s<=h&&e[o-s]===a[c-s];s++);return md=a.slice(i,1<s?1-s:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(o,s,a,c,h){this._reactName=o,this._targetInst=a,this.type=s,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var d in i)i.hasOwnProperty(d)&&(o=i[d],this[d]=o?o(c):c[d]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return i=e.data,i===ee&&fe?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae&&ge(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le[i.type]:e==="textarea"}function ne(i,e,o,s){Eb(s),e=oe(e,"onChange"),0<e.length&&(o=new td("onChange","change",null,o,s),i.push({event:o,listeners:e}))}var pe=null,qe=null;function re$1(i){se(i,0)}function te(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,i,xb(i)),Jb(re$1,e)}}function Ce(i,e,o){i==="focusin"?(Ae(),pe=e,qe=o,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var o=Object.keys(i),s=Object.keys(e);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var a=o[s];if(!ja.call(e,a)||!He(i[a],e[a]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var o=Je(i);i=0;for(var s;o;){if(o.nodeType===3){if(s=i+o.textContent.length,i<=e&&s>=e)return{node:o,offset:e-i};i=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var o=typeof e.contentWindow.location.href=="string"}catch{o=!1}if(o)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),o=i.focusedElem,s=i.selectionRange;if(e!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(s!==null&&Ne(o)){if(e=s.start,i=s.end,i===void 0&&(i=e),"selectionStart"in o)o.selectionStart=e,o.selectionEnd=Math.min(i,o.value.length);else if(i=(e=o.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var a=o.textContent.length,c=Math.min(s.start,a);s=s.end===void 0?c:Math.min(s.end,a),!i.extend&&c>s&&(a=s,s=c,c=a),a=Ke(o,c);var h=Ke(o,s);a&&h&&(i.rangeCount!==1||i.anchorNode!==a.node||i.anchorOffset!==a.offset||i.focusNode!==h.node||i.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),i.removeAllRanges(),c>s?(i.addRange(e),i.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),i.addRange(e)))}}for(e=[],i=o;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<e.length;o++)i=e[o],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,e,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(s)||(s=Qe,"selectionStart"in s&&Ne(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Se&&Ie(Se,s)||(Se=s,s=oe(Re,"onSelect"),0<s.length&&(e=new td("onSelect","select",null,e,o),i.push({event:e,listeners:s}),e.target=Qe)))}function Ve(i,e){var o={};return o[i.toLowerCase()]=e.toLowerCase(),o["Webkit"+i]="webkit"+e,o["Moz"+i]="moz"+e,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],o;for(o in e)if(e.hasOwnProperty(o)&&o in Ye)return Xe[i]=e[o];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,o){var s=i.type||"unknown-event";i.currentTarget=o,Ub(s,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var o=0;o<i.length;o++){var s=i[o],a=s.event;s=s.listeners;e:{var c=void 0;if(e)for(var h=s.length-1;0<=h;h--){var d=s[h],g=d.instance,_=d.currentTarget;if(d=d.listener,g!==c&&a.isPropagationStopped())break e;nf(a,d,_),c=g}else for(h=0;h<s.length;h++){if(d=s[h],g=d.instance,_=d.currentTarget,d=d.listener,g!==c&&a.isPropagationStopped())break e;nf(a,d,_),c=g}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,e){var o=e[of];o===void 0&&(o=e[of]=new Set);var s=i+"__bubble";o.has(s)||(pf(e,i,2,!1),o.add(s))}function qf(i,e,o){var s=0;e&&(s|=4),pf(o,i,s,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,i),qf(o,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,o,s){switch(jd(e)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}o=a.bind(null,e,o,i),a=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?i.addEventListener(e,o,{capture:!0,passive:a}):i.addEventListener(e,o,!0):a!==void 0?i.addEventListener(e,o,{passive:a}):i.addEventListener(e,o,!1)}function hd(i,e,o,s,a){var c=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var d=s.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(h===4)for(h=s.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;h=h.return}for(;d!==null;){if(h=Wc(d),h===null)return;if(g=h.tag,g===5||g===6){s=c=h;continue e}d=d.parentNode}}s=s.return}Jb(function(){var _=c,b=xb(o),j=[];e:{var _e=df.get(i);if(_e!==void 0){var $=td,et=i;switch(i){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":$=Rd;break;case"focusin":et="focus",$=Fd;break;case"focusout":et="blur",$=Fd;break;case"beforeblur":case"afterblur":$=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Vd;break;case $e:case af:case bf:$=Hd;break;case cf:$=Xd;break;case"scroll":$=vd;break;case"wheel":$=Zd;break;case"copy":case"cut":case"paste":$=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Td}var rt=(e&4)!==0,st=!rt&&i==="scroll",tt=rt?_e!==null?_e+"Capture":null:_e;rt=[];for(var nt=_,it;nt!==null;){it=nt;var pt=it.stateNode;if(it.tag===5&&pt!==null&&(it=pt,tt!==null&&(pt=Kb(nt,tt),pt!=null&&rt.push(tf(nt,pt,it)))),st)break;nt=nt.return}0<rt.length&&(_e=new $(_e,et,null,o,b),j.push({event:_e,listeners:rt}))}}if(!(e&7)){e:{if(_e=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",_e&&o!==wb&&(et=o.relatedTarget||o.fromElement)&&(Wc(et)||et[uf]))break e;if(($||_e)&&(_e=b.window===b?b:(_e=b.ownerDocument)?_e.defaultView||_e.parentWindow:window,$?(et=o.relatedTarget||o.toElement,$=_,et=et?Wc(et):null,et!==null&&(st=Vb(et),et!==st||et.tag!==5&&et.tag!==6)&&(et=null)):($=null,et=_),$!==et)){if(rt=Bd,pt="onMouseLeave",tt="onMouseEnter",nt="mouse",(i==="pointerout"||i==="pointerover")&&(rt=Td,pt="onPointerLeave",tt="onPointerEnter",nt="pointer"),st=$==null?_e:ue($),it=et==null?_e:ue(et),_e=new rt(pt,nt+"leave",$,o,b),_e.target=st,_e.relatedTarget=it,pt=null,Wc(b)===_&&(rt=new rt(tt,nt+"enter",et,o,b),rt.target=it,rt.relatedTarget=st,pt=rt),st=pt,$&&et)t:{for(rt=$,tt=et,nt=0,it=rt;it;it=vf(it))nt++;for(it=0,pt=tt;pt;pt=vf(pt))it++;for(;0<nt-it;)rt=vf(rt),nt--;for(;0<it-nt;)tt=vf(tt),it--;for(;nt--;){if(rt===tt||tt!==null&&rt===tt.alternate)break t;rt=vf(rt),tt=vf(tt)}rt=null}else rt=null;$!==null&&wf(j,_e,$,rt,!1),et!==null&&st!==null&&wf(j,st,et,rt,!0)}}e:{if(_e=_?ue(_):window,$=_e.nodeName&&_e.nodeName.toLowerCase(),$==="select"||$==="input"&&_e.type==="file")var lt=ve;else if(me(_e))if(we)lt=Fe;else{lt=De;var at=Ce}else($=_e.nodeName)&&$.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(lt=Ee);if(lt&&(lt=lt(i,_))){ne(j,lt,o,b);break e}at&&at(i,_e,_),i==="focusout"&&(at=_e._wrapperState)&&at.controlled&&_e.type==="number"&&cb(_e,"number",_e.value)}switch(at=_?ue(_):window,i){case"focusin":(me(at)||at.contentEditable==="true")&&(Qe=at,Re=_,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,o,b);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(j,o,b)}var At;if(ae)e:{switch(i){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie?ge(i,o)&&(vt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(vt="onCompositionStart");vt&&(de&&o.locale!=="ko"&&(ie||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie&&(At=nd()):(kd=b,ld="value"in kd?kd.value:kd.textContent,ie=!0)),at=oe(_,vt),0<at.length&&(vt=new Ld(vt,i,null,o,b),j.push({event:vt,listeners:at}),At?vt.data=At:(At=he(o),At!==null&&(vt.data=At)))),(At=ce?je(i,o):ke(i,o))&&(_=oe(_,"onBeforeInput"),0<_.length&&(b=new Ld("onBeforeInput","beforeinput",null,o,b),j.push({event:b,listeners:_}),b.data=At))}se(j,e)})}function tf(i,e,o){return{instance:i,listener:e,currentTarget:o}}function oe(i,e){for(var o=e+"Capture",s=[];i!==null;){var a=i,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(i,o),c!=null&&s.unshift(tf(i,c,a)),c=Kb(i,e),c!=null&&s.push(tf(i,c,a))),i=i.return}return s}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,o,s,a){for(var c=e._reactName,h=[];o!==null&&o!==s;){var d=o,g=d.alternate,_=d.stateNode;if(g!==null&&g===s)break;d.tag===5&&_!==null&&(d=_,a?(g=Kb(o,c),g!=null&&h.unshift(tf(o,g,d))):a||(g=Kb(o,c),g!=null&&h.push(tf(o,g,d)))),o=o.return}h.length!==0&&i.push({event:e,listeners:h})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,o){if(e=zf(e),zf(i)!==e&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var o=e,s=0;do{var a=o.nextSibling;if(i.removeChild(o),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(s===0){i.removeChild(a),bd(e);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=a}while(o);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(e===0)return i;e--}else o==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var o=i.parentNode;o;){if(e=o[uf]||o[Of]){if(o=e.alternate,e.child!==null||o!==null&&o.child!==null)for(i=Mf(i);i!==null;){if(o=i[Of])return o;i=Mf(i)}return e}i=o,o=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var o=i.type.contextTypes;if(!o)return Vf;var s=i.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in o)a[c]=e[c];return s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,e,o){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,o)}function bg(i,e,o){var s=i.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(p(108,Ra(i)||"Unknown",a));return A({},o,s)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,e,o){var s=i.stateNode;if(!s)throw Error(p(169));o?(i=bg(i,e,Xf),s.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C;try{var o=eg;for(C=1;i<o.length;i++){var s=o[i];do s=s(!0);while(s!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),a}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var s=rg;i=sg;var a=32-oc(s)-1;s&=~(1<<a),o+=1;var c=32-oc(e)+a;if(30<c){var h=a-a%5;c=(s&(1<<h)-1).toString(32),s>>=h,a-=h,rg=1<<32-oc(e)+a|o<<a|s,sg=c+i}else rg=1<<c|o<<a|s,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,e){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=e,o.return=i,e=i.deletions,e===null?(i.deletions=[o],i.flags|=16):e.push(o)}function Cg(i,e){switch(i.tag){case 5:var o=i.type;return e=e.nodeType!==1||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(o=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=e,o.return=i,i.child=o,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var e=yg;if(e){var o=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(o.nextSibling);var s=xg;e&&Cg(i,e)?Ag(s,o):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else o!=="$"&&o!=="$!"&&o!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e){if(i&&i.defaultProps){e=A({},e),i=i.defaultProps;for(var o in i)e[o]===void 0&&(e[o]=i[o]);return e}return e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var e=Mg.current;E(Mg),i._currentValue=e}function Sg(i,e,o){for(;i!==null;){var s=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),i===o)break;i=i.return}}function Tg(i,e){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ug=!0),i.firstContext=null)}function Vg(i){var e=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:e,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return e}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,e,o,s){var a=e.interleaved;return a===null?(o.next=o,Xg(e)):(o.next=a.next,a.next=o),e.interleaved=o,Zg(i,s)}function Zg(i,e){i.lanes|=e;var o=i.alternate;for(o!==null&&(o.lanes|=e),o=i,i=i.return;i!==null;)i.childLanes|=e,o=i.alternate,o!==null&&(o.childLanes|=e),o=i,i=i.return;return o.tag===3?o.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function dh(i,e,o){var s=i.updateQueue;if(s===null)return null;if(s=s.shared,K&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,Zg(i,o)}return a=s.interleaved,a===null?(e.next=e,Xg(s)):(e.next=a.next,a.next=e),s.interleaved=e,Zg(i,o)}function eh(i,e,o){if(e=e.updateQueue,e!==null&&(e=e.shared,(o&4194240)!==0)){var s=e.lanes;s&=i.pendingLanes,o|=s,e.lanes=o,Cc(i,o)}}function fh(i,e){var o=i.updateQueue,s=i.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var a=null,c=null;if(o=o.firstBaseUpdate,o!==null){do{var h={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};c===null?a=c=h:c=c.next=h,o=o.next}while(o!==null);c===null?a=c=e:c=c.next=e}else a=c=e;o={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:s.shared,effects:s.effects},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=e:i.next=e,o.lastBaseUpdate=e}function gh(i,e,o,s){var a=i.updateQueue;$g=!1;var c=a.firstBaseUpdate,h=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var g=d,_=g.next;g.next=null,h===null?c=_:h.next=_,h=g;var b=i.alternate;b!==null&&(b=b.updateQueue,d=b.lastBaseUpdate,d!==h&&(d===null?b.firstBaseUpdate=_:d.next=_,b.lastBaseUpdate=g))}if(c!==null){var j=a.baseState;h=0,b=_=g=null,d=c;do{var _e=d.lane,$=d.eventTime;if((s&_e)===_e){b!==null&&(b=b.next={eventTime:$,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var et=i,rt=d;switch(_e=e,$=o,rt.tag){case 1:if(et=rt.payload,typeof et=="function"){j=et.call($,j,_e);break e}j=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=rt.payload,_e=typeof et=="function"?et.call($,j,_e):et,_e==null)break e;j=A({},j,_e);break e;case 2:$g=!0}}d.callback!==null&&d.lane!==0&&(i.flags|=64,_e=a.effects,_e===null?a.effects=[d]:_e.push(d))}else $={eventTime:$,lane:_e,tag:d.tag,payload:d.payload,callback:d.callback,next:null},b===null?(_=b=$,g=j):b=b.next=$,h|=_e;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;_e=d,d=_e.next,_e.next=null,a.lastBaseUpdate=_e,a.shared.pending=null}}while(!0);if(b===null&&(g=j),a.baseState=g,a.firstBaseUpdate=_,a.lastBaseUpdate=b,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);hh|=h,i.lanes=h,i.memoizedState=j}}function ih(i,e,o){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var s=i[e],a=s.callback;if(a!==null){if(s.callback=null,s=o,typeof a!="function")throw Error(p(191,a));a.call(s)}}}var jh=new aa.Component().refs;function kh(i,e,o,s){e=i.memoizedState,o=o(s,e),o=o==null?e:A({},e,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,o){i=i._reactInternals;var s=L(),a=lh(i),c=ch(s,a);c.payload=e,o!=null&&(c.callback=o),e=dh(i,c,a),e!==null&&(mh(e,i,a,s),eh(e,i,a))},enqueueReplaceState:function(i,e,o){i=i._reactInternals;var s=L(),a=lh(i),c=ch(s,a);c.tag=1,c.payload=e,o!=null&&(c.callback=o),e=dh(i,c,a),e!==null&&(mh(e,i,a,s),eh(e,i,a))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var o=L(),s=lh(i),a=ch(o,s);a.tag=2,e!=null&&(a.callback=e),e=dh(i,a,s),e!==null&&(mh(e,i,s,o),eh(e,i,s))}};function oh(i,e,o,s,a,c,h){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(s,c,h):e.prototype&&e.prototype.isPureReactComponent?!Ie(o,s)||!Ie(a,c):!0}function ph(i,e,o){var s=!1,a=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=Vg(c):(a=Zf(e)?Xf:H.current,s=e.contextTypes,c=(s=s!=null)?Yf(i,a):Vf),e=new e(o,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,i.stateNode=e,e._reactInternals=i,s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=c),e}function qh(i,e,o,s){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(o,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(o,s),e.state!==i&&nh.enqueueReplaceState(e,e.state,null)}function rh(i,e,o,s){var a=i.stateNode;a.props=o,a.state=i.memoizedState,a.refs=jh,ah(i);var c=e.contextType;typeof c=="object"&&c!==null?a.context=Vg(c):(c=Zf(e)?Xf:H.current,a.context=Yf(i,c)),a.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(kh(i,e,c,o),a.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&nh.enqueueReplaceState(a,a.state,null),gh(i,o,a,s),a.state=i.memoizedState),typeof a.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,e,o){if(i=o.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var s=o.stateNode}if(!s)throw Error(p(147,i));var a=s,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(h){var d=a.refs;d===jh&&(d=a.refs={}),h===null?delete d[c]:d[c]=h},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,i))}return i}function th(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function uh(i){var e=i._init;return e(i._payload)}function vh(i){function e(tt,nt){if(i){var it=tt.deletions;it===null?(tt.deletions=[nt],tt.flags|=16):it.push(nt)}}function o(tt,nt){if(!i)return null;for(;nt!==null;)e(tt,nt),nt=nt.sibling;return null}function s(tt,nt){for(tt=new Map;nt!==null;)nt.key!==null?tt.set(nt.key,nt):tt.set(nt.index,nt),nt=nt.sibling;return tt}function a(tt,nt){return tt=wh(tt,nt),tt.index=0,tt.sibling=null,tt}function c(tt,nt,it){return tt.index=it,i?(it=tt.alternate,it!==null?(it=it.index,it<nt?(tt.flags|=2,nt):it):(tt.flags|=2,nt)):(tt.flags|=1048576,nt)}function h(tt){return i&&tt.alternate===null&&(tt.flags|=2),tt}function d(tt,nt,it,pt){return nt===null||nt.tag!==6?(nt=xh(it,tt.mode,pt),nt.return=tt,nt):(nt=a(nt,it),nt.return=tt,nt)}function g(tt,nt,it,pt){var lt=it.type;return lt===ya?b(tt,nt,it.props.children,pt,it.key):nt!==null&&(nt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&uh(lt)===nt.type)?(pt=a(nt,it.props),pt.ref=sh(tt,nt,it),pt.return=tt,pt):(pt=yh(it.type,it.key,it.props,null,tt.mode,pt),pt.ref=sh(tt,nt,it),pt.return=tt,pt)}function _(tt,nt,it,pt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==it.containerInfo||nt.stateNode.implementation!==it.implementation?(nt=zh(it,tt.mode,pt),nt.return=tt,nt):(nt=a(nt,it.children||[]),nt.return=tt,nt)}function b(tt,nt,it,pt,lt){return nt===null||nt.tag!==7?(nt=Ah(it,tt.mode,pt,lt),nt.return=tt,nt):(nt=a(nt,it),nt.return=tt,nt)}function j(tt,nt,it){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=xh(""+nt,tt.mode,it),nt.return=tt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case va:return it=yh(nt.type,nt.key,nt.props,null,tt.mode,it),it.ref=sh(tt,null,nt),it.return=tt,it;case wa:return nt=zh(nt,tt.mode,it),nt.return=tt,nt;case Ha:var pt=nt._init;return j(tt,pt(nt._payload),it)}if(eb(nt)||Ka(nt))return nt=Ah(nt,tt.mode,it,null),nt.return=tt,nt;th(tt,nt)}return null}function _e(tt,nt,it,pt){var lt=nt!==null?nt.key:null;if(typeof it=="string"&&it!==""||typeof it=="number")return lt!==null?null:d(tt,nt,""+it,pt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return it.key===lt?g(tt,nt,it,pt):null;case wa:return it.key===lt?_(tt,nt,it,pt):null;case Ha:return lt=it._init,_e(tt,nt,lt(it._payload),pt)}if(eb(it)||Ka(it))return lt!==null?null:b(tt,nt,it,pt,null);th(tt,it)}return null}function $(tt,nt,it,pt,lt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return tt=tt.get(it)||null,d(nt,tt,""+pt,lt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return tt=tt.get(pt.key===null?it:pt.key)||null,g(nt,tt,pt,lt);case wa:return tt=tt.get(pt.key===null?it:pt.key)||null,_(nt,tt,pt,lt);case Ha:var at=pt._init;return $(tt,nt,it,at(pt._payload),lt)}if(eb(pt)||Ka(pt))return tt=tt.get(it)||null,b(nt,tt,pt,lt,null);th(nt,pt)}return null}function et(tt,nt,it,pt){for(var lt=null,at=null,At=nt,vt=nt=0,ft=null;At!==null&&vt<it.length;vt++){At.index>vt?(ft=At,At=null):ft=At.sibling;var mt=_e(tt,At,it[vt],pt);if(mt===null){At===null&&(At=ft);break}i&&At&&mt.alternate===null&&e(tt,At),nt=c(mt,nt,vt),at===null?lt=mt:at.sibling=mt,at=mt,At=ft}if(vt===it.length)return o(tt,At),I&&tg(tt,vt),lt;if(At===null){for(;vt<it.length;vt++)At=j(tt,it[vt],pt),At!==null&&(nt=c(At,nt,vt),at===null?lt=At:at.sibling=At,at=At);return I&&tg(tt,vt),lt}for(At=s(tt,At);vt<it.length;vt++)ft=$(At,tt,vt,it[vt],pt),ft!==null&&(i&&ft.alternate!==null&&At.delete(ft.key===null?vt:ft.key),nt=c(ft,nt,vt),at===null?lt=ft:at.sibling=ft,at=ft);return i&&At.forEach(function(yt){return e(tt,yt)}),I&&tg(tt,vt),lt}function rt(tt,nt,it,pt){var lt=Ka(it);if(typeof lt!="function")throw Error(p(150));if(it=lt.call(it),it==null)throw Error(p(151));for(var at=lt=null,At=nt,vt=nt=0,ft=null,mt=it.next();At!==null&&!mt.done;vt++,mt=it.next()){At.index>vt?(ft=At,At=null):ft=At.sibling;var yt=_e(tt,At,mt.value,pt);if(yt===null){At===null&&(At=ft);break}i&&At&&yt.alternate===null&&e(tt,At),nt=c(yt,nt,vt),at===null?lt=yt:at.sibling=yt,at=yt,At=ft}if(mt.done)return o(tt,At),I&&tg(tt,vt),lt;if(At===null){for(;!mt.done;vt++,mt=it.next())mt=j(tt,mt.value,pt),mt!==null&&(nt=c(mt,nt,vt),at===null?lt=mt:at.sibling=mt,at=mt);return I&&tg(tt,vt),lt}for(At=s(tt,At);!mt.done;vt++,mt=it.next())mt=$(At,tt,vt,mt.value,pt),mt!==null&&(i&&mt.alternate!==null&&At.delete(mt.key===null?vt:mt.key),nt=c(mt,nt,vt),at===null?lt=mt:at.sibling=mt,at=mt);return i&&At.forEach(function(bt){return e(tt,bt)}),I&&tg(tt,vt),lt}function st(tt,nt,it,pt){if(typeof it=="object"&&it!==null&&it.type===ya&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case va:e:{for(var lt=it.key,at=nt;at!==null;){if(at.key===lt){if(lt=it.type,lt===ya){if(at.tag===7){o(tt,at.sibling),nt=a(at,it.props.children),nt.return=tt,tt=nt;break e}}else if(at.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&uh(lt)===at.type){o(tt,at.sibling),nt=a(at,it.props),nt.ref=sh(tt,at,it),nt.return=tt,tt=nt;break e}o(tt,at);break}else e(tt,at);at=at.sibling}it.type===ya?(nt=Ah(it.props.children,tt.mode,pt,it.key),nt.return=tt,tt=nt):(pt=yh(it.type,it.key,it.props,null,tt.mode,pt),pt.ref=sh(tt,nt,it),pt.return=tt,tt=pt)}return h(tt);case wa:e:{for(at=it.key;nt!==null;){if(nt.key===at)if(nt.tag===4&&nt.stateNode.containerInfo===it.containerInfo&&nt.stateNode.implementation===it.implementation){o(tt,nt.sibling),nt=a(nt,it.children||[]),nt.return=tt,tt=nt;break e}else{o(tt,nt);break}else e(tt,nt);nt=nt.sibling}nt=zh(it,tt.mode,pt),nt.return=tt,tt=nt}return h(tt);case Ha:return at=it._init,st(tt,nt,at(it._payload),pt)}if(eb(it))return et(tt,nt,it,pt);if(Ka(it))return rt(tt,nt,it,pt);th(tt,it)}return typeof it=="string"&&it!==""||typeof it=="number"?(it=""+it,nt!==null&&nt.tag===6?(o(tt,nt.sibling),nt=a(nt,it),nt.return=tt,tt=nt):(o(tt,nt),nt=xh(it,tt.mode,pt),nt.return=tt,tt=nt),h(tt)):o(tt,nt)}return st}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p(174));return i}function Ih(i,e){switch(G(Gh,e),G(Fh,i),G(Eh,Dh),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(Eh),G(Eh,e)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var e=Hh(Eh.current),o=lb(e,i.type);e!==o&&(G(Fh,i),G(Eh,o))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var e=i;e!==null;){if(e.tag===13){var o=e.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(i,e){if(e===null)return!1;for(var o=0;o<e.length&&o<i.length;o++)if(!He(i[o],e[o]))return!1;return!0}function Xh(i,e,o,s,a,c){if(Rh=c,N=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=o(s,a),Th){c=0;do{if(Th=!1,Uh=0,25<=c)throw Error(p(301));c+=1,P=O=null,e.updateQueue=null,Ph.current=$h,i=o(s,a)}while(Th)}if(Ph.current=ai,e=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,e)throw Error(p(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var e=P===null?N.memoizedState:P.next;if(e!==null)P=e,O=i;else{if(i===null)throw Error(p(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,e){return typeof e=="function"?e(i):e}function fi(i){var e=di(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=i;var s=O,a=s.baseQueue,c=o.pending;if(c!==null){if(a!==null){var h=a.next;a.next=c.next,c.next=h}s.baseQueue=a=c,o.pending=null}if(a!==null){c=a.next,s=s.baseState;var d=h=null,g=null,_=c;do{var b=_.lane;if((Rh&b)===b)g!==null&&(g=g.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),s=_.hasEagerState?_.eagerState:i(s,_.action);else{var j={lane:b,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};g===null?(d=g=j,h=s):g=g.next=j,N.lanes|=b,hh|=b}_=_.next}while(_!==null&&_!==c);g===null?h=s:g.next=d,He(s,e.memoizedState)||(Ug=!0),e.memoizedState=s,e.baseState=h,e.baseQueue=g,o.lastRenderedState=s}if(i=o.interleaved,i!==null){a=i;do c=a.lane,N.lanes|=c,hh|=c,a=a.next;while(a!==i)}else a===null&&(o.lanes=0);return[e.memoizedState,o.dispatch]}function gi(i){var e=di(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=i;var s=o.dispatch,a=o.pending,c=e.memoizedState;if(a!==null){o.pending=null;var h=a=a.next;do c=i(c,h.action),h=h.next;while(h!==a);He(c,e.memoizedState)||(Ug=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),o.lastRenderedState=c}return[c,s]}function hi(){}function ii(i,e){var o=N,s=di(),a=e(),c=!He(s.memoizedState,a);if(c&&(s.memoizedState=a,Ug=!0),s=s.queue,ji(ki.bind(null,o,s,i),[i]),s.getSnapshot!==e||c||P!==null&&P.memoizedState.tag&1){if(o.flags|=2048,li(9,mi.bind(null,o,s,a,e),void 0,null),R===null)throw Error(p(349));Rh&30||ni(o,e,a)}return a}function ni(i,e,o){i.flags|=16384,i={getSnapshot:e,value:o},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.stores=[i]):(o=e.stores,o===null?e.stores=[i]:o.push(i))}function mi(i,e,o,s){e.value=o,e.getSnapshot=s,oi(e)&&pi(i)}function ki(i,e,o){return o(function(){oi(e)&&pi(i)})}function oi(i){var e=i.getSnapshot;i=i.value;try{var o=e();return!He(i,o)}catch{return!0}}function pi(i){var e=Zg(i,1);e!==null&&mh(e,i,1,-1)}function qi(i){var e=ci();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},e.queue=i,i=i.dispatch=ri.bind(null,N,i),[e.memoizedState,i]}function li(i,e,o,s){return i={tag:i,create:e,destroy:o,deps:s,next:null},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.lastEffect=i.next=i):(o=e.lastEffect,o===null?e.lastEffect=i.next=i:(s=o.next,o.next=i,i.next=s,e.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,e,o,s){var a=ci();N.flags|=i,a.memoizedState=li(1|e,o,void 0,s===void 0?null:s)}function ui(i,e,o,s){var a=di();s=s===void 0?null:s;var c=void 0;if(O!==null){var h=O.memoizedState;if(c=h.destroy,s!==null&&Wh(s,h.deps)){a.memoizedState=li(e,o,c,s);return}}N.flags|=i,a.memoizedState=li(1|e,o,c,s)}function vi(i,e){return ti(8390656,8,i,e)}function ji(i,e){return ui(2048,8,i,e)}function wi(i,e){return ui(4,2,i,e)}function xi(i,e){return ui(4,4,i,e)}function yi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function zi(i,e,o){return o=o!=null?o.concat([i]):null,ui(4,4,yi.bind(null,e,i),o)}function Ai(){}function Bi(i,e){var o=di();e=e===void 0?null:e;var s=o.memoizedState;return s!==null&&e!==null&&Wh(e,s[1])?s[0]:(o.memoizedState=[i,e],i)}function Ci(i,e){var o=di();e=e===void 0?null:e;var s=o.memoizedState;return s!==null&&e!==null&&Wh(e,s[1])?s[0]:(i=i(),o.memoizedState=[i,e],i)}function Di(i,e,o){return Rh&21?(He(o,e)||(o=yc(),N.lanes|=o,hh|=o,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=o)}function Ei(i,e){var o=C;C=o!==0&&4>o?o:4,i(!0);var s=Qh.transition;Qh.transition={};try{i(!1),e()}finally{C=o,Qh.transition=s}}function Fi(){return di().memoizedState}function Gi(i,e,o){var s=lh(i);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(e,o);else if(o=Yg(i,e,o,s),o!==null){var a=L();mh(o,i,s,a),Ji(o,e,s)}}function ri(i,e,o){var s=lh(i),a={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(e,a);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var h=e.lastRenderedState,d=c(h,o);if(a.hasEagerState=!0,a.eagerState=d,He(d,h)){var g=e.interleaved;g===null?(a.next=a,Xg(e)):(a.next=g.next,g.next=a),e.interleaved=a;return}}catch{}finally{}o=Yg(i,e,a,s),o!==null&&(a=L(),mh(o,i,s,a),Ji(o,e,s))}}function Hi(i){var e=i.alternate;return i===N||e!==null&&e===N}function Ii(i,e){Th=Sh=!0;var o=i.pending;o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e}function Ji(i,e,o){if(o&4194240){var s=e.lanes;s&=i.pendingLanes,o|=s,e.lanes=o,Cc(i,o)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,e){return ci().memoizedState=[i,e===void 0?null:e],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,e,o){return o=o!=null?o.concat([i]):null,ti(4194308,4,yi.bind(null,e,i),o)},useLayoutEffect:function(i,e){return ti(4194308,4,i,e)},useInsertionEffect:function(i,e){return ti(4,2,i,e)},useMemo:function(i,e){var o=ci();return e=e===void 0?null:e,i=i(),o.memoizedState=[i,e],i},useReducer:function(i,e,o){var s=ci();return e=o!==void 0?o(e):e,s.memoizedState=s.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},s.queue=i,i=i.dispatch=Gi.bind(null,N,i),[s.memoizedState,i]},useRef:function(i){var e=ci();return i={current:i},e.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),e=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,o){var s=N,a=ci();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=e(),R===null)throw Error(p(349));Rh&30||ni(s,e,o)}a.memoizedState=o;var c={value:o,getSnapshot:e};return a.queue=c,vi(ki.bind(null,s,c,i),[i]),s.flags|=2048,li(9,mi.bind(null,s,c,o,e),void 0,null),o},useId:function(){var i=ci(),e=R.identifierPrefix;if(I){var o=sg,s=rg;o=(s&~(1<<32-oc(s)-1)).toString(32)+o,e=":"+e+"R"+o,o=Uh++,0<o&&(e+="H"+o.toString(32)),e+=":"}else o=Vh++,e=":"+e+"r"+o.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return Di(e,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return O===null?e.memoizedState=i:Di(e,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,e){try{var o="",s=e;do o+=Pa(s),s=s.return;while(s);var a=o}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:a,digest:null}}function Li(i,e,o){return{value:i,source:null,stack:o??null,digest:e??null}}function Mi(i,e){try{console.error(e.value)}catch(o){setTimeout(function(){throw o})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,e,o){o=ch(-1,o),o.tag=3,o.payload={element:null};var s=e.value;return o.callback=function(){Pi||(Pi=!0,Qi=s),Mi(i,e)},o}function Ri(i,e,o){o=ch(-1,o),o.tag=3;var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;o.payload=function(){return s(a)},o.callback=function(){Mi(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(o.callback=function(){Mi(i,e),typeof s!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),o}function Ti(i,e,o){var s=i.pingCache;if(s===null){s=i.pingCache=new Ni;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(o)||(a.add(o),i=Ui.bind(null,i,e,o),e.then(i,i))}function Vi(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Wi(i,e,o,s,a){return i.mode&1?(i.flags|=65536,i.lanes=a,i):(i===e?i.flags|=65536:(i.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(e=ch(-1,1),e.tag=2,dh(o,e,1))),o.lanes|=1),i)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(i,e,o,s){e.child=i===null?Ch(e,null,o,s):Bh(e,i.child,o,s)}function Zi(i,e,o,s,a){o=o.render;var c=e.ref;return Tg(e,a),s=Xh(i,e,o,s,c,a),o=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,$i(i,e,a)):(I&&o&&vg(e),e.flags|=1,Yi(i,e,s,a),e.child)}function aj(i,e,o,s,a){if(i===null){var c=o.type;return typeof c=="function"&&!bj(c)&&c.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(e.tag=15,e.type=c,cj(i,e,c,s,a)):(i=yh(o.type,null,s,e,e.mode,a),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&a)){var h=c.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(h,s)&&i.ref===e.ref)return $i(i,e,a)}return e.flags|=1,i=wh(c,s),i.ref=e.ref,i.return=e,e.child=i}function cj(i,e,o,s,a){if(i!==null){var c=i.memoizedProps;if(Ie(c,s)&&i.ref===e.ref)if(Ug=!1,e.pendingProps=s=c,(i.lanes&a)!==0)i.flags&131072&&(Ug=!0);else return e.lanes=i.lanes,$i(i,e,a)}return dj(i,e,o,s,a)}function ej(i,e,o){var s=e.pendingProps,a=s.children,c=i!==null?i.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=o;else{if(!(o&1073741824))return i=c!==null?c.baseLanes|o:o,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(fj,gj),gj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:o,G(fj,gj),gj|=s}else c!==null?(s=c.baseLanes|o,e.memoizedState=null):s=o,G(fj,gj),gj|=s;return Yi(i,e,a,o),e.child}function hj(i,e){var o=e.ref;(i===null&&o!==null||i!==null&&i.ref!==o)&&(e.flags|=512,e.flags|=2097152)}function dj(i,e,o,s,a){var c=Zf(o)?Xf:H.current;return c=Yf(e,c),Tg(e,a),o=Xh(i,e,o,s,c,a),s=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,$i(i,e,a)):(I&&s&&vg(e),e.flags|=1,Yi(i,e,o,a),e.child)}function ij(i,e,o,s,a){if(Zf(o)){var c=!0;cg(e)}else c=!1;if(Tg(e,a),e.stateNode===null)jj(i,e),ph(e,o,s),rh(e,o,s,a),s=!0;else if(i===null){var h=e.stateNode,d=e.memoizedProps;h.props=d;var g=h.context,_=o.contextType;typeof _=="object"&&_!==null?_=Vg(_):(_=Zf(o)?Xf:H.current,_=Yf(e,_));var b=o.getDerivedStateFromProps,j=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function";j||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==s||g!==_)&&qh(e,h,s,_),$g=!1;var _e=e.memoizedState;h.state=_e,gh(e,s,h,a),g=e.memoizedState,d!==s||_e!==g||Wf.current||$g?(typeof b=="function"&&(kh(e,o,b,s),g=e.memoizedState),(d=$g||oh(e,o,d,s,_e,g,_))?(j||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=g),h.props=s,h.state=g,h.context=_,s=d):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{h=e.stateNode,bh(i,e),d=e.memoizedProps,_=e.type===e.elementType?d:Lg(e.type,d),h.props=_,j=e.pendingProps,_e=h.context,g=o.contextType,typeof g=="object"&&g!==null?g=Vg(g):(g=Zf(o)?Xf:H.current,g=Yf(e,g));var $=o.getDerivedStateFromProps;(b=typeof $=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==j||_e!==g)&&qh(e,h,s,g),$g=!1,_e=e.memoizedState,h.state=_e,gh(e,s,h,a);var et=e.memoizedState;d!==j||_e!==et||Wf.current||$g?(typeof $=="function"&&(kh(e,o,$,s),et=e.memoizedState),(_=$g||oh(e,o,_,s,_e,et,g)||!1)?(b||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,et,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,et,g)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||d===i.memoizedProps&&_e===i.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&_e===i.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=et),h.props=s,h.state=et,h.context=g,s=_):(typeof h.componentDidUpdate!="function"||d===i.memoizedProps&&_e===i.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&_e===i.memoizedState||(e.flags|=1024),s=!1)}return kj(i,e,o,s,c,a)}function kj(i,e,o,s,a,c){hj(i,e);var h=(e.flags&128)!==0;if(!s&&!h)return a&&dg(e,o,!1),$i(i,e,c);s=e.stateNode,Xi.current=e;var d=h&&typeof o.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,i!==null&&h?(e.child=Bh(e,i.child,null,c),e.child=Bh(e,null,d,c)):Yi(i,e,d,c),e.memoizedState=s.state,a&&dg(e,o,!0),e.child}function lj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),Ih(i,e.containerInfo)}function mj(i,e,o,s,a){return Ig(),Jg(a),e.flags|=256,Yi(i,e,o,s),e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,e,o){var s=e.pendingProps,a=M.current,c=!1,h=(e.flags&128)!==0,d;if((d=h)||(d=i!==null&&i.memoizedState===null?!1:(a&2)!==0),d?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(a|=1),G(M,a&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=s.children,i=s.fallback,c?(s=e.mode,c=e.child,h={mode:"hidden",children:h},!(s&1)&&c!==null?(c.childLanes=0,c.pendingProps=h):c=qj(h,s,0,null),i=Ah(i,s,o,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=oj(o),e.memoizedState=nj,i):rj(e,h));if(a=i.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return sj(i,e,h,s,d,a,o);if(c){c=s.fallback,h=e.mode,a=i.child,d=a.sibling;var g={mode:"hidden",children:s.children};return!(h&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=g,e.deletions=null):(s=wh(a,g),s.subtreeFlags=a.subtreeFlags&14680064),d!==null?c=wh(d,c):(c=Ah(c,h,o,null),c.flags|=2),c.return=e,s.return=e,s.sibling=c,e.child=s,s=c,c=e.child,h=i.child.memoizedState,h=h===null?oj(o):{baseLanes:h.baseLanes|o,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=i.childLanes&~o,e.memoizedState=nj,s}return c=i.child,i=c.sibling,s=wh(c,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=o),s.return=e,s.sibling=null,i!==null&&(o=e.deletions,o===null?(e.deletions=[i],e.flags|=16):o.push(i)),e.child=s,e.memoizedState=null,s}function rj(i,e){return e=qj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function tj(i,e,o,s){return s!==null&&Jg(s),Bh(e,i.child,null,o),i=rj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function sj(i,e,o,s,a,c,h){if(o)return e.flags&256?(e.flags&=-257,s=Li(Error(p(422))),tj(i,e,h,s)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=s.fallback,a=e.mode,s=qj({mode:"visible",children:s.children},a,0,null),c=Ah(c,a,h,null),c.flags|=2,s.return=e,c.return=e,s.sibling=c,e.child=s,e.mode&1&&Bh(e,i.child,null,h),e.child.memoizedState=oj(h),e.memoizedState=nj,c);if(!(e.mode&1))return tj(i,e,h,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var d=s.dgst;return s=d,c=Error(p(419)),s=Li(c,s,void 0),tj(i,e,h,s)}if(d=(h&i.childLanes)!==0,Ug||d){if(s=R,s!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|h)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Zg(i,a),mh(s,i,a,-1))}return uj(),s=Li(Error(p(421))),tj(i,e,h,s)}return a.data==="$?"?(e.flags|=128,e.child=i.child,e=vj.bind(null,i),a._reactRetry=e,null):(i=c.treeContext,yg=Lf(a.nextSibling),xg=e,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=rj(e,s.children),e.flags|=4096,e)}function wj(i,e,o){i.lanes|=e;var s=i.alternate;s!==null&&(s.lanes|=e),Sg(i.return,e,o)}function xj(i,e,o,s,a){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=o,c.tailMode=a)}function yj(i,e,o){var s=e.pendingProps,a=s.revealOrder,c=s.tail;if(Yi(i,e,s.children,o),s=M.current,s&2)s=s&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,o,e);else if(i.tag===19)wj(i,o,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s&=1}if(G(M,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(o=e.child,a=null;o!==null;)i=o.alternate,i!==null&&Mh(i)===null&&(a=o),o=o.sibling;o=a,o===null?(a=e.child,e.child=null):(a=o.sibling,o.sibling=null),xj(e,!1,a,o,c);break;case"backwards":for(o=null,a=e.child,e.child=null;a!==null;){if(i=a.alternate,i!==null&&Mh(i)===null){e.child=a;break}i=a.sibling,a.sibling=o,o=a,a=i}xj(e,!0,o,null,c);break;case"together":xj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jj(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function $i(i,e,o){if(i!==null&&(e.dependencies=i.dependencies),hh|=e.lanes,!(o&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,o=wh(i,i.pendingProps),e.child=o,o.return=e;i.sibling!==null;)i=i.sibling,o=o.sibling=wh(i,i.pendingProps),o.return=e;o.sibling=null}return e.child}function zj(i,e,o){switch(e.tag){case 3:lj(e),Ig();break;case 5:Kh(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;G(Mg,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(G(M,M.current&1),e.flags|=128,null):o&e.child.childLanes?pj(i,e,o):(G(M,M.current&1),i=$i(i,e,o),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if(s=(o&e.childLanes)!==0,i.flags&128){if(s)return yj(i,e,o);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(M,M.current),s)break;return null;case 22:case 23:return e.lanes=0,ej(i,e,o)}return $i(i,e,o)}var Aj,Bj,Cj,Dj;Aj=function(i,e){for(var o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Bj=function(){};Cj=function(i,e,o,s){var a=i.memoizedProps;if(a!==s){i=e.stateNode,Hh(Eh.current);var c=null;switch(o){case"input":a=Ya(i,a),s=Ya(i,s),c=[];break;case"select":a=A({},a,{value:void 0}),s=A({},s,{value:void 0}),c=[];break;case"textarea":a=gb(i,a),s=gb(i,s),c=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(i.onclick=Bf)}ub(o,s);var h;o=null;for(_ in a)if(!s.hasOwnProperty(_)&&a.hasOwnProperty(_)&&a[_]!=null)if(_==="style"){var d=a[_];for(h in d)d.hasOwnProperty(h)&&(o||(o={}),o[h]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in s){var g=s[_];if(d=a!=null?a[_]:void 0,s.hasOwnProperty(_)&&g!==d&&(g!=null||d!=null))if(_==="style")if(d){for(h in d)!d.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(o||(o={}),o[h]="");for(h in g)g.hasOwnProperty(h)&&d[h]!==g[h]&&(o||(o={}),o[h]=g[h])}else o||(c||(c=[]),c.push(_,o)),o=g;else _==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,d=d?d.__html:void 0,g!=null&&d!==g&&(c=c||[]).push(_,g)):_==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(_,""+g):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_)?(g!=null&&_==="onScroll"&&D("scroll",i),c||d===g||(c=[])):(c=c||[]).push(_,g))}o&&(c=c||[]).push("style",o);var _=c;(e.updateQueue=_)&&(e.flags|=4)}};Dj=function(i,e,o,s){o!==s&&(e.flags|=4)};function Ej(i,e){if(!I)switch(i.tailMode){case"hidden":e=i.tail;for(var o=null;e!==null;)e.alternate!==null&&(o=e),e=e.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:s.sibling=null}}function S(i){var e=i.alternate!==null&&i.alternate.child===i.child,o=0,s=0;if(e)for(var a=i.child;a!==null;)o|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=i,a=a.sibling;else for(a=i.child;a!==null;)o|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=i,a=a.sibling;return i.subtreeFlags|=s,i.childLanes=o,e}function Fj(i,e,o){var s=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return s=e.stateNode,Jh(),E(Wf),E(H),Oh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,e),S(e),null;case 5:Lh(e);var a=Hh(Gh.current);if(o=e.type,i!==null&&e.stateNode!=null)Cj(i,e,o,s,a),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(i=Hh(Eh.current),Gg(e)){s=e.stateNode,o=e.type;var c=e.memoizedProps;switch(s[Of]=e,s[Pf]=c,i=(e.mode&1)!==0,o){case"dialog":D("cancel",s),D("close",s);break;case"iframe":case"object":case"embed":D("load",s);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],s);break;case"source":D("error",s);break;case"img":case"image":case"link":D("error",s),D("load",s);break;case"details":D("toggle",s);break;case"input":Za(s,c),D("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},D("invalid",s);break;case"textarea":hb(s,c),D("invalid",s)}ub(o,c),a=null;for(var h in c)if(c.hasOwnProperty(h)){var d=c[h];h==="children"?typeof d=="string"?s.textContent!==d&&(c.suppressHydrationWarning!==!0&&Af(s.textContent,d,i),a=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(c.suppressHydrationWarning!==!0&&Af(s.textContent,d,i),a=["children",""+d]):ea.hasOwnProperty(h)&&d!=null&&h==="onScroll"&&D("scroll",s)}switch(o){case"input":Va(s),db(s,c,!0);break;case"textarea":Va(s),jb(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=Bf)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(o)),i==="http://www.w3.org/1999/xhtml"?o==="script"?(i=h.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof s.is=="string"?i=h.createElement(o,{is:s.is}):(i=h.createElement(o),o==="select"&&(h=i,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):i=h.createElementNS(i,o),i[Of]=e,i[Pf]=s,Aj(i,e,!1,!1),e.stateNode=i;e:{switch(h=vb(o,s),o){case"dialog":D("cancel",i),D("close",i),a=s;break;case"iframe":case"object":case"embed":D("load",i),a=s;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],i);a=s;break;case"source":D("error",i),a=s;break;case"img":case"image":case"link":D("error",i),D("load",i),a=s;break;case"details":D("toggle",i),a=s;break;case"input":Za(i,s),a=Ya(i,s),D("invalid",i);break;case"option":a=s;break;case"select":i._wrapperState={wasMultiple:!!s.multiple},a=A({},s,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,s),a=gb(i,s),D("invalid",i);break;default:a=s}ub(o,a),d=a;for(c in d)if(d.hasOwnProperty(c)){var g=d[c];c==="style"?sb(i,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(i,g)):c==="children"?typeof g=="string"?(o!=="textarea"||g!=="")&&ob(i,g):typeof g=="number"&&ob(i,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D("scroll",i):g!=null&&ta(i,c,g,h))}switch(o){case"input":Va(i),db(i,s,!1);break;case"textarea":Va(i),jb(i);break;case"option":s.value!=null&&i.setAttribute("value",""+Sa(s.value));break;case"select":i.multiple=!!s.multiple,c=s.value,c!=null?fb(i,!!s.multiple,c,!1):s.defaultValue!=null&&fb(i,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(i.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(i&&e.stateNode!=null)Dj(i,e,i.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(p(166));if(o=Hh(Gh.current),Hh(Eh.current),Gg(e)){if(s=e.stateNode,o=e.memoizedProps,s[Of]=e,(c=s.nodeValue!==o)&&(i=xg,i!==null))switch(i.tag){case 3:Af(s.nodeValue,o,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(s.nodeValue,o,(i.mode&1)!==0)}c&&(e.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Of]=e,e.stateNode=s}return S(e),null;case 13:if(E(M),s=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),s!==null&&s.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Gj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=o,e):(s=s!==null,s!==(i!==null&&i.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return Jh(),Bj(i,e),i===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return Rg(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(M),c=e.memoizedState,c===null)return S(e),null;if(s=(e.flags&128)!==0,h=c.rendering,h===null)if(s)Ej(c,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(h=Mh(i),h!==null){for(e.flags|=128,Ej(c,!1),s=h.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=o,o=e.child;o!==null;)c=o,i=s,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,i=h.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),o=o.sibling;return G(M,M.current&1|2),e.child}i=i.sibling}c.tail!==null&&B()>Hj&&(e.flags|=128,s=!0,Ej(c,!1),e.lanes=4194304)}else{if(!s)if(i=Mh(h),i!==null){if(e.flags|=128,s=!0,o=i.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),Ej(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!I)return S(e),null}else 2*B()-c.renderingStartTime>Hj&&o!==1073741824&&(e.flags|=128,s=!0,Ej(c,!1),e.lanes=4194304);c.isBackwards?(h.sibling=e.child,e.child=h):(o=c.last,o!==null?o.sibling=h:e.child=h,c.last=h)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,o=M.current,G(M,s?o&1|2:o&1),e):(S(e),null);case 22:case 23:return Ij(),s=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?gj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Jj(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Jh(),E(Wf),E(H),Oh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(E(M),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,e){var o=i.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){W(i,e,s)}else o.current=null}function Nj(i,e,o){try{o()}catch(s){W(i,e,s)}}var Oj=!1;function Pj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var a=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{o.nodeType,c.nodeType}catch{o=null;break e}var h=0,d=-1,g=-1,_=0,b=0,j=i,_e=null;t:for(;;){for(var $;j!==o||a!==0&&j.nodeType!==3||(d=h+a),j!==c||s!==0&&j.nodeType!==3||(g=h+s),j.nodeType===3&&(h+=j.nodeValue.length),($=j.firstChild)!==null;)_e=j,j=$;for(;;){if(j===i)break t;if(_e===o&&++_===a&&(d=h),_e===c&&++b===s&&(g=h),($=j.nextSibling)!==null)break;j=_e,_e=j.parentNode}j=$}o=d===-1||g===-1?null:{start:d,end:g}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:i,selectionRange:o},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var et=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var rt=et.memoizedProps,st=et.memoizedState,tt=e.stateNode,nt=tt.getSnapshotBeforeUpdate(e.elementType===e.type?rt:Lg(e.type,rt),st);tt.__reactInternalSnapshotBeforeUpdate=nt}break;case 3:var it=e.stateNode.containerInfo;it.nodeType===1?it.textContent="":it.nodeType===9&&it.documentElement&&it.removeChild(it.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(pt){W(e,e.return,pt)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return et=Oj,Oj=!1,et}function Qj(i,e,o){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&i)===i){var c=a.destroy;a.destroy=void 0,c!==void 0&&Nj(e,o,c)}a=a.next}while(a!==s)}}function Rj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var o=e=e.next;do{if((o.tag&i)===i){var s=o.create;o.destroy=s()}o=o.next}while(o!==e)}}function Sj(i){var e=i.ref;if(e!==null){var o=i.stateNode;switch(i.tag){case 5:i=o;break;default:i=o}typeof e=="function"?e(i):e.current=i}}function Tj(i){var e=i.alternate;e!==null&&(i.alternate=null,Tj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,e,o){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?o.nodeType===8?o.parentNode.insertBefore(i,e):o.insertBefore(i,e):(o.nodeType===8?(e=o.parentNode,e.insertBefore(i,o)):(e=o,e.appendChild(i)),o=o._reactRootContainer,o!=null||e.onclick!==null||(e.onclick=Bf));else if(s!==4&&(i=i.child,i!==null))for(Wj(i,e,o),i=i.sibling;i!==null;)Wj(i,e,o),i=i.sibling}function Xj(i,e,o){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?o.insertBefore(i,e):o.appendChild(i);else if(s!==4&&(i=i.child,i!==null))for(Xj(i,e,o),i=i.sibling;i!==null;)Xj(i,e,o),i=i.sibling}var X=null,Yj=!1;function Zj(i,e,o){for(o=o.child;o!==null;)ak(i,e,o),o=o.sibling}function ak(i,e,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Mj(o,e);case 6:var s=X,a=Yj;X=null,Zj(i,e,o),X=s,Yj=a,X!==null&&(Yj?(i=X,o=o.stateNode,i.nodeType===8?i.parentNode.removeChild(o):i.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Yj?(i=X,o=o.stateNode,i.nodeType===8?Kf(i.parentNode,o):i.nodeType===1&&Kf(i,o),bd(i)):Kf(X,o.stateNode));break;case 4:s=X,a=Yj,X=o.stateNode.containerInfo,Yj=!0,Zj(i,e,o),X=s,Yj=a;break;case 0:case 11:case 14:case 15:if(!U&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var c=a,h=c.destroy;c=c.tag,h!==void 0&&(c&2||c&4)&&Nj(o,e,h),a=a.next}while(a!==s)}Zj(i,e,o);break;case 1:if(!U&&(Mj(o,e),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(d){W(o,e,d)}Zj(i,e,o);break;case 21:Zj(i,e,o);break;case 22:o.mode&1?(U=(s=U)||o.memoizedState!==null,Zj(i,e,o),U=s):Zj(i,e,o);break;default:Zj(i,e,o)}}function bk(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var o=i.stateNode;o===null&&(o=i.stateNode=new Lj),e.forEach(function(s){var a=ck.bind(null,i,s);o.has(s)||(o.add(s),s.then(a,a))})}}function dk(i,e){var o=e.deletions;if(o!==null)for(var s=0;s<o.length;s++){var a=o[s];try{var c=i,h=e,d=h;e:for(;d!==null;){switch(d.tag){case 5:X=d.stateNode,Yj=!1;break e;case 3:X=d.stateNode.containerInfo,Yj=!0;break e;case 4:X=d.stateNode.containerInfo,Yj=!0;break e}d=d.return}if(X===null)throw Error(p(160));ak(c,h,a),X=null,Yj=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(_){W(a,e,_)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ek(e,i),e=e.sibling}function ek(i,e){var o=i.alternate,s=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(e,i),fk(i),s&4){try{Qj(3,i,i.return),Rj(3,i)}catch(rt){W(i,i.return,rt)}try{Qj(5,i,i.return)}catch(rt){W(i,i.return,rt)}}break;case 1:dk(e,i),fk(i),s&512&&o!==null&&Mj(o,o.return);break;case 5:if(dk(e,i),fk(i),s&512&&o!==null&&Mj(o,o.return),i.flags&32){var a=i.stateNode;try{ob(a,"")}catch(rt){W(i,i.return,rt)}}if(s&4&&(a=i.stateNode,a!=null)){var c=i.memoizedProps,h=o!==null?o.memoizedProps:c,d=i.type,g=i.updateQueue;if(i.updateQueue=null,g!==null)try{d==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(d,h);var _=vb(d,c);for(h=0;h<g.length;h+=2){var b=g[h],j=g[h+1];b==="style"?sb(a,j):b==="dangerouslySetInnerHTML"?nb(a,j):b==="children"?ob(a,j):ta(a,b,j,_)}switch(d){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var _e=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var $=c.value;$!=null?fb(a,!!c.multiple,$,!1):_e!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(rt){W(i,i.return,rt)}}break;case 6:if(dk(e,i),fk(i),s&4){if(i.stateNode===null)throw Error(p(162));a=i.stateNode,c=i.memoizedProps;try{a.nodeValue=c}catch(rt){W(i,i.return,rt)}}break;case 3:if(dk(e,i),fk(i),s&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(rt){W(i,i.return,rt)}break;case 4:dk(e,i),fk(i);break;case 13:dk(e,i),fk(i),a=i.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(gk=B())),s&4&&bk(i);break;case 22:if(b=o!==null&&o.memoizedState!==null,i.mode&1?(U=(_=U)||b,dk(e,i),U=_):dk(e,i),fk(i),s&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!b&&i.mode&1)for(V=i,b=i.child;b!==null;){for(j=V=b;V!==null;){switch(_e=V,$=_e.child,_e.tag){case 0:case 11:case 14:case 15:Qj(4,_e,_e.return);break;case 1:Mj(_e,_e.return);var et=_e.stateNode;if(typeof et.componentWillUnmount=="function"){s=_e,o=_e.return;try{e=s,et.props=e.memoizedProps,et.state=e.memoizedState,et.componentWillUnmount()}catch(rt){W(s,o,rt)}}break;case 5:Mj(_e,_e.return);break;case 22:if(_e.memoizedState!==null){hk(j);continue}}$!==null?($.return=_e,V=$):hk(j)}b=b.sibling}e:for(b=null,j=i;;){if(j.tag===5){if(b===null){b=j;try{a=j.stateNode,_?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(d=j.stateNode,g=j.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,d.style.display=rb("display",h))}catch(rt){W(i,i.return,rt)}}}else if(j.tag===6){if(b===null)try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(rt){W(i,i.return,rt)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===i)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===i)break e;for(;j.sibling===null;){if(j.return===null||j.return===i)break e;b===j&&(b=null),j=j.return}b===j&&(b=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:dk(e,i),fk(i),s&4&&bk(i);break;case 21:break;default:dk(e,i),fk(i)}}function fk(i){var e=i.flags;if(e&2){try{e:{for(var o=i.return;o!==null;){if(Uj(o)){var s=o;break e}o=o.return}throw Error(p(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ob(a,""),s.flags&=-33);var c=Vj(i);Xj(i,c,a);break;case 3:case 4:var h=s.stateNode.containerInfo,d=Vj(i);Wj(i,d,h);break;default:throw Error(p(161))}}catch(g){W(i,i.return,g)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function ik(i,e,o){V=i,jk(i)}function jk(i,e,o){for(var s=(i.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&s){var h=a.memoizedState!==null||Kj;if(!h){var d=a.alternate,g=d!==null&&d.memoizedState!==null||U;d=Kj;var _=U;if(Kj=h,(U=g)&&!_)for(V=a;V!==null;)h=V,g=h.child,h.tag===22&&h.memoizedState!==null?kk(a):g!==null?(g.return=h,V=g):kk(a);for(;c!==null;)V=c,jk(c),c=c.sibling;V=a,Kj=d,U=_}lk(i)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):lk(i)}}function lk(i){for(;V!==null;){var e=V;if(e.flags&8772){var o=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Rj(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!U)if(o===null)s.componentDidMount();else{var a=e.elementType===e.type?o.memoizedProps:Lg(e.type,o.memoizedProps);s.componentDidUpdate(a,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&ih(e,c,s);break;case 3:var h=e.updateQueue;if(h!==null){if(o=null,e.child!==null)switch(e.child.tag){case 5:o=e.child.stateNode;break;case 1:o=e.child.stateNode}ih(e,h,o)}break;case 5:var d=e.stateNode;if(o===null&&e.flags&4){o=d;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&o.focus();break;case"img":g.src&&(o.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _=e.alternate;if(_!==null){var b=_.memoizedState;if(b!==null){var j=b.dehydrated;j!==null&&bd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Sj(e)}catch(_e){W(e,e.return,_e)}}if(e===i){V=null;break}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}}function hk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var o=e.sibling;if(o!==null){o.return=e.return,V=o;break}V=e.return}}function kk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var o=e.return;try{Rj(4,e)}catch(g){W(e,o,g)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(g){W(e,a,g)}}var c=e.return;try{Sj(e)}catch(g){W(e,c,g)}break;case 5:var h=e.return;try{Sj(e)}catch(g){W(e,h,g)}}}catch(g){W(e,e.return,g)}if(e===i){V=null;break}var d=e.sibling;if(d!==null){d.return=e.return,V=d;break}V=e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok$3=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,e,o,s){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(i,o,s),(!(K&2)||i!==R)&&(i===R&&(!(K&2)&&(rk|=o),T===4&&Dk(i,Z)),Ek(i,s),o===1&&K===0&&!(e.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,e){var o=i.callbackNode;wc(i,e);var s=uc(i,i===R?Z:0);if(s===0)o!==null&&bc(o),i.callbackNode=null,i.callbackPriority=0;else if(e=s&-s,i.callbackPriority!==e){if(o!=null&&bc(o),e===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(s)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Gk(o,Hk.bind(null,i))}i.callbackPriority=e,i.callbackNode=o}}function Hk(i,e){if(Bk=-1,Ck=0,K&6)throw Error(p(327));var o=i.callbackNode;if(Ik()&&i.callbackNode!==o)return null;var s=uc(i,i===R?Z:0);if(s===0)return null;if(s&30||s&i.expiredLanes||e)e=Jk(i,s);else{e=s;var a=K;K|=2;var c=Kk();(R!==i||Z!==e)&&(vk=null,Hj=B()+500,Lk(i,e));do try{Mk();break}catch(d){Nk(i,d)}while(!0);Qg(),nk.current=c,K=a,Y!==null?e=0:(R=null,Z=0,e=T)}if(e!==0){if(e===2&&(a=xc(i),a!==0&&(s=a,e=Ok(i,a))),e===1)throw o=qk,Lk(i,0),Dk(i,s),Ek(i,B()),o;if(e===6)Dk(i,s);else{if(a=i.current.alternate,!(s&30)&&!Pk(a)&&(e=Jk(i,s),e===2&&(c=xc(i),c!==0&&(s=c,e=Ok(i,c))),e===1))throw o=qk,Lk(i,0),Dk(i,s),Ek(i,B()),o;switch(i.finishedWork=a,i.finishedLanes=s,e){case 0:case 1:throw Error(p(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,s),(s&130023424)===s&&(e=gk+500-B(),10<e)){if(uc(i,0)!==0)break;if(a=i.suspendedLanes,(a&s)!==s){L(),i.pingedLanes|=i.suspendedLanes&a;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),e);break}Qk(i,uk,vk);break;case 4:if(Dk(i,s),(s&4194240)===s)break;for(e=i.eventTimes,a=-1;0<s;){var h=31-oc(s);c=1<<h,h=e[h],h>a&&(a=h),s&=~c}if(s=a,s=B()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*mk(s/1960))-s,10<s){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),s);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p(329))}}}return Ek(i,B()),i.callbackNode===o?Hk.bind(null,i):null}function Ok(i,e){var o=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,e).flags|=256),i=Jk(i,e),i!==2&&(e=uk,uk=o,e!==null&&Gj(e)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var e=i;;){if(e.flags&16384){var o=e.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var a=o[s],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(o=e.child,e.subtreeFlags&16384&&o!==null)o.return=e,e=o;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dk(i,e){for(e&=~sk,e&=~rk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var o=31-oc(e),s=1<<o;i[o]=-1,e&=~s}}function Fk(i){if(K&6)throw Error(p(327));Ik();var e=uc(i,0);if(!(e&1))return Ek(i,B()),null;var o=Jk(i,e);if(i.tag!==0&&o===2){var s=xc(i);s!==0&&(e=s,o=Ok(i,s))}if(o===1)throw o=qk,Lk(i,0),Dk(i,e),Ek(i,B()),o;if(o===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,e){var o=K;K|=1;try{return i(e)}finally{K=o,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var e=K;K|=1;var o=pk.transition,s=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=s,pk.transition=o,K=e,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,e){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;if(o!==-1&&(i.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var s=o;switch(wg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(s);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(s.type._context);break;case 22:case 23:Ij()}o=o.return}if(R=i,Y=i=wh(i.current,null),Z=gj=e,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(e=0;e<Wg.length;e++)if(o=Wg[e],s=o.interleaved,s!==null){o.interleaved=null;var a=s.next,c=o.pending;if(c!==null){var h=c.next;c.next=a,s.next=h}o.pending=s}Wg=null}return i}function Nk(i,e){do{var o=Y;try{if(Qg(),Ph.current=ai,Sh){for(var s=N.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok$3.current=null,o===null||o.return===null){T=1,qk=e,Y=null;break}e:{var c=i,h=o.return,d=o,g=e;if(e=Z,d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var _=g,b=d,j=b.tag;if(!(b.mode&1)&&(j===0||j===11||j===15)){var _e=b.alternate;_e?(b.updateQueue=_e.updateQueue,b.memoizedState=_e.memoizedState,b.lanes=_e.lanes):(b.updateQueue=null,b.memoizedState=null)}var $=Vi(h);if($!==null){$.flags&=-257,Wi($,h,d,c,e),$.mode&1&&Ti(c,_,e),e=$,g=_;var et=e.updateQueue;if(et===null){var rt=new Set;rt.add(g),e.updateQueue=rt}else et.add(g);break e}else{if(!(e&1)){Ti(c,_,e),uj();break e}g=Error(p(426))}}else if(I&&d.mode&1){var st=Vi(h);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Wi(st,h,d,c,e),Jg(Ki(g,d));break e}}c=g=Ki(g,d),T!==4&&(T=2),tk===null?tk=[c]:tk.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var tt=Oi(c,g,e);fh(c,tt);break e;case 1:d=g;var nt=c.type,it=c.stateNode;if(!(c.flags&128)&&(typeof nt.getDerivedStateFromError=="function"||it!==null&&typeof it.componentDidCatch=="function"&&(Si===null||!Si.has(it)))){c.flags|=65536,e&=-e,c.lanes|=e;var pt=Ri(c,d,e);fh(c,pt);break e}}c=c.return}while(c!==null)}Tk(o)}catch(lt){e=lt,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(!0)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(i,e){var o=K;K|=2;var s=Kk();(R!==i||Z!==e)&&(vk=null,Lk(i,e));do try{Uk();break}catch(a){Nk(i,a)}while(!0);if(Qg(),K=o,nk.current=s,Y!==null)throw Error(p(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var e=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,e===null?Tk(i):Y=e,ok$3.current=null}function Tk(i){var e=i;do{var o=e.alternate;if(i=e.return,e.flags&32768){if(o=Jj(o,e),o!==null){o.flags&=32767,Y=o;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(o=Fj(o,e,gj),o!==null){Y=o;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T===0&&(T=5)}function Qk(i,e,o){var s=C,a=pk.transition;try{pk.transition=null,C=1,Xk(i,e,o,s)}finally{pk.transition=a,C=s}return null}function Xk(i,e,o,s){do Ik();while(xk!==null);if(K&6)throw Error(p(327));o=i.finishedWork;var a=i.finishedLanes;if(o===null)return null;if(i.finishedWork=null,i.finishedLanes=0,o===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=o.lanes|o.childLanes;if(Bc(i,c),i===R&&(Y=R=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),c=(o.flags&15990)!==0,o.subtreeFlags&15990||c){c=pk.transition,pk.transition=null;var h=C;C=1;var d=K;K|=4,ok$3.current=null,Pj(i,o),ek(o,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=o,ik(o),dc(),K=d,C=h,pk.transition=c}else i.current=o;if(wk&&(wk=!1,xk=i,yk=a),c=i.pendingLanes,c===0&&(Si=null),mc(o.stateNode),Ek(i,B()),e!==null)for(s=i.onRecoverableError,o=0;o<e.length;o++)a=e[o],s(a.value,{componentStack:a.stack,digest:a.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),c=i.pendingLanes,c&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),e=pk.transition,o=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var s=!1;else{if(i=xk,xk=null,yk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=i.current;V!==null;){var c=V,h=c.child;if(V.flags&16){var d=c.deletions;if(d!==null){for(var g=0;g<d.length;g++){var _=d[g];for(V=_;V!==null;){var b=V;switch(b.tag){case 0:case 11:case 15:Qj(8,b,c)}var j=b.child;if(j!==null)j.return=b,V=j;else for(;V!==null;){b=V;var _e=b.sibling,$=b.return;if(Tj(b),b===_){V=null;break}if(_e!==null){_e.return=$,V=_e;break}V=$}}}var et=c.alternate;if(et!==null){var rt=et.child;if(rt!==null){et.child=null;do{var st=rt.sibling;rt.sibling=null,rt=st}while(rt!==null)}}V=c}}if(c.subtreeFlags&2064&&h!==null)h.return=c,V=h;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj(9,c,c.return)}var tt=c.sibling;if(tt!==null){tt.return=c.return,V=tt;break e}V=c.return}}var nt=i.current;for(V=nt;V!==null;){h=V;var it=h.child;if(h.subtreeFlags&2064&&it!==null)it.return=h,V=it;else e:for(h=nt;V!==null;){if(d=V,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Rj(9,d)}}catch(lt){W(d,d.return,lt)}if(d===h){V=null;break e}var pt=d.sibling;if(pt!==null){pt.return=d.return,V=pt;break e}V=d.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}s=!0}return s}finally{C=o,pk.transition=e}}return!1}function Yk(i,e,o){e=Ki(o,e),e=Oi(i,e,1),i=dh(i,e,1),e=L(),i!==null&&(Ac(i,1,e),Ek(i,e))}function W(i,e,o){if(i.tag===3)Yk(i,i,o);else for(;e!==null;){if(e.tag===3){Yk(e,i,o);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Si===null||!Si.has(s))){i=Ki(o,i),i=Ri(e,i,1),e=dh(e,i,1),i=L(),e!==null&&(Ac(e,1,i),Ek(e,i));break}}e=e.return}}function Ui(i,e,o){var s=i.pingCache;s!==null&&s.delete(e),e=L(),i.pingedLanes|=i.suspendedLanes&o,R===i&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=o),Ek(i,e)}function Zk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var o=L();i=Zg(i,e),i!==null&&(Ac(i,e,o),Ek(i,o))}function vj(i){var e=i.memoizedState,o=0;e!==null&&(o=e.retryLane),Zk(i,o)}function ck(i,e){var o=0;switch(i.tag){case 13:var s=i.stateNode,a=i.memoizedState;a!==null&&(o=a.retryLane);break;case 19:s=i.stateNode;break;default:throw Error(p(314))}s!==null&&s.delete(e),Zk(i,o)}var Wk;Wk=function(i,e,o){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&o)&&!(e.flags&128))return Ug=!1,zj(i,e,o);Ug=!!(i.flags&131072)}else Ug=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;jj(i,e),i=e.pendingProps;var a=Yf(e,H.current);Tg(e,o),a=Xh(null,e,s,i,a,o);var c=bi();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(s)?(c=!0,cg(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ah(e),a.updater=nh,e.stateNode=a,a._reactInternals=e,rh(e,s,i,o),e=kj(null,e,s,!0,c,o)):(e.tag=0,I&&c&&vg(e),Yi(null,e,a,o),e=e.child),e;case 16:s=e.elementType;e:{switch(jj(i,e),i=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=$k(s),i=Lg(s,i),a){case 0:e=dj(null,e,s,i,o);break e;case 1:e=ij(null,e,s,i,o);break e;case 11:e=Zi(null,e,s,i,o);break e;case 14:e=aj(null,e,s,Lg(s.type,i),o);break e}throw Error(p(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),dj(i,e,s,a,o);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),ij(i,e,s,a,o);case 3:e:{if(lj(e),i===null)throw Error(p(387));s=e.pendingProps,c=e.memoizedState,a=c.element,bh(i,e),gh(e,s,null,o);var h=e.memoizedState;if(s=h.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ki(Error(p(423)),e),e=mj(i,e,s,o,a);break e}else if(s!==a){a=Ki(Error(p(424)),e),e=mj(i,e,s,o,a);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,o=Ch(e,null,s,o),e.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),s===a){e=$i(i,e,o);break e}Yi(i,e,s,o)}e=e.child}return e;case 5:return Kh(e),i===null&&Eg(e),s=e.type,a=e.pendingProps,c=i!==null?i.memoizedProps:null,h=a.children,Ef(s,a)?h=null:c!==null&&Ef(s,c)&&(e.flags|=32),hj(i,e),Yi(i,e,h,o),e.child;case 6:return i===null&&Eg(e),null;case 13:return pj(i,e,o);case 4:return Ih(e,e.stateNode.containerInfo),s=e.pendingProps,i===null?e.child=Bh(e,null,s,o):Yi(i,e,s,o),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),Zi(i,e,s,a,o);case 7:return Yi(i,e,e.pendingProps,o),e.child;case 8:return Yi(i,e,e.pendingProps.children,o),e.child;case 12:return Yi(i,e,e.pendingProps.children,o),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,c=e.memoizedProps,h=a.value,G(Mg,s._currentValue),s._currentValue=h,c!==null)if(He(c.value,h)){if(c.children===a.children&&!Wf.current){e=$i(i,e,o);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){h=c.child;for(var g=d.firstContext;g!==null;){if(g.context===s){if(c.tag===1){g=ch(-1,o&-o),g.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var b=_.pending;b===null?g.next=g:(g.next=b.next,b.next=g),_.pending=g}}c.lanes|=o,g=c.alternate,g!==null&&(g.lanes|=o),Sg(c.return,o,e),d.lanes|=o;break}g=g.next}}else if(c.tag===10)h=c.type===e.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(p(341));h.lanes|=o,d=h.alternate,d!==null&&(d.lanes|=o),Sg(h,o,e),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===e){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}Yi(i,e,a.children,o),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Tg(e,o),a=Vg(a),s=s(a),e.flags|=1,Yi(i,e,s,o),e.child;case 14:return s=e.type,a=Lg(s,e.pendingProps),a=Lg(s.type,a),aj(i,e,s,a,o);case 15:return cj(i,e,e.type,e.pendingProps,o);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),jj(i,e),e.tag=1,Zf(s)?(i=!0,cg(e)):i=!1,Tg(e,o),ph(e,s,a),rh(e,s,a,o),kj(null,e,s,!0,i,o);case 19:return yj(i,e,o);case 22:return ej(i,e,o)}throw Error(p(156,e.tag))};function Gk(i,e){return ac(i,e)}function al(i,e,o,s){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,o,s){return new al(i,e,o,s)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,e){var o=i.alternate;return o===null?(o=Bg(i.tag,e,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=e,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&14680064,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o}function yh(i,e,o,s,a,c){var h=2;if(s=i,typeof i=="function")bj(i)&&(h=1);else if(typeof i=="string")h=5;else e:switch(i){case ya:return Ah(o.children,a,c,e);case za:h=8,a|=8;break;case Aa:return i=Bg(12,o,e,a|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,o,e,a),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,o,e,a),i.elementType=Fa,i.lanes=c,i;case Ia:return qj(o,a,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:h=10;break e;case Ca:h=9;break e;case Da:h=11;break e;case Ga:h=14;break e;case Ha:h=16,s=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(h,o,e,a),e.elementType=i,e.type=s,e.lanes=c,e}function Ah(i,e,o,s){return i=Bg(7,i,s,e),i.lanes=o,i}function qj(i,e,o,s){return i=Bg(22,i,s,e),i.elementType=Ia,i.lanes=o,i.stateNode={isHidden:!1},i}function xh(i,e,o){return i=Bg(6,i,null,e),i.lanes=o,i}function zh(i,e,o){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=o,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function bl(i,e,o,s,a){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cl(i,e,o,s,a,c,h,d,g){return i=new bl(i,e,o,d,g),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(c),i}function dl(i,e,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:s==null?null:""+s,children:i,containerInfo:e,implementation:o}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var o=i.type;if(Zf(o))return bg(i,o,e)}return e}function fl(i,e,o,s,a,c,h,d,g){return i=cl(o,s,!0,i,a,c,h,d,g),i.context=el(null),o=i.current,s=L(),a=lh(o),c=ch(s,a),c.callback=e??null,dh(o,c,a),i.current.lanes=a,Ac(i,a,s),Ek(i,s),i}function gl(i,e,o,s){var a=e.current,c=L(),h=lh(a);return o=el(o),e.context===null?e.context=o:e.pendingContext=o,e=ch(c,h),e.payload={element:i},s=s===void 0?null:s,s!==null&&(e.callback=s),i=dh(a,e,h),i!==null&&(mh(i,a,h,c),eh(i,a,h)),h}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<e?o:e}}function jl(i,e){il(i,e),(i=i.alternate)&&il(i,e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));gl(i,e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Sk(function(){gl(null,i,null,null)}),e[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var o=0;o<Qc.length&&e!==0&&e<Qc[o].priority;o++);Qc.splice(o,0,i),o===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,e,o,s,a){if(a){if(typeof s=="function"){var c=s;s=function(){var _=hl(h);c.call(_)}}var h=fl(e,s,i,0,null,!1,!1,"",ql);return i._reactRootContainer=h,i[uf]=h.current,sf(i.nodeType===8?i.parentNode:i),Sk(),h}for(;a=i.lastChild;)i.removeChild(a);if(typeof s=="function"){var d=s;s=function(){var _=hl(g);d.call(_)}}var g=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=g,i[uf]=g.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(e,g,o,s)}),g}function sl(i,e,o,s,a){var c=o._reactRootContainer;if(c){var h=c;if(typeof a=="function"){var d=a;a=function(){var g=hl(h);d.call(g)}}gl(e,h,i,a)}else h=rl(o,e,i,a,s);return hl(h)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var o=tc(e.pendingLanes);o!==0&&(Cc(e,o|1),Ek(e,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var s=Zg(i,1);if(s!==null){var a=L();mh(s,i,1,a)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var e=Zg(i,134217728);if(e!==null){var o=L();mh(e,i,134217728,o)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var e=lh(i),o=Zg(i,e);if(o!==null){var s=L();mh(o,i,e,s)}jl(i,e)}};Hc=function(){return C};Ic=function(i,e){var o=C;try{return C=i,e()}finally{C=o}};yb=function(i,e,o){switch(e){case"input":if(bb(i,o),e=o.name,o.type==="radio"&&e!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var s=o[e];if(s!==i&&s.form===i.form){var a=Db(s);if(!a)throw Error(p(90));Wa(s),bb(s,a)}}}break;case"textarea":ib(i,o);break;case"select":e=o.value,e!=null&&fb(i,!!o.multiple,e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(p(200));return dl(i,e,null,o)};reactDom_production_min.createRoot=function(i,e){if(!ol(i))throw Error(p(299));var o=!1,s="",a=ll;return e!=null&&(e.unstable_strictMode===!0&&(o=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=cl(i,1,!1,null,null,o,!1,s,a),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ml(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,e,o){if(!pl(e))throw Error(p(200));return sl(null,i,e,!0,o)};reactDom_production_min.hydrateRoot=function(i,e,o){if(!ol(i))throw Error(p(405));var s=o!=null&&o.hydratedSources||null,a=!1,c="",h=ll;if(o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onRecoverableError!==void 0&&(h=o.onRecoverableError)),e=fl(e,null,i,1,o??null,a,!1,c,h),i[uf]=e.current,sf(i),s)for(i=0;i<s.length;i++)o=s[i],a=o._getVersion,a=a(o._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[o,a]:e.mutableSourceEagerHydrationData.push(o,a);return new nl(e)};reactDom_production_min.render=function(i,e,o){if(!pl(e))throw Error(p(200));return sl(null,i,e,!1,o)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,o,s){if(!pl(o))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return sl(i,e,o,!1,s)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.15.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},_extends$2.apply(this,arguments)}var Action;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(i){i===void 0&&(i={});function e(s,a){let{pathname:c,search:h,hash:d}=s.location;return createLocation("",{pathname:c,search:h,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function o(s,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(e,o,null,i)}function invariant$1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning$2(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,o,s){return o===void 0&&(o=null),_extends$2({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:o,key:e&&e.key||s||createKey()})}function createPath(i){let{pathname:e="/",search:o="",hash:s=""}=i;return o&&o!=="?"&&(e+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function parsePath(i){let e={};if(i){let o=i.indexOf("#");o>=0&&(e.hash=i.substr(o),i=i.substr(0,o));let s=i.indexOf("?");s>=0&&(e.search=i.substr(s),i=i.substr(0,s)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,o,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,h=a.history,d=Action.Pop,g=null,_=b();_==null&&(_=0,h.replaceState(_extends$2({},h.state,{idx:_}),""));function b(){return(h.state||{idx:null}).idx}function j(){d=Action.Pop;let st=b(),tt=st==null?null:st-_;_=st,g&&g({action:d,location:rt.location,delta:tt})}function _e(st,tt){d=Action.Push;let nt=createLocation(rt.location,st,tt);o&&o(nt,st),_=b()+1;let it=getHistoryState(nt,_),pt=rt.createHref(nt);try{h.pushState(it,"",pt)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;a.location.assign(pt)}c&&g&&g({action:d,location:rt.location,delta:1})}function $(st,tt){d=Action.Replace;let nt=createLocation(rt.location,st,tt);o&&o(nt,st),_=b();let it=getHistoryState(nt,_),pt=rt.createHref(nt);h.replaceState(it,"",pt),c&&g&&g({action:d,location:rt.location,delta:0})}function et(st){let tt=a.location.origin!=="null"?a.location.origin:a.location.href,nt=typeof st=="string"?st:createPath(st);return nt=nt.replace(/ $/,"%20"),invariant$1(tt,"No window.location.(origin|href) available to create URL for href: "+nt),new URL(nt,tt)}let rt={get action(){return d},get location(){return i(a,h)},listen(st){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,j),g=st,()=>{a.removeEventListener(PopStateEventType,j),g=null}},createHref(st){return e(a,st)},createURL:et,encodeLocation(st){let tt=et(st);return{pathname:tt.pathname,search:tt.search,hash:tt.hash}},push:_e,replace:$,go(st){return h.go(st)}};return rt}var ResultType;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(ResultType||(ResultType={}));function matchRoutes(i,e,o){o===void 0&&(o="/");let s=typeof e=="string"?parsePath(e):e,a=stripBasename(s.pathname||"/",o);if(a==null)return null;let c=flattenRoutes(i);rankRouteBranches(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let g=decodePath(a);h=matchRouteBranch(c[d],g)}return h}function flattenRoutes(i,e,o,s){e===void 0&&(e=[]),o===void 0&&(o=[]),s===void 0&&(s="");let a=(c,h,d)=>{let g={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(invariant$1(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let _=joinPaths([s,g.relativePath]),b=o.concat(g);c.children&&c.children.length>0&&(invariant$1(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),flattenRoutes(c.children,e,b,_)),!(c.path==null&&!c.index)&&e.push({path:_,score:computeScore(_,c.index),routesMeta:b})};return i.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))a(c,h);else for(let g of explodeOptionalSegments(c.path))a(c,h,g)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[o,...s]=e,a=o.endsWith("?"),c=o.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let h=explodeOptionalSegments(s.join("/")),d=[];return d.push(...h.map(g=>g===""?c:[c,g].join("/"))),a&&d.push(...h),d.map(g=>i.startsWith("/")&&g===""?"/":g)}function rankRouteBranches(i){i.sort((e,o)=>e.score!==o.score?o.score-e.score:compareIndexes(e.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let o=i.split("/"),s=o.length;return o.some(isSplat)&&(s+=splatPenalty),e&&(s+=indexRouteValue),o.filter(a=>!isSplat(a)).reduce((a,c)=>a+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e){let{routesMeta:o}=i,s={},a="/",c=[];for(let h=0;h<o.length;++h){let d=o[h],g=h===o.length-1,_=a==="/"?e:e.slice(a.length)||"/",b=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},_);if(!b)return null;Object.assign(s,b.params);let j=d.route;c.push({params:s,pathname:joinPaths([a,b.pathname]),pathnameBase:normalizePathname(joinPaths([a,b.pathnameBase])),route:j}),b.pathnameBase!=="/"&&(a=joinPaths([a,b.pathnameBase]))}return c}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[o,s]=compilePath(i.path,i.caseSensitive,i.end),a=e.match(o);if(!a)return null;let c=a[0],h=c.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((_,b,j)=>{let{paramName:_e,isOptional:$}=b;if(_e==="*"){let rt=d[j]||"";h=c.slice(0,c.length-rt.length).replace(/(.)\/+$/,"$1")}const et=d[j];return $&&!et?_[_e]=void 0:_[_e]=(et||"").replace(/%2F/g,"/"),_},{}),pathname:c,pathnameBase:h,pattern:i}}function compilePath(i,e,o){e===void 0&&(e=!1),o===void 0&&(o=!0),warning$2(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,g)=>(s.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function decodePath(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$2(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let o=e.endsWith("/")?e.length-1:e.length,s=i.charAt(o);return s&&s!=="/"?null:i.slice(o)||"/"}function resolvePath(i,e){e===void 0&&(e="/");let{pathname:o,search:s="",hash:a=""}=typeof i=="string"?parsePath(i):i;return{pathname:o?o.startsWith("/")?o:resolvePathname(o,e):e,search:normalizeSearch(s),hash:normalizeHash(a)}}function resolvePathname(i,e){let o=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?o.length>1&&o.pop():a!=="."&&o.push(a)}),o.length>1?o.join("/"):"/"}function getInvalidPathError(i,e,o,s){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(i){return i.filter((e,o)=>o===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i,e){let o=getPathContributingMatches(i);return e?o.map((s,a)=>a===i.length-1?s.pathname:s.pathnameBase):o.map(s=>s.pathnameBase)}function resolveTo(i,e,o,s){s===void 0&&(s=!1);let a;typeof i=="string"?a=parsePath(i):(a=_extends$2({},i),invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let c=i===""||a.pathname==="",h=c?"/":a.pathname,d;if(h==null)d=o;else{let j=e.length-1;if(!s&&h.startsWith("..")){let _e=h.split("/");for(;_e[0]==="..";)_e.shift(),j-=1;a.pathname=_e.join("/")}d=j>=0?e[j]:"/"}let g=resolvePath(a,d),_=h&&h!=="/"&&h.endsWith("/"),b=(c||h===".")&&o.endsWith("/");return!g.pathname.endsWith("/")&&(_||b)&&(g.pathname+="/"),g}const joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(i,e){let{relative:o}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:s,navigator:a}=reactExports.useContext(NavigationContext),{hash:c,pathname:h,search:d}=useResolvedPath(i,{relative:o}),g=h;return s!=="/"&&(g=h==="/"?s:joinPaths([s,h])),a.createHref({pathname:g,search:d,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let i=reactExports.useContext(DataRouterContext),{basename:e,future:o,navigator:s}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),h=JSON.stringify(getResolveToMatches(a,o.v7_relativeSplatPath)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{d.current=!0}),reactExports.useCallback(function(_,b){if(b===void 0&&(b={}),!d.current)return;if(typeof _=="number"){s.go(_);return}let j=resolveTo(_,JSON.parse(h),c,b.relative==="path");i==null&&e!=="/"&&(j.pathname=j.pathname==="/"?e:joinPaths([e,j.pathname])),(b.replace?s.replace:s.push)(j,b.state,b)},[e,s,h,c,i])}function useParams(){let{matches:i}=reactExports.useContext(RouteContext),e=i[i.length-1];return e?e.params:{}}function useResolvedPath(i,e){let{relative:o}=e===void 0?{}:e,{future:s}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),h=JSON.stringify(getResolveToMatches(a,s.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(h),c,o==="path"),[i,h,c,o])}function useRoutes(i,e){return useRoutesImpl(i,e)}function useRoutesImpl(i,e,o,s){useInRouterContext()||invariant$1(!1);let{navigator:a}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),h=c[c.length-1],d=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let _=useLocation(),b;if(e){var j;let st=typeof e=="string"?parsePath(e):e;g==="/"||(j=st.pathname)!=null&&j.startsWith(g)||invariant$1(!1),b=st}else b=_;let _e=b.pathname||"/",$=_e;if(g!=="/"){let st=g.replace(/^\//,"").split("/");$="/"+_e.replace(/^\//,"").split("/").slice(st.length).join("/")}let et=matchRoutes(i,{pathname:$}),rt=_renderMatches(et&&et.map(st=>Object.assign({},st,{params:Object.assign({},d,st.params),pathname:joinPaths([g,a.encodeLocation?a.encodeLocation(st.pathname).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?g:joinPaths([g,a.encodeLocation?a.encodeLocation(st.pathnameBase).pathname:st.pathnameBase])})),c,o,s);return e&&rt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Action.Pop}},rt):rt}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),o=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),o?reactExports.createElement("pre",{style:a},o):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,o){return o.location!==e.location||o.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:o.error,location:o.location,revalidation:e.revalidation||o.revalidation}}componentDidCatch(e,o){console.error("React Router caught the following error during render",e,o)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(i){let{routeContext:e,match:o,children:s}=i,a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=o.route.id),reactExports.createElement(RouteContext.Provider,{value:e},s)}function _renderMatches(i,e,o,s){var a;if(e===void 0&&(e=[]),o===void 0&&(o=null),s===void 0&&(s=null),i==null){var c;if((c=o)!=null&&c.errors)i=o.matches;else return null}let h=i,d=(a=o)==null?void 0:a.errors;if(d!=null){let b=h.findIndex(j=>j.route.id&&(d==null?void 0:d[j.route.id]));b>=0||invariant$1(!1),h=h.slice(0,Math.min(h.length,b+1))}let g=!1,_=-1;if(o&&s&&s.v7_partialHydration)for(let b=0;b<h.length;b++){let j=h[b];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(_=b),j.route.id){let{loaderData:_e,errors:$}=o,et=j.route.loader&&_e[j.route.id]===void 0&&(!$||$[j.route.id]===void 0);if(j.route.lazy||et){g=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}return h.reduceRight((b,j,_e)=>{let $,et=!1,rt=null,st=null;o&&($=d&&j.route.id?d[j.route.id]:void 0,rt=j.route.errorElement||defaultErrorElement,g&&(_<0&&_e===0?(warningOnce("route-fallback",!1),et=!0,st=null):_===_e&&(et=!0,st=j.route.hydrateFallbackElement||null)));let tt=e.concat(h.slice(0,_e+1)),nt=()=>{let it;return $?it=rt:et?it=st:j.route.Component?it=reactExports.createElement(j.route.Component,null):j.route.element?it=j.route.element:it=b,reactExports.createElement(RenderedRoute,{match:j,routeContext:{outlet:b,matches:tt,isDataRoute:o!=null},children:it})};return o&&(j.route.ErrorBoundary||j.route.errorElement||_e===0)?reactExports.createElement(RenderErrorBoundary,{location:o.location,revalidation:o.revalidation,component:rt,error:$,children:nt(),routeContext:{outlet:null,matches:tt,isDataRoute:!0}}):nt()},null)}var DataRouterHook$1=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(DataRouterHook$1||{}),DataRouterStateHook$1=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(DataRouterStateHook$1||{});function useDataRouterContext(i){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(i){let e=useRouteContext(),o=e.matches[e.matches.length-1];return o.route.id||invariant$1(!1),o.route.id}function useRouteError(){var i;let e=reactExports.useContext(RouteErrorContext),o=useDataRouterState(DataRouterStateHook$1.UseRouteError),s=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(i=o.errors)==null?void 0:i[s]}function useNavigateStable(){let{router:i}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{o.current=!0}),reactExports.useCallback(function(a,c){c===void 0&&(c={}),o.current&&(typeof a=="number"?i.navigate(a):i.navigate(a,_extends$1({fromRouteId:e},c)))},[i,e])}const alreadyWarned={};function warningOnce(i,e,o){!e&&!alreadyWarned[i]&&(alreadyWarned[i]=!0)}function Route(i){invariant$1(!1)}function Router(i){let{basename:e="/",children:o=null,location:s,navigationType:a=Action.Pop,navigator:c,static:h=!1,future:d}=i;useInRouterContext()&&invariant$1(!1);let g=e.replace(/^\/*/,"/"),_=reactExports.useMemo(()=>({basename:g,navigator:c,static:h,future:_extends$1({v7_relativeSplatPath:!1},d)}),[g,d,c,h]);typeof s=="string"&&(s=parsePath(s));let{pathname:b="/",search:j="",hash:_e="",state:$=null,key:et="default"}=s,rt=reactExports.useMemo(()=>{let st=stripBasename(b,g);return st==null?null:{location:{pathname:st,search:j,hash:_e,state:$,key:et},navigationType:a}},[g,b,j,_e,$,et,a]);return rt==null?null:reactExports.createElement(NavigationContext.Provider,{value:_},reactExports.createElement(LocationContext.Provider,{children:o,value:rt}))}function Routes(i){let{children:e,location:o}=i;return useRoutes(createRoutesFromChildren(e),o)}new Promise(()=>{});function createRoutesFromChildren(i,e){e===void 0&&(e=[]);let o=[];return reactExports.Children.forEach(i,(s,a)=>{if(!reactExports.isValidElement(s))return;let c=[...e,a];if(s.type===reactExports.Fragment){o.push.apply(o,createRoutesFromChildren(s.props.children,c));return}s.type!==Route&&invariant$1(!1),!s.props.index||!s.props.children||invariant$1(!1);let h={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=createRoutesFromChildren(s.props.children,c)),o.push(h)}),o}/**
 * React Router DOM v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var o={},s=Object.keys(i),a,c;for(c=0;c<s.length;c++)a=s[c],!(e.indexOf(a)>=0)&&(o[a]=i[a]);return o}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,e){return i.button===0&&(!e||e==="_self")&&!isModifiedEvent(i)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(i){let{basename:e,children:o,future:s,window:a}=i,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:a,v5Compat:!0}));let h=c.current,[d,g]=reactExports.useState({action:h.action,location:h.location}),{v7_startTransition:_}=s||{},b=reactExports.useCallback(j=>{_&&startTransitionImpl?startTransitionImpl(()=>g(j)):g(j)},[g,_]);return reactExports.useLayoutEffect(()=>h.listen(b),[h,b]),reactExports.createElement(Router,{basename:e,children:o,location:d.location,navigationType:d.action,navigator:h,future:s})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,o){let{onClick:s,relative:a,reloadDocument:c,replace:h,state:d,target:g,to:_,preventScrollReset:b,unstable_viewTransition:j}=e,_e=_objectWithoutPropertiesLoose(e,_excluded),{basename:$}=reactExports.useContext(NavigationContext),et,rt=!1;if(typeof _=="string"&&ABSOLUTE_URL_REGEX.test(_)&&(et=_,isBrowser$1))try{let it=new URL(window.location.href),pt=_.startsWith("//")?new URL(it.protocol+_):new URL(_),lt=stripBasename(pt.pathname,$);pt.origin===it.origin&&lt!=null?_=lt+pt.search+pt.hash:rt=!0}catch{}let st=useHref(_,{relative:a}),tt=useLinkClickHandler(_,{replace:h,state:d,target:g,preventScrollReset:b,relative:a,unstable_viewTransition:j});function nt(it){s&&s(it),it.defaultPrevented||tt(it)}return reactExports.createElement("a",_extends({},_e,{href:et||st,onClick:rt||c?s:nt,ref:o,target:g}))});var DataRouterHook;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(i,e){let{target:o,replace:s,state:a,preventScrollReset:c,relative:h,unstable_viewTransition:d}=e===void 0?{}:e,g=useNavigate(),_=useLocation(),b=useResolvedPath(i,{relative:h});return reactExports.useCallback(j=>{if(shouldProcessLinkClick(j,o)){j.preventDefault();let _e=s!==void 0?s:createPath(_)===createPath(b);g(i,{replace:_e,state:a,preventScrollReset:c,relative:h,unstable_viewTransition:d})}},[_,g,b,s,a,o,i,c,h,d])}var define_import_meta_env_default={VITE_ENTRA_CLIENT_ID:"3952eac2-55db-48e3-a7cb-0c8f074a0190",VITE_ENTRA_TENANT_ID:"a7053deb-181e-4402-b6e4-7b89b67613de",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const environment_prod={production:!0,api:"/api"};console.log({env:define_import_meta_env_default});const environment=environment_prod;/*! @azure/msal-common v14.7.1 2024-02-17 */const Constants={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},HttpStatus={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},OIDC_DEFAULT_SCOPES=[Constants.OPENID_SCOPE,Constants.PROFILE_SCOPE,Constants.OFFLINE_ACCESS_SCOPE],OIDC_SCOPES=[...OIDC_DEFAULT_SCOPES,Constants.EMAIL_SCOPE],HeaderNames={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},PersistentCacheKeys={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},AADAuthorityConstants={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ClaimsRequestKeys={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},PromptValue={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},CodeChallengeMethodValues={PLAIN:"plain",S256:"S256"},ServerResponseType={QUERY:"query",FRAGMENT:"fragment"},ResponseMode={...ServerResponseType,FORM_POST:"form_post"},GrantType={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},CacheAccountType={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Separators={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},CredentialType={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},APP_METADATA="appmetadata",CLIENT_INFO="client_info",THE_FAMILY_ID="1",AUTHORITY_METADATA_CONSTANTS={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},AuthorityMetadataSource={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},SERVER_TELEM_CONSTANTS={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},AuthenticationScheme={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ThrottlingConstants={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Errors={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},PasswordGrantConstants={username:"username",password:"password"},ResponseCodes={httpSuccess:200,httpBadRequest:400},RegionDiscoverySources={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},RegionDiscoveryOutcomes={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},CacheOutcome={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},JsonWebTokenTypes={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};/*! @azure/msal-common v14.7.1 2024-02-17 */const unexpectedError="unexpected_error",postRequestFailed$1="post_request_failed";/*! @azure/msal-common v14.7.1 2024-02-17 */const AuthErrorMessages={[unexpectedError]:"Unexpected error in authentication.",[postRequestFailed$1]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class AuthError extends Error{constructor(e,o,s){const a=o?`${e}: ${o}`:e;super(a),Object.setPrototypeOf(this,AuthError.prototype),this.errorCode=e||Constants.EMPTY_STRING,this.errorMessage=o||Constants.EMPTY_STRING,this.subError=s||Constants.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function createAuthError(i,e){return new AuthError(i,e?`${AuthErrorMessages[i]} ${e}`:AuthErrorMessages[i])}/*! @azure/msal-common v14.7.1 2024-02-17 */const clientInfoDecodingError="client_info_decoding_error",clientInfoEmptyError="client_info_empty_error",tokenParsingError="token_parsing_error",nullOrEmptyToken="null_or_empty_token",endpointResolutionError="endpoints_resolution_error",networkError="network_error",openIdConfigError="openid_config_error",hashNotDeserialized="hash_not_deserialized",invalidState="invalid_state",stateMismatch="state_mismatch",stateNotFound="state_not_found",nonceMismatch="nonce_mismatch",authTimeNotFound="auth_time_not_found",maxAgeTranspired="max_age_transpired",multipleMatchingTokens="multiple_matching_tokens",multipleMatchingAccounts="multiple_matching_accounts",multipleMatchingAppMetadata="multiple_matching_appMetadata",requestCannotBeMade="request_cannot_be_made",cannotRemoveEmptyScope="cannot_remove_empty_scope",cannotAppendScopeSet="cannot_append_scopeset",emptyInputScopeSet="empty_input_scopeset",deviceCodePollingCancelled="device_code_polling_cancelled",deviceCodeExpired="device_code_expired",deviceCodeUnknownError="device_code_unknown_error",noAccountInSilentRequest="no_account_in_silent_request",invalidCacheRecord="invalid_cache_record",invalidCacheEnvironment="invalid_cache_environment",noAccountFound="no_account_found",noCryptoObject="no_crypto_object",unexpectedCredentialType="unexpected_credential_type",invalidAssertion="invalid_assertion",invalidClientCredential="invalid_client_credential",tokenRefreshRequired="token_refresh_required",userTimeoutReached="user_timeout_reached",tokenClaimsCnfRequiredForSignedJwt="token_claims_cnf_required_for_signedjwt",authorizationCodeMissingFromServerResponse="authorization_code_missing_from_server_response",bindingKeyNotRemoved="binding_key_not_removed",endSessionEndpointNotSupported="end_session_endpoint_not_supported",keyIdMissing="key_id_missing",noNetworkConnectivity$1="no_network_connectivity",userCanceled="user_canceled",missingTenantIdError="missing_tenant_id_error",methodNotImplemented="method_not_implemented",nestedAppAuthBridgeDisabled="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.7.1 2024-02-17 */const ClientAuthErrorMessages={[clientInfoDecodingError]:"The client info could not be parsed/decoded correctly",[clientInfoEmptyError]:"The client info was empty",[tokenParsingError]:"Token cannot be parsed",[nullOrEmptyToken]:"The token is null or empty",[endpointResolutionError]:"Endpoints cannot be resolved",[networkError]:"Network request failed",[openIdConfigError]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[hashNotDeserialized]:"The hash parameters could not be deserialized",[invalidState]:"State was not the expected format",[stateMismatch]:"State mismatch error",[stateNotFound]:"State not found",[nonceMismatch]:"Nonce mismatch error",[authTimeNotFound]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[maxAgeTranspired]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[multipleMatchingTokens]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[multipleMatchingAccounts]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[multipleMatchingAppMetadata]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[requestCannotBeMade]:"Token request cannot be made without authorization code or refresh token.",[cannotRemoveEmptyScope]:"Cannot remove null or empty scope from ScopeSet",[cannotAppendScopeSet]:"Cannot append ScopeSet",[emptyInputScopeSet]:"Empty input ScopeSet cannot be processed",[deviceCodePollingCancelled]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[deviceCodeExpired]:"Device code is expired.",[deviceCodeUnknownError]:"Device code stopped polling for unknown reasons.",[noAccountInSilentRequest]:"Please pass an account object, silent flow is not supported without account information",[invalidCacheRecord]:"Cache record object was null or undefined.",[invalidCacheEnvironment]:"Invalid environment when attempting to create cache entry",[noAccountFound]:"No account found in cache for given key.",[noCryptoObject]:"No crypto object detected.",[unexpectedCredentialType]:"Unexpected credential type.",[invalidAssertion]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[invalidClientCredential]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[tokenRefreshRequired]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[userTimeoutReached]:"User defined timeout for device code polling reached",[tokenClaimsCnfRequiredForSignedJwt]:"Cannot generate a POP jwt if the token_claims are not populated",[authorizationCodeMissingFromServerResponse]:"Server response does not contain an authorization code to proceed",[bindingKeyNotRemoved]:"Could not remove the credential's binding key from storage.",[endSessionEndpointNotSupported]:"The provided authority does not support logout",[keyIdMissing]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[noNetworkConnectivity$1]:"No network connectivity. Check your internet connection.",[userCanceled]:"User cancelled the flow.",[missingTenantIdError]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[methodNotImplemented]:"This method has not been implemented",[nestedAppAuthBridgeDisabled]:"The nested app auth bridge is disabled"};class ClientAuthError extends AuthError{constructor(e,o){super(e,o?`${ClientAuthErrorMessages[e]}: ${o}`:ClientAuthErrorMessages[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ClientAuthError.prototype)}}function createClientAuthError(i,e){return new ClientAuthError(i,e)}/*! @azure/msal-common v14.7.1 2024-02-17 */const DEFAULT_CRYPTO_IMPLEMENTATION={createNewGuid:()=>{throw createClientAuthError(methodNotImplemented)},base64Decode:()=>{throw createClientAuthError(methodNotImplemented)},base64Encode:()=>{throw createClientAuthError(methodNotImplemented)},async getPublicKeyThumbprint(){throw createClientAuthError(methodNotImplemented)},async removeTokenBindingKey(){throw createClientAuthError(methodNotImplemented)},async clearKeystore(){throw createClientAuthError(methodNotImplemented)},async signJwt(){throw createClientAuthError(methodNotImplemented)},async hashString(){throw createClientAuthError(methodNotImplemented)}};/*! @azure/msal-common v14.7.1 2024-02-17 */var LogLevel;(function(i){i[i.Error=0]="Error",i[i.Warning=1]="Warning",i[i.Info=2]="Info",i[i.Verbose=3]="Verbose",i[i.Trace=4]="Trace"})(LogLevel||(LogLevel={}));class Logger{constructor(e,o,s){this.level=LogLevel.Info;const a=()=>{},c=e||Logger.createDefaultLoggerOptions();this.localCallback=c.loggerCallback||a,this.piiLoggingEnabled=c.piiLoggingEnabled||!1,this.level=typeof c.logLevel=="number"?c.logLevel:LogLevel.Info,this.correlationId=c.correlationId||Constants.EMPTY_STRING,this.packageName=o||Constants.EMPTY_STRING,this.packageVersion=s||Constants.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info}}clone(e,o,s){return new Logger({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:s||this.correlationId},e,o)}logMessage(e,o){if(o.logLevel>this.level||!this.piiLoggingEnabled&&o.containsPii)return;const c=`${`[${new Date().toUTCString()}] : [${o.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${LogLevel[o.logLevel]} - ${e}`;this.executeCallback(o.logLevel,c,o.containsPii||!1)}executeCallback(e,o,s){this.localCallback&&this.localCallback(e,o,s)}error(e,o){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}errorPii(e,o){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}warning(e,o){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}warningPii(e,o){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}info(e,o){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}infoPii(e,o){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}verbose(e,o){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}verbosePii(e,o){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}trace(e,o){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}tracePii(e,o){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.7.1 2024-02-17 */const name$3="@azure/msal-common",version$2="14.7.1";/*! @azure/msal-common v14.7.1 2024-02-17 */const AzureCloudInstance={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.7.1 2024-02-17 */function extractTokenClaims(i,e){const o=getJWSPayload(i);try{const s=e(o);return JSON.parse(s)}catch{throw createClientAuthError(tokenParsingError)}}function getJWSPayload(i){if(!i)throw createClientAuthError(nullOrEmptyToken);const o=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(i);if(!o||o.length<4)throw createClientAuthError(tokenParsingError);return o[2]}function checkMaxAge(i,e){if(e===0||Date.now()-3e5>i+e)throw createClientAuthError(maxAgeTranspired)}/*! @azure/msal-common v14.7.1 2024-02-17 */function nowSeconds(){return Math.round(new Date().getTime()/1e3)}function isTokenExpired(i,e){const o=Number(i)||0;return nowSeconds()+e>o}function wasClockTurnedBack(i){return Number(i)>nowSeconds()}/*! @azure/msal-common v14.7.1 2024-02-17 */function generateCredentialKey(i){return[generateAccountId(i),generateCredentialId(i),generateTarget(i),generateClaimsHash(i),generateScheme(i)].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function createIdTokenEntity(i,e,o,s,a){return{credentialType:CredentialType.ID_TOKEN,homeAccountId:i,environment:e,clientId:s,secret:o,realm:a}}function createAccessTokenEntity(i,e,o,s,a,c,h,d,g,_,b,j,_e,$,et){var st,tt;const rt={homeAccountId:i,credentialType:CredentialType.ACCESS_TOKEN,secret:o,cachedAt:nowSeconds().toString(),expiresOn:h.toString(),extendedExpiresOn:d.toString(),environment:e,clientId:s,realm:a,target:c,tokenType:b||AuthenticationScheme.BEARER};if(j&&(rt.userAssertionHash=j),_&&(rt.refreshOn=_.toString()),$&&(rt.requestedClaims=$,rt.requestedClaimsHash=et),((st=rt.tokenType)==null?void 0:st.toLowerCase())!==AuthenticationScheme.BEARER.toLowerCase())switch(rt.credentialType=CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME,rt.tokenType){case AuthenticationScheme.POP:const nt=extractTokenClaims(o,g);if(!((tt=nt==null?void 0:nt.cnf)!=null&&tt.kid))throw createClientAuthError(tokenClaimsCnfRequiredForSignedJwt);rt.keyId=nt.cnf.kid;break;case AuthenticationScheme.SSH:rt.keyId=_e}return rt}function createRefreshTokenEntity(i,e,o,s,a,c,h){const d={credentialType:CredentialType.REFRESH_TOKEN,homeAccountId:i,environment:e,clientId:s,secret:o};return c&&(d.userAssertionHash=c),a&&(d.familyId=a),h&&(d.expiresOn=h.toString()),d}function isCredentialEntity(i){return i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("credentialType")&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("secret")}function isAccessTokenEntity(i){return i?isCredentialEntity(i)&&i.hasOwnProperty("realm")&&i.hasOwnProperty("target")&&(i.credentialType===CredentialType.ACCESS_TOKEN||i.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function isIdTokenEntity(i){return i?isCredentialEntity(i)&&i.hasOwnProperty("realm")&&i.credentialType===CredentialType.ID_TOKEN:!1}function isRefreshTokenEntity(i){return i?isCredentialEntity(i)&&i.credentialType===CredentialType.REFRESH_TOKEN:!1}function generateAccountId(i){return[i.homeAccountId,i.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateCredentialId(i){const e=i.credentialType===CredentialType.REFRESH_TOKEN&&i.familyId||i.clientId;return[i.credentialType,e,i.realm||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateTarget(i){return(i.target||"").toLowerCase()}function generateClaimsHash(i){return(i.requestedClaimsHash||"").toLowerCase()}function generateScheme(i){return i.tokenType&&i.tokenType.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?i.tokenType.toLowerCase():""}function isServerTelemetryEntity(i,e){const o=i.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY)===0;let s=!0;return e&&(s=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),o&&s}function isThrottlingEntity(i,e){let o=!1;i&&(o=i.indexOf(ThrottlingConstants.THROTTLING_PREFIX)===0);let s=!0;return e&&(s=e.hasOwnProperty("throttleTime")),o&&s}function generateAppMetadataKey({environment:i,clientId:e}){return[APP_METADATA,i,e].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function isAppMetadataEntity(i,e){return e?i.indexOf(APP_METADATA)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function isAuthorityMetadataEntity(i,e){return e?i.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function generateAuthorityMetadataExpiresAt(){return nowSeconds()+AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS}function updateAuthorityEndpointMetadata(i,e,o){i.authorization_endpoint=e.authorization_endpoint,i.token_endpoint=e.token_endpoint,i.end_session_endpoint=e.end_session_endpoint,i.issuer=e.issuer,i.endpointsFromNetwork=o,i.jwks_uri=e.jwks_uri}function updateCloudDiscoveryMetadata(i,e,o){i.aliases=e.aliases,i.preferred_cache=e.preferred_cache,i.preferred_network=e.preferred_network,i.aliasesFromNetwork=o}function isAuthorityMetadataExpired(i){return i.expiresAt<=nowSeconds()}/*! @azure/msal-common v14.7.1 2024-02-17 */const redirectUriEmpty="redirect_uri_empty",claimsRequestParsingError="claims_request_parsing_error",authorityUriInsecure="authority_uri_insecure",urlParseError="url_parse_error",urlEmptyError="empty_url_error",emptyInputScopesError="empty_input_scopes_error",invalidPromptValue="invalid_prompt_value",invalidClaims="invalid_claims",tokenRequestEmpty="token_request_empty",logoutRequestEmpty="logout_request_empty",invalidCodeChallengeMethod="invalid_code_challenge_method",pkceParamsMissing="pkce_params_missing",invalidCloudDiscoveryMetadata="invalid_cloud_discovery_metadata",invalidAuthorityMetadata="invalid_authority_metadata",untrustedAuthority="untrusted_authority",missingSshJwk="missing_ssh_jwk",missingSshKid="missing_ssh_kid",missingNonceAuthenticationHeader="missing_nonce_authentication_header",invalidAuthenticationHeader="invalid_authentication_header",cannotSetOIDCOptions="cannot_set_OIDCOptions",cannotAllowNativeBroker="cannot_allow_native_broker",authorityMismatch="authority_mismatch";/*! @azure/msal-common v14.7.1 2024-02-17 */const ClientConfigurationErrorMessages={[redirectUriEmpty]:"A redirect URI is required for all calls, and none has been set.",[claimsRequestParsingError]:"Could not parse the given claims request object.",[authorityUriInsecure]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[urlParseError]:"URL could not be parsed into appropriate segments.",[urlEmptyError]:"URL was empty or null.",[emptyInputScopesError]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[invalidPromptValue]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[invalidClaims]:"Given claims parameter must be a stringified JSON object.",[tokenRequestEmpty]:"Token request was empty and not found in cache.",[logoutRequestEmpty]:"The logout request was null or undefined.",[invalidCodeChallengeMethod]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[pkceParamsMissing]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[invalidCloudDiscoveryMetadata]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[invalidAuthorityMetadata]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[untrustedAuthority]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[missingSshJwk]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[missingSshKid]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[missingNonceAuthenticationHeader]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[invalidAuthenticationHeader]:"Invalid authentication header provided",[cannotSetOIDCOptions]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[cannotAllowNativeBroker]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[authorityMismatch]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ClientConfigurationError extends AuthError{constructor(e){super(e,ClientConfigurationErrorMessages[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ClientConfigurationError.prototype)}}function createClientConfigurationError(i){return new ClientConfigurationError(i)}/*! @azure/msal-common v14.7.1 2024-02-17 */class StringUtils{static isEmptyObj(e){if(e)try{const o=JSON.parse(e);return Object.keys(o).length===0}catch{}return!0}static startsWith(e,o){return e.indexOf(o)===0}static endsWith(e,o){return e.length>=o.length&&e.lastIndexOf(o)===e.length-o.length}static queryStringToObject(e){const o={},s=e.split("&"),a=c=>decodeURIComponent(c.replace(/\+/g," "));return s.forEach(c=>{if(c.trim()){const[h,d]=c.split(/=(.+)/g,2);h&&d&&(o[a(h)]=a(d))}}),o}static trimArrayEntries(e){return e.map(o=>o.trim())}static removeEmptyStringsFromArray(e){return e.filter(o=>!!o)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,o){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(o)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ScopeSet{constructor(e){const o=e?StringUtils.trimArrayEntries([...e]):[],s=o?StringUtils.removeEmptyStringsFromArray(o):[];this.validateInputScopes(s),this.scopes=new Set,s.forEach(a=>this.scopes.add(a))}static fromString(e){const s=(e||Constants.EMPTY_STRING).split(" ");return new ScopeSet(s)}static createSearchScopes(e){const o=new ScopeSet(e);return o.containsOnlyOIDCScopes()?o.removeScope(Constants.OFFLINE_ACCESS_SCOPE):o.removeOIDCScopes(),o}validateInputScopes(e){if(!e||e.length<1)throw createClientConfigurationError(emptyInputScopesError)}containsScope(e){const o=this.printScopesLowerCase().split(" "),s=new ScopeSet(o);return e?s.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(o=>this.containsScope(o))}containsOnlyOIDCScopes(){let e=0;return OIDC_SCOPES.forEach(o=>{this.containsScope(o)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(o=>this.appendScope(o))}catch{throw createClientAuthError(cannotAppendScopeSet)}}removeScope(e){if(!e)throw createClientAuthError(cannotRemoveEmptyScope);this.scopes.delete(e.trim())}removeOIDCScopes(){OIDC_SCOPES.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);const o=new Set;return e.scopes.forEach(s=>o.add(s.toLowerCase())),this.scopes.forEach(s=>o.add(s.toLowerCase())),o}intersectingScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const o=this.unionScopeSets(e),s=e.getScopeCount(),a=this.getScopeCount();return o.size<a+s}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(o=>e.push(o)),e}printScopes(){return this.scopes?this.asArray().join(" "):Constants.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.7.1 2024-02-17 */function buildClientInfo(i,e){if(!i)throw createClientAuthError(clientInfoEmptyError);try{const o=e(i);return JSON.parse(o)}catch{throw createClientAuthError(clientInfoDecodingError)}}function buildClientInfoFromHomeAccountId(i){if(!i)throw createClientAuthError(clientInfoDecodingError);const e=i.split(Separators.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Constants.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.7.1 2024-02-17 */function tenantIdMatchesHomeTenant(i,e){return!!i&&!!e&&i===e.split(".")[1]}function buildTenantProfileFromIdTokenClaims(i,e){const{oid:o,sub:s,tid:a,name:c,tfp:h,acr:d}=e,g=a||h||d||"";return{tenantId:g,localAccountId:o||s||"",name:c,isHomeTenant:tenantIdMatchesHomeTenant(g,i)}}function updateAccountTenantProfileData(i,e,o,s){let a=i;if(e){const{isHomeTenant:c,...h}=e;a={...i,...h}}if(o){const{isHomeTenant:c,...h}=buildTenantProfileFromIdTokenClaims(i.homeAccountId,o);return a={...a,...h,idTokenClaims:o,idToken:s},a}return a}/*! @azure/msal-common v14.7.1 2024-02-17 */const AuthorityType={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.7.1 2024-02-17 */function getTenantIdFromIdTokenClaims(i){return i&&(i.tid||i.tfp||i.acr)||null}/*! @azure/msal-common v14.7.1 2024-02-17 */const ProtocolMode={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.7.1 2024-02-17 */class AccountEntity{generateAccountId(){return[this.homeAccountId,this.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return AccountEntity.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const o=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",o||e.tenantId||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,o,s){const a=new AccountEntity;o.authorityType===AuthorityType.Adfs?a.authorityType=CacheAccountType.ADFS_ACCOUNT_TYPE:o.protocolMode===ProtocolMode.AAD?a.authorityType=CacheAccountType.MSSTS_ACCOUNT_TYPE:a.authorityType=CacheAccountType.GENERIC_ACCOUNT_TYPE;let c;e.clientInfo&&s&&(c=buildClientInfo(e.clientInfo,s)),a.clientInfo=e.clientInfo,a.homeAccountId=e.homeAccountId,a.nativeAccountId=e.nativeAccountId;const h=e.environment||o&&o.getPreferredCache();if(!h)throw createClientAuthError(invalidCacheEnvironment);a.environment=h,a.realm=(c==null?void 0:c.utid)||getTenantIdFromIdTokenClaims(e.idTokenClaims)||"",a.localAccountId=(c==null?void 0:c.uid)||e.idTokenClaims.oid||e.idTokenClaims.sub||"";const d=e.idTokenClaims.preferred_username||e.idTokenClaims.upn,g=e.idTokenClaims.emails?e.idTokenClaims.emails[0]:null;if(a.username=d||g||"",a.name=e.idTokenClaims.name,a.cloudGraphHostName=e.cloudGraphHostName,a.msGraphHost=e.msGraphHost,e.tenantProfiles)a.tenantProfiles=e.tenantProfiles;else{const _=[];if(e.idTokenClaims){const b=buildTenantProfileFromIdTokenClaims(e.homeAccountId,e.idTokenClaims);_.push(b)}a.tenantProfiles=_}return a}static createFromAccountInfo(e,o,s){var c;const a=new AccountEntity;return a.authorityType=e.authorityType||CacheAccountType.GENERIC_ACCOUNT_TYPE,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.cloudGraphHostName=o,a.msGraphHost=s,a.tenantProfiles=Array.from(((c=e.tenantProfiles)==null?void 0:c.values())||[]),a}static generateHomeAccountId(e,o,s,a,c){if(!(o===AuthorityType.Adfs||o===AuthorityType.Dsts)){if(e)try{const h=buildClientInfo(e,a.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}s.warning("No client info in response")}return(c==null?void 0:c.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,o,s){if(!e||!o)return!1;let a=!0;if(s){const c=e.idTokenClaims||{},h=o.idTokenClaims||{};a=c.iat===h.iat&&c.nonce===h.nonce}return e.homeAccountId===o.homeAccountId&&e.localAccountId===o.localAccountId&&e.username===o.username&&e.tenantId===o.tenantId&&e.environment===o.environment&&e.nativeAccountId===o.nativeAccountId&&a}}/*! @azure/msal-common v14.7.1 2024-02-17 */function stripLeadingHashOrQuery(i){return i.startsWith("#/")?i.substring(2):i.startsWith("#")||i.startsWith("?")?i.substring(1):i}function getDeserializedResponse(i){if(!i||i.indexOf("=")<0)return null;try{const e=stripLeadingHashOrQuery(i),o=Object.fromEntries(new URLSearchParams(e));if(o.code||o.error||o.error_description||o.state)return o}catch{throw createClientAuthError(hashNotDeserialized)}return null}/*! @azure/msal-common v14.7.1 2024-02-17 */class UrlString{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw createClientConfigurationError(urlEmptyError);e.includes("#")||(this._urlString=UrlString.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let o=e.toLowerCase();return StringUtils.endsWith(o,"?")?o=o.slice(0,-1):StringUtils.endsWith(o,"?/")&&(o=o.slice(0,-2)),StringUtils.endsWith(o,"/")||(o+="/"),o}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw createClientConfigurationError(urlParseError)}if(!e.HostNameAndPort||!e.PathSegments)throw createClientConfigurationError(urlParseError);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw createClientConfigurationError(authorityUriInsecure)}static appendQueryString(e,o){return o?e.indexOf("?")<0?`${e}?${o}`:`${e}&${o}`:e}static removeHashFromUrl(e){return UrlString.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const o=this.getUrlComponents(),s=o.PathSegments;return e&&s.length!==0&&(s[0]===AADAuthorityConstants.COMMON||s[0]===AADAuthorityConstants.ORGANIZATIONS)&&(s[0]=e),UrlString.constructAuthorityUriFromObject(o)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),o=this.urlString.match(e);if(!o)throw createClientConfigurationError(urlParseError);const s={Protocol:o[1],HostNameAndPort:o[4],AbsolutePath:o[5],QueryString:o[7]};let a=s.AbsolutePath.split("/");return a=a.filter(c=>c&&c.length>0),s.PathSegments=a,s.QueryString&&s.QueryString.endsWith("/")&&(s.QueryString=s.QueryString.substring(0,s.QueryString.length-1)),s}static getDomainFromUrl(e){const o=RegExp("^([^:/?#]+://)?([^/?#]*)"),s=e.match(o);if(!s)throw createClientConfigurationError(urlParseError);return s[2]}static getAbsoluteUrl(e,o){if(e[0]===Constants.FORWARD_SLASH){const a=new UrlString(o).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new UrlString(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!getDeserializedResponse(e)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const rawMetdataJSON={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},EndpointMetadata=rawMetdataJSON.endpointMetadata,InstanceDiscoveryMetadata=rawMetdataJSON.instanceDiscoveryMetadata,InstanceDiscoveryMetadataAliases=new Set;InstanceDiscoveryMetadata.metadata.forEach(i=>{i.aliases.forEach(e=>{InstanceDiscoveryMetadataAliases.add(e)})});function getAliasesFromStaticSources(i,e){var a;let o;const s=i.canonicalAuthority;if(s){const c=new UrlString(s).getUrlComponents().HostNameAndPort;o=getAliasesFromMetadata(c,(a=i.cloudDiscoveryMetadata)==null?void 0:a.metadata,AuthorityMetadataSource.CONFIG,e)||getAliasesFromMetadata(c,InstanceDiscoveryMetadata.metadata,AuthorityMetadataSource.HARDCODED_VALUES,e)||i.knownAuthorities}return o||[]}function getAliasesFromMetadata(i,e,o,s){if(s==null||s.trace(`getAliasesFromMetadata called with source: ${o}`),i&&e){const a=getCloudDiscoveryMetadataFromNetworkResponse(e,i);if(a)return s==null||s.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${o}, returning aliases`),a.aliases;s==null||s.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${o}`)}return null}function getCloudDiscoveryMetadataFromHardcodedValues(i){return getCloudDiscoveryMetadataFromNetworkResponse(InstanceDiscoveryMetadata.metadata,i)}function getCloudDiscoveryMetadataFromNetworkResponse(i,e){for(let o=0;o<i.length;o++){const s=i[o];if(s.aliases.includes(e))return s}return null}/*! @azure/msal-common v14.7.1 2024-02-17 */class CacheManager{constructor(e,o,s,a){this.clientId=e,this.cryptoImpl=o,this.commonLogger=s.clone(name$3,version$2),this.staticAuthorityOptions=a}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const o=this.getAllAccounts(e);return o.length>1?o.sort(a=>a.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(e){const o=this.getAccountsFilteredBy(e);return o.length>0?o[0].getAccountInfo():null}buildTenantProfiles(e,o){return e.flatMap(s=>this.getAccountInfoForTenantProfiles(s,o))}getAccountInfoForTenantProfiles(e,o){return this.getTenantProfilesFromAccountEntity(e,o==null?void 0:o.tenantId,o)}getTenantedAccountInfoByFilter(e,o,s,a){let c=null,h;if(a&&!this.tenantProfileMatchesFilter(s,a))return null;const d=this.getIdToken(e,o,s.tenantId);return d&&(h=extractTokenClaims(d.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(h,a))?null:(c=updateAccountTenantProfileData(e,s,h,d==null?void 0:d.secret),c)}getTenantProfilesFromAccountEntity(e,o,s){const a=e.getAccountInfo();let c=a.tenantProfiles||new Map;const h=this.getTokenKeys();if(o){const g=c.get(o);if(g)c=new Map([[o,g]]);else return[]}const d=[];return c.forEach(g=>{const _=this.getTenantedAccountInfoByFilter(a,h,g,s);_&&d.push(_)}),d}tenantProfileMatchesFilter(e,o){return!(o.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,o.localAccountId)||o.name&&e.name!==o.name||o.isHomeTenant!==void 0&&e.isHomeTenant!==o.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,o){return!(o&&(o.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,o.localAccountId)||o.loginHint&&!this.matchLoginHintFromTokenClaims(e,o.loginHint)||o.username&&!this.matchUsername(e.preferred_username,o.username)||o.name&&!this.matchName(e,o.name)||o.sid&&!this.matchSid(e,o.sid)))}async saveCacheRecord(e,o){if(!e)throw createClientAuthError(invalidCacheRecord);e.account&&this.setAccount(e.account),e.idToken&&(o==null?void 0:o.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(o==null?void 0:o.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(o==null?void 0:o.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}async saveAccessToken(e){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=this.getTokenKeys(),a=ScopeSet.fromString(e.target),c=[];s.accessToken.forEach(h=>{if(!this.accessTokenKeyMatchesFilter(h,o,!1))return;const d=this.getAccessTokenCredential(h);d&&this.credentialMatchesFilter(d,o)&&ScopeSet.fromString(d.target).intersectingScopeSets(a)&&c.push(this.removeAccessToken(h))}),await Promise.all(c),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const o=this.getAccountKeys(),s=[];return o.forEach(a=>{var g;if(!this.isAccountKey(a,e.homeAccountId))return;const c=this.getAccount(a,this.commonLogger);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;const h={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},d=(g=c.tenantProfiles)==null?void 0:g.filter(_=>this.tenantProfileMatchesFilter(_,h));d&&d.length===0||s.push(c)}),s}isAccountKey(e,o,s){return!(e.split(Separators.CACHE_KEY_SEPARATOR).length<3||o&&!e.toLowerCase().includes(o.toLowerCase())||s&&!e.toLowerCase().includes(s.toLowerCase()))}isCredentialKey(e){if(e.split(Separators.CACHE_KEY_SEPARATOR).length<6)return!1;const o=e.toLowerCase();if(o.indexOf(CredentialType.ID_TOKEN.toLowerCase())===-1&&o.indexOf(CredentialType.ACCESS_TOKEN.toLowerCase())===-1&&o.indexOf(CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&o.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(o.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())>-1){const s=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${this.clientId}${Separators.CACHE_KEY_SEPARATOR}`,a=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${THE_FAMILY_ID}${Separators.CACHE_KEY_SEPARATOR}`;if(o.indexOf(s.toLowerCase())===-1&&o.indexOf(a.toLowerCase())===-1)return!1}else if(o.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,o){return!(o.clientId&&!this.matchClientId(e,o.clientId)||o.userAssertionHash&&!this.matchUserAssertionHash(e,o.userAssertionHash)||typeof o.homeAccountId=="string"&&!this.matchHomeAccountId(e,o.homeAccountId)||o.environment&&!this.matchEnvironment(e,o.environment)||o.realm&&!this.matchRealm(e,o.realm)||o.credentialType&&!this.matchCredentialType(e,o.credentialType)||o.familyId&&!this.matchFamilyId(e,o.familyId)||o.target&&!this.matchTarget(e,o.target)||(o.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==o.requestedClaimsHash||e.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(o.tokenType&&!this.matchTokenType(e,o.tokenType)||o.tokenType===AuthenticationScheme.SSH&&o.keyId&&!this.matchKeyId(e,o.keyId)))}getAppMetadataFilteredBy(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)}getAppMetadataFilteredByInternal(e,o){const s=this.getKeys(),a={};return s.forEach(c=>{if(!this.isAppMetadata(c))return;const h=this.getAppMetadata(c);h&&(e&&!this.matchEnvironment(h,e)||o&&!this.matchClientId(h,o)||(a[c]=h))}),a}getAuthorityMetadataByAlias(e){const o=this.getAuthorityMetadataKeys();let s=null;return o.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const c=this.getAuthorityMetadata(a);c&&c.aliases.indexOf(e)!==-1&&(s=c)}),s}async removeAllAccounts(){const e=this.getAccountKeys(),o=[];e.forEach(s=>{o.push(this.removeAccount(s))}),await Promise.all(o)}async removeAccount(e){const o=this.getAccount(e,this.commonLogger);o&&(await this.removeAccountContext(o),this.removeItem(e))}async removeAccountContext(e){const o=this.getTokenKeys(),s=e.generateAccountId(),a=[];o.idToken.forEach(c=>{c.indexOf(s)===0&&this.removeIdToken(c)}),o.accessToken.forEach(c=>{c.indexOf(s)===0&&a.push(this.removeAccessToken(c))}),o.refreshToken.forEach(c=>{c.indexOf(s)===0&&this.removeRefreshToken(c)}),await Promise.all(a)}updateOutdatedCachedAccount(e,o,s){var a;if(o&&o.isSingleTenant()){(a=this.commonLogger)==null||a.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const c=this.getAccountKeys().filter(b=>b.startsWith(o.homeAccountId)),h=[];c.forEach(b=>{const j=this.getCachedAccountEntity(b);j&&h.push(j)});const d=h.find(b=>tenantIdMatchesHomeTenant(b.realm,b.homeAccountId))||h[0];d.tenantProfiles=h.map(b=>({tenantId:b.realm,localAccountId:b.localAccountId,name:b.name,isHomeTenant:tenantIdMatchesHomeTenant(b.realm,b.homeAccountId)}));const g=CacheManager.toObject(new AccountEntity,{...d}),_=g.generateAccountKey();return c.forEach(b=>{b!==_&&this.removeOutdatedAccount(e)}),this.setAccount(g),s==null||s.verbose("Updated an outdated account entity in the cache"),g}return o}async removeAccessToken(e){const o=this.getAccessTokenCredential(e);if(o){if(o.credentialType.toLowerCase()===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&o.tokenType===AuthenticationScheme.POP){const a=o.keyId;if(a)try{await this.cryptoImpl.removeTokenBindingKey(a)}catch{throw createClientAuthError(bindingKeyNotRemoved)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o)}),!0}readAccountFromCache(e){const o=AccountEntity.generateAccountCacheKey(e);return this.getAccount(o,this.commonLogger)}getIdToken(e,o,s,a,c){this.commonLogger.trace("CacheManager - getIdToken called");const h={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.ID_TOKEN,clientId:this.clientId,realm:s},d=this.getIdTokensByFilter(h,o),g=d.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(g>1){let _=d;if(!s){const b=new Map;d.forEach((_e,$)=>{_e.realm===e.tenantId&&b.set($,_e)});const j=b.size;if(j<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),d.values().next().value;if(j===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),b.values().next().value;_=b}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),_.forEach((b,j)=>{this.removeIdToken(j)}),a&&c&&a.addFields({multiMatchedID:d.size},c),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),d.values().next().value}getIdTokensByFilter(e,o){const s=o&&o.idToken||this.getTokenKeys().idToken,a=new Map;return s.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;const h=this.getIdTokenCredential(c);h&&this.credentialMatchesFilter(h,e)&&a.set(c,h)}),a}idTokenKeyMatchesFilter(e,o){const s=e.toLowerCase();return!(o.clientId&&s.indexOf(o.clientId.toLowerCase())===-1||o.homeAccountId&&s.indexOf(o.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,o,s,a,c,h){this.commonLogger.trace("CacheManager - getAccessToken called");const d=ScopeSet.createSearchScopes(o.scopes),g=o.authenticationScheme||AuthenticationScheme.BEARER,_=g&&g.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:CredentialType.ACCESS_TOKEN,b={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:_,clientId:this.clientId,realm:a||e.tenantId,target:d,tokenType:g,keyId:o.sshKid,requestedClaimsHash:o.requestedClaimsHash},j=s&&s.accessToken||this.getTokenKeys().accessToken,_e=[];j.forEach(et=>{if(this.accessTokenKeyMatchesFilter(et,b,!0)){const rt=this.getAccessTokenCredential(et);rt&&this.credentialMatchesFilter(rt,b)&&_e.push(rt)}});const $=_e.length;return $<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):$>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),_e.forEach(et=>{this.removeAccessToken(generateCredentialKey(et))}),c&&h&&c.addFields({multiMatchedAT:_e.length},h),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),_e[0])}accessTokenKeyMatchesFilter(e,o,s){const a=e.toLowerCase();if(o.clientId&&a.indexOf(o.clientId.toLowerCase())===-1||o.homeAccountId&&a.indexOf(o.homeAccountId.toLowerCase())===-1||o.realm&&a.indexOf(o.realm.toLowerCase())===-1||o.requestedClaimsHash&&a.indexOf(o.requestedClaimsHash.toLowerCase())===-1)return!1;if(o.target){const c=o.target.asArray();for(let h=0;h<c.length;h++){if(s&&!a.includes(c[h].toLowerCase()))return!1;if(!s&&a.includes(c[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const o=this.getTokenKeys(),s=[];return o.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,e,!0))return;const c=this.getAccessTokenCredential(a);c&&this.credentialMatchesFilter(c,e)&&s.push(c)}),s}getRefreshToken(e,o,s,a,c){this.commonLogger.trace("CacheManager - getRefreshToken called");const h=o?THE_FAMILY_ID:void 0,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.REFRESH_TOKEN,clientId:this.clientId,familyId:h},g=s&&s.refreshToken||this.getTokenKeys().refreshToken,_=[];g.forEach(j=>{if(this.refreshTokenKeyMatchesFilter(j,d)){const _e=this.getRefreshTokenCredential(j);_e&&this.credentialMatchesFilter(_e,d)&&_.push(_e)}});const b=_.length;return b<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(b>1&&a&&c&&a.addFields({multiMatchedRT:b},c),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),_[0])}refreshTokenKeyMatchesFilter(e,o){const s=e.toLowerCase();return!(o.familyId&&s.indexOf(o.familyId.toLowerCase())===-1||!o.familyId&&o.clientId&&s.indexOf(o.clientId.toLowerCase())===-1||o.homeAccountId&&s.indexOf(o.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const o={environment:e,clientId:this.clientId},s=this.getAppMetadataFilteredBy(o),a=Object.keys(s).map(h=>s[h]),c=a.length;if(c<1)return null;if(c>1)throw createClientAuthError(multipleMatchingAppMetadata);return a[0]}isAppMetadataFOCI(e){const o=this.readAppMetadataFromCache(e);return!!(o&&o.familyId===THE_FAMILY_ID)}matchHomeAccountId(e,o){return typeof e.homeAccountId=="string"&&o===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,o){const s=e.oid||e.sub;return o===s}matchLocalAccountIdFromTenantProfile(e,o){return e.localAccountId===o}matchName(e,o){var s;return o.toLowerCase()===((s=e.name)==null?void 0:s.toLowerCase())}matchUsername(e,o){return!!(e&&typeof e=="string"&&(o==null?void 0:o.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,o){return!!(e.userAssertionHash&&o===e.userAssertionHash)}matchEnvironment(e,o){if(this.staticAuthorityOptions){const a=getAliasesFromStaticSources(this.staticAuthorityOptions,this.commonLogger);if(a.includes(o)&&a.includes(e.environment))return!0}const s=this.getAuthorityMetadataByAlias(o);return!!(s&&s.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,o){return e.credentialType&&o.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,o){return!!(e.clientId&&o===e.clientId)}matchFamilyId(e,o){return!!(e.familyId&&o===e.familyId)}matchRealm(e,o){var s;return((s=e.realm)==null?void 0:s.toLowerCase())===o.toLowerCase()}matchNativeAccountId(e,o){return!!(e.nativeAccountId&&o===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,o){return e.login_hint===o||e.preferred_username===o||e.upn===o}matchSid(e,o){return e.sid===o}matchAuthorityType(e,o){return!!(e.authorityType&&o.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,o){return e.credentialType!==CredentialType.ACCESS_TOKEN&&e.credentialType!==CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ScopeSet.fromString(e.target).containsScopeSet(o)}matchTokenType(e,o){return!!(e.tokenType&&e.tokenType===o)}matchKeyId(e,o){return!!(e.keyId&&e.keyId===o)}isAppMetadata(e){return e.indexOf(APP_METADATA)!==-1}isAuthorityMetadata(e){return e.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,o){for(const s in o)e[s]=o[s];return e}}class DefaultStorageClass extends CacheManager{setAccount(){throw createClientAuthError(methodNotImplemented)}getAccount(){throw createClientAuthError(methodNotImplemented)}getCachedAccountEntity(){throw createClientAuthError(methodNotImplemented)}setIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}getIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}getAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}setRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}getRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAppMetadata(){throw createClientAuthError(methodNotImplemented)}getAppMetadata(){throw createClientAuthError(methodNotImplemented)}setServerTelemetry(){throw createClientAuthError(methodNotImplemented)}getServerTelemetry(){throw createClientAuthError(methodNotImplemented)}setAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadataKeys(){throw createClientAuthError(methodNotImplemented)}setThrottlingCache(){throw createClientAuthError(methodNotImplemented)}getThrottlingCache(){throw createClientAuthError(methodNotImplemented)}removeItem(){throw createClientAuthError(methodNotImplemented)}containsKey(){throw createClientAuthError(methodNotImplemented)}getKeys(){throw createClientAuthError(methodNotImplemented)}getAccountKeys(){throw createClientAuthError(methodNotImplemented)}getTokenKeys(){throw createClientAuthError(methodNotImplemented)}async clear(){throw createClientAuthError(methodNotImplemented)}updateCredentialCacheKey(){throw createClientAuthError(methodNotImplemented)}removeOutdatedAccount(){throw createClientAuthError(methodNotImplemented)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=300,DEFAULT_SYSTEM_OPTIONS={tokenRenewalOffsetSeconds:DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,preventCorsPreflight:!1},DEFAULT_LOGGER_IMPLEMENTATION={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info,correlationId:Constants.EMPTY_STRING},DEFAULT_CACHE_OPTIONS={claimsBasedCachingEnabled:!1},DEFAULT_NETWORK_IMPLEMENTATION={async sendGetRequestAsync(){throw createClientAuthError(methodNotImplemented)},async sendPostRequestAsync(){throw createClientAuthError(methodNotImplemented)}},DEFAULT_LIBRARY_INFO={sku:Constants.SKU,version:version$2,cpu:Constants.EMPTY_STRING,os:Constants.EMPTY_STRING},DEFAULT_CLIENT_CREDENTIALS={clientSecret:Constants.EMPTY_STRING,clientAssertion:void 0},DEFAULT_AZURE_CLOUD_OPTIONS={azureCloudInstance:AzureCloudInstance.None,tenant:`${Constants.DEFAULT_COMMON_TENANT}`},DEFAULT_TELEMETRY_OPTIONS={application:{appName:"",appVersion:""}};function buildClientConfiguration({authOptions:i,systemOptions:e,loggerOptions:o,cacheOptions:s,storageInterface:a,networkInterface:c,cryptoInterface:h,clientCredentials:d,libraryInfo:g,telemetry:_,serverTelemetryManager:b,persistencePlugin:j,serializableCache:_e}){const $={...DEFAULT_LOGGER_IMPLEMENTATION,...o};return{authOptions:buildAuthOptions(i),systemOptions:{...DEFAULT_SYSTEM_OPTIONS,...e},loggerOptions:$,cacheOptions:{...DEFAULT_CACHE_OPTIONS,...s},storageInterface:a||new DefaultStorageClass(i.clientId,DEFAULT_CRYPTO_IMPLEMENTATION,new Logger($)),networkInterface:c||DEFAULT_NETWORK_IMPLEMENTATION,cryptoInterface:h||DEFAULT_CRYPTO_IMPLEMENTATION,clientCredentials:d||DEFAULT_CLIENT_CREDENTIALS,libraryInfo:{...DEFAULT_LIBRARY_INFO,...g},telemetry:{...DEFAULT_TELEMETRY_OPTIONS,..._},serverTelemetryManager:b||null,persistencePlugin:j||null,serializableCache:_e||null}}function buildAuthOptions(i){return{clientCapabilities:[],azureCloudOptions:DEFAULT_AZURE_CLOUD_OPTIONS,skipAuthorityMetadataCache:!1,...i}}function isOidcProtocolMode(i){return i.authOptions.authority.options.protocolMode===ProtocolMode.OIDC}/*! @azure/msal-common v14.7.1 2024-02-17 */class ServerError extends AuthError{constructor(e,o,s){super(e,o,s),this.name="ServerError",Object.setPrototypeOf(this,ServerError.prototype)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ThrottlingUtils{static generateThrottlingStorageKey(e){return`${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,o){var c;const s=ThrottlingUtils.generateThrottlingStorageKey(o),a=e.getThrottlingCache(s);if(a){if(a.throttleTime<Date.now()){e.removeItem(s);return}throw new ServerError(((c=a.errorCodes)==null?void 0:c.join(" "))||Constants.EMPTY_STRING,a.errorMessage,a.subError)}}static postProcess(e,o,s){if(ThrottlingUtils.checkResponseStatus(s)||ThrottlingUtils.checkResponseForRetryAfter(s)){const a={throttleTime:ThrottlingUtils.calculateThrottleTime(parseInt(s.headers[HeaderNames.RETRY_AFTER])),error:s.body.error,errorCodes:s.body.error_codes,errorMessage:s.body.error_description,subError:s.body.suberror};e.setThrottlingCache(ThrottlingUtils.generateThrottlingStorageKey(o),a)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(HeaderNames.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const o=e<=0?0:e,s=Date.now()/1e3;return Math.floor(Math.min(s+(o||ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS),s+ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,o,s,a){const c={clientId:o,authority:s.authority,scopes:s.scopes,homeAccountIdentifier:a,claims:s.claims,authenticationScheme:s.authenticationScheme,resourceRequestMethod:s.resourceRequestMethod,resourceRequestUri:s.resourceRequestUri,shrClaims:s.shrClaims,sshKid:s.sshKid},h=this.generateThrottlingStorageKey(c);e.removeItem(h)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class NetworkManager{constructor(e,o){this.networkClient=e,this.cacheManager=o}async sendPostRequest(e,o,s){ThrottlingUtils.preProcess(this.cacheManager,e);let a;try{a=await this.networkClient.sendPostRequestAsync(o,s)}catch(c){throw c instanceof AuthError?c:createClientAuthError(networkError)}return ThrottlingUtils.postProcess(this.cacheManager,e,a),a}}/*! @azure/msal-common v14.7.1 2024-02-17 */const CcsCredentialType={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.7.1 2024-02-17 */const CLIENT_ID="client_id",REDIRECT_URI="redirect_uri",RESPONSE_TYPE="response_type",RESPONSE_MODE="response_mode",GRANT_TYPE="grant_type",CLAIMS="claims",SCOPE="scope",REFRESH_TOKEN="refresh_token",STATE="state",NONCE="nonce",PROMPT="prompt",CODE="code",CODE_CHALLENGE="code_challenge",CODE_CHALLENGE_METHOD="code_challenge_method",CODE_VERIFIER="code_verifier",CLIENT_REQUEST_ID="client-request-id",X_CLIENT_SKU="x-client-SKU",X_CLIENT_VER="x-client-VER",X_CLIENT_OS="x-client-OS",X_CLIENT_CPU="x-client-CPU",X_CLIENT_CURR_TELEM="x-client-current-telemetry",X_CLIENT_LAST_TELEM="x-client-last-telemetry",X_MS_LIB_CAPABILITY="x-ms-lib-capability",X_APP_NAME="x-app-name",X_APP_VER="x-app-ver",POST_LOGOUT_URI="post_logout_redirect_uri",ID_TOKEN_HINT="id_token_hint",DEVICE_CODE="device_code",CLIENT_SECRET="client_secret",CLIENT_ASSERTION="client_assertion",CLIENT_ASSERTION_TYPE="client_assertion_type",TOKEN_TYPE="token_type",REQ_CNF="req_cnf",OBO_ASSERTION="assertion",REQUESTED_TOKEN_USE="requested_token_use",RETURN_SPA_CODE="return_spa_code",NATIVE_BROKER="nativebroker",LOGOUT_HINT="logout_hint",SID="sid",LOGIN_HINT="login_hint",DOMAIN_HINT="domain_hint";/*! @azure/msal-common v14.7.1 2024-02-17 */class RequestValidator{static validateRedirectUri(e){if(!e)throw createClientConfigurationError(redirectUriEmpty)}static validatePrompt(e){const o=[];for(const s in PromptValue)o.push(PromptValue[s]);if(o.indexOf(e)<0)throw createClientConfigurationError(invalidPromptValue)}static validateClaims(e){try{JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}}static validateCodeChallengeParams(e,o){if(!e||!o)throw createClientConfigurationError(pkceParamsMissing);this.validateCodeChallengeMethod(o)}static validateCodeChallengeMethod(e){if([CodeChallengeMethodValues.PLAIN,CodeChallengeMethodValues.S256].indexOf(e)<0)throw createClientConfigurationError(invalidCodeChallengeMethod)}static sanitizeEQParams(e,o){return e?(o.forEach((s,a)=>{e[a]&&delete e[a]}),Object.fromEntries(Object.entries(e).filter(s=>s[1]!==""))):{}}}/*! @azure/msal-common v14.7.1 2024-02-17 */class RequestParameterBuilder{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(Constants.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(`${Constants.TOKEN_RESPONSE_TYPE} ${Constants.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(RESPONSE_MODE,encodeURIComponent(e||ResponseMode.QUERY))}addNativeBroker(){this.parameters.set(NATIVE_BROKER,encodeURIComponent("1"))}addScopes(e,o=!0,s=OIDC_DEFAULT_SCOPES){o&&!s.includes("openid")&&!e.includes("openid")&&s.push("openid");const a=o?[...e||[],...s]:e||[],c=new ScopeSet(a);this.parameters.set(SCOPE,encodeURIComponent(c.printScopes()))}addClientId(e){this.parameters.set(CLIENT_ID,encodeURIComponent(e))}addRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(REDIRECT_URI,encodeURIComponent(e))}addPostLogoutRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(POST_LOGOUT_URI,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(ID_TOKEN_HINT,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(DOMAIN_HINT,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(LOGIN_HINT,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(SID,encodeURIComponent(e))}addClaims(e,o){const s=this.addClientCapabilitiesToClaims(e,o);RequestValidator.validateClaims(s),this.parameters.set(CLAIMS,encodeURIComponent(s))}addCorrelationId(e){this.parameters.set(CLIENT_REQUEST_ID,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(X_CLIENT_SKU,e.sku),this.parameters.set(X_CLIENT_VER,e.version),e.os&&this.parameters.set(X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(X_CLIENT_CPU,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(X_APP_NAME,e.appName),e!=null&&e.appVersion&&this.parameters.set(X_APP_VER,e.appVersion)}addPrompt(e){RequestValidator.validatePrompt(e),this.parameters.set(`${PROMPT}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(STATE,encodeURIComponent(e))}addNonce(e){this.parameters.set(NONCE,encodeURIComponent(e))}addCodeChallengeParams(e,o){if(RequestValidator.validateCodeChallengeParams(e,o),e&&o)this.parameters.set(CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(CODE_CHALLENGE_METHOD,encodeURIComponent(o));else throw createClientConfigurationError(pkceParamsMissing)}addAuthorizationCode(e){this.parameters.set(CODE,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(DEVICE_CODE,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(REFRESH_TOKEN,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(CODE_VERIFIER,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(CLIENT_SECRET,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(CLIENT_ASSERTION,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(CLIENT_ASSERTION_TYPE,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(OBO_ASSERTION,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(REQUESTED_TOKEN_USE,encodeURIComponent(e))}addGrantType(e){this.parameters.set(GRANT_TYPE,encodeURIComponent(e))}addClientInfo(){this.parameters.set(CLIENT_INFO,"1")}addExtraQueryParameters(e){const o=RequestValidator.sanitizeEQParams(e,this.parameters);Object.keys(o).forEach(s=>{this.parameters.set(s,e[s])})}addClientCapabilitiesToClaims(e,o){let s;if(!e)s={};else try{s=JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}return o&&o.length>0&&(s.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)||(s[ClaimsRequestKeys.ACCESS_TOKEN]={}),s[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC]={values:o}),JSON.stringify(s)}addUsername(e){this.parameters.set(PasswordGrantConstants.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(PasswordGrantConstants.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.POP),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.SSH),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(X_MS_LIB_CAPABILITY,ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(LOGOUT_HINT,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((o,s)=>{e.push(`${s}=${o}`)}),e.join("&")}}/*! @azure/msal-common v14.7.1 2024-02-17 */function isOpenIdConfigResponse(i){return i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.7.1 2024-02-17 */function isCloudInstanceDiscoveryResponse(i){return i.hasOwnProperty("tenant_discovery_endpoint")&&i.hasOwnProperty("metadata")}/*! @azure/msal-common v14.7.1 2024-02-17 */function isCloudInstanceDiscoveryErrorResponse(i){return i.hasOwnProperty("error")&&i.hasOwnProperty("error_description")}/*! @azure/msal-common v14.7.1 2024-02-17 */const PerformanceEvents={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},PerformanceEventStatus={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v14.7.1 2024-02-17 */const invoke=(i,e,o,s,a)=>(...c)=>{o.trace(`Executing function ${e}`);const h=s==null?void 0:s.startMeasurement(e,a);if(a){const d=e+"CallCount";s==null||s.incrementFields({[d]:1},a)}try{const d=i(...c);return h==null||h.end({success:!0}),o.trace(`Returning result from ${e}`),d}catch(d){o.trace(`Error occurred in ${e}`);try{o.trace(JSON.stringify(d))}catch{o.trace("Unable to print error message.")}throw h==null||h.end({success:!1}),d}},invokeAsync=(i,e,o,s,a)=>(...c)=>{o.trace(`Executing function ${e}`);const h=s==null?void 0:s.startMeasurement(e,a);if(a){const d=e+"CallCount";s==null||s.incrementFields({[d]:1},a)}return s==null||s.setPreQueueTime(e,a),i(...c).then(d=>(o.trace(`Returning result from ${e}`),h==null||h.end({success:!0}),d)).catch(d=>{o.trace(`Error occurred in ${e}`);try{o.trace(JSON.stringify(d))}catch{o.trace("Unable to print error message.")}throw h==null||h.end({success:!1}),d})};/*! @azure/msal-common v14.7.1 2024-02-17 */class RegionDiscovery{constructor(e,o,s,a){this.networkInterface=e,this.logger=o,this.performanceClient=s,this.correlationId=a}async detectRegion(e,o){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryDetectRegion,this.correlationId);let s=e;if(s)o.region_source=RegionDiscoverySources.ENVIRONMENT_VARIABLE;else{const c=RegionDiscovery.IMDS_OPTIONS;try{const h=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Constants.IMDS_VERSION,c);if(h.status===ResponseCodes.httpSuccess&&(s=h.body,o.region_source=RegionDiscoverySources.IMDS),h.status===ResponseCodes.httpBadRequest){const d=await invokeAsync(this.getCurrentVersion.bind(this),PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(c);if(!d)return o.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null;const g=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,c);g.status===ResponseCodes.httpSuccess&&(s=g.body,o.region_source=RegionDiscoverySources.IMDS)}}catch{return o.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null}}return s||(o.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION),s||null}async getRegionFromIMDS(e,o){var s;return(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?api-version=${e}&format=text`,o,Constants.IMDS_TIMEOUT)}async getCurrentVersion(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const s=await this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?format=json`,e);return s.status===ResponseCodes.httpBadRequest&&s.body&&s.body["newest-versions"]&&s.body["newest-versions"].length>0?s.body["newest-versions"][0]:null}catch{return null}}}RegionDiscovery.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.7.1 2024-02-17 */class Authority{constructor(e,o,s,a,c,h,d){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=o,this.cacheManager=s,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=c,this.performanceClient=d,this.correlationId=h,this.regionDiscovery=new RegionDiscovery(o,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL))return AuthorityType.Ciam;const o=e.PathSegments;if(o.length)switch(o[0].toLowerCase()){case Constants.ADFS:return AuthorityType.Adfs;case Constants.DSTS:return AuthorityType.Dsts}return AuthorityType.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new UrlString(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw createClientAuthError(endpointResolutionError)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw createClientAuthError(endpointResolutionError)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw createClientAuthError(endpointResolutionError)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw createClientAuthError(endSessionEndpointNotSupported);return this.replacePath(this.metadata.end_session_endpoint)}else throw createClientAuthError(endpointResolutionError)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw createClientAuthError(endpointResolutionError)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw createClientAuthError(endpointResolutionError)}canReplaceTenant(e){return e.PathSegments.length===1&&!Authority.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===AuthorityType.Default&&this.protocolMode===ProtocolMode.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let o=e;const a=new UrlString(this.metadata.canonical_authority).getUrlComponents(),c=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((d,g)=>{let _=c[g];if(g===0&&this.canReplaceTenant(a)){const b=new UrlString(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];_!==b&&(this.logger.verbose(`Replacing tenant domain name ${_} with id ${b}`),_=b)}d!==_&&(o=o.replace(`/${_}/`,`/${d}/`))}),this.replaceTenant(o)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===AuthorityType.Adfs||this.protocolMode!==ProtocolMode.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var a,c;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),o=await invokeAsync(this.updateCloudDiscoveryMetadata.bind(this),PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const s=await invokeAsync(this.updateEndpointMetadata.bind(this),PerformanceEvents.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,o,{source:s}),(c=this.performanceClient)==null||c.addFields({cloudDiscoverySource:o,authorityEndpointSource:s},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:generateAuthorityMetadataExpiresAt(),jwks_uri:""}),e}updateCachedMetadata(e,o,s){o!==AuthorityMetadataSource.CACHE&&(s==null?void 0:s.source)!==AuthorityMetadataSource.CACHE&&(e.expiresAt=generateAuthorityMetadataExpiresAt(),e.canonical_authority=this.canonicalAuthority);const a=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(a,e),this.metadata=e}async updateEndpointMetadata(e){var a,c,h;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateEndpointMetadata,this.correlationId);const o=this.updateEndpointMetadataFromLocalSources(e);if(o){if(o.source===AuthorityMetadataSource.HARDCODED_VALUES&&(c=this.authorityOptions.azureRegionConfiguration)!=null&&c.azureRegion&&o.metadata){const d=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(o.metadata);updateAuthorityEndpointMetadata(e,d,!1),e.canonical_authority=this.canonicalAuthority}return o.source}let s=await invokeAsync(this.getEndpointMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(s)return(h=this.authorityOptions.azureRegionConfiguration)!=null&&h.azureRegion&&(s=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(s)),updateAuthorityEndpointMetadata(e,s,!0),AuthorityMetadataSource.NETWORK;throw createClientAuthError(openIdConfigError,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const o=this.getEndpointMetadataFromConfig();if(o)return this.logger.verbose("Found endpoint metadata in authority configuration"),updateAuthorityEndpointMetadata(e,o,!1),{source:AuthorityMetadataSource.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const a=this.getEndpointMetadataFromHardcodedValues();if(a)return updateAuthorityEndpointMetadata(e,a,!1),{source:AuthorityMetadataSource.HARDCODED_VALUES,metadata:a};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const s=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!s?(this.logger.verbose("Found endpoint metadata in the cache."),{source:AuthorityMetadataSource.CACHE}):(s&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new UrlString(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw createClientConfigurationError(invalidAuthorityMetadata)}return null}async getEndpointMetadataFromNetwork(){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},o=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${o}`);try{const a=await this.networkInterface.sendGetRequestAsync(o,e);return isOpenIdConfigResponse(a.body)?a.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in EndpointMetadata?EndpointMetadata[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var s,a,c;(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const o=(a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.azureRegion;if(o){if(o!==Constants.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=o,Authority.replaceWithRegionalInformation(e,o);const h=await invokeAsync(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),PerformanceEvents.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((c=this.authorityOptions.azureRegionConfiguration)==null?void 0:c.environmentRegion,this.regionDiscoveryMetadata);if(h)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=h,Authority.replaceWithRegionalInformation(e,h);this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const o=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(o)return o;const s=await invokeAsync(this.getCloudDiscoveryMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(s)return updateCloudDiscoveryMetadata(e,s,!0),AuthorityMetadataSource.NETWORK;throw createClientConfigurationError(untrustedAuthority)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Constants.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Constants.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Constants.NOT_APPLICABLE}`);const o=this.getCloudDiscoveryMetadataFromConfig();if(o)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),updateCloudDiscoveryMetadata(e,o,!1),AuthorityMetadataSource.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const a=getCloudDiscoveryMetadataFromHardcodedValues(this.hostnameAndPort);if(a)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),updateCloudDiscoveryMetadata(e,a,!1),AuthorityMetadataSource.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const s=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!s?(this.logger.verbose("Found cloud discovery metadata in the cache."),AuthorityMetadataSource.CACHE):(s&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===AuthorityType.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),o=getCloudDiscoveryMetadataFromNetworkResponse(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),o)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),o;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),createClientConfigurationError(invalidCloudDiscoveryMetadata)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Constants.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,o={};let s=null;try{const c=await this.networkInterface.sendGetRequestAsync(e,o);let h,d;if(isCloudInstanceDiscoveryResponse(c.body))h=c.body,d=h.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${h.tenant_discovery_endpoint}`);else if(isCloudInstanceDiscoveryErrorResponse(c.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${c.status}`),h=c.body,h.error===Constants.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${h.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${h.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),s=getCloudDiscoveryMetadataFromNetworkResponse(d,this.hostnameAndPort)}catch(c){if(c instanceof AuthError)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${c.errorCode}
Error Description: ${c.errorMessage}`);else{const h=c;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${h.name}
Error Description: ${h.message}`)}return null}return s||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),s=Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),s}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(o=>o&&UrlString.getDomainFromUrl(o).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,o){let s;if(o&&o.azureCloudInstance!==AzureCloudInstance.None){const a=o.tenant?o.tenant:Constants.DEFAULT_COMMON_TENANT;s=`${o.azureCloudInstance}/${a}/`}return s||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw createClientAuthError(endpointResolutionError)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return InstanceDiscoveryMetadataAliases.has(e)}static isPublicCloudAuthority(e){return Constants.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,o,s){const a=new UrlString(e);a.validateAsUri();const c=a.getUrlComponents();let h=`${o}.${c.HostNameAndPort}`;this.isPublicCloudAuthority(c.HostNameAndPort)&&(h=`${o}.${Constants.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const d=UrlString.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:h}).urlString;return s?`${d}?${s}`:d}static replaceWithRegionalInformation(e,o){const s={...e};return s.authorization_endpoint=Authority.buildRegionalAuthorityString(s.authorization_endpoint,o),s.token_endpoint=Authority.buildRegionalAuthorityString(s.token_endpoint,o),s.end_session_endpoint&&(s.end_session_endpoint=Authority.buildRegionalAuthorityString(s.end_session_endpoint,o)),s}static transformCIAMAuthority(e){let o=e;const a=new UrlString(e).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)){const c=a.HostNameAndPort.split(".")[0];o=`${o}${c}${Constants.AAD_TENANT_DOMAIN_SUFFIX}`}return o}}Authority.reservedTenantDomains=new Set(["{tenant}","{tenantid}",AADAuthorityConstants.COMMON,AADAuthorityConstants.CONSUMERS,AADAuthorityConstants.ORGANIZATIONS]);function getTenantFromAuthorityString(i){var a;const s=(a=new UrlString(i).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:a.toLowerCase();switch(s){case AADAuthorityConstants.COMMON:case AADAuthorityConstants.ORGANIZATIONS:case AADAuthorityConstants.CONSUMERS:return;default:return s}}function formatAuthorityUri(i){return i.endsWith(Constants.FORWARD_SLASH)?i:`${i}${Constants.FORWARD_SLASH}`}function buildStaticAuthorityOptions(i){const e=i.cloudDiscoveryMetadata;let o;if(e)try{o=JSON.parse(e)}catch{throw createClientConfigurationError(invalidCloudDiscoveryMetadata)}return{canonicalAuthority:i.authority?formatAuthorityUri(i.authority):void 0,knownAuthorities:i.knownAuthorities,cloudDiscoveryMetadata:o}}/*! @azure/msal-common v14.7.1 2024-02-17 */async function createDiscoveredInstance(i,e,o,s,a,c,h){h==null||h.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,c);const d=Authority.transformCIAMAuthority(formatAuthorityUri(i)),g=new Authority(d,e,o,s,a,c,h);try{return await invokeAsync(g.resolveEndpointsAsync.bind(g),PerformanceEvents.AuthorityResolveEndpointsAsync,a,h,c)(),g}catch{throw createClientAuthError(endpointResolutionError)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class BaseClient{constructor(e,o){this.config=buildClientConfiguration(e),this.logger=new Logger(this.config.loggerOptions,name$3,version$2),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new NetworkManager(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=o}createTokenRequestHeaders(e){const o={};if(o[HeaderNames.CONTENT_TYPE]=Constants.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const s=buildClientInfoFromHomeAccountId(e.credential);o[HeaderNames.CCS_HEADER]=`Oid:${s.uid}@${s.utid}`}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case CcsCredentialType.UPN:o[HeaderNames.CCS_HEADER]=`UPN: ${e.credential}`;break}return o}async executePostToTokenEndpoint(e,o,s,a,c,h){var g,_,b,j;h&&((g=this.performanceClient)==null||g.addQueueMeasurement(h,c));const d=await this.networkManager.sendPostRequest(a,e,{body:o,headers:s});return(j=this.performanceClient)==null||j.addFields({refreshTokenSize:((_=d.body.refresh_token)==null?void 0:_.length)||0,httpVerToken:((b=d.headers)==null?void 0:b[HeaderNames.X_MS_HTTP_VERSION])||""},c),this.config.serverTelemetryManager&&d.status<500&&d.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),d}async updateAuthority(e,o){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.UpdateTokenEndpointAuthority,o);const s=`https://${e}/${this.authority.tenant}/`,a=await createDiscoveredInstance(s,this.networkClient,this.cacheManager,this.authority.options,this.logger,o,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const o=new RequestParameterBuilder;return e.tokenQueryParameters&&o.addExtraQueryParameters(e.tokenQueryParameters),o.createQueryString()}}/*! @azure/msal-common v14.7.1 2024-02-17 */const noTokensFound="no_tokens_found",nativeAccountUnavailable="native_account_unavailable",refreshTokenExpired="refresh_token_expired",interactionRequired="interaction_required",consentRequired="consent_required",loginRequired="login_required",badToken="bad_token";/*! @azure/msal-common v14.7.1 2024-02-17 */const InteractionRequiredServerErrorMessage=[interactionRequired,consentRequired,loginRequired,badToken],InteractionRequiredAuthSubErrorMessage=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],InteractionRequiredAuthErrorMessages={[noTokensFound]:"No refresh token found in the cache. Please sign-in.",[nativeAccountUnavailable]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[refreshTokenExpired]:"Refresh token has expired.",[badToken]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class InteractionRequiredAuthError extends AuthError{constructor(e,o,s,a,c,h,d){super(e,o,s),Object.setPrototypeOf(this,InteractionRequiredAuthError.prototype),this.timestamp=a||Constants.EMPTY_STRING,this.traceId=c||Constants.EMPTY_STRING,this.correlationId=h||Constants.EMPTY_STRING,this.claims=d||Constants.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function isInteractionRequiredError(i,e,o){const s=!!i&&InteractionRequiredServerErrorMessage.indexOf(i)>-1,a=!!o&&InteractionRequiredAuthSubErrorMessage.indexOf(o)>-1,c=!!e&&InteractionRequiredServerErrorMessage.some(h=>e.indexOf(h)>-1);return s||c||a}function createInteractionRequiredAuthError(i){return new InteractionRequiredAuthError(i,InteractionRequiredAuthErrorMessages[i])}/*! @azure/msal-common v14.7.1 2024-02-17 */class CacheRecord{constructor(e,o,s,a,c){this.account=e||null,this.idToken=o||null,this.accessToken=s||null,this.refreshToken=a||null,this.appMetadata=c||null}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ProtocolUtils{static setRequestState(e,o,s){const a=ProtocolUtils.generateLibraryState(e,s);return o?`${a}${Constants.RESOURCE_DELIM}${o}`:a}static generateLibraryState(e,o){if(!e)throw createClientAuthError(noCryptoObject);const s={id:e.createNewGuid()};o&&(s.meta=o);const a=JSON.stringify(s);return e.base64Encode(a)}static parseRequestState(e,o){if(!e)throw createClientAuthError(noCryptoObject);if(!o)throw createClientAuthError(invalidState);try{const s=o.split(Constants.RESOURCE_DELIM),a=s[0],c=s.length>1?s.slice(1).join(Constants.RESOURCE_DELIM):Constants.EMPTY_STRING,h=e.base64Decode(a),d=JSON.parse(h);return{userRequestState:c||Constants.EMPTY_STRING,libraryState:d}}catch{throw createClientAuthError(invalidState)}}}/*! @azure/msal-common v14.7.1 2024-02-17 */const KeyLocation={SW:"sw",UHW:"uhw"};class PopTokenGenerator{constructor(e,o){this.cryptoUtils=e,this.performanceClient=o}async generateCnf(e,o){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.PopTokenGenerateCnf,e.correlationId);const s=await invokeAsync(this.generateKid.bind(this),PerformanceEvents.PopTokenGenerateCnf,o,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64Encode(JSON.stringify(s));return{kid:s.kid,reqCnfString:a,reqCnfHash:await this.cryptoUtils.hashString(a)}}async generateKid(e){var s;return(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:KeyLocation.SW}}async signPopToken(e,o,s){return this.signPayload(e,o,s)}async signPayload(e,o,s,a){const{resourceRequestMethod:c,resourceRequestUri:h,shrClaims:d,shrNonce:g,shrOptions:_}=s,b=h?new UrlString(h):void 0,j=b==null?void 0:b.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:nowSeconds(),m:c==null?void 0:c.toUpperCase(),u:j==null?void 0:j.HostNameAndPort,nonce:g||this.cryptoUtils.createNewGuid(),p:j==null?void 0:j.AbsolutePath,q:j!=null&&j.QueryString?[[],j.QueryString]:void 0,client_claims:d||void 0,...a},o,_,s.correlationId)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class TokenCacheContext{constructor(e,o){this.cache=e,this.hasChanged=o}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ResponseHandler{constructor(e,o,s,a,c,h,d){this.clientId=e,this.cacheStorage=o,this.cryptoObj=s,this.logger=a,this.serializableCache=c,this.persistencePlugin=h,this.performanceClient=d}validateServerAuthorizationCodeResponse(e,o){if(!e.state||!o)throw e.state?createClientAuthError(stateNotFound,"Cached State"):createClientAuthError(stateNotFound,"Server State");let s,a;try{s=decodeURIComponent(e.state)}catch{throw createClientAuthError(invalidState,e.state)}try{a=decodeURIComponent(o)}catch{throw createClientAuthError(invalidState,e.state)}if(s!==a)throw createClientAuthError(stateMismatch);if(e.error||e.error_description||e.suberror)throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||""):new ServerError(e.error||"",e.error_description,e.suberror)}validateTokenResponse(e,o){if(e.error||e.error_description||e.suberror){const s=`${e.error_codes} - [${e.timestamp}]: ${e.error_description} - Correlation ID: ${e.correlation_id} - Trace ID: ${e.trace_id}`,a=new ServerError(e.error,s,e.suberror);if(o&&e.status&&e.status>=HttpStatus.SERVER_ERROR_RANGE_START&&e.status<=HttpStatus.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${a}`);return}else if(o&&e.status&&e.status>=HttpStatus.CLIENT_ERROR_RANGE_START&&e.status<=HttpStatus.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${a}`);return}throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error,e.error_description,e.suberror,e.timestamp||Constants.EMPTY_STRING,e.trace_id||Constants.EMPTY_STRING,e.correlation_id||Constants.EMPTY_STRING,e.claims||Constants.EMPTY_STRING):a}}async handleServerTokenResponse(e,o,s,a,c,h,d,g,_){var et;(et=this.performanceClient)==null||et.addQueueMeasurement(PerformanceEvents.HandleServerTokenResponse,e.correlation_id);let b;if(e.id_token){if(b=extractTokenClaims(e.id_token||Constants.EMPTY_STRING,this.cryptoObj.base64Decode),c&&c.nonce&&b.nonce!==c.nonce)throw createClientAuthError(nonceMismatch);if(a.maxAge||a.maxAge===0){const rt=b.auth_time;if(!rt)throw createClientAuthError(authTimeNotFound);checkMaxAge(rt,a.maxAge)}}this.homeAccountIdentifier=AccountEntity.generateHomeAccountId(e.client_info||Constants.EMPTY_STRING,o.authorityType,this.logger,this.cryptoObj,b);let j;c&&c.state&&(j=ProtocolUtils.parseRequestState(this.cryptoObj,c.state)),e.key_id=e.key_id||a.sshKid||void 0;const _e=this.generateCacheRecord(e,o,s,a,b,h,c);let $;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),$=new TokenCacheContext(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess($)),d&&!g&&_e.account){const rt=_e.account.generateAccountKey();if(!this.cacheStorage.getAccount(rt,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ResponseHandler.generateAuthenticationResult(this.cryptoObj,o,_e,!1,a,b,j,void 0,_)}await this.cacheStorage.saveCacheRecord(_e,a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&$&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess($))}return ResponseHandler.generateAuthenticationResult(this.cryptoObj,o,_e,!1,a,b,j,e,_)}generateCacheRecord(e,o,s,a,c,h,d){const g=o.getPreferredCache();if(!g)throw createClientAuthError(invalidCacheEnvironment);const _=getTenantIdFromIdTokenClaims(c);let b,j;e.id_token&&c&&(b=createIdTokenEntity(this.homeAccountIdentifier,g,e.id_token,this.clientId,_||""),j=buildAccountToCache(this.cacheStorage,o,this.homeAccountIdentifier,c,this.cryptoObj.base64Decode,e.client_info,g,_,d,void 0,this.logger));let _e=null;if(e.access_token){const rt=e.scope?ScopeSet.fromString(e.scope):new ScopeSet(a.scopes||[]),st=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,tt=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,nt=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,it=s+st,pt=it+tt,lt=nt&&nt>0?s+nt:void 0;_e=createAccessTokenEntity(this.homeAccountIdentifier,g,e.access_token,this.clientId,_||o.tenant||"",rt.printScopes(),it,pt,this.cryptoObj.base64Decode,lt,e.token_type,h,e.key_id,a.claims,a.requestedClaimsHash)}let $=null;if(e.refresh_token){let rt;if(e.refresh_token_expires_in){const st=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;rt=s+st}$=createRefreshTokenEntity(this.homeAccountIdentifier,g,e.refresh_token,this.clientId,e.foci,h,rt)}let et=null;return e.foci&&(et={clientId:this.clientId,environment:g,familyId:e.foci}),new CacheRecord(j,b,_e,$,et)}static async generateAuthenticationResult(e,o,s,a,c,h,d,g,_){var it,pt,lt,at,At;let b=Constants.EMPTY_STRING,j=[],_e=null,$,et,rt=Constants.EMPTY_STRING;if(s.accessToken){if(s.accessToken.tokenType===AuthenticationScheme.POP){const vt=new PopTokenGenerator(e),{secret:ft,keyId:mt}=s.accessToken;if(!mt)throw createClientAuthError(keyIdMissing);b=await vt.signPopToken(ft,mt,c)}else b=s.accessToken.secret;j=ScopeSet.fromString(s.accessToken.target).asArray(),_e=new Date(Number(s.accessToken.expiresOn)*1e3),$=new Date(Number(s.accessToken.extendedExpiresOn)*1e3),s.accessToken.refreshOn&&(et=new Date(Number(s.accessToken.refreshOn)*1e3))}s.appMetadata&&(rt=s.appMetadata.familyId===THE_FAMILY_ID?THE_FAMILY_ID:"");const st=(h==null?void 0:h.oid)||(h==null?void 0:h.sub)||"",tt=(h==null?void 0:h.tid)||"";g!=null&&g.spa_accountid&&s.account&&(s.account.nativeAccountId=g==null?void 0:g.spa_accountid);const nt=s.account?updateAccountTenantProfileData(s.account.getAccountInfo(),void 0,h,(it=s.idToken)==null?void 0:it.secret):null;return{authority:o.canonicalAuthority,uniqueId:st,tenantId:tt,scopes:j,account:nt,idToken:((pt=s==null?void 0:s.idToken)==null?void 0:pt.secret)||"",idTokenClaims:h||{},accessToken:b,fromCache:a,expiresOn:_e,extExpiresOn:$,refreshOn:et,correlationId:c.correlationId,requestId:_||Constants.EMPTY_STRING,familyId:rt,tokenType:((lt=s.accessToken)==null?void 0:lt.tokenType)||Constants.EMPTY_STRING,state:d?d.userRequestState:Constants.EMPTY_STRING,cloudGraphHostName:((at=s.account)==null?void 0:at.cloudGraphHostName)||Constants.EMPTY_STRING,msGraphHost:((At=s.account)==null?void 0:At.msGraphHost)||Constants.EMPTY_STRING,code:g==null?void 0:g.spa_code,fromNativeBroker:!1}}}function buildAccountToCache(i,e,o,s,a,c,h,d,g,_,b){b==null||b.verbose("setCachedAccount called");const _e=i.getAccountKeys().find(st=>st.startsWith(o));let $=null;_e&&($=i.getAccount(_e,b));const et=$||AccountEntity.createAccount({homeAccountId:o,idTokenClaims:s,clientInfo:c,environment:h,cloudGraphHostName:g==null?void 0:g.cloud_graph_host_name,msGraphHost:g==null?void 0:g.msgraph_host,nativeAccountId:_},e,a),rt=et.tenantProfiles||[];if(d&&!rt.find(st=>st.tenantId===d)){const st=buildTenantProfileFromIdTokenClaims(o,s);rt.push(st)}return et.tenantProfiles=rt,et}/*! @azure/msal-common v14.7.1 2024-02-17 */class AuthorizationCodeClient extends BaseClient{constructor(e,o){var s;super(e,o),this.includeRedirectUri=!0,this.oidcDefaultScopes=(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes}async getAuthCodeUrl(e){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.GetAuthCodeUrl,e.correlationId);const o=await invokeAsync(this.createAuthCodeUrlQueryString.bind(this),PerformanceEvents.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return UrlString.appendQueryString(this.authority.authorizationEndpoint,o)}async acquireToken(e,o){var d,g;if((d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.AuthClientAcquireToken,e.correlationId),!e.code)throw createClientAuthError(requestCannotBeMade);const s=nowSeconds(),a=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),c=(g=a.headers)==null?void 0:g[HeaderNames.X_MS_REQUEST_ID],h=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return h.validateTokenResponse(a.body),invokeAsync(h.handleServerTokenResponse.bind(h),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,s,e,o,void 0,void 0,void 0,c)}handleFragmentResponse(e,o){if(new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,o),!e.code)throw createClientAuthError(authorizationCodeMissingFromServerResponse);return e}getLogoutUri(e){if(!e)throw createClientConfigurationError(logoutRequestEmpty);const o=this.createLogoutUrlQueryString(e);return UrlString.appendQueryString(this.authority.endSessionEndpoint,o)}async executeTokenRequest(e,o){var _,b;(_=this.performanceClient)==null||_.addQueueMeasurement(PerformanceEvents.AuthClientExecuteTokenRequest,o.correlationId);const s=this.createTokenQueryParameters(o),a=UrlString.appendQueryString(e.tokenEndpoint,s),c=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,o.correlationId)(o);let h;if(o.clientInfo)try{const j=buildClientInfo(o.clientInfo,this.cryptoUtils.base64Decode);h={credential:`${j.uid}${Separators.CLIENT_INFO_SEPARATOR}${j.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(j){this.logger.verbose("Could not parse client info for CCS Header: "+j)}const d=this.createTokenRequestHeaders(h||o.ccsCredential),g={clientId:((b=o.tokenBodyParameters)==null?void 0:b.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:o.scopes,claims:o.claims,authenticationScheme:o.authenticationScheme,resourceRequestMethod:o.resourceRequestMethod,resourceRequestUri:o.resourceRequestUri,shrClaims:o.shrClaims,sshKid:o.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,o.correlationId)(a,c,d,g,o.correlationId,PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var c,h;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthClientCreateTokenRequestBody,e.correlationId);const o=new RequestParameterBuilder;if(o.addClientId(((h=e.tokenBodyParameters)==null?void 0:h[CLIENT_ID])||this.config.authOptions.clientId),this.includeRedirectUri?o.addRedirectUri(e.redirectUri):RequestValidator.validateRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,this.oidcDefaultScopes),o.addAuthorizationCode(e.code),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&o.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&o.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&o.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const d=this.config.clientCredentials.clientAssertion;o.addClientAssertion(d.assertion),o.addClientAssertionType(d.assertionType)}if(o.addGrantType(GrantType.AUTHORIZATION_CODE_GRANT),o.addClientInfo(),e.authenticationScheme===AuthenticationScheme.POP){const d=new PopTokenGenerator(this.cryptoUtils,this.performanceClient),g=await invokeAsync(d.generateCnf.bind(d),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);o.addPopToken(g.reqCnfString)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)o.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);const s=e.correlationId||this.config.cryptoInterface.createNewGuid();o.addCorrelationId(s),(!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities);let a;if(e.clientInfo)try{const d=buildClientInfo(e.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${d.uid}${Separators.CLIENT_INFO_SEPARATOR}${d.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}else a=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const d=buildClientInfoFromHomeAccountId(a.credential);o.addCcsOid(d)}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}break;case CcsCredentialType.UPN:o.addCcsUpn(a.credential);break}return e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[RETURN_SPA_CODE])&&o.addExtraQueryParameters({[RETURN_SPA_CODE]:"1"}),o.createQueryString()}async createAuthCodeUrlQueryString(e){var c,h;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthClientCreateQueryString,e.correlationId);const o=new RequestParameterBuilder;o.addClientId(((h=e.extraQueryParameters)==null?void 0:h[CLIENT_ID])||this.config.authOptions.clientId);const s=[...e.scopes||[],...e.extraScopesToConsent||[]];o.addScopes(s,!0,this.oidcDefaultScopes),o.addRedirectUri(e.redirectUri);const a=e.correlationId||this.config.cryptoInterface.createNewGuid();if(o.addCorrelationId(a),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(this.config.libraryInfo),isOidcProtocolMode(this.config)||o.addApplicationTelemetry(this.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==PromptValue.SELECT_ACCOUNT)if(e.sid&&e.prompt===PromptValue.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const d=this.extractAccountSid(e.account),g=this.extractLoginHint(e.account);if(g){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(g);try{const _=buildClientInfoFromHomeAccountId(e.account.homeAccountId);o.addCcsOid(_)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(d&&e.prompt===PromptValue.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(d);try{const _=buildClientInfoFromHomeAccountId(e.account.homeAccountId);o.addCcsOid(_)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const _=buildClientInfoFromHomeAccountId(e.account.homeAccountId);o.addCcsOid(_)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&o.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===AuthenticationScheme.POP)){const d=new PopTokenGenerator(this.cryptoUtils),g=await invokeAsync(d.generateCnf.bind(d),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);o.addPopToken(g.reqCnfHash)}return o.createQueryString()}createLogoutUrlQueryString(e){const o=new RequestParameterBuilder;return e.postLogoutRedirectUri&&o.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&o.addCorrelationId(e.correlationId),e.idTokenHint&&o.addIdTokenHint(e.idTokenHint),e.state&&o.addState(e.state),e.logoutHint&&o.addLogoutHint(e.logoutHint),e.extraQueryParameters&&o.addExtraQueryParameters(e.extraQueryParameters),o.createQueryString()}extractAccountSid(e){var o;return((o=e.idTokenClaims)==null?void 0:o.sid)||null}extractLoginHint(e){var o;return((o=e.idTokenClaims)==null?void 0:o.login_hint)||null}}/*! @azure/msal-common v14.7.1 2024-02-17 */const DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS=300;class RefreshTokenClient extends BaseClient{constructor(e,o){super(e,o)}async acquireToken(e){var h,d;(h=this.performanceClient)==null||h.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireToken,e.correlationId);const o=nowSeconds(),s=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=(d=s.headers)==null?void 0:d[HeaderNames.X_MS_REQUEST_ID],c=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return c.validateTokenResponse(s.body),invokeAsync(c.handleServerTokenResponse.bind(c),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(s.body,this.authority,o,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){var s;if(!e)throw createClientConfigurationError(tokenRequestEmpty);if((s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw createClientAuthError(noAccountInSilentRequest);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(a){const c=a instanceof InteractionRequiredAuthError&&a.errorCode===noTokensFound,h=a instanceof ServerError&&a.errorCode===Errors.INVALID_GRANT_ERROR&&a.subError===Errors.CLIENT_MISMATCH_ERROR;if(c||h)return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw a}return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,o){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const s=invoke(this.cacheManager.getRefreshToken.bind(this.cacheManager),PerformanceEvents.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,o,void 0,this.performanceClient,e.correlationId);if(!s)throw createInteractionRequiredAuthError(noTokensFound);if(s.expiresOn&&isTokenExpired(s.expiresOn,e.refreshTokenExpirationOffsetSeconds||DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS))throw createInteractionRequiredAuthError(refreshTokenExpired);const a={...e,refreshToken:s.secret,authenticationScheme:e.authenticationScheme||AuthenticationScheme.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}};try{return await invokeAsync(this.acquireToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(a)}catch(h){if(h instanceof InteractionRequiredAuthError&&h.subError===badToken){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const d=generateCredentialKey(s);this.cacheManager.removeRefreshToken(d)}throw h}}async executeTokenRequest(e,o){var g,_;(g=this.performanceClient)==null||g.addQueueMeasurement(PerformanceEvents.RefreshTokenClientExecuteTokenRequest,e.correlationId);const s=this.createTokenQueryParameters(e),a=UrlString.appendQueryString(o.tokenEndpoint,s),c=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),h=this.createTokenRequestHeaders(e.ccsCredential),d={clientId:((_=e.tokenBodyParameters)==null?void 0:_.clientId)||this.config.authOptions.clientId,authority:o.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(a,c,h,d,e.correlationId,PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var a,c,h;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const o=e.correlationId,s=new RequestParameterBuilder;if(s.addClientId(((c=e.tokenBodyParameters)==null?void 0:c[CLIENT_ID])||this.config.authOptions.clientId),e.redirectUri&&s.addRedirectUri(e.redirectUri),s.addScopes(e.scopes,!0,(h=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:h.defaultScopes),s.addGrantType(GrantType.REFRESH_TOKEN_GRANT),s.addClientInfo(),s.addLibraryInfo(this.config.libraryInfo),s.addApplicationTelemetry(this.config.telemetry.application),s.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&s.addServerTelemetry(this.serverTelemetryManager),s.addCorrelationId(o),s.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&s.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const d=this.config.clientCredentials.clientAssertion;s.addClientAssertion(d.assertion),s.addClientAssertionType(d.assertionType)}if(e.authenticationScheme===AuthenticationScheme.POP){const d=new PopTokenGenerator(this.cryptoUtils,this.performanceClient),g=await invokeAsync(d.generateCnf.bind(d),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);s.addPopToken(g.reqCnfString)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)s.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);if((!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&s.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const d=buildClientInfoFromHomeAccountId(e.ccsCredential.credential);s.addCcsOid(d)}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}break;case CcsCredentialType.UPN:s.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&s.addExtraQueryParameters(e.tokenBodyParameters),s.createQueryString()}}/*! @azure/msal-common v14.7.1 2024-02-17 */class SilentFlowClient extends BaseClient{constructor(e,o){super(e,o)}async acquireToken(e){try{const[o,s]=await this.acquireCachedToken(e);return s===CacheOutcome.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),o}catch(o){if(o instanceof ClientAuthError&&o.errorCode===tokenRefreshRequired)return new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw o}}async acquireCachedToken(e){var g;(g=this.performanceClient)==null||g.addQueueMeasurement(PerformanceEvents.SilentFlowClientAcquireCachedToken,e.correlationId);let o=CacheOutcome.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!StringUtils.isEmptyObj(e.claims))throw this.setCacheOutcome(CacheOutcome.FORCE_REFRESH_OR_CLAIMS,e.correlationId),createClientAuthError(tokenRefreshRequired);if(!e.account)throw createClientAuthError(noAccountInSilentRequest);const s=e.account.tenantId||getTenantFromAuthorityString(e.authority),a=this.cacheManager.getTokenKeys(),c=this.cacheManager.getAccessToken(e.account,e,a,s,this.performanceClient,e.correlationId);if(c){if(wasClockTurnedBack(c.cachedAt)||isTokenExpired(c.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),createClientAuthError(tokenRefreshRequired);c.refreshOn&&isTokenExpired(c.refreshOn,0)&&(o=CacheOutcome.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN,e.correlationId),createClientAuthError(tokenRefreshRequired);const h=e.authority||this.authority.getPreferredCache(),d={account:this.cacheManager.readAccountFromCache(e.account),accessToken:c,idToken:this.cacheManager.getIdToken(e.account,a,s,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h)};return this.setCacheOutcome(o,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await invokeAsync(this.generateResultFromCacheRecord.bind(this),PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(d,e),o]}setCacheOutcome(e,o){var s,a;(s=this.serverTelemetryManager)==null||s.setCacheOutcome(e),(a=this.performanceClient)==null||a.addFields({cacheOutcome:e},o),e!==CacheOutcome.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,o){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,o.correlationId);let s;if(e.idToken&&(s=extractTokenClaims(e.idToken.secret,this.config.cryptoInterface.base64Decode)),o.maxAge||o.maxAge===0){const c=s==null?void 0:s.auth_time;if(!c)throw createClientAuthError(authTimeNotFound);checkMaxAge(c,o.maxAge)}return ResponseHandler.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,o,s)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const StubbedNetworkModule={sendGetRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented)),sendPostRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented))};/*! @azure/msal-common v14.7.1 2024-02-17 */const missingKidError="missing_kid_error",missingAlgError="missing_alg_error";/*! @azure/msal-common v14.7.1 2024-02-17 */const JoseHeaderErrorMessages={[missingKidError]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[missingAlgError]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class JoseHeaderError extends AuthError{constructor(e,o){super(e,o),this.name="JoseHeaderError",Object.setPrototypeOf(this,JoseHeaderError.prototype)}}function createJoseHeaderError(i){return new JoseHeaderError(i,JoseHeaderErrorMessages[i])}/*! @azure/msal-common v14.7.1 2024-02-17 */class JoseHeader{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw createJoseHeaderError(missingKidError);if(!e.alg)throw createJoseHeaderError(missingAlgError);const o=new JoseHeader({typ:e.typ||JsonWebTokenTypes.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(o)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ServerTelemetryManager{constructor(e,o){this.cacheOutcome=CacheOutcome.NOT_APPLICABLE,this.cacheManager=o,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Constants.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Constants.EMPTY_STRING,this.telemetryCacheKey=SERVER_TELEM_CONSTANTS.CACHE_KEY+Separators.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`,o=[this.wrapperSKU,this.wrapperVer].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),a=[e,s].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,a,o].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),o=ServerTelemetryManager.maxErrorsToSend(e),s=e.failedRequests.slice(0,2*o).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),a=e.errors.slice(0,o).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),c=e.errors.length,h=o<c?SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE:SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE,d=[c,h].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,e.cacheHits,s,a,d].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const o=this.getLastRequests();o.errors.length>=SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS&&(o.failedRequests.shift(),o.failedRequests.shift(),o.errors.shift()),o.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof AuthError?e.subError?o.errors.push(e.subError):e.errorCode?o.errors.push(e.errorCode):o.errors.push(e.toString()):o.errors.push(e.toString()):o.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),o=ServerTelemetryManager.maxErrorsToSend(e),s=e.errors.length;if(o===s)this.cacheManager.removeItem(this.telemetryCacheKey);else{const a={failedRequests:e.failedRequests.slice(o*2),errors:e.errors.slice(o),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}}static maxErrorsToSend(e){let o,s=0,a=0;const c=e.errors.length;for(o=0;o<c;o++){const h=e.failedRequests[2*o]||Constants.EMPTY_STRING,d=e.failedRequests[2*o+1]||Constants.EMPTY_STRING,g=e.errors[o]||Constants.EMPTY_STRING;if(a+=h.toString().length+d.toString().length+g.length+3,a<SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES)s+=1;else break}return s}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Constants.EMPTY_STRING),e.push(this.regionSource||Constants.EMPTY_STRING),e.push(this.regionOutcome||Constants.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}}/*! @azure/msal-common v14.7.1 2024-02-17 */class StubPerformanceMeasurement{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class StubPerformanceClient{generateId(){return"callback-id"}startMeasurement(e,o){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:PerformanceEventStatus.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:o||""},measurement:new StubPerformanceMeasurement}}startPerformanceMeasurement(){return new StubPerformanceMeasurement}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const pkceNotCreated="pkce_not_created",cryptoNonExistent="crypto_nonexistent",emptyNavigateUri="empty_navigate_uri",hashEmptyError="hash_empty_error",noStateInHash="no_state_in_hash",hashDoesNotContainKnownProperties="hash_does_not_contain_known_properties",unableToParseState="unable_to_parse_state",stateInteractionTypeMismatch="state_interaction_type_mismatch",interactionInProgress="interaction_in_progress",popupWindowError="popup_window_error",emptyWindowError="empty_window_error",userCancelled="user_cancelled",monitorPopupTimeout="monitor_popup_timeout",monitorWindowTimeout="monitor_window_timeout",redirectInIframe="redirect_in_iframe",blockIframeReload="block_iframe_reload",blockNestedPopups="block_nested_popups",iframeClosedPrematurely="iframe_closed_prematurely",silentLogoutUnsupported="silent_logout_unsupported",noAccountError="no_account_error",silentPromptValueError="silent_prompt_value_error",noTokenRequestCacheError="no_token_request_cache_error",unableToParseTokenRequestCacheError="unable_to_parse_token_request_cache_error",noCachedAuthorityError="no_cached_authority_error",authRequestNotSetError="auth_request_not_set_error",invalidCacheType="invalid_cache_type",nonBrowserEnvironment="non_browser_environment",databaseNotOpen="database_not_open",noNetworkConnectivity="no_network_connectivity",postRequestFailed="post_request_failed",getRequestFailed="get_request_failed",failedToParseResponse="failed_to_parse_response",unableToLoadToken="unable_to_load_token",cryptoKeyNotFound="crypto_key_not_found",authCodeRequired="auth_code_required",authCodeOrNativeAccountIdRequired="auth_code_or_nativeAccountId_required",spaCodeAndNativeAccountIdPresent="spa_code_and_nativeAccountId_present",databaseUnavailable="database_unavailable",unableToAcquireTokenFromNativePlatform="unable_to_acquire_token_from_native_platform",nativeHandshakeTimeout="native_handshake_timeout",nativeExtensionNotInstalled="native_extension_not_installed",nativeConnectionNotEstablished="native_connection_not_established",uninitializedPublicClientApplication="uninitialized_public_client_application",nativePromptNotSupported="native_prompt_not_supported",invalidBase64String="invalid_base64_string";/*! @azure/msal-browser v3.10.0 2024-02-17 */const ErrorLink="For more visit: aka.ms/msaljs/browser-errors",BrowserAuthErrorMessages={[pkceNotCreated]:"The PKCE code challenge and verifier could not be generated.",[cryptoNonExistent]:"The crypto object or function is not available.",[emptyNavigateUri]:"Navigation URI is empty. Please check stack trace for more info.",[hashEmptyError]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ErrorLink}`,[noStateInHash]:"Hash does not contain state. Please verify that the request originated from msal.",[hashDoesNotContainKnownProperties]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ErrorLink}`,[unableToParseState]:"Unable to parse state. Please verify that the request originated from msal.",[stateInteractionTypeMismatch]:"Hash contains state but the interaction type does not match the caller.",[interactionInProgress]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ErrorLink}`,[popupWindowError]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[emptyWindowError]:"window.open returned null or undefined window object.",[userCancelled]:"User cancelled the flow.",[monitorPopupTimeout]:`Token acquisition in popup failed due to timeout.  ${ErrorLink}`,[monitorWindowTimeout]:`Token acquisition in iframe failed due to timeout.  ${ErrorLink}`,[redirectInIframe]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[blockIframeReload]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ErrorLink}`,[blockNestedPopups]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[iframeClosedPrematurely]:"The iframe being monitored was closed prematurely.",[silentLogoutUnsupported]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[noAccountError]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[silentPromptValueError]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[noTokenRequestCacheError]:"No token request found in cache.",[unableToParseTokenRequestCacheError]:"The cached token request could not be parsed.",[noCachedAuthorityError]:"No cached authority found.",[authRequestNotSetError]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[invalidCacheType]:"Invalid cache type",[nonBrowserEnvironment]:"Login and token requests are not supported in non-browser environments.",[databaseNotOpen]:"Database is not open!",[noNetworkConnectivity]:"No network connectivity. Check your internet connection.",[postRequestFailed]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[getRequestFailed]:"Network request failed. Please check the network trace to determine root cause.",[failedToParseResponse]:"Failed to parse network response. Check network trace.",[unableToLoadToken]:"Error loading token to cache.",[cryptoKeyNotFound]:"Cryptographic Key or Keypair not found in browser storage.",[authCodeRequired]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[authCodeOrNativeAccountIdRequired]:"An authorization code or nativeAccountId must be provided to this flow.",[spaCodeAndNativeAccountIdPresent]:"Request cannot contain both spa code and native account id.",[databaseUnavailable]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[unableToAcquireTokenFromNativePlatform]:`Unable to acquire token from native platform.  ${ErrorLink}`,[nativeHandshakeTimeout]:"Timed out while attempting to establish connection to browser extension",[nativeExtensionNotInstalled]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[nativeConnectionNotEstablished]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ErrorLink}`,[uninitializedPublicClientApplication]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ErrorLink}`,[nativePromptNotSupported]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[invalidBase64String]:"Invalid base64 encoded string."};class BrowserAuthError extends AuthError{constructor(e){super(e,BrowserAuthErrorMessages[e]),Object.setPrototypeOf(this,BrowserAuthError.prototype),this.name="BrowserAuthError"}}function createBrowserAuthError(i){return new BrowserAuthError(i)}/*! @azure/msal-browser v3.10.0 2024-02-17 */const BrowserConstants={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},NativeConstants={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},NativeExtensionMethod={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},BrowserCacheLocation={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},HTTP_REQUEST_TYPE={GET:"GET",POST:"POST"},TemporaryCacheKeys={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},StaticCacheKeys={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},InMemoryCacheKeys={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ApiId={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var InteractionType;(function(i){i.Redirect="redirect",i.Popup="popup",i.Silent="silent",i.None="none"})(InteractionType||(InteractionType={}));const InteractionStatus={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},DEFAULT_REQUEST={scopes:OIDC_DEFAULT_SCOPES},KEY_FORMAT_JWK="jwk",WrapperSKU={React:"@azure/msal-react",Angular:"@azure/msal-angular"},DB_NAME="msal.db",DB_VERSION=1,DB_TABLE_NAME=`${DB_NAME}.keys`,CacheLookupPolicy={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},iFrameRenewalPolicies=[CacheLookupPolicy.Default,CacheLookupPolicy.Skip,CacheLookupPolicy.RefreshTokenAndNetwork],LOG_LEVEL_CACHE_KEY="msal.browser.log.level",LOG_PII_CACHE_KEY="msal.browser.log.pii";/*! @azure/msal-browser v3.10.0 2024-02-17 */const PKCS1_V15_KEYGEN_ALG="RSASSA-PKCS1-v1_5",S256_HASH_ALG="SHA-256",MODULUS_LENGTH=2048,PUBLIC_EXPONENT=new Uint8Array([1,0,1]),UUID_CHARS="0123456789abcdef",UINT32_ARR=new Uint32Array(1),keygenAlgorithmOptions={name:PKCS1_V15_KEYGEN_ALG,hash:S256_HASH_ALG,modulusLength:MODULUS_LENGTH,publicExponent:PUBLIC_EXPONENT};function validateCryptoAvailable(i){if("crypto"in window)i.verbose("BrowserCrypto: modern crypto interface available");else throw i.error("BrowserCrypto: crypto interface is unavailable"),createBrowserAuthError(cryptoNonExistent)}async function sha256Digest(i,e,o){e==null||e.addQueueMeasurement(PerformanceEvents.Sha256Digest,o);const a=new TextEncoder().encode(i);return window.crypto.subtle.digest(S256_HASH_ALG,a)}function getRandomValues(i){return window.crypto.getRandomValues(i)}function getRandomUint32(){return window.crypto.getRandomValues(UINT32_ARR),UINT32_ARR[0]}function createNewGuid(){const i=Date.now(),e=getRandomUint32()*1024+(getRandomUint32()&1023),o=new Uint8Array(16),s=Math.trunc(e/2**30),a=e&2**30-1,c=getRandomUint32();o[0]=i/2**40,o[1]=i/2**32,o[2]=i/2**24,o[3]=i/2**16,o[4]=i/2**8,o[5]=i,o[6]=112|s>>>8,o[7]=s,o[8]=128|a>>>24,o[9]=a>>>16,o[10]=a>>>8,o[11]=a,o[12]=c>>>24,o[13]=c>>>16,o[14]=c>>>8,o[15]=c;let h="";for(let d=0;d<o.length;d++)h+=UUID_CHARS.charAt(o[d]>>>4),h+=UUID_CHARS.charAt(o[d]&15),(d===3||d===5||d===7||d===9)&&(h+="-");return h}async function generateKeyPair(i,e){return window.crypto.subtle.generateKey(keygenAlgorithmOptions,i,e)}async function exportJwk(i){return window.crypto.subtle.exportKey(KEY_FORMAT_JWK,i)}async function importJwk(i,e,o){return window.crypto.subtle.importKey(KEY_FORMAT_JWK,i,keygenAlgorithmOptions,e,o)}async function sign(i,e){return window.crypto.subtle.sign(keygenAlgorithmOptions,i,e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function clearHash(i){i.location.hash="",typeof i.history.replaceState=="function"&&i.history.replaceState(null,"",`${i.location.origin}${i.location.pathname}${i.location.search}`)}function replaceHash(i){const e=i.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function isInIframe(){return window.parent!==window}function isInPopup(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${BrowserConstants.POPUP_NAME_PREFIX}.`)===0}function getCurrentUri(){return window.location.href.split("?")[0].split("#")[0]}function getHomepage(){const e=new UrlString(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function blockReloadInHiddenIframes(){if(UrlString.hashContainsKnownProperties(window.location.hash)&&isInIframe())throw createBrowserAuthError(blockIframeReload)}function blockRedirectInIframe(i,e){const o=isInIframe();if(i===InteractionType.Redirect&&o&&!e)throw createBrowserAuthError(redirectInIframe)}function blockAcquireTokenInPopups(){if(isInPopup())throw createBrowserAuthError(blockNestedPopups)}function blockNonBrowserEnvironment(i){if(!i)throw createBrowserAuthError(nonBrowserEnvironment)}function blockAPICallsBeforeInitialize(i){if(!i)throw createBrowserAuthError(uninitializedPublicClientApplication)}function preconnect(i){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(i).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function(e,o,s){let a=Promise.resolve();if(o&&o.length>0){const c=document.getElementsByTagName("link");a=Promise.all(o.map(h=>{if(h=assetsURL(h),h in seen)return;seen[h]=!0;const d=h.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(!!s)for(let j=c.length-1;j>=0;j--){const _e=c[j];if(_e.href===h&&(!d||_e.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${g}`))return;const b=document.createElement("link");if(b.rel=d?"stylesheet":scriptRel,d||(b.as="script",b.crossOrigin=""),b.href=h,document.head.appendChild(b),d)return new Promise((j,_e)=>{b.addEventListener("load",j),b.addEventListener("error",()=>_e(new Error(`Unable to preload CSS for ${h}`)))})}))}return a.then(()=>e()).catch(c=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c})};/*! @azure/msal-browser v3.10.0 2024-02-17 */class NavigationClient{navigateInternal(e,o){return NavigationClient.defaultNavigateWindow(e,o)}navigateExternal(e,o){return NavigationClient.defaultNavigateWindow(e,o)}static defaultNavigateWindow(e,o){return o.noHistory?window.location.replace(e):window.location.assign(e),new Promise(s=>{setTimeout(()=>{s(!0)},o.timeout)})}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class FetchClient{async sendGetRequestAsync(e,o){let s;try{s=await fetch(e,{method:HTTP_REQUEST_TYPE.GET,headers:this.getFetchHeaders(o)})}catch{throw window.navigator.onLine?createBrowserAuthError(getRequestFailed):createBrowserAuthError(noNetworkConnectivity)}try{return{headers:this.getHeaderDict(s.headers),body:await s.json(),status:s.status}}catch{throw createBrowserAuthError(failedToParseResponse)}}async sendPostRequestAsync(e,o){const s=o&&o.body||Constants.EMPTY_STRING;let a;try{a=await fetch(e,{method:HTTP_REQUEST_TYPE.POST,headers:this.getFetchHeaders(o),body:s})}catch{throw window.navigator.onLine?createBrowserAuthError(postRequestFailed):createBrowserAuthError(noNetworkConnectivity)}try{return{headers:this.getHeaderDict(a.headers),body:await a.json(),status:a.status}}catch{throw createBrowserAuthError(failedToParseResponse)}}getFetchHeaders(e){const o=new Headers;if(!(e&&e.headers))return o;const s=e.headers;return Object.keys(s).forEach(a=>{o.append(a,s[a])}),o}getHeaderDict(e){const o={};return e.forEach((s,a)=>{o[a]=s}),o}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const DEFAULT_POPUP_TIMEOUT_MS=6e4,DEFAULT_IFRAME_TIMEOUT_MS=1e4,DEFAULT_REDIRECT_TIMEOUT_MS=3e4,DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS=2e3;function buildConfiguration({auth:i,cache:e,system:o,telemetry:s},a){const c={clientId:Constants.EMPTY_STRING,authority:`${Constants.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Constants.EMPTY_STRING,authorityMetadata:Constants.EMPTY_STRING,redirectUri:Constants.EMPTY_STRING,postLogoutRedirectUri:Constants.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ProtocolMode.AAD,OIDCOptions:{serverResponseType:ServerResponseType.FRAGMENT,defaultScopes:[Constants.OPENID_SCOPE,Constants.PROFILE_SCOPE,Constants.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:AzureCloudInstance.None,tenant:Constants.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},h={cacheLocation:BrowserCacheLocation.SessionStorage,temporaryCacheLocation:BrowserCacheLocation.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===BrowserCacheLocation.LocalStorage),claimsBasedCachingEnabled:!1},d={loggerCallback:()=>{},logLevel:LogLevel.Info,piiLoggingEnabled:!1},_={...{...DEFAULT_SYSTEM_OPTIONS,loggerOptions:d,networkClient:a?new FetchClient:StubbedNetworkModule,navigationClient:new NavigationClient,loadFrameTimeout:0,windowHashTimeout:(o==null?void 0:o.loadFrameTimeout)||DEFAULT_POPUP_TIMEOUT_MS,iframeHashTimeout:(o==null?void 0:o.loadFrameTimeout)||DEFAULT_IFRAME_TIMEOUT_MS,navigateFrameWait:0,redirectNavigationTimeout:DEFAULT_REDIRECT_TIMEOUT_MS,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(o==null?void 0:o.nativeBrokerHandshakeTimeout)||DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS,pollIntervalMilliseconds:BrowserConstants.DEFAULT_POLL_INTERVAL_MS},...o,loggerOptions:(o==null?void 0:o.loggerOptions)||d},b={application:{appName:Constants.EMPTY_STRING,appVersion:Constants.EMPTY_STRING},client:new StubPerformanceClient};if((i==null?void 0:i.protocolMode)!==ProtocolMode.OIDC&&(i!=null&&i.OIDCOptions)&&new Logger(_.loggerOptions).warning(JSON.stringify(createClientConfigurationError(cannotSetOIDCOptions))),i!=null&&i.protocolMode&&i.protocolMode!==ProtocolMode.AAD&&(_!=null&&_.allowNativeBroker))throw createClientConfigurationError(cannotAllowNativeBroker);return{auth:{...c,...i,OIDCOptions:{...c.OIDCOptions,...i==null?void 0:i.OIDCOptions}},cache:{...h,...e},system:_,telemetry:{...b,...s}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const name$2="@azure/msal-browser",version$1="3.10.0";/*! @azure/msal-browser v3.10.0 2024-02-17 */class BaseOperatingContext{static loggerCallback(e,o){switch(e){case LogLevel.Error:console.error(o);return;case LogLevel.Info:console.info(o);return;case LogLevel.Verbose:console.debug(o);return;case LogLevel.Warning:console.warn(o);return;default:console.log(o);return}}constructor(e){var g;this.browserEnvironment=typeof window<"u",this.config=buildConfiguration(e,this.browserEnvironment);let o;try{o=window[BrowserCacheLocation.SessionStorage]}catch{}const s=o==null?void 0:o.getItem(LOG_LEVEL_CACHE_KEY),a=(g=o==null?void 0:o.getItem(LOG_PII_CACHE_KEY))==null?void 0:g.toLowerCase(),c=a==="true"?!0:a==="false"?!1:void 0,h={...this.config.system.loggerOptions},d=s&&Object.keys(LogLevel).includes(s)?LogLevel[s]:void 0;d&&(h.loggerCallback=BaseOperatingContext.loggerCallback,h.logLevel=d),c!==void 0&&(h.piiLoggingEnabled=c),this.logger=new Logger(h,name$2,version$1),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class StandardOperatingContext extends BaseOperatingContext{getModuleName(){return StandardOperatingContext.MODULE_NAME}getId(){return StandardOperatingContext.ID}async initialize(){return this.available=typeof window<"u",this.available}}StandardOperatingContext.MODULE_NAME="";StandardOperatingContext.ID="StandardOperatingContext";async function createV3Controller(i){const e=new StandardOperatingContext(i);return await e.initialize(),(await __vitePreload(()=>Promise.resolve().then(()=>StandardController$1),void 0)).StandardController.createController(e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function urlEncode(i){return encodeURIComponent(base64Encode(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function urlEncodeArr(i){return base64EncArr(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64Encode(i){return base64EncArr(new TextEncoder().encode(i))}function base64EncArr(i){const e=Array.from(i,o=>String.fromCodePoint(o)).join("");return btoa(e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function base64Decode(i){return new TextDecoder().decode(base64DecToArr(i))}function base64DecToArr(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw createBrowserAuthError(invalidBase64String)}const o=atob(e);return Uint8Array.from(o,s=>s.codePointAt(0)||0)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class DatabaseStorage{constructor(){this.dbName=DB_NAME,this.version=DB_VERSION,this.tableName=DB_TABLE_NAME,this.dbOpen=!1}async open(){return new Promise((e,o)=>{const s=window.indexedDB.open(this.dbName,this.version);s.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),s.addEventListener("success",a=>{const c=a;this.db=c.target.result,this.dbOpen=!0,e()}),s.addEventListener("error",()=>o(createBrowserAuthError(databaseUnavailable)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((o,s)=>{if(!this.db)return s(createBrowserAuthError(databaseNotOpen));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);h.addEventListener("success",d=>{const g=d;this.closeConnection(),o(g.target.result)}),h.addEventListener("error",d=>{this.closeConnection(),s(d)})})}async setItem(e,o){return await this.validateDbIsOpen(),new Promise((s,a)=>{if(!this.db)return a(createBrowserAuthError(databaseNotOpen));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(o,e);d.addEventListener("success",()=>{this.closeConnection(),s()}),d.addEventListener("error",g=>{this.closeConnection(),a(g)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((o,s)=>{if(!this.db)return s(createBrowserAuthError(databaseNotOpen));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);h.addEventListener("success",()=>{this.closeConnection(),o()}),h.addEventListener("error",d=>{this.closeConnection(),s(d)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,o)=>{if(!this.db)return o(createBrowserAuthError(databaseNotOpen));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();c.addEventListener("success",h=>{const d=h;this.closeConnection(),e(d.target.result)}),c.addEventListener("error",h=>{this.closeConnection(),o(h)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((o,s)=>{if(!this.db)return s(createBrowserAuthError(databaseNotOpen));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);h.addEventListener("success",d=>{const g=d;this.closeConnection(),o(g.target.result===1)}),h.addEventListener("error",d=>{this.closeConnection(),s(d)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,o)=>{const s=window.indexedDB.deleteDatabase(DB_NAME);s.addEventListener("success",()=>e(!0)),s.addEventListener("blocked",()=>e(!0)),s.addEventListener("error",()=>o(!1))})}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class MemoryStorage{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,o){this.cache.set(e,o)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((o,s)=>{e.push(s)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class AsyncMemoryStorage{constructor(e,o){this.inMemoryCache=new MemoryStorage,this.indexedDBCache=new DatabaseStorage,this.logger=e,this.storeName=o}handleDatabaseAccessError(e){if(e instanceof BrowserAuthError&&e.errorCode===databaseUnavailable)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const o=this.inMemoryCache.getItem(e);if(!o)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(s){this.handleDatabaseAccessError(s)}return o}async setItem(e,o){this.inMemoryCache.setItem(e,o);try{await this.indexedDBCache.setItem(e,o)}catch(s){this.handleDatabaseAccessError(s)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(o){this.handleDatabaseAccessError(o)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(o){this.handleDatabaseAccessError(o)}return e}async containsKey(e){const o=this.inMemoryCache.containsKey(e);if(!o)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(s){this.handleDatabaseAccessError(s)}return o}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const CryptoKeyStoreNames={asymmetricKeys:"asymmetricKeys",symmetricKeys:"symmetricKeys"};class CryptoKeyStore{constructor(e){this.logger=e,this.asymmetricKeys=new AsyncMemoryStorage(this.logger,CryptoKeyStoreNames.asymmetricKeys),this.symmetricKeys=new AsyncMemoryStorage(this.logger,CryptoKeyStoreNames.symmetricKeys)}async clear(){this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory();try{return await this.asymmetricKeys.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class CryptoOps{constructor(e,o){this.logger=e,validateCryptoAvailable(e),this.cache=new CryptoKeyStore(this.logger),this.performanceClient=o}createNewGuid(){return createNewGuid()}base64Encode(e){return base64Encode(e)}base64Decode(e){return base64Decode(e)}async getPublicKeyThumbprint(e){var b;const o=(b=this.performanceClient)==null?void 0:b.startMeasurement(PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,e.correlationId),s=await generateKeyPair(CryptoOps.EXTRACTABLE,CryptoOps.POP_KEY_USAGES),a=await exportJwk(s.publicKey),c={e:a.e,kty:a.kty,n:a.n},h=getSortedObjectString(c),d=await this.hashString(h),g=await exportJwk(s.privateKey),_=await importJwk(g,!1,["sign"]);return await this.cache.asymmetricKeys.setItem(d,{privateKey:_,publicKey:s.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),o&&o.end({success:!0}),d}async removeTokenBindingKey(e){return await this.cache.asymmetricKeys.removeItem(e),!await this.cache.asymmetricKeys.containsKey(e)}async clearKeystore(){return this.cache.clear()}async signJwt(e,o,s,a){var it;const c=(it=this.performanceClient)==null?void 0:it.startMeasurement(PerformanceEvents.CryptoOptsSignJwt,a),h=await this.cache.asymmetricKeys.getItem(o);if(!h)throw createBrowserAuthError(cryptoKeyNotFound);const d=await exportJwk(h.publicKey),g=getSortedObjectString(d),_=urlEncode(JSON.stringify({kid:o})),b=JoseHeader.getShrHeaderString({...s==null?void 0:s.header,alg:d.alg,kid:_}),j=urlEncode(b);e.cnf={jwk:JSON.parse(g)};const _e=urlEncode(JSON.stringify(e)),$=`${j}.${_e}`,rt=new TextEncoder().encode($),st=await sign(h.privateKey,rt),tt=urlEncodeArr(new Uint8Array(st)),nt=`${$}.${tt}`;return c&&c.end({success:!0}),nt}async hashString(e){const o=await sha256Digest(e),s=new Uint8Array(o);return urlEncodeArr(s)}}CryptoOps.POP_KEY_USAGES=["sign","verify"];CryptoOps.EXTRACTABLE=!0;function getSortedObjectString(i){return JSON.stringify(i,Object.keys(i).sort())}/*! @azure/msal-browser v3.10.0 2024-02-17 */const storageNotSupported="storage_not_supported",stubbedPublicClientApplicationCalled="stubbed_public_client_application_called",inMemRedirectUnavailable="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.10.0 2024-02-17 */const BrowserConfigurationAuthErrorMessages={[storageNotSupported]:"Given storage configuration option was not supported.",[stubbedPublicClientApplicationCalled]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[inMemRedirectUnavailable]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class BrowserConfigurationAuthError extends AuthError{constructor(e,o){super(e,o),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,BrowserConfigurationAuthError.prototype)}}function createBrowserConfigurationAuthError(i){return new BrowserConfigurationAuthError(i,BrowserConfigurationAuthErrorMessages[i])}/*! @azure/msal-browser v3.10.0 2024-02-17 */class BrowserStorage{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==BrowserCacheLocation.LocalStorage&&e!==BrowserCacheLocation.SessionStorage||!window[e])throw createBrowserConfigurationAuthError(storageNotSupported)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,o){this.windowStorage.setItem(e,o)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */function extractBrowserRequestState(i,e){if(!e)return null;try{return ProtocolUtils.parseRequestState(i,e).libraryState.meta}catch{throw createClientAuthError(invalidState)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class BrowserCacheManager extends CacheManager{constructor(e,o,s,a,c){super(e,s,a,c),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=o,this.logger=a,this.internalStorage=new MemoryStorage,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),o.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(e){switch(e){case BrowserCacheLocation.LocalStorage:case BrowserCacheLocation.SessionStorage:try{return new BrowserStorage(e)}catch(o){this.logger.verbose(o);break}}return this.cacheConfig.cacheLocation=BrowserCacheLocation.MemoryStorage,new MemoryStorage}setupTemporaryCacheStorage(e,o){switch(o){case BrowserCacheLocation.LocalStorage:case BrowserCacheLocation.SessionStorage:try{return new BrowserStorage(e||BrowserCacheLocation.SessionStorage)}catch(s){return this.logger.verbose(s),this.internalStorage}case BrowserCacheLocation.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.ID_TOKEN}`,o=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.CLIENT_INFO}`,s=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.ERROR}`,a=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.ERROR_DESC}`,c=this.browserStorage.getItem(e),h=this.browserStorage.getItem(o),d=this.browserStorage.getItem(s),g=this.browserStorage.getItem(a),_=[c,h,d,g];[PersistentCacheKeys.ID_TOKEN,PersistentCacheKeys.CLIENT_INFO,PersistentCacheKeys.ERROR,PersistentCacheKeys.ERROR_DESC].forEach((j,_e)=>this.migrateCacheEntry(j,_[_e]))}migrateCacheEntry(e,o){o&&this.setTemporaryCache(e,o,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS),o=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e&&o){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(a=>{if(this.isCredentialKey(a)){const c=this.getItem(a);if(c){const h=this.validateAndParseJson(c);if(h&&h.hasOwnProperty("credentialType"))switch(h.credentialType){case CredentialType.ID_TOKEN:if(isIdTokenEntity(h)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${a} found, saving key to token key map`);const d=h,g=this.updateCredentialCacheKey(a,d);this.addTokenKey(g,CredentialType.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${a}`);break;case CredentialType.ACCESS_TOKEN:case CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(isAccessTokenEntity(h)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${a} found, saving key to token key map`);const d=h,g=this.updateCredentialCacheKey(a,d);this.addTokenKey(g,CredentialType.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${a}`);break;case CredentialType.REFRESH_TOKEN:if(isRefreshTokenEntity(h)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${a} found, saving key to token key map`);const d=h,g=this.updateCredentialCacheKey(a,d);this.addTokenKey(g,CredentialType.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${a}`);break}}}if(this.isAccountKey(a)){const c=this.getItem(a);if(c){const h=this.validateAndParseJson(c);h&&AccountEntity.isAccountEntity(h)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${a} found, saving key to account key map`),this.addAccountKeyToMap(a))}}})}validateAndParseJson(e){try{const o=JSON.parse(e);return o&&typeof o=="object"?o:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,o){this.browserStorage.setItem(e,o)}getAccount(e,o){this.logger.trace("BrowserCacheManager.getAccount called");const s=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,s,o)}getCachedAccountEntity(e){const o=this.getItem(e);if(!o)return this.removeAccountKeyFromMap(e),null;const s=this.validateAndParseJson(o);return!s||!AccountEntity.isAccountEntity(s)?(this.removeAccountKeyFromMap(e),null):CacheManager.toObject(new AccountEntity,s)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const o=e.generateAccountKey();this.setItem(o,JSON.stringify(e)),this.addAccountKeyToMap(o)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const o=this.getAccountKeys();o.indexOf(e)===-1?(o.push(e),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(o)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const o=this.getAccountKeys(),s=o.indexOf(e);s>-1?(o.splice(s,1),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(o)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,CredentialType.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e){const o=this.validateAndParseJson(e);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,o){this.logger.trace("BrowserCacheManager addTokenKey called");const s=this.getTokenKeys();switch(o){case CredentialType.ID_TOKEN:s.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(e));break;case CredentialType.ACCESS_TOKEN:s.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),s.accessToken.push(e));break;case CredentialType.REFRESH_TOKEN:s.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${o}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(s))}removeTokenKey(e,o){this.logger.trace("BrowserCacheManager removeTokenKey called");const s=this.getTokenKeys();switch(o){case CredentialType.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const a=s.idToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),s.idToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const c=s.accessToken.indexOf(e);c>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),s.accessToken.splice(c,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const h=s.refreshToken.indexOf(e);h>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),s.refreshToken.splice(h,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${o}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(s))}getIdTokenCredential(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null;const s=this.validateAndParseJson(o);return!s||!isIdTokenEntity(s)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),s)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const o=generateCredentialKey(e);this.setItem(o,JSON.stringify(e)),this.addTokenKey(o,CredentialType.ID_TOKEN)}getAccessTokenCredential(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null;const s=this.validateAndParseJson(o);return!s||!isAccessTokenEntity(s)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),s)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const o=generateCredentialKey(e);this.setItem(o,JSON.stringify(e)),this.addTokenKey(o,CredentialType.ACCESS_TOKEN)}getRefreshTokenCredential(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null;const s=this.validateAndParseJson(o);return!s||!isRefreshTokenEntity(s)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),s)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const o=generateCredentialKey(e);this.setItem(o,JSON.stringify(e)),this.addTokenKey(o,CredentialType.REFRESH_TOKEN)}getAppMetadata(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const s=this.validateAndParseJson(o);return!s||!isAppMetadataEntity(e,s)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),s)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const o=generateAppMetadataKey(e);this.setItem(o,JSON.stringify(e))}getServerTelemetry(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const s=this.validateAndParseJson(o);return!s||!isServerTelemetryEntity(e,s)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),s)}setServerTelemetry(e,o){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(o))}getAuthorityMetadata(e){const o=this.internalStorage.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const s=this.validateAndParseJson(o);return s&&isAuthorityMetadataEntity(e,s)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),s):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(o=>this.isAuthorityMetadata(o))}setWrapperMetadata(e,o){this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_SKU,e),this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_VER,o)}getWrapperMetadata(){const e=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_SKU)||Constants.EMPTY_STRING,o=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_VER)||Constants.EMPTY_STRING;return[e,o]}setAuthorityMetadata(e,o){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(o))}getActiveAccount(){const e=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),o=this.getItem(e);if(!o){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const a=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT),c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const h=this.getAccountInfoFilteredBy({localAccountId:c});return h?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(h),h):null}const s=this.validateAndParseJson(o);return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId,tenantId:s.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const o=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),s=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(o,JSON.stringify(a)),this.browserStorage.setItem(s,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(o),this.browserStorage.removeItem(s)}getThrottlingCache(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const s=this.validateAndParseJson(o);return!s||!isThrottlingEntity(e,s)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),s)}setThrottlingCache(e,o){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(o))}getTemporaryCache(e,o){const s=o?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const c=this.getItemCookie(s);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),c}const a=this.temporaryCacheStorage.getItem(s);if(!a){if(this.cacheConfig.cacheLocation===BrowserCacheLocation.LocalStorage){const c=this.browserStorage.getItem(s);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),c}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(e,o,s){const a=s?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(a,o),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(a,o))}removeItem(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}containsKey(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.getKeys().forEach(e=>{(this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e))&&(e.indexOf(Constants.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e){e.addQueueMeasurement(PerformanceEvents.ClearTokensAndKeysWithClaims);const o=this.getTokenKeys(),s=[];o.accessToken.forEach(a=>{const c=this.getAccessTokenCredential(a);c!=null&&c.requestedClaimsHash&&a.includes(c.requestedClaimsHash.toLowerCase())&&s.push(this.removeAccessToken(a))}),await Promise.all(s),s.length>0&&this.logger.warning(`${s.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,o,s){let a=`${encodeURIComponent(e)}=${encodeURIComponent(o)};path=/;SameSite=Lax;`;if(s){const c=this.getCookieExpirationTime(s);a+=`expires=${c};`}this.cacheConfig.secureCookies&&(a+="Secure;"),document.cookie=a}getItemCookie(e){const o=`${encodeURIComponent(e)}=`,s=document.cookie.split(";");for(let a=0;a<s.length;a++){let c=s[a];for(;c.charAt(0)===" ";)c=c.substring(1);if(c.indexOf(o)===0)return decodeURIComponent(c.substring(o.length,c.length))}return Constants.EMPTY_STRING}clearMsalCookies(){const e=`${Constants.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(s=>{for(;s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(e)===0){const a=s.split("=")[0];this.clearItemCookie(a)}})}clearItemCookie(e){this.setItemCookie(e,Constants.EMPTY_STRING,-1)}getCookieExpirationTime(e){const o=new Date;return new Date(o.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):StringUtils.startsWith(e,Constants.CACHE_PREFIX)||StringUtils.startsWith(e,PersistentCacheKeys.ADAL_ID_TOKEN)?e:`${Constants.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:o}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.AUTHORITY}.${o}`)}generateNonceKey(e){const{libraryState:{id:o}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.NONCE_IDTOKEN}.${o}`)}generateStateKey(e){const{libraryState:{id:o}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.REQUEST_STATE}.${o}`)}getCachedAuthority(e){const o=this.generateStateKey(e),s=this.getTemporaryCache(o);if(!s)return null;const a=this.generateAuthorityKey(s);return this.getTemporaryCache(a)}updateCacheEntries(e,o,s,a,c){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const h=this.generateStateKey(e);this.setTemporaryCache(h,e,!1);const d=this.generateNonceKey(e);this.setTemporaryCache(d,o,!1);const g=this.generateAuthorityKey(e);if(this.setTemporaryCache(g,s,!1),c){const _={credential:c.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(_),!0)}else if(a){const _={credential:a,type:CcsCredentialType.UPN};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(_),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.getKeys().forEach(o=>{o.indexOf(e)!==-1&&this.removeItem(o)}),this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.ORIGIN_URI)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.URL_HASH)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.CORRELATION_ID)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const o=this.generateStateKey(e),s=this.temporaryCacheStorage.getItem(o);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${s}`),this.resetRequestCache(s||Constants.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(o=>{if(o.indexOf(TemporaryCacheKeys.REQUEST_STATE)===-1)return;const s=this.temporaryCacheStorage.getItem(o);if(!s)return;const a=extractBrowserRequestState(this.cryptoImpl,s);a&&a.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${s}`),this.resetRequestCache(s))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const o=base64Encode(JSON.stringify(e));this.setTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,o,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const o=this.getTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,!0);if(!o)throw createBrowserAuthError(noTokenRequestCacheError);let s;try{s=JSON.parse(base64Decode(o))}catch(a){throw this.logger.errorPii(`Attempted to parse: ${o}`),this.logger.error(`Parsing cached token request threw with error: ${a}`),createBrowserAuthError(unableToParseTokenRequestCacheError)}if(this.removeItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),!s.authority){const a=this.generateAuthorityKey(e),c=this.getTemporaryCache(a);if(!c)throw createBrowserAuthError(noCachedAuthorityError);s.authority=c}return s}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const o=this.validateAndParseJson(e);return o||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const o=this.getInteractionInProgress();return e?o===this.clientId:!!o}getInteractionInProgress(){const e=`${Constants.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const o=`${Constants.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw createBrowserAuthError(interactionInProgress);this.setTemporaryCache(o,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeItem(o)}getLegacyLoginHint(){const e=this.getTemporaryCache(PersistentCacheKeys.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(PersistentCacheKeys.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const o=this.getTemporaryCache(PersistentCacheKeys.ID_TOKEN,!0);o&&(this.removeItem(this.generateCacheKey(PersistentCacheKeys.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const s=o||e;if(s){const a=extractTokenClaims(s,base64Decode);if(a.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),a.preferred_username;if(a.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),a.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,o){const s=generateCredentialKey(o);if(e!==s){const a=this.getItem(e);if(a)return this.removeItem(e),this.setItem(s,a),this.logger.verbose(`Updated an outdated ${o.credentialType} cache key`),s;this.logger.error(`Attempted to update an outdated ${o.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}getRedirectRequestContext(){return this.getTemporaryCache(TemporaryCacheKeys.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(e){this.setTemporaryCache(TemporaryCacheKeys.REDIRECT_CONTEXT,e,!0)}async hydrateCache(e,o){var d,g,_,b,j;const s=createIdTokenEntity((d=e.account)==null?void 0:d.homeAccountId,(g=e.account)==null?void 0:g.environment,e.idToken,this.clientId,e.tenantId);let a;o.claims&&(a=await this.cryptoImpl.hashString(o.claims));const c=createAccessTokenEntity((_=e.account)==null?void 0:_.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),((b=e.expiresOn)==null?void 0:b.getTime())||0,((j=e.extExpiresOn)==null?void 0:j.getTime())||0,base64Decode,void 0,e.tokenType,void 0,o.sshKid,o.claims,a),h=new CacheRecord(void 0,s,c);return this.saveCacheRecord(h)}}const DEFAULT_BROWSER_CACHE_MANAGER=(i,e)=>{const o={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new BrowserCacheManager(i,o,DEFAULT_CRYPTO_IMPLEMENTATION,e)};/*! @azure/msal-browser v3.10.0 2024-02-17 */const EventType={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.10.0 2024-02-17 */class EventHandler{constructor(e,o){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=o,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(e){if(typeof window<"u"){const o=createNewGuid();return this.eventCallbacks.set(o,e),this.logger.verbose(`Event callback registered with id: ${o}`),o}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(e,o,s,a){if(typeof window<"u"){const c={eventType:e,interactionType:o||null,payload:s||null,error:a||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${e}`),this.eventCallbacks.forEach((h,d)=>{this.logger.verbose(`Emitting event to callback ${d}: ${e}`),h.apply(null,[c])})}}handleAccountCacheChange(e){var o;try{(o=e.key)!=null&&o.includes(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS)&&this.emitEvent(EventType.ACTIVE_ACCOUNT_CHANGED);const s=e.newValue||e.oldValue;if(!s)return;const a=JSON.parse(s);if(typeof a!="object"||!AccountEntity.isAccountEntity(a))return;const h=CacheManager.toObject(new AccountEntity,a).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(EventType.ACCOUNT_ADDED,void 0,h)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(EventType.ACCOUNT_REMOVED,void 0,h))}catch{return}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class BaseInteractionClient{constructor(e,o,s,a,c,h,d,g,_){this.config=e,this.browserStorage=o,this.browserCrypto=s,this.networkClient=this.config.system.networkClient,this.eventHandler=c,this.navigationClient=h,this.nativeMessageHandler=g,this.correlationId=_||createNewGuid(),this.logger=a.clone(BrowserConstants.MSAL_SKU,version$1,this.correlationId),this.performanceClient=d}async clearCacheOnLogout(e){if(e){AccountEntity.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(AccountEntity.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}async initializeBaseRequest(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.InitializeBaseRequest,this.correlationId);const o=e.authority||this.config.auth.authority,s=[...e&&e.scopes||[]],a={...e,correlationId:this.correlationId,authority:o,scopes:s};if(!a.authenticationScheme)a.authenticationScheme=AuthenticationScheme.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(a.authenticationScheme===AuthenticationScheme.SSH){if(!e.sshJwk)throw createClientConfigurationError(missingSshJwk);if(!e.sshKid)throw createClientConfigurationError(missingSshKid)}this.logger.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}return this.config.cache.claimsBasedCachingEnabled&&e.claims&&!StringUtils.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await this.browserCrypto.hashString(e.claims)),a}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const o=e||this.config.auth.redirectUri||getCurrentUri();return UrlString.getAbsoluteUrl(o,getCurrentUri())}initializeServerTelemetryManager(e,o){this.logger.verbose("initializeServerTelemetryManager called");const s={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:o||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ServerTelemetryManager(s,this.browserStorage)}async getDiscoveredAuthority(e,o,s){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const a={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=e||this.config.auth.authority,h=Authority.generateAuthority(c,o||this.config.auth.azureCloudOptions),d=await invokeAsync(createDiscoveredInstance,PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(h,this.config.system.networkClient,this.browserStorage,a,this.logger,this.correlationId,this.performanceClient);if(s&&!d.isAlias(s.environment))throw createClientConfigurationError(authorityMismatch);return d}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const RANDOM_BYTE_ARR_LENGTH=32;async function generatePkceCodes(i,e,o){i.addQueueMeasurement(PerformanceEvents.GeneratePkceCodes,o);const s=invoke(generateCodeVerifier,PerformanceEvents.GenerateCodeVerifier,e,i,o)(i,e,o),a=await invokeAsync(generateCodeChallengeFromVerifier,PerformanceEvents.GenerateCodeChallengeFromVerifier,e,i,o)(s,i,e,o);return{verifier:s,challenge:a}}function generateCodeVerifier(i,e,o){try{const s=new Uint8Array(RANDOM_BYTE_ARR_LENGTH);return invoke(getRandomValues,PerformanceEvents.GetRandomValues,e,i,o)(s),urlEncodeArr(s)}catch{throw createBrowserAuthError(pkceNotCreated)}}async function generateCodeChallengeFromVerifier(i,e,o,s){e.addQueueMeasurement(PerformanceEvents.GenerateCodeChallengeFromVerifier,s);try{const a=await invokeAsync(sha256Digest,PerformanceEvents.Sha256Digest,o,e,s)(i,e,s);return urlEncodeArr(new Uint8Array(a))}catch{throw createBrowserAuthError(pkceNotCreated)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class StandardInteractionClient extends BaseInteractionClient{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const o=await invokeAsync(generatePkceCodes,PerformanceEvents.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),s={...e,redirectUri:e.redirectUri,code:Constants.EMPTY_STRING,codeVerifier:o.verifier};return e.codeChallenge=o.challenge,e.codeChallengeMethod=Constants.S256_CODE_CHALLENGE_METHOD,s}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const o={correlationId:this.correlationId||createNewGuid(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const s=this.getLogoutHintFromIdTokenClaims(e.account);s&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),o.logoutHint=s)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",o.correlationId),o.postLogoutRedirectUri=UrlString.getAbsoluteUrl(e.postLogoutRedirectUri,getCurrentUri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",o.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",o.correlationId),o.postLogoutRedirectUri=UrlString.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",o.correlationId),o.postLogoutRedirectUri=UrlString.getAbsoluteUrl(getCurrentUri(),getCurrentUri())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",o.correlationId),o}getLogoutHintFromIdTokenClaims(e){const o=e.idTokenClaims;if(o){if(o.login_hint)return o.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e,o,s,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,o,s,a);return new AuthorizationCodeClient(c,this.performanceClient)}async getClientConfiguration(e,o,s,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.correlationId);const c=await invokeAsync(this.getDiscoveredAuthority.bind(this),PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(o,s,a),h=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:c,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:h.loggerCallback,piiLoggingEnabled:h.piiLoggingEnabled,logLevel:h.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:BrowserConstants.MSAL_SKU,version:version$1,cpu:Constants.EMPTY_STRING,os:Constants.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,o){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const s=this.getRedirectUri(e.redirectUri),a={interactionType:o},c=ProtocolUtils.setRequestState(this.browserCrypto,e&&e.state||Constants.EMPTY_STRING,a),d={...await invokeAsync(this.initializeBaseRequest.bind(this),PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e),redirectUri:s,state:c,nonce:e.nonce||createNewGuid(),responseMode:this.config.auth.OIDCOptions.serverResponseType},g=e.account||this.browserStorage.getActiveAccount();if(g&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${g.homeAccountId}`,this.correlationId),d.account=g),!d.loginHint&&!g){const _=this.browserStorage.getLegacyLoginHint();_&&(d.loginHint=_)}return d}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const contentError="ContentError",userSwitch="user_switch";/*! @azure/msal-browser v3.10.0 2024-02-17 */const USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",USER_CANCEL="USER_CANCEL",NO_NETWORK="NO_NETWORK",PERSISTENT_ERROR="PERSISTENT_ERROR",DISABLED="DISABLED",ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.10.0 2024-02-17 */const INVALID_METHOD_ERROR=-2147186943,NativeAuthErrorMessages={[userSwitch]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class NativeAuthError extends AuthError{constructor(e,o,s){super(e,o),Object.setPrototypeOf(this,NativeAuthError.prototype),this.name="NativeAuthError",this.ext=s}}function isFatalNativeAuthError(i){if(i.ext&&i.ext.status&&(i.ext.status===PERSISTENT_ERROR||i.ext.status===DISABLED)||i.ext&&i.ext.error&&i.ext.error===INVALID_METHOD_ERROR)return!0;switch(i.errorCode){case contentError:return!0;default:return!1}}function createNativeAuthError(i,e,o){if(o&&o.status)switch(o.status){case ACCOUNT_UNAVAILABLE:return createInteractionRequiredAuthError(nativeAccountUnavailable);case USER_INTERACTION_REQUIRED:return new InteractionRequiredAuthError(i,e);case USER_CANCEL:return createBrowserAuthError(userCancelled);case NO_NETWORK:return createBrowserAuthError(noNetworkConnectivity)}return new NativeAuthError(i,NativeAuthErrorMessages[i]||e,o)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentCacheClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentCacheClientAcquireToken,e.correlationId);const o=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),s=await this.createSilentFlowClient(o,e.authority,e.azureCloudOptions,e.account);this.logger.verbose("Silent auth client created");try{const c=(await invokeAsync(s.acquireCachedToken.bind(s),PerformanceEvents.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),c}catch(a){throw a instanceof BrowserAuthError&&a.errorCode===cryptoKeyNotFound&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),a}}logout(e){this.logger.verbose("logoutRedirect called");const o=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(o==null?void 0:o.account)}async createSilentFlowClient(e,o,s,a){const c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,o,s,a);return new SilentFlowClient(c,this.performanceClient)}async initializeSilentRequest(e,o){this.performanceClient.addQueueMeasurement(PerformanceEvents.InitializeSilentRequest,this.correlationId);const s=await invokeAsync(this.initializeBaseRequest.bind(this),PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e);return{...e,...s,account:o,forceRefresh:e.forceRefresh||!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const BrokerServerParamKeys={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class NativeInteractionClient extends BaseInteractionClient{constructor(e,o,s,a,c,h,d,g,_,b,j,_e){super(e,o,s,a,c,h,g,_,_e),this.apiId=d,this.accountId=b,this.nativeMessageHandler=_,this.nativeStorageManager=j,this.silentCacheClient=new SilentCacheClient(e,this.nativeStorageManager,s,a,c,h,g,_,_e)}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const o=this.performanceClient.startMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),s=nowSeconds(),a=await this.initializeNativeRequest(e);try{const g=await this.acquireTokensFromCache(this.accountId,a);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),g}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const c={method:NativeExtensionMethod.GetToken,request:a},h=await this.nativeMessageHandler.sendMessage(c),d=this.validateNativeResponse(h);return this.handleNativeResponse(d,a,s).then(g=>(o.end({success:!0,isNativeBroker:!0,requestId:g.requestId}),g)).catch(g=>{throw o.end({success:!1,errorCode:g.errorCode,subErrorCode:g.subError,isNativeBroker:!0}),g})}createSilentCacheRequest(e,o){return{authority:e.authority,correlationId:this.correlationId,scopes:ScopeSet.fromString(e.scope).asArray(),account:o,forceRefresh:!1}}async acquireTokensFromCache(e,o){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),createClientAuthError(noAccountFound);const s=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!s)throw createClientAuthError(noAccountFound);try{const a=this.createSilentCacheRequest(o,s),c=await this.silentCacheClient.acquireToken(a),h={...s,idTokenClaims:c==null?void 0:c.idTokenClaims,idToken:c==null?void 0:c.idToken};return{...c,account:h}}catch(a){throw a}}async acquireTokenRedirect(e){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const o=await this.initializeNativeRequest(e),s={method:NativeExtensionMethod.GetToken,request:o};try{const h=await this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(h)}catch(h){if(h instanceof NativeAuthError&&isFatalNativeAuthError(h))throw h}this.browserStorage.setTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,JSON.stringify(o),!0);const a={apiId:ApiId.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);await this.navigationClient.navigateExternal(c,a)}async handleRedirectPromise(e,o){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const s=this.browserStorage.getCachedNativeRequest();if(!s)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&o&&(e==null||e.addFields({errorCode:"no_cached_request"},o)),null;const{prompt:a,...c}=s;a&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST));const h={method:NativeExtensionMethod.GetToken,request:c},d=nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const g=await this.nativeMessageHandler.sendMessage(h);this.validateNativeResponse(g);const _=this.handleNativeResponse(g,c,d);return this.browserStorage.setInteractionInProgress(!1),await _}catch(g){throw this.browserStorage.setInteractionInProgress(!1),g}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,o,s){var b;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=extractTokenClaims(e.id_token,base64Decode),c=this.createHomeAccountIdentifier(e,a),h=(b=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:o.accountId}))==null?void 0:b.homeAccountId;if(c!==h&&e.account.id!==o.accountId)throw createNativeAuthError(userSwitch);const d=await this.getDiscoveredAuthority(o.authority),g=buildAccountToCache(this.browserStorage,d,c,a,base64Decode,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger),_=await this.generateAuthenticationResult(e,o,a,g,d.canonicalAuthority,s);return this.cacheAccount(g),this.cacheNativeTokens(e,o,c,a,_.accessToken,_.tenantId,s),_}createHomeAccountIdentifier(e,o){return AccountEntity.generateHomeAccountId(e.client_info||Constants.EMPTY_STRING,AuthorityType.Default,this.logger,this.browserCrypto,o)}generateScopes(e,o){return e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(o.scope)}async generatePopAccessToken(e,o){if(o.tokenType===AuthenticationScheme.POP){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const s=new PopTokenGenerator(this.browserCrypto),a={resourceRequestMethod:o.resourceRequestMethod,resourceRequestUri:o.resourceRequestUri,shrClaims:o.shrClaims,shrNonce:o.shrNonce};if(!o.keyId)throw createClientAuthError(keyIdMissing);return s.signPopToken(e.access_token,o.keyId,a)}else return e.access_token}async generateAuthenticationResult(e,o,s,a,c,h){const d=this.addTelemetryFromNativeResponse(e),g=e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(o.scope),_=e.account.properties||{},b=_.UID||s.oid||s.sub||Constants.EMPTY_STRING,j=_.TenantId||s.tid||Constants.EMPTY_STRING,_e=updateAccountTenantProfileData(a.getAccountInfo(),void 0,s,e.id_token);_e.nativeAccountId!==e.account.id&&(_e.nativeAccountId=e.account.id);const $=await this.generatePopAccessToken(e,o),et=o.tokenType===AuthenticationScheme.POP?AuthenticationScheme.POP:AuthenticationScheme.BEARER;return{authority:c,uniqueId:b,tenantId:j,scopes:g.asArray(),account:_e,idToken:e.id_token,idTokenClaims:s,accessToken:$,fromCache:d?this.isResponseFromCache(d):!1,expiresOn:new Date(Number(h+e.expires_in)*1e3),tokenType:et,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(o=>{this.logger.error(`Error occurred while removing account context from browser storage. ${o}`)})}cacheNativeTokens(e,o,s,a,c,h,d){const g=createIdTokenEntity(s,o.authority,e.id_token||"",o.clientId,a.tid||""),_=o.tokenType===AuthenticationScheme.POP?Constants.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,b=d+_,j=this.generateScopes(e,o),_e=createAccessTokenEntity(s,o.authority,c,o.clientId,a.tid||h,j.printScopes(),b,0,base64Decode),$=new CacheRecord(void 0,g,_e);this.nativeStorageManager.saveCacheRecord($,o.storeInCache)}addTelemetryFromNativeResponse(e){const o=this.getMATSFromResponse(e);return o?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:o.broker_version,matsAccountJoinOnStart:o.account_join_on_start,matsAccountJoinOnEnd:o.account_join_on_end,matsDeviceJoin:o.device_join,matsPromptBehavior:o.prompt_behavior,matsApiErrorCode:o.api_error_code,matsUiVisible:o.ui_visible,matsSilentCode:o.silent_code,matsSilentBiSubCode:o.silent_bi_sub_code,matsSilentMessage:o.silent_message,matsSilentStatus:o.silent_status,matsHttpStatus:o.http_status,matsHttpEventCount:o.http_event_count},this.correlationId),o):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw createAuthError(unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const o=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority(o,e.azureCloudOptions,e.account);const s=new UrlString(o);s.validateAsUri();const{scopes:a,...c}=e,h=new ScopeSet(a||[]);h.appendScopes(OIDC_DEFAULT_SCOPES);const d=()=>{switch(this.apiId){case ApiId.ssoSilent:case ApiId.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),PromptValue.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),createBrowserAuthError(nativePromptNotSupported)}},g={...c,accountId:this.accountId,clientId:this.config.auth.clientId,authority:s.urlString,scope:h.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:d(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1};if(this.handleExtraBrokerParams(g),g.extraParameters=g.extraParameters||{},g.extraParameters.telemetry=NativeConstants.MATS_TELEMETRY,e.authenticationScheme===AuthenticationScheme.POP){const _={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},b=new PopTokenGenerator(this.browserCrypto),j=await invokeAsync(b.generateCnf.bind(b),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(_,this.logger);g.reqCnf=j.reqCnfHash,g.keyId=j.kid}return g}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(BrokerServerParamKeys.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(BrokerServerParamKeys.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(CLIENT_ID)){const o=e.extraParameters[CLIENT_ID],s=e.redirectUri,a=e.extraParameters[BrokerServerParamKeys.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:o,child_redirect_uri:s},e.redirectUri=a}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class NativeMessageHandler{constructor(e,o,s,a){this.logger=e,this.handshakeTimeoutMs=o,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=s,this.handshakeEvent=s.startMeasurement(PerformanceEvents.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const o={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(o)}`),this.messageChannel.port1.postMessage(o),new Promise((s,a)=>{this.resolvers.set(o.responseId,{resolve:s,reject:a})})}static async createProvider(e,o,s){e.trace("NativeMessageHandler - createProvider called.");try{const a=new NativeMessageHandler(e,o,s,NativeConstants.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const c=new NativeMessageHandler(e,o,s);return await c.sendHandshakeRequest(),c}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:{method:NativeExtensionMethod.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=o=>{this.onChannelMessage(o)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((o,s)=>{this.handshakeResolvers.set(e.responseId,{resolve:o,reject:s}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),s(createBrowserAuthError(nativeHandshakeTimeout)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const o=e.data;if(!(!o.channel||o.channel!==NativeConstants.CHANNEL_ID)&&!(o.extensionId&&o.extensionId!==this.extensionId)&&o.body.method===NativeExtensionMethod.HandshakeRequest){const s=this.handshakeResolvers.get(o.responseId);if(!s){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${o.responseId}`);return}this.logger.verbose(o.extensionId?`Extension with id: ${o.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),s.reject(createBrowserAuthError(nativeExtensionNotInstalled))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const o=e.data,s=this.resolvers.get(o.responseId),a=this.handshakeResolvers.get(o.responseId);try{const c=o.body.method;if(c===NativeExtensionMethod.Response){if(!s)return;const h=o.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(h)}`),h.status!=="Success")s.reject(createNativeAuthError(h.code,h.description,h.ext));else if(h.result)h.result.code&&h.result.description?s.reject(createNativeAuthError(h.result.code,h.result.description,h.result.ext)):s.resolve(h.result);else throw createAuthError(unexpectedError,"Event does not contain result.");this.resolvers.delete(o.responseId)}else if(c===NativeExtensionMethod.HandshakeResponse){if(!a){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${o.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=o.extensionId,this.extensionVersion=o.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(o.responseId)}}catch(c){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${c}`),this.logger.errorPii(`Unable to parse ${e}`),s?s.reject(c):a&&a.reject(c)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,o,s,a){if(o.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return o.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!s)return o.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(a)switch(a){case AuthenticationScheme.BEARER:case AuthenticationScheme.POP:return o.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return o.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class InteractionHandler{constructor(e,o,s,a,c){this.authModule=e,this.browserStorage=o,this.authCodeRequest=s,this.logger=a,this.performanceClient=c}async handleCodeResponse(e,o){this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponse,o.correlationId);let s;try{s=this.authModule.handleFragmentResponse(e,o.state)}catch(a){throw a instanceof ServerError&&a.subError===userCancelled?createBrowserAuthError(userCancelled):a}return invokeAsync(this.handleCodeResponseFromServer.bind(this),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,o.correlationId)(s,o)}async handleCodeResponseFromServer(e,o,s=!0){if(this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponseFromServer,o.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,o.correlationId)(e.cloud_instance_host_name,o.correlationId),s&&(e.nonce=o.nonce||void 0),e.state=o.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const c=this.createCcsCredentials(o);c&&(this.authCodeRequest.ccsCredential=c)}return await invokeAsync(this.authModule.acquireToken.bind(this.authModule),PerformanceEvents.AuthClientAcquireToken,this.logger,this.performanceClient,o.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:CcsCredentialType.UPN}:null}}/*! @azure/msal-browser v3.10.0 2024-02-17 */function deserializeResponse(i,e,o){const s=getDeserializedResponse(i);if(!s)throw stripLeadingHashOrQuery(i)?(o.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),o.errorPii(`The ${e} detected is: ${i}`),createBrowserAuthError(hashDoesNotContainKnownProperties)):(o.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),createBrowserAuthError(hashEmptyError));return s}function validateInteractionType(i,e,o){if(!i.state)throw createBrowserAuthError(noStateInHash);const s=extractBrowserRequestState(e,i.state);if(!s)throw createBrowserAuthError(unableToParseState);if(s.interactionType!==o)throw createBrowserAuthError(stateInteractionTypeMismatch)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class PopupClient extends StandardInteractionClient{constructor(e,o,s,a,c,h,d,g,_,b){super(e,o,s,a,c,h,d,_,b),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=g}acquireToken(e){try{const o=this.generatePopupName(e.scopes||OIDC_DEFAULT_SCOPES,e.authority||this.config.auth.authority),s=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,s);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const a=this.openSizedPopup("about:blank",o,s);return this.acquireTokenPopupAsync(e,o,s,a)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");const o=this.initializeLogoutRequest(e),s=this.generateLogoutPopupName(o),a=e&&e.authority,c=e&&e.mainWindowRedirectUri,h=(e==null?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(o,s,h,a,void 0,c);{this.logger.verbose("asyncPopup set to false, opening popup");const d=this.openSizedPopup("about:blank",s,h);return this.logoutPopupAsync(o,s,h,a,d,c)}}catch(o){return Promise.reject(o)}}async acquireTokenPopupAsync(e,o,s,a){this.logger.verbose("acquireTokenPopupAsync called");const c=this.initializeServerTelemetryManager(ApiId.acquireTokenPopup),h=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Popup);preconnect(h.authority);try{const d=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(h),g=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(c,h.authority,h.azureCloudOptions,h.account),_=NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let b;_&&(b=this.performanceClient.startMeasurement(PerformanceEvents.FetchAccountIdWithNativeBroker,e.correlationId));const j=await g.getAuthCodeUrl({...h,nativeBroker:_}),_e=new InteractionHandler(g,this.browserStorage,d,this.logger,this.performanceClient),$={popup:a,popupName:o,popupWindowAttributes:s},et=this.initiateAuthRequest(j,$);this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:et},null);const rt=await this.monitorPopupForHash(et),st=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(rt,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,d),st.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),b&&b.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const nt=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,st.accountId,this.nativeStorage,h.correlationId),{userRequestState:it}=ProtocolUtils.parseRequestState(this.browserCrypto,h.state);return await nt.acquireToken({...h,state:it,prompt:void 0})}return await _e.handleCodeResponse(st,h)}catch(d){throw a&&a.close(),d instanceof AuthError&&(d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d)),d}}async logoutPopupAsync(e,o,s,a,c,h){var g,_;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Popup,e);const d=this.initializeServerTelemetryManager(ApiId.logoutPopup);try{await this.clearCacheOnLogout(e.account);const b=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(d,a,void 0,e.account||void 0);try{b.authority.endSessionEndpoint}catch{if((g=e.account)!=null&&g.homeAccountId&&e.postLogoutRedirectUri&&b.authority.protocolMode===ProtocolMode.OIDC){if(this.browserStorage.removeAccount((_=e.account)==null?void 0:_.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e),h){const $={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},et=UrlString.getAbsoluteUrl(h,getCurrentUri());await this.navigationClient.navigateInternal(et,$)}c&&c.close();return}}const j=b.getLogoutUri(e);this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e);const _e=this.openPopup(j,{popupName:o,popupWindowAttributes:s,popup:c});if(this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:_e},null),await this.monitorPopupForHash(_e).catch(()=>{}),h){const $={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},et=UrlString.getAbsoluteUrl(h,getCurrentUri());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${et}`),await this.navigationClient.navigateInternal(et,$)}else this.logger.verbose("No main window navigation requested")}catch(b){throw c&&c.close(),b instanceof AuthError&&(b.setCorrelationId(this.correlationId),d.cacheFailedRequest(b)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Popup,null,b),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup),b}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup)}initiateAuthRequest(e,o){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,o);throw this.logger.error("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}monitorPopupForHash(e){return new Promise((o,s)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const a=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(a),s(createBrowserAuthError(userCancelled));return}let c="";try{c=e.location.href}catch{}if(!c||c==="about:blank")return;clearInterval(a);let h="";const d=this.config.auth.OIDCOptions.serverResponseType;e&&(d===ServerResponseType.QUERY?h=e.location.search:h=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),o(h)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e)})}openPopup(e,o){try{let s;if(o.popup?(s=o.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),s.location.assign(e)):typeof o.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),s=this.openSizedPopup(e,o.popupName,o.popupWindowAttributes)),!s)throw createBrowserAuthError(emptyWindowError);return s.focus&&s.focus(),this.currentWindow=s,window.addEventListener("beforeunload",this.unloadWindow),s}catch(s){throw this.logger.error("error opening popup "+s.message),this.browserStorage.setInteractionInProgress(!1),createBrowserAuthError(popupWindowError)}}openSizedPopup(e,o,s){var _e,$,et,rt;const a=window.screenLeft?window.screenLeft:window.screenX,c=window.screenTop?window.screenTop:window.screenY,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let g=(_e=s.popupSize)==null?void 0:_e.width,_=($=s.popupSize)==null?void 0:$.height,b=(et=s.popupPosition)==null?void 0:et.top,j=(rt=s.popupPosition)==null?void 0:rt.left;return(!g||g<0||g>h)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),g=BrowserConstants.POPUP_WIDTH),(!_||_<0||_>d)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),_=BrowserConstants.POPUP_HEIGHT),(!b||b<0||b>d)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),b=Math.max(0,d/2-BrowserConstants.POPUP_HEIGHT/2+c)),(!j||j<0||j>h)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),j=Math.max(0,h/2-BrowserConstants.POPUP_WIDTH/2+a)),window.open(e,o,`width=${g}, height=${_}, top=${b}, left=${j}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(InteractionType.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,o){return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${o}.${this.correlationId}`}generateLogoutPopupName(e){const o=e.account&&e.account.homeAccountId;return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${o}.${this.correlationId}`}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class RedirectHandler{constructor(e,o,s,a,c){this.authModule=e,this.browserStorage=o,this.authCodeRequest=s,this.logger=a,this.performanceClient=c}async initiateAuthRequest(e,o){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){o.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,o.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const s={apiId:ApiId.acquireTokenRedirect,timeout:o.redirectTimeout,noHistory:!1};if(typeof o.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await o.navigationClient.navigateExternal(e,s);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await o.navigationClient.navigateExternal(e,s);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}async handleCodeResponse(e,o){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const s=this.browserStorage.generateStateKey(o),a=this.browserStorage.getTemporaryCache(s);if(!a)throw createClientAuthError(stateNotFound,"Cached State");let c;try{c=this.authModule.handleFragmentResponse(e,a)}catch(_){throw _ instanceof ServerError&&_.subError===userCancelled?createBrowserAuthError(userCancelled):_}const h=this.browserStorage.generateNonceKey(a),d=this.browserStorage.getTemporaryCache(h);if(this.authCodeRequest.code=c.code,c.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(c.cloud_instance_host_name,this.authCodeRequest.correlationId),c.nonce=d||void 0,c.state=a,c.client_info)this.authCodeRequest.clientInfo=c.client_info;else{const _=this.checkCcsCredentials();_&&(this.authCodeRequest.ccsCredential=_)}const g=await this.authModule.acquireToken(this.authCodeRequest,c);return this.browserStorage.cleanRequestByState(o),g}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class RedirectClient extends StandardInteractionClient{constructor(e,o,s,a,c,h,d,g,_,b){super(e,o,s,a,c,h,d,_,b),this.nativeStorage=g}async acquireToken(e){const o=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Redirect);this.browserStorage.updateCacheEntries(o.state,o.nonce,o.authority,o.loginHint||"",o.account||null);const s=this.initializeServerTelemetryManager(ApiId.acquireTokenRedirect),a=c=>{c.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(o.state),this.eventHandler.emitEvent(EventType.RESTORE_FROM_BFCACHE,InteractionType.Redirect))};try{const c=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),h=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(s,o.authority,o.azureCloudOptions,o.account),d=new RedirectHandler(h,this.browserStorage,c,this.logger,this.performanceClient),g=await h.getAuthCodeUrl({...o,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),_=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${_}`),window.addEventListener("pageshow",a),await d.initiateAuthRequest(g,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:_,onRedirectNavigate:e.onRedirectNavigate})}catch(c){throw c instanceof AuthError&&(c.setCorrelationId(this.correlationId),s.cacheFailedRequest(c)),window.removeEventListener("pageshow",a),this.browserStorage.cleanRequestByState(o.state),c}}async handleRedirectPromise(e,o,s){const a=this.initializeServerTelemetryManager(ApiId.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[c,h]=this.getRedirectResponse(e||"");if(!c)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),o&&s&&(o==null||o.addFields({errorCode:"no_server_response"},s)),null;const d=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,!0)||Constants.EMPTY_STRING,g=UrlString.removeHashFromUrl(d),_=UrlString.removeHashFromUrl(window.location.href);if(g===_&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),d.indexOf("#")>-1&&replaceHash(d),await this.handleResponse(c,a);if(this.config.auth.navigateToLoginRequestUrl){if(!isInIframe()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(TemporaryCacheKeys.URL_HASH,h,!0);const b={apiId:ApiId.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let j=!0;if(!d||d==="null"){const _e=getHomepage();this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,_e,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),j=await this.navigationClient.navigateInternal(_e,b)}else this.logger.verbose(`Navigating to loginRequestUrl: ${d}`),j=await this.navigationClient.navigateInternal(d,b);if(!j)return await this.handleResponse(c,a)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(c,a);return null}catch(c){throw c instanceof AuthError&&(c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c)),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),c}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let o=e;o||(this.config.auth.OIDCOptions.serverResponseType===ServerResponseType.QUERY?o=window.location.search:o=window.location.hash);let s=getDeserializedResponse(o);if(s){try{validateInteractionType(s,this.browserCrypto,InteractionType.Redirect)}catch(c){return c instanceof AuthError&&this.logger.error(`Interaction type validation failed due to ${c.errorCode}: ${c.errorMessage}`),[null,""]}return clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),[s,o]}const a=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.URL_HASH)),a&&(s=getDeserializedResponse(a),s)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[s,a]):[null,""]}async handleResponse(e,o){const s=e.state;if(!s)throw createBrowserAuthError(noStateInHash);const a=this.browserStorage.getCachedRequest(s);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const g=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,a.correlationId),{userRequestState:_}=ProtocolUtils.parseRequestState(this.browserCrypto,s);return g.acquireToken({...a,state:_,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(s)})}const c=this.browserStorage.getCachedAuthority(s);if(!c)throw createBrowserAuthError(noCachedAuthorityError);const h=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(o,c);return ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,a),new RedirectHandler(h,this.browserStorage,a,this.logger,this.performanceClient).handleCodeResponse(e,s)}async logout(e){var a,c;this.logger.verbose("logoutRedirect called");const o=this.initializeLogoutRequest(e),s=this.initializeServerTelemetryManager(ApiId.logout);try{this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Redirect,e),await this.clearCacheOnLogout(o.account);const h={apiId:ApiId.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(s,e&&e.authority,void 0,e&&e.account||void 0);if(d.authority.protocolMode===ProtocolMode.OIDC)try{d.authority.endSessionEndpoint}catch{if((a=o.account)!=null&&a.homeAccountId){this.browserStorage.removeAccount((c=o.account)==null?void 0:c.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,o);return}}const g=d.getLogoutUri(o);if(this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,o),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(g)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(g,h);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(g,h);return}}catch(h){throw h instanceof AuthError&&(h.setCorrelationId(this.correlationId),s.cacheFailedRequest(h)),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Redirect,null,h),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect),h}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect)}getRedirectStartPage(e){const o=e||window.location.href;return UrlString.getAbsoluteUrl(o,getCurrentUri())}}/*! @azure/msal-browser v3.10.0 2024-02-17 */async function initiateAuthRequest(i,e,o,s,a){if(e.addQueueMeasurement(PerformanceEvents.SilentHandlerInitiateAuthRequest,s),!i)throw o.info("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri);return a?invokeAsync(loadFrame,PerformanceEvents.SilentHandlerLoadFrame,o,e,s)(i,a,e,s):invoke(loadFrameSync,PerformanceEvents.SilentHandlerLoadFrameSync,o,e,s)(i)}async function monitorIframeForHash(i,e,o,s,a,c,h){return s.addQueueMeasurement(PerformanceEvents.SilentHandlerMonitorIframeForHash,c),new Promise((d,g)=>{e<DEFAULT_IFRAME_TIMEOUT_MS&&a.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${DEFAULT_IFRAME_TIMEOUT_MS}ms). This may result in timeouts.`);const _=window.setTimeout(()=>{window.clearInterval(b),g(createBrowserAuthError(monitorWindowTimeout))},e),b=window.setInterval(()=>{let j="";const _e=i.contentWindow;try{j=_e?_e.location.href:""}catch{}if(!j||j==="about:blank")return;let $="";_e&&(h===ServerResponseType.QUERY?$=_e.location.search:$=_e.location.hash),window.clearTimeout(_),window.clearInterval(b),d($)},o)}).finally(()=>{invoke(removeHiddenIframe,PerformanceEvents.RemoveHiddenIframe,a,s,c)(i)})}function loadFrame(i,e,o,s){return o.addQueueMeasurement(PerformanceEvents.SilentHandlerLoadFrame,s),new Promise((a,c)=>{const h=createHiddenIframe();window.setTimeout(()=>{if(!h){c("Unable to load iframe");return}h.src=i,a(h)},e)})}function loadFrameSync(i){const e=createHiddenIframe();return e.src=i,e}function createHiddenIframe(){const i=document.createElement("iframe");return i.style.visibility="hidden",i.style.position="absolute",i.style.width=i.style.height="0",i.style.border="0",i.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(i),i}function removeHiddenIframe(i){document.body===i.parentNode&&document.body.removeChild(i)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentIframeClient extends StandardInteractionClient{constructor(e,o,s,a,c,h,d,g,_,b,j){super(e,o,s,a,c,h,g,b,j),this.apiId=d,this.nativeStorage=_}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const o={...e};o.prompt?o.prompt!==PromptValue.NONE&&o.prompt!==PromptValue.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${o.prompt} with ${PromptValue.NONE}`),o.prompt=PromptValue.NONE):o.prompt=PromptValue.NONE;const s=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(o,InteractionType.Silent);preconnect(s.authority);const a=this.initializeServerTelemetryManager(this.apiId);try{const c=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)(a,s.authority,s.azureCloudOptions,s.account);return await invokeAsync(this.silentTokenHelper.bind(this),PerformanceEvents.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(c,s)}catch(c){throw c instanceof AuthError&&(c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c)),c}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async silentTokenHelper(e,o){const s=o.correlationId;this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientTokenHelper,s);const a=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,s)(o),c=await invokeAsync(e.getAuthCodeUrl.bind(e),PerformanceEvents.GetAuthCodeUrl,this.logger,this.performanceClient,s)({...o,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,o.authenticationScheme)}),h=new InteractionHandler(e,this.browserStorage,a,this.logger,this.performanceClient),d=await invokeAsync(initiateAuthRequest,PerformanceEvents.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,s)(c,this.performanceClient,this.logger,s,this.config.system.navigateFrameWait),g=this.config.auth.OIDCOptions.serverResponseType,_=await invokeAsync(monitorIframeForHash,PerformanceEvents.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,s,g),b=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,g,this.logger);if(b.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const j=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,b.accountId,this.browserStorage,s),{userRequestState:_e}=ProtocolUtils.parseRequestState(this.browserCrypto,o.state);return invokeAsync(j.acquireToken.bind(j),PerformanceEvents.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,s)({...o,state:_e,prompt:o.prompt||PromptValue.NONE})}return invokeAsync(h.handleCodeResponse.bind(h),PerformanceEvents.HandleCodeResponse,this.logger,this.performanceClient,s)(b,o)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentRefreshClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken,e.correlationId);const o=await invokeAsync(this.initializeBaseRequest.bind(this),PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e),s={...e,...o};e.redirectUri&&(s.redirectUri=this.getRedirectUri(e.redirectUri));const a=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),c=await this.createRefreshTokenClient(a,s.authority,s.azureCloudOptions,s.account);return invokeAsync(c.acquireTokenByRefreshToken.bind(c),PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(s).catch(h=>{throw h.setCorrelationId(this.correlationId),a.cacheFailedRequest(h),h})}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async createRefreshTokenClient(e,o,s,a){const c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,o,s,a);return new RefreshTokenClient(c,this.performanceClient)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class TokenCache{constructor(e,o,s,a){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=o,this.logger=s,this.cryptoObj=a}loadExternalTokens(e,o,s){if(this.logger.info("TokenCache - loadExternalTokens called"),!o.id_token)throw createBrowserAuthError(unableToLoadToken);const a=extractTokenClaims(o.id_token,base64Decode);let c,h,d;if(e.account)d=AccountEntity.createFromAccountInfo(e.account),c=new CacheRecord(d,this.loadIdToken(o.id_token,d.homeAccountId,e.account.environment,e.account.tenantId),this.loadAccessToken(e,o,d.homeAccountId,e.account.environment,e.account.tenantId,s),this.loadRefreshToken(e,o,d.homeAccountId,e.account.environment));else if(e.authority){const g=Authority.generateAuthority(e.authority,e.azureCloudOptions),_={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(h=new Authority(g,this.config.system.networkClient,this.storage,_,this.logger,e.correlationId||createNewGuid()),s.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),d=this.loadAccount(a,h,s.clientInfo),c=new CacheRecord(d,this.loadIdToken(o.id_token,d.homeAccountId,h.hostnameAndPort,h.tenant),this.loadAccessToken(e,o,d.homeAccountId,h.hostnameAndPort,h.tenant,s),this.loadRefreshToken(e,o,d.homeAccountId,h.hostnameAndPort));else if(o.client_info)this.logger.trace("TokenCache - homeAccountId from response"),d=this.loadAccount(a,h,o.client_info),c=new CacheRecord(d,this.loadIdToken(o.id_token,d.homeAccountId,h.hostnameAndPort,h.tenant),this.loadAccessToken(e,o,d.homeAccountId,h.hostnameAndPort,h.tenant,s),this.loadRefreshToken(e,o,d.homeAccountId,h.hostnameAndPort));else throw createBrowserAuthError(unableToLoadToken)}else throw createBrowserAuthError(unableToLoadToken);return this.generateAuthenticationResult(e,a,c,d,h)}loadAccount(e,o,s,a){if(this.isBrowserEnvironment){this.logger.verbose("TokenCache - loading account");let c;if(a?c=a:o.authorityType!==void 0&&s&&(c=AccountEntity.generateHomeAccountId(s,o.authorityType,this.logger,this.cryptoObj,e)),!c)throw createBrowserAuthError(unableToLoadToken);const h=e.tid,d=buildAccountToCache(this.storage,o,c,e,base64Decode,s,o.hostnameAndPort,h,void 0,void 0,this.logger);return this.storage.setAccount(d),d}else throw createBrowserAuthError(unableToLoadToken)}loadIdToken(e,o,s,a){const c=createIdTokenEntity(o,s,e,this.config.auth.clientId,a);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(c),c;throw createBrowserAuthError(unableToLoadToken)}loadAccessToken(e,o,s,a,c,h){if(!o.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!o.expires_in||!h.extendedExpiresOn)throw createBrowserAuthError(unableToLoadToken);const d=new ScopeSet(e.scopes).printScopes(),g=h.expiresOn||o.expires_in+new Date().getTime()/1e3,_=h.extendedExpiresOn,b=createAccessTokenEntity(s,a,o.access_token,this.config.auth.clientId,c,d,g,_,base64Decode);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(b),b;throw createBrowserAuthError(unableToLoadToken)}loadRefreshToken(e,o,s,a){if(!o.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const c=createRefreshTokenEntity(s,a,o.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(c),c;throw createBrowserAuthError(unableToLoadToken)}generateAuthenticationResult(e,o,s,a,c){var _e,$;let h=Constants.EMPTY_STRING,d=[],g=null,_;s!=null&&s.accessToken&&(h=s.accessToken.secret,d=ScopeSet.fromString(s.accessToken.target).asArray(),g=new Date(Number(s.accessToken.expiresOn)*1e3),_=new Date(Number(s.accessToken.extendedExpiresOn)*1e3));const b=o.oid||o.sub||Constants.EMPTY_STRING,j=o.tid||Constants.EMPTY_STRING;return{authority:c?c.canonicalAuthority:Constants.EMPTY_STRING,uniqueId:b,tenantId:j,scopes:d,account:a.getAccountInfo(),idToken:((_e=s.idToken)==null?void 0:_e.secret)||"",idTokenClaims:o||{},accessToken:h,fromCache:!0,expiresOn:g,correlationId:e.correlationId||Constants.EMPTY_STRING,requestId:Constants.EMPTY_STRING,extExpiresOn:_,familyId:Constants.EMPTY_STRING,tokenType:(($=s==null?void 0:s.accessToken)==null?void 0:$.tokenType)||Constants.EMPTY_STRING,state:Constants.EMPTY_STRING,cloudGraphHostName:a.cloudGraphHostName||Constants.EMPTY_STRING,msGraphHost:a.msGraphHost||Constants.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class HybridSpaAuthorizationCodeClient extends AuthorizationCodeClient{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentAuthCodeClient extends StandardInteractionClient{constructor(e,o,s,a,c,h,d,g,_,b){super(e,o,s,a,c,h,g,_,b),this.apiId=d}async acquireToken(e){if(!e.code)throw createBrowserAuthError(authCodeRequired);const o=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,InteractionType.Silent),s=this.initializeServerTelemetryManager(this.apiId);try{const a={...o,code:e.code},c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)(s,o.authority,o.azureCloudOptions,o.account),h=new HybridSpaAuthorizationCodeClient(c);this.logger.verbose("Auth code client created");const d=new InteractionHandler(h,this.browserStorage,a,this.logger,this.performanceClient);return await invokeAsync(d.handleCodeResponseFromServer.bind(d),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},o,!1)}catch(a){throw a instanceof AuthError&&(a.setCorrelationId(this.correlationId),s.cacheFailedRequest(a)),a}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class StandardController{constructor(e){this.atsAsyncMeasurement=void 0,this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new CryptoOps(this.logger,this.performanceClient):DEFAULT_CRYPTO_IMPLEMENTATION,this.eventHandler=new EventHandler(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new BrowserCacheManager(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,buildStaticAuthorityOptions(this.config.auth)):DEFAULT_BROWSER_CACHE_MANAGER(this.config.auth.clientId,this.logger);const o={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new BrowserCacheManager(this.config.auth.clientId,o,this.browserCrypto,this.logger),this.tokenCache=new TokenCache(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e){const o=new StandardController(e);return await o.initialize(),o}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}async initialize(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}const e=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(PerformanceEvents.InitializeClientApplication);if(this.eventHandler.emitEvent(EventType.INITIALIZE_START),e)try{this.nativeExtensionProvider=await NativeMessageHandler.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await invokeAsync(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),PerformanceEvents.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient)(this.performanceClient)),this.initialized=!0,this.eventHandler.emitEvent(EventType.INITIALIZE_END),o.end({allowNativeBroker:e,success:!0})}async handleRedirectPromise(e){this.logger.verbose("handleRedirectPromise called"),blockAPICallsBeforeInitialize(this.initialized);const o=this.getAllAccounts();if(this.isBrowserEnvironment){const s=e||"";let a=this.redirectResponse.get(s);if(typeof a>"u"){const c=this.browserStorage.getCachedNativeRequest(),h=c&&NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,d=h?c==null?void 0:c.correlationId:this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,!0)||"",g=this.performanceClient.startMeasurement("acquireTokenRedirect",d);this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_START,InteractionType.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");let _;if(h&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const b=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,c.accountId,this.nativeInternalStorage,c.correlationId);_=invokeAsync(b.handleRedirectPromise.bind(b),PerformanceEvents.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,g.event.correlationId)(this.performanceClient,g.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const b=this.createRedirectClient(d);_=invokeAsync(b.handleRedirectPromise.bind(b),PerformanceEvents.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,g.event.correlationId)(e,this.performanceClient,g.event.correlationId)}a=_.then(b=>(b&&(o.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Redirect,b),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Redirect,b),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),g.end({success:!0})),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),g.end({success:!1}),b)).catch(b=>{const j=b;throw o.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,j):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,j),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),j instanceof AuthError?g.end({success:!1,errorCode:j.errorCode,subErrorCode:j.subError}):g.end({success:!1}),b}),this.redirectResponse.set(s,a)}else this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return a}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async acquireTokenRedirect(e){const o=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",o),this.preflightBrowserEnvironmentCheck(InteractionType.Redirect);const s=this.getAllAccounts().length>0;s?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Redirect,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Redirect,e);let a;return this.nativeExtensionProvider&&this.canUseNative(e)?a=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,o).acquireTokenRedirect(e).catch(h=>{if(h instanceof NativeAuthError&&isFatalNativeAuthError(h))return this.nativeExtensionProvider=void 0,this.createRedirectClient(o).acquireToken(e);if(h instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(o).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),h}):a=this.createRedirectClient(o).acquireToken(e),a.catch(c=>{throw s?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,c):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,c),c})}acquireTokenPopup(e){const o=this.getRequestCorrelationId(e),s=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPopup,o);try{this.logger.verbose("acquireTokenPopup called",o),this.preflightBrowserEnvironmentCheck(InteractionType.Popup)}catch(h){return Promise.reject(h)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Popup,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Popup,e);let c;return this.canUseNative(e)?c=this.acquireTokenNative({...e,correlationId:o},ApiId.acquireTokenPopup).then(h=>(this.getBrowserStorage().setInteractionInProgress(!1),s.end({success:!0,isNativeBroker:!0,requestId:h.requestId}),h)).catch(h=>{if(h instanceof NativeAuthError&&isFatalNativeAuthError(h))return this.nativeExtensionProvider=void 0,this.createPopupClient(o).acquireToken(e);if(h instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(o).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),h}):c=this.createPopupClient(o).acquireToken(e),c.then(h=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Popup,h):this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Popup,h),s.add({accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length}),s.end({success:!0,requestId:h.requestId}),h)).catch(h=>(a.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Popup,null,h):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Popup,null,h),s.end({errorCode:h.errorCode,subErrorCode:h.subError,success:!1}),Promise.reject(h)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var c;const o=this.getRequestCorrelationId(e),s={...e,prompt:e.prompt,correlationId:o};this.preflightBrowserEnvironmentCheck(InteractionType.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.SsoSilent,o),(c=this.ssoSilentMeasurement)==null||c.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",o),this.eventHandler.emitEvent(EventType.SSO_SILENT_START,InteractionType.Silent,s);let a;return this.canUseNative(s)?a=this.acquireTokenNative(s,ApiId.ssoSilent).catch(h=>{if(h instanceof NativeAuthError&&isFatalNativeAuthError(h))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(s.correlationId).acquireToken(s);throw h}):a=this.createSilentIframeClient(s.correlationId).acquireToken(s),a.then(h=>{var d,g;return this.eventHandler.emitEvent(EventType.SSO_SILENT_SUCCESS,InteractionType.Silent,h),(d=this.ssoSilentMeasurement)==null||d.add({accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length}),(g=this.ssoSilentMeasurement)==null||g.end({success:!0,isNativeBroker:h.fromNativeBroker,requestId:h.requestId}),h}).catch(h=>{var d;throw this.eventHandler.emitEvent(EventType.SSO_SILENT_FAILURE,InteractionType.Silent,null,h),(d=this.ssoSilentMeasurement)==null||d.end({errorCode:h.errorCode,subErrorCode:h.subError,success:!1}),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const o=this.getRequestCorrelationId(e);this.preflightBrowserEnvironmentCheck(InteractionType.Silent),this.logger.trace("acquireTokenByCode called",o),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_START,InteractionType.Silent,e);const s=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCode,o);try{if(e.code&&e.nativeAccountId)throw createBrowserAuthError(spaCodeAndNativeAccountIdPresent);if(e.code){const a=e.code;let c=this.hybridAuthCodeResponses.get(a);return c?(this.logger.verbose("Existing acquireTokenByCode request found",o),s.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",o),c=this.acquireTokenByCodeAsync({...e,correlationId:o}).then(h=>(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_SUCCESS,InteractionType.Silent,h),this.hybridAuthCodeResponses.delete(a),s.add({accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length}),s.end({success:!0,isNativeBroker:h.fromNativeBroker,requestId:h.requestId}),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,h),s.end({errorCode:h.errorCode,subErrorCode:h.subError,success:!1}),h}),this.hybridAuthCodeResponses.set(a,c)),await c}else if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return await this.acquireTokenNative({...e,correlationId:o},ApiId.acquireTokenByCode,e.nativeAccountId).catch(a=>{throw a instanceof NativeAuthError&&isFatalNativeAuthError(a)&&(this.nativeExtensionProvider=void 0),a});throw createBrowserAuthError(unableToAcquireTokenFromNativePlatform)}else throw createBrowserAuthError(authCodeOrNativeAccountIdRequired)}catch(a){throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,a),s.end({errorCode:a instanceof AuthError&&a.errorCode||void 0,subErrorCode:a instanceof AuthError&&a.subError||void 0,success:!1}),a}}async acquireTokenByCodeAsync(e){var a;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCodeAsync,e.correlationId),(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(c=>{var h;return(h=this.acquireTokenByCodeAsyncMeasurement)==null||h.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c}).catch(c=>{var h;throw(h=this.acquireTokenByCodeAsyncMeasurement)==null||h.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,o,s){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenFromCache,o.correlationId),s){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessToken:case CacheLookupPolicy.AccessTokenAndRefreshToken:return invokeAsync(e.acquireToken.bind(e),PerformanceEvents.SilentCacheClientAcquireToken,this.logger,this.performanceClient,o.correlationId)(o);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenByRefreshToken(e,o){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenByRefreshToken,e.correlationId),o){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessTokenAndRefreshToken:case CacheLookupPolicy.RefreshToken:case CacheLookupPolicy.RefreshTokenAndNetwork:const s=this.createSilentRefreshClient(e.correlationId);return invokeAsync(s.acquireToken.bind(s),PerformanceEvents.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenBySilentIframe,e.correlationId);const o=this.createSilentIframeClient(e.correlationId);return invokeAsync(o.acquireToken.bind(o),PerformanceEvents.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const o=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",o),this.logoutRedirect({correlationId:o,...e})}async logoutRedirect(e){const o=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(InteractionType.Redirect),this.createRedirectClient(o).logout(e)}logoutPopup(e){try{const o=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(InteractionType.Popup),this.createPopupClient(o).logout(e)}catch(o){return Promise.reject(o)}}async clearCache(e){const o=this.getRequestCorrelationId(e);return this.createSilentCacheClient(o).logout(e)}getAllAccounts(e){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(e):[]}getAccount(e){if(this.logger.trace("getAccount called"),Object.keys(e).length===0)return this.logger.warning("getAccount: No accountFilter provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy(e);return o?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),o):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(e){if(this.logger.trace("getAccountByUsername called"),!e)return this.logger.warning("getAccountByUsername: No username provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy({username:e});return o?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),o):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(e){if(this.logger.trace("getAccountByHomeId called"),!e)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:e});return o?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),o):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(e){if(this.logger.trace("getAccountByLocalId called"),!e)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy({localAccountId:e});return o?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),o):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(e){this.browserStorage.setActiveAccount(e)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,o){this.logger.verbose("hydrateCache called");const s=AccountEntity.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(s),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,o)):this.browserStorage.hydrateCache(e,o)}preflightBrowserEnvironmentCheck(e,o=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),blockNonBrowserEnvironment(this.isBrowserEnvironment),blockRedirectInIframe(e,this.config.system.allowRedirectInIframe),blockReloadInHiddenIframes(),blockAcquireTokenInPopups(),blockAPICallsBeforeInitialize(this.initialized),e===InteractionType.Redirect&&this.config.cache.cacheLocation===BrowserCacheLocation.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw createBrowserConfigurationAuthError(inMemRedirectUnavailable);(e===InteractionType.Redirect||e===InteractionType.Popup)&&this.preflightInteractiveRequest(!o)}preflightInteractiveRequest(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),blockReloadInHiddenIframes(),e&&this.getBrowserStorage().setInteractionInProgress(!0)}async acquireTokenNative(e,o,s){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw createBrowserAuthError(nativeConnectionNotEstablished);return new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,o,this.performanceClient,this.nativeExtensionProvider,s||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,o){if(this.logger.trace("canUseNative called"),!NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!o&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const o=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return o&&o.nativeAccountId||""}createPopupClient(e){return new PopupClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new RedirectClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new SilentIframeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new SilentCacheClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new SilentRefreshClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new SilentAuthCodeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,o){this.browserStorage.setWrapperMetadata(e,o)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?createNewGuid():Constants.EMPTY_STRING}async loginRedirect(e){const o=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",o),this.acquireTokenRedirect({correlationId:o,...e||DEFAULT_REQUEST})}loginPopup(e){const o=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",o),this.acquireTokenPopup({correlationId:o,...e||DEFAULT_REQUEST})}async acquireTokenSilent(e){const o=this.getRequestCorrelationId(e),s=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenSilent,o);s.add({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(InteractionType.Silent),this.logger.verbose("acquireTokenSilent called",o);const a=e.account||this.getActiveAccount();if(!a)throw createBrowserAuthError(noAccountError);const c={clientId:this.config.auth.clientId,authority:e.authority||Constants.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:a.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},h=JSON.stringify(c),d=this.activeSilentTokenRequests.get(h);if(typeof d>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",o);const g=invokeAsync(this.acquireTokenSilentAsync.bind(this),PerformanceEvents.AcquireTokenSilentAsync,this.logger,this.performanceClient,o)({...e,correlationId:o},a).then(_=>(this.activeSilentTokenRequests.delete(h),s.add({accessTokenSize:_.accessToken.length,idTokenSize:_.idToken.length}),s.end({success:!0,fromCache:_.fromCache,isNativeBroker:_.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:_.requestId}),_)).catch(_=>{throw this.activeSilentTokenRequests.delete(h),s.end({errorCode:_.errorCode,subErrorCode:_.subError,success:!1}),_});return this.activeSilentTokenRequests.set(h,g),{...await g,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",o),s.discard(),{...await d,state:e.state}}async acquireTokenSilentAsync(e,o){var a;this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Silent,e),this.atsAsyncMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenSilentAsync,e.correlationId),(a=this.atsAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility);let s;if(NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&o.nativeAccountId){this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const c={...e,account:o};s=this.acquireTokenNative(c,ApiId.acquireTokenSilent_silentFlow).catch(async h=>{if(h instanceof NativeAuthError&&isFatalNativeAuthError(h))return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,this.createSilentIframeClient(e.correlationId).acquireToken(e);throw h})}else{this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const c=this.createSilentCacheClient(e.correlationId),h=await invokeAsync(c.initializeSilentRequest.bind(c),PerformanceEvents.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,o),d=e.cacheLookupPolicy||CacheLookupPolicy.Default;s=invokeAsync(this.acquireTokenFromCache.bind(this),PerformanceEvents.AcquireTokenFromCache,this.logger,this.performanceClient,h.correlationId)(c,h,d).catch(g=>{if(e.cacheLookupPolicy===CacheLookupPolicy.AccessToken)throw g;return blockReloadInHiddenIframes(),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_NETWORK_START,InteractionType.Silent,h),invokeAsync(this.acquireTokenByRefreshToken.bind(this),PerformanceEvents.AcquireTokenByRefreshToken,this.logger,this.performanceClient,h.correlationId)(h,d).catch(_=>{if(checkIfRefreshTokenErrorCanBeResolvedSilently(_,h,d))return this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",h.correlationId),invokeAsync(this.acquireTokenBySilentIframe.bind(this),PerformanceEvents.AcquireTokenBySilentIframe,this.logger,this.performanceClient,h.correlationId)(h);throw _})})}return s.then(c=>{var h;return this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Silent,c),(h=this.atsAsyncMeasurement)==null||h.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c}).catch(c=>{var h;throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Silent,null,c),(h=this.atsAsyncMeasurement)==null||h.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibility)})}}function checkIfRefreshTokenErrorCanBeResolvedSilently(i,e,o){const s=!(i instanceof InteractionRequiredAuthError&&i.subError!==badToken),a=i.errorCode===BrowserConstants.INVALID_GRANT_ERROR||i.errorCode===tokenRefreshRequired,c=s&&a||i.errorCode===noTokensFound||i.errorCode===refreshTokenExpired,h=iFrameRenewalPolicies.includes(o);return c&&h}const StandardController$1=Object.freeze(Object.defineProperty({__proto__:null,StandardController},Symbol.toStringTag,{value:"Module"}));/*! @azure/msal-browser v3.10.0 2024-02-17 */class PublicClientApplication{static async createPublicClientApplication(e){const o=await createV3Controller(e);return new PublicClientApplication(e,o)}constructor(e,o){if(o)this.controller=o;else{const s=new StandardOperatingContext(e);this.controller=new StandardController(s)}}async initialize(){return this.controller.initialize()}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e){return this.controller.addEventCallback(e)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,o){return this.controller.initializeWrapperLibrary(e,o)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,o){return this.controller.hydrateCache(e,o)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const stubbedPublicClientApplication={initialize:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenByCode:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),getAllAccounts:()=>[],getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logout:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),ssoSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},getLogger:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},hydrateCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),clearCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled))};/*! @azure/msal-browser v3.10.0 2024-02-17 */class EventMessageUtils{static getInteractionStatusFromEvent(e,o){switch(e.eventType){case EventType.LOGIN_START:return InteractionStatus.Login;case EventType.SSO_SILENT_START:return InteractionStatus.SsoSilent;case EventType.ACQUIRE_TOKEN_START:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup)return InteractionStatus.AcquireToken;break;case EventType.HANDLE_REDIRECT_START:return InteractionStatus.HandleRedirect;case EventType.LOGOUT_START:return InteractionStatus.Logout;case EventType.SSO_SILENT_SUCCESS:case EventType.SSO_SILENT_FAILURE:if(o&&o!==InteractionStatus.SsoSilent)break;return InteractionStatus.None;case EventType.LOGOUT_END:if(o&&o!==InteractionStatus.Logout)break;return InteractionStatus.None;case EventType.HANDLE_REDIRECT_END:if(o&&o!==InteractionStatus.HandleRedirect)break;return InteractionStatus.None;case EventType.LOGIN_SUCCESS:case EventType.LOGIN_FAILURE:case EventType.ACQUIRE_TOKEN_SUCCESS:case EventType.ACQUIRE_TOKEN_FAILURE:case EventType.RESTORE_FROM_BFCACHE:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup){if(o&&o!==InteractionStatus.Login&&o!==InteractionStatus.AcquireToken)break;return InteractionStatus.None}break}return null}}function parseClientInfo(){let i=window.CLIENT_ID,e=window.TENANT_ID;return i.startsWith("{{")&&(i="3952eac2-55db-48e3-a7cb-0c8f074a0190"),e.startsWith("{{")&&(e="a7053deb-181e-4402-b6e4-7b89b67613de"),{clientId:i,tenantId:e}}const{clientId,tenantId}=parseClientInfo();console.log({tenantId,clientId});const msalConfig={auth:{clientId,authority:`https://login.microsoftonline.com/${tenantId}`,redirectUri:"/auth",postLogoutRedirectUri:"/",clientCapabilities:["CP1"]},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(i,e,o)=>{if(!o)switch(i){case LogLevel.Error:console.error(e);return;case LogLevel.Info:return;case LogLevel.Verbose:return;case LogLevel.Warning:console.warn(e);return}}}}},appScopes=["User.Read","profile"],msalInstance=new PublicClientApplication(msalConfig);!msalInstance.getActiveAccount()&&msalInstance.getAllAccounts().length>0&&msalInstance.setActiveAccount(msalInstance.getAllAccounts()[0]);msalInstance.addEventCallback(i=>{if(i.eventType===EventType.LOGIN_SUCCESS&&i.payload&&i.payload.account){const e=i.payload.account;msalInstance.setActiveAccount(e)}i.eventType===EventType.LOGOUT_SUCCESS&&msalInstance.getAllAccounts().length>0&&msalInstance.setActiveAccount(msalInstance.getAllAccounts()[0]),i.eventType===EventType.LOGIN_FAILURE&&console.log(JSON.stringify(i))});async function acquireTokens(i=!1){await msalInstance.initialize();const e=msalInstance.getActiveAccount(),o=msalInstance.getAllAccounts();if(!e&&o.length===0)throw new Error("No accounts found");const s={scopes:appScopes,account:e||o[0],forceRefresh:i},a=await msalInstance.acquireTokenSilent(s),c=a.idTokenClaims.exp,h=Math.floor(Date.now()/1e3)+300;return c<h?await acquireTokens(!0):a}const handleLogin=(i=!1)=>{i?msalInstance.loginPopup({scopes:appScopes,redirectUri:"/auth"}).catch(e=>console.log(e)):msalInstance.loginRedirect({scopes:appScopes,redirectUri:"/auth"}).catch(e=>console.log(e))},handleLogout=(i=!1)=>{i?msalInstance.logoutPopup({mainWindowRedirectUri:"/",account:msalInstance.getActiveAccount()}).catch(e=>console.log(e)):msalInstance.logoutRedirect().catch(e=>console.log(e))},wrappedFetch=async(i,e)=>{const o=await acquireTokens(),s=await fetch(environment.api+i,{...e,headers:{"Content-Type":"application/json",...e.headers,Authorization:`Bearer ${o.idToken}`}});if(!s.ok)throw new Error(s.statusText);return await s.json()},fetchTopics=async()=>wrappedFetch("/topics/",{method:"GET"}),fetchTopic=async i=>wrappedFetch(`/topics/${i}`,{method:"GET"}),fetchConversations=async i=>wrappedFetch(`/topics/${i}/conversations/`,{method:"GET"}),fetchConversation=async(i,e)=>wrappedFetch(`/topics/${i}/conversations/${e}`,{method:"GET"}),sendConversationChat=async(i,e,o)=>wrappedFetch(`/topics/${i}/conversations/${e}/chat`,{method:"POST",body:JSON.stringify({message:o})}),fetchFiles=async i=>wrappedFetch(`/topics/${i}/files/`,{method:"GET"}),fetchFile=async(i,e)=>wrappedFetch(`/topics/${i}/files/${e}`,{method:"GET"}),fetchBlobSasToken=async(i,e)=>wrappedFetch(`/topics/${i}/files/sas-token?url=${e}`,{method:"GET"}),createTopic=async i=>wrappedFetch("/topics/",{method:"POST",body:JSON.stringify(i)}),createConversation=async(i,e)=>wrappedFetch(`/topics/${i}/conversations/`,{method:"POST",body:JSON.stringify(e)}),deleteConversation=async(i,e)=>wrappedFetch(`/topics/${i}/conversations/${e}`,{method:"DELETE"}),deleteTopic=async i=>wrappedFetch(`/topics/${i}`,{method:"DELETE"}),createFile=async(i,e,o)=>{const s=new Blob([o],{type:"application/octet-stream"});return wrappedFetch(`/topics/${i}/files/`,{method:"POST",body:s,headers:{"Content-Type":"application/octet-stream",filename:e,"Content-Disposition":`attachment; filename="${e}"`}})},createUser=async i=>wrappedFetch("/users/",{method:"POST",body:JSON.stringify(i)}),fetchSearchResults=async(i,e)=>wrappedFetch(`/search/${i}/${e}`,{method:"GET"});/*! @azure/msal-react v2.0.12 2024-02-17 */const defaultMsalContext={instance:stubbedPublicClientApplication,inProgress:InteractionStatus.None,accounts:[],logger:new Logger({})},MsalContext=reactExports.createContext(defaultMsalContext);MsalContext.Consumer;/*! @azure/msal-react v2.0.12 2024-02-17 */function getChildrenOrFunction(i,e){return typeof i=="function"?i(e):i}function accountArraysAreEqual(i,e){if(i.length!==e.length)return!1;const o=[...e];return i.every(s=>{const a=o.shift();return!s||!a?!1:s.homeAccountId===a.homeAccountId&&s.localAccountId===a.localAccountId&&s.username===a.username})}function getAccountByIdentifiers(i,e){return i.length>0&&(e.homeAccountId||e.localAccountId||e.username)&&i.filter(s=>!(e.username&&e.username.toLowerCase()!==s.username.toLowerCase()||e.homeAccountId&&e.homeAccountId.toLowerCase()!==s.homeAccountId.toLowerCase()||e.localAccountId&&e.localAccountId.toLowerCase()!==s.localAccountId.toLowerCase()))[0]||null}/*! @azure/msal-react v2.0.12 2024-02-17 */const name$1="@azure/msal-react",version="2.0.12";/*! @azure/msal-react v2.0.12 2024-02-17 */const MsalProviderActionType={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},reducer$1=(i,e)=>{const{type:o,payload:s}=e;let a=i.inProgress;switch(o){case MsalProviderActionType.UNBLOCK_INPROGRESS:i.inProgress===InteractionStatus.Startup&&(a=InteractionStatus.None,s.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case MsalProviderActionType.EVENT:const h=s.message,d=EventMessageUtils.getInteractionStatusFromEvent(h,i.inProgress);d&&(s.logger.info(`MsalProvider - ${h.eventType} results in setting inProgress from ${i.inProgress} to ${d}`),a=d);break;default:throw new Error(`Unknown action type: ${o}`)}const c=s.instance.getAllAccounts();return a!==i.inProgress&&!accountArraysAreEqual(c,i.accounts)?{...i,inProgress:a,accounts:c}:a!==i.inProgress?{...i,inProgress:a}:accountArraysAreEqual(c,i.accounts)?i:{...i,accounts:c}};function MsalProvider({instance:i,children:e}){reactExports.useEffect(()=>{i.initializeWrapperLibrary(WrapperSKU.React,version)},[i]);const o=reactExports.useMemo(()=>i.getLogger().clone(name$1,version),[i]),[s,a]=reactExports.useReducer(reducer$1,void 0,()=>({inProgress:InteractionStatus.Startup,accounts:i.getAllAccounts()}));reactExports.useEffect(()=>{const h=i.addEventCallback(d=>{a({payload:{instance:i,logger:o,message:d},type:MsalProviderActionType.EVENT})});return o.verbose(`MsalProvider - Registered event callback with id: ${h}`),i.initialize().then(()=>{i.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:i,logger:o},type:MsalProviderActionType.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{h&&(o.verbose(`MsalProvider - Removing event callback ${h}`),i.removeEventCallback(h))}},[i,o]);const c={instance:i,inProgress:s.inProgress,accounts:s.accounts,logger:o};return React.createElement(MsalContext.Provider,{value:c},e)}/*! @azure/msal-react v2.0.12 2024-02-17 */const useMsal=()=>reactExports.useContext(MsalContext);/*! @azure/msal-react v2.0.12 2024-02-17 */function isAuthenticated(i,e){return e&&(e.username||e.homeAccountId||e.localAccountId)?!!getAccountByIdentifiers(i,e):i.length>0}function useIsAuthenticated(i){const{accounts:e,inProgress:o}=useMsal(),[s,a]=reactExports.useState(()=>o===InteractionStatus.Startup?!1:isAuthenticated(e,i));return reactExports.useEffect(()=>{a(isAuthenticated(e,i))},[e,i]),s}/*! @azure/msal-react v2.0.12 2024-02-17 */function AuthenticatedTemplate({username:i,homeAccountId:e,localAccountId:o,children:s}){const a=useMsal(),c=reactExports.useMemo(()=>({username:i,homeAccountId:e,localAccountId:o}),[i,e,o]);return useIsAuthenticated(c)&&a.inProgress!==InteractionStatus.Startup?React.createElement(React.Fragment,null,getChildrenOrFunction(s,a)):null}/*! @azure/msal-react v2.0.12 2024-02-17 */function UnauthenticatedTemplate({username:i,homeAccountId:e,localAccountId:o,children:s}){const a=useMsal(),c=reactExports.useMemo(()=>({username:i,homeAccountId:e,localAccountId:o}),[i,e,o]);return!useIsAuthenticated(c)&&a.inProgress!==InteractionStatus.Startup&&a.inProgress!==InteractionStatus.HandleRedirect?React.createElement(React.Fragment,null,getChildrenOrFunction(s,a)):null}/*! @azure/msal-react v2.0.12 2024-02-17 */function getAccount(i,e){return!e||!e.homeAccountId&&!e.localAccountId&&!e.username?i.getActiveAccount():getAccountByIdentifiers(i.getAllAccounts(),e)}function useAccount(i){const{instance:e,inProgress:o,logger:s}=useMsal(),[a,c]=reactExports.useState(()=>getAccount(e,i));return reactExports.useEffect(()=>{c(h=>{const d=getAccount(e,i);return AccountEntity.accountInfoIsEqual(h,d,!0)?h:(s.info("useAccount - Updating account"),d)})},[o,i,e,s]),a}function css(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var o=[],s=0,a=i;s<a.length;s++){var c=a[s];if(c)if(typeof c=="string")o.push(c);else if(c.hasOwnProperty("toString")&&typeof c.toString=="function")o.push(c.toString());else for(var h in c)c[h]&&o.push(h)}return o.join(" ")}var toObjectMap=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var o={},s=0,a=i;s<a.length;s++)for(var c=a[s],h=Array.isArray(c)?c:Object.keys(c),d=0,g=h;d<g.length;d++){var _=g[d];o[_]=1}return o},baseElementEvents=toObjectMap(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),baseElementProperties=toObjectMap(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),htmlElementProperties=toObjectMap(baseElementProperties,baseElementEvents);toObjectMap(htmlElementProperties,["form"]);var audioProperties=toObjectMap(htmlElementProperties,["height","loop","muted","preload","src","width"]);toObjectMap(audioProperties,["poster"]);toObjectMap(htmlElementProperties,["start"]);toObjectMap(htmlElementProperties,["value"]);toObjectMap(htmlElementProperties,["download","href","hrefLang","media","rel","target","type"]);var buttonProperties=toObjectMap(htmlElementProperties,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]);toObjectMap(buttonProperties,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]);toObjectMap(buttonProperties,["autoCapitalize","cols","dirname","form","maxLength","minLength","placeholder","readOnly","required","rows","wrap"]);toObjectMap(buttonProperties,["form","multiple","required"]);toObjectMap(htmlElementProperties,["selected","value"]);toObjectMap(htmlElementProperties,["cellPadding","cellSpacing"]);toObjectMap(htmlElementProperties,["rowSpan","scope"]);toObjectMap(htmlElementProperties,["colSpan","headers","rowSpan","scope"]);toObjectMap(htmlElementProperties,["span"]);toObjectMap(htmlElementProperties,["span"]);toObjectMap(htmlElementProperties,["acceptCharset","action","encType","encType","method","noValidate","target"]);toObjectMap(htmlElementProperties,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]);toObjectMap(htmlElementProperties,["alt","crossOrigin","height","src","srcSet","useMap","width"]);function getNativeProps(i,e,o){for(var s=Array.isArray(e),a={},c=Object.keys(i),h=0,d=c;h<d.length;h++){var g=d[h],_=!s&&e[g]||s&&e.indexOf(g)>=0||g.indexOf("data-")===0||g.indexOf("aria-")===0;_&&(!o||(o==null?void 0:o.indexOf(g))===-1)&&(a[g]=i[g])}return a}var __assign=function(){return __assign=Object.assign||function(i){for(var e,o=1,s=arguments.length;o<s;o++){e=arguments[o];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])}return i},__assign.apply(this,arguments)},_root=typeof window>"u"?global:window,_styleNonce=_root&&_root.CSPSettings&&_root.CSPSettings.nonce,_themeState=initializeThemeState(),_themeTokenRegex=/[\'\"]\[theme:\s*(\w+)\s*(?:\,\s*default:\s*([\\"\']?[\.\,\(\)\#\-\s\w]*[\.\,\(\)\#\-\w][\"\']?))?\s*\][\'\"]/g,now=function(){return typeof performance<"u"&&performance.now?performance.now():Date.now()};function measure(i){var e=now();i();var o=now();_themeState.perf.duration+=o-e}function initializeThemeState(){var i=_root.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};return i.runState||(i=__assign(__assign({},i),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}})),i.registeredThemableStyles||(i=__assign(__assign({},i),{registeredThemableStyles:[]})),_root.__themeState__=i,i}function loadStyles(i,e){e===void 0&&(e=!1),measure(function(){var o=Array.isArray(i)?i:splitStyles(i),s=_themeState.runState,a=s.mode,c=s.buffer,h=s.flushTimer;e||a===1?(c.push(o),h||(_themeState.runState.flushTimer=asyncLoadStyles())):applyThemableStyles(o)})}function flush(){measure(function(){var i=_themeState.runState.buffer.slice();_themeState.runState.buffer=[];var e=[].concat.apply([],i);e.length>0&&applyThemableStyles(e)})}function asyncLoadStyles(){return setTimeout(function(){_themeState.runState.flushTimer=0,flush()},0)}function applyThemableStyles(i,e){_themeState.loadStyles?_themeState.loadStyles(resolveThemableArray(i).styleString,i):registerStyles(i)}function resolveThemableArray(i){var e=_themeState.theme,o=!1,s=(i||[]).map(function(a){var c=a.theme;if(c){o=!0;var h=e?e[c]:void 0,d=a.defaultValue||"inherit";return e&&!h&&console&&!(c in e)&&typeof DEBUG<"u"&&DEBUG&&console.warn('Theming value not provided for "'.concat(c,'". Falling back to "').concat(d,'".')),h||d}else return a.rawString});return{styleString:s.join(""),themable:o}}function splitStyles(i){var e=[];if(i){for(var o=0,s=void 0;s=_themeTokenRegex.exec(i);){var a=s.index;a>o&&e.push({rawString:i.substring(o,a)}),e.push({theme:s[1],defaultValue:s[2]}),o=_themeTokenRegex.lastIndex}e.push({rawString:i.substring(o)})}return e}function registerStyles(i){if(!(typeof document>"u")){var e=document.getElementsByTagName("head")[0],o=document.createElement("style"),s=resolveThemableArray(i),a=s.styleString,c=s.themable;o.setAttribute("data-load-themed-styles","true"),_styleNonce&&o.setAttribute("nonce",_styleNonce),o.appendChild(document.createTextNode(a)),_themeState.perf.count++,e.appendChild(o);var h=document.createEvent("HTMLEvents");h.initEvent("styleinsert",!0,!1),h.args={newStyle:o},document.dispatchEvent(h);var d={styleElement:o,themableStyle:i};c?_themeState.registeredThemableStyles.push(d):_themeState.registeredStyles.push(d)}}loadStyles([{rawString:".root_dd790ee3{display:inline-block;vertical-align:middle;speak:none;width:1em;height:1em}.svg_dd790ee3{height:100%;fill:currentColor;vertical-align:top;forced-color-adjust:auto}"}]);const root$3="root_dd790ee3",svg$2="svg_dd790ee3",classes=Object.freeze(Object.defineProperty({__proto__:null,root:root$3,svg:svg$2},Symbol.toStringTag,{value:"Module"})),IconContext=reactExports.createContext(void 0),useIconSubset=()=>reactExports.useContext(IconContext),createSvgIcon=({svg:i,displayName:e})=>{const o=s=>{var a;const{className:c,style:h={}}=s,d=useIconSubset(),g=getNativeProps(s,htmlElementProperties),_=s["aria-label"]||s["aria-labelledby"]||s.title?{role:"img"}:{"aria-hidden":!0};return reactExports.createElement("span",{..._,...g,className:css(root$3,c),style:h},!((a=d==null?void 0:d.icons)===null||a===void 0)&&a[e]?d.icons[e]:i({classes,props:s}))};return o.displayName=e,o},ChevronLeftIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1443 2045L421 1024 1443 3l90 90-930 931 930 931-90 90z"})),displayName:"ChevronLeftIcon"}),ChevronLeftIcon$1=ChevronLeftIcon,ChevronRightIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M515 1955l930-931L515 93l90-90 1022 1021L605 2045l-90-90z"})),displayName:"ChevronRightIcon"}),ChevronRightIcon$1=ChevronRightIcon,ChromeCloseIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1169 1024l879 879-145 145-879-879-879 879L0 1903l879-879L0 145 145 0l879 879L1903 0l145 145-879 879z"})),displayName:"ChromeCloseIcon"}),ChromeCloseIcon$1=ChromeCloseIcon,DeleteIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1792 384h-128v1472q0 40-15 75t-41 61-61 41-75 15H448q-40 0-75-15t-61-41-41-61-15-75V384H128V256h512V128q0-27 10-50t27-40 41-28 50-10h384q27 0 50 10t40 27 28 41 10 50v128h512v128zM768 256h384V128H768v128zm768 128H384v1472q0 26 19 45t45 19h1024q26 0 45-19t19-45V384zM768 1664H640V640h128v1024zm256 0H896V640h128v1024zm256 0h-128V640h128v1024z"})),displayName:"DeleteIcon"}),DeleteIcon$1=DeleteIcon,FileSymlinkIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M256 1920h640v128H128V0h1115l549 549v347h-128V640h-512V128H256v1792zM1280 512h293l-293-293v293zm768 512v1024H1024V1024h1024zm-128 128h-768v768h768v-768zm-621 531l274-275h-165v-128h384v384h-128v-165l-275 274-90-90z"})),displayName:"FileSymlinkIcon"}),FileSymlinkIcon$1=FileSymlinkIcon,PDFIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1920 1664h-128v384H128v-384H0V640h128V0h1243l421 421v219h128v1024zM1408 384h165l-165-165v165zM256 640h1408V512h-384V128H256v512zm1408 1024H256v256h1408v-256zm128-896H128v768h1664V768zM448 896q40 0 75 15t61 41 41 61 15 75q0 40-15 75t-41 61-61 41-75 15h-64v128H256V896h192zm0 256q26 0 45-19t19-45q0-26-19-45t-45-19h-64v128h64zm448-256q53 0 99 20t82 55 55 81 20 100q0 53-20 99t-55 82-81 55-100 20H768V896h128zm0 384q27 0 50-10t40-27 28-41 10-50q0-27-10-50t-27-40-41-28-50-10v256zm384-384h320v128h-192v128h192v128h-192v128h-128V896z"})),displayName:"PDFIcon"}),PDFIcon$1=PDFIcon,SendIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1997 960L18 1843l220-883L18 77l1979 883zM206 301l149 598h1190L206 301zm147 726l-147 592 1327-592H353z"})),displayName:"SendIcon"}),SendIcon$1=SendIcon,SkypeCheckIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1570 437q42 0 78 15t64 43 42 63 16 79q0 40-15 77t-43 65l-794 795q-28 28-65 43t-77 16q-40 0-77-15t-65-44l-362-362q-28-28-43-65t-16-77q0-42 16-78t43-64 63-42 79-16q40 0 77 15t65 43l220 220 652-653q28-28 65-43t77-15z"})),displayName:"SkypeCheckIcon"}),SkypeCheckIcon$1=SkypeCheckIcon,TextDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1243 0l549 549v1499H128V0h1115zm37 219v293h293l-293-293zM256 1920h1408V640h-512V128H256v1792zm256-896V896h896v128H512zm0 256v-128h896v128H512zm0 256v-128h896v128H512z"})),displayName:"TextDocumentIcon"}),TextDocumentIcon$1=TextDocumentIcon,TopicItem=({topic:i,index:e,onDelete:o})=>jsxRuntimeExports.jsx("div",{className:"my-1",children:jsxRuntimeExports.jsxs("div",{className:"p-1 border border-gray-700 bg-blue-100 flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs(Link,{to:`/topics/${i.id}`,children:[jsxRuntimeExports.jsx("span",{className:"text-bold text-xl pr-3",children:i.name}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:i.description})]})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:()=>o(i.id),title:`Delete ${i.name}`,children:jsxRuntimeExports.jsx(DeleteIcon$1,{})})})]})},e),TopicHome=()=>{const[i,e]=reactExports.useState([]),o=useAccount();reactExports.useEffect(()=>{fetchTopics().then(a=>e(a))},[o]);const s=a=>{console.log(`Delete ${a}`),deleteTopic(a).then(()=>{fetchTopics().then(c=>e(c))})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:"Topics"})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx(Link,{to:"/topics/new",children:jsxRuntimeExports.jsx("span",{className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white",children:"+ Create a New Topic"})})})]}),i.map((a,c)=>jsxRuntimeExports.jsx(TopicItem,{topic:a,index:c,onDelete:s},c))]})},FilePanel=({file:i,topicId:e})=>{const o=async()=>{const s=await fetchBlobSasToken(e,i.file),a=`${i.file}?${s}`;window.open(a,"_blank")};return jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-100 p-1",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs(Link,{to:`/topics/${e}/files/${i.id}`,children:[jsxRuntimeExports.jsx("div",{className:"",children:i.filename}),i.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:o,title:"Go to document",children:jsxRuntimeExports.jsx(FileSymlinkIcon$1,{})})})]})})})},ConversationPanel=({conversation:i,topicId:e,onDelete:o})=>jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-100 p-1",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs(Link,{to:`/topics/${e}/conversations/${i.id}`,children:[jsxRuntimeExports.jsxs("div",{className:"",children:[i.name,!i.messages.length&&jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:" (No messages yet)"}),i.messages.length>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:[" (last updated ",new Date(i.messages[i.messages.length-1].timestamp).toLocaleString(),")"]})]}),i.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:o,title:`Delete ${i.name}`,children:jsxRuntimeExports.jsx(DeleteIcon$1,{})})})]})})}),Panel=({children:i,title:e,actionBtn:o})=>jsxRuntimeExports.jsx("div",{className:"panel my-2 border border-1",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 p-2 text-xl border-b text-white bg-blue-900",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"title",children:e}),jsxRuntimeExports.jsx("div",{className:"btn text-sm",children:o&&jsxRuntimeExports.jsx(Link,{to:o.to,className:"p-1 rounded-sm bg-white text-blue-800 cursor-pointer hover:bg-sky-500 hover:text-white",children:o.title})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-2 overflow-x-hidden",children:i})]})}),SingleTopic=()=>{const{topicId:i}=useParams(),[e,o]=reactExports.useState(null),[s,a]=reactExports.useState([]),[c,h]=reactExports.useState([]);reactExports.useEffect(()=>{i&&(fetchConversations(i).then(_=>a(_)),fetchFiles(i).then(_=>h(_)))},[i]);const d=_=>{i&&(console.log("Delete conversation"),deleteConversation(i,_).then(b=>{console.log(b),fetchConversations(i).then(j=>a(j))}))};if(reactExports.useEffect(()=>{i&&fetchTopic(i).then(_=>o(_))},[i]),!e)return jsxRuntimeExports.jsx("div",{children:"Loading..."});const g=()=>{const _=[];s.forEach(rt=>{rt.messages.forEach(st=>{if(st.role==="user"&&st.agent==="search-assistant")return;const tt=st.role==="user"&&st.agent==="human"?st.name:"AI",nt=[];if(st.role==="assistant"){const it=/<ref.* id="([^"]*)"\/>/gi,pt=st.content.matchAll(it);for(const lt of pt)nt.push(lt[1])}_.push({Conversation:rt.name,Timestamp:'"'+new Date(st.timestamp).toLocaleString()+'"',From:tt,Content:'"'+st.content.replace(/"/g,'""').replace(/,/g,",")+'"',Resources:nt.join(",")})})});const b=["Conversation","Timestamp","From","Content","Resources"],j=b.join(",")+`
`+_.map(rt=>b.map(st=>rt[st]).join(",")).join(`
`),_e=new Blob([j],{type:"text/csv"}),$=URL.createObjectURL(_e),et=document.createElement("a");et.href=$,et.download="chat-history.csv",et.click()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"top flex-0",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl",children:e.name}),jsxRuntimeExports.jsx("h2",{className:"text-md text-gray-500",children:e.description})]}),jsxRuntimeExports.jsx("div",{className:"main flex-1",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-between",children:[jsxRuntimeExports.jsx("div",{className:" flex-1",children:jsxRuntimeExports.jsx(Panel,{title:"Files",actionBtn:{to:`/topics/${i}/files/new`,title:"Upload New File"},children:i&&c.map((_,b)=>jsxRuntimeExports.jsx(FilePanel,{file:_,topicId:i},b))})}),jsxRuntimeExports.jsx("div",{className:" flex-1",children:jsxRuntimeExports.jsxs(Panel,{title:"Conversations",actionBtn:{to:`/topics/${i}/conversations/new`,title:"Start a New Conversation"},children:[i&&s.map((_,b)=>jsxRuntimeExports.jsx(ConversationPanel,{conversation:_,onDelete:()=>d(_.id),topicId:i},b)),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-400 pt-2",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"p-1 rounded-sm bg-whiteborder border-blue-800 text-blue-800 cursor-pointer hover:bg-sky-500 hover:text-white",children:"Export chat history to Excel"})})]})})]})})]})},BackToTopic=({topicId:i})=>i?jsxRuntimeExports.jsx("div",{className:"flex-0 h-8",children:jsxRuntimeExports.jsx(Link,{to:`/topics/${i}`,children:jsxRuntimeExports.jsx("span",{className:"rounded-full bg-blue-500 text-white px-2 text-sm",children:"<Back to topic"})})}):null;function ok$2(){}function unreachable(){}function stringify$1(i,e){const o=e||{};return(i[i.length-1]===""?[...i,""]:i).join((o.padRight?" ":"")+","+(o.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$3={};function name(i,e){return((e||emptyOptions$3).jsx?nameReJsx:nameRe).test(i)}const re=/[ \t\n\f\r]/g;function whitespace(i){return typeof i=="object"?i.type==="text"?empty$1(i.value):!1:empty$1(i)}function empty$1(i){return i.replace(re,"")===""}class Schema{constructor(e,o,s){this.property=e,this.normal=o,s&&(this.space=s)}}Schema.prototype.property={};Schema.prototype.normal={};Schema.prototype.space=null;function merge(i,e){const o={},s={};let a=-1;for(;++a<i.length;)Object.assign(o,i[a].property),Object.assign(s,i[a].normal);return new Schema(o,s,e)}function normalize$1(i){return i.toLowerCase()}class Info{constructor(e,o){this.property=e,this.attribute=o}}Info.prototype.space=null;Info.prototype.boolean=!1;Info.prototype.booleanish=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.number=!1;Info.prototype.commaSeparated=!1;Info.prototype.spaceSeparated=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.mustUseProperty=!1;Info.prototype.defined=!1;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,o,s,a){let c=-1;if(super(e,o),mark(this,"space",a),typeof s=="number")for(;++c<checks.length;){const h=checks[c];mark(this,checks[c],(s&types[h])===types[h])}}}DefinedInfo.prototype.defined=!0;function mark(i,e,o){o&&(i[e]=o)}const own$4={}.hasOwnProperty;function create(i){const e={},o={};let s;for(s in i.properties)if(own$4.call(i.properties,s)){const a=i.properties[s],c=new DefinedInfo(s,i.transform(i.attributes||{},s),a,i.space);i.mustUseProperty&&i.mustUseProperty.includes(s)&&(c.mustUseProperty=!0),e[s]=c,o[normalize$1(s)]=s,o[normalize$1(c.attribute)]=s}return new Schema(e,o,i.space)}const xlink=create({space:"xlink",transform(i,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xml=create({space:"xml",transform(i,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(i,e){return e in i?i[e]:e}function caseInsensitiveTransform(i,e){return caseSensitiveTransform(i,e.toLowerCase())}const xmlns=create({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),aria=create({transform(i,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null}}),html$3=create({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:boolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null}}),svg$1=create({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),valid=/^data[-\w.:]+$/i,dash=/-[a-z]/g,cap$1=/[A-Z]/g;function find$1(i,e){const o=normalize$1(e);let s=e,a=Info;if(o in i.normal)return i.property[i.normal[o]];if(o.length>4&&o.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const c=e.slice(5).replace(dash,camelcase);s="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=e.slice(4);if(!dash.test(c)){let h=c.replace(cap$1,kebab);h.charAt(0)!=="-"&&(h="-"+h),e="data"+h}}a=DefinedInfo}return new a(s,e)}function kebab(i){return"-"+i.toLowerCase()}function camelcase(i){return i.charAt(1).toUpperCase()}const hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},html$2=merge([xml,xlink,xmlns,aria,html$3],"html"),svg=merge([xml,xlink,xmlns,aria,svg$1],"svg");function stringify(i){return i.join(" ").trim()}var cjs={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration",inlineStyleParser=function(i,e){if(typeof i!="string")throw new TypeError("First argument must be a string");if(!i)return[];e=e||{};var o=1,s=1;function a(et){var rt=et.match(NEWLINE_REGEX);rt&&(o+=rt.length);var st=et.lastIndexOf(NEWLINE);s=~st?et.length-st:s+et.length}function c(){var et={line:o,column:s};return function(rt){return rt.position=new h(et),_(),rt}}function h(et){this.start=et,this.end={line:o,column:s},this.source=e.source}h.prototype.content=i;function d(et){var rt=new Error(e.source+":"+o+":"+s+": "+et);if(rt.reason=et,rt.filename=e.source,rt.line=o,rt.column=s,rt.source=i,!e.silent)throw rt}function g(et){var rt=et.exec(i);if(rt){var st=rt[0];return a(st),i=i.slice(st.length),rt}}function _(){g(WHITESPACE_REGEX)}function b(et){var rt;for(et=et||[];rt=j();)rt!==!1&&et.push(rt);return et}function j(){var et=c();if(!(FORWARD_SLASH!=i.charAt(0)||ASTERISK!=i.charAt(1))){for(var rt=2;EMPTY_STRING!=i.charAt(rt)&&(ASTERISK!=i.charAt(rt)||FORWARD_SLASH!=i.charAt(rt+1));)++rt;if(rt+=2,EMPTY_STRING===i.charAt(rt-1))return d("End of comment missing");var st=i.slice(2,rt-2);return s+=2,a(st),i=i.slice(rt),s+=2,et({type:TYPE_COMMENT,comment:st})}}function _e(){var et=c(),rt=g(PROPERTY_REGEX);if(rt){if(j(),!g(COLON_REGEX))return d("property missing ':'");var st=g(VALUE_REGEX),tt=et({type:TYPE_DECLARATION,property:trim(rt[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:st?trim(st[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return g(SEMICOLON_REGEX),tt}}function $(){var et=[];b(et);for(var rt;rt=_e();)rt!==!1&&(et.push(rt),b(et));return et}return _(),$()};function trim(i){return i?i.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(cjs,"__esModule",{value:!0});var inline_style_parser_1=__importDefault(inlineStyleParser);function StyleToObject(i,e){var o=null;if(!i||typeof i!="string")return o;var s=(0,inline_style_parser_1.default)(i),a=typeof e=="function";return s.forEach(function(c){if(c.type==="declaration"){var h=c.property,d=c.value;a?e(h,d,c):d&&(o=o||{},o[h]=d)}}),o}var _default=cjs.default=StyleToObject;const styleToObject=_default.default||_default,pointEnd=point$2("end"),pointStart=point$2("start");function point$2(i){return e;function e(o){const s=o&&o.position&&o.position[i]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function position$1(i){const e=pointStart(i),o=pointEnd(i);if(e&&o)return{start:e,end:o}}function stringifyPosition(i){return!i||typeof i!="object"?"":"position"in i||"type"in i?position(i.position):"start"in i||"end"in i?position(i):"line"in i||"column"in i?point$1(i):""}function point$1(i){return index(i&&i.line)+":"+index(i&&i.column)}function position(i){return point$1(i&&i.start)+"-"+point$1(i&&i.end)}function index(i){return i&&typeof i=="number"?i:1}class VFileMessage extends Error{constructor(e,o,s){super(),typeof o=="string"&&(s=o,o=void 0);let a="",c={},h=!1;if(o&&("line"in o&&"column"in o?c={place:o}:"start"in o&&"end"in o?c={place:o}:"type"in o?c={ancestors:[o],place:o.position}:c={...o}),typeof e=="string"?a=e:!c.cause&&e&&(h=!0,a=e.message,c.cause=e),!c.ruleId&&!c.source&&typeof s=="string"){const g=s.indexOf(":");g===-1?c.ruleId=s:(c.source=s.slice(0,g),c.ruleId=s.slice(g+1))}if(!c.place&&c.ancestors&&c.ancestors){const g=c.ancestors[c.ancestors.length-1];g&&(c.place=g.position)}const d=c.place&&"start"in c.place?c.place.start:c.place;this.ancestors=c.ancestors||void 0,this.cause=c.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=d?d.line:void 0,this.name=stringifyPosition(c.place)||"1:1",this.place=c.place||void 0,this.reason=this.message,this.ruleId=c.ruleId||void 0,this.source=c.source||void 0,this.stack=h&&c.cause&&typeof c.cause.stack=="string"?c.cause.stack:"",this.actual,this.expected,this.note,this.url}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,dashSomething=/-([a-z])/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(i,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const o=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=developmentCreate(o,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=productionCreate(o,e.jsx,e.jsxs)}const a={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:o,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$2,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},c=one$1(a,i,void 0);return c&&typeof c!="string"?c:a.create(i,a.Fragment,{children:c||void 0},void 0)}function one$1(i,e,o){if(e.type==="element")return element$1(i,e,o);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(i,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(i,e,o);if(e.type==="mdxjsEsm")return mdxEsm(i,e);if(e.type==="root")return root$2(i,e,o);if(e.type==="text")return text$5(i,e)}function element$1(i,e,o){const s=i.schema;let a=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=svg,i.schema=a),i.ancestors.push(e);const c=findComponentFromName(i,e.tagName,!1),h=createElementProps(i,e);let d=createChildren(i,e);return tableElements.has(e.tagName)&&(d=d.filter(function(g){return typeof g=="string"?!whitespace(g):!0})),addNode(i,h,c,e),addChildren(h,d),i.ancestors.pop(),i.schema=s,i.create(e,c,h,o)}function mdxExpression(i,e){if(e.data&&e.data.estree&&i.evaluater){const s=e.data.estree.body[0];return s.type,i.evaluater.evaluateExpression(s.expression)}crashEstree(i,e.position)}function mdxEsm(i,e){if(e.data&&e.data.estree&&i.evaluater)return i.evaluater.evaluateProgram(e.data.estree);crashEstree(i,e.position)}function mdxJsxElement(i,e,o){const s=i.schema;let a=s;e.name==="svg"&&s.space==="html"&&(a=svg,i.schema=a),i.ancestors.push(e);const c=e.name===null?i.Fragment:findComponentFromName(i,e.name,!0),h=createJsxElementProps(i,e),d=createChildren(i,e);return addNode(i,h,c,e),addChildren(h,d),i.ancestors.pop(),i.schema=s,i.create(e,c,h,o)}function root$2(i,e,o){const s={};return addChildren(s,createChildren(i,e)),i.create(e,i.Fragment,s,o)}function text$5(i,e){return e.value}function addNode(i,e,o,s){typeof o!="string"&&o!==i.Fragment&&i.passNode&&(e.node=s)}function addChildren(i,e){if(e.length>0){const o=e.length>1?e:e[0];o&&(i.children=o)}}function productionCreate(i,e,o){return s;function s(a,c,h,d){const _=Array.isArray(h.children)?o:e;return d?_(c,h,d):_(c,h)}}function developmentCreate(i,e){return o;function o(s,a,c,h){const d=Array.isArray(c.children),g=pointStart(s);return e(a,c,h,d,{columnNumber:g?g.column-1:void 0,fileName:i,lineNumber:g?g.line:void 0},void 0)}}function createElementProps(i,e){const o={};let s,a;for(a in e.properties)if(a!=="children"&&own$3.call(e.properties,a)){const c=createProperty(i,a,e.properties[a]);if(c){const[h,d]=c;i.tableCellAlignToStyle&&h==="align"&&typeof d=="string"&&tableCellElement.has(e.tagName)?s=d:o[h]=d}}if(s){const c=o.style||(o.style={});c[i.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return o}function createJsxElementProps(i,e){const o={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&i.evaluater){const c=s.data.estree.body[0];c.type;const h=c.expression;h.type;const d=h.properties[0];d.type,Object.assign(o,i.evaluater.evaluateExpression(d.argument))}else crashEstree(i,e.position);else{const a=s.name;let c;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&i.evaluater){const d=s.value.data.estree.body[0];d.type,c=i.evaluater.evaluateExpression(d.expression)}else crashEstree(i,e.position);else c=s.value===null?!0:s.value;o[a]=c}return o}function createChildren(i,e){const o=[];let s=-1;const a=i.passKeys?new Map:emptyMap;for(;++s<e.children.length;){const c=e.children[s];let h;if(i.passKeys){const g=c.type==="element"?c.tagName:c.type==="mdxJsxFlowElement"||c.type==="mdxJsxTextElement"?c.name:void 0;if(g){const _=a.get(g)||0;h=g+"-"+_,a.set(g,_+1)}}const d=one$1(i,c,h);d!==void 0&&o.push(d)}return o}function createProperty(i,e,o){const s=find$1(i.schema,e);if(!(o==null||typeof o=="number"&&Number.isNaN(o))){if(Array.isArray(o)&&(o=s.commaSeparated?stringify$1(o):stringify(o)),s.property==="style"){let a=typeof o=="object"?o:parseStyle(i,String(o));return i.stylePropertyNameCase==="css"&&(a=transformStylesToCssCasing(a)),["style",a]}return[i.elementAttributeNameCase==="react"&&s.space?hastToReact[s.property]||s.property:s.attribute,o]}}function parseStyle(i,e){const o={};try{styleToObject(e,s)}catch(a){if(!i.ignoreInvalidStyle){const c=a,h=new VFileMessage("Cannot parse `style` attribute",{ancestors:i.ancestors,cause:c,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw h.file=i.filePath||void 0,h.url=docs+"#cannot-parse-style-attribute",h}}return o;function s(a,c){let h=a;h.slice(0,2)!=="--"&&(h.slice(0,4)==="-ms-"&&(h="ms-"+h.slice(4)),h=h.replace(dashSomething,toCamel)),o[h]=c}}function findComponentFromName(i,e,o){let s;if(!o)s={type:"Literal",value:e};else if(e.includes(".")){const a=e.split(".");let c=-1,h;for(;++c<a.length;){const d=name(a[c])?{type:"Identifier",name:a[c]}:{type:"Literal",value:a[c]};h=h?{type:"MemberExpression",object:h,property:d,computed:!!(c&&d.type==="Literal"),optional:!1}:d}s=h}else s=name(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const a=s.value;return own$3.call(i.components,a)?i.components[a]:a}if(i.evaluater)return i.evaluater.evaluateExpression(s);crashEstree(i)}function crashEstree(i,e){const o=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:i.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw o.file=i.filePath||void 0,o.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",o}function transformStylesToCssCasing(i){const e={};let o;for(o in i)own$3.call(i,o)&&(e[transformStyleToCssCasing(o)]=i[o]);return e}function transformStyleToCssCasing(i){let e=i.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toCamel(i,e){return e.toUpperCase()}function toDash(i){return"-"+i.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$2={};function toString$1(i,e){const o=e||emptyOptions$2,s=typeof o.includeImageAlt=="boolean"?o.includeImageAlt:!0,a=typeof o.includeHtml=="boolean"?o.includeHtml:!0;return one(i,s,a)}function one(i,e,o){if(node(i)){if("value"in i)return i.type==="html"&&!o?"":i.value;if(e&&"alt"in i&&i.alt)return i.alt;if("children"in i)return all(i.children,e,o)}return Array.isArray(i)?all(i,e,o):""}function all(i,e,o){const s=[];let a=-1;for(;++a<i.length;)s[a]=one(i[a],e,o);return s.join("")}function node(i){return!!(i&&typeof i=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(i){const e="&"+i+";";element.innerHTML=e;const o=element.textContent;return o.charCodeAt(o.length-1)===59&&i!=="semi"||o===e?!1:o}function splice(i,e,o,s){const a=i.length;let c=0,h;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,o=o>0?o:0,s.length<1e4)h=Array.from(s),h.unshift(e,o),i.splice(...h);else for(o&&i.splice(e,o);c<s.length;)h=s.slice(c,c+1e4),h.unshift(e,0),i.splice(...h),c+=1e4,e+=1e4}function push(i,e){return i.length>0?(splice(i,i.length,0,e),i):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(i){const e={};let o=-1;for(;++o<i.length;)syntaxExtension(e,i[o]);return e}function syntaxExtension(i,e){let o;for(o in e){const a=(hasOwnProperty.call(i,o)?i[o]:void 0)||(i[o]={}),c=e[o];let h;if(c)for(h in c){hasOwnProperty.call(a,h)||(a[h]=[]);const d=c[h];constructs(a[h],Array.isArray(d)?d:d?[d]:[])}}}function constructs(i,e){let o=-1;const s=[];for(;++o<e.length;)(e[o].add==="after"?i:s).push(e[o]);splice(i,0,0,s)}function decodeNumericCharacterReference(i,e){const o=Number.parseInt(i,e);return o<9||o===11||o>13&&o<32||o>126&&o<160||o>55295&&o<57344||o>64975&&o<65008||(o&65535)===65535||(o&65535)===65534||o>1114111?"":String.fromCodePoint(o)}function normalizeIdentifier(i){return i.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(i){return i!==null&&(i<32||i===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(i){return i!==null&&i<-2}function markdownLineEndingOrSpace(i){return i!==null&&(i<0||i===32)}function markdownSpace(i){return i===-2||i===-1||i===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(i){return e;function e(o){return o!==null&&o>-1&&i.test(String.fromCharCode(o))}}function normalizeUri(i){const e=[];let o=-1,s=0,a=0;for(;++o<i.length;){const c=i.charCodeAt(o);let h="";if(c===37&&asciiAlphanumeric(i.charCodeAt(o+1))&&asciiAlphanumeric(i.charCodeAt(o+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(h=String.fromCharCode(c));else if(c>55295&&c<57344){const d=i.charCodeAt(o+1);c<56320&&d>56319&&d<57344?(h=String.fromCharCode(c,d),a=1):h=""}else h=String.fromCharCode(c);h&&(e.push(i.slice(s,o),encodeURIComponent(h)),s=o+a+1,h=""),a&&(o+=a,a=0)}return e.join("")+i.slice(s)}function factorySpace(i,e,o,s){const a=s?s-1:Number.POSITIVE_INFINITY;let c=0;return h;function h(g){return markdownSpace(g)?(i.enter(o),d(g)):e(g)}function d(g){return markdownSpace(g)&&c++<a?(i.consume(g),d):(i.exit(o),e(g))}}const content$1={tokenize:initializeContent};function initializeContent(i){const e=i.attempt(this.parser.constructs.contentInitial,s,a);let o;return e;function s(d){if(d===null){i.consume(d);return}return i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),factorySpace(i,e,"linePrefix")}function a(d){return i.enter("paragraph"),c(d)}function c(d){const g=i.enter("chunkText",{contentType:"text",previous:o});return o&&(o.next=g),o=g,h(d)}function h(d){if(d===null){i.exit("chunkText"),i.exit("paragraph"),i.consume(d);return}return markdownLineEnding(d)?(i.consume(d),i.exit("chunkText"),c):(i.consume(d),h)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(i){const e=this,o=[];let s=0,a,c,h;return d;function d(it){if(s<o.length){const pt=o[s];return e.containerState=pt[1],i.attempt(pt[0].continuation,g,_)(it)}return _(it)}function g(it){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&nt();const pt=e.events.length;let lt=pt,at;for(;lt--;)if(e.events[lt][0]==="exit"&&e.events[lt][1].type==="chunkFlow"){at=e.events[lt][1].end;break}tt(s);let At=pt;for(;At<e.events.length;)e.events[At][1].end=Object.assign({},at),At++;return splice(e.events,lt+1,0,e.events.slice(pt)),e.events.length=At,_(it)}return d(it)}function _(it){if(s===o.length){if(!a)return _e(it);if(a.currentConstruct&&a.currentConstruct.concrete)return et(it);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},i.check(containerConstruct,b,j)(it)}function b(it){return a&&nt(),tt(s),_e(it)}function j(it){return e.parser.lazy[e.now().line]=s!==o.length,h=e.now().offset,et(it)}function _e(it){return e.containerState={},i.attempt(containerConstruct,$,et)(it)}function $(it){return s++,o.push([e.currentConstruct,e.containerState]),_e(it)}function et(it){if(it===null){a&&nt(),tt(0),i.consume(it);return}return a=a||e.parser.flow(e.now()),i.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),rt(it)}function rt(it){if(it===null){st(i.exit("chunkFlow"),!0),tt(0),i.consume(it);return}return markdownLineEnding(it)?(i.consume(it),st(i.exit("chunkFlow")),s=0,e.interrupt=void 0,d):(i.consume(it),rt)}function st(it,pt){const lt=e.sliceStream(it);if(pt&&lt.push(null),it.previous=c,c&&(c.next=it),c=it,a.defineSkip(it.start),a.write(lt),e.parser.lazy[it.start.line]){let at=a.events.length;for(;at--;)if(a.events[at][1].start.offset<h&&(!a.events[at][1].end||a.events[at][1].end.offset>h))return;const At=e.events.length;let vt=At,ft,mt;for(;vt--;)if(e.events[vt][0]==="exit"&&e.events[vt][1].type==="chunkFlow"){if(ft){mt=e.events[vt][1].end;break}ft=!0}for(tt(s),at=At;at<e.events.length;)e.events[at][1].end=Object.assign({},mt),at++;splice(e.events,vt+1,0,e.events.slice(At)),e.events.length=at}}function tt(it){let pt=o.length;for(;pt-- >it;){const lt=o[pt];e.containerState=lt[1],lt[0].exit.call(e,i)}o.length=it}function nt(){a.write([null]),c=void 0,a=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(i,e,o){return factorySpace(i,i.attempt(this.parser.constructs.document,e,o),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(i){if(i===null||markdownLineEndingOrSpace(i)||unicodeWhitespace(i))return 1;if(unicodePunctuation(i))return 2}function resolveAll(i,e,o){const s=[];let a=-1;for(;++a<i.length;){const c=i[a].resolveAll;c&&!s.includes(c)&&(e=c(e,o),s.push(c))}return e}const attention={name:"attention",tokenize:tokenizeAttention,resolveAll:resolveAllAttention};function resolveAllAttention(i,e){let o=-1,s,a,c,h,d,g,_,b;for(;++o<i.length;)if(i[o][0]==="enter"&&i[o][1].type==="attentionSequence"&&i[o][1]._close){for(s=o;s--;)if(i[s][0]==="exit"&&i[s][1].type==="attentionSequence"&&i[s][1]._open&&e.sliceSerialize(i[s][1]).charCodeAt(0)===e.sliceSerialize(i[o][1]).charCodeAt(0)){if((i[s][1]._close||i[o][1]._open)&&(i[o][1].end.offset-i[o][1].start.offset)%3&&!((i[s][1].end.offset-i[s][1].start.offset+i[o][1].end.offset-i[o][1].start.offset)%3))continue;g=i[s][1].end.offset-i[s][1].start.offset>1&&i[o][1].end.offset-i[o][1].start.offset>1?2:1;const j=Object.assign({},i[s][1].end),_e=Object.assign({},i[o][1].start);movePoint(j,-g),movePoint(_e,g),h={type:g>1?"strongSequence":"emphasisSequence",start:j,end:Object.assign({},i[s][1].end)},d={type:g>1?"strongSequence":"emphasisSequence",start:Object.assign({},i[o][1].start),end:_e},c={type:g>1?"strongText":"emphasisText",start:Object.assign({},i[s][1].end),end:Object.assign({},i[o][1].start)},a={type:g>1?"strong":"emphasis",start:Object.assign({},h.start),end:Object.assign({},d.end)},i[s][1].end=Object.assign({},h.start),i[o][1].start=Object.assign({},d.end),_=[],i[s][1].end.offset-i[s][1].start.offset&&(_=push(_,[["enter",i[s][1],e],["exit",i[s][1],e]])),_=push(_,[["enter",a,e],["enter",h,e],["exit",h,e],["enter",c,e]]),_=push(_,resolveAll(e.parser.constructs.insideSpan.null,i.slice(s+1,o),e)),_=push(_,[["exit",c,e],["enter",d,e],["exit",d,e],["exit",a,e]]),i[o][1].end.offset-i[o][1].start.offset?(b=2,_=push(_,[["enter",i[o][1],e],["exit",i[o][1],e]])):b=0,splice(i,s-1,o-s+3,_),o=s+_.length-b-2;break}}for(o=-1;++o<i.length;)i[o][1].type==="attentionSequence"&&(i[o][1].type="data");return i}function tokenizeAttention(i,e){const o=this.parser.constructs.attentionMarkers.null,s=this.previous,a=classifyCharacter(s);let c;return h;function h(g){return c=g,i.enter("attentionSequence"),d(g)}function d(g){if(g===c)return i.consume(g),d;const _=i.exit("attentionSequence"),b=classifyCharacter(g),j=!b||b===2&&a||o.includes(g),_e=!a||a===2&&b||o.includes(s);return _._open=!!(c===42?j:j&&(a||!_e)),_._close=!!(c===42?_e:_e&&(b||!j)),e(g)}}function movePoint(i,e){i.column+=e,i.offset+=e,i._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(i,e,o){let s=0;return a;function a($){return i.enter("autolink"),i.enter("autolinkMarker"),i.consume($),i.exit("autolinkMarker"),i.enter("autolinkProtocol"),c}function c($){return asciiAlpha($)?(i.consume($),h):_($)}function h($){return $===43||$===45||$===46||asciiAlphanumeric($)?(s=1,d($)):_($)}function d($){return $===58?(i.consume($),s=0,g):($===43||$===45||$===46||asciiAlphanumeric($))&&s++<32?(i.consume($),d):(s=0,_($))}function g($){return $===62?(i.exit("autolinkProtocol"),i.enter("autolinkMarker"),i.consume($),i.exit("autolinkMarker"),i.exit("autolink"),e):$===null||$===32||$===60||asciiControl($)?o($):(i.consume($),g)}function _($){return $===64?(i.consume($),b):asciiAtext($)?(i.consume($),_):o($)}function b($){return asciiAlphanumeric($)?j($):o($)}function j($){return $===46?(i.consume($),s=0,b):$===62?(i.exit("autolinkProtocol").type="autolinkEmail",i.enter("autolinkMarker"),i.consume($),i.exit("autolinkMarker"),i.exit("autolink"),e):_e($)}function _e($){if(($===45||asciiAlphanumeric($))&&s++<63){const et=$===45?_e:j;return i.consume($),et}return o($)}}const blankLine={tokenize:tokenizeBlankLine,partial:!0};function tokenizeBlankLine(i,e,o){return s;function s(c){return markdownSpace(c)?factorySpace(i,a,"linePrefix")(c):a(c)}function a(c){return c===null||markdownLineEnding(c)?e(c):o(c)}}const blockQuote={name:"blockQuote",tokenize:tokenizeBlockQuoteStart,continuation:{tokenize:tokenizeBlockQuoteContinuation},exit:exit$1};function tokenizeBlockQuoteStart(i,e,o){const s=this;return a;function a(h){if(h===62){const d=s.containerState;return d.open||(i.enter("blockQuote",{_container:!0}),d.open=!0),i.enter("blockQuotePrefix"),i.enter("blockQuoteMarker"),i.consume(h),i.exit("blockQuoteMarker"),c}return o(h)}function c(h){return markdownSpace(h)?(i.enter("blockQuotePrefixWhitespace"),i.consume(h),i.exit("blockQuotePrefixWhitespace"),i.exit("blockQuotePrefix"),e):(i.exit("blockQuotePrefix"),e(h))}}function tokenizeBlockQuoteContinuation(i,e,o){const s=this;return a;function a(h){return markdownSpace(h)?factorySpace(i,c,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h):c(h)}function c(h){return i.attempt(blockQuote,e,o)(h)}}function exit$1(i){i.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(i,e,o){return s;function s(c){return i.enter("characterEscape"),i.enter("escapeMarker"),i.consume(c),i.exit("escapeMarker"),a}function a(c){return asciiPunctuation(c)?(i.enter("characterEscapeValue"),i.consume(c),i.exit("characterEscapeValue"),i.exit("characterEscape"),e):o(c)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(i,e,o){const s=this;let a=0,c,h;return d;function d(j){return i.enter("characterReference"),i.enter("characterReferenceMarker"),i.consume(j),i.exit("characterReferenceMarker"),g}function g(j){return j===35?(i.enter("characterReferenceMarkerNumeric"),i.consume(j),i.exit("characterReferenceMarkerNumeric"),_):(i.enter("characterReferenceValue"),c=31,h=asciiAlphanumeric,b(j))}function _(j){return j===88||j===120?(i.enter("characterReferenceMarkerHexadecimal"),i.consume(j),i.exit("characterReferenceMarkerHexadecimal"),i.enter("characterReferenceValue"),c=6,h=asciiHexDigit,b):(i.enter("characterReferenceValue"),c=7,h=asciiDigit,b(j))}function b(j){if(j===59&&a){const _e=i.exit("characterReferenceValue");return h===asciiAlphanumeric&&!decodeNamedCharacterReference(s.sliceSerialize(_e))?o(j):(i.enter("characterReferenceMarker"),i.consume(j),i.exit("characterReferenceMarker"),i.exit("characterReference"),e)}return h(j)&&a++<c?(i.consume(j),b):o(j)}}const nonLazyContinuation={tokenize:tokenizeNonLazyContinuation,partial:!0},codeFenced={name:"codeFenced",tokenize:tokenizeCodeFenced,concrete:!0};function tokenizeCodeFenced(i,e,o){const s=this,a={tokenize:lt,partial:!0};let c=0,h=0,d;return g;function g(at){return _(at)}function _(at){const At=s.events[s.events.length-1];return c=At&&At[1].type==="linePrefix"?At[2].sliceSerialize(At[1],!0).length:0,d=at,i.enter("codeFenced"),i.enter("codeFencedFence"),i.enter("codeFencedFenceSequence"),b(at)}function b(at){return at===d?(h++,i.consume(at),b):h<3?o(at):(i.exit("codeFencedFenceSequence"),markdownSpace(at)?factorySpace(i,j,"whitespace")(at):j(at))}function j(at){return at===null||markdownLineEnding(at)?(i.exit("codeFencedFence"),s.interrupt?e(at):i.check(nonLazyContinuation,rt,pt)(at)):(i.enter("codeFencedFenceInfo"),i.enter("chunkString",{contentType:"string"}),_e(at))}function _e(at){return at===null||markdownLineEnding(at)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),j(at)):markdownSpace(at)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),factorySpace(i,$,"whitespace")(at)):at===96&&at===d?o(at):(i.consume(at),_e)}function $(at){return at===null||markdownLineEnding(at)?j(at):(i.enter("codeFencedFenceMeta"),i.enter("chunkString",{contentType:"string"}),et(at))}function et(at){return at===null||markdownLineEnding(at)?(i.exit("chunkString"),i.exit("codeFencedFenceMeta"),j(at)):at===96&&at===d?o(at):(i.consume(at),et)}function rt(at){return i.attempt(a,pt,st)(at)}function st(at){return i.enter("lineEnding"),i.consume(at),i.exit("lineEnding"),tt}function tt(at){return c>0&&markdownSpace(at)?factorySpace(i,nt,"linePrefix",c+1)(at):nt(at)}function nt(at){return at===null||markdownLineEnding(at)?i.check(nonLazyContinuation,rt,pt)(at):(i.enter("codeFlowValue"),it(at))}function it(at){return at===null||markdownLineEnding(at)?(i.exit("codeFlowValue"),nt(at)):(i.consume(at),it)}function pt(at){return i.exit("codeFenced"),e(at)}function lt(at,At,vt){let ft=0;return mt;function mt(Lt){return at.enter("lineEnding"),at.consume(Lt),at.exit("lineEnding"),yt}function yt(Lt){return at.enter("codeFencedFence"),markdownSpace(Lt)?factorySpace(at,bt,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Lt):bt(Lt)}function bt(Lt){return Lt===d?(at.enter("codeFencedFenceSequence"),Mt(Lt)):vt(Lt)}function Mt(Lt){return Lt===d?(ft++,at.consume(Lt),Mt):ft>=h?(at.exit("codeFencedFenceSequence"),markdownSpace(Lt)?factorySpace(at,Tt,"whitespace")(Lt):Tt(Lt)):vt(Lt)}function Tt(Lt){return Lt===null||markdownLineEnding(Lt)?(at.exit("codeFencedFence"),At(Lt)):vt(Lt)}}}function tokenizeNonLazyContinuation(i,e,o){const s=this;return a;function a(h){return h===null?o(h):(i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),c)}function c(h){return s.parser.lazy[s.now().line]?o(h):e(h)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={tokenize:tokenizeFurtherStart,partial:!0};function tokenizeCodeIndented(i,e,o){const s=this;return a;function a(_){return i.enter("codeIndented"),factorySpace(i,c,"linePrefix",5)(_)}function c(_){const b=s.events[s.events.length-1];return b&&b[1].type==="linePrefix"&&b[2].sliceSerialize(b[1],!0).length>=4?h(_):o(_)}function h(_){return _===null?g(_):markdownLineEnding(_)?i.attempt(furtherStart,h,g)(_):(i.enter("codeFlowValue"),d(_))}function d(_){return _===null||markdownLineEnding(_)?(i.exit("codeFlowValue"),h(_)):(i.consume(_),d)}function g(_){return i.exit("codeIndented"),e(_)}}function tokenizeFurtherStart(i,e,o){const s=this;return a;function a(h){return s.parser.lazy[s.now().line]?o(h):markdownLineEnding(h)?(i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),a):factorySpace(i,c,"linePrefix",5)(h)}function c(h){const d=s.events[s.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(h):markdownLineEnding(h)?a(h):o(h)}}const codeText={name:"codeText",tokenize:tokenizeCodeText,resolve:resolveCodeText,previous:previous$1};function resolveCodeText(i){let e=i.length-4,o=3,s,a;if((i[o][1].type==="lineEnding"||i[o][1].type==="space")&&(i[e][1].type==="lineEnding"||i[e][1].type==="space")){for(s=o;++s<e;)if(i[s][1].type==="codeTextData"){i[o][1].type="codeTextPadding",i[e][1].type="codeTextPadding",o+=2,e-=2;break}}for(s=o-1,e++;++s<=e;)a===void 0?s!==e&&i[s][1].type!=="lineEnding"&&(a=s):(s===e||i[s][1].type==="lineEnding")&&(i[a][1].type="codeTextData",s!==a+2&&(i[a][1].end=i[s-1][1].end,i.splice(a+2,s-a-2),e-=s-a-2,s=a+2),a=void 0);return i}function previous$1(i){return i!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(i,e,o){let s=0,a,c;return h;function h(j){return i.enter("codeText"),i.enter("codeTextSequence"),d(j)}function d(j){return j===96?(i.consume(j),s++,d):(i.exit("codeTextSequence"),g(j))}function g(j){return j===null?o(j):j===32?(i.enter("space"),i.consume(j),i.exit("space"),g):j===96?(c=i.enter("codeTextSequence"),a=0,b(j)):markdownLineEnding(j)?(i.enter("lineEnding"),i.consume(j),i.exit("lineEnding"),g):(i.enter("codeTextData"),_(j))}function _(j){return j===null||j===32||j===96||markdownLineEnding(j)?(i.exit("codeTextData"),g(j)):(i.consume(j),_)}function b(j){return j===96?(i.consume(j),a++,b):a===s?(i.exit("codeTextSequence"),i.exit("codeText"),e(j)):(c.type="codeTextData",_(j))}}function subtokenize(i){const e={};let o=-1,s,a,c,h,d,g,_;for(;++o<i.length;){for(;o in e;)o=e[o];if(s=i[o],o&&s[1].type==="chunkFlow"&&i[o-1][1].type==="listItemPrefix"&&(g=s[1]._tokenizer.events,c=0,c<g.length&&g[c][1].type==="lineEndingBlank"&&(c+=2),c<g.length&&g[c][1].type==="content"))for(;++c<g.length&&g[c][1].type!=="content";)g[c][1].type==="chunkText"&&(g[c][1]._isInFirstContentOfListItem=!0,c++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,subcontent(i,o)),o=e[o],_=!0);else if(s[1]._container){for(c=o,a=void 0;c--&&(h=i[c],h[1].type==="lineEnding"||h[1].type==="lineEndingBlank");)h[0]==="enter"&&(a&&(i[a][1].type="lineEndingBlank"),h[1].type="lineEnding",a=c);a&&(s[1].end=Object.assign({},i[a][1].start),d=i.slice(a,o),d.unshift(s),splice(i,a,o-a+1,d))}}return!_}function subcontent(i,e){const o=i[e][1],s=i[e][2];let a=e-1;const c=[],h=o._tokenizer||s.parser[o.contentType](o.start),d=h.events,g=[],_={};let b,j,_e=-1,$=o,et=0,rt=0;const st=[rt];for(;$;){for(;i[++a][1]!==$;);c.push(a),$._tokenizer||(b=s.sliceStream($),$.next||b.push(null),j&&h.defineSkip($.start),$._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=!0),h.write(b),$._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=void 0)),j=$,$=$.next}for($=o;++_e<d.length;)d[_e][0]==="exit"&&d[_e-1][0]==="enter"&&d[_e][1].type===d[_e-1][1].type&&d[_e][1].start.line!==d[_e][1].end.line&&(rt=_e+1,st.push(rt),$._tokenizer=void 0,$.previous=void 0,$=$.next);for(h.events=[],$?($._tokenizer=void 0,$.previous=void 0):st.pop(),_e=st.length;_e--;){const tt=d.slice(st[_e],st[_e+1]),nt=c.pop();g.unshift([nt,nt+tt.length-1]),splice(i,nt,2,tt)}for(_e=-1;++_e<g.length;)_[et+g[_e][0]]=et+g[_e][1],et+=g[_e][1]-g[_e][0]-1;return _}const content={tokenize:tokenizeContent,resolve:resolveContent},continuationConstruct={tokenize:tokenizeContinuation,partial:!0};function resolveContent(i){return subtokenize(i),i}function tokenizeContent(i,e){let o;return s;function s(d){return i.enter("content"),o=i.enter("chunkContent",{contentType:"content"}),a(d)}function a(d){return d===null?c(d):markdownLineEnding(d)?i.check(continuationConstruct,h,c)(d):(i.consume(d),a)}function c(d){return i.exit("chunkContent"),i.exit("content"),e(d)}function h(d){return i.consume(d),i.exit("chunkContent"),o.next=i.enter("chunkContent",{contentType:"content",previous:o}),o=o.next,a}}function tokenizeContinuation(i,e,o){const s=this;return a;function a(h){return i.exit("chunkContent"),i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),factorySpace(i,c,"linePrefix")}function c(h){if(h===null||markdownLineEnding(h))return o(h);const d=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(h):i.interrupt(s.parser.constructs.flow,o,e)(h)}}function factoryDestination(i,e,o,s,a,c,h,d,g){const _=g||Number.POSITIVE_INFINITY;let b=0;return j;function j(tt){return tt===60?(i.enter(s),i.enter(a),i.enter(c),i.consume(tt),i.exit(c),_e):tt===null||tt===32||tt===41||asciiControl(tt)?o(tt):(i.enter(s),i.enter(h),i.enter(d),i.enter("chunkString",{contentType:"string"}),rt(tt))}function _e(tt){return tt===62?(i.enter(c),i.consume(tt),i.exit(c),i.exit(a),i.exit(s),e):(i.enter(d),i.enter("chunkString",{contentType:"string"}),$(tt))}function $(tt){return tt===62?(i.exit("chunkString"),i.exit(d),_e(tt)):tt===null||tt===60||markdownLineEnding(tt)?o(tt):(i.consume(tt),tt===92?et:$)}function et(tt){return tt===60||tt===62||tt===92?(i.consume(tt),$):$(tt)}function rt(tt){return!b&&(tt===null||tt===41||markdownLineEndingOrSpace(tt))?(i.exit("chunkString"),i.exit(d),i.exit(h),i.exit(s),e(tt)):b<_&&tt===40?(i.consume(tt),b++,rt):tt===41?(i.consume(tt),b--,rt):tt===null||tt===32||tt===40||asciiControl(tt)?o(tt):(i.consume(tt),tt===92?st:rt)}function st(tt){return tt===40||tt===41||tt===92?(i.consume(tt),rt):rt(tt)}}function factoryLabel(i,e,o,s,a,c){const h=this;let d=0,g;return _;function _($){return i.enter(s),i.enter(a),i.consume($),i.exit(a),i.enter(c),b}function b($){return d>999||$===null||$===91||$===93&&!g||$===94&&!d&&"_hiddenFootnoteSupport"in h.parser.constructs?o($):$===93?(i.exit(c),i.enter(a),i.consume($),i.exit(a),i.exit(s),e):markdownLineEnding($)?(i.enter("lineEnding"),i.consume($),i.exit("lineEnding"),b):(i.enter("chunkString",{contentType:"string"}),j($))}function j($){return $===null||$===91||$===93||markdownLineEnding($)||d++>999?(i.exit("chunkString"),b($)):(i.consume($),g||(g=!markdownSpace($)),$===92?_e:j)}function _e($){return $===91||$===92||$===93?(i.consume($),d++,j):j($)}}function factoryTitle(i,e,o,s,a,c){let h;return d;function d(_e){return _e===34||_e===39||_e===40?(i.enter(s),i.enter(a),i.consume(_e),i.exit(a),h=_e===40?41:_e,g):o(_e)}function g(_e){return _e===h?(i.enter(a),i.consume(_e),i.exit(a),i.exit(s),e):(i.enter(c),_(_e))}function _(_e){return _e===h?(i.exit(c),g(h)):_e===null?o(_e):markdownLineEnding(_e)?(i.enter("lineEnding"),i.consume(_e),i.exit("lineEnding"),factorySpace(i,_,"linePrefix")):(i.enter("chunkString",{contentType:"string"}),b(_e))}function b(_e){return _e===h||_e===null||markdownLineEnding(_e)?(i.exit("chunkString"),_(_e)):(i.consume(_e),_e===92?j:b)}function j(_e){return _e===h||_e===92?(i.consume(_e),b):b(_e)}}function factoryWhitespace(i,e){let o;return s;function s(a){return markdownLineEnding(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),o=!0,s):markdownSpace(a)?factorySpace(i,s,o?"linePrefix":"lineSuffix")(a):e(a)}}const definition$1={name:"definition",tokenize:tokenizeDefinition},titleBefore={tokenize:tokenizeTitleBefore,partial:!0};function tokenizeDefinition(i,e,o){const s=this;let a;return c;function c($){return i.enter("definition"),h($)}function h($){return factoryLabel.call(s,i,d,o,"definitionLabel","definitionLabelMarker","definitionLabelString")($)}function d($){return a=normalizeIdentifier(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),$===58?(i.enter("definitionMarker"),i.consume($),i.exit("definitionMarker"),g):o($)}function g($){return markdownLineEndingOrSpace($)?factoryWhitespace(i,_)($):_($)}function _($){return factoryDestination(i,b,o,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")($)}function b($){return i.attempt(titleBefore,j,j)($)}function j($){return markdownSpace($)?factorySpace(i,_e,"whitespace")($):_e($)}function _e($){return $===null||markdownLineEnding($)?(i.exit("definition"),s.parser.defined.push(a),e($)):o($)}}function tokenizeTitleBefore(i,e,o){return s;function s(d){return markdownLineEndingOrSpace(d)?factoryWhitespace(i,a)(d):o(d)}function a(d){return factoryTitle(i,c,o,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function c(d){return markdownSpace(d)?factorySpace(i,h,"whitespace")(d):h(d)}function h(d){return d===null||markdownLineEnding(d)?e(d):o(d)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(i,e,o){return s;function s(c){return i.enter("hardBreakEscape"),i.consume(c),a}function a(c){return markdownLineEnding(c)?(i.exit("hardBreakEscape"),e(c)):o(c)}}const headingAtx={name:"headingAtx",tokenize:tokenizeHeadingAtx,resolve:resolveHeadingAtx};function resolveHeadingAtx(i,e){let o=i.length-2,s=3,a,c;return i[s][1].type==="whitespace"&&(s+=2),o-2>s&&i[o][1].type==="whitespace"&&(o-=2),i[o][1].type==="atxHeadingSequence"&&(s===o-1||o-4>s&&i[o-2][1].type==="whitespace")&&(o-=s+1===o?2:4),o>s&&(a={type:"atxHeadingText",start:i[s][1].start,end:i[o][1].end},c={type:"chunkText",start:i[s][1].start,end:i[o][1].end,contentType:"text"},splice(i,s,o-s+1,[["enter",a,e],["enter",c,e],["exit",c,e],["exit",a,e]])),i}function tokenizeHeadingAtx(i,e,o){let s=0;return a;function a(b){return i.enter("atxHeading"),c(b)}function c(b){return i.enter("atxHeadingSequence"),h(b)}function h(b){return b===35&&s++<6?(i.consume(b),h):b===null||markdownLineEndingOrSpace(b)?(i.exit("atxHeadingSequence"),d(b)):o(b)}function d(b){return b===35?(i.enter("atxHeadingSequence"),g(b)):b===null||markdownLineEnding(b)?(i.exit("atxHeading"),e(b)):markdownSpace(b)?factorySpace(i,d,"whitespace")(b):(i.enter("atxHeadingText"),_(b))}function g(b){return b===35?(i.consume(b),g):(i.exit("atxHeadingSequence"),d(b))}function _(b){return b===null||b===35||markdownLineEndingOrSpace(b)?(i.exit("atxHeadingText"),d(b)):(i.consume(b),_)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={name:"htmlFlow",tokenize:tokenizeHtmlFlow,resolveTo:resolveToHtmlFlow,concrete:!0},blankLineBefore={tokenize:tokenizeBlankLineBefore,partial:!0},nonLazyContinuationStart={tokenize:tokenizeNonLazyContinuationStart,partial:!0};function resolveToHtmlFlow(i){let e=i.length;for(;e--&&!(i[e][0]==="enter"&&i[e][1].type==="htmlFlow"););return e>1&&i[e-2][1].type==="linePrefix"&&(i[e][1].start=i[e-2][1].start,i[e+1][1].start=i[e-2][1].start,i.splice(e-2,2)),i}function tokenizeHtmlFlow(i,e,o){const s=this;let a,c,h,d,g;return _;function _(dt){return b(dt)}function b(dt){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(dt),j}function j(dt){return dt===33?(i.consume(dt),_e):dt===47?(i.consume(dt),c=!0,rt):dt===63?(i.consume(dt),a=3,s.interrupt?e:St):asciiAlpha(dt)?(i.consume(dt),h=String.fromCharCode(dt),st):o(dt)}function _e(dt){return dt===45?(i.consume(dt),a=2,$):dt===91?(i.consume(dt),a=5,d=0,et):asciiAlpha(dt)?(i.consume(dt),a=4,s.interrupt?e:St):o(dt)}function $(dt){return dt===45?(i.consume(dt),s.interrupt?e:St):o(dt)}function et(dt){const ct="CDATA[";return dt===ct.charCodeAt(d++)?(i.consume(dt),d===ct.length?s.interrupt?e:bt:et):o(dt)}function rt(dt){return asciiAlpha(dt)?(i.consume(dt),h=String.fromCharCode(dt),st):o(dt)}function st(dt){if(dt===null||dt===47||dt===62||markdownLineEndingOrSpace(dt)){const ct=dt===47,gt=h.toLowerCase();return!ct&&!c&&htmlRawNames.includes(gt)?(a=1,s.interrupt?e(dt):bt(dt)):htmlBlockNames.includes(h.toLowerCase())?(a=6,ct?(i.consume(dt),tt):s.interrupt?e(dt):bt(dt)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?o(dt):c?nt(dt):it(dt))}return dt===45||asciiAlphanumeric(dt)?(i.consume(dt),h+=String.fromCharCode(dt),st):o(dt)}function tt(dt){return dt===62?(i.consume(dt),s.interrupt?e:bt):o(dt)}function nt(dt){return markdownSpace(dt)?(i.consume(dt),nt):mt(dt)}function it(dt){return dt===47?(i.consume(dt),mt):dt===58||dt===95||asciiAlpha(dt)?(i.consume(dt),pt):markdownSpace(dt)?(i.consume(dt),it):mt(dt)}function pt(dt){return dt===45||dt===46||dt===58||dt===95||asciiAlphanumeric(dt)?(i.consume(dt),pt):lt(dt)}function lt(dt){return dt===61?(i.consume(dt),at):markdownSpace(dt)?(i.consume(dt),lt):it(dt)}function at(dt){return dt===null||dt===60||dt===61||dt===62||dt===96?o(dt):dt===34||dt===39?(i.consume(dt),g=dt,At):markdownSpace(dt)?(i.consume(dt),at):vt(dt)}function At(dt){return dt===g?(i.consume(dt),g=null,ft):dt===null||markdownLineEnding(dt)?o(dt):(i.consume(dt),At)}function vt(dt){return dt===null||dt===34||dt===39||dt===47||dt===60||dt===61||dt===62||dt===96||markdownLineEndingOrSpace(dt)?lt(dt):(i.consume(dt),vt)}function ft(dt){return dt===47||dt===62||markdownSpace(dt)?it(dt):o(dt)}function mt(dt){return dt===62?(i.consume(dt),yt):o(dt)}function yt(dt){return dt===null||markdownLineEnding(dt)?bt(dt):markdownSpace(dt)?(i.consume(dt),yt):o(dt)}function bt(dt){return dt===45&&a===2?(i.consume(dt),Bt):dt===60&&a===1?(i.consume(dt),Kt):dt===62&&a===4?(i.consume(dt),rn):dt===63&&a===3?(i.consume(dt),St):dt===93&&a===5?(i.consume(dt),Ut):markdownLineEnding(dt)&&(a===6||a===7)?(i.exit("htmlFlowData"),i.check(blankLineBefore,an,Mt)(dt)):dt===null||markdownLineEnding(dt)?(i.exit("htmlFlowData"),Mt(dt)):(i.consume(dt),bt)}function Mt(dt){return i.check(nonLazyContinuationStart,Tt,an)(dt)}function Tt(dt){return i.enter("lineEnding"),i.consume(dt),i.exit("lineEnding"),Lt}function Lt(dt){return dt===null||markdownLineEnding(dt)?Mt(dt):(i.enter("htmlFlowData"),bt(dt))}function Bt(dt){return dt===45?(i.consume(dt),St):bt(dt)}function Kt(dt){return dt===47?(i.consume(dt),h="",_t):bt(dt)}function _t(dt){if(dt===62){const ct=h.toLowerCase();return htmlRawNames.includes(ct)?(i.consume(dt),rn):bt(dt)}return asciiAlpha(dt)&&h.length<8?(i.consume(dt),h+=String.fromCharCode(dt),_t):bt(dt)}function Ut(dt){return dt===93?(i.consume(dt),St):bt(dt)}function St(dt){return dt===62?(i.consume(dt),rn):dt===45&&a===2?(i.consume(dt),St):bt(dt)}function rn(dt){return dt===null||markdownLineEnding(dt)?(i.exit("htmlFlowData"),an(dt)):(i.consume(dt),rn)}function an(dt){return i.exit("htmlFlow"),e(dt)}}function tokenizeNonLazyContinuationStart(i,e,o){const s=this;return a;function a(h){return markdownLineEnding(h)?(i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),c):o(h)}function c(h){return s.parser.lazy[s.now().line]?o(h):e(h)}}function tokenizeBlankLineBefore(i,e,o){return s;function s(a){return i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),i.attempt(blankLine,e,o)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(i,e,o){const s=this;let a,c,h;return d;function d(St){return i.enter("htmlText"),i.enter("htmlTextData"),i.consume(St),g}function g(St){return St===33?(i.consume(St),_):St===47?(i.consume(St),lt):St===63?(i.consume(St),it):asciiAlpha(St)?(i.consume(St),vt):o(St)}function _(St){return St===45?(i.consume(St),b):St===91?(i.consume(St),c=0,et):asciiAlpha(St)?(i.consume(St),nt):o(St)}function b(St){return St===45?(i.consume(St),$):o(St)}function j(St){return St===null?o(St):St===45?(i.consume(St),_e):markdownLineEnding(St)?(h=j,Kt(St)):(i.consume(St),j)}function _e(St){return St===45?(i.consume(St),$):j(St)}function $(St){return St===62?Bt(St):St===45?_e(St):j(St)}function et(St){const rn="CDATA[";return St===rn.charCodeAt(c++)?(i.consume(St),c===rn.length?rt:et):o(St)}function rt(St){return St===null?o(St):St===93?(i.consume(St),st):markdownLineEnding(St)?(h=rt,Kt(St)):(i.consume(St),rt)}function st(St){return St===93?(i.consume(St),tt):rt(St)}function tt(St){return St===62?Bt(St):St===93?(i.consume(St),tt):rt(St)}function nt(St){return St===null||St===62?Bt(St):markdownLineEnding(St)?(h=nt,Kt(St)):(i.consume(St),nt)}function it(St){return St===null?o(St):St===63?(i.consume(St),pt):markdownLineEnding(St)?(h=it,Kt(St)):(i.consume(St),it)}function pt(St){return St===62?Bt(St):it(St)}function lt(St){return asciiAlpha(St)?(i.consume(St),at):o(St)}function at(St){return St===45||asciiAlphanumeric(St)?(i.consume(St),at):At(St)}function At(St){return markdownLineEnding(St)?(h=At,Kt(St)):markdownSpace(St)?(i.consume(St),At):Bt(St)}function vt(St){return St===45||asciiAlphanumeric(St)?(i.consume(St),vt):St===47||St===62||markdownLineEndingOrSpace(St)?ft(St):o(St)}function ft(St){return St===47?(i.consume(St),Bt):St===58||St===95||asciiAlpha(St)?(i.consume(St),mt):markdownLineEnding(St)?(h=ft,Kt(St)):markdownSpace(St)?(i.consume(St),ft):Bt(St)}function mt(St){return St===45||St===46||St===58||St===95||asciiAlphanumeric(St)?(i.consume(St),mt):yt(St)}function yt(St){return St===61?(i.consume(St),bt):markdownLineEnding(St)?(h=yt,Kt(St)):markdownSpace(St)?(i.consume(St),yt):ft(St)}function bt(St){return St===null||St===60||St===61||St===62||St===96?o(St):St===34||St===39?(i.consume(St),a=St,Mt):markdownLineEnding(St)?(h=bt,Kt(St)):markdownSpace(St)?(i.consume(St),bt):(i.consume(St),Tt)}function Mt(St){return St===a?(i.consume(St),a=void 0,Lt):St===null?o(St):markdownLineEnding(St)?(h=Mt,Kt(St)):(i.consume(St),Mt)}function Tt(St){return St===null||St===34||St===39||St===60||St===61||St===96?o(St):St===47||St===62||markdownLineEndingOrSpace(St)?ft(St):(i.consume(St),Tt)}function Lt(St){return St===47||St===62||markdownLineEndingOrSpace(St)?ft(St):o(St)}function Bt(St){return St===62?(i.consume(St),i.exit("htmlTextData"),i.exit("htmlText"),e):o(St)}function Kt(St){return i.exit("htmlTextData"),i.enter("lineEnding"),i.consume(St),i.exit("lineEnding"),_t}function _t(St){return markdownSpace(St)?factorySpace(i,Ut,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(St):Ut(St)}function Ut(St){return i.enter("htmlTextData"),h(St)}}const labelEnd={name:"labelEnd",tokenize:tokenizeLabelEnd,resolveTo:resolveToLabelEnd,resolveAll:resolveAllLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(i){let e=-1;for(;++e<i.length;){const o=i[e][1];(o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd")&&(i.splice(e+1,o.type==="labelImage"?4:2),o.type="data",e++)}return i}function resolveToLabelEnd(i,e){let o=i.length,s=0,a,c,h,d;for(;o--;)if(a=i[o][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;i[o][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(h){if(i[o][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=o,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(h=o);const g={type:i[c][1].type==="labelLink"?"link":"image",start:Object.assign({},i[c][1].start),end:Object.assign({},i[i.length-1][1].end)},_={type:"label",start:Object.assign({},i[c][1].start),end:Object.assign({},i[h][1].end)},b={type:"labelText",start:Object.assign({},i[c+s+2][1].end),end:Object.assign({},i[h-2][1].start)};return d=[["enter",g,e],["enter",_,e]],d=push(d,i.slice(c+1,c+s+3)),d=push(d,[["enter",b,e]]),d=push(d,resolveAll(e.parser.constructs.insideSpan.null,i.slice(c+s+4,h-3),e)),d=push(d,[["exit",b,e],i[h-2],i[h-1],["exit",_,e]]),d=push(d,i.slice(h+1)),d=push(d,[["exit",g,e]]),splice(i,c,i.length,d),i}function tokenizeLabelEnd(i,e,o){const s=this;let a=s.events.length,c,h;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){c=s.events[a][1];break}return d;function d(_e){return c?c._inactive?j(_e):(h=s.parser.defined.includes(normalizeIdentifier(s.sliceSerialize({start:c.end,end:s.now()}))),i.enter("labelEnd"),i.enter("labelMarker"),i.consume(_e),i.exit("labelMarker"),i.exit("labelEnd"),g):o(_e)}function g(_e){return _e===40?i.attempt(resourceConstruct,b,h?b:j)(_e):_e===91?i.attempt(referenceFullConstruct,b,h?_:j)(_e):h?b(_e):j(_e)}function _(_e){return i.attempt(referenceCollapsedConstruct,b,j)(_e)}function b(_e){return e(_e)}function j(_e){return c._balanced=!0,o(_e)}}function tokenizeResource(i,e,o){return s;function s(j){return i.enter("resource"),i.enter("resourceMarker"),i.consume(j),i.exit("resourceMarker"),a}function a(j){return markdownLineEndingOrSpace(j)?factoryWhitespace(i,c)(j):c(j)}function c(j){return j===41?b(j):factoryDestination(i,h,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(j)}function h(j){return markdownLineEndingOrSpace(j)?factoryWhitespace(i,g)(j):b(j)}function d(j){return o(j)}function g(j){return j===34||j===39||j===40?factoryTitle(i,_,o,"resourceTitle","resourceTitleMarker","resourceTitleString")(j):b(j)}function _(j){return markdownLineEndingOrSpace(j)?factoryWhitespace(i,b)(j):b(j)}function b(j){return j===41?(i.enter("resourceMarker"),i.consume(j),i.exit("resourceMarker"),i.exit("resource"),e):o(j)}}function tokenizeReferenceFull(i,e,o){const s=this;return a;function a(d){return factoryLabel.call(s,i,c,h,"reference","referenceMarker","referenceString")(d)}function c(d){return s.parser.defined.includes(normalizeIdentifier(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(d):o(d)}function h(d){return o(d)}}function tokenizeReferenceCollapsed(i,e,o){return s;function s(c){return i.enter("reference"),i.enter("referenceMarker"),i.consume(c),i.exit("referenceMarker"),a}function a(c){return c===93?(i.enter("referenceMarker"),i.consume(c),i.exit("referenceMarker"),i.exit("reference"),e):o(c)}}const labelStartImage={name:"labelStartImage",tokenize:tokenizeLabelStartImage,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartImage(i,e,o){const s=this;return a;function a(d){return i.enter("labelImage"),i.enter("labelImageMarker"),i.consume(d),i.exit("labelImageMarker"),c}function c(d){return d===91?(i.enter("labelMarker"),i.consume(d),i.exit("labelMarker"),i.exit("labelImage"),h):o(d)}function h(d){return d===94&&"_hiddenFootnoteSupport"in s.parser.constructs?o(d):e(d)}}const labelStartLink={name:"labelStartLink",tokenize:tokenizeLabelStartLink,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartLink(i,e,o){const s=this;return a;function a(h){return i.enter("labelLink"),i.enter("labelMarker"),i.consume(h),i.exit("labelMarker"),i.exit("labelLink"),c}function c(h){return h===94&&"_hiddenFootnoteSupport"in s.parser.constructs?o(h):e(h)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(i,e){return o;function o(s){return i.enter("lineEnding"),i.consume(s),i.exit("lineEnding"),factorySpace(i,e,"linePrefix")}}const thematicBreak$2={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(i,e,o){let s=0,a;return c;function c(_){return i.enter("thematicBreak"),h(_)}function h(_){return a=_,d(_)}function d(_){return _===a?(i.enter("thematicBreakSequence"),g(_)):s>=3&&(_===null||markdownLineEnding(_))?(i.exit("thematicBreak"),e(_)):o(_)}function g(_){return _===a?(i.consume(_),s++,g):(i.exit("thematicBreakSequence"),markdownSpace(_)?factorySpace(i,d,"whitespace")(_):d(_))}}const list$2={name:"list",tokenize:tokenizeListStart,continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd},listItemPrefixWhitespaceConstruct={tokenize:tokenizeListItemPrefixWhitespace,partial:!0},indentConstruct={tokenize:tokenizeIndent$1,partial:!0};function tokenizeListStart(i,e,o){const s=this,a=s.events[s.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,h=0;return d;function d($){const et=s.containerState.type||($===42||$===43||$===45?"listUnordered":"listOrdered");if(et==="listUnordered"?!s.containerState.marker||$===s.containerState.marker:asciiDigit($)){if(s.containerState.type||(s.containerState.type=et,i.enter(et,{_container:!0})),et==="listUnordered")return i.enter("listItemPrefix"),$===42||$===45?i.check(thematicBreak$2,o,_)($):_($);if(!s.interrupt||$===49)return i.enter("listItemPrefix"),i.enter("listItemValue"),g($)}return o($)}function g($){return asciiDigit($)&&++h<10?(i.consume($),g):(!s.interrupt||h<2)&&(s.containerState.marker?$===s.containerState.marker:$===41||$===46)?(i.exit("listItemValue"),_($)):o($)}function _($){return i.enter("listItemMarker"),i.consume($),i.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||$,i.check(blankLine,s.interrupt?o:b,i.attempt(listItemPrefixWhitespaceConstruct,_e,j))}function b($){return s.containerState.initialBlankLine=!0,c++,_e($)}function j($){return markdownSpace($)?(i.enter("listItemPrefixWhitespace"),i.consume($),i.exit("listItemPrefixWhitespace"),_e):o($)}function _e($){return s.containerState.size=c+s.sliceSerialize(i.exit("listItemPrefix"),!0).length,e($)}}function tokenizeListContinuation(i,e,o){const s=this;return s.containerState._closeFlow=void 0,i.check(blankLine,a,c);function a(d){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,factorySpace(i,e,"listItemIndent",s.containerState.size+1)(d)}function c(d){return s.containerState.furtherBlankLines||!markdownSpace(d)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,h(d)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,i.attempt(indentConstruct,e,h)(d))}function h(d){return s.containerState._closeFlow=!0,s.interrupt=void 0,factorySpace(i,i.attempt(list$2,e,o),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function tokenizeIndent$1(i,e,o){const s=this;return factorySpace(i,a,"listItemIndent",s.containerState.size+1);function a(c){const h=s.events[s.events.length-1];return h&&h[1].type==="listItemIndent"&&h[2].sliceSerialize(h[1],!0).length===s.containerState.size?e(c):o(c)}}function tokenizeListEnd(i){i.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(i,e,o){const s=this;return factorySpace(i,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(c){const h=s.events[s.events.length-1];return!markdownSpace(c)&&h&&h[1].type==="listItemPrefixWhitespace"?e(c):o(c)}}const setextUnderline={name:"setextUnderline",tokenize:tokenizeSetextUnderline,resolveTo:resolveToSetextUnderline};function resolveToSetextUnderline(i,e){let o=i.length,s,a,c;for(;o--;)if(i[o][0]==="enter"){if(i[o][1].type==="content"){s=o;break}i[o][1].type==="paragraph"&&(a=o)}else i[o][1].type==="content"&&i.splice(o,1),!c&&i[o][1].type==="definition"&&(c=o);const h={type:"setextHeading",start:Object.assign({},i[a][1].start),end:Object.assign({},i[i.length-1][1].end)};return i[a][1].type="setextHeadingText",c?(i.splice(a,0,["enter",h,e]),i.splice(c+1,0,["exit",i[s][1],e]),i[s][1].end=Object.assign({},i[c][1].end)):i[s][1]=h,i.push(["exit",h,e]),i}function tokenizeSetextUnderline(i,e,o){const s=this;let a;return c;function c(_){let b=s.events.length,j;for(;b--;)if(s.events[b][1].type!=="lineEnding"&&s.events[b][1].type!=="linePrefix"&&s.events[b][1].type!=="content"){j=s.events[b][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||j)?(i.enter("setextHeadingLine"),a=_,h(_)):o(_)}function h(_){return i.enter("setextHeadingLineSequence"),d(_)}function d(_){return _===a?(i.consume(_),d):(i.exit("setextHeadingLineSequence"),markdownSpace(_)?factorySpace(i,g,"lineSuffix")(_):g(_))}function g(_){return _===null||markdownLineEnding(_)?(i.exit("setextHeadingLine"),e(_)):o(_)}}const flow$1={tokenize:initializeFlow};function initializeFlow(i){const e=this,o=i.attempt(blankLine,s,i.attempt(this.parser.constructs.flowInitial,a,factorySpace(i,i.attempt(this.parser.constructs.flow,a,i.attempt(content,a)),"linePrefix")));return o;function s(c){if(c===null){i.consume(c);return}return i.enter("lineEndingBlank"),i.consume(c),i.exit("lineEndingBlank"),e.currentConstruct=void 0,o}function a(c){if(c===null){i.consume(c);return}return i.enter("lineEnding"),i.consume(c),i.exit("lineEnding"),e.currentConstruct=void 0,o}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$4=initializeFactory("text");function initializeFactory(i){return{tokenize:e,resolveAll:createResolver(i==="text"?resolveAllLineSuffixes:void 0)};function e(o){const s=this,a=this.parser.constructs[i],c=o.attempt(a,h,d);return h;function h(b){return _(b)?c(b):d(b)}function d(b){if(b===null){o.consume(b);return}return o.enter("data"),o.consume(b),g}function g(b){return _(b)?(o.exit("data"),c(b)):(o.consume(b),g)}function _(b){if(b===null)return!0;const j=a[b];let _e=-1;if(j)for(;++_e<j.length;){const $=j[_e];if(!$.previous||$.previous.call(s,s.previous))return!0}return!1}}}function createResolver(i){return e;function e(o,s){let a=-1,c;for(;++a<=o.length;)c===void 0?o[a]&&o[a][1].type==="data"&&(c=a,a++):(!o[a]||o[a][1].type!=="data")&&(a!==c+2&&(o[c][1].end=o[a-1][1].end,o.splice(c+2,a-c-2),a=c+2),c=void 0);return i?i(o,s):o}}function resolveAllLineSuffixes(i,e){let o=0;for(;++o<=i.length;)if((o===i.length||i[o][1].type==="lineEnding")&&i[o-1][1].type==="data"){const s=i[o-1][1],a=e.sliceStream(s);let c=a.length,h=-1,d=0,g;for(;c--;){const _=a[c];if(typeof _=="string"){for(h=_.length;_.charCodeAt(h-1)===32;)d++,h--;if(h)break;h=-1}else if(_===-2)g=!0,d++;else if(_!==-1){c++;break}}if(d){const _={type:o===i.length||g||d<2?"lineSuffix":"hardBreakTrailing",start:{line:s.end.line,column:s.end.column-d,offset:s.end.offset-d,_index:s.start._index+c,_bufferIndex:c?h:s.start._bufferIndex+h},end:Object.assign({},s.end)};s.end=Object.assign({},_.start),s.start.offset===s.end.offset?Object.assign(s,_):(i.splice(o,0,["enter",_,e],["exit",_,e]),o+=2)}o++}return i}function createTokenizer(i,e,o){let s=Object.assign(o?Object.assign({},o):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let h=[],d=[];const g={consume:nt,enter:it,exit:pt,attempt:At(lt),check:At(at),interrupt:At(at,{interrupt:!0})},_={previous:null,code:null,containerState:{},events:[],parser:i,sliceStream:$,sliceSerialize:_e,now:et,defineSkip:rt,write:j};let b=e.tokenize.call(_,g);return e.resolveAll&&c.push(e),_;function j(yt){return h=push(h,yt),st(),h[h.length-1]!==null?[]:(vt(e,0),_.events=resolveAll(c,_.events,_),_.events)}function _e(yt,bt){return serializeChunks($(yt),bt)}function $(yt){return sliceChunks(h,yt)}function et(){const{line:yt,column:bt,offset:Mt,_index:Tt,_bufferIndex:Lt}=s;return{line:yt,column:bt,offset:Mt,_index:Tt,_bufferIndex:Lt}}function rt(yt){a[yt.line]=yt.column,mt()}function st(){let yt;for(;s._index<h.length;){const bt=h[s._index];if(typeof bt=="string")for(yt=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===yt&&s._bufferIndex<bt.length;)tt(bt.charCodeAt(s._bufferIndex));else tt(bt)}}function tt(yt){b=b(yt)}function nt(yt){markdownLineEnding(yt)?(s.line++,s.column=1,s.offset+=yt===-3?2:1,mt()):yt!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===h[s._index].length&&(s._bufferIndex=-1,s._index++)),_.previous=yt}function it(yt,bt){const Mt=bt||{};return Mt.type=yt,Mt.start=et(),_.events.push(["enter",Mt,_]),d.push(Mt),Mt}function pt(yt){const bt=d.pop();return bt.end=et(),_.events.push(["exit",bt,_]),bt}function lt(yt,bt){vt(yt,bt.from)}function at(yt,bt){bt.restore()}function At(yt,bt){return Mt;function Mt(Tt,Lt,Bt){let Kt,_t,Ut,St;return Array.isArray(Tt)?an(Tt):"tokenize"in Tt?an([Tt]):rn(Tt);function rn(ut){return Et;function Et(Ct){const kt=Ct!==null&&ut[Ct],xt=Ct!==null&&ut.null,Pt=[...Array.isArray(kt)?kt:kt?[kt]:[],...Array.isArray(xt)?xt:xt?[xt]:[]];return an(Pt)(Ct)}}function an(ut){return Kt=ut,_t=0,ut.length===0?Bt:dt(ut[_t])}function dt(ut){return Et;function Et(Ct){return St=ft(),Ut=ut,ut.partial||(_.currentConstruct=ut),ut.name&&_.parser.constructs.disable.null.includes(ut.name)?gt():ut.tokenize.call(bt?Object.assign(Object.create(_),bt):_,g,ct,gt)(Ct)}}function ct(ut){return yt(Ut,St),Lt}function gt(ut){return St.restore(),++_t<Kt.length?dt(Kt[_t]):Bt}}}function vt(yt,bt){yt.resolveAll&&!c.includes(yt)&&c.push(yt),yt.resolve&&splice(_.events,bt,_.events.length-bt,yt.resolve(_.events.slice(bt),_)),yt.resolveTo&&(_.events=yt.resolveTo(_.events,_))}function ft(){const yt=et(),bt=_.previous,Mt=_.currentConstruct,Tt=_.events.length,Lt=Array.from(d);return{restore:Bt,from:Tt};function Bt(){s=yt,_.previous=bt,_.currentConstruct=Mt,_.events.length=Tt,d=Lt,mt()}}function mt(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function sliceChunks(i,e){const o=e.start._index,s=e.start._bufferIndex,a=e.end._index,c=e.end._bufferIndex;let h;if(o===a)h=[i[o].slice(s,c)];else{if(h=i.slice(o,a),s>-1){const d=h[0];typeof d=="string"?h[0]=d.slice(s):h.shift()}c>0&&h.push(i[a].slice(0,c))}return h}function serializeChunks(i,e){let o=-1;const s=[];let a;for(;++o<i.length;){const c=i[o];let h;if(typeof c=="string")h=c;else switch(c){case-5:{h="\r";break}case-4:{h=`
`;break}case-3:{h=`\r
`;break}case-2:{h=e?" ":"	";break}case-1:{if(!e&&a)continue;h=" ";break}default:h=String.fromCharCode(c)}a=c===-2,s.push(h)}return s.join("")}const document$1={42:list$2,43:list$2,45:list$2,48:list$2,49:list$2,50:list$2,51:list$2,52:list$2,53:list$2,54:list$2,55:list$2,56:list$2,57:list$2,62:blockQuote},contentInitial={91:definition$1},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$2,45:[setextUnderline,thematicBreak$2],60:htmlFlow,61:setextUnderline,95:thematicBreak$2,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$3={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$3},Symbol.toStringTag,{value:"Module"}));function parse(i){const o=combineExtensions([defaultConstructs,...(i||{}).extensions||[]]),s={defined:[],lazy:{},constructs:o,content:a(content$1),document:a(document$2),flow:a(flow$1),string:a(string$1),text:a(text$4)};return s;function a(c){return h;function h(d){return createTokenizer(s,c,d)}}}function postprocess(i){for(;!subtokenize(i););return i}const search=/[\0\t\n\r]/g;function preprocess(){let i=1,e="",o=!0,s;return a;function a(c,h,d){const g=[];let _,b,j,_e,$;for(c=e+(typeof c=="string"?c.toString():new TextDecoder(h||void 0).decode(c)),j=0,e="",o&&(c.charCodeAt(0)===65279&&j++,o=void 0);j<c.length;){if(search.lastIndex=j,_=search.exec(c),_e=_&&_.index!==void 0?_.index:c.length,$=c.charCodeAt(_e),!_){e=c.slice(j);break}if($===10&&j===_e&&s)g.push(-3),s=void 0;else switch(s&&(g.push(-5),s=void 0),j<_e&&(g.push(c.slice(j,_e)),i+=_e-j),$){case 0:{g.push(65533),i++;break}case 9:{for(b=Math.ceil(i/4)*4,g.push(-2);i++<b;)g.push(-1);break}case 10:{g.push(-4),i=1;break}default:s=!0,i=1}j=_e+1}return d&&(s&&g.push(-5),e&&g.push(e),g.push(null)),g}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(i){return i.replace(characterEscapeOrReference,decode)}function decode(i,e,o){if(e)return e;if(o.charCodeAt(0)===35){const a=o.charCodeAt(1),c=a===120||a===88;return decodeNumericCharacterReference(o.slice(c?2:1),c?16:10)}return decodeNamedCharacterReference(o)||i}const own$2={}.hasOwnProperty;function fromMarkdown(i,e,o){return typeof e!="string"&&(o=e,e=void 0),compiler(o)(postprocess(parse(o).document().write(preprocess()(i,e,!0))))}function compiler(i){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(pn),autolinkProtocol:ft,autolinkEmail:ft,atxHeading:c(Qt),blockQuote:c(kt),characterEscape:ft,characterReference:ft,codeFenced:c(xt),codeFencedFenceInfo:h,codeFencedFenceMeta:h,codeIndented:c(xt,h),codeText:c(Pt,h),codeTextData:ft,data:ft,codeFlowValue:ft,definition:c(qt),definitionDestinationString:h,definitionLabelString:h,definitionTitleString:h,emphasis:c(Vt),hardBreakEscape:c(tn),hardBreakTrailing:c(tn),htmlFlow:c(on,h),htmlFlowData:ft,htmlText:c(on,h),htmlTextData:ft,image:c(Zt),label:h,link:c(pn),listItem:c(dn),listItemValue:_e,listOrdered:c(Tn,j),listUnordered:c(Tn),paragraph:c(Cn),reference:dt,referenceString:h,resourceDestinationString:h,resourceTitleString:h,setextHeading:c(Qt),strong:c(sn),thematicBreak:c(Wt)},exit:{atxHeading:g(),atxHeadingSequence:lt,autolink:g(),autolinkEmail:Ct,autolinkProtocol:Et,blockQuote:g(),characterEscapeValue:mt,characterReferenceMarkerHexadecimal:gt,characterReferenceMarkerNumeric:gt,characterReferenceValue:ut,codeFenced:g(st),codeFencedFence:rt,codeFencedFenceInfo:$,codeFencedFenceMeta:et,codeFlowValue:mt,codeIndented:g(tt),codeText:g(Lt),codeTextData:mt,data:mt,definition:g(),definitionDestinationString:pt,definitionLabelString:nt,definitionTitleString:it,emphasis:g(),hardBreakEscape:g(bt),hardBreakTrailing:g(bt),htmlFlow:g(Mt),htmlFlowData:mt,htmlText:g(Tt),htmlTextData:mt,image:g(Kt),label:Ut,labelText:_t,lineEnding:yt,link:g(Bt),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:ct,resourceDestinationString:St,resourceTitleString:rn,resource:an,setextHeading:g(vt),setextHeadingLineSequence:At,setextHeadingText:at,strong:g(),thematicBreak:g()}};configure(e,(i||{}).mdastExtensions||[]);const o={};return s;function s(Ot){let Xt={type:"root",children:[]};const nn={stack:[Xt],tokenStack:[],config:e,enter:d,exit:_,buffer:h,resume:b,data:o},gn=[];let vn=-1;for(;++vn<Ot.length;)if(Ot[vn][1].type==="listOrdered"||Ot[vn][1].type==="listUnordered")if(Ot[vn][0]==="enter")gn.push(vn);else{const kn=gn.pop();vn=a(Ot,kn,vn)}for(vn=-1;++vn<Ot.length;){const kn=e[Ot[vn][0]];own$2.call(kn,Ot[vn][1].type)&&kn[Ot[vn][1].type].call(Object.assign({sliceSerialize:Ot[vn][2].sliceSerialize},nn),Ot[vn][1])}if(nn.tokenStack.length>0){const kn=nn.tokenStack[nn.tokenStack.length-1];(kn[1]||defaultOnError).call(nn,void 0,kn[0])}for(Xt.position={start:point(Ot.length>0?Ot[0][1].start:{line:1,column:1,offset:0}),end:point(Ot.length>0?Ot[Ot.length-2][1].end:{line:1,column:1,offset:0})},vn=-1;++vn<e.transforms.length;)Xt=e.transforms[vn](Xt)||Xt;return Xt}function a(Ot,Xt,nn){let gn=Xt-1,vn=-1,kn=!1,Pn,Rn,In,Mn;for(;++gn<=nn;){const en=Ot[gn];switch(en[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{en[0]==="enter"?vn++:vn--,Mn=void 0;break}case"lineEndingBlank":{en[0]==="enter"&&(Pn&&!Mn&&!vn&&!In&&(In=gn),Mn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Mn=void 0}if(!vn&&en[0]==="enter"&&en[1].type==="listItemPrefix"||vn===-1&&en[0]==="exit"&&(en[1].type==="listUnordered"||en[1].type==="listOrdered")){if(Pn){let zt=gn;for(Rn=void 0;zt--;){const Ft=Ot[zt];if(Ft[1].type==="lineEnding"||Ft[1].type==="lineEndingBlank"){if(Ft[0]==="exit")continue;Rn&&(Ot[Rn][1].type="lineEndingBlank",kn=!0),Ft[1].type="lineEnding",Rn=zt}else if(!(Ft[1].type==="linePrefix"||Ft[1].type==="blockQuotePrefix"||Ft[1].type==="blockQuotePrefixWhitespace"||Ft[1].type==="blockQuoteMarker"||Ft[1].type==="listItemIndent"))break}In&&(!Rn||In<Rn)&&(Pn._spread=!0),Pn.end=Object.assign({},Rn?Ot[Rn][1].start:en[1].end),Ot.splice(Rn||gn,0,["exit",Pn,en[2]]),gn++,nn++}if(en[1].type==="listItemPrefix"){const zt={type:"listItem",_spread:!1,start:Object.assign({},en[1].start),end:void 0};Pn=zt,Ot.splice(gn,0,["enter",zt,en[2]]),gn++,nn++,In=void 0,Mn=!0}}}return Ot[Xt][1]._spread=kn,nn}function c(Ot,Xt){return nn;function nn(gn){d.call(this,Ot(gn),gn),Xt&&Xt.call(this,gn)}}function h(){this.stack.push({type:"fragment",children:[]})}function d(Ot,Xt,nn){this.stack[this.stack.length-1].children.push(Ot),this.stack.push(Ot),this.tokenStack.push([Xt,nn]),Ot.position={start:point(Xt.start),end:void 0}}function g(Ot){return Xt;function Xt(nn){Ot&&Ot.call(this,nn),_.call(this,nn)}}function _(Ot,Xt){const nn=this.stack.pop(),gn=this.tokenStack.pop();if(gn)gn[0].type!==Ot.type&&(Xt?Xt.call(this,Ot,gn[0]):(gn[1]||defaultOnError).call(this,Ot,gn[0]));else throw new Error("Cannot close `"+Ot.type+"` ("+stringifyPosition({start:Ot.start,end:Ot.end})+"): its not open");nn.position.end=point(Ot.end)}function b(){return toString$1(this.stack.pop())}function j(){this.data.expectingFirstListItemValue=!0}function _e(Ot){if(this.data.expectingFirstListItemValue){const Xt=this.stack[this.stack.length-2];Xt.start=Number.parseInt(this.sliceSerialize(Ot),10),this.data.expectingFirstListItemValue=void 0}}function $(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.lang=Ot}function et(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.meta=Ot}function rt(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function st(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Ot.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function tt(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Ot.replace(/(\r?\n|\r)$/g,"")}function nt(Ot){const Xt=this.resume(),nn=this.stack[this.stack.length-1];nn.label=Xt,nn.identifier=normalizeIdentifier(this.sliceSerialize(Ot)).toLowerCase()}function it(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.title=Ot}function pt(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.url=Ot}function lt(Ot){const Xt=this.stack[this.stack.length-1];if(!Xt.depth){const nn=this.sliceSerialize(Ot).length;Xt.depth=nn}}function at(){this.data.setextHeadingSlurpLineEnding=!0}function At(Ot){const Xt=this.stack[this.stack.length-1];Xt.depth=this.sliceSerialize(Ot).codePointAt(0)===61?1:2}function vt(){this.data.setextHeadingSlurpLineEnding=void 0}function ft(Ot){const nn=this.stack[this.stack.length-1].children;let gn=nn[nn.length-1];(!gn||gn.type!=="text")&&(gn=Gt(),gn.position={start:point(Ot.start),end:void 0},nn.push(gn)),this.stack.push(gn)}function mt(Ot){const Xt=this.stack.pop();Xt.value+=this.sliceSerialize(Ot),Xt.position.end=point(Ot.end)}function yt(Ot){const Xt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const nn=Xt.children[Xt.children.length-1];nn.position.end=point(Ot.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Xt.type)&&(ft.call(this,Ot),mt.call(this,Ot))}function bt(){this.data.atHardBreak=!0}function Mt(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Ot}function Tt(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Ot}function Lt(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Ot}function Bt(){const Ot=this.stack[this.stack.length-1];if(this.data.inReference){const Xt=this.data.referenceType||"shortcut";Ot.type+="Reference",Ot.referenceType=Xt,delete Ot.url,delete Ot.title}else delete Ot.identifier,delete Ot.label;this.data.referenceType=void 0}function Kt(){const Ot=this.stack[this.stack.length-1];if(this.data.inReference){const Xt=this.data.referenceType||"shortcut";Ot.type+="Reference",Ot.referenceType=Xt,delete Ot.url,delete Ot.title}else delete Ot.identifier,delete Ot.label;this.data.referenceType=void 0}function _t(Ot){const Xt=this.sliceSerialize(Ot),nn=this.stack[this.stack.length-2];nn.label=decodeString(Xt),nn.identifier=normalizeIdentifier(Xt).toLowerCase()}function Ut(){const Ot=this.stack[this.stack.length-1],Xt=this.resume(),nn=this.stack[this.stack.length-1];if(this.data.inReference=!0,nn.type==="link"){const gn=Ot.children;nn.children=gn}else nn.alt=Xt}function St(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.url=Ot}function rn(){const Ot=this.resume(),Xt=this.stack[this.stack.length-1];Xt.title=Ot}function an(){this.data.inReference=void 0}function dt(){this.data.referenceType="collapsed"}function ct(Ot){const Xt=this.resume(),nn=this.stack[this.stack.length-1];nn.label=Xt,nn.identifier=normalizeIdentifier(this.sliceSerialize(Ot)).toLowerCase(),this.data.referenceType="full"}function gt(Ot){this.data.characterReferenceType=Ot.type}function ut(Ot){const Xt=this.sliceSerialize(Ot),nn=this.data.characterReferenceType;let gn;nn?(gn=decodeNumericCharacterReference(Xt,nn==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):gn=decodeNamedCharacterReference(Xt);const vn=this.stack.pop();vn.value+=gn,vn.position.end=point(Ot.end)}function Et(Ot){mt.call(this,Ot);const Xt=this.stack[this.stack.length-1];Xt.url=this.sliceSerialize(Ot)}function Ct(Ot){mt.call(this,Ot);const Xt=this.stack[this.stack.length-1];Xt.url="mailto:"+this.sliceSerialize(Ot)}function kt(){return{type:"blockquote",children:[]}}function xt(){return{type:"code",lang:null,meta:null,value:""}}function Pt(){return{type:"inlineCode",value:""}}function qt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Vt(){return{type:"emphasis",children:[]}}function Qt(){return{type:"heading",depth:0,children:[]}}function tn(){return{type:"break"}}function on(){return{type:"html",value:""}}function Zt(){return{type:"image",title:null,url:"",alt:null}}function pn(){return{type:"link",title:null,url:"",children:[]}}function Tn(Ot){return{type:"list",ordered:Ot.type==="listOrdered",start:null,spread:Ot._spread,children:[]}}function dn(Ot){return{type:"listItem",spread:Ot._spread,checked:null,children:[]}}function Cn(){return{type:"paragraph",children:[]}}function sn(){return{type:"strong",children:[]}}function Gt(){return{type:"text",value:""}}function Wt(){return{type:"thematicBreak"}}}function point(i){return{line:i.line,column:i.column,offset:i.offset}}function configure(i,e){let o=-1;for(;++o<e.length;){const s=e[o];Array.isArray(s)?configure(i,s):extension(i,s)}}function extension(i,e){let o;for(o in e)if(own$2.call(e,o))switch(o){case"canContainEols":{const s=e[o];s&&i[o].push(...s);break}case"transforms":{const s=e[o];s&&i[o].push(...s);break}case"enter":case"exit":{const s=e[o];s&&Object.assign(i[o],s);break}}}function defaultOnError(i,e){throw i?new Error("Cannot close `"+i.type+"` ("+stringifyPosition({start:i.start,end:i.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(i){const e=this;e.parser=o;function o(s){return fromMarkdown(s,{...e.data("settings"),...i,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote$1(i,e){const o={type:"element",tagName:"blockquote",properties:{},children:i.wrap(i.all(e),!0)};return i.patch(e,o),i.applyData(e,o)}function hardBreak$1(i,e){const o={type:"element",tagName:"br",properties:{},children:[]};return i.patch(e,o),[i.applyData(e,o),{type:"text",value:`
`}]}function code$2(i,e){const o=e.value?e.value+`
`:"",s={};e.lang&&(s.className=["language-"+e.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:o}]};return e.meta&&(a.data={meta:e.meta}),i.patch(e,a),a=i.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},i.patch(e,a),a}function strikethrough(i,e){const o={type:"element",tagName:"del",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function emphasis$1(i,e){const o={type:"element",tagName:"em",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function footnoteReference$1(i,e){const o=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),a=normalizeUri(s.toLowerCase()),c=i.footnoteOrder.indexOf(s);let h,d=i.footnoteCounts.get(s);d===void 0?(d=0,i.footnoteOrder.push(s),h=i.footnoteOrder.length):h=c+1,d+=1,i.footnoteCounts.set(s,d);const g={type:"element",tagName:"a",properties:{href:"#"+o+"fn-"+a,id:o+"fnref-"+a+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(h)}]};i.patch(e,g);const _={type:"element",tagName:"sup",properties:{},children:[g]};return i.patch(e,_),i.applyData(e,_)}function heading$1(i,e){const o={type:"element",tagName:"h"+e.depth,properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function html$1(i,e){if(i.options.allowDangerousHtml){const o={type:"raw",value:e.value};return i.patch(e,o),i.applyData(e,o)}}function revert(i,e){const o=e.referenceType;let s="]";if(o==="collapsed"?s+="[]":o==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const a=i.all(e),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift({type:"text",value:"["});const h=a[a.length-1];return h&&h.type==="text"?h.value+=s:a.push({type:"text",value:s}),a}function imageReference$1(i,e){const o=String(e.identifier).toUpperCase(),s=i.definitionById.get(o);if(!s)return revert(i,e);const a={src:normalizeUri(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const c={type:"element",tagName:"img",properties:a,children:[]};return i.patch(e,c),i.applyData(e,c)}function image$1(i,e){const o={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(o.alt=e.alt),e.title!==null&&e.title!==void 0&&(o.title=e.title);const s={type:"element",tagName:"img",properties:o,children:[]};return i.patch(e,s),i.applyData(e,s)}function inlineCode$1(i,e){const o={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};i.patch(e,o);const s={type:"element",tagName:"code",properties:{},children:[o]};return i.patch(e,s),i.applyData(e,s)}function linkReference$1(i,e){const o=String(e.identifier).toUpperCase(),s=i.definitionById.get(o);if(!s)return revert(i,e);const a={href:normalizeUri(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const c={type:"element",tagName:"a",properties:a,children:i.all(e)};return i.patch(e,c),i.applyData(e,c)}function link$1(i,e){const o={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(o.title=e.title);const s={type:"element",tagName:"a",properties:o,children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function listItem$1(i,e,o){const s=i.all(e),a=o?listLoose(o):listItemLoose(e),c={},h=[];if(typeof e.checked=="boolean"){const b=s[0];let j;b&&b.type==="element"&&b.tagName==="p"?j=b:(j={type:"element",tagName:"p",properties:{},children:[]},s.unshift(j)),j.children.length>0&&j.children.unshift({type:"text",value:" "}),j.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),c.className=["task-list-item"]}let d=-1;for(;++d<s.length;){const b=s[d];(a||d!==0||b.type!=="element"||b.tagName!=="p")&&h.push({type:"text",value:`
`}),b.type==="element"&&b.tagName==="p"&&!a?h.push(...b.children):h.push(b)}const g=s[s.length-1];g&&(a||g.type!=="element"||g.tagName!=="p")&&h.push({type:"text",value:`
`});const _={type:"element",tagName:"li",properties:c,children:h};return i.patch(e,_),i.applyData(e,_)}function listLoose(i){let e=!1;if(i.type==="list"){e=i.spread||!1;const o=i.children;let s=-1;for(;!e&&++s<o.length;)e=listItemLoose(o[s])}return e}function listItemLoose(i){const e=i.spread;return e??i.children.length>1}function list$1(i,e){const o={},s=i.all(e);let a=-1;for(typeof e.start=="number"&&e.start!==1&&(o.start=e.start);++a<s.length;){const h=s[a];if(h.type==="element"&&h.tagName==="li"&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){o.className=["contains-task-list"];break}}const c={type:"element",tagName:e.ordered?"ol":"ul",properties:o,children:i.wrap(s,!0)};return i.patch(e,c),i.applyData(e,c)}function paragraph$1(i,e){const o={type:"element",tagName:"p",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function root$1(i,e){const o={type:"root",children:i.wrap(i.all(e))};return i.patch(e,o),i.applyData(e,o)}function strong$1(i,e){const o={type:"element",tagName:"strong",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function table(i,e){const o=i.all(e),s=o.shift(),a=[];if(s){const h={type:"element",tagName:"thead",properties:{},children:i.wrap([s],!0)};i.patch(e.children[0],h),a.push(h)}if(o.length>0){const h={type:"element",tagName:"tbody",properties:{},children:i.wrap(o,!0)},d=pointStart(e.children[1]),g=pointEnd(e.children[e.children.length-1]);d&&g&&(h.position={start:d,end:g}),a.push(h)}const c={type:"element",tagName:"table",properties:{},children:i.wrap(a,!0)};return i.patch(e,c),i.applyData(e,c)}function tableRow(i,e,o){const s=o?o.children:void 0,c=(s?s.indexOf(e):1)===0?"th":"td",h=o&&o.type==="table"?o.align:void 0,d=h?h.length:e.children.length;let g=-1;const _=[];for(;++g<d;){const j=e.children[g],_e={},$=h?h[g]:void 0;$&&(_e.align=$);let et={type:"element",tagName:c,properties:_e,children:[]};j&&(et.children=i.all(j),i.patch(j,et),et=i.applyData(j,et)),_.push(et)}const b={type:"element",tagName:"tr",properties:{},children:i.wrap(_,!0)};return i.patch(e,b),i.applyData(e,b)}function tableCell(i,e){const o={type:"element",tagName:"td",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}const tab=9,space=32;function trimLines(i){const e=String(i),o=/\r?\n|\r/g;let s=o.exec(e),a=0;const c=[];for(;s;)c.push(trimLine(e.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=o.exec(e);return c.push(trimLine(e.slice(a),a>0,!1)),c.join("")}function trimLine(i,e,o){let s=0,a=i.length;if(e){let c=i.codePointAt(s);for(;c===tab||c===space;)s++,c=i.codePointAt(s)}if(o){let c=i.codePointAt(a-1);for(;c===tab||c===space;)a--,c=i.codePointAt(a-1)}return a>s?i.slice(s,a):""}function text$2(i,e){const o={type:"text",value:trimLines(String(e.value))};return i.patch(e,o),i.applyData(e,o)}function thematicBreak$1(i,e){const o={type:"element",tagName:"hr",properties:{},children:[]};return i.patch(e,o),i.applyData(e,o)}const handlers={blockquote:blockquote$1,break:hardBreak$1,code:code$2,delete:strikethrough,emphasis:emphasis$1,footnoteReference:footnoteReference$1,heading:heading$1,html:html$1,imageReference:imageReference$1,image:image$1,inlineCode:inlineCode$1,linkReference:linkReference$1,link:link$1,listItem:listItem$1,list:list$1,paragraph:paragraph$1,root:root$1,strong:strong$1,table,tableCell,tableRow,text:text$2,thematicBreak:thematicBreak$1,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(i,e)=>{const o=(a,c)=>(i.set(c,a),a),s=a=>{if(i.has(a))return i.get(a);const[c,h]=e[a];switch(c){case PRIMITIVE:case VOID:return o(h,a);case ARRAY:{const d=o([],a);for(const g of h)d.push(s(g));return d}case OBJECT:{const d=o({},a);for(const[g,_]of h)d[s(g)]=s(_);return d}case DATE:return o(new Date(h),a);case REGEXP:{const{source:d,flags:g}=h;return o(new RegExp(d,g),a)}case MAP:{const d=o(new Map,a);for(const[g,_]of h)d.set(s(g),s(_));return d}case SET:{const d=o(new Set,a);for(const g of h)d.add(s(g));return d}case ERROR:{const{name:d,message:g}=h;return o(new env[d](g),a)}case BIGINT:return o(BigInt(h),a);case"BigInt":return o(Object(BigInt(h)),a)}return o(new env[c](h),a)};return s},deserialize=i=>deserializer(new Map,i)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=i=>{const e=typeof i;if(e!=="object"||!i)return[PRIMITIVE,e];const o=toString.call(i).slice(8,-1);switch(o){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY]}return o.includes("Array")?[ARRAY,o]:o.includes("Error")?[ERROR,o]:[OBJECT,o]},shouldSkip=([i,e])=>i===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(i,e,o,s)=>{const a=(h,d)=>{const g=s.push(h)-1;return o.set(d,g),g},c=h=>{if(o.has(h))return o.get(h);let[d,g]=typeOf(h);switch(d){case PRIMITIVE:{let b=h;switch(g){case"bigint":d=BIGINT,b=h.toString();break;case"function":case"symbol":if(i)throw new TypeError("unable to serialize "+g);b=null;break;case"undefined":return a([VOID],h)}return a([d,b],h)}case ARRAY:{if(g)return a([g,[...h]],h);const b=[],j=a([d,b],h);for(const _e of h)b.push(c(_e));return j}case OBJECT:{if(g)switch(g){case"BigInt":return a([g,h.toString()],h);case"Boolean":case"Number":case"String":return a([g,h.valueOf()],h)}if(e&&"toJSON"in h)return c(h.toJSON());const b=[],j=a([d,b],h);for(const _e of keys(h))(i||!shouldSkip(typeOf(h[_e])))&&b.push([c(_e),c(h[_e])]);return j}case DATE:return a([d,h.toISOString()],h);case REGEXP:{const{source:b,flags:j}=h;return a([d,{source:b,flags:j}],h)}case MAP:{const b=[],j=a([d,b],h);for(const[_e,$]of h)(i||!(shouldSkip(typeOf(_e))||shouldSkip(typeOf($))))&&b.push([c(_e),c($)]);return j}case SET:{const b=[],j=a([d,b],h);for(const _e of h)(i||!shouldSkip(typeOf(_e)))&&b.push(c(_e));return j}}const{message:_}=h;return a([d,{name:g,message:_}],h)};return c},serialize$1=(i,{json:e,lossy:o}={})=>{const s=[];return serializer(!(e||o),!!e,new Map,s)(i),s},structuredClone$1=typeof structuredClone=="function"?(i,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize$1(i,e)):structuredClone(i):(i,e)=>deserialize(serialize$1(i,e));function defaultFootnoteBackContent(i,e){const o=[{type:"text",value:""}];return e>1&&o.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),o}function defaultFootnoteBackLabel(i,e){return"Back to reference "+(i+1)+(e>1?"-"+e:"")}function footer(i){const e=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",o=i.options.footnoteBackContent||defaultFootnoteBackContent,s=i.options.footnoteBackLabel||defaultFootnoteBackLabel,a=i.options.footnoteLabel||"Footnotes",c=i.options.footnoteLabelTagName||"h2",h=i.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let g=-1;for(;++g<i.footnoteOrder.length;){const _=i.footnoteById.get(i.footnoteOrder[g]);if(!_)continue;const b=i.all(_),j=String(_.identifier).toUpperCase(),_e=normalizeUri(j.toLowerCase());let $=0;const et=[],rt=i.footnoteCounts.get(j);for(;rt!==void 0&&++$<=rt;){et.length>0&&et.push({type:"text",value:" "});let nt=typeof o=="string"?o:o(g,$);typeof nt=="string"&&(nt={type:"text",value:nt}),et.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_e+($>1?"-"+$:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(g,$),className:["data-footnote-backref"]},children:Array.isArray(nt)?nt:[nt]})}const st=b[b.length-1];if(st&&st.type==="element"&&st.tagName==="p"){const nt=st.children[st.children.length-1];nt&&nt.type==="text"?nt.value+=" ":st.children.push({type:"text",value:" "}),st.children.push(...et)}else b.push(...et);const tt={type:"element",tagName:"li",properties:{id:e+"fn-"+_e},children:i.wrap(b,!0)};i.patch(_,tt),d.push(tt)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:c,properties:{...structuredClone$1(h),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(d,!0)},{type:"text",value:`
`}]}}const convert$1=function(i){if(i==null)return ok$1;if(typeof i=="function")return castFactory$1(i);if(typeof i=="object")return Array.isArray(i)?anyFactory$1(i):propsFactory$1(i);if(typeof i=="string")return typeFactory$1(i);throw new Error("Expected function, string, or object as test")};function anyFactory$1(i){const e=[];let o=-1;for(;++o<i.length;)e[o]=convert$1(i[o]);return castFactory$1(s);function s(...a){let c=-1;for(;++c<e.length;)if(e[c].apply(this,a))return!0;return!1}}function propsFactory$1(i){const e=i;return castFactory$1(o);function o(s){const a=s;let c;for(c in i)if(a[c]!==e[c])return!1;return!0}}function typeFactory$1(i){return castFactory$1(e);function e(o){return o&&o.type===i}}function castFactory$1(i){return e;function e(o,s,a){return!!(looksLikeANode(o)&&i.call(this,o,typeof s=="number"?s:void 0,a||void 0))}}function ok$1(){return!0}function looksLikeANode(i){return i!==null&&typeof i=="object"&&"type"in i}function color$1(i){return i}const empty=[],CONTINUE$1=!0,EXIT$1=!1,SKIP$1="skip";function visitParents$1(i,e,o,s){let a;typeof e=="function"&&typeof o!="function"?(s=o,o=e):a=e;const c=convert$1(a),h=s?-1:1;d(i,void 0,[])();function d(g,_,b){const j=g&&typeof g=="object"?g:{};if(typeof j.type=="string"){const $=typeof j.tagName=="string"?j.tagName:typeof j.name=="string"?j.name:void 0;Object.defineProperty(_e,"name",{value:"node ("+(g.type+($?"<"+$+">":""))+")"})}return _e;function _e(){let $=empty,et,rt,st;if((!e||c(g,_,b[b.length-1]||void 0))&&($=toResult$1(o(g,b)),$[0]===EXIT$1))return $;if("children"in g&&g.children){const tt=g;if(tt.children&&$[0]!==SKIP$1)for(rt=(s?tt.children.length:-1)+h,st=b.concat(tt);rt>-1&&rt<tt.children.length;){const nt=tt.children[rt];if(et=d(nt,rt,st)(),et[0]===EXIT$1)return et;rt=typeof et[1]=="number"?et[1]:rt+h}}return $}}}function toResult$1(i){return Array.isArray(i)?i:typeof i=="number"?[CONTINUE$1,i]:i==null?empty:[i]}function visit$1(i,e,o,s){let a,c,h;typeof e=="function"&&typeof o!="function"?(c=void 0,h=e,a=o):(c=e,h=o,a=s),visitParents$1(i,c,d,a);function d(g,_){const b=_[_.length-1],j=b?b.children.indexOf(g):void 0;return h(g,j,b)}}const own$1={}.hasOwnProperty,emptyOptions$1={};function createState(i,e){const o=e||emptyOptions$1,s=new Map,a=new Map,c=new Map,h={...handlers,...o.handlers},d={all:_,applyData,definitionById:s,footnoteById:a,footnoteCounts:c,footnoteOrder:[],handlers:h,one:g,options:o,patch,wrap:wrap$1};return visit$1(i,function(b){if(b.type==="definition"||b.type==="footnoteDefinition"){const j=b.type==="definition"?s:a,_e=String(b.identifier).toUpperCase();j.has(_e)||j.set(_e,b)}}),d;function g(b,j){const _e=b.type,$=d.handlers[_e];if(own$1.call(d.handlers,_e)&&$)return $(d,b,j);if(d.options.passThrough&&d.options.passThrough.includes(_e)){if("children"in b){const{children:rt,...st}=b,tt=structuredClone$1(st);return tt.children=d.all(b),tt}return structuredClone$1(b)}return(d.options.unknownHandler||defaultUnknownHandler)(d,b,j)}function _(b){const j=[];if("children"in b){const _e=b.children;let $=-1;for(;++$<_e.length;){const et=d.one(_e[$],b);if(et){if($&&_e[$-1].type==="break"&&(!Array.isArray(et)&&et.type==="text"&&(et.value=trimMarkdownSpaceStart(et.value)),!Array.isArray(et)&&et.type==="element")){const rt=et.children[0];rt&&rt.type==="text"&&(rt.value=trimMarkdownSpaceStart(rt.value))}Array.isArray(et)?j.push(...et):j.push(et)}}}return j}}function patch(i,e){i.position&&(e.position=position$1(i))}function applyData(i,e){let o=e;if(i&&i.data){const s=i.data.hName,a=i.data.hChildren,c=i.data.hProperties;if(typeof s=="string")if(o.type==="element")o.tagName=s;else{const h="children"in o?o.children:[o];o={type:"element",tagName:s,properties:{},children:h}}o.type==="element"&&c&&Object.assign(o.properties,structuredClone$1(c)),"children"in o&&o.children&&a!==null&&a!==void 0&&(o.children=a)}return o}function defaultUnknownHandler(i,e){const o=e.data||{},s="value"in e&&!(own$1.call(o,"hProperties")||own$1.call(o,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function wrap$1(i,e){const o=[];let s=-1;for(e&&o.push({type:"text",value:`
`});++s<i.length;)s&&o.push({type:"text",value:`
`}),o.push(i[s]);return e&&i.length>0&&o.push({type:"text",value:`
`}),o}function trimMarkdownSpaceStart(i){let e=0,o=i.charCodeAt(e);for(;o===9||o===32;)e++,o=i.charCodeAt(e);return i.slice(e)}function toHast(i,e){const o=createState(i,e),s=o.one(i,void 0),a=footer(o),c=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&c.children.push({type:"text",value:`
`},a),c}function remarkRehype(i,e){return i&&"run"in i?async function(o,s){const a=toHast(o,{file:s,...e});await i.run(a,s)}:function(o,s){return toHast(o,{file:s,...e||i})}}function bail(i){if(i)throw i}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function(e){return typeof Array.isArray=="function"?Array.isArray(e):toStr.call(e)==="[object Array]"},isPlainObject$1=function(e){if(!e||toStr.call(e)!=="[object Object]")return!1;var o=hasOwn.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&hasOwn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!s)return!1;var a;for(a in e);return typeof a>"u"||hasOwn.call(e,a)},setProperty=function(e,o){defineProperty&&o.name==="__proto__"?defineProperty(e,o.name,{enumerable:!0,configurable:!0,value:o.newValue,writable:!0}):e[o.name]=o.newValue},getProperty=function(e,o){if(o==="__proto__")if(hasOwn.call(e,o)){if(gOPD)return gOPD(e,o).value}else return;return e[o]},extend=function i(){var e,o,s,a,c,h,d=arguments[0],g=1,_=arguments.length,b=!1;for(typeof d=="boolean"&&(b=d,d=arguments[1]||{},g=2),(d==null||typeof d!="object"&&typeof d!="function")&&(d={});g<_;++g)if(e=arguments[g],e!=null)for(o in e)s=getProperty(d,o),a=getProperty(e,o),d!==a&&(b&&a&&(isPlainObject$1(a)||(c=isArray(a)))?(c?(c=!1,h=s&&isArray(s)?s:[]):h=s&&isPlainObject$1(s)?s:{},setProperty(d,{name:o,newValue:i(b,h,a)})):typeof a<"u"&&setProperty(d,{name:o,newValue:a}));return d};const extend$1=getDefaultExportFromCjs(extend);function isPlainObject(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function trough(){const i=[],e={run:o,use:s};return e;function o(...a){let c=-1;const h=a.pop();if(typeof h!="function")throw new TypeError("Expected function as last argument, not "+h);d(null,...a);function d(g,..._){const b=i[++c];let j=-1;if(g){h(g);return}for(;++j<a.length;)(_[j]===null||_[j]===void 0)&&(_[j]=a[j]);a=_,b?wrap(b,d)(..._):h(null,..._)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return i.push(a),e}}function wrap(i,e){let o;return s;function s(...h){const d=i.length>h.length;let g;d&&h.push(a);try{g=i.apply(this,h)}catch(_){const b=_;if(d&&o)throw b;return a(b)}d||(g&&g.then&&typeof g.then=="function"?g.then(c,a):g instanceof Error?a(g):c(g))}function a(h,...d){o||(o=!0,e(h,...d))}function c(h){a(null,h)}}const path$1={basename,dirname,extname,join,sep:"/"};function basename(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(i);let o=0,s=-1,a=i.length,c;if(e===void 0||e.length===0||e.length>i.length){for(;a--;)if(i.codePointAt(a)===47){if(c){o=a+1;break}}else s<0&&(c=!0,s=a+1);return s<0?"":i.slice(o,s)}if(e===i)return"";let h=-1,d=e.length-1;for(;a--;)if(i.codePointAt(a)===47){if(c){o=a+1;break}}else h<0&&(c=!0,h=a+1),d>-1&&(i.codePointAt(a)===e.codePointAt(d--)?d<0&&(s=a):(d=-1,s=h));return o===s?s=h:s<0&&(s=i.length),i.slice(o,s)}function dirname(i){if(assertPath$1(i),i.length===0)return".";let e=-1,o=i.length,s;for(;--o;)if(i.codePointAt(o)===47){if(s){e=o;break}}else s||(s=!0);return e<0?i.codePointAt(0)===47?"/":".":e===1&&i.codePointAt(0)===47?"//":i.slice(0,e)}function extname(i){assertPath$1(i);let e=i.length,o=-1,s=0,a=-1,c=0,h;for(;e--;){const d=i.codePointAt(e);if(d===47){if(h){s=e+1;break}continue}o<0&&(h=!0,o=e+1),d===46?a<0?a=e:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||o<0||c===0||c===1&&a===o-1&&a===s+1?"":i.slice(a,o)}function join(...i){let e=-1,o;for(;++e<i.length;)assertPath$1(i[e]),i[e]&&(o=o===void 0?i[e]:o+"/"+i[e]);return o===void 0?".":normalize(o)}function normalize(i){assertPath$1(i);const e=i.codePointAt(0)===47;let o=normalizeString(i,!e);return o.length===0&&!e&&(o="."),o.length>0&&i.codePointAt(i.length-1)===47&&(o+="/"),e?"/"+o:o}function normalizeString(i,e){let o="",s=0,a=-1,c=0,h=-1,d,g;for(;++h<=i.length;){if(h<i.length)d=i.codePointAt(h);else{if(d===47)break;d=47}if(d===47){if(!(a===h-1||c===1))if(a!==h-1&&c===2){if(o.length<2||s!==2||o.codePointAt(o.length-1)!==46||o.codePointAt(o.length-2)!==46){if(o.length>2){if(g=o.lastIndexOf("/"),g!==o.length-1){g<0?(o="",s=0):(o=o.slice(0,g),s=o.length-1-o.lastIndexOf("/")),a=h,c=0;continue}}else if(o.length>0){o="",s=0,a=h,c=0;continue}}e&&(o=o.length>0?o+"/..":"..",s=2)}else o.length>0?o+="/"+i.slice(a+1,h):o=i.slice(a+1,h),s=h-a-1;a=h,c=0}else d===46&&c>-1?c++:c=-1}return o}function assertPath$1(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}const proc={cwd};function cwd(){return"/"}function isUrl(i){return!!(i!==null&&typeof i=="object"&&"href"in i&&i.href&&"protocol"in i&&i.protocol&&i.auth===void 0)}function urlToPath(i){if(typeof i=="string")i=new URL(i);else if(!isUrl(i)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+i+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(i.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(i)}function getPathFromURLPosix(i){if(i.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=i.pathname;let o=-1;for(;++o<e.length;)if(e.codePointAt(o)===37&&e.codePointAt(o+1)===50){const s=e.codePointAt(o+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let o;e?isUrl(e)?o={path:e}:typeof e=="string"||isUint8Array$1(e)?o={value:e}:o=e:o={},this.cwd=proc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<order.length;){const c=order[s];c in o&&o[c]!==void 0&&o[c]!==null&&(this[c]=c==="history"?[...o[c]]:o[c])}let a;for(a in o)order.includes(a)||(this[a]=o[a])}get basename(){return typeof this.path=="string"?path$1.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=path$1.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?path$1.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=path$1.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?path$1.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=path$1.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?path$1.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=path$1.join(this.dirname||"",e+(this.extname||""))}fail(e,o,s){const a=this.message(e,o,s);throw a.fatal=!0,a}info(e,o,s){const a=this.message(e,o,s);return a.fatal=void 0,a}message(e,o,s){const a=new VFileMessage(e,o,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(i,e){if(i&&i.includes(path$1.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+path$1.sep+"`")}function assertNonEmpty(i,e){if(!i)throw new Error("`"+e+"` cannot be empty")}function assertPath(i,e){if(!i)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const CallableInstance=function(i){const s=this.constructor.prototype,a=s[i],c=function(){return a.apply(c,arguments)};Object.setPrototypeOf(c,s);const h=Object.getOwnPropertyNames(a);for(const d of h){const g=Object.getOwnPropertyDescriptor(a,d);g&&Object.defineProperty(c,d,g)}return c},own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Processor;let o=-1;for(;++o<this.attachers.length;){const s=this.attachers[o];e.use(...s)}return e.data(extend$1(!0,{},this.namespace)),e}data(e,o){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=o,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[o,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=o.call(e,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const o=vfile(e),s=this.parser||this.Parser;return assertParser("parse",s),s(String(o),o)}process(e,o){const s=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),o?a(void 0,o):new Promise(a);function a(c,h){const d=vfile(e),g=s.parse(d);s.run(g,d,function(b,j,_e){if(b||!j||!_e)return _(b);const $=j,et=s.stringify($,_e);looksLikeAValue(et)?_e.value=et:_e.result=et,_(b,_e)});function _(b,j){b||!j?h(b):c?c(j):o(void 0,j)}}}processSync(e){let o=!1,s;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,a),assertDone("processSync","process",o),s;function a(c,h){o=!0,bail(c),s=h}}run(e,o,s){assertNode(e),this.freeze();const a=this.transformers;return!s&&typeof o=="function"&&(s=o,o=void 0),s?c(void 0,s):new Promise(c);function c(h,d){const g=vfile(o);a.run(e,g,_);function _(b,j,_e){const $=j||e;b?d(b):h?h($):s(void 0,$,_e)}}}runSync(e,o){let s=!1,a;return this.run(e,o,c),assertDone("runSync","run",s),a;function c(h,d){bail(h),a=d,s=!0}}stringify(e,o){this.freeze();const s=vfile(o),a=this.compiler||this.Compiler;return assertCompiler("stringify",a),assertNode(e),a(e,s)}use(e,...o){const s=this.attachers,a=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")g(e,o);else if(typeof e=="object")Array.isArray(e)?d(e):h(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function c(_){if(typeof _=="function")g(_,[]);else if(typeof _=="object")if(Array.isArray(_)){const[b,...j]=_;g(b,j)}else h(_);else throw new TypeError("Expected usable value, not `"+_+"`")}function h(_){if(!("plugins"in _)&&!("settings"in _))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(_.plugins),_.settings&&(a.settings=extend$1(!0,a.settings,_.settings))}function d(_){let b=-1;if(_!=null)if(Array.isArray(_))for(;++b<_.length;){const j=_[b];c(j)}else throw new TypeError("Expected a list of plugins, not `"+_+"`")}function g(_,b){let j=-1,_e=-1;for(;++j<s.length;)if(s[j][0]===_){_e=j;break}if(_e===-1)s.push([_,...b]);else if(b.length>0){let[$,...et]=b;const rt=s[_e][1];isPlainObject(rt)&&isPlainObject($)&&($=extend$1(!0,rt,$)),s[_e]=[_,$,...et]}}}}const unified=new Processor().freeze();function assertParser(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `parser`")}function assertCompiler(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `compiler`")}function assertUnfrozen(i,e){if(e)throw new Error("Cannot call `"+i+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(i){if(!isPlainObject(i)||typeof i.type!="string")throw new TypeError("Expected node, got `"+i+"`")}function assertDone(i,e,o){if(!o)throw new Error("`"+i+"` finished async. Use `"+e+"` instead")}function vfile(i){return looksLikeAVFile(i)?i:new VFile(i)}function looksLikeAVFile(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function looksLikeAValue(i){return typeof i=="string"||isUint8Array(i)}function isUint8Array(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(i){const e=i.allowedElements,o=i.allowElement,s=i.children||"",a=i.className,c=i.components,h=i.disallowedElements,d=i.rehypePlugins||emptyPlugins,g=i.remarkPlugins||emptyPlugins,_=i.remarkRehypeOptions?{...i.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions,b=i.skipHtml,j=i.unwrapDisallowed,_e=i.urlTransform||defaultUrlTransform,$=unified().use(remarkParse).use(g).use(remarkRehype,_).use(d),et=new VFile;typeof s=="string"&&(et.value=s);for(const nt of deprecations)Object.hasOwn(i,nt.from)&&(""+nt.from+(nt.to?"use `"+nt.to+"` instead":"remove it")+changelog+nt.id,void 0);const rt=$.parse(et);let st=$.runSync(rt,et);return a&&(st={type:"element",tagName:"div",properties:{className:a},children:st.type==="root"?st.children:[st]}),visit$1(st,tt),toJsxRuntime(st,{Fragment:jsxRuntimeExports.Fragment,components:c,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function tt(nt,it,pt){if(nt.type==="raw"&&pt&&typeof it=="number")return b?pt.children.splice(it,1):pt.children[it]={type:"text",value:nt.value},it;if(nt.type==="element"){let lt;for(lt in urlAttributes)if(Object.hasOwn(urlAttributes,lt)&&Object.hasOwn(nt.properties,lt)){const at=nt.properties[lt],At=urlAttributes[lt];(At===null||At.includes(nt.tagName))&&(nt.properties[lt]=_e(String(at||""),lt,nt))}}if(nt.type==="element"){let lt=e?!e.includes(nt.tagName):h?h.includes(nt.tagName):!1;if(!lt&&o&&typeof it=="number"&&(lt=!o(nt,it,pt)),lt&&pt&&typeof it=="number")return j&&nt.children?pt.children.splice(it,1,...nt.children):pt.children.splice(it,1),it}}}function defaultUrlTransform(i){const e=i.indexOf(":"),o=i.indexOf("?"),s=i.indexOf("#"),a=i.indexOf("/");return e<0||a>-1&&e>a||o>-1&&e>o||s>-1&&e>s||safeProtocol.test(i.slice(0,e))?i:""}function ccount(i,e){const o=String(i);if(typeof e!="string")throw new TypeError("Expected character");let s=0,a=o.indexOf(e);for(;a!==-1;)s++,a=o.indexOf(e,a+e.length);return s}function escapeStringRegexp(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace(i,e,o){const a=convert$1((o||{}).ignore||[]),c=toPairs(e);let h=-1;for(;++h<c.length;)visitParents$1(i,"text",d);function d(_,b){let j=-1,_e;for(;++j<b.length;){const $=b[j],et=_e?_e.children:void 0;if(a($,et?et.indexOf($):void 0,_e))return;_e=$}if(_e)return g(_,b)}function g(_,b){const j=b[b.length-1],_e=c[h][0],$=c[h][1];let et=0;const st=j.children.indexOf(_);let tt=!1,nt=[];_e.lastIndex=0;let it=_e.exec(_.value);for(;it;){const pt=it.index,lt={index:it.index,input:it.input,stack:[...b,_]};let at=$(...it,lt);if(typeof at=="string"&&(at=at.length>0?{type:"text",value:at}:void 0),at===!1?_e.lastIndex=pt+1:(et!==pt&&nt.push({type:"text",value:_.value.slice(et,pt)}),Array.isArray(at)?nt.push(...at):at&&nt.push(at),et=pt+it[0].length,tt=!0),!_e.global)break;it=_e.exec(_.value)}return tt?(et<_.value.length&&nt.push({type:"text",value:_.value.slice(et)}),j.children.splice(st,1,...nt)):nt=[_],st+nt.length}}function toPairs(i){const e=[];if(!Array.isArray(i))throw new TypeError("Expected find and replace tuple or list of tuples");const o=!i[0]||Array.isArray(i[0])?i:[i];let s=-1;for(;++s<o.length;){const a=o[s];e.push([toExpression(a[0]),toFunction(a[1])])}return e}function toExpression(i){return typeof i=="string"?new RegExp(escapeStringRegexp(i),"g"):i}function toFunction(i){return typeof i=="function"?i:function(){return i}}const inConstruct="phrasing",notInConstruct=["autolink","link","image","label"];function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct,notInConstruct}]}}function enterLiteralAutolink(i){this.enter({type:"link",title:null,url:"",children:[]},i)}function enterLiteralAutolinkValue(i){this.config.enter.autolinkProtocol.call(this,i)}function exitLiteralAutolinkHttp(i){this.config.exit.autolinkProtocol.call(this,i)}function exitLiteralAutolinkWww(i){this.config.exit.data.call(this,i);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(i)}function exitLiteralAutolinkEmail(i){this.config.exit.autolinkEmail.call(this,i)}function exitLiteralAutolink(i){this.exit(i)}function transformGfmAutolinkLiterals(i){findAndReplace(i,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,findEmail]],{ignore:["link","linkReference"]})}function findUrl(i,e,o,s,a){let c="";if(!previous(a)||(/^w/i.test(e)&&(o=e+o,e="",c="http://"),!isCorrectDomain(o)))return!1;const h=splitUrl(o+s);if(!h[0])return!1;const d={type:"link",title:null,url:c+e+h[0],children:[{type:"text",value:e+h[0]}]};return h[1]?[d,{type:"text",value:h[1]}]:d}function findEmail(i,e,o,s){return!previous(s,!0)||/[-\d_]$/.test(o)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+o,children:[{type:"text",value:e+"@"+o}]}}function isCorrectDomain(i){const e=i.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function splitUrl(i){const e=/[!"&'),.:;<>?\]}]+$/.exec(i);if(!e)return[i,void 0];i=i.slice(0,e.index);let o=e[0],s=o.indexOf(")");const a=ccount(i,"(");let c=ccount(i,")");for(;s!==-1&&a>c;)i+=o.slice(0,s+1),o=o.slice(s+1),s=o.indexOf(")"),c++;return[i,o]}function previous(i,e){const o=i.input.charCodeAt(i.index-1);return(i.index===0||unicodeWhitespace(o)||unicodePunctuation(o))&&(!e||o!==47)}footnoteReference.peek=footnoteReferencePeek;function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteDefinition:enterFootnoteDefinition,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteCallString:enterFootnoteCallString},exit:{gfmFootnoteDefinition:exitFootnoteDefinition,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteCallString:exitFootnoteCallString}}}function gfmFootnoteToMarkdown(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition,footnoteReference}}}function enterFootnoteDefinition(i){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},i)}function enterFootnoteDefinitionLabelString(){this.buffer()}function exitFootnoteDefinitionLabelString(i){const e=this.resume(),o=this.stack[this.stack.length-1];o.type,o.label=e,o.identifier=normalizeIdentifier(this.sliceSerialize(i)).toLowerCase()}function exitFootnoteDefinition(i){this.exit(i)}function enterFootnoteCall(i){this.enter({type:"footnoteReference",identifier:"",label:""},i)}function enterFootnoteCallString(){this.buffer()}function exitFootnoteCallString(i){const e=this.resume(),o=this.stack[this.stack.length-1];o.type,o.label=e,o.identifier=normalizeIdentifier(this.sliceSerialize(i)).toLowerCase()}function exitFootnoteCall(i){this.exit(i)}function footnoteReference(i,e,o,s){const a=o.createTracker(s);let c=a.move("[^");const h=o.enter("footnoteReference"),d=o.enter("reference");return c+=a.move(o.safe(o.associationId(i),{...a.current(),before:c,after:"]"})),d(),h(),c+=a.move("]"),c}function footnoteReferencePeek(){return"["}function footnoteDefinition(i,e,o,s){const a=o.createTracker(s);let c=a.move("[^");const h=o.enter("footnoteDefinition"),d=o.enter("label");return c+=a.move(o.safe(o.associationId(i),{...a.current(),before:c,after:"]"})),d(),c+=a.move("]:"+(i.children&&i.children.length>0?" ":"")),a.shift(4),c+=a.move(o.indentLines(o.containerFlow(i,a.current()),map$2)),h(),c}function map$2(i,e,o){return e===0?i:(o?"":"    ")+i}const constructsWithoutStrikethrough=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];handleDelete.peek=peekDelete;function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(i){this.enter({type:"delete",children:[]},i)}function exitStrikethrough(i){this.exit(i)}function handleDelete(i,e,o,s){const a=o.createTracker(s),c=o.enter("strikethrough");let h=a.move("~~");return h+=o.containerPhrasing(i,{...a.current(),before:h,after:"~"}),h+=a.move("~~"),c(),h}function peekDelete(){return"~"}function markdownTable(i,e={}){const o=(e.align||[]).concat(),s=e.stringLength||defaultStringLength,a=[],c=[],h=[],d=[];let g=0,_=-1;for(;++_<i.length;){const et=[],rt=[];let st=-1;for(i[_].length>g&&(g=i[_].length);++st<i[_].length;){const tt=serialize(i[_][st]);if(e.alignDelimiters!==!1){const nt=s(tt);rt[st]=nt,(d[st]===void 0||nt>d[st])&&(d[st]=nt)}et.push(tt)}c[_]=et,h[_]=rt}let b=-1;if(typeof o=="object"&&"length"in o)for(;++b<g;)a[b]=toAlignment(o[b]);else{const et=toAlignment(o);for(;++b<g;)a[b]=et}b=-1;const j=[],_e=[];for(;++b<g;){const et=a[b];let rt="",st="";et===99?(rt=":",st=":"):et===108?rt=":":et===114&&(st=":");let tt=e.alignDelimiters===!1?1:Math.max(1,d[b]-rt.length-st.length);const nt=rt+"-".repeat(tt)+st;e.alignDelimiters!==!1&&(tt=rt.length+tt+st.length,tt>d[b]&&(d[b]=tt),_e[b]=tt),j[b]=nt}c.splice(1,0,j),h.splice(1,0,_e),_=-1;const $=[];for(;++_<c.length;){const et=c[_],rt=h[_];b=-1;const st=[];for(;++b<g;){const tt=et[b]||"";let nt="",it="";if(e.alignDelimiters!==!1){const pt=d[b]-(rt[b]||0),lt=a[b];lt===114?nt=" ".repeat(pt):lt===99?pt%2?(nt=" ".repeat(pt/2+.5),it=" ".repeat(pt/2-.5)):(nt=" ".repeat(pt/2),it=nt):it=" ".repeat(pt)}e.delimiterStart!==!1&&!b&&st.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&tt==="")&&(e.delimiterStart!==!1||b)&&st.push(" "),e.alignDelimiters!==!1&&st.push(nt),st.push(tt),e.alignDelimiters!==!1&&st.push(it),e.padding!==!1&&st.push(" "),(e.delimiterEnd!==!1||b!==g-1)&&st.push("|")}$.push(e.delimiterEnd===!1?st.join("").replace(/ +$/,""):st.join(""))}return $.join(`
`)}function serialize(i){return i==null?"":String(i)}function defaultStringLength(i){return i.length}function toAlignment(i){const e=typeof i=="string"?i.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function blockquote(i,e,o,s){const a=o.enter("blockquote"),c=o.createTracker(s);c.move("> "),c.shift(2);const h=o.indentLines(o.containerFlow(i,c.current()),map$1);return a(),h}function map$1(i,e,o){return">"+(o?"":" ")+i}function patternInScope(i,e){return listInScope(i,e.inConstruct,!0)&&!listInScope(i,e.notInConstruct,!1)}function listInScope(i,e,o){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return o;let s=-1;for(;++s<e.length;)if(i.includes(e[s]))return!0;return!1}function hardBreak(i,e,o,s){let a=-1;for(;++a<o.unsafe.length;)if(o.unsafe[a].character===`
`&&patternInScope(o.stack,o.unsafe[a]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function longestStreak(i,e){const o=String(i);let s=o.indexOf(e),a=s,c=0,h=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===a?++c>h&&(h=c):c=1,a=s+e.length,s=o.indexOf(e,a);return h}function formatCodeAsIndented(i,e){return!!(e.options.fences===!1&&i.value&&!i.lang&&/[^ \r\n]/.test(i.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(i.value))}function checkFence(i){const e=i.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function code$1(i,e,o,s){const a=checkFence(o),c=i.value||"",h=a==="`"?"GraveAccent":"Tilde";if(formatCodeAsIndented(i,o)){const j=o.enter("codeIndented"),_e=o.indentLines(c,map);return j(),_e}const d=o.createTracker(s),g=a.repeat(Math.max(longestStreak(c,a)+1,3)),_=o.enter("codeFenced");let b=d.move(g);if(i.lang){const j=o.enter(`codeFencedLang${h}`);b+=d.move(o.safe(i.lang,{before:b,after:" ",encode:["`"],...d.current()})),j()}if(i.lang&&i.meta){const j=o.enter(`codeFencedMeta${h}`);b+=d.move(" "),b+=d.move(o.safe(i.meta,{before:b,after:`
`,encode:["`"],...d.current()})),j()}return b+=d.move(`
`),c&&(b+=d.move(c+`
`)),b+=d.move(g),_(),b}function map(i,e,o){return(o?"":"    ")+i}function checkQuote(i){const e=i.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function definition(i,e,o,s){const a=checkQuote(o),c=a==='"'?"Quote":"Apostrophe",h=o.enter("definition");let d=o.enter("label");const g=o.createTracker(s);let _=g.move("[");return _+=g.move(o.safe(o.associationId(i),{before:_,after:"]",...g.current()})),_+=g.move("]: "),d(),!i.url||/[\0- \u007F]/.test(i.url)?(d=o.enter("destinationLiteral"),_+=g.move("<"),_+=g.move(o.safe(i.url,{before:_,after:">",...g.current()})),_+=g.move(">")):(d=o.enter("destinationRaw"),_+=g.move(o.safe(i.url,{before:_,after:i.title?" ":`
`,...g.current()}))),d(),i.title&&(d=o.enter(`title${c}`),_+=g.move(" "+a),_+=g.move(o.safe(i.title,{before:_,after:a,...g.current()})),_+=g.move(a),d()),h(),_}function checkEmphasis(i){const e=i.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}emphasis.peek=emphasisPeek;function emphasis(i,e,o,s){const a=checkEmphasis(o),c=o.enter("emphasis"),h=o.createTracker(s);let d=h.move(a);return d+=h.move(o.containerPhrasing(i,{before:d,after:a,...h.current()})),d+=h.move(a),c(),d}function emphasisPeek(i,e,o){return o.options.emphasis||"*"}function formatHeadingAsSetext(i,e){let o=!1;return visit$1(i,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return o=!0,EXIT$1}),!!((!i.depth||i.depth<3)&&toString$1(i)&&(e.options.setext||o))}function heading(i,e,o,s){const a=Math.max(Math.min(6,i.depth||1),1),c=o.createTracker(s);if(formatHeadingAsSetext(i,o)){const b=o.enter("headingSetext"),j=o.enter("phrasing"),_e=o.containerPhrasing(i,{...c.current(),before:`
`,after:`
`});return j(),b(),_e+`
`+(a===1?"=":"-").repeat(_e.length-(Math.max(_e.lastIndexOf("\r"),_e.lastIndexOf(`
`))+1))}const h="#".repeat(a),d=o.enter("headingAtx"),g=o.enter("phrasing");c.move(h+" ");let _=o.containerPhrasing(i,{before:"# ",after:`
`,...c.current()});return/^[\t ]/.test(_)&&(_="&#x"+_.charCodeAt(0).toString(16).toUpperCase()+";"+_.slice(1)),_=_?h+" "+_:h,o.options.closeAtx&&(_+=" "+h),g(),d(),_}html.peek=htmlPeek;function html(i){return i.value||""}function htmlPeek(){return"<"}image.peek=imagePeek;function image(i,e,o,s){const a=checkQuote(o),c=a==='"'?"Quote":"Apostrophe",h=o.enter("image");let d=o.enter("label");const g=o.createTracker(s);let _=g.move("![");return _+=g.move(o.safe(i.alt,{before:_,after:"]",...g.current()})),_+=g.move("]("),d(),!i.url&&i.title||/[\0- \u007F]/.test(i.url)?(d=o.enter("destinationLiteral"),_+=g.move("<"),_+=g.move(o.safe(i.url,{before:_,after:">",...g.current()})),_+=g.move(">")):(d=o.enter("destinationRaw"),_+=g.move(o.safe(i.url,{before:_,after:i.title?" ":")",...g.current()}))),d(),i.title&&(d=o.enter(`title${c}`),_+=g.move(" "+a),_+=g.move(o.safe(i.title,{before:_,after:a,...g.current()})),_+=g.move(a),d()),_+=g.move(")"),h(),_}function imagePeek(){return"!"}imageReference.peek=imageReferencePeek;function imageReference(i,e,o,s){const a=i.referenceType,c=o.enter("imageReference");let h=o.enter("label");const d=o.createTracker(s);let g=d.move("![");const _=o.safe(i.alt,{before:g,after:"]",...d.current()});g+=d.move(_+"]["),h();const b=o.stack;o.stack=[],h=o.enter("reference");const j=o.safe(o.associationId(i),{before:g,after:"]",...d.current()});return h(),o.stack=b,c(),a==="full"||!_||_!==j?g+=d.move(j+"]"):a==="shortcut"?g=g.slice(0,-1):g+=d.move("]"),g}function imageReferencePeek(){return"!"}inlineCode.peek=inlineCodePeek;function inlineCode(i,e,o){let s=i.value||"",a="`",c=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(s);)a+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++c<o.unsafe.length;){const h=o.unsafe[c],d=o.compilePattern(h);let g;if(h.atBreak)for(;g=d.exec(s);){let _=g.index;s.charCodeAt(_)===10&&s.charCodeAt(_-1)===13&&_--,s=s.slice(0,_)+" "+s.slice(g.index+1)}}return a+s+a}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(i,e){const o=toString$1(i);return!!(!e.options.resourceLink&&i.url&&!i.title&&i.children&&i.children.length===1&&i.children[0].type==="text"&&(o===i.url||"mailto:"+o===i.url)&&/^[a-z][a-z+.-]+:/i.test(i.url)&&!/[\0- <>\u007F]/.test(i.url))}link.peek=linkPeek;function link(i,e,o,s){const a=checkQuote(o),c=a==='"'?"Quote":"Apostrophe",h=o.createTracker(s);let d,g;if(formatLinkAsAutolink(i,o)){const b=o.stack;o.stack=[],d=o.enter("autolink");let j=h.move("<");return j+=h.move(o.containerPhrasing(i,{before:j,after:">",...h.current()})),j+=h.move(">"),d(),o.stack=b,j}d=o.enter("link"),g=o.enter("label");let _=h.move("[");return _+=h.move(o.containerPhrasing(i,{before:_,after:"](",...h.current()})),_+=h.move("]("),g(),!i.url&&i.title||/[\0- \u007F]/.test(i.url)?(g=o.enter("destinationLiteral"),_+=h.move("<"),_+=h.move(o.safe(i.url,{before:_,after:">",...h.current()})),_+=h.move(">")):(g=o.enter("destinationRaw"),_+=h.move(o.safe(i.url,{before:_,after:i.title?" ":")",...h.current()}))),g(),i.title&&(g=o.enter(`title${c}`),_+=h.move(" "+a),_+=h.move(o.safe(i.title,{before:_,after:a,...h.current()})),_+=h.move(a),g()),_+=h.move(")"),d(),_}function linkPeek(i,e,o){return formatLinkAsAutolink(i,o)?"<":"["}linkReference.peek=linkReferencePeek;function linkReference(i,e,o,s){const a=i.referenceType,c=o.enter("linkReference");let h=o.enter("label");const d=o.createTracker(s);let g=d.move("[");const _=o.containerPhrasing(i,{before:g,after:"]",...d.current()});g+=d.move(_+"]["),h();const b=o.stack;o.stack=[],h=o.enter("reference");const j=o.safe(o.associationId(i),{before:g,after:"]",...d.current()});return h(),o.stack=b,c(),a==="full"||!_||_!==j?g+=d.move(j+"]"):a==="shortcut"?g=g.slice(0,-1):g+=d.move("]"),g}function linkReferencePeek(){return"["}function checkBullet(i){const e=i.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function checkBulletOther(i){const e=checkBullet(i),o=i.options.bulletOther;if(!o)return e==="*"?"-":"*";if(o!=="*"&&o!=="+"&&o!=="-")throw new Error("Cannot serialize items with `"+o+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(o===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+o+"`) to be different");return o}function checkBulletOrdered(i){const e=i.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function checkRule(i){const e=i.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function list(i,e,o,s){const a=o.enter("list"),c=o.bulletCurrent;let h=i.ordered?checkBulletOrdered(o):checkBullet(o);const d=i.ordered?h==="."?")":".":checkBulletOther(o);let g=e&&o.bulletLastUsed?h===o.bulletLastUsed:!1;if(!i.ordered){const b=i.children?i.children[0]:void 0;if((h==="*"||h==="-")&&b&&(!b.children||!b.children[0])&&o.stack[o.stack.length-1]==="list"&&o.stack[o.stack.length-2]==="listItem"&&o.stack[o.stack.length-3]==="list"&&o.stack[o.stack.length-4]==="listItem"&&o.indexStack[o.indexStack.length-1]===0&&o.indexStack[o.indexStack.length-2]===0&&o.indexStack[o.indexStack.length-3]===0&&(g=!0),checkRule(o)===h&&b){let j=-1;for(;++j<i.children.length;){const _e=i.children[j];if(_e&&_e.type==="listItem"&&_e.children&&_e.children[0]&&_e.children[0].type==="thematicBreak"){g=!0;break}}}}g&&(h=d),o.bulletCurrent=h;const _=o.containerFlow(i,s);return o.bulletLastUsed=h,o.bulletCurrent=c,a(),_}function checkListItemIndent(i){const e=i.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function listItem(i,e,o,s){const a=checkListItemIndent(o);let c=o.bulletCurrent||checkBullet(o);e&&e.type==="list"&&e.ordered&&(c=(typeof e.start=="number"&&e.start>-1?e.start:1)+(o.options.incrementListMarker===!1?0:e.children.indexOf(i))+c);let h=c.length+1;(a==="tab"||a==="mixed"&&(e&&e.type==="list"&&e.spread||i.spread))&&(h=Math.ceil(h/4)*4);const d=o.createTracker(s);d.move(c+" ".repeat(h-c.length)),d.shift(h);const g=o.enter("listItem"),_=o.indentLines(o.containerFlow(i,d.current()),b);return g(),_;function b(j,_e,$){return _e?($?"":" ".repeat(h))+j:($?c:c+" ".repeat(h-c.length))+j}}function paragraph(i,e,o,s){const a=o.enter("paragraph"),c=o.enter("phrasing"),h=o.containerPhrasing(i,s);return c(),a(),h}const phrasing=convert$1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function root(i,e,o,s){return(i.children.some(function(h){return phrasing(h)})?o.containerPhrasing:o.containerFlow).call(o,i,s)}function checkStrong(i){const e=i.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}strong.peek=strongPeek;function strong(i,e,o,s){const a=checkStrong(o),c=o.enter("strong"),h=o.createTracker(s);let d=h.move(a+a);return d+=h.move(o.containerPhrasing(i,{before:d,after:a,...h.current()})),d+=h.move(a+a),c(),d}function strongPeek(i,e,o){return o.options.strong||"*"}function text$1(i,e,o,s){return o.safe(i.value,s)}function checkRuleRepetition(i){const e=i.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function thematicBreak(i,e,o){const s=(checkRule(o)+(o.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(o));return o.options.ruleSpaces?s.slice(0,-1):s}const handle={blockquote,break:hardBreak,code:code$1,definition,emphasis,hardBreak,heading,html,image,imageReference,inlineCode,link,linkReference,list,listItem,paragraph,root,strong,text:text$1,thematicBreak};function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}}}function enterTable(i){const e=i._align;this.enter({type:"table",align:e.map(function(o){return o==="none"?null:o}),children:[]},i),this.data.inTable=!0}function exitTable(i){this.exit(i),this.data.inTable=void 0}function enterRow(i){this.enter({type:"tableRow",children:[]},i)}function exit(i){this.exit(i)}function enterCell(i){this.enter({type:"tableCell",children:[]},i)}function exitCodeText(i){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,replace));const o=this.stack[this.stack.length-1];o.type,o.value=e,this.exit(i)}function replace(i,e){return e==="|"?e:i}function gfmTableToMarkdown(i){const e=i||{},o=e.tableCellPadding,s=e.tablePipeAlign,a=e.stringLength,c=o?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_e,table:h,tableCell:g,tableRow:d}};function h($,et,rt,st){return _(b($,rt,st),$.align)}function d($,et,rt,st){const tt=j($,rt,st),nt=_([tt]);return nt.slice(0,nt.indexOf(`
`))}function g($,et,rt,st){const tt=rt.enter("tableCell"),nt=rt.enter("phrasing"),it=rt.containerPhrasing($,{...st,before:c,after:c});return nt(),tt(),it}function _($,et){return markdownTable($,{align:et,alignDelimiters:s,padding:o,stringLength:a})}function b($,et,rt){const st=$.children;let tt=-1;const nt=[],it=et.enter("table");for(;++tt<st.length;)nt[tt]=j(st[tt],et,rt);return it(),nt}function j($,et,rt){const st=$.children;let tt=-1;const nt=[],it=et.enter("tableRow");for(;++tt<st.length;)nt[tt]=g(st[tt],$,et,rt);return it(),nt}function _e($,et,rt){let st=handle.inlineCode($,et,rt);return rt.stack.includes("tableCell")&&(st=st.replace(/\|/g,"\\$&")),st}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(i){const e=this.stack[this.stack.length-2];e.type,e.checked=i.type==="taskListCheckValueChecked"}function exitParagraphWithTaskListItem(i){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const o=this.stack[this.stack.length-1];o.type;const s=o.children[0];if(s&&s.type==="text"){const a=e.children;let c=-1,h;for(;++c<a.length;){const d=a[c];if(d.type==="paragraph"){h=d;break}}h===o&&(s.value=s.value.slice(1),s.value.length===0?o.children.shift():o.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,o.position.start=Object.assign({},s.position.start)))}}this.exit(i)}function listItemWithTaskListItem(i,e,o,s){const a=i.children[0],c=typeof i.checked=="boolean"&&a&&a.type==="paragraph",h="["+(i.checked?"x":" ")+"] ",d=o.createTracker(s);c&&d.move(h);let g=handle.listItem(i,e,o,{...s,...d.current()});return c&&(g=g.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,_)),g;function _(b){return b+h}}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(i){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(i),gfmTaskListItemToMarkdown()]}}const wwwPrefix={tokenize:tokenizeWwwPrefix,partial:!0},domain={tokenize:tokenizeDomain,partial:!0},path={tokenize:tokenizePath,partial:!0},trail={tokenize:tokenizeTrail,partial:!0},emailDomainDotTrail={tokenize:tokenizeEmailDomainDotTrail,partial:!0},wwwAutolink={tokenize:tokenizeWwwAutolink,previous:previousWww},protocolAutolink={tokenize:tokenizeProtocolAutolink,previous:previousProtocol},emailAutolink={tokenize:tokenizeEmailAutolink,previous:previousEmail},text={};function gfmAutolinkLiteral(){return{text}}let code=48;for(;code<123;)text[code]=emailAutolink,code++,code===58?code=65:code===91&&(code=97);text[43]=emailAutolink;text[45]=emailAutolink;text[46]=emailAutolink;text[95]=emailAutolink;text[72]=[emailAutolink,protocolAutolink];text[104]=[emailAutolink,protocolAutolink];text[87]=[emailAutolink,wwwAutolink];text[119]=[emailAutolink,wwwAutolink];function tokenizeEmailAutolink(i,e,o){const s=this;let a,c;return h;function h(j){return!gfmAtext(j)||!previousEmail.call(s,s.previous)||previousUnbalanced(s.events)?o(j):(i.enter("literalAutolink"),i.enter("literalAutolinkEmail"),d(j))}function d(j){return gfmAtext(j)?(i.consume(j),d):j===64?(i.consume(j),g):o(j)}function g(j){return j===46?i.check(emailDomainDotTrail,b,_)(j):j===45||j===95||asciiAlphanumeric(j)?(c=!0,i.consume(j),g):b(j)}function _(j){return i.consume(j),a=!0,g}function b(j){return c&&a&&asciiAlpha(s.previous)?(i.exit("literalAutolinkEmail"),i.exit("literalAutolink"),e(j)):o(j)}}function tokenizeWwwAutolink(i,e,o){const s=this;return a;function a(h){return h!==87&&h!==119||!previousWww.call(s,s.previous)||previousUnbalanced(s.events)?o(h):(i.enter("literalAutolink"),i.enter("literalAutolinkWww"),i.check(wwwPrefix,i.attempt(domain,i.attempt(path,c),o),o)(h))}function c(h){return i.exit("literalAutolinkWww"),i.exit("literalAutolink"),e(h)}}function tokenizeProtocolAutolink(i,e,o){const s=this;let a="",c=!1;return h;function h(j){return(j===72||j===104)&&previousProtocol.call(s,s.previous)&&!previousUnbalanced(s.events)?(i.enter("literalAutolink"),i.enter("literalAutolinkHttp"),a+=String.fromCodePoint(j),i.consume(j),d):o(j)}function d(j){if(asciiAlpha(j)&&a.length<5)return a+=String.fromCodePoint(j),i.consume(j),d;if(j===58){const _e=a.toLowerCase();if(_e==="http"||_e==="https")return i.consume(j),g}return o(j)}function g(j){return j===47?(i.consume(j),c?_:(c=!0,g)):o(j)}function _(j){return j===null||asciiControl(j)||markdownLineEndingOrSpace(j)||unicodeWhitespace(j)||unicodePunctuation(j)?o(j):i.attempt(domain,i.attempt(path,b),o)(j)}function b(j){return i.exit("literalAutolinkHttp"),i.exit("literalAutolink"),e(j)}}function tokenizeWwwPrefix(i,e,o){let s=0;return a;function a(h){return(h===87||h===119)&&s<3?(s++,i.consume(h),a):h===46&&s===3?(i.consume(h),c):o(h)}function c(h){return h===null?o(h):e(h)}}function tokenizeDomain(i,e,o){let s,a,c;return h;function h(_){return _===46||_===95?i.check(trail,g,d)(_):_===null||markdownLineEndingOrSpace(_)||unicodeWhitespace(_)||_!==45&&unicodePunctuation(_)?g(_):(c=!0,i.consume(_),h)}function d(_){return _===95?s=!0:(a=s,s=void 0),i.consume(_),h}function g(_){return a||s||!c?o(_):e(_)}}function tokenizePath(i,e){let o=0,s=0;return a;function a(h){return h===40?(o++,i.consume(h),a):h===41&&s<o?c(h):h===33||h===34||h===38||h===39||h===41||h===42||h===44||h===46||h===58||h===59||h===60||h===63||h===93||h===95||h===126?i.check(trail,e,c)(h):h===null||markdownLineEndingOrSpace(h)||unicodeWhitespace(h)?e(h):(i.consume(h),a)}function c(h){return h===41&&s++,i.consume(h),a}}function tokenizeTrail(i,e,o){return s;function s(d){return d===33||d===34||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===63||d===95||d===126?(i.consume(d),s):d===38?(i.consume(d),c):d===93?(i.consume(d),a):d===60||d===null||markdownLineEndingOrSpace(d)||unicodeWhitespace(d)?e(d):o(d)}function a(d){return d===null||d===40||d===91||markdownLineEndingOrSpace(d)||unicodeWhitespace(d)?e(d):s(d)}function c(d){return asciiAlpha(d)?h(d):o(d)}function h(d){return d===59?(i.consume(d),s):asciiAlpha(d)?(i.consume(d),h):o(d)}}function tokenizeEmailDomainDotTrail(i,e,o){return s;function s(c){return i.consume(c),a}function a(c){return asciiAlphanumeric(c)?o(c):e(c)}}function previousWww(i){return i===null||i===40||i===42||i===95||i===91||i===93||i===126||markdownLineEndingOrSpace(i)}function previousProtocol(i){return!asciiAlpha(i)}function previousEmail(i){return!(i===47||gfmAtext(i))}function gfmAtext(i){return i===43||i===45||i===46||i===95||asciiAlphanumeric(i)}function previousUnbalanced(i){let e=i.length,o=!1;for(;e--;){const s=i[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){o=!0;break}if(s._gfmAutolinkLiteralWalkedInto){o=!1;break}}return i.length>0&&!o&&(i[i.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),o}const indent={tokenize:tokenizeIndent,partial:!0};function gfmFootnote(){return{document:{91:{tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{tokenize:tokenizeGfmFootnoteCall},93:{add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(i,e,o){const s=this;let a=s.events.length;const c=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let h;for(;a--;){const g=s.events[a][1];if(g.type==="labelImage"){h=g;break}if(g.type==="gfmFootnoteCall"||g.type==="labelLink"||g.type==="label"||g.type==="image"||g.type==="link")break}return d;function d(g){if(!h||!h._balanced)return o(g);const _=normalizeIdentifier(s.sliceSerialize({start:h.end,end:s.now()}));return _.codePointAt(0)!==94||!c.includes(_.slice(1))?o(g):(i.enter("gfmFootnoteCallLabelMarker"),i.consume(g),i.exit("gfmFootnoteCallLabelMarker"),e(g))}}function resolveToPotentialGfmFootnoteCall(i,e){let o=i.length;for(;o--;)if(i[o][1].type==="labelImage"&&i[o][0]==="enter"){i[o][1];break}i[o+1][1].type="data",i[o+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},i[o+3][1].start),end:Object.assign({},i[i.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},i[o+3][1].end),end:Object.assign({},i[o+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const c={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},i[i.length-1][1].start)},h={type:"chunkString",contentType:"string",start:Object.assign({},c.start),end:Object.assign({},c.end)},d=[i[o+1],i[o+2],["enter",s,e],i[o+3],i[o+4],["enter",a,e],["exit",a,e],["enter",c,e],["enter",h,e],["exit",h,e],["exit",c,e],i[i.length-2],i[i.length-1],["exit",s,e]];return i.splice(o,i.length-o+1,...d),i}function tokenizeGfmFootnoteCall(i,e,o){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let c=0,h;return d;function d(j){return i.enter("gfmFootnoteCall"),i.enter("gfmFootnoteCallLabelMarker"),i.consume(j),i.exit("gfmFootnoteCallLabelMarker"),g}function g(j){return j!==94?o(j):(i.enter("gfmFootnoteCallMarker"),i.consume(j),i.exit("gfmFootnoteCallMarker"),i.enter("gfmFootnoteCallString"),i.enter("chunkString").contentType="string",_)}function _(j){if(c>999||j===93&&!h||j===null||j===91||markdownLineEndingOrSpace(j))return o(j);if(j===93){i.exit("chunkString");const _e=i.exit("gfmFootnoteCallString");return a.includes(normalizeIdentifier(s.sliceSerialize(_e)))?(i.enter("gfmFootnoteCallLabelMarker"),i.consume(j),i.exit("gfmFootnoteCallLabelMarker"),i.exit("gfmFootnoteCall"),e):o(j)}return markdownLineEndingOrSpace(j)||(h=!0),c++,i.consume(j),j===92?b:_}function b(j){return j===91||j===92||j===93?(i.consume(j),c++,_):_(j)}}function tokenizeDefinitionStart(i,e,o){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let c,h=0,d;return g;function g(et){return i.enter("gfmFootnoteDefinition")._container=!0,i.enter("gfmFootnoteDefinitionLabel"),i.enter("gfmFootnoteDefinitionLabelMarker"),i.consume(et),i.exit("gfmFootnoteDefinitionLabelMarker"),_}function _(et){return et===94?(i.enter("gfmFootnoteDefinitionMarker"),i.consume(et),i.exit("gfmFootnoteDefinitionMarker"),i.enter("gfmFootnoteDefinitionLabelString"),i.enter("chunkString").contentType="string",b):o(et)}function b(et){if(h>999||et===93&&!d||et===null||et===91||markdownLineEndingOrSpace(et))return o(et);if(et===93){i.exit("chunkString");const rt=i.exit("gfmFootnoteDefinitionLabelString");return c=normalizeIdentifier(s.sliceSerialize(rt)),i.enter("gfmFootnoteDefinitionLabelMarker"),i.consume(et),i.exit("gfmFootnoteDefinitionLabelMarker"),i.exit("gfmFootnoteDefinitionLabel"),_e}return markdownLineEndingOrSpace(et)||(d=!0),h++,i.consume(et),et===92?j:b}function j(et){return et===91||et===92||et===93?(i.consume(et),h++,b):b(et)}function _e(et){return et===58?(i.enter("definitionMarker"),i.consume(et),i.exit("definitionMarker"),a.includes(c)||a.push(c),factorySpace(i,$,"gfmFootnoteDefinitionWhitespace")):o(et)}function $(et){return e(et)}}function tokenizeDefinitionContinuation(i,e,o){return i.check(blankLine,e,i.attempt(indent,e,o))}function gfmFootnoteDefinitionEnd(i){i.exit("gfmFootnoteDefinition")}function tokenizeIndent(i,e,o){const s=this;return factorySpace(i,a,"gfmFootnoteDefinitionIndent",5);function a(c){const h=s.events[s.events.length-1];return h&&h[1].type==="gfmFootnoteDefinitionIndent"&&h[2].sliceSerialize(h[1],!0).length===4?e(c):o(c)}}function gfmStrikethrough(i){let o=(i||{}).singleTilde;const s={tokenize:c,resolveAll:a};return o==null&&(o=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function a(h,d){let g=-1;for(;++g<h.length;)if(h[g][0]==="enter"&&h[g][1].type==="strikethroughSequenceTemporary"&&h[g][1]._close){let _=g;for(;_--;)if(h[_][0]==="exit"&&h[_][1].type==="strikethroughSequenceTemporary"&&h[_][1]._open&&h[g][1].end.offset-h[g][1].start.offset===h[_][1].end.offset-h[_][1].start.offset){h[g][1].type="strikethroughSequence",h[_][1].type="strikethroughSequence";const b={type:"strikethrough",start:Object.assign({},h[_][1].start),end:Object.assign({},h[g][1].end)},j={type:"strikethroughText",start:Object.assign({},h[_][1].end),end:Object.assign({},h[g][1].start)},_e=[["enter",b,d],["enter",h[_][1],d],["exit",h[_][1],d],["enter",j,d]],$=d.parser.constructs.insideSpan.null;$&&splice(_e,_e.length,0,resolveAll($,h.slice(_+1,g),d)),splice(_e,_e.length,0,[["exit",j,d],["enter",h[g][1],d],["exit",h[g][1],d],["exit",b,d]]),splice(h,_-1,g-_+3,_e),g=_+_e.length-2;break}}for(g=-1;++g<h.length;)h[g][1].type==="strikethroughSequenceTemporary"&&(h[g][1].type="data");return h}function c(h,d,g){const _=this.previous,b=this.events;let j=0;return _e;function _e(et){return _===126&&b[b.length-1][1].type!=="characterEscape"?g(et):(h.enter("strikethroughSequenceTemporary"),$(et))}function $(et){const rt=classifyCharacter(_);if(et===126)return j>1?g(et):(h.consume(et),j++,$);if(j<2&&!o)return g(et);const st=h.exit("strikethroughSequenceTemporary"),tt=classifyCharacter(et);return st._open=!tt||tt===2&&!!rt,st._close=!rt||rt===2&&!!tt,d(et)}}}class EditMap{constructor(){this.map=[]}add(e,o,s){addImpl(this,e,o,s)}consume(e){if(this.map.sort(function(c,h){return c[0]-h[0]}),this.map.length===0)return;let o=this.map.length;const s=[];for(;o>0;)o-=1,s.push(e.slice(this.map[o][0]+this.map[o][1]),this.map[o][2]),e.length=this.map[o][0];s.push([...e]),e.length=0;let a=s.pop();for(;a;)e.push(...a),a=s.pop();this.map.length=0}}function addImpl(i,e,o,s){let a=0;if(!(o===0&&s.length===0)){for(;a<i.map.length;){if(i.map[a][0]===e){i.map[a][1]+=o,i.map[a][2].push(...s);return}a+=1}i.map.push([e,o,s])}}function gfmTableAlign(i,e){let o=!1;const s=[];for(;e<i.length;){const a=i[e];if(o){if(a[0]==="enter")a[1].type==="tableContent"&&s.push(i[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(i[e-1][1].type==="tableDelimiterMarker"){const c=s.length-1;s[c]=s[c]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(o=!0);e+=1}return s}function gfmTable(){return{flow:{null:{tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(i,e,o){const s=this;let a=0,c=0,h;return d;function d(mt){let yt=s.events.length-1;for(;yt>-1;){const Tt=s.events[yt][1].type;if(Tt==="lineEnding"||Tt==="linePrefix")yt--;else break}const bt=yt>-1?s.events[yt][1].type:null,Mt=bt==="tableHead"||bt==="tableRow"?at:g;return Mt===at&&s.parser.lazy[s.now().line]?o(mt):Mt(mt)}function g(mt){return i.enter("tableHead"),i.enter("tableRow"),_(mt)}function _(mt){return mt===124||(h=!0,c+=1),b(mt)}function b(mt){return mt===null?o(mt):markdownLineEnding(mt)?c>1?(c=0,s.interrupt=!0,i.exit("tableRow"),i.enter("lineEnding"),i.consume(mt),i.exit("lineEnding"),$):o(mt):markdownSpace(mt)?factorySpace(i,b,"whitespace")(mt):(c+=1,h&&(h=!1,a+=1),mt===124?(i.enter("tableCellDivider"),i.consume(mt),i.exit("tableCellDivider"),h=!0,b):(i.enter("data"),j(mt)))}function j(mt){return mt===null||mt===124||markdownLineEndingOrSpace(mt)?(i.exit("data"),b(mt)):(i.consume(mt),mt===92?_e:j)}function _e(mt){return mt===92||mt===124?(i.consume(mt),j):j(mt)}function $(mt){return s.interrupt=!1,s.parser.lazy[s.now().line]?o(mt):(i.enter("tableDelimiterRow"),h=!1,markdownSpace(mt)?factorySpace(i,et,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(mt):et(mt))}function et(mt){return mt===45||mt===58?st(mt):mt===124?(h=!0,i.enter("tableCellDivider"),i.consume(mt),i.exit("tableCellDivider"),rt):lt(mt)}function rt(mt){return markdownSpace(mt)?factorySpace(i,st,"whitespace")(mt):st(mt)}function st(mt){return mt===58?(c+=1,h=!0,i.enter("tableDelimiterMarker"),i.consume(mt),i.exit("tableDelimiterMarker"),tt):mt===45?(c+=1,tt(mt)):mt===null||markdownLineEnding(mt)?pt(mt):lt(mt)}function tt(mt){return mt===45?(i.enter("tableDelimiterFiller"),nt(mt)):lt(mt)}function nt(mt){return mt===45?(i.consume(mt),nt):mt===58?(h=!0,i.exit("tableDelimiterFiller"),i.enter("tableDelimiterMarker"),i.consume(mt),i.exit("tableDelimiterMarker"),it):(i.exit("tableDelimiterFiller"),it(mt))}function it(mt){return markdownSpace(mt)?factorySpace(i,pt,"whitespace")(mt):pt(mt)}function pt(mt){return mt===124?et(mt):mt===null||markdownLineEnding(mt)?!h||a!==c?lt(mt):(i.exit("tableDelimiterRow"),i.exit("tableHead"),e(mt)):lt(mt)}function lt(mt){return o(mt)}function at(mt){return i.enter("tableRow"),At(mt)}function At(mt){return mt===124?(i.enter("tableCellDivider"),i.consume(mt),i.exit("tableCellDivider"),At):mt===null||markdownLineEnding(mt)?(i.exit("tableRow"),e(mt)):markdownSpace(mt)?factorySpace(i,At,"whitespace")(mt):(i.enter("data"),vt(mt))}function vt(mt){return mt===null||mt===124||markdownLineEndingOrSpace(mt)?(i.exit("data"),At(mt)):(i.consume(mt),mt===92?ft:vt)}function ft(mt){return mt===92||mt===124?(i.consume(mt),vt):vt(mt)}}function resolveTable(i,e){let o=-1,s=!0,a=0,c=[0,0,0,0],h=[0,0,0,0],d=!1,g=0,_,b,j;const _e=new EditMap;for(;++o<i.length;){const $=i[o],et=$[1];$[0]==="enter"?et.type==="tableHead"?(d=!1,g!==0&&(flushTableEnd(_e,e,g,_,b),b=void 0,g=0),_={type:"table",start:Object.assign({},et.start),end:Object.assign({},et.end)},_e.add(o,0,[["enter",_,e]])):et.type==="tableRow"||et.type==="tableDelimiterRow"?(s=!0,j=void 0,c=[0,0,0,0],h=[0,o+1,0,0],d&&(d=!1,b={type:"tableBody",start:Object.assign({},et.start),end:Object.assign({},et.end)},_e.add(o,0,[["enter",b,e]])),a=et.type==="tableDelimiterRow"?2:b?3:1):a&&(et.type==="data"||et.type==="tableDelimiterMarker"||et.type==="tableDelimiterFiller")?(s=!1,h[2]===0&&(c[1]!==0&&(h[0]=h[1],j=flushCell(_e,e,c,a,void 0,j),c=[0,0,0,0]),h[2]=o)):et.type==="tableCellDivider"&&(s?s=!1:(c[1]!==0&&(h[0]=h[1],j=flushCell(_e,e,c,a,void 0,j)),c=h,h=[c[1],o,0,0])):et.type==="tableHead"?(d=!0,g=o):et.type==="tableRow"||et.type==="tableDelimiterRow"?(g=o,c[1]!==0?(h[0]=h[1],j=flushCell(_e,e,c,a,o,j)):h[1]!==0&&(j=flushCell(_e,e,h,a,o,j)),a=0):a&&(et.type==="data"||et.type==="tableDelimiterMarker"||et.type==="tableDelimiterFiller")&&(h[3]=o)}for(g!==0&&flushTableEnd(_e,e,g,_,b),_e.consume(e.events),o=-1;++o<e.events.length;){const $=e.events[o];$[0]==="enter"&&$[1].type==="table"&&($[1]._align=gfmTableAlign(e.events,o))}return i}function flushCell(i,e,o,s,a,c){const h=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",d="tableContent";o[0]!==0&&(c.end=Object.assign({},getPoint(e.events,o[0])),i.add(o[0],0,[["exit",c,e]]));const g=getPoint(e.events,o[1]);if(c={type:h,start:Object.assign({},g),end:Object.assign({},g)},i.add(o[1],0,[["enter",c,e]]),o[2]!==0){const _=getPoint(e.events,o[2]),b=getPoint(e.events,o[3]),j={type:d,start:Object.assign({},_),end:Object.assign({},b)};if(i.add(o[2],0,[["enter",j,e]]),s!==2){const _e=e.events[o[2]],$=e.events[o[3]];if(_e[1].end=Object.assign({},$[1].end),_e[1].type="chunkText",_e[1].contentType="text",o[3]>o[2]+1){const et=o[2]+1,rt=o[3]-o[2]-1;i.add(et,rt,[])}}i.add(o[3]+1,0,[["exit",j,e]])}return a!==void 0&&(c.end=Object.assign({},getPoint(e.events,a)),i.add(a,0,[["exit",c,e]]),c=void 0),c}function flushTableEnd(i,e,o,s,a){const c=[],h=getPoint(e.events,o);a&&(a.end=Object.assign({},h),c.push(["exit",a,e])),s.end=Object.assign({},h),c.push(["exit",s,e]),i.add(o+1,0,c)}function getPoint(i,e){const o=i[e],s=o[0]==="enter"?"start":"end";return o[1][s]}const tasklistCheck={tokenize:tokenizeTasklistCheck};function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(i,e,o){const s=this;return a;function a(g){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?o(g):(i.enter("taskListCheck"),i.enter("taskListCheckMarker"),i.consume(g),i.exit("taskListCheckMarker"),c)}function c(g){return markdownLineEndingOrSpace(g)?(i.enter("taskListCheckValueUnchecked"),i.consume(g),i.exit("taskListCheckValueUnchecked"),h):g===88||g===120?(i.enter("taskListCheckValueChecked"),i.consume(g),i.exit("taskListCheckValueChecked"),h):o(g)}function h(g){return g===93?(i.enter("taskListCheckMarker"),i.consume(g),i.exit("taskListCheckMarker"),i.exit("taskListCheck"),d):o(g)}function d(g){return markdownLineEnding(g)?e(g):markdownSpace(g)?i.check({tokenize:spaceThenNonSpace},e,o)(g):o(g)}}function spaceThenNonSpace(i,e,o){return factorySpace(i,s,"whitespace");function s(a){return a===null?o(a):e(a)}}function gfm(i){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(i),gfmTable(),gfmTaskListItem()])}const emptyOptions={};function remarkGfm(i){const e=this,o=i||emptyOptions,s=e.data(),a=s.micromarkExtensions||(s.micromarkExtensions=[]),c=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),h=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);a.push(gfm(o)),c.push(gfmFromMarkdown()),h.push(gfmToMarkdown(o))}const convert=function(i){if(i==null)return ok;if(typeof i=="string")return typeFactory(i);if(typeof i=="object")return Array.isArray(i)?anyFactory(i):propsFactory(i);if(typeof i=="function")return castFactory(i);throw new Error("Expected function, string, or object as test")};function anyFactory(i){const e=[];let o=-1;for(;++o<i.length;)e[o]=convert(i[o]);return castFactory(s);function s(...a){let c=-1;for(;++c<e.length;)if(e[c].call(this,...a))return!0;return!1}}function propsFactory(i){return castFactory(e);function e(o){let s;for(s in i)if(o[s]!==i[s])return!1;return!0}}function typeFactory(i){return castFactory(e);function e(o){return o&&o.type===i}}function castFactory(i){return e;function e(o,...s){return!!(o&&typeof o=="object"&&"type"in o&&i.call(this,o,...s))}}function ok(){return!0}function color(i){return i}const CONTINUE=!0,EXIT=!1,SKIP="skip",visitParents=function(i,e,o,s){typeof e=="function"&&typeof o!="function"&&(s=o,o=e,e=null);const a=convert(e),c=s?-1:1;h(i,void 0,[])();function h(d,g,_){const b=d&&typeof d=="object"?d:{};if(typeof b.type=="string"){const _e=typeof b.tagName=="string"?b.tagName:typeof b.name=="string"?b.name:void 0;Object.defineProperty(j,"name",{value:"node ("+(d.type+(_e?"<"+_e+">":""))+")"})}return j;function j(){let _e=[],$,et,rt;if((!e||a(d,g,_[_.length-1]||null))&&(_e=toResult(o(d,_)),_e[0]===EXIT))return _e;if(d.children&&_e[0]!==SKIP)for(et=(s?d.children.length:-1)+c,rt=_.concat(d);et>-1&&et<d.children.length;){if($=h(d.children[et],et,rt)(),$[0]===EXIT)return $;et=typeof $[1]=="number"?$[1]:et+c}return _e}}};function toResult(i){return Array.isArray(i)?i:typeof i=="number"?[CONTINUE,i]:[i]}const visit=function(i,e,o,s){typeof e=="function"&&typeof o!="function"&&(s=o,o=e,e=null),visitParents(i,e,a,s);function a(c,h){const d=h[h.length-1];return o(c,d?d.children.indexOf(c):null,d)}};function supersub(){return i=>{visit(i,["text"],(e,o,s)=>{if(e.type!=="text")return;const{value:a}=e,c=a.split(/\^/);if(c.length===1||c.length%2===0)return;const h=c.map((d,g)=>g%2===0?{type:"text",value:d}:{type:"superscript",data:{hName:"sup"},children:[{type:"text",value:d}]});s.children.splice(o,1,...h)}),visit(i,["text"],(e,o,s)=>{if(e.type!=="text")return;const{value:a}=e,c=a.split(/\~/);if(c.length===1||c.length%2===0)return;const h=c.map((d,g)=>g%2===0?{type:"text",value:d}:{type:"subscript",data:{hName:"sub"},children:[{type:"text",value:d}]});s.children.splice(o,1,...h)})}}const Avatar=({userId:i,userName:e,staticPath:o,staticText:s,size:a})=>{const[c,h]=reactExports.useState(null),d=a?`h-${a} w-${a}`:"h-12 w-12";reactExports.useEffect(()=>{async function b(){if(!i){o&&h(o);return}const j=(await acquireTokens()).accessToken,_e=await fetch(`https://graph.microsoft.com/v1.0/users/${i}/photo/$value`,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"image/jpeg"}});if(_e.status>299)return h(null),console.error(_e.statusText);const $=await _e.blob(),et=new FileReader;et.onload=()=>{h(et.result)},et.readAsDataURL($)}b().catch(console.error)},[i,o]);const g=e||s||"",_=g?g.split(" ").filter((b,j)=>j<2).map(b=>b[0]).join(""):"";return jsxRuntimeExports.jsx("div",{className:`${d} border border-1 border-neutral-200 flex-grow-0 flex-shrink-0 rounded-full bg-white m-2 overflow-hidden flex items-center justify-center`,title:g,children:c?jsxRuntimeExports.jsx("img",{src:c,className:d,alt:""}):jsxRuntimeExports.jsx("div",{className:"text-2xl",children:_})})},LoadingBar=()=>jsxRuntimeExports.jsx("div",{className:"parent bg-gray-300 h-1 w-full",children:jsxRuntimeExports.jsx("div",{className:"child bg-blue-600 h-1"})});function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,o){module.exports=e.pdfjsLib=o()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e)=>{var Mn;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=Ut,e.bytesToString=Pt,e.createValidAbsoluteUrl=rn,e.getModificationDate=nn,e.getUuid=Rn,e.getVerbosityLevel=Lt,e.info=Bt,e.isArrayBuffer=Ot,e.isArrayEqual=Xt,e.isNodeJS=void 0,e.normalizeUnicode=Pn,e.objectFromMap=tn,e.objectSize=Qt,e.setVerbosityLevel=Tt,e.shadow=an,e.string32=Vt,e.stringToBytes=qt,e.stringToPDFString=sn,e.stringToUTF8String=Gt,e.unreachable=_t,e.utf8StringToString=Wt,e.warn=Kt;const o=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=o;const s=[1,0,0,1,0,0];e.IDENTITY_MATRIX=s;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const c=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=c;const h=1.35;e.LINE_FACTOR=h;const d=.35;e.LINE_DESCENT_FACTOR=d;const g=d/h;e.BASELINE_FACTOR=g;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=_;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=b;const j="pdfjs_internal_editor_";e.AnnotationEditorPrefix=j;const _e={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=_e;const $={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=$;const et={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=et;const rt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=rt;const st={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=st;const tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=tt;const nt={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=nt;const it={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=it;const pt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=pt;const lt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=lt;const at={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=at;const At={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=At;const vt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=vt;const ft={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=ft;const mt={NONE:0,BINARY:1};e.CMapCompressionType=mt;const yt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=yt;const bt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=bt;let Mt=ft.WARNINGS;function Tt(en){Number.isInteger(en)&&(Mt=en)}function Lt(){return Mt}function Bt(en){Mt>=ft.INFOS&&console.log(`Info: ${en}`)}function Kt(en){Mt>=ft.WARNINGS&&console.log(`Warning: ${en}`)}function _t(en){throw new Error(en)}function Ut(en,zt){en||_t(zt)}function St(en){switch(en==null?void 0:en.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rn(en,zt=null,Ft=null){if(!en)return null;try{if(Ft&&typeof en=="string"){if(Ft.addDefaultProtocol&&en.startsWith("www.")){const hn=en.match(/\./g);(hn==null?void 0:hn.length)>=2&&(en=`http://${en}`)}if(Ft.tryConvertEncoding)try{en=Gt(en)}catch{}}const cn=zt?new URL(en,zt):new URL(en);if(St(cn))return cn}catch{}return null}function an(en,zt,Ft,cn=!1){return Object.defineProperty(en,zt,{value:Ft,enumerable:!cn,configurable:!0,writable:!1}),Ft}const dt=function(){function zt(Ft,cn){this.constructor===zt&&_t("Cannot initialize BaseException."),this.message=Ft,this.name=cn}return zt.prototype=new Error,zt.constructor=zt,zt}();e.BaseException=dt;class ct extends dt{constructor(zt,Ft){super(zt,"PasswordException"),this.code=Ft}}e.PasswordException=ct;class gt extends dt{constructor(zt,Ft){super(zt,"UnknownErrorException"),this.details=Ft}}e.UnknownErrorException=gt;class ut extends dt{constructor(zt){super(zt,"InvalidPDFException")}}e.InvalidPDFException=ut;class Et extends dt{constructor(zt){super(zt,"MissingPDFException")}}e.MissingPDFException=Et;class Ct extends dt{constructor(zt,Ft){super(zt,"UnexpectedResponseException"),this.status=Ft}}e.UnexpectedResponseException=Ct;class kt extends dt{constructor(zt){super(zt,"FormatError")}}e.FormatError=kt;class xt extends dt{constructor(zt){super(zt,"AbortException")}}e.AbortException=xt;function Pt(en){(typeof en!="object"||(en==null?void 0:en.length)===void 0)&&_t("Invalid argument for bytesToString");const zt=en.length,Ft=8192;if(zt<Ft)return String.fromCharCode.apply(null,en);const cn=[];for(let hn=0;hn<zt;hn+=Ft){const Hn=Math.min(hn+Ft,zt),Bn=en.subarray(hn,Hn);cn.push(String.fromCharCode.apply(null,Bn))}return cn.join("")}function qt(en){typeof en!="string"&&_t("Invalid argument for stringToBytes");const zt=en.length,Ft=new Uint8Array(zt);for(let cn=0;cn<zt;++cn)Ft[cn]=en.charCodeAt(cn)&255;return Ft}function Vt(en){return String.fromCharCode(en>>24&255,en>>16&255,en>>8&255,en&255)}function Qt(en){return Object.keys(en).length}function tn(en){const zt=Object.create(null);for(const[Ft,cn]of en)zt[Ft]=cn;return zt}function on(){const en=new Uint8Array(4);return en[0]=1,new Uint32Array(en.buffer,0,1)[0]===1}function Zt(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return an(this,"isLittleEndian",on())}static get isEvalSupported(){return an(this,"isEvalSupported",Zt())}static get isOffscreenCanvasSupported(){return an(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?an(this,"platform",{isWin:!1,isMac:!1}):an(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var zt,Ft;return an(this,"isCSSRoundSupported",(Ft=(zt=globalThis.CSS)==null?void 0:zt.supports)==null?void 0:Ft.call(zt,"width: round(1.5px, 1px)"))}}e.FeatureTest=pn;const Tn=[...Array(256).keys()].map(en=>en.toString(16).padStart(2,"0"));class dn{static makeHexColor(zt,Ft,cn){return`#${Tn[zt]}${Tn[Ft]}${Tn[cn]}`}static scaleMinMax(zt,Ft){let cn;zt[0]?(zt[0]<0&&(cn=Ft[0],Ft[0]=Ft[1],Ft[1]=cn),Ft[0]*=zt[0],Ft[1]*=zt[0],zt[3]<0&&(cn=Ft[2],Ft[2]=Ft[3],Ft[3]=cn),Ft[2]*=zt[3],Ft[3]*=zt[3]):(cn=Ft[0],Ft[0]=Ft[2],Ft[2]=cn,cn=Ft[1],Ft[1]=Ft[3],Ft[3]=cn,zt[1]<0&&(cn=Ft[2],Ft[2]=Ft[3],Ft[3]=cn),Ft[2]*=zt[1],Ft[3]*=zt[1],zt[2]<0&&(cn=Ft[0],Ft[0]=Ft[1],Ft[1]=cn),Ft[0]*=zt[2],Ft[1]*=zt[2]),Ft[0]+=zt[4],Ft[1]+=zt[4],Ft[2]+=zt[5],Ft[3]+=zt[5]}static transform(zt,Ft){return[zt[0]*Ft[0]+zt[2]*Ft[1],zt[1]*Ft[0]+zt[3]*Ft[1],zt[0]*Ft[2]+zt[2]*Ft[3],zt[1]*Ft[2]+zt[3]*Ft[3],zt[0]*Ft[4]+zt[2]*Ft[5]+zt[4],zt[1]*Ft[4]+zt[3]*Ft[5]+zt[5]]}static applyTransform(zt,Ft){const cn=zt[0]*Ft[0]+zt[1]*Ft[2]+Ft[4],hn=zt[0]*Ft[1]+zt[1]*Ft[3]+Ft[5];return[cn,hn]}static applyInverseTransform(zt,Ft){const cn=Ft[0]*Ft[3]-Ft[1]*Ft[2],hn=(zt[0]*Ft[3]-zt[1]*Ft[2]+Ft[2]*Ft[5]-Ft[4]*Ft[3])/cn,Hn=(-zt[0]*Ft[1]+zt[1]*Ft[0]+Ft[4]*Ft[1]-Ft[5]*Ft[0])/cn;return[hn,Hn]}static getAxialAlignedBoundingBox(zt,Ft){const cn=this.applyTransform(zt,Ft),hn=this.applyTransform(zt.slice(2,4),Ft),Hn=this.applyTransform([zt[0],zt[3]],Ft),Bn=this.applyTransform([zt[2],zt[1]],Ft);return[Math.min(cn[0],hn[0],Hn[0],Bn[0]),Math.min(cn[1],hn[1],Hn[1],Bn[1]),Math.max(cn[0],hn[0],Hn[0],Bn[0]),Math.max(cn[1],hn[1],Hn[1],Bn[1])]}static inverseTransform(zt){const Ft=zt[0]*zt[3]-zt[1]*zt[2];return[zt[3]/Ft,-zt[1]/Ft,-zt[2]/Ft,zt[0]/Ft,(zt[2]*zt[5]-zt[4]*zt[3])/Ft,(zt[4]*zt[1]-zt[5]*zt[0])/Ft]}static singularValueDecompose2dScale(zt){const Ft=[zt[0],zt[2],zt[1],zt[3]],cn=zt[0]*Ft[0]+zt[1]*Ft[2],hn=zt[0]*Ft[1]+zt[1]*Ft[3],Hn=zt[2]*Ft[0]+zt[3]*Ft[2],Bn=zt[2]*Ft[1]+zt[3]*Ft[3],$t=(cn+Bn)/2,fn=Math.sqrt((cn+Bn)**2-4*(cn*Bn-Hn*hn))/2,_n=$t+fn||1,mn=$t-fn||1;return[Math.sqrt(_n),Math.sqrt(mn)]}static normalizeRect(zt){const Ft=zt.slice(0);return zt[0]>zt[2]&&(Ft[0]=zt[2],Ft[2]=zt[0]),zt[1]>zt[3]&&(Ft[1]=zt[3],Ft[3]=zt[1]),Ft}static intersect(zt,Ft){const cn=Math.max(Math.min(zt[0],zt[2]),Math.min(Ft[0],Ft[2])),hn=Math.min(Math.max(zt[0],zt[2]),Math.max(Ft[0],Ft[2]));if(cn>hn)return null;const Hn=Math.max(Math.min(zt[1],zt[3]),Math.min(Ft[1],Ft[3])),Bn=Math.min(Math.max(zt[1],zt[3]),Math.max(Ft[1],Ft[3]));return Hn>Bn?null:[cn,Hn,hn,Bn]}static bezierBoundingBox(zt,Ft,cn,hn,Hn,Bn,$t,fn){const _n=[],mn=[[],[]];let bn,xn,jn,un,Dn,wn,Rt,ht;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(xn=6*zt-12*cn+6*Hn,bn=-3*zt+9*cn-9*Hn+3*$t,jn=3*cn-3*zt):(xn=6*Ft-12*hn+6*Bn,bn=-3*Ft+9*hn-9*Bn+3*fn,jn=3*hn-3*Ft),Math.abs(bn)<1e-12){if(Math.abs(xn)<1e-12)continue;un=-jn/xn,0<un&&un<1&&_n.push(un);continue}Rt=xn*xn-4*jn*bn,ht=Math.sqrt(Rt),!(Rt<0)&&(Dn=(-xn+ht)/(2*bn),0<Dn&&Dn<1&&_n.push(Dn),wn=(-xn-ht)/(2*bn),0<wn&&wn<1&&_n.push(wn))}let wt=_n.length,It;const Dt=wt;for(;wt--;)un=_n[wt],It=1-un,mn[0][wt]=It*It*It*zt+3*It*It*un*cn+3*It*un*un*Hn+un*un*un*$t,mn[1][wt]=It*It*It*Ft+3*It*It*un*hn+3*It*un*un*Bn+un*un*un*fn;return mn[0][Dt]=zt,mn[1][Dt]=Ft,mn[0][Dt+1]=$t,mn[1][Dt+1]=fn,mn[0].length=mn[1].length=Dt+2,[Math.min(...mn[0]),Math.min(...mn[1]),Math.max(...mn[0]),Math.max(...mn[1])]}}e.Util=dn;const Cn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function sn(en){if(en[0]>=""){let Ft;if(en[0]===""&&en[1]===""?Ft="utf-16be":en[0]===""&&en[1]===""?Ft="utf-16le":en[0]===""&&en[1]===""&&en[2]===""&&(Ft="utf-8"),Ft)try{const cn=new TextDecoder(Ft,{fatal:!0}),hn=qt(en);return cn.decode(hn)}catch(cn){Kt(`stringToPDFString: "${cn}".`)}}const zt=[];for(let Ft=0,cn=en.length;Ft<cn;Ft++){const hn=Cn[en.charCodeAt(Ft)];zt.push(hn?String.fromCharCode(hn):en.charAt(Ft))}return zt.join("")}function Gt(en){return decodeURIComponent(escape(en))}function Wt(en){return unescape(encodeURIComponent(en))}function Ot(en){return typeof en=="object"&&(en==null?void 0:en.byteLength)!==void 0}function Xt(en,zt){if(en.length!==zt.length)return!1;for(let Ft=0,cn=en.length;Ft<cn;Ft++)if(en[Ft]!==zt[Ft])return!1;return!0}function nn(en=new Date){return[en.getUTCFullYear().toString(),(en.getUTCMonth()+1).toString().padStart(2,"0"),en.getUTCDate().toString().padStart(2,"0"),en.getUTCHours().toString().padStart(2,"0"),en.getUTCMinutes().toString().padStart(2,"0"),en.getUTCSeconds().toString().padStart(2,"0")].join("")}class gn{constructor(){Nt(this,Mn,!1);this.promise=new Promise((zt,Ft)=>{this.resolve=cn=>{Yt(this,Mn,!0),zt(cn)},this.reject=cn=>{Yt(this,Mn,!0),Ft(cn)}})}get settled(){return ot(this,Mn)}}Mn=new WeakMap,e.PromiseCapability=gn;let vn=null,kn=null;function Pn(en){return vn||(vn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,kn=new Map([["","t"]])),en.replaceAll(vn,(zt,Ft,cn)=>Ft?Ft.normalize("NFKC"):kn.get(cn))}function Rn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const en=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(en);else for(let zt=0;zt<32;zt++)en[zt]=Math.floor(Math.random()*255);return Pt(en)}const In="pdfjs_internal_id_";e.AnnotationPrefix=In},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var i,o,s,a,Qn,h,ur,g,_,b,j,_e,$,et,rt,st,hr,nt,it,kr,lt,at;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(vt){if(typeof vt=="string"||vt instanceof URL?vt={url:vt}:(0,_util.isArrayBuffer)(vt)&&(vt={data:vt}),typeof vt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!vt.url&&!vt.data&&!vt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const ft=new PDFDocumentLoadingTask,{docId:mt}=ft,yt=vt.url?getUrlProp(vt.url):null,bt=vt.data?getDataProp(vt.data):null,Mt=vt.httpHeaders||null,Tt=vt.withCredentials===!0,Lt=vt.password??null,Bt=vt.range instanceof PDFDataRangeTransport?vt.range:null,Kt=Number.isInteger(vt.rangeChunkSize)&&vt.rangeChunkSize>0?vt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let _t=vt.worker instanceof PDFWorker?vt.worker:null;const Ut=vt.verbosity,St=typeof vt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(vt.docBaseUrl)?vt.docBaseUrl:null,rn=typeof vt.cMapUrl=="string"?vt.cMapUrl:null,an=vt.cMapPacked!==!1,dt=vt.CMapReaderFactory||DefaultCMapReaderFactory,ct=typeof vt.standardFontDataUrl=="string"?vt.standardFontDataUrl:null,gt=vt.StandardFontDataFactory||DefaultStandardFontDataFactory,ut=vt.stopAtErrors!==!0,Et=Number.isInteger(vt.maxImageSize)&&vt.maxImageSize>-1?vt.maxImageSize:-1,Ct=vt.isEvalSupported!==!1,kt=typeof vt.isOffscreenCanvasSupported=="boolean"?vt.isOffscreenCanvasSupported:!_util.isNodeJS,xt=Number.isInteger(vt.canvasMaxAreaInBytes)?vt.canvasMaxAreaInBytes:-1,Pt=typeof vt.disableFontFace=="boolean"?vt.disableFontFace:_util.isNodeJS,qt=vt.fontExtraProperties===!0,Vt=vt.enableXfa===!0,Qt=vt.ownerDocument||globalThis.document,tn=vt.disableRange===!0,on=vt.disableStream===!0,Zt=vt.disableAutoFetch===!0,pn=vt.pdfBug===!0,Tn=Bt?Bt.length:vt.length??NaN,dn=typeof vt.useSystemFonts=="boolean"?vt.useSystemFonts:!_util.isNodeJS&&!Pt,Cn=typeof vt.useWorkerFetch=="boolean"?vt.useWorkerFetch:dt===_display_utils.DOMCMapReaderFactory&&gt===_display_utils.DOMStandardFontDataFactory&&rn&&ct&&(0,_display_utils.isValidFetchUrl)(rn,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(ct,document.baseURI),sn=vt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Qt}),Gt=vt.filterFactory||new DefaultFilterFactory({docId:mt,ownerDocument:Qt}),Wt=null;(0,_util.setVerbosityLevel)(Ut);const Ot={canvasFactory:sn,filterFactory:Gt};if(Cn||(Ot.cMapReaderFactory=new dt({baseUrl:rn,isCompressed:an}),Ot.standardFontDataFactory=new gt({baseUrl:ct})),!_t){const gn={verbosity:Ut,port:_worker_options.GlobalWorkerOptions.workerPort};_t=gn.port?PDFWorker.fromPort(gn):new PDFWorker(gn),ft._worker=_t}const Xt={docId:mt,apiVersion:"3.11.174",data:bt,password:Lt,disableAutoFetch:Zt,rangeChunkSize:Kt,length:Tn,docBaseUrl:St,enableXfa:Vt,evaluatorOptions:{maxImageSize:Et,disableFontFace:Pt,ignoreErrors:ut,isEvalSupported:Ct,isOffscreenCanvasSupported:kt,canvasMaxAreaInBytes:xt,fontExtraProperties:qt,useSystemFonts:dn,cMapUrl:Cn?rn:null,standardFontDataUrl:Cn?ct:null}},nn={ignoreErrors:ut,isEvalSupported:Ct,disableFontFace:Pt,fontExtraProperties:qt,enableXfa:Vt,ownerDocument:Qt,disableAutoFetch:Zt,pdfBug:pn,styleElement:Wt};return _t.promise.then(function(){if(ft.destroyed)throw new Error("Loading aborted");const gn=_fetchDocument(_t,Xt),vn=new Promise(function(kn){let Pn;Bt?Pn=new _transport_stream.PDFDataTransportStream({length:Tn,initialData:Bt.initialData,progressiveDone:Bt.progressiveDone,contentDispositionFilename:Bt.contentDispositionFilename,disableRange:tn,disableStream:on},Bt):bt||(Pn=(In=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(In):(0,_display_utils.isValidFetchUrl)(In.url)?new _displayFetch_stream.PDFFetchStream(In):new _displayNetwork.PDFNetworkStream(In))({url:yt,length:Tn,httpHeaders:Mt,withCredentials:Tt,rangeChunkSize:Kt,disableRange:tn,disableStream:on})),kn(Pn)});return Promise.all([gn,vn]).then(function([kn,Pn]){if(ft.destroyed)throw new Error("Loading aborted");const Rn=new _message_handler.MessageHandler(mt,kn,_t.port),In=new WorkerTransport(Rn,ft,Pn,nn,Ot);ft._transport=In,Rn.send("Ready",null)})}).catch(ft._capability.reject),ft}async function _fetchDocument(vt,ft){if(vt.destroyed)throw new Error("Worker was destroyed");const mt=await vt.messageHandler.sendWithPromise("GetDocRequest",ft,ft.data?[ft.data.buffer]:null);if(vt.destroyed)throw new Error("Worker was destroyed");return mt}function getUrlProp(vt){if(vt instanceof URL)return vt.href;try{return new URL(vt,window.location).href}catch{if(_util.isNodeJS&&typeof vt=="string")return vt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(vt){if(_util.isNodeJS&&typeof Buffer<"u"&&vt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(vt instanceof Uint8Array&&vt.byteLength===vt.buffer.byteLength)return vt;if(typeof vt=="string")return(0,_util.stringToBytes)(vt);if(typeof vt=="object"&&!isNaN(vt==null?void 0:vt.length)||(0,_util.isArrayBuffer)(vt))return new Uint8Array(vt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${nr(e,i)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var ft,mt,yt;this.destroyed=!0;try{(ft=this._worker)!=null&&ft.port&&(this._worker._pendingDestroy=!0),await((mt=this._transport)==null?void 0:mt.destroy())}catch(bt){throw(yt=this._worker)!=null&&yt.port&&delete this._worker._pendingDestroy,bt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};i=new WeakMap,Nt(e,i,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(ft,mt,yt=!1,bt=null){this.length=ft,this.initialData=mt,this.progressiveDone=yt,this.contentDispositionFilename=bt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(ft){this._rangeListeners.push(ft)}addProgressListener(ft){this._progressListeners.push(ft)}addProgressiveReadListener(ft){this._progressiveReadListeners.push(ft)}addProgressiveDoneListener(ft){this._progressiveDoneListeners.push(ft)}onDataRange(ft,mt){for(const yt of this._rangeListeners)yt(ft,mt)}onDataProgress(ft,mt){this._readyCapability.promise.then(()=>{for(const yt of this._progressListeners)yt(ft,mt)})}onDataProgressiveRead(ft){this._readyCapability.promise.then(()=>{for(const mt of this._progressiveReadListeners)mt(ft)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const ft of this._progressiveDoneListeners)ft()})}transportReady(){this._readyCapability.resolve()}requestDataRange(ft,mt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(ft,mt){this._pdfInfo=ft,this._transport=mt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(yt=>{if(!yt)return yt;const bt=[];for(const Mt in yt)bt.push(...yt[Mt]);return bt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(ft){return this._transport.getPage(ft)}getPageIndex(ft){return this._transport.getPageIndex(ft)}getDestinations(){return this._transport.getDestinations()}getDestination(ft){return this._transport.getDestination(ft)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(ft=!1){return this._transport.startCleanup(ft||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(ft,mt,yt,bt=!1){Nt(this,a);Nt(this,h);Nt(this,o,null);Nt(this,s,!1);this._pageIndex=ft,this._pageInfo=mt,this._transport=yt,this._stats=bt?new _display_utils.StatTimer:null,this._pdfBug=bt,this.commonObjs=yt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:ft,rotation:mt=this.rotate,offsetX:yt=0,offsetY:bt=0,dontFlip:Mt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:ft,rotation:mt,offsetX:yt,offsetY:bt,dontFlip:Mt})}getAnnotations({intent:ft="display"}={}){const mt=this._transport.getRenderingIntent(ft);return this._transport.getAnnotations(this._pageIndex,mt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var ft;return((ft=this._transport._htmlForXfa)==null?void 0:ft.children[this._pageIndex])||null}render({canvasContext:ft,viewport:mt,intent:yt="display",annotationMode:bt=_util.AnnotationMode.ENABLE,transform:Mt=null,background:Tt=null,optionalContentConfigPromise:Lt=null,annotationCanvasMap:Bt=null,pageColors:Kt=null,printAnnotationStorage:_t=null}){var gt,ut;(gt=this._stats)==null||gt.time("Overall");const Ut=this._transport.getRenderingIntent(yt,bt,_t);Yt(this,s,!1),jt(this,h,ur).call(this),Lt||(Lt=this._transport.getOptionalContentConfig());let St=this._intentStates.get(Ut.cacheKey);St||(St=Object.create(null),this._intentStates.set(Ut.cacheKey,St)),St.streamReaderCancelTimeout&&(clearTimeout(St.streamReaderCancelTimeout),St.streamReaderCancelTimeout=null);const rn=!!(Ut.renderingIntent&_util.RenderingIntentFlag.PRINT);St.displayReadyCapability||(St.displayReadyCapability=new _util.PromiseCapability,St.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ut=this._stats)==null||ut.time("Page Request"),this._pumpOperatorList(Ut));const an=Et=>{var Ct,kt;St.renderTasks.delete(dt),(this._maybeCleanupAfterRender||rn)&&Yt(this,s,!0),jt(this,a,Qn).call(this,!rn),Et?(dt.capability.reject(Et),this._abortOperatorList({intentState:St,reason:Et instanceof Error?Et:new Error(Et)})):dt.capability.resolve(),(Ct=this._stats)==null||Ct.timeEnd("Rendering"),(kt=this._stats)==null||kt.timeEnd("Overall")},dt=new InternalRenderTask({callback:an,params:{canvasContext:ft,viewport:mt,transform:Mt,background:Tt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Bt,operatorList:St.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!rn,pdfBug:this._pdfBug,pageColors:Kt});(St.renderTasks||(St.renderTasks=new Set)).add(dt);const ct=dt.task;return Promise.all([St.displayReadyCapability.promise,Lt]).then(([Et,Ct])=>{var kt;if(this.destroyed){an();return}(kt=this._stats)==null||kt.time("Rendering"),dt.initializeGraphics({transparency:Et,optionalContentConfig:Ct}),dt.operatorListChanged()}).catch(an),ct}getOperatorList({intent:ft="display",annotationMode:mt=_util.AnnotationMode.ENABLE,printAnnotationStorage:yt=null}={}){var Bt;function bt(){Tt.operatorList.lastChunk&&(Tt.opListReadCapability.resolve(Tt.operatorList),Tt.renderTasks.delete(Lt))}const Mt=this._transport.getRenderingIntent(ft,mt,yt,!0);let Tt=this._intentStates.get(Mt.cacheKey);Tt||(Tt=Object.create(null),this._intentStates.set(Mt.cacheKey,Tt));let Lt;return Tt.opListReadCapability||(Lt=Object.create(null),Lt.operatorListChanged=bt,Tt.opListReadCapability=new _util.PromiseCapability,(Tt.renderTasks||(Tt.renderTasks=new Set)).add(Lt),Tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Bt=this._stats)==null||Bt.time("Page Request"),this._pumpOperatorList(Mt)),Tt.opListReadCapability.promise}streamTextContent({includeMarkedContent:ft=!1,disableNormalization:mt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:ft===!0,disableNormalization:mt===!0},{highWaterMark:100,size(bt){return bt.items.length}})}getTextContent(ft={}){if(this._transport._htmlForXfa)return this.getXfa().then(yt=>_xfa_text.XfaText.textContent(yt));const mt=this.streamTextContent(ft);return new Promise(function(yt,bt){function Mt(){Tt.read().then(function({value:Bt,done:Kt}){if(Kt){yt(Lt);return}Object.assign(Lt.styles,Bt.styles),Lt.items.push(...Bt.items),Mt()},bt)}const Tt=mt.getReader(),Lt={items:[],styles:Object.create(null)};Mt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const ft=[];for(const mt of this._intentStates.values())if(this._abortOperatorList({intentState:mt,reason:new Error("Page was destroyed."),force:!0}),!mt.opListReadCapability)for(const yt of mt.renderTasks)ft.push(yt.completed),yt.cancel();return this.objs.clear(),Yt(this,s,!1),jt(this,h,ur).call(this),Promise.all(ft)}cleanup(ft=!1){Yt(this,s,!0);const mt=jt(this,a,Qn).call(this,!1);return ft&&mt&&this._stats&&(this._stats=new _display_utils.StatTimer),mt}_startRenderPage(ft,mt){var bt,Mt;const yt=this._intentStates.get(mt);yt&&((bt=this._stats)==null||bt.timeEnd("Page Request"),(Mt=yt.displayReadyCapability)==null||Mt.resolve(ft))}_renderPageChunk(ft,mt){for(let yt=0,bt=ft.length;yt<bt;yt++)mt.operatorList.fnArray.push(ft.fnArray[yt]),mt.operatorList.argsArray.push(ft.argsArray[yt]);mt.operatorList.lastChunk=ft.lastChunk,mt.operatorList.separateAnnots=ft.separateAnnots;for(const yt of mt.renderTasks)yt.operatorListChanged();ft.lastChunk&&jt(this,a,Qn).call(this,!0)}_pumpOperatorList({renderingIntent:ft,cacheKey:mt,annotationStorageSerializable:yt}){const{map:bt,transfers:Mt}=yt,Lt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:ft,cacheKey:mt,annotationStorage:bt},Mt).getReader(),Bt=this._intentStates.get(mt);Bt.streamReader=Lt;const Kt=()=>{Lt.read().then(({value:_t,done:Ut})=>{if(Ut){Bt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(_t,Bt),Kt())},_t=>{if(Bt.streamReader=null,!this._transport.destroyed){if(Bt.operatorList){Bt.operatorList.lastChunk=!0;for(const Ut of Bt.renderTasks)Ut.operatorListChanged();jt(this,a,Qn).call(this,!0)}if(Bt.displayReadyCapability)Bt.displayReadyCapability.reject(_t);else if(Bt.opListReadCapability)Bt.opListReadCapability.reject(_t);else throw _t}})};Kt()}_abortOperatorList({intentState:ft,reason:mt,force:yt=!1}){if(ft.streamReader){if(ft.streamReaderCancelTimeout&&(clearTimeout(ft.streamReaderCancelTimeout),ft.streamReaderCancelTimeout=null),!yt){if(ft.renderTasks.size>0)return;if(mt instanceof _display_utils.RenderingCancelledException){let bt=RENDERING_CANCELLED_TIMEOUT;mt.extraDelay>0&&mt.extraDelay<1e3&&(bt+=mt.extraDelay),ft.streamReaderCancelTimeout=setTimeout(()=>{ft.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:ft,reason:mt,force:!0})},bt);return}}if(ft.streamReader.cancel(new _util.AbortException(mt.message)).catch(()=>{}),ft.streamReader=null,!this._transport.destroyed){for(const[bt,Mt]of this._intentStates)if(Mt===ft){this._intentStates.delete(bt);break}this.cleanup()}}}get stats(){return this._stats}}o=new WeakMap,s=new WeakMap,a=new WeakSet,Qn=function(ft=!1){if(jt(this,h,ur).call(this),!ot(this,s)||this.destroyed)return!1;if(ft)return Yt(this,o,setTimeout(()=>{Yt(this,o,null),jt(this,a,Qn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:mt,operatorList:yt}of this._intentStates.values())if(mt.size>0||!yt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Yt(this,s,!1),!0},h=new WeakSet,ur=function(){ot(this,o)&&(clearTimeout(ot(this,o)),Yt(this,o,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Nt(this,g,new Set);Nt(this,_,Promise.resolve())}postMessage(ft,mt){const yt={data:structuredClone(ft,mt?{transfer:mt}:null)};ot(this,_).then(()=>{for(const bt of ot(this,g))bt.call(this,yt)})}addEventListener(ft,mt){ot(this,g).add(mt)}removeEventListener(ft,mt){ot(this,g).delete(mt)}terminate(){ot(this,g).clear()}}g=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const vt=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;vt&&(PDFWorkerUtil.fallbackWorkerSrc=vt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(vt,ft){let mt;try{if(mt=new URL(vt),!mt.origin||mt.origin==="null")return!1}catch{return!1}const yt=new URL(ft,mt);return mt.origin===yt.origin},PDFWorkerUtil.createCDNWrapper=function(vt){const ft=`importScripts("${vt}");`;return URL.createObjectURL(new Blob([ft]))}}const _PDFWorker=class _PDFWorker{constructor({name:vt=null,port:ft=null,verbosity:mt=(0,_util.getVerbosityLevel)()}={}){var yt;if(this.name=vt,this.destroyed=!1,this.verbosity=mt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,ft){if((yt=ot(_PDFWorker,j))!=null&&yt.has(ft))throw new Error("Cannot use more than one PDFWorker per port.");(ot(_PDFWorker,j)||Yt(_PDFWorker,j,new WeakMap)).set(ft,this),this._initializeFromPort(ft);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(vt){this._port=vt,this._messageHandler=new _message_handler.MessageHandler("main","worker",vt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:vt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,vt)||(vt=PDFWorkerUtil.createCDNWrapper(new URL(vt,window.location).href));const ft=new Worker(vt),mt=new _message_handler.MessageHandler("main","worker",ft),yt=()=>{ft.removeEventListener("error",bt),mt.destroy(),ft.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},bt=()=>{this._webWorker||yt()};ft.addEventListener("error",bt),mt.on("test",Tt=>{if(ft.removeEventListener("error",bt),this.destroyed){yt();return}Tt?(this._messageHandler=mt,this._port=ft,this._webWorker=ft,this._readyCapability.resolve(),mt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),mt.destroy(),ft.terminate())}),mt.on("ready",Tt=>{if(ft.removeEventListener("error",bt),this.destroyed){yt();return}try{Mt()}catch{this._setupFakeWorker()}});const Mt=()=>{const Tt=new Uint8Array;mt.send("test",Tt,[Tt.buffer])};Mt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(vt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ft=new LoopbackPort;this._port=ft;const mt=`fake${PDFWorkerUtil.fakeWorkerId++}`,yt=new _message_handler.MessageHandler(mt+"_worker",mt,ft);vt.setup(yt,ft);const bt=new _message_handler.MessageHandler(mt,mt+"_worker",ft);this._messageHandler=bt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})}).catch(vt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${vt.message}".`))})}destroy(){var vt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(vt=ot(_PDFWorker,j))==null||vt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(vt){var mt;if(!(vt!=null&&vt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const ft=(mt=ot(this,j))==null?void 0:mt.get(vt.port);if(ft){if(ft._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ft}return new _PDFWorker(vt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var vt;try{return((vt=globalThis.pdfjsWorker)==null?void 0:vt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};j=new WeakMap,Nt(_PDFWorker,j,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(ft,mt,yt,bt,Mt){Nt(this,st);Nt(this,_e,new Map);Nt(this,$,new Map);Nt(this,et,new Map);Nt(this,rt,null);this.messageHandler=ft,this.loadingTask=mt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:bt.ownerDocument,styleElement:bt.styleElement}),this._params=bt,this.canvasFactory=Mt.canvasFactory,this.filterFactory=Mt.filterFactory,this.cMapReaderFactory=Mt.cMapReaderFactory,this.standardFontDataFactory=Mt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=yt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(ft,mt=_util.AnnotationMode.ENABLE,yt=null,bt=!1){let Mt=_util.RenderingIntentFlag.DISPLAY,Tt=_annotation_storage.SerializableEmpty;switch(ft){case"any":Mt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Mt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${ft}`)}switch(mt){case _util.AnnotationMode.DISABLE:Mt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Mt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Mt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Tt=(Mt&_util.RenderingIntentFlag.PRINT&&yt instanceof _annotation_storage.PrintAnnotationStorage?yt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${mt}`)}return bt&&(Mt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Mt,cacheKey:`${Mt}_${Tt.hash}`,annotationStorageSerializable:Tt}}destroy(){var yt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(yt=ot(this,rt))==null||yt.reject(new Error("Worker was destroyed during onPassword callback"));const ft=[];for(const bt of ot(this,$).values())ft.push(bt._destroy());ot(this,$).clear(),ot(this,et).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const mt=this.messageHandler.sendWithPromise("Terminate",null);return ft.push(mt),Promise.all(ft).then(()=>{var bt;this.commonObjs.clear(),this.fontLoader.clear(),ot(this,_e).clear(),this.filterFactory.destroy(),(bt=this._networkStream)==null||bt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:ft,loadingTask:mt}=this;ft.on("GetReader",(yt,bt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Mt=>{this._lastProgress={loaded:Mt.loaded,total:Mt.total}},bt.onPull=()=>{this._fullReader.read().then(function({value:Mt,done:Tt}){if(Tt){bt.close();return}(0,_util.assert)(Mt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Mt),1,[Mt])}).catch(Mt=>{bt.error(Mt)})},bt.onCancel=Mt=>{this._fullReader.cancel(Mt),bt.ready.catch(Tt=>{if(!this.destroyed)throw Tt})}}),ft.on("ReaderHeadersReady",yt=>{const bt=new _util.PromiseCapability,Mt=this._fullReader;return Mt.headersReady.then(()=>{var Tt;(!Mt.isStreamingSupported||!Mt.isRangeSupported)&&(this._lastProgress&&((Tt=mt.onProgress)==null||Tt.call(mt,this._lastProgress)),Mt.onProgress=Lt=>{var Bt;(Bt=mt.onProgress)==null||Bt.call(mt,{loaded:Lt.loaded,total:Lt.total})}),bt.resolve({isStreamingSupported:Mt.isStreamingSupported,isRangeSupported:Mt.isRangeSupported,contentLength:Mt.contentLength})},bt.reject),bt.promise}),ft.on("GetRangeReader",(yt,bt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Mt=this._networkStream.getRangeReader(yt.begin,yt.end);if(!Mt){bt.close();return}bt.onPull=()=>{Mt.read().then(function({value:Tt,done:Lt}){if(Lt){bt.close();return}(0,_util.assert)(Tt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Tt),1,[Tt])}).catch(Tt=>{bt.error(Tt)})},bt.onCancel=Tt=>{Mt.cancel(Tt),bt.ready.catch(Lt=>{if(!this.destroyed)throw Lt})}}),ft.on("GetDoc",({pdfInfo:yt})=>{this._numPages=yt.numPages,this._htmlForXfa=yt.htmlForXfa,delete yt.htmlForXfa,mt._capability.resolve(new PDFDocumentProxy(yt,this))}),ft.on("DocException",function(yt){let bt;switch(yt.name){case"PasswordException":bt=new _util.PasswordException(yt.message,yt.code);break;case"InvalidPDFException":bt=new _util.InvalidPDFException(yt.message);break;case"MissingPDFException":bt=new _util.MissingPDFException(yt.message);break;case"UnexpectedResponseException":bt=new _util.UnexpectedResponseException(yt.message,yt.status);break;case"UnknownErrorException":bt=new _util.UnknownErrorException(yt.message,yt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}mt._capability.reject(bt)}),ft.on("PasswordRequest",yt=>{if(Yt(this,rt,new _util.PromiseCapability),mt.onPassword){const bt=Mt=>{Mt instanceof Error?ot(this,rt).reject(Mt):ot(this,rt).resolve({password:Mt})};try{mt.onPassword(bt,yt.code)}catch(Mt){ot(this,rt).reject(Mt)}}else ot(this,rt).reject(new _util.PasswordException(yt.message,yt.code));return ot(this,rt).promise}),ft.on("DataLoaded",yt=>{var bt;(bt=mt.onProgress)==null||bt.call(mt,{loaded:yt.length,total:yt.length}),this.downloadInfoCapability.resolve(yt)}),ft.on("StartRenderPage",yt=>{if(this.destroyed)return;ot(this,$).get(yt.pageIndex)._startRenderPage(yt.transparency,yt.cacheKey)}),ft.on("commonobj",([yt,bt,Mt])=>{var Tt;if(!this.destroyed&&!this.commonObjs.has(yt))switch(bt){case"Font":const Lt=this._params;if("error"in Mt){const _t=Mt.error;(0,_util.warn)(`Error during font loading: ${_t}`),this.commonObjs.resolve(yt,_t);break}const Bt=Lt.pdfBug&&((Tt=globalThis.FontInspector)!=null&&Tt.enabled)?(_t,Ut)=>globalThis.FontInspector.fontAdded(_t,Ut):null,Kt=new _font_loader.FontFaceObject(Mt,{isEvalSupported:Lt.isEvalSupported,disableFontFace:Lt.disableFontFace,ignoreErrors:Lt.ignoreErrors,inspectFont:Bt});this.fontLoader.bind(Kt).catch(_t=>ft.sendWithPromise("FontFallback",{id:yt})).finally(()=>{!Lt.fontExtraProperties&&Kt.data&&(Kt.data=null),this.commonObjs.resolve(yt,Kt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(yt,Mt);break;default:throw new Error(`Got unknown common object type ${bt}`)}}),ft.on("obj",([yt,bt,Mt,Tt])=>{var Bt;if(this.destroyed)return;const Lt=ot(this,$).get(bt);if(!Lt.objs.has(yt))switch(Mt){case"Image":if(Lt.objs.resolve(yt,Tt),Tt){let Kt;if(Tt.bitmap){const{width:_t,height:Ut}=Tt;Kt=_t*Ut*4}else Kt=((Bt=Tt.data)==null?void 0:Bt.length)||0;Kt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Lt._maybeCleanupAfterRender=!0)}break;case"Pattern":Lt.objs.resolve(yt,Tt);break;default:throw new Error(`Got unknown object type ${Mt}`)}}),ft.on("DocProgress",yt=>{var bt;this.destroyed||(bt=mt.onProgress)==null||bt.call(mt,{loaded:yt.loaded,total:yt.total})}),ft.on("FetchBuiltInCMap",yt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(yt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),ft.on("FetchStandardFontData",yt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(yt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var yt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:ft,transfers:mt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:ft,filename:((yt=this._fullReader)==null?void 0:yt.filename)??null},mt).finally(()=>{this.annotationStorage.resetModified()})}getPage(ft){if(!Number.isInteger(ft)||ft<=0||ft>this._numPages)return Promise.reject(new Error("Invalid page request."));const mt=ft-1,yt=ot(this,et).get(mt);if(yt)return yt;const bt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:mt}).then(Mt=>{if(this.destroyed)throw new Error("Transport destroyed");const Tt=new PDFPageProxy(mt,Mt,this,this._params.pdfBug);return ot(this,$).set(mt,Tt),Tt});return ot(this,et).set(mt,bt),bt}getPageIndex(ft){return typeof ft!="object"||ft===null||!Number.isInteger(ft.num)||ft.num<0||!Number.isInteger(ft.gen)||ft.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ft.num,gen:ft.gen})}getAnnotations(ft,mt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:ft,intent:mt})}getFieldObjects(){return jt(this,st,hr).call(this,"GetFieldObjects")}hasJSActions(){return jt(this,st,hr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(ft){return typeof ft!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:ft})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return jt(this,st,hr).call(this,"GetDocJSActions")}getPageJSActions(ft){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:ft})}getStructTree(ft){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:ft})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(ft=>new _optional_content_config.OptionalContentConfig(ft))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const ft="GetMetadata",mt=ot(this,_e).get(ft);if(mt)return mt;const yt=this.messageHandler.sendWithPromise(ft,null).then(bt=>{var Mt,Tt;return{info:bt[0],metadata:bt[1]?new _metadata.Metadata(bt[1]):null,contentDispositionFilename:((Mt=this._fullReader)==null?void 0:Mt.filename)??null,contentLength:((Tt=this._fullReader)==null?void 0:Tt.contentLength)??null}});return ot(this,_e).set(ft,yt),yt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(ft=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const mt of ot(this,$).values())if(!mt.cleanup())throw new Error(`startCleanup: Page ${mt.pageNumber} is currently rendering.`);this.commonObjs.clear(),ft||this.fontLoader.clear(),ot(this,_e).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:ft,enableXfa:mt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:ft,enableXfa:mt})}}_e=new WeakMap,$=new WeakMap,et=new WeakMap,rt=new WeakMap,st=new WeakSet,hr=function(ft,mt=null){const yt=ot(this,_e).get(ft);if(yt)return yt;const bt=this.messageHandler.sendWithPromise(ft,mt);return ot(this,_e).set(ft,bt),bt};class PDFObjects{constructor(){Nt(this,it);Nt(this,nt,Object.create(null))}get(ft,mt=null){if(mt){const bt=jt(this,it,kr).call(this,ft);return bt.capability.promise.then(()=>mt(bt.data)),null}const yt=ot(this,nt)[ft];if(!(yt!=null&&yt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${ft}.`);return yt.data}has(ft){const mt=ot(this,nt)[ft];return(mt==null?void 0:mt.capability.settled)||!1}resolve(ft,mt=null){const yt=jt(this,it,kr).call(this,ft);yt.data=mt,yt.capability.resolve()}clear(){var ft;for(const mt in ot(this,nt)){const{data:yt}=ot(this,nt)[mt];(ft=yt==null?void 0:yt.bitmap)==null||ft.close()}Yt(this,nt,Object.create(null))}}nt=new WeakMap,it=new WeakSet,kr=function(ft){var mt;return(mt=ot(this,nt))[ft]||(mt[ft]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(ft){Nt(this,lt,null);Yt(this,lt,ft),this.onContinue=null}get promise(){return ot(this,lt).capability.promise}cancel(ft=0){ot(this,lt).cancel(null,ft)}get separateAnnots(){const{separateAnnots:ft}=ot(this,lt).operatorList;if(!ft)return!1;const{annotationCanvasMap:mt}=ot(this,lt);return ft.form||ft.canvas&&(mt==null?void 0:mt.size)>0}}lt=new WeakMap,exports.RenderTask=RenderTask;const At=class At{constructor({callback:ft,params:mt,objs:yt,commonObjs:bt,annotationCanvasMap:Mt,operatorList:Tt,pageIndex:Lt,canvasFactory:Bt,filterFactory:Kt,useRequestAnimationFrame:_t=!1,pdfBug:Ut=!1,pageColors:St=null}){this.callback=ft,this.params=mt,this.objs=yt,this.commonObjs=bt,this.annotationCanvasMap=Mt,this.operatorListIdx=null,this.operatorList=Tt,this._pageIndex=Lt,this.canvasFactory=Bt,this.filterFactory=Kt,this._pdfBug=Ut,this.pageColors=St,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=_t===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=mt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:ft=!1,optionalContentConfig:mt}){var Lt,Bt;if(this.cancelled)return;if(this._canvas){if(ot(At,at).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ot(At,at).add(this._canvas)}this._pdfBug&&((Lt=globalThis.StepperManager)!=null&&Lt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:yt,viewport:bt,transform:Mt,background:Tt}=this.params;this.gfx=new _canvas.CanvasGraphics(yt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:mt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Mt,viewport:bt,transparency:ft,background:Tt}),this.operatorListIdx=0,this.graphicsReady=!0,(Bt=this.graphicsReadyCallback)==null||Bt.call(this)}cancel(ft=null,mt=0){var yt;this.running=!1,this.cancelled=!0,(yt=this.gfx)==null||yt.endDrawing(),ot(At,at).delete(this._canvas),this.callback(ft||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,mt))}operatorListChanged(){var ft;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(ft=this.stepper)==null||ft.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ot(At,at).delete(this._canvas),this.callback())))}};at=new WeakMap,Nt(At,at,new WeakSet);let InternalRenderTask=At;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(i,e,o)=>{var _,b,j,oo,$;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var s=o(1),a=o(4),c=o(8);const h=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=h;class d{constructor(){Nt(this,j);Nt(this,_,!1);Nt(this,b,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(rt,st){const tt=ot(this,b).get(rt);return tt===void 0?st:Object.assign(st,tt)}getRawValue(rt){return ot(this,b).get(rt)}remove(rt){if(ot(this,b).delete(rt),ot(this,b).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const st of ot(this,b).values())if(st instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(rt,st){const tt=ot(this,b).get(rt);let nt=!1;if(tt!==void 0)for(const[it,pt]of Object.entries(st))tt[it]!==pt&&(nt=!0,tt[it]=pt);else nt=!0,ot(this,b).set(rt,st);nt&&jt(this,j,oo).call(this),st instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(st.constructor._type)}has(rt){return ot(this,b).has(rt)}getAll(){return ot(this,b).size>0?(0,s.objectFromMap)(ot(this,b)):null}setAll(rt){for(const[st,tt]of Object.entries(rt))this.setValue(st,tt)}get size(){return ot(this,b).size}resetModified(){ot(this,_)&&(Yt(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(ot(this,b).size===0)return h;const rt=new Map,st=new c.MurmurHash3_64,tt=[],nt=Object.create(null);let it=!1;for(const[pt,lt]of ot(this,b)){const at=lt instanceof a.AnnotationEditor?lt.serialize(!1,nt):lt;at&&(rt.set(pt,at),st.update(`${pt}:${JSON.stringify(at)}`),it||(it=!!at.bitmap))}if(it)for(const pt of rt.values())pt.bitmap&&tt.push(pt.bitmap);return rt.size>0?{map:rt,hash:st.hexdigest(),transfers:tt}:h}}_=new WeakMap,b=new WeakMap,j=new WeakSet,oo=function(){ot(this,_)||(Yt(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=d;class g extends d{constructor(st){super();Nt(this,$,void 0);const{map:tt,hash:nt,transfers:it}=st.serializable,pt=structuredClone(tt,it?{transfer:it}:null);Yt(this,$,{map:pt,hash:nt,transfers:it})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return ot(this,$)}}$=new WeakMap,e.PrintAnnotationStorage=g},(i,e,o)=>{var g,_,b,j,_e,$,et,rt,st,tt,nt,it,pt,lt,at,_r,vt,br,mt,xr,bt,Rr,Tt,so,Bt,ao,_t,lo,St,Ir,an,co;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var s=o(5),a=o(1),c=o(6);const ct=class ct{constructor(ut){Nt(this,at);Nt(this,vt);Nt(this,bt);Nt(this,Tt);Nt(this,Bt);Nt(this,_t);Nt(this,St);Nt(this,an);Nt(this,g,"");Nt(this,_,!1);Nt(this,b,null);Nt(this,j,null);Nt(this,_e,null);Nt(this,$,!1);Nt(this,et,null);Nt(this,rt,this.focusin.bind(this));Nt(this,st,this.focusout.bind(this));Nt(this,tt,!1);Nt(this,nt,!1);Nt(this,it,!1);zn(this,"_initialOptions",Object.create(null));zn(this,"_uiManager",null);zn(this,"_focusEventsAllowed",!0);zn(this,"_l10nPromise",null);Nt(this,pt,!1);Nt(this,lt,ct._zIndex++);this.constructor===ct&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=ut.parent,this.id=ut.id,this.width=this.height=null,this.pageIndex=ut.parent.pageIndex,this.name=ut.name,this.div=null,this._uiManager=ut.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=ut.isCentered,this._structTreeParentId=null;const{rotation:Et,rawDims:{pageWidth:Ct,pageHeight:kt,pageX:xt,pageY:Pt}}=this.parent.viewport;this.rotation=Et,this.pageRotation=(360+Et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Ct,kt],this.pageTranslation=[xt,Pt];const[qt,Vt]=this.parentDimensions;this.x=ut.x/qt,this.y=ut.y/Vt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(ut){const Et=new d({id:ut.parent.getNextId(),parent:ut.parent,uiManager:ut._uiManager});Et.annotationElementId=ut.annotationElementId,Et.deleted=!0,Et._uiManager.addToAnnotationStorage(Et)}static initialize(ut,Et=null){if(ct._l10nPromise||(ct._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(kt=>[kt,ut.get(kt)]))),Et!=null&&Et.strings)for(const kt of Et.strings)ct._l10nPromise.set(kt,ut.get(kt));if(ct._borderLineWidth!==-1)return;const Ct=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(Ct.getPropertyValue("--outline-width"))||0}static updateDefaultParams(ut,Et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(ut){return!1}static paste(ut,Et){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ot(this,pt)}set _isDraggable(ut){var Et;Yt(this,pt,ut),(Et=this.div)==null||Et.classList.toggle("draggable",ut)}center(){const[ut,Et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Et/(ut*2),this.y+=this.width*ut/(Et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Et/(ut*2),this.y-=this.width*ut/(Et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(ut){this._uiManager.addCommands(ut)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ot(this,lt)}setParent(ut){ut!==null&&(this.pageIndex=ut.pageIndex,this.pageDimensions=ut.pageDimensions),this.parent=ut}focusin(ut){this._focusEventsAllowed&&(ot(this,tt)?Yt(this,tt,!1):this.parent.setSelected(this))}focusout(ut){var Ct;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Et=ut.relatedTarget;Et!=null&&Et.closest(`#${this.id}`)||(ut.preventDefault(),(Ct=this.parent)!=null&&Ct.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(ut,Et,Ct,kt){const[xt,Pt]=this.parentDimensions;[Ct,kt]=this.screenToPageTranslation(Ct,kt),this.x=(ut+Ct)/xt,this.y=(Et+kt)/Pt,this.fixAndSetPosition()}translate(ut,Et){jt(this,at,_r).call(this,this.parentDimensions,ut,Et)}translateInPage(ut,Et){jt(this,at,_r).call(this,this.pageDimensions,ut,Et),this.div.scrollIntoView({block:"nearest"})}drag(ut,Et){const[Ct,kt]=this.parentDimensions;if(this.x+=ut/Ct,this.y+=Et/kt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Qt,y:tn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Qt,tn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:xt,y:Pt}=this;const[qt,Vt]=jt(this,vt,br).call(this);xt+=qt,Pt+=Vt,this.div.style.left=`${(100*xt).toFixed(2)}%`,this.div.style.top=`${(100*Pt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[ut,Et]=this.pageDimensions;let{x:Ct,y:kt,width:xt,height:Pt}=this;switch(xt*=ut,Pt*=Et,Ct*=ut,kt*=Et,this.rotation){case 0:Ct=Math.max(0,Math.min(ut-xt,Ct)),kt=Math.max(0,Math.min(Et-Pt,kt));break;case 90:Ct=Math.max(0,Math.min(ut-Pt,Ct)),kt=Math.min(Et,Math.max(xt,kt));break;case 180:Ct=Math.min(ut,Math.max(xt,Ct)),kt=Math.min(Et,Math.max(Pt,kt));break;case 270:Ct=Math.min(ut,Math.max(Pt,Ct)),kt=Math.max(0,Math.min(Et-xt,kt));break}this.x=Ct/=ut,this.y=kt/=Et;const[qt,Vt]=jt(this,vt,br).call(this);Ct+=qt,kt+=Vt;const{style:Qt}=this.div;Qt.left=`${(100*Ct).toFixed(2)}%`,Qt.top=`${(100*kt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(ut,Et){var Ct;return jt(Ct=ct,mt,xr).call(Ct,ut,Et,this.parentRotation)}pageTranslationToScreen(ut,Et){var Ct;return jt(Ct=ct,mt,xr).call(Ct,ut,Et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:ut,pageDimensions:[Et,Ct]}=this,kt=Et*ut,xt=Ct*ut;return a.FeatureTest.isCSSRoundSupported?[Math.round(kt),Math.round(xt)]:[kt,xt]}setDims(ut,Et){var xt;const[Ct,kt]=this.parentDimensions;this.div.style.width=`${(100*ut/Ct).toFixed(2)}%`,ot(this,$)||(this.div.style.height=`${(100*Et/kt).toFixed(2)}%`),(xt=ot(this,b))==null||xt.classList.toggle("small",ut<ct.SMALL_EDITOR_SIZE||Et<ct.SMALL_EDITOR_SIZE)}fixDims(){const{style:ut}=this.div,{height:Et,width:Ct}=ut,kt=Ct.endsWith("%"),xt=!ot(this,$)&&Et.endsWith("%");if(kt&&xt)return;const[Pt,qt]=this.parentDimensions;kt||(ut.width=`${(100*parseFloat(Ct)/Pt).toFixed(2)}%`),!ot(this,$)&&!xt&&(ut.height=`${(100*parseFloat(Et)/qt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(ot(this,b))return;const ut=Yt(this,b,document.createElement("button"));ut.className="altText";const Et=await ct._l10nPromise.get("editor_alt_text_button_label");ut.textContent=Et,ut.setAttribute("aria-label",Et),ut.tabIndex="0",ut.addEventListener("contextmenu",c.noContextMenu),ut.addEventListener("pointerdown",Ct=>Ct.stopPropagation()),ut.addEventListener("click",Ct=>{Ct.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),ut.addEventListener("keydown",Ct=>{Ct.target===ut&&Ct.key==="Enter"&&(Ct.preventDefault(),this._uiManager.editAltText(this))}),jt(this,St,Ir).call(this),this.div.append(ut),ct.SMALL_EDITOR_SIZE||(ct.SMALL_EDITOR_SIZE=Math.min(128,Math.round(ut.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:ot(this,g),decorative:ot(this,_)}}set altTextData({altText:ut,decorative:Et}){ot(this,g)===ut&&ot(this,_)===Et||(Yt(this,g,ut),Yt(this,_,Et),jt(this,St,Ir).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",ot(this,rt)),this.div.addEventListener("focusout",ot(this,st));const[ut,Et]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Et/ut).toFixed(2)}%`,this.div.style.maxHeight=`${(100*ut/Et).toFixed(2)}%`);const[Ct,kt]=this.getInitialTranslation();return this.translate(Ct,kt),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(ut){const{isMac:Et}=a.FeatureTest.platform;if(ut.button!==0||ut.ctrlKey&&Et){ut.preventDefault();return}Yt(this,tt,!0),jt(this,an,co).call(this,ut)}moveInDOM(){var ut;(ut=this.parent)==null||ut.moveEditorInDOM(this)}_setParentAndPosition(ut,Et,Ct){ut.changeParent(this),this.x=Et,this.y=Ct,this.fixAndSetPosition()}getRect(ut,Et){const Ct=this.parentScale,[kt,xt]=this.pageDimensions,[Pt,qt]=this.pageTranslation,Vt=ut/Ct,Qt=Et/Ct,tn=this.x*kt,on=this.y*xt,Zt=this.width*kt,pn=this.height*xt;switch(this.rotation){case 0:return[tn+Vt+Pt,xt-on-Qt-pn+qt,tn+Vt+Zt+Pt,xt-on-Qt+qt];case 90:return[tn+Qt+Pt,xt-on+Vt+qt,tn+Qt+pn+Pt,xt-on+Vt+Zt+qt];case 180:return[tn-Vt-Zt+Pt,xt-on+Qt+qt,tn-Vt+Pt,xt-on+Qt+pn+qt];case 270:return[tn-Qt-pn+Pt,xt-on-Vt-Zt+qt,tn-Qt+Pt,xt-on-Vt+qt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(ut,Et){const[Ct,kt,xt,Pt]=ut,qt=xt-Ct,Vt=Pt-kt;switch(this.rotation){case 0:return[Ct,Et-Pt,qt,Vt];case 90:return[Ct,Et-kt,Vt,qt];case 180:return[xt,Et-kt,qt,Vt];case 270:return[xt,Et-Pt,Vt,qt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Yt(this,it,!0)}disableEditMode(){Yt(this,it,!1)}isInEditMode(){return ot(this,it)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var ut,Et;(ut=this.div)==null||ut.addEventListener("focusin",ot(this,rt)),(Et=this.div)==null||Et.addEventListener("focusout",ot(this,st))}serialize(ut=!1,Et=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(ut,Et,Ct){const kt=new this.prototype.constructor({parent:Et,id:Et.getNextId(),uiManager:Ct});kt.rotation=ut.rotation;const[xt,Pt]=kt.pageDimensions,[qt,Vt,Qt,tn]=kt.getRectInCurrentCoords(ut.rect,Pt);return kt.x=qt/xt,kt.y=Vt/Pt,kt.width=Qt/xt,kt.height=tn/Pt,kt}remove(){var ut;this.div.removeEventListener("focusin",ot(this,rt)),this.div.removeEventListener("focusout",ot(this,st)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(ut=ot(this,b))==null||ut.remove(),Yt(this,b,null),Yt(this,j,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(jt(this,Tt,so).call(this),ot(this,et).classList.remove("hidden"))}select(){var ut;this.makeResizable(),(ut=this.div)==null||ut.classList.add("selectedEditor")}unselect(){var ut,Et,Ct;(ut=ot(this,et))==null||ut.classList.add("hidden"),(Et=this.div)==null||Et.classList.remove("selectedEditor"),(Ct=this.div)!=null&&Ct.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(ut,Et){}disableEditing(){ot(this,b)&&(ot(this,b).hidden=!0)}enableEditing(){ot(this,b)&&(ot(this,b).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return ot(this,nt)}set isEditing(ut){Yt(this,nt,ut),this.parent&&(ut?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(ut,Et){Yt(this,$,!0);const Ct=ut/Et,{style:kt}=this.div;kt.aspectRatio=Ct,kt.height="auto"}static get MIN_SIZE(){return 16}};g=new WeakMap,_=new WeakMap,b=new WeakMap,j=new WeakMap,_e=new WeakMap,$=new WeakMap,et=new WeakMap,rt=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,pt=new WeakMap,lt=new WeakMap,at=new WeakSet,_r=function([ut,Et],Ct,kt){[Ct,kt]=this.screenToPageTranslation(Ct,kt),this.x+=Ct/ut,this.y+=kt/Et,this.fixAndSetPosition()},vt=new WeakSet,br=function(){const[ut,Et]=this.parentDimensions,{_borderLineWidth:Ct}=ct,kt=Ct/ut,xt=Ct/Et;switch(this.rotation){case 90:return[-kt,xt];case 180:return[kt,xt];case 270:return[kt,-xt];default:return[-kt,-xt]}},mt=new WeakSet,xr=function(ut,Et,Ct){switch(Ct){case 90:return[Et,-ut];case 180:return[-ut,-Et];case 270:return[-Et,ut];default:return[ut,Et]}},bt=new WeakSet,Rr=function(ut){switch(ut){case 90:{const[Et,Ct]=this.pageDimensions;return[0,-Et/Ct,Ct/Et,0]}case 180:return[-1,0,0,-1];case 270:{const[Et,Ct]=this.pageDimensions;return[0,Et/Ct,-Ct/Et,0]}default:return[1,0,0,1]}},Tt=new WeakSet,so=function(){if(ot(this,et))return;Yt(this,et,document.createElement("div")),ot(this,et).classList.add("resizers");const ut=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||ut.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Et of ut){const Ct=document.createElement("div");ot(this,et).append(Ct),Ct.classList.add("resizer",Et),Ct.addEventListener("pointerdown",jt(this,Bt,ao).bind(this,Et)),Ct.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(ot(this,et))},Bt=new WeakSet,ao=function(ut,Et){Et.preventDefault();const{isMac:Ct}=a.FeatureTest.platform;if(Et.button!==0||Et.ctrlKey&&Ct)return;const kt=jt(this,_t,lo).bind(this,ut),xt=this._isDraggable;this._isDraggable=!1;const Pt={passive:!0,capture:!0};window.addEventListener("pointermove",kt,Pt);const qt=this.x,Vt=this.y,Qt=this.width,tn=this.height,on=this.parent.div.style.cursor,Zt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Et.target).cursor;const pn=()=>{this._isDraggable=xt,window.removeEventListener("pointerup",pn),window.removeEventListener("blur",pn),window.removeEventListener("pointermove",kt,Pt),this.parent.div.style.cursor=on,this.div.style.cursor=Zt;const Tn=this.x,dn=this.y,Cn=this.width,sn=this.height;Tn===qt&&dn===Vt&&Cn===Qt&&sn===tn||this.addCommands({cmd:()=>{this.width=Cn,this.height=sn,this.x=Tn,this.y=dn;const[Gt,Wt]=this.parentDimensions;this.setDims(Gt*Cn,Wt*sn),this.fixAndSetPosition()},undo:()=>{this.width=Qt,this.height=tn,this.x=qt,this.y=Vt;const[Gt,Wt]=this.parentDimensions;this.setDims(Gt*Qt,Wt*tn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",pn),window.addEventListener("blur",pn)},_t=new WeakSet,lo=function(ut,Et){const[Ct,kt]=this.parentDimensions,xt=this.x,Pt=this.y,qt=this.width,Vt=this.height,Qt=ct.MIN_SIZE/Ct,tn=ct.MIN_SIZE/kt,on=cn=>Math.round(cn*1e4)/1e4,Zt=jt(this,bt,Rr).call(this,this.rotation),pn=(cn,hn)=>[Zt[0]*cn+Zt[2]*hn,Zt[1]*cn+Zt[3]*hn],Tn=jt(this,bt,Rr).call(this,360-this.rotation),dn=(cn,hn)=>[Tn[0]*cn+Tn[2]*hn,Tn[1]*cn+Tn[3]*hn];let Cn,sn,Gt=!1,Wt=!1;switch(ut){case"topLeft":Gt=!0,Cn=(cn,hn)=>[0,0],sn=(cn,hn)=>[cn,hn];break;case"topMiddle":Cn=(cn,hn)=>[cn/2,0],sn=(cn,hn)=>[cn/2,hn];break;case"topRight":Gt=!0,Cn=(cn,hn)=>[cn,0],sn=(cn,hn)=>[0,hn];break;case"middleRight":Wt=!0,Cn=(cn,hn)=>[cn,hn/2],sn=(cn,hn)=>[0,hn/2];break;case"bottomRight":Gt=!0,Cn=(cn,hn)=>[cn,hn],sn=(cn,hn)=>[0,0];break;case"bottomMiddle":Cn=(cn,hn)=>[cn/2,hn],sn=(cn,hn)=>[cn/2,0];break;case"bottomLeft":Gt=!0,Cn=(cn,hn)=>[0,hn],sn=(cn,hn)=>[cn,0];break;case"middleLeft":Wt=!0,Cn=(cn,hn)=>[0,hn/2],sn=(cn,hn)=>[cn,hn/2];break}const Ot=Cn(qt,Vt),Xt=sn(qt,Vt);let nn=pn(...Xt);const gn=on(xt+nn[0]),vn=on(Pt+nn[1]);let kn=1,Pn=1,[Rn,In]=this.screenToPageTranslation(Et.movementX,Et.movementY);if([Rn,In]=dn(Rn/Ct,In/kt),Gt){const cn=Math.hypot(qt,Vt);kn=Pn=Math.max(Math.min(Math.hypot(Xt[0]-Ot[0]-Rn,Xt[1]-Ot[1]-In)/cn,1/qt,1/Vt),Qt/qt,tn/Vt)}else Wt?kn=Math.max(Qt,Math.min(1,Math.abs(Xt[0]-Ot[0]-Rn)))/qt:Pn=Math.max(tn,Math.min(1,Math.abs(Xt[1]-Ot[1]-In)))/Vt;const Mn=on(qt*kn),en=on(Vt*Pn);nn=pn(...sn(Mn,en));const zt=gn-nn[0],Ft=vn-nn[1];this.width=Mn,this.height=en,this.x=zt,this.y=Ft,this.setDims(Ct*Mn,kt*en),this.fixAndSetPosition()},St=new WeakSet,Ir=async function(){var Ct;const ut=ot(this,b);if(!ut)return;if(!ot(this,g)&&!ot(this,_)){ut.classList.remove("done"),(Ct=ot(this,j))==null||Ct.remove();return}ct._l10nPromise.get("editor_alt_text_edit_button_label").then(kt=>{ut.setAttribute("aria-label",kt)});let Et=ot(this,j);if(!Et){Yt(this,j,Et=document.createElement("span")),Et.className="tooltip",Et.setAttribute("role","tooltip");const kt=Et.id=`alt-text-tooltip-${this.id}`;ut.setAttribute("aria-describedby",kt);const xt=100;ut.addEventListener("mouseenter",()=>{Yt(this,_e,setTimeout(()=>{Yt(this,_e,null),ot(this,j).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},xt))}),ut.addEventListener("mouseleave",()=>{var Pt;clearTimeout(ot(this,_e)),Yt(this,_e,null),(Pt=ot(this,j))==null||Pt.classList.remove("show")})}ut.classList.add("done"),Et.innerText=ot(this,_)?await ct._l10nPromise.get("editor_alt_text_decorative_tooltip"):ot(this,g),Et.parentNode||ut.append(Et)},an=new WeakSet,co=function(ut){if(!this._isDraggable)return;const Et=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Ct,kt;Et&&(Ct={passive:!0,capture:!0},kt=Pt=>{const[qt,Vt]=this.screenToPageTranslation(Pt.movementX,Pt.movementY);this._uiManager.dragSelectedEditors(qt,Vt)},window.addEventListener("pointermove",kt,Ct));const xt=()=>{if(window.removeEventListener("pointerup",xt),window.removeEventListener("blur",xt),Et&&window.removeEventListener("pointermove",kt,Ct),Yt(this,tt,!1),!this._uiManager.endDragSession()){const{isMac:Pt}=a.FeatureTest.platform;ut.ctrlKey&&!Pt||ut.shiftKey||ut.metaKey&&Pt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",xt),window.addEventListener("blur",xt)},Nt(ct,mt),zn(ct,"_borderLineWidth",-1),zn(ct,"_colorManager",new s.ColorManager),zn(ct,"_zIndex",1),zn(ct,"SMALL_EDITOR_SIZE",0);let h=ct;e.AnnotationEditor=h;class d extends h{constructor(ut){super(ut),this.annotationElementId=ut.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,o)=>{var $,et,rt,st,tt,Pr,pt,lt,at,At,vt,uo,yt,bt,Mt,Tt,Lt,Bt,Kt,_t,Ut,St,rn,an,dt,ct,gt,ut,Et,Ct,kt,xt,Pt,qt,Vt,Qt,tn,on,Zt,pn,Tn,dn,Cn,sn,Gt,Wt,Ot,ho,nn,Mr,vn,Or,Pn,dr,In,Nr,en,Lr,Ft,Gn,hn,rr,Bn,fo,fn,po,mn,Dr,xn,ir,un,Fr;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=c,e.opacityToHex=h;var s=o(1),a=o(6);function c(Rt,ht,wt){for(const It of wt)ht.addEventListener(It,Rt[It].bind(Rt))}function h(Rt){return Math.round(Math.min(255,Math.max(1,255*Rt))).toString(16).padStart(2,"0")}class d{constructor(){Nt(this,$,0)}getId(){return`${s.AnnotationEditorPrefix}${nr(this,$)._++}`}}$=new WeakMap;const it=class it{constructor(){Nt(this,tt);Nt(this,et,(0,s.getUuid)());Nt(this,rt,0);Nt(this,st,null)}static get _isSVGFittingCanvas(){const ht='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',It=new OffscreenCanvas(1,3).getContext("2d"),Dt=new Image;Dt.src=ht;const Ht=Dt.decode().then(()=>(It.drawImage(Dt,0,0,1,1,0,0,1,3),new Uint32Array(It.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",Ht)}async getFromFile(ht){const{lastModified:wt,name:It,size:Dt,type:Ht}=ht;return jt(this,tt,Pr).call(this,`${wt}_${It}_${Dt}_${Ht}`,ht)}async getFromUrl(ht){return jt(this,tt,Pr).call(this,ht,ht)}async getFromId(ht){ot(this,st)||Yt(this,st,new Map);const wt=ot(this,st).get(ht);return wt?wt.bitmap?(wt.refCounter+=1,wt):wt.file?this.getFromFile(wt.file):this.getFromUrl(wt.url):null}getSvgUrl(ht){const wt=ot(this,st).get(ht);return wt!=null&&wt.isSvg?wt.svgUrl:null}deleteId(ht){ot(this,st)||Yt(this,st,new Map);const wt=ot(this,st).get(ht);wt&&(wt.refCounter-=1,wt.refCounter===0&&(wt.bitmap=null))}isValidId(ht){return ht.startsWith(`image_${ot(this,et)}_`)}};et=new WeakMap,rt=new WeakMap,st=new WeakMap,tt=new WeakSet,Pr=async function(ht,wt){ot(this,st)||Yt(this,st,new Map);let It=ot(this,st).get(ht);if(It===null)return null;if(It!=null&&It.bitmap)return It.refCounter+=1,It;try{It||(It={bitmap:null,id:`image_${ot(this,et)}_${nr(this,rt)._++}`,refCounter:0,isSvg:!1});let Dt;if(typeof wt=="string"){It.url=wt;const Ht=await fetch(wt);if(!Ht.ok)throw new Error(Ht.statusText);Dt=await Ht.blob()}else Dt=It.file=wt;if(Dt.type==="image/svg+xml"){const Ht=it._isSVGFittingCanvas,Jt=new FileReader,ln=new Image,En=new Promise((yn,Nn)=>{ln.onload=()=>{It.bitmap=ln,It.isSvg=!0,yn()},Jt.onload=async()=>{const An=It.svgUrl=Jt.result;ln.src=await Ht?`${An}#svgView(preserveAspectRatio(none))`:An},ln.onerror=Jt.onerror=Nn});Jt.readAsDataURL(Dt),await En}else It.bitmap=await createImageBitmap(Dt);It.refCounter=1}catch(Dt){console.error(Dt),It=null}return ot(this,st).set(ht,It),It&&ot(this,st).set(It.id,It),It};let g=it;class _{constructor(ht=128){Nt(this,pt,[]);Nt(this,lt,!1);Nt(this,at,void 0);Nt(this,At,-1);Yt(this,at,ht)}add({cmd:ht,undo:wt,mustExec:It,type:Dt=NaN,overwriteIfSameType:Ht=!1,keepUndo:Jt=!1}){if(It&&ht(),ot(this,lt))return;const ln={cmd:ht,undo:wt,type:Dt};if(ot(this,At)===-1){ot(this,pt).length>0&&(ot(this,pt).length=0),Yt(this,At,0),ot(this,pt).push(ln);return}if(Ht&&ot(this,pt)[ot(this,At)].type===Dt){Jt&&(ln.undo=ot(this,pt)[ot(this,At)].undo),ot(this,pt)[ot(this,At)]=ln;return}const En=ot(this,At)+1;En===ot(this,at)?ot(this,pt).splice(0,1):(Yt(this,At,En),En<ot(this,pt).length&&ot(this,pt).splice(En)),ot(this,pt).push(ln)}undo(){ot(this,At)!==-1&&(Yt(this,lt,!0),ot(this,pt)[ot(this,At)].undo(),Yt(this,lt,!1),Yt(this,At,ot(this,At)-1))}redo(){ot(this,At)<ot(this,pt).length-1&&(Yt(this,At,ot(this,At)+1),Yt(this,lt,!0),ot(this,pt)[ot(this,At)].cmd(),Yt(this,lt,!1))}hasSomethingToUndo(){return ot(this,At)!==-1}hasSomethingToRedo(){return ot(this,At)<ot(this,pt).length-1}destroy(){Yt(this,pt,null)}}pt=new WeakMap,lt=new WeakMap,at=new WeakMap,At=new WeakMap,e.CommandManager=_;class b{constructor(ht){Nt(this,vt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:wt}=s.FeatureTest.platform;for(const[It,Dt,Ht={}]of ht)for(const Jt of It){const ln=Jt.startsWith("mac+");wt&&ln?(this.callbacks.set(Jt.slice(4),{callback:Dt,options:Ht}),this.allKeys.add(Jt.split("+").at(-1))):!wt&&!ln&&(this.callbacks.set(Jt,{callback:Dt,options:Ht}),this.allKeys.add(Jt.split("+").at(-1)))}}exec(ht,wt){if(!this.allKeys.has(wt.key))return;const It=this.callbacks.get(jt(this,vt,uo).call(this,wt));if(!It)return;const{callback:Dt,options:{bubbles:Ht=!1,args:Jt=[],checker:ln=null}}=It;ln&&!ln(ht,wt)||(Dt.bind(ht,...Jt)(),Ht||(wt.stopPropagation(),wt.preventDefault()))}}vt=new WeakSet,uo=function(ht){ht.altKey&&this.buffer.push("alt"),ht.ctrlKey&&this.buffer.push("ctrl"),ht.metaKey&&this.buffer.push("meta"),ht.shiftKey&&this.buffer.push("shift"),this.buffer.push(ht.key);const wt=this.buffer.join("+");return this.buffer.length=0,wt},e.KeyboardManager=b;const mt=class mt{get _colors(){const ht=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(ht),(0,s.shadow)(this,"_colors",ht)}convert(ht){const wt=(0,a.getRGB)(ht);if(!window.matchMedia("(forced-colors: active)").matches)return wt;for(const[It,Dt]of this._colors)if(Dt.every((Ht,Jt)=>Ht===wt[Jt]))return mt._colorsMapping.get(It);return wt}getHexCode(ht){const wt=this._colors.get(ht);return wt?s.Util.makeHexColor(...wt):ht}};zn(mt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let j=mt;e.ColorManager=j;const wn=class wn{constructor(ht,wt,It,Dt,Ht,Jt){Nt(this,Ot);Nt(this,nn);Nt(this,vn);Nt(this,Pn);Nt(this,In);Nt(this,en);Nt(this,Ft);Nt(this,hn);Nt(this,Bn);Nt(this,fn);Nt(this,mn);Nt(this,xn);Nt(this,un);Nt(this,yt,null);Nt(this,bt,new Map);Nt(this,Mt,new Map);Nt(this,Tt,null);Nt(this,Lt,null);Nt(this,Bt,new _);Nt(this,Kt,0);Nt(this,_t,new Set);Nt(this,Ut,null);Nt(this,St,null);Nt(this,rn,new Set);Nt(this,an,null);Nt(this,dt,new d);Nt(this,ct,!1);Nt(this,gt,!1);Nt(this,ut,null);Nt(this,Et,s.AnnotationEditorType.NONE);Nt(this,Ct,new Set);Nt(this,kt,null);Nt(this,xt,this.blur.bind(this));Nt(this,Pt,this.focus.bind(this));Nt(this,qt,this.copy.bind(this));Nt(this,Vt,this.cut.bind(this));Nt(this,Qt,this.paste.bind(this));Nt(this,tn,this.keydown.bind(this));Nt(this,on,this.onEditingAction.bind(this));Nt(this,Zt,this.onPageChanging.bind(this));Nt(this,pn,this.onScaleChanging.bind(this));Nt(this,Tn,this.onRotationChanging.bind(this));Nt(this,dn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Nt(this,Cn,[0,0]);Nt(this,sn,null);Nt(this,Gt,null);Nt(this,Wt,null);Yt(this,Gt,ht),Yt(this,Wt,wt),Yt(this,Tt,It),this._eventBus=Dt,this._eventBus._on("editingaction",ot(this,on)),this._eventBus._on("pagechanging",ot(this,Zt)),this._eventBus._on("scalechanging",ot(this,pn)),this._eventBus._on("rotationchanging",ot(this,Tn)),Yt(this,Lt,Ht.annotationStorage),Yt(this,an,Ht.filterFactory),Yt(this,kt,Jt),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const ht=wn.prototype,wt=Ht=>{const{activeElement:Jt}=document;return Jt&&ot(Ht,Gt).contains(Jt)&&Ht.hasSomethingToControl()},It=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new b([[["ctrl+a","mac+meta+a"],ht.selectAll],[["ctrl+z","mac+meta+z"],ht.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],ht.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],ht.delete],[["Escape","mac+Escape"],ht.unselectAll],[["ArrowLeft","mac+ArrowLeft"],ht.translateSelectedEditors,{args:[-It,0],checker:wt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],ht.translateSelectedEditors,{args:[-Dt,0],checker:wt}],[["ArrowRight","mac+ArrowRight"],ht.translateSelectedEditors,{args:[It,0],checker:wt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],ht.translateSelectedEditors,{args:[Dt,0],checker:wt}],[["ArrowUp","mac+ArrowUp"],ht.translateSelectedEditors,{args:[0,-It],checker:wt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],ht.translateSelectedEditors,{args:[0,-Dt],checker:wt}],[["ArrowDown","mac+ArrowDown"],ht.translateSelectedEditors,{args:[0,It],checker:wt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],ht.translateSelectedEditors,{args:[0,Dt],checker:wt}]]))}destroy(){jt(this,Pn,dr).call(this),jt(this,nn,Mr).call(this),this._eventBus._off("editingaction",ot(this,on)),this._eventBus._off("pagechanging",ot(this,Zt)),this._eventBus._off("scalechanging",ot(this,pn)),this._eventBus._off("rotationchanging",ot(this,Tn));for(const ht of ot(this,Mt).values())ht.destroy();ot(this,Mt).clear(),ot(this,bt).clear(),ot(this,rn).clear(),Yt(this,yt,null),ot(this,Ct).clear(),ot(this,Bt).destroy(),ot(this,Tt).destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",ot(this,kt)?ot(this,an).addHCMFilter(ot(this,kt).foreground,ot(this,kt).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(ot(this,Gt)).direction)}editAltText(ht){var wt;(wt=ot(this,Tt))==null||wt.editAltText(this,ht)}onPageChanging({pageNumber:ht}){Yt(this,Kt,ht-1)}focusMainContainer(){ot(this,Gt).focus()}findParent(ht,wt){for(const It of ot(this,Mt).values()){const{x:Dt,y:Ht,width:Jt,height:ln}=It.div.getBoundingClientRect();if(ht>=Dt&&ht<=Dt+Jt&&wt>=Ht&&wt<=Ht+ln)return It}return null}disableUserSelect(ht=!1){ot(this,Wt).classList.toggle("noUserSelect",ht)}addShouldRescale(ht){ot(this,rn).add(ht)}removeShouldRescale(ht){ot(this,rn).delete(ht)}onScaleChanging({scale:ht}){this.commitOrRemove(),this.viewParameters.realScale=ht*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const wt of ot(this,rn))wt.onScaleChanging()}onRotationChanging({pagesRotation:ht}){this.commitOrRemove(),this.viewParameters.rotation=ht}addToAnnotationStorage(ht){!ht.isEmpty()&&ot(this,Lt)&&!ot(this,Lt).has(ht.id)&&ot(this,Lt).setValue(ht.id,ht)}blur(){if(!this.hasSelection)return;const{activeElement:ht}=document;for(const wt of ot(this,Ct))if(wt.div.contains(ht)){Yt(this,ut,[wt,ht]),wt._focusEventsAllowed=!1;break}}focus(){if(!ot(this,ut))return;const[ht,wt]=ot(this,ut);Yt(this,ut,null),wt.addEventListener("focusin",()=>{ht._focusEventsAllowed=!0},{once:!0}),wt.focus()}addEditListeners(){jt(this,vn,Or).call(this),jt(this,In,Nr).call(this)}removeEditListeners(){jt(this,Pn,dr).call(this),jt(this,en,Lr).call(this)}copy(ht){var It;if(ht.preventDefault(),(It=ot(this,yt))==null||It.commitOrRemove(),!this.hasSelection)return;const wt=[];for(const Dt of ot(this,Ct)){const Ht=Dt.serialize(!0);Ht&&wt.push(Ht)}wt.length!==0&&ht.clipboardData.setData("application/pdfjs",JSON.stringify(wt))}cut(ht){this.copy(ht),this.delete()}paste(ht){ht.preventDefault();const{clipboardData:wt}=ht;for(const Ht of wt.items)for(const Jt of ot(this,St))if(Jt.isHandlingMimeForPasting(Ht.type)){Jt.paste(Ht,this.currentLayer);return}let It=wt.getData("application/pdfjs");if(!It)return;try{It=JSON.parse(It)}catch(Ht){(0,s.warn)(`paste: "${Ht.message}".`);return}if(!Array.isArray(It))return;this.unselectAll();const Dt=this.currentLayer;try{const Ht=[];for(const En of It){const yn=Dt.deserialize(En);if(!yn)return;Ht.push(yn)}const Jt=()=>{for(const En of Ht)jt(this,mn,Dr).call(this,En);jt(this,un,Fr).call(this,Ht)},ln=()=>{for(const En of Ht)En.remove()};this.addCommands({cmd:Jt,undo:ln,mustExec:!0})}catch(Ht){(0,s.warn)(`paste: "${Ht.message}".`)}}keydown(ht){var wt;(wt=this.getActive())!=null&&wt.shouldGetKeyboardEvents()||wn._keyboardManager.exec(this,ht)}onEditingAction(ht){["undo","redo","delete","selectAll"].includes(ht.name)&&this[ht.name]()}setEditingState(ht){ht?(jt(this,Ot,ho).call(this),jt(this,vn,Or).call(this),jt(this,In,Nr).call(this),jt(this,Ft,Gn).call(this,{isEditing:ot(this,Et)!==s.AnnotationEditorType.NONE,isEmpty:jt(this,xn,ir).call(this),hasSomethingToUndo:ot(this,Bt).hasSomethingToUndo(),hasSomethingToRedo:ot(this,Bt).hasSomethingToRedo(),hasSelectedEditor:!1})):(jt(this,nn,Mr).call(this),jt(this,Pn,dr).call(this),jt(this,en,Lr).call(this),jt(this,Ft,Gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(ht){if(!ot(this,St)){Yt(this,St,ht);for(const wt of ot(this,St))jt(this,hn,rr).call(this,wt.defaultPropertiesToUpdate)}}getId(){return ot(this,dt).getId()}get currentLayer(){return ot(this,Mt).get(ot(this,Kt))}getLayer(ht){return ot(this,Mt).get(ht)}get currentPageIndex(){return ot(this,Kt)}addLayer(ht){ot(this,Mt).set(ht.pageIndex,ht),ot(this,ct)?ht.enable():ht.disable()}removeLayer(ht){ot(this,Mt).delete(ht.pageIndex)}updateMode(ht,wt=null){if(ot(this,Et)!==ht){if(Yt(this,Et,ht),ht===s.AnnotationEditorType.NONE){this.setEditingState(!1),jt(this,fn,po).call(this);return}this.setEditingState(!0),jt(this,Bn,fo).call(this),this.unselectAll();for(const It of ot(this,Mt).values())It.updateMode(ht);if(wt){for(const It of ot(this,bt).values())if(It.annotationElementId===wt){this.setSelected(It),It.enterInEditMode();break}}}}updateToolbar(ht){ht!==ot(this,Et)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:ht})}updateParams(ht,wt){if(ot(this,St)){if(ht===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(ht);return}for(const It of ot(this,Ct))It.updateParams(ht,wt);for(const It of ot(this,St))It.updateDefaultParams(ht,wt)}}enableWaiting(ht=!1){if(ot(this,gt)!==ht){Yt(this,gt,ht);for(const wt of ot(this,Mt).values())ht?wt.disableClick():wt.enableClick(),wt.div.classList.toggle("waiting",ht)}}getEditors(ht){const wt=[];for(const It of ot(this,bt).values())It.pageIndex===ht&&wt.push(It);return wt}getEditor(ht){return ot(this,bt).get(ht)}addEditor(ht){ot(this,bt).set(ht.id,ht)}removeEditor(ht){var wt;ot(this,bt).delete(ht.id),this.unselect(ht),(!ht.annotationElementId||!ot(this,_t).has(ht.annotationElementId))&&((wt=ot(this,Lt))==null||wt.remove(ht.id))}addDeletedAnnotationElement(ht){ot(this,_t).add(ht.annotationElementId),ht.deleted=!0}isDeletedAnnotationElement(ht){return ot(this,_t).has(ht)}removeDeletedAnnotationElement(ht){ot(this,_t).delete(ht.annotationElementId),ht.deleted=!1}setActiveEditor(ht){ot(this,yt)!==ht&&(Yt(this,yt,ht),ht&&jt(this,hn,rr).call(this,ht.propertiesToUpdate))}toggleSelected(ht){if(ot(this,Ct).has(ht)){ot(this,Ct).delete(ht),ht.unselect(),jt(this,Ft,Gn).call(this,{hasSelectedEditor:this.hasSelection});return}ot(this,Ct).add(ht),ht.select(),jt(this,hn,rr).call(this,ht.propertiesToUpdate),jt(this,Ft,Gn).call(this,{hasSelectedEditor:!0})}setSelected(ht){for(const wt of ot(this,Ct))wt!==ht&&wt.unselect();ot(this,Ct).clear(),ot(this,Ct).add(ht),ht.select(),jt(this,hn,rr).call(this,ht.propertiesToUpdate),jt(this,Ft,Gn).call(this,{hasSelectedEditor:!0})}isSelected(ht){return ot(this,Ct).has(ht)}unselect(ht){ht.unselect(),ot(this,Ct).delete(ht),jt(this,Ft,Gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ot(this,Ct).size!==0}undo(){ot(this,Bt).undo(),jt(this,Ft,Gn).call(this,{hasSomethingToUndo:ot(this,Bt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:jt(this,xn,ir).call(this)})}redo(){ot(this,Bt).redo(),jt(this,Ft,Gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ot(this,Bt).hasSomethingToRedo(),isEmpty:jt(this,xn,ir).call(this)})}addCommands(ht){ot(this,Bt).add(ht),jt(this,Ft,Gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:jt(this,xn,ir).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ht=[...ot(this,Ct)],wt=()=>{for(const Dt of ht)Dt.remove()},It=()=>{for(const Dt of ht)jt(this,mn,Dr).call(this,Dt)};this.addCommands({cmd:wt,undo:It,mustExec:!0})}commitOrRemove(){var ht;(ht=ot(this,yt))==null||ht.commitOrRemove()}hasSomethingToControl(){return ot(this,yt)||this.hasSelection}selectAll(){for(const ht of ot(this,Ct))ht.commit();jt(this,un,Fr).call(this,ot(this,bt).values())}unselectAll(){if(ot(this,yt)){ot(this,yt).commitOrRemove();return}if(this.hasSelection){for(const ht of ot(this,Ct))ht.unselect();ot(this,Ct).clear(),jt(this,Ft,Gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(ht,wt,It=!1){if(It||this.commitOrRemove(),!this.hasSelection)return;ot(this,Cn)[0]+=ht,ot(this,Cn)[1]+=wt;const[Dt,Ht]=ot(this,Cn),Jt=[...ot(this,Ct)],ln=1e3;ot(this,sn)&&clearTimeout(ot(this,sn)),Yt(this,sn,setTimeout(()=>{Yt(this,sn,null),ot(this,Cn)[0]=ot(this,Cn)[1]=0,this.addCommands({cmd:()=>{for(const En of Jt)ot(this,bt).has(En.id)&&En.translateInPage(Dt,Ht)},undo:()=>{for(const En of Jt)ot(this,bt).has(En.id)&&En.translateInPage(-Dt,-Ht)},mustExec:!1})},ln));for(const En of Jt)En.translateInPage(ht,wt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Yt(this,Ut,new Map);for(const ht of ot(this,Ct))ot(this,Ut).set(ht,{savedX:ht.x,savedY:ht.y,savedPageIndex:ht.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ot(this,Ut))return!1;this.disableUserSelect(!1);const ht=ot(this,Ut);Yt(this,Ut,null);let wt=!1;for(const[{x:Dt,y:Ht,pageIndex:Jt},ln]of ht)ln.newX=Dt,ln.newY=Ht,ln.newPageIndex=Jt,wt||(wt=Dt!==ln.savedX||Ht!==ln.savedY||Jt!==ln.savedPageIndex);if(!wt)return!1;const It=(Dt,Ht,Jt,ln)=>{if(ot(this,bt).has(Dt.id)){const En=ot(this,Mt).get(ln);En?Dt._setParentAndPosition(En,Ht,Jt):(Dt.pageIndex=ln,Dt.x=Ht,Dt.y=Jt)}};return this.addCommands({cmd:()=>{for(const[Dt,{newX:Ht,newY:Jt,newPageIndex:ln}]of ht)It(Dt,Ht,Jt,ln)},undo:()=>{for(const[Dt,{savedX:Ht,savedY:Jt,savedPageIndex:ln}]of ht)It(Dt,Ht,Jt,ln)},mustExec:!0}),!0}dragSelectedEditors(ht,wt){if(ot(this,Ut))for(const It of ot(this,Ut).keys())It.drag(ht,wt)}rebuild(ht){if(ht.parent===null){const wt=this.getLayer(ht.pageIndex);wt?(wt.changeParent(ht),wt.addOrRebuild(ht)):(this.addEditor(ht),this.addToAnnotationStorage(ht),ht.rebuild())}else ht.parent.addOrRebuild(ht)}isActive(ht){return ot(this,yt)===ht}getActive(){return ot(this,yt)}getMode(){return ot(this,Et)}get imageManager(){return(0,s.shadow)(this,"imageManager",new g)}};yt=new WeakMap,bt=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,Bt=new WeakMap,Kt=new WeakMap,_t=new WeakMap,Ut=new WeakMap,St=new WeakMap,rn=new WeakMap,an=new WeakMap,dt=new WeakMap,ct=new WeakMap,gt=new WeakMap,ut=new WeakMap,Et=new WeakMap,Ct=new WeakMap,kt=new WeakMap,xt=new WeakMap,Pt=new WeakMap,qt=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,tn=new WeakMap,on=new WeakMap,Zt=new WeakMap,pn=new WeakMap,Tn=new WeakMap,dn=new WeakMap,Cn=new WeakMap,sn=new WeakMap,Gt=new WeakMap,Wt=new WeakMap,Ot=new WeakSet,ho=function(){window.addEventListener("focus",ot(this,Pt)),window.addEventListener("blur",ot(this,xt))},nn=new WeakSet,Mr=function(){window.removeEventListener("focus",ot(this,Pt)),window.removeEventListener("blur",ot(this,xt))},vn=new WeakSet,Or=function(){window.addEventListener("keydown",ot(this,tn),{capture:!0})},Pn=new WeakSet,dr=function(){window.removeEventListener("keydown",ot(this,tn),{capture:!0})},In=new WeakSet,Nr=function(){document.addEventListener("copy",ot(this,qt)),document.addEventListener("cut",ot(this,Vt)),document.addEventListener("paste",ot(this,Qt))},en=new WeakSet,Lr=function(){document.removeEventListener("copy",ot(this,qt)),document.removeEventListener("cut",ot(this,Vt)),document.removeEventListener("paste",ot(this,Qt))},Ft=new WeakSet,Gn=function(ht){Object.entries(ht).some(([It,Dt])=>ot(this,dn)[It]!==Dt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ot(this,dn),ht)})},hn=new WeakSet,rr=function(ht){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:ht})},Bn=new WeakSet,fo=function(){if(!ot(this,ct)){Yt(this,ct,!0);for(const ht of ot(this,Mt).values())ht.enable()}},fn=new WeakSet,po=function(){if(this.unselectAll(),ot(this,ct)){Yt(this,ct,!1);for(const ht of ot(this,Mt).values())ht.disable()}},mn=new WeakSet,Dr=function(ht){const wt=ot(this,Mt).get(ht.pageIndex);wt?wt.addOrRebuild(ht):this.addEditor(ht)},xn=new WeakSet,ir=function(){if(ot(this,bt).size===0)return!0;if(ot(this,bt).size===1)for(const ht of ot(this,bt).values())return ht.isEmpty();return!1},un=new WeakSet,Fr=function(ht){ot(this,Ct).clear();for(const wt of ht)wt.isEmpty()||(ot(this,Ct).add(wt),wt.select());jt(this,Ft,Gn).call(this,{hasSelectedEditor:!0})},zn(wn,"TRANSLATE_SMALL",1),zn(wn,"TRANSLATE_BIG",10);let _e=wn;e.AnnotationEditorUIManager=_e},(i,e,o)=>{var Kt,_t,Ut,St,rn,an,dt,ct,gt,ut,Et,Ct,Jn,xt,Zn,qt,jr,Qt,fr,on,pr,pn,or,dn,sr;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=At,e.getColorValues=bt,e.getCurrentTransform=Mt,e.getCurrentTransformInverse=Tt,e.getFilenameFromUrl=tt,e.getPdfFilenameFromUrl=nt,e.getRGB=yt,e.getXfaPageViewport=mt,e.isDataScheme=rt,e.isPdfFile=st,e.isValidFetchUrl=pt,e.loadScript=at,e.noContextMenu=lt,e.setLayerDimensions=Lt;var s=o(7),a=o(1);const c="http://www.w3.org/2000/svg",Bt=class Bt{};zn(Bt,"CSS",96),zn(Bt,"PDF",72),zn(Bt,"PDF_TO_CSS_UNITS",Bt.CSS/Bt.PDF);let h=Bt;e.PixelsPerInch=h;class d extends s.BaseFilterFactory{constructor({docId:Wt,ownerDocument:Ot=globalThis.document}={}){super();Nt(this,Ct);Nt(this,xt);Nt(this,qt);Nt(this,Qt);Nt(this,on);Nt(this,pn);Nt(this,dn);Nt(this,Kt,void 0);Nt(this,_t,void 0);Nt(this,Ut,void 0);Nt(this,St,void 0);Nt(this,rn,void 0);Nt(this,an,void 0);Nt(this,dt,void 0);Nt(this,ct,void 0);Nt(this,gt,void 0);Nt(this,ut,void 0);Nt(this,Et,0);Yt(this,Ut,Wt),Yt(this,St,Ot)}addFilter(Wt){if(!Wt)return"none";let Ot=ot(this,Ct,Jn).get(Wt);if(Ot)return Ot;let Xt,nn,gn,vn;if(Wt.length===1){const In=Wt[0],Mn=new Array(256);for(let en=0;en<256;en++)Mn[en]=In[en]/255;vn=Xt=nn=gn=Mn.join(",")}else{const[In,Mn,en]=Wt,zt=new Array(256),Ft=new Array(256),cn=new Array(256);for(let hn=0;hn<256;hn++)zt[hn]=In[hn]/255,Ft[hn]=Mn[hn]/255,cn[hn]=en[hn]/255;Xt=zt.join(","),nn=Ft.join(","),gn=cn.join(","),vn=`${Xt}${nn}${gn}`}if(Ot=ot(this,Ct,Jn).get(vn),Ot)return ot(this,Ct,Jn).set(Wt,Ot),Ot;const kn=`g_${ot(this,Ut)}_transfer_map_${nr(this,Et)._++}`,Pn=`url(#${kn})`;ot(this,Ct,Jn).set(Wt,Pn),ot(this,Ct,Jn).set(vn,Pn);const Rn=jt(this,Qt,fr).call(this,kn);return jt(this,pn,or).call(this,Xt,nn,gn,Rn),Pn}addHCMFilter(Wt,Ot){var Mn;const Xt=`${Wt}-${Ot}`;if(ot(this,an)===Xt)return ot(this,dt);if(Yt(this,an,Xt),Yt(this,dt,"none"),(Mn=ot(this,rn))==null||Mn.remove(),!Wt||!Ot)return ot(this,dt);const nn=jt(this,dn,sr).call(this,Wt);Wt=a.Util.makeHexColor(...nn);const gn=jt(this,dn,sr).call(this,Ot);if(Ot=a.Util.makeHexColor(...gn),ot(this,xt,Zn).style.color="",Wt==="#000000"&&Ot==="#ffffff"||Wt===Ot)return ot(this,dt);const vn=new Array(256);for(let en=0;en<=255;en++){const zt=en/255;vn[en]=zt<=.03928?zt/12.92:((zt+.055)/1.055)**2.4}const kn=vn.join(","),Pn=`g_${ot(this,Ut)}_hcm_filter`,Rn=Yt(this,ct,jt(this,Qt,fr).call(this,Pn));jt(this,pn,or).call(this,kn,kn,kn,Rn),jt(this,qt,jr).call(this,Rn);const In=(en,zt)=>{const Ft=nn[en]/255,cn=gn[en]/255,hn=new Array(zt+1);for(let Hn=0;Hn<=zt;Hn++)hn[Hn]=Ft+Hn/zt*(cn-Ft);return hn.join(",")};return jt(this,pn,or).call(this,In(0,5),In(1,5),In(2,5),Rn),Yt(this,dt,`url(#${Pn})`),ot(this,dt)}addHighlightHCMFilter(Wt,Ot,Xt,nn){var cn;const gn=`${Wt}-${Ot}-${Xt}-${nn}`;if(ot(this,gt)===gn)return ot(this,ut);if(Yt(this,gt,gn),Yt(this,ut,"none"),(cn=ot(this,ct))==null||cn.remove(),!Wt||!Ot)return ot(this,ut);const[vn,kn]=[Wt,Ot].map(jt(this,dn,sr).bind(this));let Pn=Math.round(.2126*vn[0]+.7152*vn[1]+.0722*vn[2]),Rn=Math.round(.2126*kn[0]+.7152*kn[1]+.0722*kn[2]),[In,Mn]=[Xt,nn].map(jt(this,dn,sr).bind(this));Rn<Pn&&([Pn,Rn,In,Mn]=[Rn,Pn,Mn,In]),ot(this,xt,Zn).style.color="";const en=(hn,Hn,Bn)=>{const $t=new Array(256),fn=(Rn-Pn)/Bn,_n=hn/255,mn=(Hn-hn)/(255*Bn);let bn=0;for(let xn=0;xn<=Bn;xn++){const jn=Math.round(Pn+xn*fn),un=_n+xn*mn;for(let Dn=bn;Dn<=jn;Dn++)$t[Dn]=un;bn=jn+1}for(let xn=bn;xn<256;xn++)$t[xn]=$t[bn-1];return $t.join(",")},zt=`g_${ot(this,Ut)}_hcm_highlight_filter`,Ft=Yt(this,ct,jt(this,Qt,fr).call(this,zt));return jt(this,qt,jr).call(this,Ft),jt(this,pn,or).call(this,en(In[0],Mn[0],5),en(In[1],Mn[1],5),en(In[2],Mn[2],5),Ft),Yt(this,ut,`url(#${zt})`),ot(this,ut)}destroy(Wt=!1){Wt&&(ot(this,dt)||ot(this,ut))||(ot(this,_t)&&(ot(this,_t).parentNode.parentNode.remove(),Yt(this,_t,null)),ot(this,Kt)&&(ot(this,Kt).clear(),Yt(this,Kt,null)),Yt(this,Et,0))}}Kt=new WeakMap,_t=new WeakMap,Ut=new WeakMap,St=new WeakMap,rn=new WeakMap,an=new WeakMap,dt=new WeakMap,ct=new WeakMap,gt=new WeakMap,ut=new WeakMap,Et=new WeakMap,Ct=new WeakSet,Jn=function(){return ot(this,Kt)||Yt(this,Kt,new Map)},xt=new WeakSet,Zn=function(){if(!ot(this,_t)){const Wt=ot(this,St).createElement("div"),{style:Ot}=Wt;Ot.visibility="hidden",Ot.contain="strict",Ot.width=Ot.height=0,Ot.position="absolute",Ot.top=Ot.left=0,Ot.zIndex=-1;const Xt=ot(this,St).createElementNS(c,"svg");Xt.setAttribute("width",0),Xt.setAttribute("height",0),Yt(this,_t,ot(this,St).createElementNS(c,"defs")),Wt.append(Xt),Xt.append(ot(this,_t)),ot(this,St).body.append(Wt)}return ot(this,_t)},qt=new WeakSet,jr=function(Wt){const Ot=ot(this,St).createElementNS(c,"feColorMatrix");Ot.setAttribute("type","matrix"),Ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Wt.append(Ot)},Qt=new WeakSet,fr=function(Wt){const Ot=ot(this,St).createElementNS(c,"filter");return Ot.setAttribute("color-interpolation-filters","sRGB"),Ot.setAttribute("id",Wt),ot(this,xt,Zn).append(Ot),Ot},on=new WeakSet,pr=function(Wt,Ot,Xt){const nn=ot(this,St).createElementNS(c,Ot);nn.setAttribute("type","discrete"),nn.setAttribute("tableValues",Xt),Wt.append(nn)},pn=new WeakSet,or=function(Wt,Ot,Xt,nn){const gn=ot(this,St).createElementNS(c,"feComponentTransfer");nn.append(gn),jt(this,on,pr).call(this,gn,"feFuncR",Wt),jt(this,on,pr).call(this,gn,"feFuncG",Ot),jt(this,on,pr).call(this,gn,"feFuncB",Xt)},dn=new WeakSet,sr=function(Wt){return ot(this,xt,Zn).style.color=Wt,yt(getComputedStyle(ot(this,xt,Zn)).getPropertyValue("color"))},e.DOMFilterFactory=d;class g extends s.BaseCanvasFactory{constructor({ownerDocument:Gt=globalThis.document}={}){super(),this._document=Gt}_createCanvas(Gt,Wt){const Ot=this._document.createElement("canvas");return Ot.width=Gt,Ot.height=Wt,Ot}}e.DOMCanvasFactory=g;async function _(sn,Gt=!1){if(pt(sn,document.baseURI)){const Wt=await fetch(sn);if(!Wt.ok)throw new Error(Wt.statusText);return Gt?new Uint8Array(await Wt.arrayBuffer()):(0,a.stringToBytes)(await Wt.text())}return new Promise((Wt,Ot)=>{const Xt=new XMLHttpRequest;Xt.open("GET",sn,!0),Gt&&(Xt.responseType="arraybuffer"),Xt.onreadystatechange=()=>{if(Xt.readyState===XMLHttpRequest.DONE){if(Xt.status===200||Xt.status===0){let nn;if(Gt&&Xt.response?nn=new Uint8Array(Xt.response):!Gt&&Xt.responseText&&(nn=(0,a.stringToBytes)(Xt.responseText)),nn){Wt(nn);return}}Ot(new Error(Xt.statusText))}},Xt.send(null)})}class b extends s.BaseCMapReaderFactory{_fetchData(Gt,Wt){return _(Gt,this.isCompressed).then(Ot=>({cMapData:Ot,compressionType:Wt}))}}e.DOMCMapReaderFactory=b;class j extends s.BaseStandardFontDataFactory{_fetchData(Gt){return _(Gt,!0)}}e.DOMStandardFontDataFactory=j;class _e extends s.BaseSVGFactory{_createSVG(Gt){return document.createElementNS(c,Gt)}}e.DOMSVGFactory=_e;class ${constructor({viewBox:Gt,scale:Wt,rotation:Ot,offsetX:Xt=0,offsetY:nn=0,dontFlip:gn=!1}){this.viewBox=Gt,this.scale=Wt,this.rotation=Ot,this.offsetX=Xt,this.offsetY=nn;const vn=(Gt[2]+Gt[0])/2,kn=(Gt[3]+Gt[1])/2;let Pn,Rn,In,Mn;switch(Ot%=360,Ot<0&&(Ot+=360),Ot){case 180:Pn=-1,Rn=0,In=0,Mn=1;break;case 90:Pn=0,Rn=1,In=1,Mn=0;break;case 270:Pn=0,Rn=-1,In=-1,Mn=0;break;case 0:Pn=1,Rn=0,In=0,Mn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}gn&&(In=-In,Mn=-Mn);let en,zt,Ft,cn;Pn===0?(en=Math.abs(kn-Gt[1])*Wt+Xt,zt=Math.abs(vn-Gt[0])*Wt+nn,Ft=(Gt[3]-Gt[1])*Wt,cn=(Gt[2]-Gt[0])*Wt):(en=Math.abs(vn-Gt[0])*Wt+Xt,zt=Math.abs(kn-Gt[1])*Wt+nn,Ft=(Gt[2]-Gt[0])*Wt,cn=(Gt[3]-Gt[1])*Wt),this.transform=[Pn*Wt,Rn*Wt,In*Wt,Mn*Wt,en-Pn*Wt*vn-In*Wt*kn,zt-Rn*Wt*vn-Mn*Wt*kn],this.width=Ft,this.height=cn}get rawDims(){const{viewBox:Gt}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:Gt[2]-Gt[0],pageHeight:Gt[3]-Gt[1],pageX:Gt[0],pageY:Gt[1]})}clone({scale:Gt=this.scale,rotation:Wt=this.rotation,offsetX:Ot=this.offsetX,offsetY:Xt=this.offsetY,dontFlip:nn=!1}={}){return new $({viewBox:this.viewBox.slice(),scale:Gt,rotation:Wt,offsetX:Ot,offsetY:Xt,dontFlip:nn})}convertToViewportPoint(Gt,Wt){return a.Util.applyTransform([Gt,Wt],this.transform)}convertToViewportRectangle(Gt){const Wt=a.Util.applyTransform([Gt[0],Gt[1]],this.transform),Ot=a.Util.applyTransform([Gt[2],Gt[3]],this.transform);return[Wt[0],Wt[1],Ot[0],Ot[1]]}convertToPdfPoint(Gt,Wt){return a.Util.applyInverseTransform([Gt,Wt],this.transform)}}e.PageViewport=$;class et extends a.BaseException{constructor(Gt,Wt=0){super(Gt,"RenderingCancelledException"),this.extraDelay=Wt}}e.RenderingCancelledException=et;function rt(sn){const Gt=sn.length;let Wt=0;for(;Wt<Gt&&sn[Wt].trim()==="";)Wt++;return sn.substring(Wt,Wt+5).toLowerCase()==="data:"}function st(sn){return typeof sn=="string"&&/\.pdf$/i.test(sn)}function tt(sn,Gt=!1){return Gt||([sn]=sn.split(/[#?]/,1)),sn.substring(sn.lastIndexOf("/")+1)}function nt(sn,Gt="document.pdf"){if(typeof sn!="string")return Gt;if(rt(sn))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Gt;const Wt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ot=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Xt=Wt.exec(sn);let nn=Ot.exec(Xt[1])||Ot.exec(Xt[2])||Ot.exec(Xt[3]);if(nn&&(nn=nn[0],nn.includes("%")))try{nn=Ot.exec(decodeURIComponent(nn))[0]}catch{}return nn||Gt}class it{constructor(){zn(this,"started",Object.create(null));zn(this,"times",[])}time(Gt){Gt in this.started&&(0,a.warn)(`Timer is already running for ${Gt}`),this.started[Gt]=Date.now()}timeEnd(Gt){Gt in this.started||(0,a.warn)(`Timer has not been started for ${Gt}`),this.times.push({name:Gt,start:this.started[Gt],end:Date.now()}),delete this.started[Gt]}toString(){const Gt=[];let Wt=0;for(const{name:Ot}of this.times)Wt=Math.max(Ot.length,Wt);for(const{name:Ot,start:Xt,end:nn}of this.times)Gt.push(`${Ot.padEnd(Wt)} ${nn-Xt}ms
`);return Gt.join("")}}e.StatTimer=it;function pt(sn,Gt){try{const{protocol:Wt}=Gt?new URL(sn,Gt):new URL(sn);return Wt==="http:"||Wt==="https:"}catch{return!1}}function lt(sn){sn.preventDefault()}function at(sn,Gt=!1){return new Promise((Wt,Ot)=>{const Xt=document.createElement("script");Xt.src=sn,Xt.onload=function(nn){Gt&&Xt.remove(),Wt(nn)},Xt.onerror=function(){Ot(new Error(`Cannot load script at: ${Xt.src}`))},(document.head||document.documentElement).append(Xt)})}function At(sn){console.log("Deprecated API usage: "+sn)}let vt;class ft{static toDateObject(Gt){if(!Gt||typeof Gt!="string")return null;vt||(vt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Wt=vt.exec(Gt);if(!Wt)return null;const Ot=parseInt(Wt[1],10);let Xt=parseInt(Wt[2],10);Xt=Xt>=1&&Xt<=12?Xt-1:0;let nn=parseInt(Wt[3],10);nn=nn>=1&&nn<=31?nn:1;let gn=parseInt(Wt[4],10);gn=gn>=0&&gn<=23?gn:0;let vn=parseInt(Wt[5],10);vn=vn>=0&&vn<=59?vn:0;let kn=parseInt(Wt[6],10);kn=kn>=0&&kn<=59?kn:0;const Pn=Wt[7]||"Z";let Rn=parseInt(Wt[8],10);Rn=Rn>=0&&Rn<=23?Rn:0;let In=parseInt(Wt[9],10)||0;return In=In>=0&&In<=59?In:0,Pn==="-"?(gn+=Rn,vn+=In):Pn==="+"&&(gn-=Rn,vn-=In),new Date(Date.UTC(Ot,Xt,nn,gn,vn,kn))}}e.PDFDateString=ft;function mt(sn,{scale:Gt=1,rotation:Wt=0}){const{width:Ot,height:Xt}=sn.attributes.style,nn=[0,0,parseInt(Ot),parseInt(Xt)];return new $({viewBox:nn,scale:Gt,rotation:Wt})}function yt(sn){if(sn.startsWith("#")){const Gt=parseInt(sn.slice(1),16);return[(Gt&16711680)>>16,(Gt&65280)>>8,Gt&255]}return sn.startsWith("rgb(")?sn.slice(4,-1).split(",").map(Gt=>parseInt(Gt)):sn.startsWith("rgba(")?sn.slice(5,-1).split(",").map(Gt=>parseInt(Gt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${sn}"`),[0,0,0])}function bt(sn){const Gt=document.createElement("span");Gt.style.visibility="hidden",document.body.append(Gt);for(const Wt of sn.keys()){Gt.style.color=Wt;const Ot=window.getComputedStyle(Gt).color;sn.set(Wt,yt(Ot))}Gt.remove()}function Mt(sn){const{a:Gt,b:Wt,c:Ot,d:Xt,e:nn,f:gn}=sn.getTransform();return[Gt,Wt,Ot,Xt,nn,gn]}function Tt(sn){const{a:Gt,b:Wt,c:Ot,d:Xt,e:nn,f:gn}=sn.getTransform().invertSelf();return[Gt,Wt,Ot,Xt,nn,gn]}function Lt(sn,Gt,Wt=!1,Ot=!0){if(Gt instanceof $){const{pageWidth:Xt,pageHeight:nn}=Gt.rawDims,{style:gn}=sn,vn=a.FeatureTest.isCSSRoundSupported,kn=`var(--scale-factor) * ${Xt}px`,Pn=`var(--scale-factor) * ${nn}px`,Rn=vn?`round(${kn}, 1px)`:`calc(${kn})`,In=vn?`round(${Pn}, 1px)`:`calc(${Pn})`;!Wt||Gt.rotation%180===0?(gn.width=Rn,gn.height=In):(gn.width=In,gn.height=Rn)}Ot&&sn.setAttribute("data-main-rotation",Gt.rotation)}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var s=o(1);class a{constructor(){this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(b){return"none"}addHCMFilter(b,j){return"none"}addHighlightHCMFilter(b,j,_e,$){return"none"}destroy(b=!1){}}e.BaseFilterFactory=a;class c{constructor(){this.constructor===c&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(b,j){if(b<=0||j<=0)throw new Error("Invalid canvas size");const _e=this._createCanvas(b,j);return{canvas:_e,context:_e.getContext("2d")}}reset(b,j,_e){if(!b.canvas)throw new Error("Canvas is not specified");if(j<=0||_e<=0)throw new Error("Invalid canvas size");b.canvas.width=j,b.canvas.height=_e}destroy(b){if(!b.canvas)throw new Error("Canvas is not specified");b.canvas.width=0,b.canvas.height=0,b.canvas=null,b.context=null}_createCanvas(b,j){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=c;class h{constructor({baseUrl:b=null,isCompressed:j=!0}){this.constructor===h&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=b,this.isCompressed=j}async fetch({name:b}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!b)throw new Error("CMap name must be specified.");const j=this.baseUrl+b+(this.isCompressed?".bcmap":""),_e=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(j,_e).catch($=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${j}`)})}_fetchData(b,j){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=h;class d{constructor({baseUrl:b=null}){this.constructor===d&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=b}async fetch({filename:b}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!b)throw new Error("Font filename must be specified.");const j=`${this.baseUrl}${b}`;return this._fetchData(j).catch(_e=>{throw new Error(`Unable to load font data at: ${j}`)})}_fetchData(b){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=d;class g{constructor(){this.constructor===g&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(b,j,_e=!1){if(b<=0||j<=0)throw new Error("Invalid SVG dimensions");const $=this._createSVG("svg:svg");return $.setAttribute("version","1.1"),_e||($.setAttribute("width",`${b}px`),$.setAttribute("height",`${j}px`)),$.setAttribute("preserveAspectRatio","none"),$.setAttribute("viewBox",`0 0 ${b} ${j}`),$}createElement(b){if(typeof b!="string")throw new Error("Invalid SVG element type");return this._createSVG(b)}_createSVG(b){(0,s.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=g},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var s=o(1);const a=3285377520,c=4294901760,h=65535;class d{constructor(_){this.h1=_?_&4294967295:a,this.h2=_?_&4294967295:a}update(_){let b,j;if(typeof _=="string"){b=new Uint8Array(_.length*2),j=0;for(let At=0,vt=_.length;At<vt;At++){const ft=_.charCodeAt(At);ft<=255?b[j++]=ft:(b[j++]=ft>>>8,b[j++]=ft&255)}}else if((0,s.isArrayBuffer)(_))b=_.slice(),j=b.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const _e=j>>2,$=j-_e*4,et=new Uint32Array(b.buffer,0,_e);let rt=0,st=0,tt=this.h1,nt=this.h2;const it=3432918353,pt=461845907,lt=it&h,at=pt&h;for(let At=0;At<_e;At++)At&1?(rt=et[At],rt=rt*it&c|rt*lt&h,rt=rt<<15|rt>>>17,rt=rt*pt&c|rt*at&h,tt^=rt,tt=tt<<13|tt>>>19,tt=tt*5+3864292196):(st=et[At],st=st*it&c|st*lt&h,st=st<<15|st>>>17,st=st*pt&c|st*at&h,nt^=st,nt=nt<<13|nt>>>19,nt=nt*5+3864292196);switch(rt=0,$){case 3:rt^=b[_e*4+2]<<16;case 2:rt^=b[_e*4+1]<<8;case 1:rt^=b[_e*4],rt=rt*it&c|rt*lt&h,rt=rt<<15|rt>>>17,rt=rt*pt&c|rt*at&h,_e&1?tt^=rt:nt^=rt}this.h1=tt,this.h2=nt}hexdigest(){let _=this.h1,b=this.h2;return _^=b>>>1,_=_*3981806797&c|_*36045&h,b=b*4283543511&c|((b<<16|_>>>16)*2950163797&c)>>>16,_^=b>>>1,_=_*444984403&c|_*60499&h,b=b*3301882366&c|((b<<16|_>>>16)*3120437893&c)>>>16,_^=b>>>1,(_>>>0).toString(16).padStart(8,"0")+(b>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=d},(i,e,o)=>{var h;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var s=o(1);class a{constructor({ownerDocument:g=globalThis.document,styleElement:_=null}){Nt(this,h,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(g,_.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),ot(this,h).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||ot(this,h).has(g.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:b,style:j}=g,_e=new FontFace(_,b,j);this.addNativeFontFace(_e);try{await _e.load(),ot(this,h).add(_)}catch{(0,s.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(_e)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const b=g.createNativeFontFace();if(b){this.addNativeFontFace(b);try{await b.loaded}catch(j){throw(0,s.warn)(`Failed to load font '${b.family}': '${j}'.`),g.disableFontFace=!0,j}}return}const _=g.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(b=>{const j=this._queueLoadingCallback(b);this._prepareFontLoadEvent(g,j)})}}get isFontLoadingAPISupported(){var _;const g=!!((_=this._document)!=null&&_.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function _(){for((0,s.assert)(!j.done,"completeRequest() cannot be called twice."),j.done=!0;b.length>0&&b[0].done;){const _e=b.shift();setTimeout(_e.callback,0)}}const{loadingRequests:b}=this,j={done:!1,complete:_,callback:g};return b.push(j),j}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,_){function b(yt,bt){return yt.charCodeAt(bt)<<24|yt.charCodeAt(bt+1)<<16|yt.charCodeAt(bt+2)<<8|yt.charCodeAt(bt+3)&255}function j(yt,bt,Mt,Tt){const Lt=yt.substring(0,bt),Bt=yt.substring(bt+Mt);return Lt+Tt+Bt}let _e,$;const et=this._document.createElement("canvas");et.width=1,et.height=1;const rt=et.getContext("2d");let st=0;function tt(yt,bt){if(++st>30){(0,s.warn)("Load test font never loaded."),bt();return}if(rt.font="30px "+yt,rt.fillText(".",0,20),rt.getImageData(0,0,1,1).data[3]>0){bt();return}setTimeout(tt.bind(null,yt,bt))}const nt=`lt${Date.now()}${this.loadTestFontId++}`;let it=this._loadTestFont;it=j(it,976,nt.length,nt);const lt=16,at=1482184792;let At=b(it,lt);for(_e=0,$=nt.length-3;_e<$;_e+=4)At=At-at+b(nt,_e)|0;_e<nt.length&&(At=At-at+b(nt+"XXX",_e)|0),it=j(it,lt,4,(0,s.string32)(At));const vt=`url(data:font/opentype;base64,${btoa(it)});`,ft=`@font-face {font-family:"${nt}";src:${vt}}`;this.insertRule(ft);const mt=this._document.createElement("div");mt.style.visibility="hidden",mt.style.width=mt.style.height="10px",mt.style.position="absolute",mt.style.top=mt.style.left="0px";for(const yt of[g.loadedName,nt]){const bt=this._document.createElement("span");bt.textContent="Hi",bt.style.fontFamily=yt,mt.append(bt)}this._document.body.append(mt),tt(nt,()=>{mt.remove(),_.complete()})}}h=new WeakMap,e.FontLoader=a;class c{constructor(g,{isEvalSupported:_=!0,disableFontFace:b=!1,ignoreErrors:j=!1,inspectFont:_e=null}){this.compiledGlyphs=Object.create(null);for(const $ in g)this[$]=g[$];this.isEvalSupported=_!==!1,this.disableFontFace=b===!0,this.ignoreErrors=j===!0,this._inspectFont=_e}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const b={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(b.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,b)}return(_=this._inspectFont)==null||_.call(this,this),g}createFontFaceRule(){var j;if(!this.data||this.disableFontFace)return null;const g=(0,s.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(g)});`;let b;if(!this.cssFontInfo)b=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let _e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(_e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),b=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${_e}src:${_}}`}return(j=this._inspectFont)==null||j.call(this,this,_),b}getPathGenerator(g,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let b;try{b=g.get(this.loadedName+"_path_"+_)}catch(j){if(!this.ignoreErrors)throw j;return(0,s.warn)(`getPathGenerator - ignoring character: "${j}".`),this.compiledGlyphs[_]=function(_e,$){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const j=[];for(const _e of b){const $=_e.args!==void 0?_e.args.join(","):"";j.push("c.",_e.cmd,"(",$,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",j.join(""))}return this.compiledGlyphs[_]=function(j,_e){for(const $ of b)$.cmd==="scale"&&($.args=[_e,-_e]),j[$.cmd].apply(j,$.args)}}}e.FontFaceObject=c},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var s=o(7);o(1);const a=function(_){return new Promise((b,j)=>{require$$5.readFile(_,($,et)=>{if($||!et){j(new Error($));return}b(new Uint8Array(et))})})};class c extends s.BaseFilterFactory{}e.NodeFilterFactory=c;class h extends s.BaseCanvasFactory{_createCanvas(b,j){return require$$5.createCanvas(b,j)}}e.NodeCanvasFactory=h;class d extends s.BaseCMapReaderFactory{_fetchData(b,j){return a(b).then(_e=>({cMapData:_e,compressionType:j}))}}e.NodeCMapReaderFactory=d;class g extends s.BaseStandardFontDataFactory{_fetchData(b){return a(b)}}e.NodeStandardFontDataFactory=g},(i,e,o)=>{var _t,Ur,St,Br;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var s=o(1),a=o(6),c=o(12),h=o(13);const d=16,g=100,_=4096,b=15,j=10,_e=1e3,$=16;function et(dt,ct){if(dt._removeMirroring)throw new Error("Context is already forwarding operations.");dt.__originalSave=dt.save,dt.__originalRestore=dt.restore,dt.__originalRotate=dt.rotate,dt.__originalScale=dt.scale,dt.__originalTranslate=dt.translate,dt.__originalTransform=dt.transform,dt.__originalSetTransform=dt.setTransform,dt.__originalResetTransform=dt.resetTransform,dt.__originalClip=dt.clip,dt.__originalMoveTo=dt.moveTo,dt.__originalLineTo=dt.lineTo,dt.__originalBezierCurveTo=dt.bezierCurveTo,dt.__originalRect=dt.rect,dt.__originalClosePath=dt.closePath,dt.__originalBeginPath=dt.beginPath,dt._removeMirroring=()=>{dt.save=dt.__originalSave,dt.restore=dt.__originalRestore,dt.rotate=dt.__originalRotate,dt.scale=dt.__originalScale,dt.translate=dt.__originalTranslate,dt.transform=dt.__originalTransform,dt.setTransform=dt.__originalSetTransform,dt.resetTransform=dt.__originalResetTransform,dt.clip=dt.__originalClip,dt.moveTo=dt.__originalMoveTo,dt.lineTo=dt.__originalLineTo,dt.bezierCurveTo=dt.__originalBezierCurveTo,dt.rect=dt.__originalRect,dt.closePath=dt.__originalClosePath,dt.beginPath=dt.__originalBeginPath,delete dt._removeMirroring},dt.save=function(){ct.save(),this.__originalSave()},dt.restore=function(){ct.restore(),this.__originalRestore()},dt.translate=function(ut,Et){ct.translate(ut,Et),this.__originalTranslate(ut,Et)},dt.scale=function(ut,Et){ct.scale(ut,Et),this.__originalScale(ut,Et)},dt.transform=function(ut,Et,Ct,kt,xt,Pt){ct.transform(ut,Et,Ct,kt,xt,Pt),this.__originalTransform(ut,Et,Ct,kt,xt,Pt)},dt.setTransform=function(ut,Et,Ct,kt,xt,Pt){ct.setTransform(ut,Et,Ct,kt,xt,Pt),this.__originalSetTransform(ut,Et,Ct,kt,xt,Pt)},dt.resetTransform=function(){ct.resetTransform(),this.__originalResetTransform()},dt.rotate=function(ut){ct.rotate(ut),this.__originalRotate(ut)},dt.clip=function(ut){ct.clip(ut),this.__originalClip(ut)},dt.moveTo=function(gt,ut){ct.moveTo(gt,ut),this.__originalMoveTo(gt,ut)},dt.lineTo=function(gt,ut){ct.lineTo(gt,ut),this.__originalLineTo(gt,ut)},dt.bezierCurveTo=function(gt,ut,Et,Ct,kt,xt){ct.bezierCurveTo(gt,ut,Et,Ct,kt,xt),this.__originalBezierCurveTo(gt,ut,Et,Ct,kt,xt)},dt.rect=function(gt,ut,Et,Ct){ct.rect(gt,ut,Et,Ct),this.__originalRect(gt,ut,Et,Ct)},dt.closePath=function(){ct.closePath(),this.__originalClosePath()},dt.beginPath=function(){ct.beginPath(),this.__originalBeginPath()}}class rt{constructor(ct){this.canvasFactory=ct,this.cache=Object.create(null)}getCanvas(ct,gt,ut){let Et;return this.cache[ct]!==void 0?(Et=this.cache[ct],this.canvasFactory.reset(Et,gt,ut)):(Et=this.canvasFactory.create(gt,ut),this.cache[ct]=Et),Et}delete(ct){delete this.cache[ct]}clear(){for(const ct in this.cache){const gt=this.cache[ct];this.canvasFactory.destroy(gt),delete this.cache[ct]}}}function st(dt,ct,gt,ut,Et,Ct,kt,xt,Pt,qt){const[Vt,Qt,tn,on,Zt,pn]=(0,a.getCurrentTransform)(dt);if(Qt===0&&tn===0){const Cn=kt*Vt+Zt,sn=Math.round(Cn),Gt=xt*on+pn,Wt=Math.round(Gt),Ot=(kt+Pt)*Vt+Zt,Xt=Math.abs(Math.round(Ot)-sn)||1,nn=(xt+qt)*on+pn,gn=Math.abs(Math.round(nn)-Wt)||1;return dt.setTransform(Math.sign(Vt),0,0,Math.sign(on),sn,Wt),dt.drawImage(ct,gt,ut,Et,Ct,0,0,Xt,gn),dt.setTransform(Vt,Qt,tn,on,Zt,pn),[Xt,gn]}if(Vt===0&&on===0){const Cn=xt*tn+Zt,sn=Math.round(Cn),Gt=kt*Qt+pn,Wt=Math.round(Gt),Ot=(xt+qt)*tn+Zt,Xt=Math.abs(Math.round(Ot)-sn)||1,nn=(kt+Pt)*Qt+pn,gn=Math.abs(Math.round(nn)-Wt)||1;return dt.setTransform(0,Math.sign(Qt),Math.sign(tn),0,sn,Wt),dt.drawImage(ct,gt,ut,Et,Ct,0,0,gn,Xt),dt.setTransform(Vt,Qt,tn,on,Zt,pn),[gn,Xt]}dt.drawImage(ct,gt,ut,Et,Ct,kt,xt,Pt,qt);const Tn=Math.hypot(Vt,Qt),dn=Math.hypot(tn,on);return[Tn*Pt,dn*qt]}function tt(dt){const{width:ct,height:gt}=dt;if(ct>_e||gt>_e)return null;const ut=1e3,Et=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Ct=ct+1;let kt=new Uint8Array(Ct*(gt+1)),xt,Pt,qt;const Vt=ct+7&-8;let Qt=new Uint8Array(Vt*gt),tn=0;for(const dn of dt.data){let Cn=128;for(;Cn>0;)Qt[tn++]=dn&Cn?0:255,Cn>>=1}let on=0;for(tn=0,Qt[tn]!==0&&(kt[0]=1,++on),Pt=1;Pt<ct;Pt++)Qt[tn]!==Qt[tn+1]&&(kt[Pt]=Qt[tn]?2:1,++on),tn++;for(Qt[tn]!==0&&(kt[Pt]=2,++on),xt=1;xt<gt;xt++){tn=xt*Vt,qt=xt*Ct,Qt[tn-Vt]!==Qt[tn]&&(kt[qt]=Qt[tn]?1:8,++on);let dn=(Qt[tn]?4:0)+(Qt[tn-Vt]?8:0);for(Pt=1;Pt<ct;Pt++)dn=(dn>>2)+(Qt[tn+1]?4:0)+(Qt[tn-Vt+1]?8:0),Et[dn]&&(kt[qt+Pt]=Et[dn],++on),tn++;if(Qt[tn-Vt]!==Qt[tn]&&(kt[qt+Pt]=Qt[tn]?2:4,++on),on>ut)return null}for(tn=Vt*(gt-1),qt=xt*Ct,Qt[tn]!==0&&(kt[qt]=8,++on),Pt=1;Pt<ct;Pt++)Qt[tn]!==Qt[tn+1]&&(kt[qt+Pt]=Qt[tn]?4:8,++on),tn++;if(Qt[tn]!==0&&(kt[qt+Pt]=4,++on),on>ut)return null;const Zt=new Int32Array([0,Ct,-1,0,-Ct,0,0,0,1]),pn=new Path2D;for(xt=0;on&&xt<=gt;xt++){let dn=xt*Ct;const Cn=dn+ct;for(;dn<Cn&&!kt[dn];)dn++;if(dn===Cn)continue;pn.moveTo(dn%Ct,xt);const sn=dn;let Gt=kt[dn];do{const Wt=Zt[Gt];do dn+=Wt;while(!kt[dn]);const Ot=kt[dn];Ot!==5&&Ot!==10?(Gt=Ot,kt[dn]=0):(Gt=Ot&51*Gt>>4,kt[dn]&=Gt>>2|Gt<<2),pn.lineTo(dn%Ct,dn/Ct|0),kt[dn]||--on}while(sn!==dn);--xt}return Qt=null,kt=null,function(dn){dn.save(),dn.scale(1/ct,-1/gt),dn.translate(0,-gt),dn.fill(pn),dn.beginPath(),dn.restore()}}class nt{constructor(ct,gt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,ct,gt])}clone(){const ct=Object.create(this);return ct.clipBox=this.clipBox.slice(),ct}setCurrentPoint(ct,gt){this.x=ct,this.y=gt}updatePathMinMax(ct,gt,ut){[gt,ut]=s.Util.applyTransform([gt,ut],ct),this.minX=Math.min(this.minX,gt),this.minY=Math.min(this.minY,ut),this.maxX=Math.max(this.maxX,gt),this.maxY=Math.max(this.maxY,ut)}updateRectMinMax(ct,gt){const ut=s.Util.applyTransform(gt,ct),Et=s.Util.applyTransform(gt.slice(2),ct);this.minX=Math.min(this.minX,ut[0],Et[0]),this.minY=Math.min(this.minY,ut[1],Et[1]),this.maxX=Math.max(this.maxX,ut[0],Et[0]),this.maxY=Math.max(this.maxY,ut[1],Et[1])}updateScalingPathMinMax(ct,gt){s.Util.scaleMinMax(ct,gt),this.minX=Math.min(this.minX,gt[0]),this.maxX=Math.max(this.maxX,gt[1]),this.minY=Math.min(this.minY,gt[2]),this.maxY=Math.max(this.maxY,gt[3])}updateCurvePathMinMax(ct,gt,ut,Et,Ct,kt,xt,Pt,qt,Vt){const Qt=s.Util.bezierBoundingBox(gt,ut,Et,Ct,kt,xt,Pt,qt);if(Vt){Vt[0]=Math.min(Vt[0],Qt[0],Qt[2]),Vt[1]=Math.max(Vt[1],Qt[0],Qt[2]),Vt[2]=Math.min(Vt[2],Qt[1],Qt[3]),Vt[3]=Math.max(Vt[3],Qt[1],Qt[3]);return}this.updateRectMinMax(ct,Qt)}getPathBoundingBox(ct=c.PathType.FILL,gt=null){const ut=[this.minX,this.minY,this.maxX,this.maxY];if(ct===c.PathType.STROKE){gt||(0,s.unreachable)("Stroke bounding box must include transform.");const Et=s.Util.singularValueDecompose2dScale(gt),Ct=Et[0]*this.lineWidth/2,kt=Et[1]*this.lineWidth/2;ut[0]-=Ct,ut[1]-=kt,ut[2]+=Ct,ut[3]+=kt}return ut}updateClipFromPath(){const ct=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(ct||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(ct){this.clipBox=ct,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(ct=c.PathType.FILL,gt=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(ct,gt))}}function it(dt,ct){if(typeof ImageData<"u"&&ct instanceof ImageData){dt.putImageData(ct,0,0);return}const gt=ct.height,ut=ct.width,Et=gt%$,Ct=(gt-Et)/$,kt=Et===0?Ct:Ct+1,xt=dt.createImageData(ut,$);let Pt=0,qt;const Vt=ct.data,Qt=xt.data;let tn,on,Zt,pn;if(ct.kind===s.ImageKind.GRAYSCALE_1BPP){const Tn=Vt.byteLength,dn=new Uint32Array(Qt.buffer,0,Qt.byteLength>>2),Cn=dn.length,sn=ut+7>>3,Gt=4294967295,Wt=s.FeatureTest.isLittleEndian?4278190080:255;for(tn=0;tn<kt;tn++){for(Zt=tn<Ct?$:Et,qt=0,on=0;on<Zt;on++){const Ot=Tn-Pt;let Xt=0;const nn=Ot>sn?ut:Ot*8-7,gn=nn&-8;let vn=0,kn=0;for(;Xt<gn;Xt+=8)kn=Vt[Pt++],dn[qt++]=kn&128?Gt:Wt,dn[qt++]=kn&64?Gt:Wt,dn[qt++]=kn&32?Gt:Wt,dn[qt++]=kn&16?Gt:Wt,dn[qt++]=kn&8?Gt:Wt,dn[qt++]=kn&4?Gt:Wt,dn[qt++]=kn&2?Gt:Wt,dn[qt++]=kn&1?Gt:Wt;for(;Xt<nn;Xt++)vn===0&&(kn=Vt[Pt++],vn=128),dn[qt++]=kn&vn?Gt:Wt,vn>>=1}for(;qt<Cn;)dn[qt++]=0;dt.putImageData(xt,0,tn*$)}}else if(ct.kind===s.ImageKind.RGBA_32BPP){for(on=0,pn=ut*$*4,tn=0;tn<Ct;tn++)Qt.set(Vt.subarray(Pt,Pt+pn)),Pt+=pn,dt.putImageData(xt,0,on),on+=$;tn<kt&&(pn=ut*Et*4,Qt.set(Vt.subarray(Pt,Pt+pn)),dt.putImageData(xt,0,on))}else if(ct.kind===s.ImageKind.RGB_24BPP)for(Zt=$,pn=ut*Zt,tn=0;tn<kt;tn++){for(tn>=Ct&&(Zt=Et,pn=ut*Zt),qt=0,on=pn;on--;)Qt[qt++]=Vt[Pt++],Qt[qt++]=Vt[Pt++],Qt[qt++]=Vt[Pt++],Qt[qt++]=255;dt.putImageData(xt,0,tn*$)}else throw new Error(`bad image kind: ${ct.kind}`)}function pt(dt,ct){if(ct.bitmap){dt.drawImage(ct.bitmap,0,0);return}const gt=ct.height,ut=ct.width,Et=gt%$,Ct=(gt-Et)/$,kt=Et===0?Ct:Ct+1,xt=dt.createImageData(ut,$);let Pt=0;const qt=ct.data,Vt=xt.data;for(let Qt=0;Qt<kt;Qt++){const tn=Qt<Ct?$:Et;({srcPos:Pt}=(0,h.convertBlackAndWhiteToRGBA)({src:qt,srcPos:Pt,dest:Vt,width:ut,height:tn,nonBlackColor:0})),dt.putImageData(xt,0,Qt*$)}}function lt(dt,ct){const gt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ut of gt)dt[ut]!==void 0&&(ct[ut]=dt[ut]);dt.setLineDash!==void 0&&(ct.setLineDash(dt.getLineDash()),ct.lineDashOffset=dt.lineDashOffset)}function at(dt){if(dt.strokeStyle=dt.fillStyle="#000000",dt.fillRule="nonzero",dt.globalAlpha=1,dt.lineWidth=1,dt.lineCap="butt",dt.lineJoin="miter",dt.miterLimit=10,dt.globalCompositeOperation="source-over",dt.font="10px sans-serif",dt.setLineDash!==void 0&&(dt.setLineDash([]),dt.lineDashOffset=0),!s.isNodeJS){const{filter:ct}=dt;ct!=="none"&&ct!==""&&(dt.filter="none")}}function At(dt,ct,gt,ut){const Et=dt.length;for(let Ct=3;Ct<Et;Ct+=4){const kt=dt[Ct];if(kt===0)dt[Ct-3]=ct,dt[Ct-2]=gt,dt[Ct-1]=ut;else if(kt<255){const xt=255-kt;dt[Ct-3]=dt[Ct-3]*kt+ct*xt>>8,dt[Ct-2]=dt[Ct-2]*kt+gt*xt>>8,dt[Ct-1]=dt[Ct-1]*kt+ut*xt>>8}}}function vt(dt,ct,gt){const ut=dt.length,Et=1/255;for(let Ct=3;Ct<ut;Ct+=4){const kt=gt?gt[dt[Ct]]:dt[Ct];ct[Ct]=ct[Ct]*kt*Et|0}}function ft(dt,ct,gt){const ut=dt.length;for(let Et=3;Et<ut;Et+=4){const Ct=dt[Et-3]*77+dt[Et-2]*152+dt[Et-1]*28;ct[Et]=gt?ct[Et]*gt[Ct>>8]>>8:ct[Et]*Ct>>16}}function mt(dt,ct,gt,ut,Et,Ct,kt,xt,Pt,qt,Vt){const Qt=!!Ct,tn=Qt?Ct[0]:0,on=Qt?Ct[1]:0,Zt=Qt?Ct[2]:0,pn=Et==="Luminosity"?ft:vt,dn=Math.min(ut,Math.ceil(1048576/gt));for(let Cn=0;Cn<ut;Cn+=dn){const sn=Math.min(dn,ut-Cn),Gt=dt.getImageData(xt-qt,Cn+(Pt-Vt),gt,sn),Wt=ct.getImageData(xt,Cn+Pt,gt,sn);Qt&&At(Gt.data,tn,on,Zt),pn(Gt.data,Wt.data,kt),ct.putImageData(Wt,xt,Cn+Pt)}}function yt(dt,ct,gt,ut){const Et=ut[0],Ct=ut[1],kt=ut[2]-Et,xt=ut[3]-Ct;kt===0||xt===0||(mt(ct.context,gt,kt,xt,ct.subtype,ct.backdrop,ct.transferMap,Et,Ct,ct.offsetX,ct.offsetY),dt.save(),dt.globalAlpha=1,dt.globalCompositeOperation="source-over",dt.setTransform(1,0,0,1,0,0),dt.drawImage(gt.canvas,0,0),dt.restore())}function bt(dt,ct){const gt=s.Util.singularValueDecompose2dScale(dt);gt[0]=Math.fround(gt[0]),gt[1]=Math.fround(gt[1]);const ut=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return ct!==void 0?ct:gt[0]<=ut||gt[1]<=ut}const Mt=["butt","round","square"],Tt=["miter","round","bevel"],Lt={},Bt={},an=class an{constructor(ct,gt,ut,Et,Ct,{optionalContentConfig:kt,markedContentStack:xt=null},Pt,qt){Nt(this,_t);Nt(this,St);this.ctx=ct,this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=gt,this.objs=ut,this.canvasFactory=Et,this.filterFactory=Ct,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=xt||[],this.optionalContentConfig=kt,this.cachedCanvases=new rt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Pt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=qt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(ct,gt=null){return typeof ct=="string"?ct.startsWith("g_")?this.commonObjs.get(ct):this.objs.get(ct):gt}beginDrawing({transform:ct,viewport:gt,transparency:ut=!1,background:Et=null}){const Ct=this.ctx.canvas.width,kt=this.ctx.canvas.height,xt=this.ctx.fillStyle;if(this.ctx.fillStyle=Et||"#ffffff",this.ctx.fillRect(0,0,Ct,kt),this.ctx.fillStyle=xt,ut){const Pt=this.cachedCanvases.getCanvas("transparent",Ct,kt);this.compositeCtx=this.ctx,this.transparentCanvas=Pt.canvas,this.ctx=Pt.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),at(this.ctx),ct&&(this.ctx.transform(...ct),this.outputScaleX=ct[0],this.outputScaleY=ct[0]),this.ctx.transform(...gt.transform),this.viewportScale=gt.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(ct,gt,ut,Et){const Ct=ct.argsArray,kt=ct.fnArray;let xt=gt||0;const Pt=Ct.length;if(Pt===xt)return xt;const qt=Pt-xt>j&&typeof ut=="function",Vt=qt?Date.now()+b:0;let Qt=0;const tn=this.commonObjs,on=this.objs;let Zt;for(;;){if(Et!==void 0&&xt===Et.nextBreakPoint)return Et.breakIt(xt,ut),xt;if(Zt=kt[xt],Zt!==s.OPS.dependency)this[Zt].apply(this,Ct[xt]);else for(const pn of Ct[xt]){const Tn=pn.startsWith("g_")?tn:on;if(!Tn.has(pn))return Tn.get(pn,ut),xt}if(xt++,xt===Pt)return xt;if(qt&&++Qt>j){if(Date.now()>Vt)return ut(),xt;Qt=0}}}endDrawing(){jt(this,_t,Ur).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const ct of this._cachedBitmapsMap.values()){for(const gt of ct.values())typeof HTMLCanvasElement<"u"&&gt instanceof HTMLCanvasElement&&(gt.width=gt.height=0);ct.clear()}this._cachedBitmapsMap.clear(),jt(this,St,Br).call(this)}_scaleImage(ct,gt){const ut=ct.width,Et=ct.height;let Ct=Math.max(Math.hypot(gt[0],gt[1]),1),kt=Math.max(Math.hypot(gt[2],gt[3]),1),xt=ut,Pt=Et,qt="prescale1",Vt,Qt;for(;Ct>2&&xt>1||kt>2&&Pt>1;){let tn=xt,on=Pt;Ct>2&&xt>1&&(tn=xt>=16384?Math.floor(xt/2)-1||1:Math.ceil(xt/2),Ct/=xt/tn),kt>2&&Pt>1&&(on=Pt>=16384?Math.floor(Pt/2)-1||1:Math.ceil(Pt)/2,kt/=Pt/on),Vt=this.cachedCanvases.getCanvas(qt,tn,on),Qt=Vt.context,Qt.clearRect(0,0,tn,on),Qt.drawImage(ct,0,0,xt,Pt,0,0,tn,on),ct=Vt.canvas,xt=tn,Pt=on,qt=qt==="prescale1"?"prescale2":"prescale1"}return{img:ct,paintWidth:xt,paintHeight:Pt}}_createMaskCanvas(ct){const gt=this.ctx,{width:ut,height:Et}=ct,Ct=this.current.fillColor,kt=this.current.patternFill,xt=(0,a.getCurrentTransform)(gt);let Pt,qt,Vt,Qt;if((ct.bitmap||ct.data)&&ct.count>1){const Xt=ct.bitmap||ct.data.buffer;qt=JSON.stringify(kt?xt:[xt.slice(0,4),Ct]),Pt=this._cachedBitmapsMap.get(Xt),Pt||(Pt=new Map,this._cachedBitmapsMap.set(Xt,Pt));const nn=Pt.get(qt);if(nn&&!kt){const gn=Math.round(Math.min(xt[0],xt[2])+xt[4]),vn=Math.round(Math.min(xt[1],xt[3])+xt[5]);return{canvas:nn,offsetX:gn,offsetY:vn}}Vt=nn}Vt||(Qt=this.cachedCanvases.getCanvas("maskCanvas",ut,Et),pt(Qt.context,ct));let tn=s.Util.transform(xt,[1/ut,0,0,-1/Et,0,0]);tn=s.Util.transform(tn,[1,0,0,1,0,-Et]);const on=s.Util.applyTransform([0,0],tn),Zt=s.Util.applyTransform([ut,Et],tn),pn=s.Util.normalizeRect([on[0],on[1],Zt[0],Zt[1]]),Tn=Math.round(pn[2]-pn[0])||1,dn=Math.round(pn[3]-pn[1])||1,Cn=this.cachedCanvases.getCanvas("fillCanvas",Tn,dn),sn=Cn.context,Gt=Math.min(on[0],Zt[0]),Wt=Math.min(on[1],Zt[1]);sn.translate(-Gt,-Wt),sn.transform(...tn),Vt||(Vt=this._scaleImage(Qt.canvas,(0,a.getCurrentTransformInverse)(sn)),Vt=Vt.img,Pt&&kt&&Pt.set(qt,Vt)),sn.imageSmoothingEnabled=bt((0,a.getCurrentTransform)(sn),ct.interpolate),st(sn,Vt,0,0,Vt.width,Vt.height,0,0,ut,Et),sn.globalCompositeOperation="source-in";const Ot=s.Util.transform((0,a.getCurrentTransformInverse)(sn),[1,0,0,1,-Gt,-Wt]);return sn.fillStyle=kt?Ct.getPattern(gt,this,Ot,c.PathType.FILL):Ct,sn.fillRect(0,0,ut,Et),Pt&&!kt&&(this.cachedCanvases.delete("fillCanvas"),Pt.set(qt,Cn.canvas)),{canvas:Cn.canvas,offsetX:Math.round(Gt),offsetY:Math.round(Wt)}}setLineWidth(ct){ct!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=ct,this.ctx.lineWidth=ct}setLineCap(ct){this.ctx.lineCap=Mt[ct]}setLineJoin(ct){this.ctx.lineJoin=Tt[ct]}setMiterLimit(ct){this.ctx.miterLimit=ct}setDash(ct,gt){const ut=this.ctx;ut.setLineDash!==void 0&&(ut.setLineDash(ct),ut.lineDashOffset=gt)}setRenderingIntent(ct){}setFlatness(ct){}setGState(ct){for(const[gt,ut]of ct)switch(gt){case"LW":this.setLineWidth(ut);break;case"LC":this.setLineCap(ut);break;case"LJ":this.setLineJoin(ut);break;case"ML":this.setMiterLimit(ut);break;case"D":this.setDash(ut[0],ut[1]);break;case"RI":this.setRenderingIntent(ut);break;case"FL":this.setFlatness(ut);break;case"Font":this.setFont(ut[0],ut[1]);break;case"CA":this.current.strokeAlpha=ut;break;case"ca":this.current.fillAlpha=ut,this.ctx.globalAlpha=ut;break;case"BM":this.ctx.globalCompositeOperation=ut;break;case"SMask":this.current.activeSMask=ut?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(ut);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const ct=this.inSMaskMode;this.current.activeSMask&&!ct?this.beginSMaskMode():!this.current.activeSMask&&ct&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ct=this.ctx.canvas.width,gt=this.ctx.canvas.height,ut="smaskGroupAt"+this.groupLevel,Et=this.cachedCanvases.getCanvas(ut,ct,gt);this.suspendedCtx=this.ctx,this.ctx=Et.context;const Ct=this.ctx;Ct.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),lt(this.suspendedCtx,Ct),et(Ct,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(ct){if(!this.current.activeSMask)return;ct?(ct[0]=Math.floor(ct[0]),ct[1]=Math.floor(ct[1]),ct[2]=Math.ceil(ct[2]),ct[3]=Math.ceil(ct[3])):ct=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const gt=this.current.activeSMask,ut=this.suspendedCtx;yt(ut,gt,this.ctx,ct),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(lt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const ct=this.current;this.stateStack.push(ct),this.current=ct.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),lt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(ct,gt,ut,Et,Ct,kt){this.ctx.transform(ct,gt,ut,Et,Ct,kt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(ct,gt,ut){const Et=this.ctx,Ct=this.current;let kt=Ct.x,xt=Ct.y,Pt,qt;const Vt=(0,a.getCurrentTransform)(Et),Qt=Vt[0]===0&&Vt[3]===0||Vt[1]===0&&Vt[2]===0,tn=Qt?ut.slice(0):null;for(let on=0,Zt=0,pn=ct.length;on<pn;on++)switch(ct[on]|0){case s.OPS.rectangle:kt=gt[Zt++],xt=gt[Zt++];const Tn=gt[Zt++],dn=gt[Zt++],Cn=kt+Tn,sn=xt+dn;Et.moveTo(kt,xt),Tn===0||dn===0?Et.lineTo(Cn,sn):(Et.lineTo(Cn,xt),Et.lineTo(Cn,sn),Et.lineTo(kt,sn)),Qt||Ct.updateRectMinMax(Vt,[kt,xt,Cn,sn]),Et.closePath();break;case s.OPS.moveTo:kt=gt[Zt++],xt=gt[Zt++],Et.moveTo(kt,xt),Qt||Ct.updatePathMinMax(Vt,kt,xt);break;case s.OPS.lineTo:kt=gt[Zt++],xt=gt[Zt++],Et.lineTo(kt,xt),Qt||Ct.updatePathMinMax(Vt,kt,xt);break;case s.OPS.curveTo:Pt=kt,qt=xt,kt=gt[Zt+4],xt=gt[Zt+5],Et.bezierCurveTo(gt[Zt],gt[Zt+1],gt[Zt+2],gt[Zt+3],kt,xt),Ct.updateCurvePathMinMax(Vt,Pt,qt,gt[Zt],gt[Zt+1],gt[Zt+2],gt[Zt+3],kt,xt,tn),Zt+=6;break;case s.OPS.curveTo2:Pt=kt,qt=xt,Et.bezierCurveTo(kt,xt,gt[Zt],gt[Zt+1],gt[Zt+2],gt[Zt+3]),Ct.updateCurvePathMinMax(Vt,Pt,qt,kt,xt,gt[Zt],gt[Zt+1],gt[Zt+2],gt[Zt+3],tn),kt=gt[Zt+2],xt=gt[Zt+3],Zt+=4;break;case s.OPS.curveTo3:Pt=kt,qt=xt,kt=gt[Zt+2],xt=gt[Zt+3],Et.bezierCurveTo(gt[Zt],gt[Zt+1],kt,xt,kt,xt),Ct.updateCurvePathMinMax(Vt,Pt,qt,gt[Zt],gt[Zt+1],kt,xt,kt,xt,tn),Zt+=4;break;case s.OPS.closePath:Et.closePath();break}Qt&&Ct.updateScalingPathMinMax(Vt,tn),Ct.setCurrentPoint(kt,xt)}closePath(){this.ctx.closePath()}stroke(ct=!0){const gt=this.ctx,ut=this.current.strokeColor;gt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof ut=="object"&&(ut!=null&&ut.getPattern)?(gt.save(),gt.strokeStyle=ut.getPattern(gt,this,(0,a.getCurrentTransformInverse)(gt),c.PathType.STROKE),this.rescaleAndStroke(!1),gt.restore()):this.rescaleAndStroke(!0)),ct&&this.consumePath(this.current.getClippedPathBoundingBox()),gt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(ct=!0){const gt=this.ctx,ut=this.current.fillColor,Et=this.current.patternFill;let Ct=!1;Et&&(gt.save(),gt.fillStyle=ut.getPattern(gt,this,(0,a.getCurrentTransformInverse)(gt),c.PathType.FILL),Ct=!0);const kt=this.current.getClippedPathBoundingBox();this.contentVisible&&kt!==null&&(this.pendingEOFill?(gt.fill("evenodd"),this.pendingEOFill=!1):gt.fill()),Ct&&gt.restore(),ct&&this.consumePath(kt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Lt}eoClip(){this.pendingClip=Bt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const ct=this.pendingTextPaths,gt=this.ctx;if(ct===void 0){gt.beginPath();return}gt.save(),gt.beginPath();for(const ut of ct)gt.setTransform(...ut.transform),gt.translate(ut.x,ut.y),ut.addToPath(gt,ut.fontSize);gt.restore(),gt.clip(),gt.beginPath(),delete this.pendingTextPaths}setCharSpacing(ct){this.current.charSpacing=ct}setWordSpacing(ct){this.current.wordSpacing=ct}setHScale(ct){this.current.textHScale=ct/100}setLeading(ct){this.current.leading=-ct}setFont(ct,gt){var Vt;const ut=this.commonObjs.get(ct),Et=this.current;if(!ut)throw new Error(`Can't find font for ${ct}`);if(Et.fontMatrix=ut.fontMatrix||s.FONT_IDENTITY_MATRIX,(Et.fontMatrix[0]===0||Et.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+ct),gt<0?(gt=-gt,Et.fontDirection=-1):Et.fontDirection=1,this.current.font=ut,this.current.fontSize=gt,ut.isType3Font)return;const Ct=ut.loadedName||"sans-serif",kt=((Vt=ut.systemFontInfo)==null?void 0:Vt.css)||`"${Ct}", ${ut.fallbackName}`;let xt="normal";ut.black?xt="900":ut.bold&&(xt="bold");const Pt=ut.italic?"italic":"normal";let qt=gt;gt<d?qt=d:gt>g&&(qt=g),this.current.fontSizeScale=gt/qt,this.ctx.font=`${Pt} ${xt} ${qt}px ${kt}`}setTextRenderingMode(ct){this.current.textRenderingMode=ct}setTextRise(ct){this.current.textRise=ct}moveText(ct,gt){this.current.x=this.current.lineX+=ct,this.current.y=this.current.lineY+=gt}setLeadingMoveText(ct,gt){this.setLeading(-gt),this.moveText(ct,gt)}setTextMatrix(ct,gt,ut,Et,Ct,kt){this.current.textMatrix=[ct,gt,ut,Et,Ct,kt],this.current.textMatrixScale=Math.hypot(ct,gt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(ct,gt,ut,Et){const Ct=this.ctx,kt=this.current,xt=kt.font,Pt=kt.textRenderingMode,qt=kt.fontSize/kt.fontSizeScale,Vt=Pt&s.TextRenderingMode.FILL_STROKE_MASK,Qt=!!(Pt&s.TextRenderingMode.ADD_TO_PATH_FLAG),tn=kt.patternFill&&!xt.missingFile;let on;(xt.disableFontFace||Qt||tn)&&(on=xt.getPathGenerator(this.commonObjs,ct)),xt.disableFontFace||tn?(Ct.save(),Ct.translate(gt,ut),Ct.beginPath(),on(Ct,qt),Et&&Ct.setTransform(...Et),(Vt===s.TextRenderingMode.FILL||Vt===s.TextRenderingMode.FILL_STROKE)&&Ct.fill(),(Vt===s.TextRenderingMode.STROKE||Vt===s.TextRenderingMode.FILL_STROKE)&&Ct.stroke(),Ct.restore()):((Vt===s.TextRenderingMode.FILL||Vt===s.TextRenderingMode.FILL_STROKE)&&Ct.fillText(ct,gt,ut),(Vt===s.TextRenderingMode.STROKE||Vt===s.TextRenderingMode.FILL_STROKE)&&Ct.strokeText(ct,gt,ut)),Qt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(Ct),x:gt,y:ut,fontSize:qt,addToPath:on})}get isFontSubpixelAAEnabled(){const{context:ct}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ct.scale(1.5,1),ct.fillText("I",0,10);const gt=ct.getImageData(0,0,10,10).data;let ut=!1;for(let Et=3;Et<gt.length;Et+=4)if(gt[Et]>0&&gt[Et]<255){ut=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",ut)}showText(ct){const gt=this.current,ut=gt.font;if(ut.isType3Font)return this.showType3Text(ct);const Et=gt.fontSize;if(Et===0)return;const Ct=this.ctx,kt=gt.fontSizeScale,xt=gt.charSpacing,Pt=gt.wordSpacing,qt=gt.fontDirection,Vt=gt.textHScale*qt,Qt=ct.length,tn=ut.vertical,on=tn?1:-1,Zt=ut.defaultVMetrics,pn=Et*gt.fontMatrix[0],Tn=gt.textRenderingMode===s.TextRenderingMode.FILL&&!ut.disableFontFace&&!gt.patternFill;Ct.save(),Ct.transform(...gt.textMatrix),Ct.translate(gt.x,gt.y+gt.textRise),qt>0?Ct.scale(Vt,-1):Ct.scale(Vt,1);let dn;if(gt.patternFill){Ct.save();const Ot=gt.fillColor.getPattern(Ct,this,(0,a.getCurrentTransformInverse)(Ct),c.PathType.FILL);dn=(0,a.getCurrentTransform)(Ct),Ct.restore(),Ct.fillStyle=Ot}let Cn=gt.lineWidth;const sn=gt.textMatrixScale;if(sn===0||Cn===0){const Ot=gt.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Ot===s.TextRenderingMode.STROKE||Ot===s.TextRenderingMode.FILL_STROKE)&&(Cn=this.getSinglePixelWidth())}else Cn/=sn;if(kt!==1&&(Ct.scale(kt,kt),Cn/=kt),Ct.lineWidth=Cn,ut.isInvalidPDFjsFont){const Ot=[];let Xt=0;for(const nn of ct)Ot.push(nn.unicode),Xt+=nn.width;Ct.fillText(Ot.join(""),0,0),gt.x+=Xt*pn*Vt,Ct.restore(),this.compose();return}let Gt=0,Wt;for(Wt=0;Wt<Qt;++Wt){const Ot=ct[Wt];if(typeof Ot=="number"){Gt+=on*Ot*Et/1e3;continue}let Xt=!1;const nn=(Ot.isSpace?Pt:0)+xt,gn=Ot.fontChar,vn=Ot.accent;let kn,Pn,Rn=Ot.width;if(tn){const Mn=Ot.vmetric||Zt,en=-(Ot.vmetric?Mn[1]:Rn*.5)*pn,zt=Mn[2]*pn;Rn=Mn?-Mn[0]:Rn,kn=en/kt,Pn=(Gt+zt)/kt}else kn=Gt/kt,Pn=0;if(ut.remeasure&&Rn>0){const Mn=Ct.measureText(gn).width*1e3/Et*kt;if(Rn<Mn&&this.isFontSubpixelAAEnabled){const en=Rn/Mn;Xt=!0,Ct.save(),Ct.scale(en,1),kn/=en}else Rn!==Mn&&(kn+=(Rn-Mn)/2e3*Et/kt)}if(this.contentVisible&&(Ot.isInFont||ut.missingFile)){if(Tn&&!vn)Ct.fillText(gn,kn,Pn);else if(this.paintChar(gn,kn,Pn,dn),vn){const Mn=kn+Et*vn.offset.x/kt,en=Pn-Et*vn.offset.y/kt;this.paintChar(vn.fontChar,Mn,en,dn)}}const In=tn?Rn*pn-nn*qt:Rn*pn+nn*qt;Gt+=In,Xt&&Ct.restore()}tn?gt.y-=Gt:gt.x+=Gt*Vt,Ct.restore(),this.compose()}showType3Text(ct){const gt=this.ctx,ut=this.current,Et=ut.font,Ct=ut.fontSize,kt=ut.fontDirection,xt=Et.vertical?1:-1,Pt=ut.charSpacing,qt=ut.wordSpacing,Vt=ut.textHScale*kt,Qt=ut.fontMatrix||s.FONT_IDENTITY_MATRIX,tn=ct.length,on=ut.textRenderingMode===s.TextRenderingMode.INVISIBLE;let Zt,pn,Tn,dn;if(!(on||Ct===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,gt.save(),gt.transform(...ut.textMatrix),gt.translate(ut.x,ut.y),gt.scale(Vt,kt),Zt=0;Zt<tn;++Zt){if(pn=ct[Zt],typeof pn=="number"){dn=xt*pn*Ct/1e3,this.ctx.translate(dn,0),ut.x+=dn*Vt;continue}const Cn=(pn.isSpace?qt:0)+Pt,sn=Et.charProcOperatorList[pn.operatorListId];if(!sn){(0,s.warn)(`Type3 character "${pn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=pn,this.save(),gt.scale(Ct,Ct),gt.transform(...Qt),this.executeOperatorList(sn),this.restore()),Tn=s.Util.applyTransform([pn.width,0],Qt)[0]*Ct+Cn,gt.translate(Tn,0),ut.x+=Tn*Vt}gt.restore(),this.processingType3=null}}setCharWidth(ct,gt){}setCharWidthAndBounds(ct,gt,ut,Et,Ct,kt){this.ctx.rect(ut,Et,Ct-ut,kt-Et),this.ctx.clip(),this.endPath()}getColorN_Pattern(ct){let gt;if(ct[0]==="TilingPattern"){const ut=ct[1],Et=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),Ct={createCanvasGraphics:kt=>new an(kt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};gt=new c.TilingPattern(ct,ut,this.ctx,Ct,Et)}else gt=this._getPattern(ct[1],ct[2]);return gt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(ct,gt,ut){const Et=s.Util.makeHexColor(ct,gt,ut);this.ctx.strokeStyle=Et,this.current.strokeColor=Et}setFillRGBColor(ct,gt,ut){const Et=s.Util.makeHexColor(ct,gt,ut);this.ctx.fillStyle=Et,this.current.fillColor=Et,this.current.patternFill=!1}_getPattern(ct,gt=null){let ut;return this.cachedPatterns.has(ct)?ut=this.cachedPatterns.get(ct):(ut=(0,c.getShadingPattern)(this.getObject(ct)),this.cachedPatterns.set(ct,ut)),gt&&(ut.matrix=gt),ut}shadingFill(ct){if(!this.contentVisible)return;const gt=this.ctx;this.save();const ut=this._getPattern(ct);gt.fillStyle=ut.getPattern(gt,this,(0,a.getCurrentTransformInverse)(gt),c.PathType.SHADING);const Et=(0,a.getCurrentTransformInverse)(gt);if(Et){const{width:Ct,height:kt}=gt.canvas,[xt,Pt,qt,Vt]=s.Util.getAxialAlignedBoundingBox([0,0,Ct,kt],Et);this.ctx.fillRect(xt,Pt,qt-xt,Vt-Pt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(ct,gt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(ct)&&ct.length===6&&this.transform(...ct),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),gt)){const ut=gt[2]-gt[0],Et=gt[3]-gt[1];this.ctx.rect(gt[0],gt[1],ut,Et),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),gt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(ct){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const gt=this.ctx;ct.isolated||(0,s.info)("TODO: Support non-isolated groups."),ct.knockout&&(0,s.warn)("Knockout groups not supported.");const ut=(0,a.getCurrentTransform)(gt);if(ct.matrix&&gt.transform(...ct.matrix),!ct.bbox)throw new Error("Bounding box is required.");let Et=s.Util.getAxialAlignedBoundingBox(ct.bbox,(0,a.getCurrentTransform)(gt));const Ct=[0,0,gt.canvas.width,gt.canvas.height];Et=s.Util.intersect(Et,Ct)||[0,0,0,0];const kt=Math.floor(Et[0]),xt=Math.floor(Et[1]);let Pt=Math.max(Math.ceil(Et[2])-kt,1),qt=Math.max(Math.ceil(Et[3])-xt,1),Vt=1,Qt=1;Pt>_&&(Vt=Pt/_,Pt=_),qt>_&&(Qt=qt/_,qt=_),this.current.startNewPathAndClipBox([0,0,Pt,qt]);let tn="groupAt"+this.groupLevel;ct.smask&&(tn+="_smask_"+this.smaskCounter++%2);const on=this.cachedCanvases.getCanvas(tn,Pt,qt),Zt=on.context;Zt.scale(1/Vt,1/Qt),Zt.translate(-kt,-xt),Zt.transform(...ut),ct.smask?this.smaskStack.push({canvas:on.canvas,context:Zt,offsetX:kt,offsetY:xt,scaleX:Vt,scaleY:Qt,subtype:ct.smask.subtype,backdrop:ct.smask.backdrop,transferMap:ct.smask.transferMap||null,startTransformInverse:null}):(gt.setTransform(1,0,0,1,0,0),gt.translate(kt,xt),gt.scale(Vt,Qt),gt.save()),lt(gt,Zt),this.ctx=Zt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(gt),this.groupLevel++}endGroup(ct){if(!this.contentVisible)return;this.groupLevel--;const gt=this.ctx,ut=this.groupStack.pop();if(this.ctx=ut,this.ctx.imageSmoothingEnabled=!1,ct.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Et=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Et);const Ct=s.Util.getAxialAlignedBoundingBox([0,0,gt.canvas.width,gt.canvas.height],Et);this.ctx.drawImage(gt.canvas,0,0),this.ctx.restore(),this.compose(Ct)}}beginAnnotation(ct,gt,ut,Et,Ct){if(jt(this,_t,Ur).call(this),at(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(gt)&&gt.length===4){const kt=gt[2]-gt[0],xt=gt[3]-gt[1];if(Ct&&this.annotationCanvasMap){ut=ut.slice(),ut[4]-=gt[0],ut[5]-=gt[1],gt=gt.slice(),gt[0]=gt[1]=0,gt[2]=kt,gt[3]=xt;const[Pt,qt]=s.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:Vt}=this,Qt=Math.ceil(kt*this.outputScaleX*Vt),tn=Math.ceil(xt*this.outputScaleY*Vt);this.annotationCanvas=this.canvasFactory.create(Qt,tn);const{canvas:on,context:Zt}=this.annotationCanvas;this.annotationCanvasMap.set(ct,on),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Zt,this.ctx.save(),this.ctx.setTransform(Pt,0,0,-qt,0,xt*qt),at(this.ctx)}else at(this.ctx),this.ctx.rect(gt[0],gt[1],kt,xt),this.ctx.clip(),this.endPath()}this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...ut),this.transform(...Et)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),jt(this,St,Br).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(ct){if(!this.contentVisible)return;const gt=ct.count;ct=this.getObject(ct.data,ct),ct.count=gt;const ut=this.ctx,Et=this.processingType3;if(Et&&(Et.compiled===void 0&&(Et.compiled=tt(ct)),Et.compiled)){Et.compiled(ut);return}const Ct=this._createMaskCanvas(ct),kt=Ct.canvas;ut.save(),ut.setTransform(1,0,0,1,0,0),ut.drawImage(kt,Ct.offsetX,Ct.offsetY),ut.restore(),this.compose()}paintImageMaskXObjectRepeat(ct,gt,ut=0,Et=0,Ct,kt){if(!this.contentVisible)return;ct=this.getObject(ct.data,ct);const xt=this.ctx;xt.save();const Pt=(0,a.getCurrentTransform)(xt);xt.transform(gt,ut,Et,Ct,0,0);const qt=this._createMaskCanvas(ct);xt.setTransform(1,0,0,1,qt.offsetX-Pt[4],qt.offsetY-Pt[5]);for(let Vt=0,Qt=kt.length;Vt<Qt;Vt+=2){const tn=s.Util.transform(Pt,[gt,ut,Et,Ct,kt[Vt],kt[Vt+1]]),[on,Zt]=s.Util.applyTransform([0,0],tn);xt.drawImage(qt.canvas,on,Zt)}xt.restore(),this.compose()}paintImageMaskXObjectGroup(ct){if(!this.contentVisible)return;const gt=this.ctx,ut=this.current.fillColor,Et=this.current.patternFill;for(const Ct of ct){const{data:kt,width:xt,height:Pt,transform:qt}=Ct,Vt=this.cachedCanvases.getCanvas("maskCanvas",xt,Pt),Qt=Vt.context;Qt.save();const tn=this.getObject(kt,Ct);pt(Qt,tn),Qt.globalCompositeOperation="source-in",Qt.fillStyle=Et?ut.getPattern(Qt,this,(0,a.getCurrentTransformInverse)(gt),c.PathType.FILL):ut,Qt.fillRect(0,0,xt,Pt),Qt.restore(),gt.save(),gt.transform(...qt),gt.scale(1,-1),st(gt,Vt.canvas,0,0,xt,Pt,0,-1,1,1),gt.restore()}this.compose()}paintImageXObject(ct){if(!this.contentVisible)return;const gt=this.getObject(ct);if(!gt){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(gt)}paintImageXObjectRepeat(ct,gt,ut,Et){if(!this.contentVisible)return;const Ct=this.getObject(ct);if(!Ct){(0,s.warn)("Dependent image isn't ready yet");return}const kt=Ct.width,xt=Ct.height,Pt=[];for(let qt=0,Vt=Et.length;qt<Vt;qt+=2)Pt.push({transform:[gt,0,0,ut,Et[qt],Et[qt+1]],x:0,y:0,w:kt,h:xt});this.paintInlineImageXObjectGroup(Ct,Pt)}applyTransferMapsToCanvas(ct){return this.current.transferMaps!=="none"&&(ct.filter=this.current.transferMaps,ct.drawImage(ct.canvas,0,0),ct.filter="none"),ct.canvas}applyTransferMapsToBitmap(ct){if(this.current.transferMaps==="none")return ct.bitmap;const{bitmap:gt,width:ut,height:Et}=ct,Ct=this.cachedCanvases.getCanvas("inlineImage",ut,Et),kt=Ct.context;return kt.filter=this.current.transferMaps,kt.drawImage(gt,0,0),kt.filter="none",Ct.canvas}paintInlineImageXObject(ct){if(!this.contentVisible)return;const gt=ct.width,ut=ct.height,Et=this.ctx;if(this.save(),!s.isNodeJS){const{filter:xt}=Et;xt!=="none"&&xt!==""&&(Et.filter="none")}Et.scale(1/gt,-1/ut);let Ct;if(ct.bitmap)Ct=this.applyTransferMapsToBitmap(ct);else if(typeof HTMLElement=="function"&&ct instanceof HTMLElement||!ct.data)Ct=ct;else{const Pt=this.cachedCanvases.getCanvas("inlineImage",gt,ut).context;it(Pt,ct),Ct=this.applyTransferMapsToCanvas(Pt)}const kt=this._scaleImage(Ct,(0,a.getCurrentTransformInverse)(Et));Et.imageSmoothingEnabled=bt((0,a.getCurrentTransform)(Et),ct.interpolate),st(Et,kt.img,0,0,kt.paintWidth,kt.paintHeight,0,-ut,gt,ut),this.compose(),this.restore()}paintInlineImageXObjectGroup(ct,gt){if(!this.contentVisible)return;const ut=this.ctx;let Et;if(ct.bitmap)Et=ct.bitmap;else{const Ct=ct.width,kt=ct.height,Pt=this.cachedCanvases.getCanvas("inlineImage",Ct,kt).context;it(Pt,ct),Et=this.applyTransferMapsToCanvas(Pt)}for(const Ct of gt)ut.save(),ut.transform(...Ct.transform),ut.scale(1,-1),st(ut,Et,Ct.x,Ct.y,Ct.w,Ct.h,0,-1,1,1),ut.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(ct){}markPointProps(ct,gt){}beginMarkedContent(ct){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(ct,gt){ct==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(gt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(ct){const gt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ct);const ut=this.ctx;this.pendingClip&&(gt||(this.pendingClip===Bt?ut.clip("evenodd"):ut.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ut.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const ct=(0,a.getCurrentTransform)(this.ctx);if(ct[1]===0&&ct[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(ct[0]),Math.abs(ct[3]));else{const gt=Math.abs(ct[0]*ct[3]-ct[2]*ct[1]),ut=Math.hypot(ct[0],ct[2]),Et=Math.hypot(ct[1],ct[3]);this._cachedGetSinglePixelWidth=Math.max(ut,Et)/gt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:ct}=this.current,{a:gt,b:ut,c:Et,d:Ct}=this.ctx.getTransform();let kt,xt;if(ut===0&&Et===0){const Pt=Math.abs(gt),qt=Math.abs(Ct);if(Pt===qt)if(ct===0)kt=xt=1/Pt;else{const Vt=Pt*ct;kt=xt=Vt<1?1/Vt:1}else if(ct===0)kt=1/Pt,xt=1/qt;else{const Vt=Pt*ct,Qt=qt*ct;kt=Vt<1?1/Vt:1,xt=Qt<1?1/Qt:1}}else{const Pt=Math.abs(gt*Ct-ut*Et),qt=Math.hypot(gt,ut),Vt=Math.hypot(Et,Ct);if(ct===0)kt=Vt/Pt,xt=qt/Pt;else{const Qt=ct*Pt;kt=Vt>Qt?Vt/Qt:1,xt=qt>Qt?qt/Qt:1}}this._cachedScaleForStroking[0]=kt,this._cachedScaleForStroking[1]=xt}return this._cachedScaleForStroking}rescaleAndStroke(ct){const{ctx:gt}=this,{lineWidth:ut}=this.current,[Et,Ct]=this.getScaleForStroking();if(gt.lineWidth=ut||1,Et===1&&Ct===1){gt.stroke();return}const kt=gt.getLineDash();if(ct&&gt.save(),gt.scale(Et,Ct),kt.length>0){const xt=Math.max(Et,Ct);gt.setLineDash(kt.map(Pt=>Pt/xt)),gt.lineDashOffset/=xt}gt.stroke(),ct&&gt.restore()}isContentVisible(){for(let ct=this.markedContentStack.length-1;ct>=0;ct--)if(!this.markedContentStack[ct].visible)return!1;return!0}};_t=new WeakSet,Ur=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},St=new WeakSet,Br=function(){if(this.pageColors){const ct=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(ct!=="none"){const gt=this.ctx.filter;this.ctx.filter=ct,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=gt}}};let Kt=an;e.CanvasGraphics=Kt;for(const dt in s.OPS)Kt.prototype[dt]!==void 0&&(Kt.prototype[s.OPS[dt]]=Kt.prototype[dt])},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=$;var s=o(1),a=o(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function h(tt,nt){if(!nt)return;const it=nt[2]-nt[0],pt=nt[3]-nt[1],lt=new Path2D;lt.rect(nt[0],nt[1],it,pt),tt.clip(lt)}class d{constructor(){this.constructor===d&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class g extends d{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let it;this._type==="axial"?it=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(it=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const pt of this._colorStops)it.addColorStop(pt[0],pt[1]);return it}getPattern(nt,it,pt,lt){let at;if(lt===c.STROKE||lt===c.FILL){const At=it.current.getClippedPathBoundingBox(lt,(0,a.getCurrentTransform)(nt))||[0,0,0,0],vt=Math.ceil(At[2]-At[0])||1,ft=Math.ceil(At[3]-At[1])||1,mt=it.cachedCanvases.getCanvas("pattern",vt,ft,!0),yt=mt.context;yt.clearRect(0,0,yt.canvas.width,yt.canvas.height),yt.beginPath(),yt.rect(0,0,yt.canvas.width,yt.canvas.height),yt.translate(-At[0],-At[1]),pt=s.Util.transform(pt,[1,0,0,1,At[0],At[1]]),yt.transform(...it.baseTransform),this.matrix&&yt.transform(...this.matrix),h(yt,this._bbox),yt.fillStyle=this._createGradient(yt),yt.fill(),at=nt.createPattern(mt.canvas,"no-repeat");const bt=new DOMMatrix(pt);at.setTransform(bt)}else h(nt,this._bbox),at=this._createGradient(nt);return at}}function _(tt,nt,it,pt,lt,at,At,vt){const ft=nt.coords,mt=nt.colors,yt=tt.data,bt=tt.width*4;let Mt;ft[it+1]>ft[pt+1]&&(Mt=it,it=pt,pt=Mt,Mt=at,at=At,At=Mt),ft[pt+1]>ft[lt+1]&&(Mt=pt,pt=lt,lt=Mt,Mt=At,At=vt,vt=Mt),ft[it+1]>ft[pt+1]&&(Mt=it,it=pt,pt=Mt,Mt=at,at=At,At=Mt);const Tt=(ft[it]+nt.offsetX)*nt.scaleX,Lt=(ft[it+1]+nt.offsetY)*nt.scaleY,Bt=(ft[pt]+nt.offsetX)*nt.scaleX,Kt=(ft[pt+1]+nt.offsetY)*nt.scaleY,_t=(ft[lt]+nt.offsetX)*nt.scaleX,Ut=(ft[lt+1]+nt.offsetY)*nt.scaleY;if(Lt>=Ut)return;const St=mt[at],rn=mt[at+1],an=mt[at+2],dt=mt[At],ct=mt[At+1],gt=mt[At+2],ut=mt[vt],Et=mt[vt+1],Ct=mt[vt+2],kt=Math.round(Lt),xt=Math.round(Ut);let Pt,qt,Vt,Qt,tn,on,Zt,pn;for(let Tn=kt;Tn<=xt;Tn++){if(Tn<Kt){const Wt=Tn<Lt?0:(Lt-Tn)/(Lt-Kt);Pt=Tt-(Tt-Bt)*Wt,qt=St-(St-dt)*Wt,Vt=rn-(rn-ct)*Wt,Qt=an-(an-gt)*Wt}else{let Wt;Tn>Ut?Wt=1:Kt===Ut?Wt=0:Wt=(Kt-Tn)/(Kt-Ut),Pt=Bt-(Bt-_t)*Wt,qt=dt-(dt-ut)*Wt,Vt=ct-(ct-Et)*Wt,Qt=gt-(gt-Ct)*Wt}let dn;Tn<Lt?dn=0:Tn>Ut?dn=1:dn=(Lt-Tn)/(Lt-Ut),tn=Tt-(Tt-_t)*dn,on=St-(St-ut)*dn,Zt=rn-(rn-Et)*dn,pn=an-(an-Ct)*dn;const Cn=Math.round(Math.min(Pt,tn)),sn=Math.round(Math.max(Pt,tn));let Gt=bt*Tn+Cn*4;for(let Wt=Cn;Wt<=sn;Wt++)dn=(Pt-Wt)/(Pt-tn),dn<0?dn=0:dn>1&&(dn=1),yt[Gt++]=qt-(qt-on)*dn|0,yt[Gt++]=Vt-(Vt-Zt)*dn|0,yt[Gt++]=Qt-(Qt-pn)*dn|0,yt[Gt++]=255}}function b(tt,nt,it){const pt=nt.coords,lt=nt.colors;let at,At;switch(nt.type){case"lattice":const vt=nt.verticesPerRow,ft=Math.floor(pt.length/vt)-1,mt=vt-1;for(at=0;at<ft;at++){let yt=at*vt;for(let bt=0;bt<mt;bt++,yt++)_(tt,it,pt[yt],pt[yt+1],pt[yt+vt],lt[yt],lt[yt+1],lt[yt+vt]),_(tt,it,pt[yt+vt+1],pt[yt+1],pt[yt+vt],lt[yt+vt+1],lt[yt+1],lt[yt+vt])}break;case"triangles":for(at=0,At=pt.length;at<At;at+=3)_(tt,it,pt[at],pt[at+1],pt[at+2],lt[at],lt[at+1],lt[at+2]);break;default:throw new Error("illegal figure")}}class j extends d{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,it,pt){const vt=Math.floor(this._bounds[0]),ft=Math.floor(this._bounds[1]),mt=Math.ceil(this._bounds[2])-vt,yt=Math.ceil(this._bounds[3])-ft,bt=Math.min(Math.ceil(Math.abs(mt*nt[0]*1.1)),3e3),Mt=Math.min(Math.ceil(Math.abs(yt*nt[1]*1.1)),3e3),Tt=mt/bt,Lt=yt/Mt,Bt={coords:this._coords,colors:this._colors,offsetX:-vt,offsetY:-ft,scaleX:1/Tt,scaleY:1/Lt},Kt=bt+2*2,_t=Mt+2*2,Ut=pt.getCanvas("mesh",Kt,_t,!1),St=Ut.context,rn=St.createImageData(bt,Mt);if(it){const dt=rn.data;for(let ct=0,gt=dt.length;ct<gt;ct+=4)dt[ct]=it[0],dt[ct+1]=it[1],dt[ct+2]=it[2],dt[ct+3]=255}for(const dt of this._figures)b(rn,dt,Bt);return St.putImageData(rn,2,2),{canvas:Ut.canvas,offsetX:vt-2*Tt,offsetY:ft-2*Lt,scaleX:Tt,scaleY:Lt}}getPattern(nt,it,pt,lt){h(nt,this._bbox);let at;if(lt===c.SHADING)at=s.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(nt));else if(at=s.Util.singularValueDecompose2dScale(it.baseTransform),this.matrix){const vt=s.Util.singularValueDecompose2dScale(this.matrix);at=[at[0]*vt[0],at[1]*vt[1]]}const At=this._createMeshCanvas(at,lt===c.SHADING?null:this._background,it.cachedCanvases);return lt!==c.SHADING&&(nt.setTransform(...it.baseTransform),this.matrix&&nt.transform(...this.matrix)),nt.translate(At.offsetX,At.offsetY),nt.scale(At.scaleX,At.scaleY),nt.createPattern(At.canvas,"no-repeat")}}class _e extends d{getPattern(){return"hotpink"}}function $(tt){switch(tt[0]){case"RadialAxial":return new g(tt);case"Mesh":return new j(tt);case"Dummy":return new _e}throw new Error(`Unknown IR type: ${tt[0]}`)}const et={COLORED:1,UNCOLORED:2},st=class st{constructor(nt,it,pt,lt,at){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=it,this.ctx=pt,this.canvasGraphicsFactory=lt,this.baseTransform=at}createPatternCanvas(nt){const it=this.operatorList,pt=this.bbox,lt=this.xstep,at=this.ystep,At=this.paintType,vt=this.tilingType,ft=this.color,mt=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+vt);const yt=pt[0],bt=pt[1],Mt=pt[2],Tt=pt[3],Lt=s.Util.singularValueDecompose2dScale(this.matrix),Bt=s.Util.singularValueDecompose2dScale(this.baseTransform),Kt=[Lt[0]*Bt[0],Lt[1]*Bt[1]],_t=this.getSizeAndScale(lt,this.ctx.canvas.width,Kt[0]),Ut=this.getSizeAndScale(at,this.ctx.canvas.height,Kt[1]),St=nt.cachedCanvases.getCanvas("pattern",_t.size,Ut.size,!0),rn=St.context,an=mt.createCanvasGraphics(rn);an.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(an,At,ft);let dt=yt,ct=bt,gt=Mt,ut=Tt;return yt<0&&(dt=0,gt+=Math.abs(yt)),bt<0&&(ct=0,ut+=Math.abs(bt)),rn.translate(-(_t.scale*dt),-(Ut.scale*ct)),an.transform(_t.scale,0,0,Ut.scale,0,0),rn.save(),this.clipBbox(an,dt,ct,gt,ut),an.baseTransform=(0,a.getCurrentTransform)(an.ctx),an.executeOperatorList(it),an.endDrawing(),{canvas:St.canvas,scaleX:_t.scale,scaleY:Ut.scale,offsetX:dt,offsetY:ct}}getSizeAndScale(nt,it,pt){nt=Math.abs(nt);const lt=Math.max(st.MAX_PATTERN_SIZE,it);let at=Math.ceil(nt*pt);return at>=lt?at=lt:pt=at/nt,{scale:pt,size:at}}clipBbox(nt,it,pt,lt,at){const At=lt-it,vt=at-pt;nt.ctx.rect(it,pt,At,vt),nt.current.updateRectMinMax((0,a.getCurrentTransform)(nt.ctx),[it,pt,lt,at]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,it,pt){const lt=nt.ctx,at=nt.current;switch(it){case et.COLORED:const At=this.ctx;lt.fillStyle=At.fillStyle,lt.strokeStyle=At.strokeStyle,at.fillColor=At.fillStyle,at.strokeColor=At.strokeStyle;break;case et.UNCOLORED:const vt=s.Util.makeHexColor(pt[0],pt[1],pt[2]);lt.fillStyle=vt,lt.strokeStyle=vt,at.fillColor=vt,at.strokeColor=vt;break;default:throw new s.FormatError(`Unsupported paint type: ${it}`)}}getPattern(nt,it,pt,lt){let at=pt;lt!==c.SHADING&&(at=s.Util.transform(at,it.baseTransform),this.matrix&&(at=s.Util.transform(at,this.matrix)));const At=this.createPatternCanvas(it);let vt=new DOMMatrix(at);vt=vt.translate(At.offsetX,At.offsetY),vt=vt.scale(1/At.scaleX,1/At.scaleY);const ft=nt.createPattern(At.canvas,"repeat");return ft.setTransform(vt),ft}};zn(st,"MAX_PATTERN_SIZE",3e3);let rt=st;e.TilingPattern=rt},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=c,e.convertToRGBA=a,e.grayToRGBA=d;var s=o(1);function a(g){switch(g.kind){case s.ImageKind.GRAYSCALE_1BPP:return c(g);case s.ImageKind.RGB_24BPP:return h(g)}return null}function c({src:g,srcPos:_=0,dest:b,width:j,height:_e,nonBlackColor:$=4294967295,inverseDecode:et=!1}){const rt=s.FeatureTest.isLittleEndian?4278190080:255,[st,tt]=et?[$,rt]:[rt,$],nt=j>>3,it=j&7,pt=g.length;b=new Uint32Array(b.buffer);let lt=0;for(let at=0;at<_e;at++){for(const vt=_+nt;_<vt;_++){const ft=_<pt?g[_]:255;b[lt++]=ft&128?tt:st,b[lt++]=ft&64?tt:st,b[lt++]=ft&32?tt:st,b[lt++]=ft&16?tt:st,b[lt++]=ft&8?tt:st,b[lt++]=ft&4?tt:st,b[lt++]=ft&2?tt:st,b[lt++]=ft&1?tt:st}if(it===0)continue;const At=_<pt?g[_++]:255;for(let vt=0;vt<it;vt++)b[lt++]=At&1<<7-vt?tt:st}return{srcPos:_,destPos:lt}}function h({src:g,srcPos:_=0,dest:b,destPos:j=0,width:_e,height:$}){let et=0;const rt=g.length>>2,st=new Uint32Array(g.buffer,_,rt);if(s.FeatureTest.isLittleEndian){for(;et<rt-2;et+=3,j+=4){const tt=st[et],nt=st[et+1],it=st[et+2];b[j]=tt|4278190080,b[j+1]=tt>>>24|nt<<8|4278190080,b[j+2]=nt>>>16|it<<16|4278190080,b[j+3]=it>>>8|4278190080}for(let tt=et*4,nt=g.length;tt<nt;tt+=3)b[j++]=g[tt]|g[tt+1]<<8|g[tt+2]<<16|4278190080}else{for(;et<rt-2;et+=3,j+=4){const tt=st[et],nt=st[et+1],it=st[et+2];b[j]=tt|255,b[j+1]=tt<<24|nt>>>8|255,b[j+2]=nt<<16|it>>>16|255,b[j+3]=it<<8|255}for(let tt=et*4,nt=g.length;tt<nt;tt+=3)b[j++]=g[tt]<<24|g[tt+1]<<16|g[tt+2]<<8|255}return{srcPos:_,destPos:j}}function d(g,_){if(s.FeatureTest.isLittleEndian)for(let b=0,j=g.length;b<j;b++)_[b]=g[b]*65793|4278190080;else for(let b=0,j=g.length;b<j;b++)_[b]=g[b]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const o=Object.create(null);e.GlobalWorkerOptions=o,o.workerPort=null,o.workerSrc=""},(i,e,o)=>{var g,go,b,mo,_e,gr;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var s=o(1);const a={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h(et){switch(et instanceof Error||typeof et=="object"&&et!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),et.name){case"AbortException":return new s.AbortException(et.message);case"MissingPDFException":return new s.MissingPDFException(et.message);case"PasswordException":return new s.PasswordException(et.message,et.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(et.message,et.status);case"UnknownErrorException":return new s.UnknownErrorException(et.message,et.details);default:return new s.UnknownErrorException(et.message,et.toString())}}class d{constructor(rt,st,tt){Nt(this,g);Nt(this,b);Nt(this,_e);this.sourceName=rt,this.targetName=st,this.comObj=tt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=nt=>{const it=nt.data;if(it.targetName!==this.sourceName)return;if(it.stream){jt(this,b,mo).call(this,it);return}if(it.callback){const lt=it.callbackId,at=this.callbackCapabilities[lt];if(!at)throw new Error(`Cannot resolve callback ${lt}`);if(delete this.callbackCapabilities[lt],it.callback===a.DATA)at.resolve(it.data);else if(it.callback===a.ERROR)at.reject(h(it.reason));else throw new Error("Unexpected callback case");return}const pt=this.actionHandler[it.action];if(!pt)throw new Error(`Unknown action from worker: ${it.action}`);if(it.callbackId){const lt=this.sourceName,at=it.sourceName;new Promise(function(At){At(pt(it.data))}).then(function(At){tt.postMessage({sourceName:lt,targetName:at,callback:a.DATA,callbackId:it.callbackId,data:At})},function(At){tt.postMessage({sourceName:lt,targetName:at,callback:a.ERROR,callbackId:it.callbackId,reason:h(At)})});return}if(it.streamId){jt(this,g,go).call(this,it);return}pt(it.data)},tt.addEventListener("message",this._onComObjOnMessage)}on(rt,st){const tt=this.actionHandler;if(tt[rt])throw new Error(`There is already an actionName called "${rt}"`);tt[rt]=st}send(rt,st,tt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:rt,data:st},tt)}sendWithPromise(rt,st,tt){const nt=this.callbackId++,it=new s.PromiseCapability;this.callbackCapabilities[nt]=it;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:rt,callbackId:nt,data:st},tt)}catch(pt){it.reject(pt)}return it.promise}sendWithStream(rt,st,tt,nt){const it=this.streamId++,pt=this.sourceName,lt=this.targetName,at=this.comObj;return new ReadableStream({start:At=>{const vt=new s.PromiseCapability;return this.streamControllers[it]={controller:At,startCall:vt,pullCall:null,cancelCall:null,isClosed:!1},at.postMessage({sourceName:pt,targetName:lt,action:rt,streamId:it,data:st,desiredSize:At.desiredSize},nt),vt.promise},pull:At=>{const vt=new s.PromiseCapability;return this.streamControllers[it].pullCall=vt,at.postMessage({sourceName:pt,targetName:lt,stream:c.PULL,streamId:it,desiredSize:At.desiredSize}),vt.promise},cancel:At=>{(0,s.assert)(At instanceof Error,"cancel must have a valid reason");const vt=new s.PromiseCapability;return this.streamControllers[it].cancelCall=vt,this.streamControllers[it].isClosed=!0,at.postMessage({sourceName:pt,targetName:lt,stream:c.CANCEL,streamId:it,reason:h(At)}),vt.promise}},tt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g=new WeakSet,go=function(rt){const st=rt.streamId,tt=this.sourceName,nt=rt.sourceName,it=this.comObj,pt=this,lt=this.actionHandler[rt.action],at={enqueue(At,vt=1,ft){if(this.isCancelled)return;const mt=this.desiredSize;this.desiredSize-=vt,mt>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),it.postMessage({sourceName:tt,targetName:nt,stream:c.ENQUEUE,streamId:st,chunk:At},ft)},close(){this.isCancelled||(this.isCancelled=!0,it.postMessage({sourceName:tt,targetName:nt,stream:c.CLOSE,streamId:st}),delete pt.streamSinks[st])},error(At){(0,s.assert)(At instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,it.postMessage({sourceName:tt,targetName:nt,stream:c.ERROR,streamId:st,reason:h(At)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:rt.desiredSize,ready:null};at.sinkCapability.resolve(),at.ready=at.sinkCapability.promise,this.streamSinks[st]=at,new Promise(function(At){At(lt(rt.data,at))}).then(function(){it.postMessage({sourceName:tt,targetName:nt,stream:c.START_COMPLETE,streamId:st,success:!0})},function(At){it.postMessage({sourceName:tt,targetName:nt,stream:c.START_COMPLETE,streamId:st,reason:h(At)})})},b=new WeakSet,mo=function(rt){const st=rt.streamId,tt=this.sourceName,nt=rt.sourceName,it=this.comObj,pt=this.streamControllers[st],lt=this.streamSinks[st];switch(rt.stream){case c.START_COMPLETE:rt.success?pt.startCall.resolve():pt.startCall.reject(h(rt.reason));break;case c.PULL_COMPLETE:rt.success?pt.pullCall.resolve():pt.pullCall.reject(h(rt.reason));break;case c.PULL:if(!lt){it.postMessage({sourceName:tt,targetName:nt,stream:c.PULL_COMPLETE,streamId:st,success:!0});break}lt.desiredSize<=0&&rt.desiredSize>0&&lt.sinkCapability.resolve(),lt.desiredSize=rt.desiredSize,new Promise(function(at){var At;at((At=lt.onPull)==null?void 0:At.call(lt))}).then(function(){it.postMessage({sourceName:tt,targetName:nt,stream:c.PULL_COMPLETE,streamId:st,success:!0})},function(at){it.postMessage({sourceName:tt,targetName:nt,stream:c.PULL_COMPLETE,streamId:st,reason:h(at)})});break;case c.ENQUEUE:if((0,s.assert)(pt,"enqueue should have stream controller"),pt.isClosed)break;pt.controller.enqueue(rt.chunk);break;case c.CLOSE:if((0,s.assert)(pt,"close should have stream controller"),pt.isClosed)break;pt.isClosed=!0,pt.controller.close(),jt(this,_e,gr).call(this,pt,st);break;case c.ERROR:(0,s.assert)(pt,"error should have stream controller"),pt.controller.error(h(rt.reason)),jt(this,_e,gr).call(this,pt,st);break;case c.CANCEL_COMPLETE:rt.success?pt.cancelCall.resolve():pt.cancelCall.reject(h(rt.reason)),jt(this,_e,gr).call(this,pt,st);break;case c.CANCEL:if(!lt)break;new Promise(function(at){var At;at((At=lt.onCancel)==null?void 0:At.call(lt,h(rt.reason)))}).then(function(){it.postMessage({sourceName:tt,targetName:nt,stream:c.CANCEL_COMPLETE,streamId:st,success:!0})},function(at){it.postMessage({sourceName:tt,targetName:nt,stream:c.CANCEL_COMPLETE,streamId:st,reason:h(at)})}),lt.sinkCapability.reject(h(rt.reason)),lt.isCancelled=!0,delete this.streamSinks[st];break;default:throw new Error("Unexpected stream case")}},_e=new WeakSet,gr=async function(rt,st){var tt,nt,it;await Promise.allSettled([(tt=rt.startCall)==null?void 0:tt.promise,(nt=rt.pullCall)==null?void 0:nt.promise,(it=rt.cancelCall)==null?void 0:it.promise]),delete this.streamControllers[st]},e.MessageHandler=d},(i,e,o)=>{var c,h;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var s=o(1);class a{constructor({parsedData:g,rawData:_}){Nt(this,c,void 0);Nt(this,h,void 0);Yt(this,c,g),Yt(this,h,_)}getRaw(){return ot(this,h)}get(g){return ot(this,c).get(g)??null}getAll(){return(0,s.objectFromMap)(ot(this,c))}has(g){return ot(this,c).has(g)}}c=new WeakMap,h=new WeakMap,e.Metadata=a},(i,e,o)=>{var g,_,b,j,_e,$,Hr;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var s=o(1),a=o(8);const c=Symbol("INTERNAL");class h{constructor(st,tt){Nt(this,g,!0);this.name=st,this.intent=tt}get visible(){return ot(this,g)}_setVisible(st,tt){st!==c&&(0,s.unreachable)("Internal method `_setVisible` called."),Yt(this,g,tt)}}g=new WeakMap;class d{constructor(st){Nt(this,$);Nt(this,_,null);Nt(this,b,new Map);Nt(this,j,null);Nt(this,_e,null);if(this.name=null,this.creator=null,st!==null){this.name=st.name,this.creator=st.creator,Yt(this,_e,st.order);for(const tt of st.groups)ot(this,b).set(tt.id,new h(tt.name,tt.intent));if(st.baseState==="OFF")for(const tt of ot(this,b).values())tt._setVisible(c,!1);for(const tt of st.on)ot(this,b).get(tt)._setVisible(c,!0);for(const tt of st.off)ot(this,b).get(tt)._setVisible(c,!1);Yt(this,j,this.getHash())}}isVisible(st){if(ot(this,b).size===0)return!0;if(!st)return(0,s.warn)("Optional content group not defined."),!0;if(st.type==="OCG")return ot(this,b).has(st.id)?ot(this,b).get(st.id).visible:((0,s.warn)(`Optional content group not found: ${st.id}`),!0);if(st.type==="OCMD"){if(st.expression)return jt(this,$,Hr).call(this,st.expression);if(!st.policy||st.policy==="AnyOn"){for(const tt of st.ids){if(!ot(this,b).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(ot(this,b).get(tt).visible)return!0}return!1}else if(st.policy==="AllOn"){for(const tt of st.ids){if(!ot(this,b).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(!ot(this,b).get(tt).visible)return!1}return!0}else if(st.policy==="AnyOff"){for(const tt of st.ids){if(!ot(this,b).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(!ot(this,b).get(tt).visible)return!0}return!1}else if(st.policy==="AllOff"){for(const tt of st.ids){if(!ot(this,b).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(ot(this,b).get(tt).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${st.policy}.`),!0}return(0,s.warn)(`Unknown group type ${st.type}.`),!0}setVisibility(st,tt=!0){if(!ot(this,b).has(st)){(0,s.warn)(`Optional content group not found: ${st}`);return}ot(this,b).get(st)._setVisible(c,!!tt),Yt(this,_,null)}get hasInitialVisibility(){return ot(this,j)===null||this.getHash()===ot(this,j)}getOrder(){return ot(this,b).size?ot(this,_e)?ot(this,_e).slice():[...ot(this,b).keys()]:null}getGroups(){return ot(this,b).size>0?(0,s.objectFromMap)(ot(this,b)):null}getGroup(st){return ot(this,b).get(st)||null}getHash(){if(ot(this,_)!==null)return ot(this,_);const st=new a.MurmurHash3_64;for(const[tt,nt]of ot(this,b))st.update(`${tt}:${nt.visible}`);return Yt(this,_,st.hexdigest())}}_=new WeakMap,b=new WeakMap,j=new WeakMap,_e=new WeakMap,$=new WeakSet,Hr=function(st){const tt=st.length;if(tt<2)return!0;const nt=st[0];for(let it=1;it<tt;it++){const pt=st[it];let lt;if(Array.isArray(pt))lt=jt(this,$,Hr).call(this,pt);else if(ot(this,b).has(pt))lt=ot(this,b).get(pt).visible;else return(0,s.warn)(`Optional content group not found: ${pt}`),!0;switch(nt){case"And":if(!lt)return!1;break;case"Or":if(lt)return!0;break;case"Not":return!lt;default:return!0}}return nt==="And"},e.OptionalContentConfig=d},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var s=o(1),a=o(6);class c{constructor({length:_,initialData:b,progressiveDone:j=!1,contentDispositionFilename:_e=null,disableRange:$=!1,disableStream:et=!1},rt){if((0,s.assert)(rt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=j,this._contentDispositionFilename=_e,(b==null?void 0:b.length)>0){const st=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;this._queuedChunks.push(st)}this._pdfDataRangeTransport=rt,this._isStreamingSupported=!et,this._isRangeSupported=!$,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((st,tt)=>{this._onReceiveData({begin:st,chunk:tt})}),this._pdfDataRangeTransport.addProgressListener((st,tt)=>{this._onProgress({loaded:st,total:tt})}),this._pdfDataRangeTransport.addProgressiveReadListener(st=>{this._onReceiveData({chunk:st})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:b}){const j=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(j):this._queuedChunks.push(j);else{const _e=this._rangeReaders.some(function($){return $._begin!==_?!1:($._enqueue(j),!0)});(0,s.assert)(_e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var b,j,_e,$;_.total===void 0?(j=(b=this._rangeReaders[0])==null?void 0:b.onProgress)==null||j.call(b,{loaded:_.loaded}):($=(_e=this._fullRequestReader)==null?void 0:_e.onProgress)==null||$.call(_e,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const b=this._rangeReaders.indexOf(_);b>=0&&this._rangeReaders.splice(b,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new h(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,b){if(b<=this._progressiveDataLength)return null;const j=new d(this,_,b);return this._pdfDataRangeTransport.requestDataRange(_,b),this._rangeReaders.push(j),j}cancelAllRequests(_){var b;(b=this._fullRequestReader)==null||b.cancel(_);for(const j of this._rangeReaders.slice(0))j.cancel(_);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=c;class h{constructor(_,b,j=!1,_e=null){this._stream=_,this._done=j||!1,this._filename=(0,a.isPdfFile)(_e)?_e:null,this._queuedChunks=b||[],this._loaded=0;for(const $ of this._queuedChunks)this._loaded+=$.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new s.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class d{constructor(_,b,j){this._stream=_,this._begin=b,this._end=j,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new s.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var s=o(1),a=o(20);function c(j,_e,$){return{method:"GET",headers:j,signal:$.signal,mode:"cors",credentials:_e?"include":"same-origin",redirect:"follow"}}function h(j){const _e=new Headers;for(const $ in j){const et=j[$];et!==void 0&&_e.append($,et)}return _e}function d(j){return j instanceof Uint8Array?j.buffer:j instanceof ArrayBuffer?j:((0,s.warn)(`getArrayBuffer - unexpected data format: ${j}`),new Uint8Array(j).buffer)}class g{constructor(_e){this.source=_e,this.isHttp=/^https?:/i.test(_e.url),this.httpHeaders=this.isHttp&&_e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _e;return((_e=this._fullRequestReader)==null?void 0:_e._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(_e,$){if($<=this._progressiveDataLength)return null;const et=new b(this,_e,$);return this._rangeRequestReaders.push(et),et}cancelAllRequests(_e){var $;($=this._fullRequestReader)==null||$.cancel(_e);for(const et of this._rangeRequestReaders.slice(0))et.cancel(_e)}}e.PDFFetchStream=g;class _{constructor(_e){this._stream=_e,this._reader=null,this._loaded=0,this._filename=null;const $=_e.source;this._withCredentials=$.withCredentials||!1,this._contentLength=$.length,this._headersCapability=new s.PromiseCapability,this._disableRange=$.disableRange||!1,this._rangeChunkSize=$.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!$.disableStream,this._isRangeSupported=!$.disableRange,this._headers=h(this._stream.httpHeaders);const et=$.url;fetch(et,c(this._headers,this._withCredentials,this._abortController)).then(rt=>{if(!(0,a.validateResponseStatus)(rt.status))throw(0,a.createResponseStatusError)(rt.status,et);this._reader=rt.body.getReader(),this._headersCapability.resolve();const st=it=>rt.headers.get(it),{allowRangeRequests:tt,suggestedLength:nt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:st,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=tt,this._contentLength=nt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(st),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var et;await this._headersCapability.promise;const{value:_e,done:$}=await this._reader.read();return $?{value:_e,done:$}:(this._loaded+=_e.byteLength,(et=this.onProgress)==null||et.call(this,{loaded:this._loaded,total:this._contentLength}),{value:d(_e),done:!1})}cancel(_e){var $;($=this._reader)==null||$.cancel(_e),this._abortController.abort()}}class b{constructor(_e,$,et){this._stream=_e,this._reader=null,this._loaded=0;const rt=_e.source;this._withCredentials=rt.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!rt.disableStream,this._abortController=new AbortController,this._headers=h(this._stream.httpHeaders),this._headers.append("Range",`bytes=${$}-${et-1}`);const st=rt.url;fetch(st,c(this._headers,this._withCredentials,this._abortController)).then(tt=>{if(!(0,a.validateResponseStatus)(tt.status))throw(0,a.createResponseStatusError)(tt.status,st);this._readCapability.resolve(),this._reader=tt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var et;await this._readCapability.promise;const{value:_e,done:$}=await this._reader.read();return $?{value:_e,done:$}:(this._loaded+=_e.byteLength,(et=this.onProgress)==null||et.call(this,{loaded:this._loaded}),{value:d(_e),done:!1})}cancel(_e){var $;($=this._reader)==null||$.cancel(_e),this._abortController.abort()}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=g,e.extractFilenameFromHeader=d,e.validateRangeRequestCapabilities=h,e.validateResponseStatus=_;var s=o(1),a=o(21),c=o(6);function h({getResponseHeader:b,isHttp:j,rangeChunkSize:_e,disableRange:$}){const et={allowRangeRequests:!1,suggestedLength:void 0},rt=parseInt(b("Content-Length"),10);return!Number.isInteger(rt)||(et.suggestedLength=rt,rt<=2*_e)||$||!j||b("Accept-Ranges")!=="bytes"||(b("Content-Encoding")||"identity")!=="identity"||(et.allowRangeRequests=!0),et}function d(b){const j=b("Content-Disposition");if(j){let _e=(0,a.getFilenameFromContentDispositionHeader)(j);if(_e.includes("%"))try{_e=decodeURIComponent(_e)}catch{}if((0,c.isPdfFile)(_e))return _e}return null}function g(b,j){return b===404||b===0&&j.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+j+'".'):new s.UnexpectedResponseException(`Unexpected server response (${b}) while retrieving PDF "${j}".`,b)}function _(b){return b===200||b===206}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var s=o(1);function a(c){let h=!0,d=g("filename\\*","i").exec(c);if(d){d=d[1];let rt=_e(d);return rt=unescape(rt),rt=$(rt),rt=et(rt),b(rt)}if(d=j(c),d){const rt=et(d);return b(rt)}if(d=g("filename","i").exec(c),d){d=d[1];let rt=_e(d);return rt=et(rt),b(rt)}function g(rt,st){return new RegExp("(?:^|;)\\s*"+rt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',st)}function _(rt,st){if(rt){if(!/^[\x00-\xFF]+$/.test(st))return st;try{const tt=new TextDecoder(rt,{fatal:!0}),nt=(0,s.stringToBytes)(st);st=tt.decode(nt),h=!1}catch{}}return st}function b(rt){return h&&/[\x80-\xff]/.test(rt)&&(rt=_("utf-8",rt),h&&(rt=_("iso-8859-1",rt))),rt}function j(rt){const st=[];let tt;const nt=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(tt=nt.exec(rt))!==null;){let[,pt,lt,at]=tt;if(pt=parseInt(pt,10),pt in st){if(pt===0)break;continue}st[pt]=[lt,at]}const it=[];for(let pt=0;pt<st.length&&pt in st;++pt){let[lt,at]=st[pt];at=_e(at),lt&&(at=unescape(at),pt===0&&(at=$(at))),it.push(at)}return it.join("")}function _e(rt){if(rt.startsWith('"')){const st=rt.slice(1).split('\\"');for(let tt=0;tt<st.length;++tt){const nt=st[tt].indexOf('"');nt!==-1&&(st[tt]=st[tt].slice(0,nt),st.length=tt+1),st[tt]=st[tt].replaceAll(/\\(.)/g,"$1")}rt=st.join('"')}return rt}function $(rt){const st=rt.indexOf("'");if(st===-1)return rt;const tt=rt.slice(0,st),it=rt.slice(st+1).replace(/^[^']*'/,"");return _(tt,it)}function et(rt){return!rt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(rt)?rt:rt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(st,tt,nt,it){if(nt==="q"||nt==="Q")return it=it.replaceAll("_"," "),it=it.replaceAll(/=([0-9a-fA-F]{2})/g,function(pt,lt){return String.fromCharCode(parseInt(lt,16))}),_(tt,it);try{it=atob(it)}catch{}return _(tt,it)})}return""}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var s=o(1),a=o(20);const c=200,h=206;function d(_e){const $=_e.response;return typeof $!="string"?$:(0,s.stringToBytes)($).buffer}class g{constructor($,et={}){this.url=$,this.isHttp=/^https?:/i.test($),this.httpHeaders=this.isHttp&&et.httpHeaders||Object.create(null),this.withCredentials=et.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange($,et,rt){const st={begin:$,end:et};for(const tt in rt)st[tt]=rt[tt];return this.request(st)}requestFull($){return this.request($)}request($){const et=new XMLHttpRequest,rt=this.currXhrId++,st=this.pendingRequests[rt]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const tt in this.httpHeaders){const nt=this.httpHeaders[tt];nt!==void 0&&et.setRequestHeader(tt,nt)}return this.isHttp&&"begin"in $&&"end"in $?(et.setRequestHeader("Range",`bytes=${$.begin}-${$.end-1}`),st.expectedStatus=h):st.expectedStatus=c,et.responseType="arraybuffer",$.onError&&(et.onerror=function(tt){$.onError(et.status)}),et.onreadystatechange=this.onStateChange.bind(this,rt),et.onprogress=this.onProgress.bind(this,rt),st.onHeadersReceived=$.onHeadersReceived,st.onDone=$.onDone,st.onError=$.onError,st.onProgress=$.onProgress,et.send(null),rt}onProgress($,et){var st;const rt=this.pendingRequests[$];rt&&((st=rt.onProgress)==null||st.call(rt,et))}onStateChange($,et){var pt,lt,at;const rt=this.pendingRequests[$];if(!rt)return;const st=rt.xhr;if(st.readyState>=2&&rt.onHeadersReceived&&(rt.onHeadersReceived(),delete rt.onHeadersReceived),st.readyState!==4||!($ in this.pendingRequests))return;if(delete this.pendingRequests[$],st.status===0&&this.isHttp){(pt=rt.onError)==null||pt.call(rt,st.status);return}const tt=st.status||c;if(!(tt===c&&rt.expectedStatus===h)&&tt!==rt.expectedStatus){(lt=rt.onError)==null||lt.call(rt,st.status);return}const it=d(st);if(tt===h){const At=st.getResponseHeader("Content-Range"),vt=/bytes (\d+)-(\d+)\/(\d+)/.exec(At);rt.onDone({begin:parseInt(vt[1],10),chunk:it})}else it?rt.onDone({begin:0,chunk:it}):(at=rt.onError)==null||at.call(rt,st.status)}getRequestXhr($){return this.pendingRequests[$].xhr}isPendingRequest($){return $ in this.pendingRequests}abortRequest($){const et=this.pendingRequests[$].xhr;delete this.pendingRequests[$],et.abort()}}class _{constructor($){this._source=$,this._manager=new g($.url,{httpHeaders:$.httpHeaders,withCredentials:$.withCredentials}),this._rangeChunkSize=$.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed($){const et=this._rangeRequestReaders.indexOf($);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b(this._manager,this._source),this._fullRequestReader}getRangeReader($,et){const rt=new j(this._manager,$,et);return rt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(rt),rt}cancelAllRequests($){var et;(et=this._fullRequestReader)==null||et.cancel($);for(const rt of this._rangeRequestReaders.slice(0))rt.cancel($)}}e.PDFNetworkStream=_;class b{constructor($,et){this._manager=$;const rt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._fullRequestId=$.requestFull(rt),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const $=this._fullRequestId,et=this._manager.getRequestXhr($),rt=nt=>et.getResponseHeader(nt),{allowRangeRequests:st,suggestedLength:tt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:rt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});st&&(this._isRangeSupported=!0),this._contentLength=tt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(rt),this._isRangeSupported&&this._manager.abortRequest($),this._headersReceivedCapability.resolve()}_onDone($){if($&&(this._requests.length>0?this._requests.shift().resolve({value:$.chunk,done:!1}):this._cachedChunks.push($.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError($){this._storedError=(0,a.createResponseStatusError)($,this._url),this._headersReceivedCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress($){var et;(et=this.onProgress)==null||et.call(this,{loaded:$.loaded,total:$.lengthComputable?$.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const $=new s.PromiseCapability;return this._requests.push($),$.promise}cancel($){this._done=!0,this._headersReceivedCapability.reject($);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class j{constructor($,et,rt){this._manager=$;const st={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=$.url,this._requestId=$.requestRange(et,rt,st),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var $;($=this.onClosed)==null||$.call(this,this)}_onDone($){const et=$.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError($){this._storedError=(0,a.createResponseStatusError)($,this._url);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress($){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:$.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const $=new s.PromiseCapability;return this._requests.push($),$.promise}cancel($){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var s=o(1),a=o(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function h(rt){const st=require$$5,tt=st.parse(rt);return tt.protocol==="file:"||tt.host?tt:/^[a-z]:[/\\]/i.test(rt)?st.parse(`file:///${rt}`):(tt.host||(tt.protocol="file:"),tt)}class d{constructor(st){this.source=st,this.url=h(st.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&st.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var st;return((st=this._fullRequestReader)==null?void 0:st._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new $(this):new j(this),this._fullRequestReader}getRangeReader(st,tt){if(tt<=this._progressiveDataLength)return null;const nt=this.isFsUrl?new et(this,st,tt):new _e(this,st,tt);return this._rangeRequestReaders.push(nt),nt}cancelAllRequests(st){var tt;(tt=this._fullRequestReader)==null||tt.cancel(st);for(const nt of this._rangeRequestReaders.slice(0))nt.cancel(st)}}e.PDFNodeStream=d;class g{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null;const tt=st.source;this._contentLength=tt.length,this._loaded=0,this._filename=null,this._disableRange=tt.disableRange||!1,this._rangeChunkSize=tt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!tt.disableStream,this._isRangeSupported=!tt.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=st.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",tt=>{this._error(tt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const tt=st.source;this._isStreamingSupported=!tt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=st.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",tt=>{this._error(tt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function b(rt,st){return{protocol:rt.protocol,auth:rt.auth,host:rt.hostname,port:rt.port,path:rt.path,method:"GET",headers:st}}class j extends g{constructor(st){super(st);const tt=nt=>{if(nt.statusCode===404){const at=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=at,this._headersCapability.reject(at);return}this._headersCapability.resolve(),this._setReadableStream(nt);const it=at=>this._readableStream.headers[at.toLowerCase()],{allowRangeRequests:pt,suggestedLength:lt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:it,isHttp:st.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=pt,this._contentLength=lt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(it)};if(this._request=null,this._url.protocol==="http:"){const nt=require$$5;this._request=nt.request(b(this._url,st.httpHeaders),tt)}else{const nt=require$$5;this._request=nt.request(b(this._url,st.httpHeaders),tt)}this._request.on("error",nt=>{this._storedError=nt,this._headersCapability.reject(nt)}),this._request.end()}}class _e extends _{constructor(st,tt,nt){super(st),this._httpHeaders={};for(const pt in st.httpHeaders){const lt=st.httpHeaders[pt];lt!==void 0&&(this._httpHeaders[pt]=lt)}this._httpHeaders.Range=`bytes=${tt}-${nt-1}`;const it=pt=>{if(pt.statusCode===404){const lt=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=lt;return}this._setReadableStream(pt)};if(this._request=null,this._url.protocol==="http:"){const pt=require$$5;this._request=pt.request(b(this._url,this._httpHeaders),it)}else{const pt=require$$5;this._request=pt.request(b(this._url,this._httpHeaders),it)}this._request.on("error",pt=>{this._storedError=pt}),this._request.end()}}class $ extends g{constructor(st){super(st);let tt=decodeURIComponent(this._url.path);c.test(this._url.href)&&(tt=tt.replace(/^\//,""));const nt=require$$5;nt.lstat(tt,(it,pt)=>{if(it){it.code==="ENOENT"&&(it=new s.MissingPDFException(`Missing PDF "${tt}".`)),this._storedError=it,this._headersCapability.reject(it);return}this._contentLength=pt.size,this._setReadableStream(nt.createReadStream(tt)),this._headersCapability.resolve()})}}class et extends _{constructor(st,tt,nt){super(st);let it=decodeURIComponent(this._url.path);c.test(this._url.href)&&(it=it.replace(/^\//,""));const pt=require$$5;this._setReadableStream(pt.createReadStream(it,{start:tt,end:nt-1}))}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var s=o(6),a=o(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",g=["butt","round","square"],_=["miter","round","bevel"],b=function(pt,lt="",at=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!at)return URL.createObjectURL(new Blob([pt],{type:lt}));const At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let vt=`data:${lt};base64,`;for(let ft=0,mt=pt.length;ft<mt;ft+=3){const yt=pt[ft]&255,bt=pt[ft+1]&255,Mt=pt[ft+2]&255,Tt=yt>>2,Lt=(yt&3)<<4|bt>>4,Bt=ft+1<mt?(bt&15)<<2|Mt>>6:64,Kt=ft+2<mt?Mt&63:64;vt+=At[Tt]+At[Lt]+At[Bt]+At[Kt]}return vt},j=function(){const pt=new Uint8Array([137,80,78,71,13,10,26,10]),lt=12,at=new Int32Array(256);for(let Mt=0;Mt<256;Mt++){let Tt=Mt;for(let Lt=0;Lt<8;Lt++)Tt=Tt&1?3988292384^Tt>>1&2147483647:Tt>>1&2147483647;at[Mt]=Tt}function At(Mt,Tt,Lt){let Bt=-1;for(let Kt=Tt;Kt<Lt;Kt++){const _t=(Bt^Mt[Kt])&255,Ut=at[_t];Bt=Bt>>>8^Ut}return Bt^-1}function vt(Mt,Tt,Lt,Bt){let Kt=Bt;const _t=Tt.length;Lt[Kt]=_t>>24&255,Lt[Kt+1]=_t>>16&255,Lt[Kt+2]=_t>>8&255,Lt[Kt+3]=_t&255,Kt+=4,Lt[Kt]=Mt.charCodeAt(0)&255,Lt[Kt+1]=Mt.charCodeAt(1)&255,Lt[Kt+2]=Mt.charCodeAt(2)&255,Lt[Kt+3]=Mt.charCodeAt(3)&255,Kt+=4,Lt.set(Tt,Kt),Kt+=Tt.length;const Ut=At(Lt,Bt+4,Kt);Lt[Kt]=Ut>>24&255,Lt[Kt+1]=Ut>>16&255,Lt[Kt+2]=Ut>>8&255,Lt[Kt+3]=Ut&255}function ft(Mt,Tt,Lt){let Bt=1,Kt=0;for(let _t=Tt;_t<Lt;++_t)Bt=(Bt+(Mt[_t]&255))%65521,Kt=(Kt+Bt)%65521;return Kt<<16|Bt}function mt(Mt){if(!a.isNodeJS)return yt(Mt);try{const Tt=parseInt(process.versions.node)>=8?Mt:Buffer.from(Mt),Lt=require$$5.deflateSync(Tt,{level:9});return Lt instanceof Uint8Array?Lt:new Uint8Array(Lt)}catch(Tt){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Tt)}return yt(Mt)}function yt(Mt){let Tt=Mt.length;const Lt=65535,Bt=Math.ceil(Tt/Lt),Kt=new Uint8Array(2+Tt+Bt*5+4);let _t=0;Kt[_t++]=120,Kt[_t++]=156;let Ut=0;for(;Tt>Lt;)Kt[_t++]=0,Kt[_t++]=255,Kt[_t++]=255,Kt[_t++]=0,Kt[_t++]=0,Kt.set(Mt.subarray(Ut,Ut+Lt),_t),_t+=Lt,Ut+=Lt,Tt-=Lt;Kt[_t++]=1,Kt[_t++]=Tt&255,Kt[_t++]=Tt>>8&255,Kt[_t++]=~Tt&65535&255,Kt[_t++]=(~Tt&65535)>>8&255,Kt.set(Mt.subarray(Ut),_t),_t+=Mt.length-Ut;const St=ft(Mt,0,Mt.length);return Kt[_t++]=St>>24&255,Kt[_t++]=St>>16&255,Kt[_t++]=St>>8&255,Kt[_t++]=St&255,Kt}function bt(Mt,Tt,Lt,Bt){const Kt=Mt.width,_t=Mt.height;let Ut,St,rn;const an=Mt.data;switch(Tt){case a.ImageKind.GRAYSCALE_1BPP:St=0,Ut=1,rn=Kt+7>>3;break;case a.ImageKind.RGB_24BPP:St=2,Ut=8,rn=Kt*3;break;case a.ImageKind.RGBA_32BPP:St=6,Ut=8,rn=Kt*4;break;default:throw new Error("invalid format")}const dt=new Uint8Array((1+rn)*_t);let ct=0,gt=0;for(let Pt=0;Pt<_t;++Pt)dt[ct++]=0,dt.set(an.subarray(gt,gt+rn),ct),gt+=rn,ct+=rn;if(Tt===a.ImageKind.GRAYSCALE_1BPP&&Bt){ct=0;for(let Pt=0;Pt<_t;Pt++){ct++;for(let qt=0;qt<rn;qt++)dt[ct++]^=255}}const ut=new Uint8Array([Kt>>24&255,Kt>>16&255,Kt>>8&255,Kt&255,_t>>24&255,_t>>16&255,_t>>8&255,_t&255,Ut,St,0,0,0]),Et=mt(dt),Ct=pt.length+lt*3+ut.length+Et.length,kt=new Uint8Array(Ct);let xt=0;return kt.set(pt,xt),xt+=pt.length,vt("IHDR",ut,kt,xt),xt+=lt+ut.length,vt("IDATA",Et,kt,xt),xt+=lt+Et.length,vt("IEND",new Uint8Array(0),kt,xt),b(kt,"image/png",Lt)}return function(Tt,Lt,Bt){const Kt=Tt.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Tt.kind;return bt(Tt,Kt,Lt,Bt)}}();class _e{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(lt,at){this.x=lt,this.y=at}}function $(pt){let lt=[];const at=[];for(const At of pt){if(At.fn==="save"){lt.push({fnId:92,fn:"group",items:[]}),at.push(lt),lt=lt.at(-1).items;continue}At.fn==="restore"?lt=at.pop():lt.push(At)}return lt}function et(pt){if(Number.isInteger(pt))return pt.toString();const lt=pt.toFixed(10);let at=lt.length-1;if(lt[at]!=="0")return lt;do at--;while(lt[at]==="0");return lt.substring(0,lt[at]==="."?at:at+1)}function rt(pt){if(pt[4]===0&&pt[5]===0){if(pt[1]===0&&pt[2]===0)return pt[0]===1&&pt[3]===1?"":`scale(${et(pt[0])} ${et(pt[3])})`;if(pt[0]===pt[3]&&pt[1]===-pt[2]){const lt=Math.acos(pt[0])*180/Math.PI;return`rotate(${et(lt)})`}}else if(pt[0]===1&&pt[1]===0&&pt[2]===0&&pt[3]===1)return`translate(${et(pt[4])} ${et(pt[5])})`;return`matrix(${et(pt[0])} ${et(pt[1])} ${et(pt[2])} ${et(pt[3])} ${et(pt[4])} ${et(pt[5])})`}let st=0,tt=0,nt=0;class it{constructor(lt,at,At=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new _e,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=lt,this.objs=at,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!At,this._operatorIdMapping=[];for(const vt in a.OPS)this._operatorIdMapping[a.OPS[vt]]=vt}getObject(lt,at=null){return typeof lt=="string"?lt.startsWith("g_")?this.commonObjs.get(lt):this.objs.get(lt):at}save(){this.transformStack.push(this.transformMatrix);const lt=this.current;this.extraStack.push(lt),this.current=lt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(lt){this.save(),this.executeOpTree(lt),this.restore()}loadDependencies(lt){const at=lt.fnArray,At=lt.argsArray;for(let vt=0,ft=at.length;vt<ft;vt++)if(at[vt]===a.OPS.dependency)for(const mt of At[vt]){const yt=mt.startsWith("g_")?this.commonObjs:this.objs,bt=new Promise(Mt=>{yt.get(mt,Mt)});this.current.dependencies.push(bt)}return Promise.all(this.current.dependencies)}transform(lt,at,At,vt,ft,mt){const yt=[lt,at,At,vt,ft,mt];this.transformMatrix=a.Util.transform(this.transformMatrix,yt),this.tgrp=null}getSVG(lt,at){this.viewport=at;const At=this._initialize(at);return this.loadDependencies(lt).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(lt)),At))}convertOpList(lt){const at=this._operatorIdMapping,At=lt.argsArray,vt=lt.fnArray,ft=[];for(let mt=0,yt=vt.length;mt<yt;mt++){const bt=vt[mt];ft.push({fnId:bt,fn:at[bt],args:At[mt]})}return $(ft)}executeOpTree(lt){for(const at of lt){const At=at.fn,vt=at.fnId,ft=at.args;switch(vt|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(ft);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(ft[0],ft[1]);break;case a.OPS.setFont:this.setFont(ft);break;case a.OPS.showText:this.showText(ft[0]);break;case a.OPS.showSpacedText:this.showText(ft[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(ft[0],ft[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(ft[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(ft[0]);break;case a.OPS.setHScale:this.setHScale(ft[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case a.OPS.setTextRise:this.setTextRise(ft[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(ft[0]);break;case a.OPS.setLineWidth:this.setLineWidth(ft[0]);break;case a.OPS.setLineJoin:this.setLineJoin(ft[0]);break;case a.OPS.setLineCap:this.setLineCap(ft[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(ft[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(ft[0],ft[1],ft[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ft[0],ft[1],ft[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(ft);break;case a.OPS.setFillColorN:this.setFillColorN(ft);break;case a.OPS.shadingFill:this.shadingFill(ft[0]);break;case a.OPS.setDash:this.setDash(ft[0],ft[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(ft[0]);break;case a.OPS.setFlatness:this.setFlatness(ft[0]);break;case a.OPS.setGState:this.setGState(ft[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(ft[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ft[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ft[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ft[0],ft[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case a.OPS.constructPath:this.constructPath(ft[0],ft[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(at.items);break;default:(0,a.warn)(`Unimplemented operator ${At}`);break}}}setWordSpacing(lt){this.current.wordSpacing=lt}setCharSpacing(lt){this.current.charSpacing=lt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(lt,at,At,vt,ft,mt){const yt=this.current;yt.textMatrix=yt.lineMatrix=[lt,at,At,vt,ft,mt],yt.textMatrixScale=Math.hypot(lt,at),yt.x=yt.lineX=0,yt.y=yt.lineY=0,yt.xcoords=[],yt.ycoords=[],yt.tspan=this.svgFactory.createElement("svg:tspan"),yt.tspan.setAttributeNS(null,"font-family",yt.fontFamily),yt.tspan.setAttributeNS(null,"font-size",`${et(yt.fontSize)}px`),yt.tspan.setAttributeNS(null,"y",et(-yt.y)),yt.txtElement=this.svgFactory.createElement("svg:text"),yt.txtElement.append(yt.tspan)}beginText(){const lt=this.current;lt.x=lt.lineX=0,lt.y=lt.lineY=0,lt.textMatrix=a.IDENTITY_MATRIX,lt.lineMatrix=a.IDENTITY_MATRIX,lt.textMatrixScale=1,lt.tspan=this.svgFactory.createElement("svg:tspan"),lt.txtElement=this.svgFactory.createElement("svg:text"),lt.txtgrp=this.svgFactory.createElement("svg:g"),lt.xcoords=[],lt.ycoords=[]}moveText(lt,at){const At=this.current;At.x=At.lineX+=lt,At.y=At.lineY+=at,At.xcoords=[],At.ycoords=[],At.tspan=this.svgFactory.createElement("svg:tspan"),At.tspan.setAttributeNS(null,"font-family",At.fontFamily),At.tspan.setAttributeNS(null,"font-size",`${et(At.fontSize)}px`),At.tspan.setAttributeNS(null,"y",et(-At.y))}showText(lt){const at=this.current,At=at.font,vt=at.fontSize;if(vt===0)return;const ft=at.fontSizeScale,mt=at.charSpacing,yt=at.wordSpacing,bt=at.fontDirection,Mt=at.textHScale*bt,Tt=At.vertical,Lt=Tt?1:-1,Bt=At.defaultVMetrics,Kt=vt*at.fontMatrix[0];let _t=0;for(const rn of lt){if(rn===null){_t+=bt*yt;continue}else if(typeof rn=="number"){_t+=Lt*rn*vt/1e3;continue}const an=(rn.isSpace?yt:0)+mt,dt=rn.fontChar;let ct,gt,ut=rn.width;if(Tt){let Ct;const kt=rn.vmetric||Bt;Ct=rn.vmetric?kt[1]:ut*.5,Ct=-Ct*Kt;const xt=kt[2]*Kt;ut=kt?-kt[0]:ut,ct=Ct/ft,gt=(_t+xt)/ft}else ct=_t/ft,gt=0;(rn.isInFont||At.missingFile)&&(at.xcoords.push(at.x+ct),Tt&&at.ycoords.push(-at.y+gt),at.tspan.textContent+=dt);const Et=Tt?ut*Kt-an*bt:ut*Kt+an*bt;_t+=Et}at.tspan.setAttributeNS(null,"x",at.xcoords.map(et).join(" ")),Tt?at.tspan.setAttributeNS(null,"y",at.ycoords.map(et).join(" ")):at.tspan.setAttributeNS(null,"y",et(-at.y)),Tt?at.y-=_t:at.x+=_t*Mt,at.tspan.setAttributeNS(null,"font-family",at.fontFamily),at.tspan.setAttributeNS(null,"font-size",`${et(at.fontSize)}px`),at.fontStyle!==c.fontStyle&&at.tspan.setAttributeNS(null,"font-style",at.fontStyle),at.fontWeight!==c.fontWeight&&at.tspan.setAttributeNS(null,"font-weight",at.fontWeight);const Ut=at.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(Ut===a.TextRenderingMode.FILL||Ut===a.TextRenderingMode.FILL_STROKE?(at.fillColor!==c.fillColor&&at.tspan.setAttributeNS(null,"fill",at.fillColor),at.fillAlpha<1&&at.tspan.setAttributeNS(null,"fill-opacity",at.fillAlpha)):at.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?at.tspan.setAttributeNS(null,"fill","transparent"):at.tspan.setAttributeNS(null,"fill","none"),Ut===a.TextRenderingMode.STROKE||Ut===a.TextRenderingMode.FILL_STROKE){const rn=1/(at.textMatrixScale||1);this._setStrokeAttributes(at.tspan,rn)}let St=at.textMatrix;at.textRise!==0&&(St=St.slice(),St[5]+=at.textRise),at.txtElement.setAttributeNS(null,"transform",`${rt(St)} scale(${et(Mt)}, -1)`),at.txtElement.setAttributeNS(h,"xml:space","preserve"),at.txtElement.append(at.tspan),at.txtgrp.append(at.txtElement),this._ensureTransformGroup().append(at.txtElement)}setLeadingMoveText(lt,at){this.setLeading(-at),this.moveText(lt,at)}addFontStyle(lt){if(!lt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const at=b(lt.data,lt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${lt.loadedName}"; src: url(${at}); }
`}setFont(lt){const at=this.current,At=this.commonObjs.get(lt[0]);let vt=lt[1];at.font=At,this.embedFonts&&!At.missingFile&&!this.embeddedFonts[At.loadedName]&&(this.addFontStyle(At),this.embeddedFonts[At.loadedName]=At),at.fontMatrix=At.fontMatrix||a.FONT_IDENTITY_MATRIX;let ft="normal";At.black?ft="900":At.bold&&(ft="bold");const mt=At.italic?"italic":"normal";vt<0?(vt=-vt,at.fontDirection=-1):at.fontDirection=1,at.fontSize=vt,at.fontFamily=At.loadedName,at.fontWeight=ft,at.fontStyle=mt,at.tspan=this.svgFactory.createElement("svg:tspan"),at.tspan.setAttributeNS(null,"y",et(-at.y)),at.xcoords=[],at.ycoords=[]}endText(){var at;const lt=this.current;lt.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((at=lt.txtElement)!=null&&at.hasChildNodes())&&(lt.element=lt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(lt){lt>0&&(this.current.lineWidth=lt)}setLineCap(lt){this.current.lineCap=g[lt]}setLineJoin(lt){this.current.lineJoin=_[lt]}setMiterLimit(lt){this.current.miterLimit=lt}setStrokeAlpha(lt){this.current.strokeAlpha=lt}setStrokeRGBColor(lt,at,At){this.current.strokeColor=a.Util.makeHexColor(lt,at,At)}setFillAlpha(lt){this.current.fillAlpha=lt}setFillRGBColor(lt,at,At){this.current.fillColor=a.Util.makeHexColor(lt,at,At),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(lt){this.current.strokeColor=this._makeColorN_Pattern(lt)}setFillColorN(lt){this.current.fillColor=this._makeColorN_Pattern(lt)}shadingFill(lt){const{width:at,height:At}=this.viewport,vt=a.Util.inverseTransform(this.transformMatrix),[ft,mt,yt,bt]=a.Util.getAxialAlignedBoundingBox([0,0,at,At],vt),Mt=this.svgFactory.createElement("svg:rect");Mt.setAttributeNS(null,"x",ft),Mt.setAttributeNS(null,"y",mt),Mt.setAttributeNS(null,"width",yt-ft),Mt.setAttributeNS(null,"height",bt-mt),Mt.setAttributeNS(null,"fill",this._makeShadingPattern(lt)),this.current.fillAlpha<1&&Mt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Mt)}_makeColorN_Pattern(lt){return lt[0]==="TilingPattern"?this._makeTilingPattern(lt):this._makeShadingPattern(lt)}_makeTilingPattern(lt){const at=lt[1],At=lt[2],vt=lt[3]||a.IDENTITY_MATRIX,[ft,mt,yt,bt]=lt[4],Mt=lt[5],Tt=lt[6],Lt=lt[7],Bt=`shading${nt++}`,[Kt,_t,Ut,St]=a.Util.normalizeRect([...a.Util.applyTransform([ft,mt],vt),...a.Util.applyTransform([yt,bt],vt)]),[rn,an]=a.Util.singularValueDecompose2dScale(vt),dt=Mt*rn,ct=Tt*an,gt=this.svgFactory.createElement("svg:pattern");gt.setAttributeNS(null,"id",Bt),gt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),gt.setAttributeNS(null,"width",dt),gt.setAttributeNS(null,"height",ct),gt.setAttributeNS(null,"x",`${Kt}`),gt.setAttributeNS(null,"y",`${_t}`);const ut=this.svg,Et=this.transformMatrix,Ct=this.current.fillColor,kt=this.current.strokeColor,xt=this.svgFactory.create(Ut-Kt,St-_t);if(this.svg=xt,this.transformMatrix=vt,Lt===2){const Pt=a.Util.makeHexColor(...at);this.current.fillColor=Pt,this.current.strokeColor=Pt}return this.executeOpTree(this.convertOpList(At)),this.svg=ut,this.transformMatrix=Et,this.current.fillColor=Ct,this.current.strokeColor=kt,gt.append(xt.childNodes[0]),this.defs.append(gt),`url(#${Bt})`}_makeShadingPattern(lt){switch(typeof lt=="string"&&(lt=this.objs.get(lt)),lt[0]){case"RadialAxial":const at=`shading${nt++}`,At=lt[3];let vt;switch(lt[1]){case"axial":const ft=lt[4],mt=lt[5];vt=this.svgFactory.createElement("svg:linearGradient"),vt.setAttributeNS(null,"id",at),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"x1",ft[0]),vt.setAttributeNS(null,"y1",ft[1]),vt.setAttributeNS(null,"x2",mt[0]),vt.setAttributeNS(null,"y2",mt[1]);break;case"radial":const yt=lt[4],bt=lt[5],Mt=lt[6],Tt=lt[7];vt=this.svgFactory.createElement("svg:radialGradient"),vt.setAttributeNS(null,"id",at),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"cx",bt[0]),vt.setAttributeNS(null,"cy",bt[1]),vt.setAttributeNS(null,"r",Tt),vt.setAttributeNS(null,"fx",yt[0]),vt.setAttributeNS(null,"fy",yt[1]),vt.setAttributeNS(null,"fr",Mt);break;default:throw new Error(`Unknown RadialAxial type: ${lt[1]}`)}for(const ft of At){const mt=this.svgFactory.createElement("svg:stop");mt.setAttributeNS(null,"offset",ft[0]),mt.setAttributeNS(null,"stop-color",ft[1]),vt.append(mt)}return this.defs.append(vt),`url(#${at})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${lt[0]}`)}}setDash(lt,at){this.current.dashArray=lt,this.current.dashPhase=at}constructPath(lt,at){const At=this.current;let vt=At.x,ft=At.y,mt=[],yt=0;for(const bt of lt)switch(bt|0){case a.OPS.rectangle:vt=at[yt++],ft=at[yt++];const Mt=at[yt++],Tt=at[yt++],Lt=vt+Mt,Bt=ft+Tt;mt.push("M",et(vt),et(ft),"L",et(Lt),et(ft),"L",et(Lt),et(Bt),"L",et(vt),et(Bt),"Z");break;case a.OPS.moveTo:vt=at[yt++],ft=at[yt++],mt.push("M",et(vt),et(ft));break;case a.OPS.lineTo:vt=at[yt++],ft=at[yt++],mt.push("L",et(vt),et(ft));break;case a.OPS.curveTo:vt=at[yt+4],ft=at[yt+5],mt.push("C",et(at[yt]),et(at[yt+1]),et(at[yt+2]),et(at[yt+3]),et(vt),et(ft)),yt+=6;break;case a.OPS.curveTo2:mt.push("C",et(vt),et(ft),et(at[yt]),et(at[yt+1]),et(at[yt+2]),et(at[yt+3])),vt=at[yt+2],ft=at[yt+3],yt+=4;break;case a.OPS.curveTo3:vt=at[yt+2],ft=at[yt+3],mt.push("C",et(at[yt]),et(at[yt+1]),et(vt),et(ft),et(vt),et(ft)),yt+=4;break;case a.OPS.closePath:mt.push("Z");break}mt=mt.join(" "),At.path&&lt.length>0&&lt[0]!==a.OPS.rectangle&&lt[0]!==a.OPS.moveTo?mt=At.path.getAttributeNS(null,"d")+mt:(At.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(At.path)),At.path.setAttributeNS(null,"d",mt),At.path.setAttributeNS(null,"fill","none"),At.element=At.path,At.setCurrentPoint(vt,ft)}endPath(){const lt=this.current;if(lt.path=null,!this.pendingClip)return;if(!lt.element){this.pendingClip=null;return}const at=`clippath${st++}`,At=this.svgFactory.createElement("svg:clipPath");At.setAttributeNS(null,"id",at),At.setAttributeNS(null,"transform",rt(this.transformMatrix));const vt=lt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?vt.setAttributeNS(null,"clip-rule","evenodd"):vt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,At.append(vt),this.defs.append(At),lt.activeClipUrl){lt.clipGroup=null;for(const ft of this.extraStack)ft.clipGroup=null;At.setAttributeNS(null,"clip-path",lt.activeClipUrl)}lt.activeClipUrl=`url(#${at})`,this.tgrp=null}clip(lt){this.pendingClip=lt}closePath(){const lt=this.current;if(lt.path){const at=`${lt.path.getAttributeNS(null,"d")}Z`;lt.path.setAttributeNS(null,"d",at)}}setLeading(lt){this.current.leading=-lt}setTextRise(lt){this.current.textRise=lt}setTextRenderingMode(lt){this.current.textRenderingMode=lt}setHScale(lt){this.current.textHScale=lt/100}setRenderingIntent(lt){}setFlatness(lt){}setGState(lt){for(const[at,At]of lt)switch(at){case"LW":this.setLineWidth(At);break;case"LC":this.setLineCap(At);break;case"LJ":this.setLineJoin(At);break;case"ML":this.setMiterLimit(At);break;case"D":this.setDash(At[0],At[1]);break;case"RI":this.setRenderingIntent(At);break;case"FL":this.setFlatness(At);break;case"Font":this.setFont(At);break;case"CA":this.setStrokeAlpha(At);break;case"ca":this.setFillAlpha(At);break;default:(0,a.warn)(`Unimplemented graphic state operator ${at}`);break}}fill(){const lt=this.current;lt.element&&(lt.element.setAttributeNS(null,"fill",lt.fillColor),lt.element.setAttributeNS(null,"fill-opacity",lt.fillAlpha),this.endPath())}stroke(){const lt=this.current;lt.element&&(this._setStrokeAttributes(lt.element),lt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(lt,at=1){const At=this.current;let vt=At.dashArray;at!==1&&vt.length>0&&(vt=vt.map(function(ft){return at*ft})),lt.setAttributeNS(null,"stroke",At.strokeColor),lt.setAttributeNS(null,"stroke-opacity",At.strokeAlpha),lt.setAttributeNS(null,"stroke-miterlimit",et(At.miterLimit)),lt.setAttributeNS(null,"stroke-linecap",At.lineCap),lt.setAttributeNS(null,"stroke-linejoin",At.lineJoin),lt.setAttributeNS(null,"stroke-width",et(at*At.lineWidth)+"px"),lt.setAttributeNS(null,"stroke-dasharray",vt.map(et).join(" ")),lt.setAttributeNS(null,"stroke-dashoffset",et(at*At.dashPhase)+"px")}eoFill(){var lt;(lt=this.current.element)==null||lt.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var lt;(lt=this.current.element)==null||lt.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const lt=this.svgFactory.createElement("svg:rect");lt.setAttributeNS(null,"x","0"),lt.setAttributeNS(null,"y","0"),lt.setAttributeNS(null,"width","1px"),lt.setAttributeNS(null,"height","1px"),lt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(lt)}paintImageXObject(lt){const at=this.getObject(lt);if(!at){(0,a.warn)(`Dependent image with object ID ${lt} is not ready yet`);return}this.paintInlineImageXObject(at)}paintInlineImageXObject(lt,at){const At=lt.width,vt=lt.height,ft=j(lt,this.forceDataSchema,!!at),mt=this.svgFactory.createElement("svg:rect");mt.setAttributeNS(null,"x","0"),mt.setAttributeNS(null,"y","0"),mt.setAttributeNS(null,"width",et(At)),mt.setAttributeNS(null,"height",et(vt)),this.current.element=mt,this.clip("nonzero");const yt=this.svgFactory.createElement("svg:image");yt.setAttributeNS(d,"xlink:href",ft),yt.setAttributeNS(null,"x","0"),yt.setAttributeNS(null,"y",et(-vt)),yt.setAttributeNS(null,"width",et(At)+"px"),yt.setAttributeNS(null,"height",et(vt)+"px"),yt.setAttributeNS(null,"transform",`scale(${et(1/At)} ${et(-1/vt)})`),at?at.append(yt):this._ensureTransformGroup().append(yt)}paintImageMaskXObject(lt){const at=this.getObject(lt.data,lt);if(at.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const At=this.current,vt=at.width,ft=at.height,mt=At.fillColor;At.maskId=`mask${tt++}`;const yt=this.svgFactory.createElement("svg:mask");yt.setAttributeNS(null,"id",At.maskId);const bt=this.svgFactory.createElement("svg:rect");bt.setAttributeNS(null,"x","0"),bt.setAttributeNS(null,"y","0"),bt.setAttributeNS(null,"width",et(vt)),bt.setAttributeNS(null,"height",et(ft)),bt.setAttributeNS(null,"fill",mt),bt.setAttributeNS(null,"mask",`url(#${At.maskId})`),this.defs.append(yt),this._ensureTransformGroup().append(bt),this.paintInlineImageXObject(at,yt)}paintFormXObjectBegin(lt,at){if(Array.isArray(lt)&&lt.length===6&&this.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),at){const At=at[2]-at[0],vt=at[3]-at[1],ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x",at[0]),ft.setAttributeNS(null,"y",at[1]),ft.setAttributeNS(null,"width",et(At)),ft.setAttributeNS(null,"height",et(vt)),this.current.element=ft,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(lt){const at=this.svgFactory.create(lt.width,lt.height),At=this.svgFactory.createElement("svg:defs");at.append(At),this.defs=At;const vt=this.svgFactory.createElement("svg:g");return vt.setAttributeNS(null,"transform",rt(lt.transform)),at.append(vt),this.svg=vt,at}_ensureClipGroup(){if(!this.current.clipGroup){const lt=this.svgFactory.createElement("svg:g");lt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(lt),this.current.clipGroup=lt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",rt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=it},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class o{static textContent(a){const c=[],h={items:c,styles:Object.create(null)};function d(g){var j;if(!g)return;let _=null;const b=g.name;if(b==="#text")_=g.value;else if(o.shouldBuildText(b))(j=g==null?void 0:g.attributes)!=null&&j.textContent?_=g.attributes.textContent:g.value&&(_=g.value);else return;if(_!==null&&c.push({str:_}),!!g.children)for(const _e of g.children)d(_e)}return d(a),h}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=o},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=rt,e.updateTextLayer=st;var s=o(1),a=o(6);const c=1e5,h=30,d=.8,g=new Map;function _(tt,nt){let it;if(nt&&s.FeatureTest.isOffscreenCanvasSupported)it=new OffscreenCanvas(tt,tt).getContext("2d",{alpha:!1});else{const pt=document.createElement("canvas");pt.width=pt.height=tt,it=pt.getContext("2d",{alpha:!1})}return it}function b(tt,nt){const it=g.get(tt);if(it)return it;const pt=_(h,nt);pt.font=`${h}px ${tt}`;const lt=pt.measureText("");let at=lt.fontBoundingBoxAscent,At=Math.abs(lt.fontBoundingBoxDescent);if(at){const ft=at/(at+At);return g.set(tt,ft),pt.canvas.width=pt.canvas.height=0,ft}pt.strokeStyle="red",pt.clearRect(0,0,h,h),pt.strokeText("g",0,0);let vt=pt.getImageData(0,0,h,h).data;At=0;for(let ft=vt.length-1-3;ft>=0;ft-=4)if(vt[ft]>0){At=Math.ceil(ft/4/h);break}pt.clearRect(0,0,h,h),pt.strokeText("A",0,h),vt=pt.getImageData(0,0,h,h).data,at=0;for(let ft=0,mt=vt.length;ft<mt;ft+=4)if(vt[ft]>0){at=h-Math.floor(ft/4/h);break}if(pt.canvas.width=pt.canvas.height=0,at){const ft=at/(at+At);return g.set(tt,ft),ft}return g.set(tt,d),d}function j(tt,nt,it){const pt=document.createElement("span"),lt={angle:0,canvasWidth:0,hasText:nt.str!=="",hasEOL:nt.hasEOL,fontSize:0};tt._textDivs.push(pt);const at=s.Util.transform(tt._transform,nt.transform);let At=Math.atan2(at[1],at[0]);const vt=it[nt.fontName];vt.vertical&&(At+=Math.PI/2);const ft=Math.hypot(at[2],at[3]),mt=ft*b(vt.fontFamily,tt._isOffscreenCanvasSupported);let yt,bt;At===0?(yt=at[4],bt=at[5]-mt):(yt=at[4]+mt*Math.sin(At),bt=at[5]-mt*Math.cos(At));const Mt="calc(var(--scale-factor)*",Tt=pt.style;tt._container===tt._rootContainer?(Tt.left=`${(100*yt/tt._pageWidth).toFixed(2)}%`,Tt.top=`${(100*bt/tt._pageHeight).toFixed(2)}%`):(Tt.left=`${Mt}${yt.toFixed(2)}px)`,Tt.top=`${Mt}${bt.toFixed(2)}px)`),Tt.fontSize=`${Mt}${ft.toFixed(2)}px)`,Tt.fontFamily=vt.fontFamily,lt.fontSize=ft,pt.setAttribute("role","presentation"),pt.textContent=nt.str,pt.dir=nt.dir,tt._fontInspectorEnabled&&(pt.dataset.fontName=nt.fontName),At!==0&&(lt.angle=At*(180/Math.PI));let Lt=!1;if(nt.str.length>1)Lt=!0;else if(nt.str!==" "&&nt.transform[0]!==nt.transform[3]){const Bt=Math.abs(nt.transform[0]),Kt=Math.abs(nt.transform[3]);Bt!==Kt&&Math.max(Bt,Kt)/Math.min(Bt,Kt)>1.5&&(Lt=!0)}Lt&&(lt.canvasWidth=vt.vertical?nt.height:nt.width),tt._textDivProperties.set(pt,lt),tt._isReadableStream&&tt._layoutText(pt)}function _e(tt){const{div:nt,scale:it,properties:pt,ctx:lt,prevFontSize:at,prevFontFamily:At}=tt,{style:vt}=nt;let ft="";if(pt.canvasWidth!==0&&pt.hasText){const{fontFamily:mt}=vt,{canvasWidth:yt,fontSize:bt}=pt;(at!==bt||At!==mt)&&(lt.font=`${bt*it}px ${mt}`,tt.prevFontSize=bt,tt.prevFontFamily=mt);const{width:Mt}=lt.measureText(nt.textContent);Mt>0&&(ft=`scaleX(${yt*it/Mt})`)}pt.angle!==0&&(ft=`rotate(${pt.angle}deg) ${ft}`),ft.length>0&&(vt.transform=ft)}function $(tt){if(tt._canceled)return;const nt=tt._textDivs,it=tt._capability;if(nt.length>c){it.resolve();return}if(!tt._isReadableStream)for(const lt of nt)tt._layoutText(lt);it.resolve()}class et{constructor({textContentSource:nt,container:it,viewport:pt,textDivs:lt,textDivProperties:at,textContentItemsStr:At,isOffscreenCanvasSupported:vt}){var Mt;this._textContentSource=nt,this._isReadableStream=nt instanceof ReadableStream,this._container=this._rootContainer=it,this._textDivs=lt||[],this._textContentItemsStr=At||[],this._isOffscreenCanvasSupported=vt,this._fontInspectorEnabled=!!((Mt=globalThis.FontInspector)!=null&&Mt.enabled),this._reader=null,this._textDivProperties=at||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:pt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,vt)};const{pageWidth:ft,pageHeight:mt,pageX:yt,pageY:bt}=pt.rawDims;this._transform=[1,0,0,-1,-yt,bt+mt],this._pageWidth=ft,this._pageHeight=mt,(0,a.setLayerDimensions)(it,pt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(nt,it){for(const pt of nt){if(pt.str===void 0){if(pt.type==="beginMarkedContentProps"||pt.type==="beginMarkedContent"){const lt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),pt.id!==null&&this._container.setAttribute("id",`${pt.id}`),lt.append(this._container)}else pt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(pt.str),j(this,pt,it)}}_layoutText(nt){const it=this._layoutTextParams.properties=this._textDivProperties.get(nt);if(this._layoutTextParams.div=nt,_e(this._layoutTextParams),it.hasText&&this._container.append(nt),it.hasEOL){const pt=document.createElement("br");pt.setAttribute("role","presentation"),this._container.append(pt)}}_render(){const nt=new s.PromiseCapability;let it=Object.create(null);if(this._isReadableStream){const pt=()=>{this._reader.read().then(({value:lt,done:at})=>{if(at){nt.resolve();return}Object.assign(it,lt.styles),this._processItems(lt.items,it),pt()},nt.reject)};this._reader=this._textContentSource.getReader(),pt()}else if(this._textContentSource){const{items:pt,styles:lt}=this._textContentSource;this._processItems(pt,lt),nt.resolve()}else throw new Error('No "textContentSource" parameter specified.');nt.promise.then(()=>{it=null,$(this)},this._capability.reject)}}e.TextLayerRenderTask=et;function rt(tt){!tt.textContentSource&&(tt.textContent||tt.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),tt.textContentSource=tt.textContent||tt.textContentStream);const{container:nt,viewport:it}=tt,pt=getComputedStyle(nt),lt=pt.getPropertyValue("visibility"),at=parseFloat(pt.getPropertyValue("--scale-factor"));lt==="visible"&&(!at||Math.abs(at-it.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const At=new et(tt);return At._render(),At}function st({container:tt,viewport:nt,textDivs:it,textDivProperties:pt,isOffscreenCanvasSupported:lt,mustRotate:at=!0,mustRescale:At=!0}){if(at&&(0,a.setLayerDimensions)(tt,{rotation:nt.rotation}),At){const vt=_(0,lt),mt={prevFontSize:null,prevFontFamily:null,div:null,scale:nt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:vt};for(const yt of it)mt.properties=pt.get(yt),mt.div=yt,_e(mt)}}},(i,e,o)=>{var b,j,_e,$,et,rt,st,tt,nt,it,pt,zr,at,mr,vt,$r,mt,Kr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var s=o(1),a=o(4),c=o(28),h=o(33),d=o(6),g=o(34);const bt=class bt{constructor({uiManager:Tt,pageIndex:Lt,div:Bt,accessibilityManager:Kt,annotationLayer:_t,viewport:Ut,l10n:St}){Nt(this,pt);Nt(this,at);Nt(this,vt);Nt(this,mt);Nt(this,b,void 0);Nt(this,j,!1);Nt(this,_e,null);Nt(this,$,this.pointerup.bind(this));Nt(this,et,this.pointerdown.bind(this));Nt(this,rt,new Map);Nt(this,st,!1);Nt(this,tt,!1);Nt(this,nt,!1);Nt(this,it,void 0);const rn=[c.FreeTextEditor,h.InkEditor,g.StampEditor];if(!bt._initialized){bt._initialized=!0;for(const an of rn)an.initialize(St)}Tt.registerEditorTypes(rn),Yt(this,it,Tt),this.pageIndex=Lt,this.div=Bt,Yt(this,b,Kt),Yt(this,_e,_t),this.viewport=Ut,ot(this,it).addLayer(this)}get isEmpty(){return ot(this,rt).size===0}updateToolbar(Tt){ot(this,it).updateToolbar(Tt)}updateMode(Tt=ot(this,it).getMode()){jt(this,mt,Kr).call(this),Tt===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Tt!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Tt===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Tt===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Tt===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Tt){if(!Tt&&ot(this,it).getMode()!==s.AnnotationEditorType.INK)return;if(!Tt){for(const Bt of ot(this,rt).values())if(Bt.isEmpty()){Bt.setInBackground();return}}jt(this,at,mr).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Tt){ot(this,it).setEditingState(Tt)}addCommands(Tt){ot(this,it).addCommands(Tt)}enable(){this.div.style.pointerEvents="auto";const Tt=new Set;for(const Bt of ot(this,rt).values())Bt.enableEditing(),Bt.annotationElementId&&Tt.add(Bt.annotationElementId);if(!ot(this,_e))return;const Lt=ot(this,_e).getEditableAnnotations();for(const Bt of Lt){if(Bt.hide(),ot(this,it).isDeletedAnnotationElement(Bt.data.id)||Tt.has(Bt.data.id))continue;const Kt=this.deserialize(Bt);Kt&&(this.addOrRebuild(Kt),Kt.enableEditing())}}disable(){var Lt;Yt(this,nt,!0),this.div.style.pointerEvents="none";const Tt=new Set;for(const Bt of ot(this,rt).values()){if(Bt.disableEditing(),!Bt.annotationElementId||Bt.serialize()!==null){Tt.add(Bt.annotationElementId);continue}(Lt=this.getEditableAnnotation(Bt.annotationElementId))==null||Lt.show(),Bt.remove()}if(ot(this,_e)){const Bt=ot(this,_e).getEditableAnnotations();for(const Kt of Bt){const{id:_t}=Kt.data;Tt.has(_t)||ot(this,it).isDeletedAnnotationElement(_t)||Kt.show()}}jt(this,mt,Kr).call(this),this.isEmpty&&(this.div.hidden=!0),Yt(this,nt,!1)}getEditableAnnotation(Tt){var Lt;return((Lt=ot(this,_e))==null?void 0:Lt.getEditableAnnotation(Tt))||null}setActiveEditor(Tt){ot(this,it).getActive()!==Tt&&ot(this,it).setActiveEditor(Tt)}enableClick(){this.div.addEventListener("pointerdown",ot(this,et)),this.div.addEventListener("pointerup",ot(this,$))}disableClick(){this.div.removeEventListener("pointerdown",ot(this,et)),this.div.removeEventListener("pointerup",ot(this,$))}attach(Tt){ot(this,rt).set(Tt.id,Tt);const{annotationElementId:Lt}=Tt;Lt&&ot(this,it).isDeletedAnnotationElement(Lt)&&ot(this,it).removeDeletedAnnotationElement(Tt)}detach(Tt){var Lt;ot(this,rt).delete(Tt.id),(Lt=ot(this,b))==null||Lt.removePointerInTextLayer(Tt.contentDiv),!ot(this,nt)&&Tt.annotationElementId&&ot(this,it).addDeletedAnnotationElement(Tt)}remove(Tt){this.detach(Tt),ot(this,it).removeEditor(Tt),Tt.div.contains(document.activeElement)&&setTimeout(()=>{ot(this,it).focusMainContainer()},0),Tt.div.remove(),Tt.isAttachedToDOM=!1,ot(this,tt)||this.addInkEditorIfNeeded(!1)}changeParent(Tt){var Lt;Tt.parent!==this&&(Tt.annotationElementId&&(ot(this,it).addDeletedAnnotationElement(Tt.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(Tt),Tt.annotationElementId=null),this.attach(Tt),(Lt=Tt.parent)==null||Lt.detach(Tt),Tt.setParent(this),Tt.div&&Tt.isAttachedToDOM&&(Tt.div.remove(),this.div.append(Tt.div)))}add(Tt){if(this.changeParent(Tt),ot(this,it).addEditor(Tt),this.attach(Tt),!Tt.isAttachedToDOM){const Lt=Tt.render();this.div.append(Lt),Tt.isAttachedToDOM=!0}Tt.fixAndSetPosition(),Tt.onceAdded(),ot(this,it).addToAnnotationStorage(Tt)}moveEditorInDOM(Tt){var Bt;if(!Tt.isAttachedToDOM)return;const{activeElement:Lt}=document;Tt.div.contains(Lt)&&(Tt._focusEventsAllowed=!1,setTimeout(()=>{Tt.div.contains(document.activeElement)?Tt._focusEventsAllowed=!0:(Tt.div.addEventListener("focusin",()=>{Tt._focusEventsAllowed=!0},{once:!0}),Lt.focus())},0)),Tt._structTreeParentId=(Bt=ot(this,b))==null?void 0:Bt.moveElementInDOM(this.div,Tt.div,Tt.contentDiv,!0)}addOrRebuild(Tt){Tt.needsToBeRebuilt()?Tt.rebuild():this.add(Tt)}addUndoableEditor(Tt){const Lt=()=>Tt._uiManager.rebuild(Tt),Bt=()=>{Tt.remove()};this.addCommands({cmd:Lt,undo:Bt,mustExec:!1})}getNextId(){return ot(this,it).getId()}pasteEditor(Tt,Lt){ot(this,it).updateToolbar(Tt),ot(this,it).updateMode(Tt);const{offsetX:Bt,offsetY:Kt}=jt(this,vt,$r).call(this),_t=this.getNextId(),Ut=jt(this,pt,zr).call(this,{parent:this,id:_t,x:Bt,y:Kt,uiManager:ot(this,it),isCentered:!0,...Lt});Ut&&this.add(Ut)}deserialize(Tt){switch(Tt.annotationType??Tt.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(Tt,this,ot(this,it));case s.AnnotationEditorType.INK:return h.InkEditor.deserialize(Tt,this,ot(this,it));case s.AnnotationEditorType.STAMP:return g.StampEditor.deserialize(Tt,this,ot(this,it))}return null}addNewEditor(){jt(this,at,mr).call(this,jt(this,vt,$r).call(this),!0)}setSelected(Tt){ot(this,it).setSelected(Tt)}toggleSelected(Tt){ot(this,it).toggleSelected(Tt)}isSelected(Tt){return ot(this,it).isSelected(Tt)}unselect(Tt){ot(this,it).unselect(Tt)}pointerup(Tt){const{isMac:Lt}=s.FeatureTest.platform;if(!(Tt.button!==0||Tt.ctrlKey&&Lt)&&Tt.target===this.div&&ot(this,st)){if(Yt(this,st,!1),!ot(this,j)){Yt(this,j,!0);return}if(ot(this,it).getMode()===s.AnnotationEditorType.STAMP){ot(this,it).unselectAll();return}jt(this,at,mr).call(this,Tt,!1)}}pointerdown(Tt){if(ot(this,st)){Yt(this,st,!1);return}const{isMac:Lt}=s.FeatureTest.platform;if(Tt.button!==0||Tt.ctrlKey&&Lt||Tt.target!==this.div)return;Yt(this,st,!0);const Bt=ot(this,it).getActive();Yt(this,j,!Bt||Bt.isEmpty())}findNewParent(Tt,Lt,Bt){const Kt=ot(this,it).findParent(Lt,Bt);return Kt===null||Kt===this?!1:(Kt.changeParent(Tt),!0)}destroy(){var Tt,Lt;((Tt=ot(this,it).getActive())==null?void 0:Tt.parent)===this&&(ot(this,it).commitOrRemove(),ot(this,it).setActiveEditor(null));for(const Bt of ot(this,rt).values())(Lt=ot(this,b))==null||Lt.removePointerInTextLayer(Bt.contentDiv),Bt.setParent(null),Bt.isAttachedToDOM=!1,Bt.div.remove();this.div=null,ot(this,rt).clear(),ot(this,it).removeLayer(this)}render({viewport:Tt}){this.viewport=Tt,(0,d.setLayerDimensions)(this.div,Tt);for(const Lt of ot(this,it).getEditors(this.pageIndex))this.add(Lt);this.updateMode()}update({viewport:Tt}){ot(this,it).commitOrRemove(),this.viewport=Tt,(0,d.setLayerDimensions)(this.div,{rotation:Tt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Tt,pageHeight:Lt}=this.viewport.rawDims;return[Tt,Lt]}};b=new WeakMap,j=new WeakMap,_e=new WeakMap,$=new WeakMap,et=new WeakMap,rt=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,pt=new WeakSet,zr=function(Tt){switch(ot(this,it).getMode()){case s.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(Tt);case s.AnnotationEditorType.INK:return new h.InkEditor(Tt);case s.AnnotationEditorType.STAMP:return new g.StampEditor(Tt)}return null},at=new WeakSet,mr=function(Tt,Lt){const Bt=this.getNextId(),Kt=jt(this,pt,zr).call(this,{parent:this,id:Bt,x:Tt.offsetX,y:Tt.offsetY,uiManager:ot(this,it),isCentered:Lt});return Kt&&this.add(Kt),Kt},vt=new WeakSet,$r=function(){const{x:Tt,y:Lt,width:Bt,height:Kt}=this.div.getBoundingClientRect(),_t=Math.max(0,Tt),Ut=Math.max(0,Lt),St=Math.min(window.innerWidth,Tt+Bt),rn=Math.min(window.innerHeight,Lt+Kt),an=(_t+St)/2-Tt,dt=(Ut+rn)/2-Lt,[ct,gt]=this.viewport.rotation%180===0?[an,dt]:[dt,an];return{offsetX:ct,offsetY:gt}},mt=new WeakSet,Kr=function(){Yt(this,tt,!0);for(const Tt of ot(this,rt).values())Tt.isEmpty()&&Tt.remove();Yt(this,tt,!1)},zn(bt,"_initialized",!1);let _=bt;e.AnnotationEditorLayer=_},(i,e,o)=>{var g,_,b,j,_e,$,et,rt,st,tt,yo,it,Eo,lt,vo,At,ar,ft,Vr,yt,Co,Mt,Gr;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var s=o(1),a=o(5),c=o(4),h=o(29);const Lt=class Lt extends c.AnnotationEditor{constructor(_t){super({..._t,name:"freeTextEditor"});Nt(this,tt);Nt(this,it);Nt(this,lt);Nt(this,At);Nt(this,ft);Nt(this,yt);Nt(this,Mt);Nt(this,g,this.editorDivBlur.bind(this));Nt(this,_,this.editorDivFocus.bind(this));Nt(this,b,this.editorDivInput.bind(this));Nt(this,j,this.editorDivKeydown.bind(this));Nt(this,_e,void 0);Nt(this,$,"");Nt(this,et,`${this.id}-editor`);Nt(this,rt,void 0);Nt(this,st,null);Yt(this,_e,_t.color||Lt._defaultColor||c.AnnotationEditor._defaultLineColor),Yt(this,rt,_t.fontSize||Lt._defaultFontSize)}static get _keyboardManager(){const _t=Lt.prototype,Ut=an=>an.isEmpty(),St=a.AnnotationEditorUIManager.TRANSLATE_SMALL,rn=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],_t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],_t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],_t._translateEmpty,{args:[-St,0],checker:Ut}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],_t._translateEmpty,{args:[-rn,0],checker:Ut}],[["ArrowRight","mac+ArrowRight"],_t._translateEmpty,{args:[St,0],checker:Ut}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],_t._translateEmpty,{args:[rn,0],checker:Ut}],[["ArrowUp","mac+ArrowUp"],_t._translateEmpty,{args:[0,-St],checker:Ut}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],_t._translateEmpty,{args:[0,-rn],checker:Ut}],[["ArrowDown","mac+ArrowDown"],_t._translateEmpty,{args:[0,St],checker:Ut}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],_t._translateEmpty,{args:[0,rn],checker:Ut}]]))}static initialize(_t){c.AnnotationEditor.initialize(_t,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ut=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ut.getPropertyValue("--freetext-padding"))}static updateDefaultParams(_t,Ut){switch(_t){case s.AnnotationEditorParamsType.FREETEXT_SIZE:Lt._defaultFontSize=Ut;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:Lt._defaultColor=Ut;break}}updateParams(_t,Ut){switch(_t){case s.AnnotationEditorParamsType.FREETEXT_SIZE:jt(this,tt,yo).call(this,Ut);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:jt(this,it,Eo).call(this,Ut);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,Lt._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,Lt._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,ot(this,rt)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,ot(this,_e)]]}_translateEmpty(_t,Ut){this._uiManager.translateSelectedEditors(_t,Ut,!0)}getInitialTranslation(){const _t=this.parentScale;return[-Lt._internalPadding*_t,-(Lt._internalPadding+ot(this,rt))*_t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",ot(this,j)),this.editorDiv.addEventListener("focus",ot(this,_)),this.editorDiv.addEventListener("blur",ot(this,g)),this.editorDiv.addEventListener("input",ot(this,b)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ot(this,et)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",ot(this,j)),this.editorDiv.removeEventListener("focus",ot(this,_)),this.editorDiv.removeEventListener("blur",ot(this,g)),this.editorDiv.removeEventListener("input",ot(this,b)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(_t){this._focusEventsAllowed&&(super.focusin(_t),_t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var _t;if(this.width){jt(this,Mt,Gr).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(_t=this._initialOptions)!=null&&_t.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const _t=ot(this,$),Ut=Yt(this,$,jt(this,lt,vo).call(this).trimEnd());if(_t===Ut)return;const St=rn=>{if(Yt(this,$,rn),!rn){this.remove();return}jt(this,ft,Vr).call(this),this._uiManager.rebuild(this),jt(this,At,ar).call(this)};this.addCommands({cmd:()=>{St(Ut)},undo:()=>{St(_t)},mustExec:!1}),jt(this,At,ar).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(_t){this.enterInEditMode()}keydown(_t){_t.target===this.div&&_t.key==="Enter"&&(this.enterInEditMode(),_t.preventDefault())}editorDivKeydown(_t){Lt._keyboardManager.exec(this,_t)}editorDivFocus(_t){this.isEditing=!0}editorDivBlur(_t){this.isEditing=!1}editorDivInput(_t){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let _t,Ut;this.width&&(_t=this.x,Ut=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ot(this,et)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(rn=>{var an;return(an=this.editorDiv)==null?void 0:an.setAttribute("aria-label",rn)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(rn=>{var an;return(an=this.editorDiv)==null?void 0:an.setAttribute("default-content",rn)}),this.editorDiv.contentEditable=!0;const{style:St}=this.editorDiv;if(St.fontSize=`calc(${ot(this,rt)}px * var(--scale-factor))`,St.color=ot(this,_e),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[rn,an]=this.parentDimensions;if(this.annotationElementId){const{position:dt}=ot(this,st);let[ct,gt]=this.getInitialTranslation();[ct,gt]=this.pageTranslationToScreen(ct,gt);const[ut,Et]=this.pageDimensions,[Ct,kt]=this.pageTranslation;let xt,Pt;switch(this.rotation){case 0:xt=_t+(dt[0]-Ct)/ut,Pt=Ut+this.height-(dt[1]-kt)/Et;break;case 90:xt=_t+(dt[0]-Ct)/ut,Pt=Ut-(dt[1]-kt)/Et,[ct,gt]=[gt,-ct];break;case 180:xt=_t-this.width+(dt[0]-Ct)/ut,Pt=Ut-(dt[1]-kt)/Et,[ct,gt]=[-ct,-gt];break;case 270:xt=_t+(dt[0]-Ct-this.height*Et)/ut,Pt=Ut+(dt[1]-kt-this.width*ut)/Et,[ct,gt]=[-gt,ct];break}this.setAt(xt*rn,Pt*an,ct,gt)}else this.setAt(_t*rn,Ut*an,this.width*rn,this.height*an);jt(this,ft,Vr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(_t,Ut,St){let rn=null;if(_t instanceof h.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:dt,fontColor:ct},rect:gt,rotation:ut,id:Et},textContent:Ct,textPosition:kt,parent:{page:{pageNumber:xt}}}=_t;if(!Ct||Ct.length===0)return null;rn=_t={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(ct),fontSize:dt,value:Ct.join(`
`),position:kt,pageIndex:xt-1,rect:gt,rotation:ut,id:Et,deleted:!1}}const an=super.deserialize(_t,Ut,St);return Yt(an,rt,_t.fontSize),Yt(an,_e,s.Util.makeHexColor(..._t.color)),Yt(an,$,_t.value),an.annotationElementId=_t.id||null,Yt(an,st,rn),an}serialize(_t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ut=Lt._internalPadding*this.parentScale,St=this.getRect(Ut,Ut),rn=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:ot(this,_e)),an={annotationType:s.AnnotationEditorType.FREETEXT,color:rn,fontSize:ot(this,rt),value:ot(this,$),pageIndex:this.pageIndex,rect:St,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return _t?an:this.annotationElementId&&!jt(this,yt,Co).call(this,an)?null:(an.id=this.annotationElementId,an)}};g=new WeakMap,_=new WeakMap,b=new WeakMap,j=new WeakMap,_e=new WeakMap,$=new WeakMap,et=new WeakMap,rt=new WeakMap,st=new WeakMap,tt=new WeakSet,yo=function(_t){const Ut=rn=>{this.editorDiv.style.fontSize=`calc(${rn}px * var(--scale-factor))`,this.translate(0,-(rn-ot(this,rt))*this.parentScale),Yt(this,rt,rn),jt(this,At,ar).call(this)},St=ot(this,rt);this.addCommands({cmd:()=>{Ut(_t)},undo:()=>{Ut(St)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},it=new WeakSet,Eo=function(_t){const Ut=ot(this,_e);this.addCommands({cmd:()=>{Yt(this,_e,this.editorDiv.style.color=_t)},undo:()=>{Yt(this,_e,this.editorDiv.style.color=Ut)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},lt=new WeakSet,vo=function(){const _t=this.editorDiv.getElementsByTagName("div");if(_t.length===0)return this.editorDiv.innerText;const Ut=[];for(const St of _t)Ut.push(St.innerText.replace(/\r\n?|\n/,""));return Ut.join(`
`)},At=new WeakSet,ar=function(){const[_t,Ut]=this.parentDimensions;let St;if(this.isAttachedToDOM)St=this.div.getBoundingClientRect();else{const{currentLayer:rn,div:an}=this,dt=an.style.display;an.style.display="hidden",rn.div.append(this.div),St=an.getBoundingClientRect(),an.remove(),an.style.display=dt}this.rotation%180===this.parentRotation%180?(this.width=St.width/_t,this.height=St.height/Ut):(this.width=St.height/_t,this.height=St.width/Ut),this.fixAndSetPosition()},ft=new WeakSet,Vr=function(){if(this.editorDiv.replaceChildren(),!!ot(this,$))for(const _t of ot(this,$).split(`
`)){const Ut=document.createElement("div");Ut.append(_t?document.createTextNode(_t):document.createElement("br")),this.editorDiv.append(Ut)}},yt=new WeakSet,Co=function(_t){const{value:Ut,fontSize:St,color:rn,rect:an,pageIndex:dt}=ot(this,st);return _t.value!==Ut||_t.fontSize!==St||_t.rect.some((ct,gt)=>Math.abs(ct-an[gt])>=1)||_t.color.some((ct,gt)=>ct!==rn[gt])||_t.pageIndex!==dt},Mt=new WeakSet,Gr=function(_t=!1){if(!this.annotationElementId)return;if(jt(this,At,ar).call(this),!_t&&(this.width===0||this.height===0)){setTimeout(()=>jt(this,Mt,Gr).call(this,!0),0);return}const Ut=Lt._internalPadding*this.parentScale;ot(this,st).rect=this.getRect(Ut,Ut)},zn(Lt,"_freeTextDefaultContent",""),zn(Lt,"_internalPadding",0),zn(Lt,"_defaultColor",null),zn(Lt,"_defaultFontSize",10),zn(Lt,"_type","freetext");let d=Lt;e.FreeTextEditor=d},(i,e,o)=>{var gt,Et,Xn,kt,Ao,Pt,qt,Vt,Qt,tn,on,Zt,pn,Tn,dn,Cn,sn,Gt,Wt,Ot,Xt,nn,gn,So,kn,yr,Rn,Wr,Mn,qr,zt,Ft,cn,hn,Hn,Bn,$t,Yr,_n,mn,bn,xn,To,un,Xr;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var s=o(1),a=o(6),c=o(3),h=o(30),d=o(31),g=o(32);const _=1e3,b=9,j=new WeakSet;function _e(wn){return{width:wn[2]-wn[0],height:wn[3]-wn[1]}}class ${static create(Rt){switch(Rt.data.annotationType){case s.AnnotationType.LINK:return new rt(Rt);case s.AnnotationType.TEXT:return new st(Rt);case s.AnnotationType.WIDGET:switch(Rt.data.fieldType){case"Tx":return new nt(Rt);case"Btn":return Rt.data.radioButton?new lt(Rt):Rt.data.checkBox?new pt(Rt):new at(Rt);case"Ch":return new At(Rt);case"Sig":return new it(Rt)}return new tt(Rt);case s.AnnotationType.POPUP:return new vt(Rt);case s.AnnotationType.FREETEXT:return new mt(Rt);case s.AnnotationType.LINE:return new yt(Rt);case s.AnnotationType.SQUARE:return new bt(Rt);case s.AnnotationType.CIRCLE:return new Mt(Rt);case s.AnnotationType.POLYLINE:return new Tt(Rt);case s.AnnotationType.CARET:return new Bt(Rt);case s.AnnotationType.INK:return new Kt(Rt);case s.AnnotationType.POLYGON:return new Lt(Rt);case s.AnnotationType.HIGHLIGHT:return new _t(Rt);case s.AnnotationType.UNDERLINE:return new Ut(Rt);case s.AnnotationType.SQUIGGLY:return new St(Rt);case s.AnnotationType.STRIKEOUT:return new rn(Rt);case s.AnnotationType.STAMP:return new an(Rt);case s.AnnotationType.FILEATTACHMENT:return new dt(Rt);default:return new et(Rt)}}}const ut=class ut{constructor(Rt,{isRenderable:ht=!1,ignoreBorder:wt=!1,createQuadrilaterals:It=!1}={}){Nt(this,gt,!1);this.isRenderable=ht,this.data=Rt.data,this.layer=Rt.layer,this.linkService=Rt.linkService,this.downloadManager=Rt.downloadManager,this.imageResourcesPath=Rt.imageResourcesPath,this.renderForms=Rt.renderForms,this.svgFactory=Rt.svgFactory,this.annotationStorage=Rt.annotationStorage,this.enableScripting=Rt.enableScripting,this.hasJSActions=Rt.hasJSActions,this._fieldObjects=Rt.fieldObjects,this.parent=Rt.parent,ht&&(this.container=this._createContainer(wt)),It&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Rt,contentsObj:ht,richText:wt}){return!!(Rt!=null&&Rt.str||ht!=null&&ht.str||wt!=null&&wt.str)}get hasPopupData(){return ut._hasPopupData(this.data)}_createContainer(Rt){const{data:ht,parent:{page:wt,viewport:It}}=this,Dt=document.createElement("section");Dt.setAttribute("data-annotation-id",ht.id),this instanceof tt||(Dt.tabIndex=_),Dt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Dt.setAttribute("aria-haspopup","dialog"),ht.noRotate&&Dt.classList.add("norotate");const{pageWidth:Ht,pageHeight:Jt,pageX:ln,pageY:En}=It.rawDims;if(!ht.rect||this instanceof vt){const{rotation:On}=ht;return!ht.hasOwnCanvas&&On!==0&&this.setRotation(On,Dt),Dt}const{width:yn,height:Nn}=_e(ht.rect),An=s.Util.normalizeRect([ht.rect[0],wt.view[3]-ht.rect[1]+wt.view[1],ht.rect[2],wt.view[3]-ht.rect[3]+wt.view[1]]);if(!Rt&&ht.borderStyle.width>0){Dt.style.borderWidth=`${ht.borderStyle.width}px`;const On=ht.borderStyle.horizontalCornerRadius,Ln=ht.borderStyle.verticalCornerRadius;if(On>0||Ln>0){const Un=`calc(${On}px * var(--scale-factor)) / calc(${Ln}px * var(--scale-factor))`;Dt.style.borderRadius=Un}else if(this instanceof lt){const Un=`calc(${yn}px * var(--scale-factor)) / calc(${Nn}px * var(--scale-factor))`;Dt.style.borderRadius=Un}switch(ht.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:Dt.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:Dt.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:Dt.style.borderBottomStyle="solid";break}const Fn=ht.borderColor||null;Fn?(Yt(this,gt,!0),Dt.style.borderColor=s.Util.makeHexColor(Fn[0]|0,Fn[1]|0,Fn[2]|0)):Dt.style.borderWidth=0}Dt.style.left=`${100*(An[0]-ln)/Ht}%`,Dt.style.top=`${100*(An[1]-En)/Jt}%`;const{rotation:Sn}=ht;return ht.hasOwnCanvas||Sn===0?(Dt.style.width=`${100*yn/Ht}%`,Dt.style.height=`${100*Nn/Jt}%`):this.setRotation(Sn,Dt),Dt}setRotation(Rt,ht=this.container){if(!this.data.rect)return;const{pageWidth:wt,pageHeight:It}=this.parent.viewport.rawDims,{width:Dt,height:Ht}=_e(this.data.rect);let Jt,ln;Rt%180===0?(Jt=100*Dt/wt,ln=100*Ht/It):(Jt=100*Ht/wt,ln=100*Dt/It),ht.style.width=`${Jt}%`,ht.style.height=`${ln}%`,ht.setAttribute("data-main-rotation",(360-Rt)%360)}get _commonActions(){const Rt=(ht,wt,It)=>{const Dt=It.detail[ht],Ht=Dt[0],Jt=Dt.slice(1);It.target.style[wt]=h.ColorConverters[`${Ht}_HTML`](Jt),this.annotationStorage.setValue(this.data.id,{[wt]:h.ColorConverters[`${Ht}_rgb`](Jt)})};return(0,s.shadow)(this,"_commonActions",{display:ht=>{const{display:wt}=ht.detail,It=wt%2===1;this.container.style.visibility=It?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:It,noPrint:wt===1||wt===2})},print:ht=>{this.annotationStorage.setValue(this.data.id,{noPrint:!ht.detail.print})},hidden:ht=>{const{hidden:wt}=ht.detail;this.container.style.visibility=wt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:wt,noView:wt})},focus:ht=>{setTimeout(()=>ht.target.focus({preventScroll:!1}),0)},userName:ht=>{ht.target.title=ht.detail.userName},readonly:ht=>{ht.target.disabled=ht.detail.readonly},required:ht=>{this._setRequired(ht.target,ht.detail.required)},bgColor:ht=>{Rt("bgColor","backgroundColor",ht)},fillColor:ht=>{Rt("fillColor","backgroundColor",ht)},fgColor:ht=>{Rt("fgColor","color",ht)},textColor:ht=>{Rt("textColor","color",ht)},borderColor:ht=>{Rt("borderColor","borderColor",ht)},strokeColor:ht=>{Rt("strokeColor","borderColor",ht)},rotation:ht=>{const wt=ht.detail.rotation;this.setRotation(wt),this.annotationStorage.setValue(this.data.id,{rotation:wt})}})}_dispatchEventFromSandbox(Rt,ht){const wt=this._commonActions;for(const It of Object.keys(ht.detail)){const Dt=Rt[It]||wt[It];Dt==null||Dt(ht)}}_setDefaultPropertiesFromJS(Rt){if(!this.enableScripting)return;const ht=this.annotationStorage.getRawValue(this.data.id);if(!ht)return;const wt=this._commonActions;for(const[It,Dt]of Object.entries(ht)){const Ht=wt[It];if(Ht){const Jt={detail:{[It]:Dt},target:Rt};Ht(Jt),delete ht[It]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Rt}=this.data;if(!Rt)return;const[ht,wt,It,Dt]=this.data.rect;if(Rt.length===1){const[,{x:Ln,y:Fn},{x:Un,y:Kn}]=Rt[0];if(It===Ln&&Dt===Fn&&ht===Un&&wt===Kn)return}const{style:Ht}=this.container;let Jt;if(ot(this,gt)){const{borderColor:Ln,borderWidth:Fn}=Ht;Ht.borderWidth=0,Jt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ln}" stroke-width="${Fn}">`],this.container.classList.add("hasBorder")}const ln=It-ht,En=Dt-wt,{svgFactory:yn}=this,Nn=yn.createElement("svg");Nn.classList.add("quadrilateralsContainer"),Nn.setAttribute("width",0),Nn.setAttribute("height",0);const An=yn.createElement("defs");Nn.append(An);const Sn=yn.createElement("clipPath"),On=`clippath_${this.data.id}`;Sn.setAttribute("id",On),Sn.setAttribute("clipPathUnits","objectBoundingBox"),An.append(Sn);for(const[,{x:Ln,y:Fn},{x:Un,y:Kn}]of Rt){const $n=yn.createElement("rect"),Vn=(Un-ht)/ln,qn=(Dt-Fn)/En,Yn=(Ln-Un)/ln,io=(Fn-Kn)/En;$n.setAttribute("x",Vn),$n.setAttribute("y",qn),$n.setAttribute("width",Yn),$n.setAttribute("height",io),Sn.append($n),Jt==null||Jt.push(`<rect vector-effect="non-scaling-stroke" x="${Vn}" y="${qn}" width="${Yn}" height="${io}"/>`)}ot(this,gt)&&(Jt.push("</g></svg>')"),Ht.backgroundImage=Jt.join("")),this.container.append(Nn),this.container.style.clipPath=`url(#${On})`}_createPopup(){const{container:Rt,data:ht}=this;Rt.setAttribute("aria-haspopup","dialog");const wt=new vt({data:{color:ht.color,titleObj:ht.titleObj,modificationDate:ht.modificationDate,contentsObj:ht.contentsObj,richText:ht.richText,parentRect:ht.rect,borderStyle:0,id:`popup_${ht.id}`,rotation:ht.rotation},parent:this.parent,elements:[this]});this.parent.div.append(wt.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Rt,ht=null){const wt=[];if(this._fieldObjects){const It=this._fieldObjects[Rt];if(It)for(const{page:Dt,id:Ht,exportValues:Jt}of It){if(Dt===-1||Ht===ht)continue;const ln=typeof Jt=="string"?Jt:null,En=document.querySelector(`[data-element-id="${Ht}"]`);if(En&&!j.has(En)){(0,s.warn)(`_getElementsByName - element not allowed: ${Ht}`);continue}wt.push({id:Ht,exportValue:ln,domElement:En})}return wt}for(const It of document.getElementsByName(Rt)){const{exportValue:Dt}=It,Ht=It.getAttribute("data-element-id");Ht!==ht&&j.has(It)&&wt.push({id:Ht,exportValue:Dt,domElement:It})}return wt}show(){var Rt;this.container&&(this.container.hidden=!1),(Rt=this.popup)==null||Rt.maybeShow()}hide(){var Rt;this.container&&(this.container.hidden=!0),(Rt=this.popup)==null||Rt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Rt=this.getElementsToTriggerPopup();if(Array.isArray(Rt))for(const ht of Rt)ht.classList.add("highlightArea");else Rt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Rt,data:{id:ht}}=this;this.container.addEventListener("dblclick",()=>{var wt;(wt=this.linkService.eventBus)==null||wt.dispatch("switchannotationeditormode",{source:this,mode:Rt,editId:ht})})}};gt=new WeakMap;let et=ut;class rt extends et{constructor(ht,wt=null){super(ht,{isRenderable:!0,ignoreBorder:!!(wt!=null&&wt.ignoreBorder),createQuadrilaterals:!0});Nt(this,Et);Nt(this,kt);this.isTooltipOnly=ht.data.isTooltipOnly}render(){const{data:ht,linkService:wt}=this,It=document.createElement("a");It.setAttribute("data-element-id",ht.id);let Dt=!1;return ht.url?(wt.addLinkAttributes(It,ht.url,ht.newWindow),Dt=!0):ht.action?(this._bindNamedAction(It,ht.action),Dt=!0):ht.attachment?(this._bindAttachment(It,ht.attachment),Dt=!0):ht.setOCGState?(jt(this,kt,Ao).call(this,It,ht.setOCGState),Dt=!0):ht.dest?(this._bindLink(It,ht.dest),Dt=!0):(ht.actions&&(ht.actions.Action||ht.actions["Mouse Up"]||ht.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(It,ht),Dt=!0),ht.resetForm?(this._bindResetFormAction(It,ht.resetForm),Dt=!0):this.isTooltipOnly&&!Dt&&(this._bindLink(It,""),Dt=!0)),this.container.classList.add("linkAnnotation"),Dt&&this.container.append(It),this.container}_bindLink(ht,wt){ht.href=this.linkService.getDestinationHash(wt),ht.onclick=()=>(wt&&this.linkService.goToDestination(wt),!1),(wt||wt==="")&&jt(this,Et,Xn).call(this)}_bindNamedAction(ht,wt){ht.href=this.linkService.getAnchorUrl(""),ht.onclick=()=>(this.linkService.executeNamedAction(wt),!1),jt(this,Et,Xn).call(this)}_bindAttachment(ht,wt){ht.href=this.linkService.getAnchorUrl(""),ht.onclick=()=>{var It;return(It=this.downloadManager)==null||It.openOrDownloadData(this.container,wt.content,wt.filename),!1},jt(this,Et,Xn).call(this)}_bindJSAction(ht,wt){ht.href=this.linkService.getAnchorUrl("");const It=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Dt of Object.keys(wt.actions)){const Ht=It.get(Dt);Ht&&(ht[Ht]=()=>{var Jt;return(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:wt.id,name:Dt}}),!1})}ht.onclick||(ht.onclick=()=>!1),jt(this,Et,Xn).call(this)}_bindResetFormAction(ht,wt){const It=ht.onclick;if(It||(ht.href=this.linkService.getAnchorUrl("")),jt(this,Et,Xn).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),It||(ht.onclick=()=>!1);return}ht.onclick=()=>{var Nn;It==null||It();const{fields:Dt,refs:Ht,include:Jt}=wt,ln=[];if(Dt.length!==0||Ht.length!==0){const An=new Set(Ht);for(const Sn of Dt){const On=this._fieldObjects[Sn]||[];for(const{id:Ln}of On)An.add(Ln)}for(const Sn of Object.values(this._fieldObjects))for(const On of Sn)An.has(On.id)===Jt&&ln.push(On)}else for(const An of Object.values(this._fieldObjects))ln.push(...An);const En=this.annotationStorage,yn=[];for(const An of ln){const{id:Sn}=An;switch(yn.push(Sn),An.type){case"text":{const Ln=An.defaultValue||"";En.setValue(Sn,{value:Ln});break}case"checkbox":case"radiobutton":{const Ln=An.defaultValue===An.exportValues;En.setValue(Sn,{value:Ln});break}case"combobox":case"listbox":{const Ln=An.defaultValue||"";En.setValue(Sn,{value:Ln});break}default:continue}const On=document.querySelector(`[data-element-id="${Sn}"]`);if(On){if(!j.has(On)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Sn}`);continue}}else continue;On.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Nn=this.linkService.eventBus)==null||Nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:yn,name:"ResetForm"}})),!1}}}Et=new WeakSet,Xn=function(){this.container.setAttribute("data-internal-link","")},kt=new WeakSet,Ao=function(ht,wt){ht.href=this.linkService.getAnchorUrl(""),ht.onclick=()=>(this.linkService.executeSetOCGState(wt),!1),jt(this,Et,Xn).call(this)};class st extends et{constructor(Rt){super(Rt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Rt=document.createElement("img");return Rt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Rt.alt="[{{type}} Annotation]",Rt.dataset.l10nId="text_annotation_type",Rt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Rt),this.container}}class tt extends et{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Rt){var ht;this.data.hasOwnCanvas&&(((ht=Rt.previousSibling)==null?void 0:ht.nodeName)==="CANVAS"&&(Rt.previousSibling.hidden=!0),Rt.hidden=!1)}_getKeyModifier(Rt){const{isWin:ht,isMac:wt}=s.FeatureTest.platform;return ht&&Rt.ctrlKey||wt&&Rt.metaKey}_setEventListener(Rt,ht,wt,It,Dt){wt.includes("mouse")?Rt.addEventListener(wt,Ht=>{var Jt;(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:It,value:Dt(Ht),shift:Ht.shiftKey,modifier:this._getKeyModifier(Ht)}})}):Rt.addEventListener(wt,Ht=>{var Jt;if(wt==="blur"){if(!ht.focused||!Ht.relatedTarget)return;ht.focused=!1}else if(wt==="focus"){if(ht.focused)return;ht.focused=!0}Dt&&((Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:It,value:Dt(Ht)}}))})}_setEventListeners(Rt,ht,wt,It){var Dt,Ht,Jt;for(const[ln,En]of wt)(En==="Action"||(Dt=this.data.actions)!=null&&Dt[En])&&((En==="Focus"||En==="Blur")&&(ht||(ht={focused:!1})),this._setEventListener(Rt,ht,ln,En,It),En==="Focus"&&!((Ht=this.data.actions)!=null&&Ht.Blur)?this._setEventListener(Rt,ht,"blur","Blur",null):En==="Blur"&&!((Jt=this.data.actions)!=null&&Jt.Focus)&&this._setEventListener(Rt,ht,"focus","Focus",null))}_setBackgroundColor(Rt){const ht=this.data.backgroundColor||null;Rt.style.backgroundColor=ht===null?"transparent":s.Util.makeHexColor(ht[0],ht[1],ht[2])}_setTextStyle(Rt){const ht=["left","center","right"],{fontColor:wt}=this.data.defaultAppearanceData,It=this.data.defaultAppearanceData.fontSize||b,Dt=Rt.style;let Ht;const Jt=2,ln=En=>Math.round(10*En)/10;if(this.data.multiLine){const En=Math.abs(this.data.rect[3]-this.data.rect[1]-Jt),yn=Math.round(En/(s.LINE_FACTOR*It))||1,Nn=En/yn;Ht=Math.min(It,ln(Nn/s.LINE_FACTOR))}else{const En=Math.abs(this.data.rect[3]-this.data.rect[1]-Jt);Ht=Math.min(It,ln(En/s.LINE_FACTOR))}Dt.fontSize=`calc(${Ht}px * var(--scale-factor))`,Dt.color=s.Util.makeHexColor(wt[0],wt[1],wt[2]),this.data.textAlignment!==null&&(Dt.textAlign=ht[this.data.textAlignment])}_setRequired(Rt,ht){ht?Rt.setAttribute("required",!0):Rt.removeAttribute("required"),Rt.setAttribute("aria-required",ht)}}class nt extends tt{constructor(Rt){const ht=Rt.renderForms||!Rt.data.hasAppearance&&!!Rt.data.fieldValue;super(Rt,{isRenderable:ht})}setPropertyOnSiblings(Rt,ht,wt,It){const Dt=this.annotationStorage;for(const Ht of this._getElementsByName(Rt.name,Rt.id))Ht.domElement&&(Ht.domElement[ht]=wt),Dt.setValue(Ht.id,{[It]:wt})}render(){var It,Dt;const Rt=this.annotationStorage,ht=this.data.id;this.container.classList.add("textWidgetAnnotation");let wt=null;if(this.renderForms){const Ht=Rt.getValue(ht,{value:this.data.fieldValue});let Jt=Ht.value||"";const ln=Rt.getValue(ht,{charLimit:this.data.maxLen}).charLimit;ln&&Jt.length>ln&&(Jt=Jt.slice(0,ln));let En=Ht.formattedValue||((It=this.data.textContent)==null?void 0:It.join(`
`))||null;En&&this.data.comb&&(En=En.replaceAll(/\s+/g,""));const yn={userValue:Jt,formattedValue:En,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(wt=document.createElement("textarea"),wt.textContent=En??Jt,this.data.doNotScroll&&(wt.style.overflowY="hidden")):(wt=document.createElement("input"),wt.type="text",wt.setAttribute("value",En??Jt),this.data.doNotScroll&&(wt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(wt.hidden=!0),j.add(wt),wt.setAttribute("data-element-id",ht),wt.disabled=this.data.readOnly,wt.name=this.data.fieldName,wt.tabIndex=_,this._setRequired(wt,this.data.required),ln&&(wt.maxLength=ln),wt.addEventListener("input",An=>{Rt.setValue(ht,{value:An.target.value}),this.setPropertyOnSiblings(wt,"value",An.target.value,"value"),yn.formattedValue=null}),wt.addEventListener("resetform",An=>{const Sn=this.data.defaultFieldValue??"";wt.value=yn.userValue=Sn,yn.formattedValue=null});let Nn=An=>{const{formattedValue:Sn}=yn;Sn!=null&&(An.target.value=Sn),An.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){wt.addEventListener("focus",Sn=>{if(yn.focused)return;const{target:On}=Sn;yn.userValue&&(On.value=yn.userValue),yn.lastCommittedValue=On.value,yn.commitKey=1,yn.focused=!0}),wt.addEventListener("updatefromsandbox",Sn=>{this.showElementAndHideCanvas(Sn.target);const On={value(Ln){yn.userValue=Ln.detail.value??"",Rt.setValue(ht,{value:yn.userValue.toString()}),Ln.target.value=yn.userValue},formattedValue(Ln){const{formattedValue:Fn}=Ln.detail;yn.formattedValue=Fn,Fn!=null&&Ln.target!==document.activeElement&&(Ln.target.value=Fn),Rt.setValue(ht,{formattedValue:Fn})},selRange(Ln){Ln.target.setSelectionRange(...Ln.detail.selRange)},charLimit:Ln=>{var $n;const{charLimit:Fn}=Ln.detail,{target:Un}=Ln;if(Fn===0){Un.removeAttribute("maxLength");return}Un.setAttribute("maxLength",Fn);let Kn=yn.userValue;!Kn||Kn.length<=Fn||(Kn=Kn.slice(0,Fn),Un.value=yn.userValue=Kn,Rt.setValue(ht,{value:Kn}),($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Kn,willCommit:!0,commitKey:1,selStart:Un.selectionStart,selEnd:Un.selectionEnd}}))}};this._dispatchEventFromSandbox(On,Sn)}),wt.addEventListener("keydown",Sn=>{var Fn;yn.commitKey=1;let On=-1;if(Sn.key==="Escape"?On=0:Sn.key==="Enter"&&!this.data.multiLine?On=2:Sn.key==="Tab"&&(yn.commitKey=3),On===-1)return;const{value:Ln}=Sn.target;yn.lastCommittedValue!==Ln&&(yn.lastCommittedValue=Ln,yn.userValue=Ln,(Fn=this.linkService.eventBus)==null||Fn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Ln,willCommit:!0,commitKey:On,selStart:Sn.target.selectionStart,selEnd:Sn.target.selectionEnd}}))});const An=Nn;Nn=null,wt.addEventListener("blur",Sn=>{var Ln;if(!yn.focused||!Sn.relatedTarget)return;yn.focused=!1;const{value:On}=Sn.target;yn.userValue=On,yn.lastCommittedValue!==On&&((Ln=this.linkService.eventBus)==null||Ln.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:On,willCommit:!0,commitKey:yn.commitKey,selStart:Sn.target.selectionStart,selEnd:Sn.target.selectionEnd}})),An(Sn)}),(Dt=this.data.actions)!=null&&Dt.Keystroke&&wt.addEventListener("beforeinput",Sn=>{var qn;yn.lastCommittedValue=null;const{data:On,target:Ln}=Sn,{value:Fn,selectionStart:Un,selectionEnd:Kn}=Ln;let $n=Un,Vn=Kn;switch(Sn.inputType){case"deleteWordBackward":{const Yn=Fn.substring(0,Un).match(/\w*[^\w]*$/);Yn&&($n-=Yn[0].length);break}case"deleteWordForward":{const Yn=Fn.substring(Un).match(/^[^\w]*\w*/);Yn&&(Vn+=Yn[0].length);break}case"deleteContentBackward":Un===Kn&&($n-=1);break;case"deleteContentForward":Un===Kn&&(Vn+=1);break}Sn.preventDefault(),(qn=this.linkService.eventBus)==null||qn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Fn,change:On||"",willCommit:!1,selStart:$n,selEnd:Vn}})}),this._setEventListeners(wt,yn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Sn=>Sn.target.value)}if(Nn&&wt.addEventListener("blur",Nn),this.data.comb){const Sn=(this.data.rect[2]-this.data.rect[0])/ln;wt.classList.add("comb"),wt.style.letterSpacing=`calc(${Sn}px * var(--scale-factor) - 1ch)`}}else wt=document.createElement("div"),wt.textContent=this.data.fieldValue,wt.style.verticalAlign="middle",wt.style.display="table-cell";return this._setTextStyle(wt),this._setBackgroundColor(wt),this._setDefaultPropertiesFromJS(wt),this.container.append(wt),this.container}}class it extends tt{constructor(Rt){super(Rt,{isRenderable:!!Rt.data.hasOwnCanvas})}}class pt extends tt{constructor(Rt){super(Rt,{isRenderable:Rt.renderForms})}render(){const Rt=this.annotationStorage,ht=this.data,wt=ht.id;let It=Rt.getValue(wt,{value:ht.exportValue===ht.fieldValue}).value;typeof It=="string"&&(It=It!=="Off",Rt.setValue(wt,{value:It})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Dt=document.createElement("input");return j.add(Dt),Dt.setAttribute("data-element-id",wt),Dt.disabled=ht.readOnly,this._setRequired(Dt,this.data.required),Dt.type="checkbox",Dt.name=ht.fieldName,It&&Dt.setAttribute("checked",!0),Dt.setAttribute("exportValue",ht.exportValue),Dt.tabIndex=_,Dt.addEventListener("change",Ht=>{const{name:Jt,checked:ln}=Ht.target;for(const En of this._getElementsByName(Jt,wt)){const yn=ln&&En.exportValue===ht.exportValue;En.domElement&&(En.domElement.checked=yn),Rt.setValue(En.id,{value:yn})}Rt.setValue(wt,{value:ln})}),Dt.addEventListener("resetform",Ht=>{const Jt=ht.defaultFieldValue||"Off";Ht.target.checked=Jt===ht.exportValue}),this.enableScripting&&this.hasJSActions&&(Dt.addEventListener("updatefromsandbox",Ht=>{const Jt={value(ln){ln.target.checked=ln.detail.value!=="Off",Rt.setValue(wt,{value:ln.target.checked})}};this._dispatchEventFromSandbox(Jt,Ht)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ht=>Ht.target.checked)),this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class lt extends tt{constructor(Rt){super(Rt,{isRenderable:Rt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Rt=this.annotationStorage,ht=this.data,wt=ht.id;let It=Rt.getValue(wt,{value:ht.fieldValue===ht.buttonValue}).value;typeof It=="string"&&(It=It!==ht.buttonValue,Rt.setValue(wt,{value:It}));const Dt=document.createElement("input");if(j.add(Dt),Dt.setAttribute("data-element-id",wt),Dt.disabled=ht.readOnly,this._setRequired(Dt,this.data.required),Dt.type="radio",Dt.name=ht.fieldName,It&&Dt.setAttribute("checked",!0),Dt.tabIndex=_,Dt.addEventListener("change",Ht=>{const{name:Jt,checked:ln}=Ht.target;for(const En of this._getElementsByName(Jt,wt))Rt.setValue(En.id,{value:!1});Rt.setValue(wt,{value:ln})}),Dt.addEventListener("resetform",Ht=>{const Jt=ht.defaultFieldValue;Ht.target.checked=Jt!=null&&Jt===ht.buttonValue}),this.enableScripting&&this.hasJSActions){const Ht=ht.buttonValue;Dt.addEventListener("updatefromsandbox",Jt=>{const ln={value:En=>{const yn=Ht===En.detail.value;for(const Nn of this._getElementsByName(En.target.name)){const An=yn&&Nn.id===wt;Nn.domElement&&(Nn.domElement.checked=An),Rt.setValue(Nn.id,{value:An})}}};this._dispatchEventFromSandbox(ln,Jt)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Jt=>Jt.target.checked)}return this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class at extends rt{constructor(Rt){super(Rt,{ignoreBorder:Rt.data.hasAppearance})}render(){const Rt=super.render();Rt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Rt.title=this.data.alternativeText);const ht=Rt.lastChild;return this.enableScripting&&this.hasJSActions&&ht&&(this._setDefaultPropertiesFromJS(ht),ht.addEventListener("updatefromsandbox",wt=>{this._dispatchEventFromSandbox({},wt)})),Rt}}class At extends tt{constructor(Rt){super(Rt,{isRenderable:Rt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Rt=this.annotationStorage,ht=this.data.id,wt=Rt.getValue(ht,{value:this.data.fieldValue}),It=document.createElement("select");j.add(It),It.setAttribute("data-element-id",ht),It.disabled=this.data.readOnly,this._setRequired(It,this.data.required),It.name=this.data.fieldName,It.tabIndex=_;let Dt=this.data.combo&&this.data.options.length>0;this.data.combo||(It.size=this.data.options.length,this.data.multiSelect&&(It.multiple=!0)),It.addEventListener("resetform",yn=>{const Nn=this.data.defaultFieldValue;for(const An of It.options)An.selected=An.value===Nn});for(const yn of this.data.options){const Nn=document.createElement("option");Nn.textContent=yn.displayValue,Nn.value=yn.exportValue,wt.value.includes(yn.exportValue)&&(Nn.setAttribute("selected",!0),Dt=!1),It.append(Nn)}let Ht=null;if(Dt){const yn=document.createElement("option");yn.value=" ",yn.setAttribute("hidden",!0),yn.setAttribute("selected",!0),It.prepend(yn),Ht=()=>{yn.remove(),It.removeEventListener("input",Ht),Ht=null},It.addEventListener("input",Ht)}const Jt=yn=>{const Nn=yn?"value":"textContent",{options:An,multiple:Sn}=It;return Sn?Array.prototype.filter.call(An,On=>On.selected).map(On=>On[Nn]):An.selectedIndex===-1?null:An[An.selectedIndex][Nn]};let ln=Jt(!1);const En=yn=>{const Nn=yn.target.options;return Array.prototype.map.call(Nn,An=>({displayValue:An.textContent,exportValue:An.value}))};return this.enableScripting&&this.hasJSActions?(It.addEventListener("updatefromsandbox",yn=>{const Nn={value(An){Ht==null||Ht();const Sn=An.detail.value,On=new Set(Array.isArray(Sn)?Sn:[Sn]);for(const Ln of It.options)Ln.selected=On.has(Ln.value);Rt.setValue(ht,{value:Jt(!0)}),ln=Jt(!1)},multipleSelection(An){It.multiple=!0},remove(An){const Sn=It.options,On=An.detail.remove;Sn[On].selected=!1,It.remove(On),Sn.length>0&&Array.prototype.findIndex.call(Sn,Fn=>Fn.selected)===-1&&(Sn[0].selected=!0),Rt.setValue(ht,{value:Jt(!0),items:En(An)}),ln=Jt(!1)},clear(An){for(;It.length!==0;)It.remove(0);Rt.setValue(ht,{value:null,items:[]}),ln=Jt(!1)},insert(An){const{index:Sn,displayValue:On,exportValue:Ln}=An.detail.insert,Fn=It.children[Sn],Un=document.createElement("option");Un.textContent=On,Un.value=Ln,Fn?Fn.before(Un):It.append(Un),Rt.setValue(ht,{value:Jt(!0),items:En(An)}),ln=Jt(!1)},items(An){const{items:Sn}=An.detail;for(;It.length!==0;)It.remove(0);for(const On of Sn){const{displayValue:Ln,exportValue:Fn}=On,Un=document.createElement("option");Un.textContent=Ln,Un.value=Fn,It.append(Un)}It.options.length>0&&(It.options[0].selected=!0),Rt.setValue(ht,{value:Jt(!0),items:En(An)}),ln=Jt(!1)},indices(An){const Sn=new Set(An.detail.indices);for(const On of An.target.options)On.selected=Sn.has(On.index);Rt.setValue(ht,{value:Jt(!0)}),ln=Jt(!1)},editable(An){An.target.disabled=!An.detail.editable}};this._dispatchEventFromSandbox(Nn,yn)}),It.addEventListener("input",yn=>{var An;const Nn=Jt(!0);Rt.setValue(ht,{value:Nn}),yn.preventDefault(),(An=this.linkService.eventBus)==null||An.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:ln,changeEx:Nn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(It,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],yn=>yn.target.value)):It.addEventListener("input",function(yn){Rt.setValue(ht,{value:Jt(!0)})}),this.data.combo&&this._setTextStyle(It),this._setBackgroundColor(It),this._setDefaultPropertiesFromJS(It),this.container.append(It),this.container}}class vt extends et{constructor(Rt){const{data:ht,elements:wt}=Rt;super(Rt,{isRenderable:et._hasPopupData(ht)}),this.elements=wt}render(){this.container.classList.add("popupAnnotation");const Rt=new ft({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),ht=[];for(const wt of this.elements)wt.popup=Rt,ht.push(wt.data.id),wt.addHighlightArea();return this.container.setAttribute("aria-controls",ht.map(wt=>`${s.AnnotationPrefix}${wt}`).join(",")),this.container}}class ft{constructor({container:Rt,color:ht,elements:wt,titleObj:It,modificationDate:Dt,contentsObj:Ht,richText:Jt,parent:ln,rect:En,parentRect:yn,open:Nn}){Nt(this,gn);Nt(this,kn);Nt(this,Rn);Nt(this,Mn);Nt(this,Pt,null);Nt(this,qt,jt(this,gn,So).bind(this));Nt(this,Vt,jt(this,Mn,qr).bind(this));Nt(this,Qt,jt(this,Rn,Wr).bind(this));Nt(this,tn,jt(this,kn,yr).bind(this));Nt(this,on,null);Nt(this,Zt,null);Nt(this,pn,null);Nt(this,Tn,null);Nt(this,dn,null);Nt(this,Cn,null);Nt(this,sn,!1);Nt(this,Gt,null);Nt(this,Wt,null);Nt(this,Ot,null);Nt(this,Xt,null);Nt(this,nn,!1);var Sn;Yt(this,Zt,Rt),Yt(this,Xt,It),Yt(this,pn,Ht),Yt(this,Ot,Jt),Yt(this,dn,ln),Yt(this,on,ht),Yt(this,Wt,En),Yt(this,Cn,yn),Yt(this,Tn,wt);const An=a.PDFDateString.toDateObject(Dt);An&&Yt(this,Pt,ln.l10n.get("annotation_date_string",{date:An.toLocaleDateString(),time:An.toLocaleTimeString()})),this.trigger=wt.flatMap(On=>On.getElementsToTriggerPopup());for(const On of this.trigger)On.addEventListener("click",ot(this,tn)),On.addEventListener("mouseenter",ot(this,Qt)),On.addEventListener("mouseleave",ot(this,Vt)),On.classList.add("popupTriggerArea");for(const On of wt)(Sn=On.container)==null||Sn.addEventListener("keydown",ot(this,qt));ot(this,Zt).hidden=!0,Nn&&jt(this,kn,yr).call(this)}render(){if(ot(this,Gt))return;const{page:{view:Rt},viewport:{rawDims:{pageWidth:ht,pageHeight:wt,pageX:It,pageY:Dt}}}=ot(this,dn),Ht=Yt(this,Gt,document.createElement("div"));if(Ht.className="popup",ot(this,on)){const $n=Ht.style.outlineColor=s.Util.makeHexColor(...ot(this,on));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ht.style.backgroundColor=`color-mix(in srgb, ${$n} 30%, white)`:Ht.style.backgroundColor=s.Util.makeHexColor(...ot(this,on).map(qn=>Math.floor(.7*(255-qn)+qn)))}const Jt=document.createElement("span");Jt.className="header";const ln=document.createElement("h1");if(Jt.append(ln),{dir:ln.dir,str:ln.textContent}=ot(this,Xt),Ht.append(Jt),ot(this,Pt)){const $n=document.createElement("span");$n.classList.add("popupDate"),ot(this,Pt).then(Vn=>{$n.textContent=Vn}),Jt.append($n)}const En=ot(this,pn),yn=ot(this,Ot);if(yn!=null&&yn.str&&(!(En!=null&&En.str)||En.str===yn.str))g.XfaLayer.render({xfaHtml:yn.html,intent:"richText",div:Ht}),Ht.lastChild.classList.add("richText","popupContent");else{const $n=this._formatContents(En);Ht.append($n)}let Nn=!!ot(this,Cn),An=Nn?ot(this,Cn):ot(this,Wt);for(const $n of ot(this,Tn))if(!An||s.Util.intersect($n.data.rect,An)!==null){An=$n.data.rect,Nn=!0;break}const Sn=s.Util.normalizeRect([An[0],Rt[3]-An[1]+Rt[1],An[2],Rt[3]-An[3]+Rt[1]]),Ln=Nn?An[2]-An[0]+5:0,Fn=Sn[0]+Ln,Un=Sn[1],{style:Kn}=ot(this,Zt);Kn.left=`${100*(Fn-It)/ht}%`,Kn.top=`${100*(Un-Dt)/wt}%`,ot(this,Zt).append(Ht)}_formatContents({str:Rt,dir:ht}){const wt=document.createElement("p");wt.classList.add("popupContent"),wt.dir=ht;const It=Rt.split(/(?:\r\n?|\n)/);for(let Dt=0,Ht=It.length;Dt<Ht;++Dt){const Jt=It[Dt];wt.append(document.createTextNode(Jt)),Dt<Ht-1&&wt.append(document.createElement("br"))}return wt}forceHide(){Yt(this,nn,this.isVisible),ot(this,nn)&&(ot(this,Zt).hidden=!0)}maybeShow(){ot(this,nn)&&(Yt(this,nn,!1),ot(this,Zt).hidden=!1)}get isVisible(){return ot(this,Zt).hidden===!1}}Pt=new WeakMap,qt=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,tn=new WeakMap,on=new WeakMap,Zt=new WeakMap,pn=new WeakMap,Tn=new WeakMap,dn=new WeakMap,Cn=new WeakMap,sn=new WeakMap,Gt=new WeakMap,Wt=new WeakMap,Ot=new WeakMap,Xt=new WeakMap,nn=new WeakMap,gn=new WeakSet,So=function(Rt){Rt.altKey||Rt.shiftKey||Rt.ctrlKey||Rt.metaKey||(Rt.key==="Enter"||Rt.key==="Escape"&&ot(this,sn))&&jt(this,kn,yr).call(this)},kn=new WeakSet,yr=function(){Yt(this,sn,!ot(this,sn)),ot(this,sn)?(jt(this,Rn,Wr).call(this),ot(this,Zt).addEventListener("click",ot(this,tn)),ot(this,Zt).addEventListener("keydown",ot(this,qt))):(jt(this,Mn,qr).call(this),ot(this,Zt).removeEventListener("click",ot(this,tn)),ot(this,Zt).removeEventListener("keydown",ot(this,qt)))},Rn=new WeakSet,Wr=function(){ot(this,Gt)||this.render(),this.isVisible?ot(this,sn)&&ot(this,Zt).classList.add("focused"):(ot(this,Zt).hidden=!1,ot(this,Zt).style.zIndex=parseInt(ot(this,Zt).style.zIndex)+1e3)},Mn=new WeakSet,qr=function(){ot(this,Zt).classList.remove("focused"),!(ot(this,sn)||!this.isVisible)&&(ot(this,Zt).hidden=!0,ot(this,Zt).style.zIndex=parseInt(ot(this,Zt).style.zIndex)-1e3)};class mt extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Rt.data.textContent,this.textPosition=Rt.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Rt=document.createElement("div");Rt.classList.add("annotationTextContent"),Rt.setAttribute("role","comment");for(const ht of this.textContent){const wt=document.createElement("span");wt.textContent=ht,Rt.append(wt)}this.container.append(Rt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=mt;class yt extends et{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Nt(this,zt,null)}render(){this.container.classList.add("lineAnnotation");const ht=this.data,{width:wt,height:It}=_e(ht.rect),Dt=this.svgFactory.create(wt,It,!0),Ht=Yt(this,zt,this.svgFactory.createElement("svg:line"));return Ht.setAttribute("x1",ht.rect[2]-ht.lineCoordinates[0]),Ht.setAttribute("y1",ht.rect[3]-ht.lineCoordinates[1]),Ht.setAttribute("x2",ht.rect[2]-ht.lineCoordinates[2]),Ht.setAttribute("y2",ht.rect[3]-ht.lineCoordinates[3]),Ht.setAttribute("stroke-width",ht.borderStyle.width||1),Ht.setAttribute("stroke","transparent"),Ht.setAttribute("fill","transparent"),Dt.append(Ht),this.container.append(Dt),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class bt extends et{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Nt(this,Ft,null)}render(){this.container.classList.add("squareAnnotation");const ht=this.data,{width:wt,height:It}=_e(ht.rect),Dt=this.svgFactory.create(wt,It,!0),Ht=ht.borderStyle.width,Jt=Yt(this,Ft,this.svgFactory.createElement("svg:rect"));return Jt.setAttribute("x",Ht/2),Jt.setAttribute("y",Ht/2),Jt.setAttribute("width",wt-Ht),Jt.setAttribute("height",It-Ht),Jt.setAttribute("stroke-width",Ht||1),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Dt.append(Jt),this.container.append(Dt),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,Ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ft=new WeakMap;class Mt extends et{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Nt(this,cn,null)}render(){this.container.classList.add("circleAnnotation");const ht=this.data,{width:wt,height:It}=_e(ht.rect),Dt=this.svgFactory.create(wt,It,!0),Ht=ht.borderStyle.width,Jt=Yt(this,cn,this.svgFactory.createElement("svg:ellipse"));return Jt.setAttribute("cx",wt/2),Jt.setAttribute("cy",It/2),Jt.setAttribute("rx",wt/2-Ht/2),Jt.setAttribute("ry",It/2-Ht/2),Jt.setAttribute("stroke-width",Ht||1),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Dt.append(Jt),this.container.append(Dt),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,cn)}addHighlightArea(){this.container.classList.add("highlightArea")}}cn=new WeakMap;class Tt extends et{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Nt(this,hn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const ht=this.data,{width:wt,height:It}=_e(ht.rect),Dt=this.svgFactory.create(wt,It,!0);let Ht=[];for(const ln of ht.vertices){const En=ln.x-ht.rect[0],yn=ht.rect[3]-ln.y;Ht.push(En+","+yn)}Ht=Ht.join(" ");const Jt=Yt(this,hn,this.svgFactory.createElement(this.svgElementName));return Jt.setAttribute("points",Ht),Jt.setAttribute("stroke-width",ht.borderStyle.width||1),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Dt.append(Jt),this.container.append(Dt),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,hn)}addHighlightArea(){this.container.classList.add("highlightArea")}}hn=new WeakMap;class Lt extends Tt{constructor(Rt){super(Rt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Bt extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Kt extends et{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Nt(this,Hn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const ht=this.data,{width:wt,height:It}=_e(ht.rect),Dt=this.svgFactory.create(wt,It,!0);for(const Ht of ht.inkLists){let Jt=[];for(const En of Ht){const yn=En.x-ht.rect[0],Nn=ht.rect[3]-En.y;Jt.push(`${yn},${Nn}`)}Jt=Jt.join(" ");const ln=this.svgFactory.createElement(this.svgElementName);ot(this,Hn).push(ln),ln.setAttribute("points",Jt),ln.setAttribute("stroke-width",ht.borderStyle.width||1),ln.setAttribute("stroke","transparent"),ln.setAttribute("fill","transparent"),!ht.popupRef&&this.hasPopupData&&this._createPopup(),Dt.append(ln)}return this.container.append(Dt),this.container}getElementsToTriggerPopup(){return ot(this,Hn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hn=new WeakMap,e.InkAnnotationElement=Kt;class _t extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Ut extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class St extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rn extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class an extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=an;class dt extends et{constructor(ht){var Dt;super(ht,{isRenderable:!0});Nt(this,$t);Nt(this,Bn,null);const{filename:wt,content:It}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(wt,!0),this.content=It,(Dt=this.linkService.eventBus)==null||Dt.dispatch("fileattachmentannotation",{source:this,filename:wt,content:It})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:ht,data:wt}=this;let It;wt.hasAppearance||wt.fillAlpha===0?It=document.createElement("div"):(It=document.createElement("img"),It.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(wt.name)?"paperclip":"pushpin"}.svg`,wt.fillAlpha&&wt.fillAlpha<1&&(It.style=`filter: opacity(${Math.round(wt.fillAlpha*100)}%);`)),It.addEventListener("dblclick",jt(this,$t,Yr).bind(this)),Yt(this,Bn,It);const{isMac:Dt}=s.FeatureTest.platform;return ht.addEventListener("keydown",Ht=>{Ht.key==="Enter"&&(Dt?Ht.metaKey:Ht.ctrlKey)&&jt(this,$t,Yr).call(this)}),!wt.popupRef&&this.hasPopupData?this._createPopup():It.classList.add("popupTriggerArea"),ht.append(It),ht}getElementsToTriggerPopup(){return ot(this,Bn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bn=new WeakMap,$t=new WeakSet,Yr=function(){var ht;(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,this.content,this.filename)};class ct{constructor({div:Rt,accessibilityManager:ht,annotationCanvasMap:wt,l10n:It,page:Dt,viewport:Ht}){Nt(this,xn);Nt(this,un);Nt(this,_n,null);Nt(this,mn,null);Nt(this,bn,new Map);this.div=Rt,Yt(this,_n,ht),Yt(this,mn,wt),this.l10n=It,this.page=Dt,this.viewport=Ht,this.zIndex=0,this.l10n||(this.l10n=d.NullL10n)}async render(Rt){const{annotations:ht}=Rt,wt=this.div;(0,a.setLayerDimensions)(wt,this.viewport);const It=new Map,Dt={data:null,layer:wt,linkService:Rt.linkService,downloadManager:Rt.downloadManager,imageResourcesPath:Rt.imageResourcesPath||"",renderForms:Rt.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:Rt.annotationStorage||new c.AnnotationStorage,enableScripting:Rt.enableScripting===!0,hasJSActions:Rt.hasJSActions,fieldObjects:Rt.fieldObjects,parent:this,elements:null};for(const Ht of ht){if(Ht.noHTML)continue;const Jt=Ht.annotationType===s.AnnotationType.POPUP;if(Jt){const yn=It.get(Ht.id);if(!yn)continue;Dt.elements=yn}else{const{width:yn,height:Nn}=_e(Ht.rect);if(yn<=0||Nn<=0)continue}Dt.data=Ht;const ln=$.create(Dt);if(!ln.isRenderable)continue;if(!Jt&&Ht.popupRef){const yn=It.get(Ht.popupRef);yn?yn.push(ln):It.set(Ht.popupRef,[ln])}ln.annotationEditorType>0&&ot(this,bn).set(ln.data.id,ln);const En=ln.render();Ht.hidden&&(En.style.visibility="hidden"),jt(this,xn,To).call(this,En,Ht.id)}jt(this,un,Xr).call(this),await this.l10n.translate(wt)}update({viewport:Rt}){const ht=this.div;this.viewport=Rt,(0,a.setLayerDimensions)(ht,{rotation:Rt.rotation}),jt(this,un,Xr).call(this),ht.hidden=!1}getEditableAnnotations(){return Array.from(ot(this,bn).values())}getEditableAnnotation(Rt){return ot(this,bn).get(Rt)}}_n=new WeakMap,mn=new WeakMap,bn=new WeakMap,xn=new WeakSet,To=function(Rt,ht){var It;const wt=Rt.firstChild||Rt;wt.id=`${s.AnnotationPrefix}${ht}`,this.div.append(Rt),(It=ot(this,_n))==null||It.moveElementInDOM(this.div,Rt,wt,!1)},un=new WeakSet,Xr=function(){if(!ot(this,mn))return;const Rt=this.div;for(const[ht,wt]of ot(this,mn)){const It=Rt.querySelector(`[data-annotation-id="${ht}"]`);if(!It)continue;const{firstChild:Dt}=It;Dt?Dt.nodeName==="CANVAS"?Dt.replaceWith(wt):Dt.before(wt):It.append(wt)}ot(this,mn).clear()},e.AnnotationLayer=ct},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function o(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function s(c){return Math.max(0,Math.min(255,255*c))}class a{static CMYK_G([h,d,g,_]){return["G",1-Math.min(1,.3*h+.59*g+.11*d+_)]}static G_CMYK([h]){return["CMYK",0,0,0,1-h]}static G_RGB([h]){return["RGB",h,h,h]}static G_rgb([h]){return h=s(h),[h,h,h]}static G_HTML([h]){const d=o(h);return`#${d}${d}${d}`}static RGB_G([h,d,g]){return["G",.3*h+.59*d+.11*g]}static RGB_rgb(h){return h.map(s)}static RGB_HTML(h){return`#${h.map(o).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([h,d,g,_]){return["RGB",1-Math.min(1,h+_),1-Math.min(1,g+_),1-Math.min(1,d+_)]}static CMYK_rgb([h,d,g,_]){return[s(1-Math.min(1,h+_)),s(1-Math.min(1,g+_)),s(1-Math.min(1,d+_))]}static CMYK_HTML(h){const d=this.CMYK_RGB(h).slice(1);return this.RGB_HTML(d)}static RGB_CMYK([h,d,g]){const _=1-h,b=1-d,j=1-g,_e=Math.min(_,b,j);return["CMYK",_,b,j,_e]}}e.ColorConverters=a},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=s;const o={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};o.print_progress_percent="{{progress}}%";function s(h,d){switch(h){case"find_match_count":h=`find_match_count[${d.total===1?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${d.limit===1?"one":"other"}]`;break}return o[h]||""}function a(h,d){return d?h.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,_)=>_ in d?d[_]:"{{"+_+"}}"):h}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(h,d=null,g=s(h,d)){return a(g,d)},async translate(h){}};e.NullL10n=c},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var s=o(25);class a{static setupStorage(h,d,g,_,b){const j=_.getValue(d,{value:null});switch(g.name){case"textarea":if(j.value!==null&&(h.textContent=j.value),b==="print")break;h.addEventListener("input",_e=>{_.setValue(d,{value:_e.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(j.value===g.attributes.xfaOn?h.setAttribute("checked",!0):j.value===g.attributes.xfaOff&&h.removeAttribute("checked"),b==="print")break;h.addEventListener("change",_e=>{_.setValue(d,{value:_e.target.checked?_e.target.getAttribute("xfaOn"):_e.target.getAttribute("xfaOff")})})}else{if(j.value!==null&&h.setAttribute("value",j.value),b==="print")break;h.addEventListener("input",_e=>{_.setValue(d,{value:_e.target.value})})}break;case"select":if(j.value!==null){h.setAttribute("value",j.value);for(const _e of g.children)_e.attributes.value===j.value?_e.attributes.selected=!0:_e.attributes.hasOwnProperty("selected")&&delete _e.attributes.selected}h.addEventListener("input",_e=>{const $=_e.target.options,et=$.selectedIndex===-1?"":$[$.selectedIndex].value;_.setValue(d,{value:et})});break}}static setAttributes({html:h,element:d,storage:g=null,intent:_,linkService:b}){const{attributes:j}=d,_e=h instanceof HTMLAnchorElement;j.type==="radio"&&(j.name=`${j.name}-${_}`);for(const[$,et]of Object.entries(j))if(et!=null)switch($){case"class":et.length&&h.setAttribute($,et.join(" "));break;case"dataId":break;case"id":h.setAttribute("data-element-id",et);break;case"style":Object.assign(h.style,et);break;case"textContent":h.textContent=et;break;default:(!_e||$!=="href"&&$!=="newWindow")&&h.setAttribute($,et)}_e&&b.addLinkAttributes(h,j.href,j.newWindow),g&&j.dataId&&this.setupStorage(h,j.dataId,d,g)}static render(h){var rt;const d=h.annotationStorage,g=h.linkService,_=h.xfaHtml,b=h.intent||"display",j=document.createElement(_.name);_.attributes&&this.setAttributes({html:j,element:_,intent:b,linkService:g});const _e=[[_,-1,j]],$=h.div;if($.append(j),h.viewport){const st=`matrix(${h.viewport.transform.join(",")})`;$.style.transform=st}b!=="richText"&&$.setAttribute("class","xfaLayer xfaFont");const et=[];for(;_e.length>0;){const[st,tt,nt]=_e.at(-1);if(tt+1===st.children.length){_e.pop();continue}const it=st.children[++_e.at(-1)[1]];if(it===null)continue;const{name:pt}=it;if(pt==="#text"){const at=document.createTextNode(it.value);et.push(at),nt.append(at);continue}const lt=(rt=it==null?void 0:it.attributes)!=null&&rt.xmlns?document.createElementNS(it.attributes.xmlns,pt):document.createElement(pt);if(nt.append(lt),it.attributes&&this.setAttributes({html:lt,element:it,storage:d,intent:b,linkService:g}),it.children&&it.children.length>0)_e.push([it,-1,lt]);else if(it.value){const at=document.createTextNode(it.value);s.XfaText.shouldBuildText(pt)&&et.push(at),lt.append(at)}}for(const st of $.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))st.setAttribute("readOnly",!0);return{textDivs:et}}static update(h){const d=`matrix(${h.viewport.transform.join(",")})`;h.div.style.transform=d,h.div.hidden=!1}}e.XfaLayer=a},(i,e,o)=>{var _,b,j,_e,$,et,rt,st,tt,nt,it,pt,lt,at,At,wo,ft,ko,yt,_o,Mt,bo,Lt,Qr,Kt,xo,Ut,Jr,rn,Ro,dt,Io,gt,Po,Et,Mo,kt,Oo,Pt,Wn,Vt,Zr,tn,Er,Zt,vr,Tn,er,Cn,_i,Gt,Cr,Ot,No,nn,eo,vn,Lo,Pn,Do,In,to,en,Ar,Ft,tr;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var s=o(1),a=o(4),c=o(29),h=o(6),d=o(5);const hn=class hn extends a.AnnotationEditor{constructor($t){super({...$t,name:"inkEditor"});Nt(this,At);Nt(this,ft);Nt(this,yt);Nt(this,Mt);Nt(this,Lt);Nt(this,Kt);Nt(this,Ut);Nt(this,rn);Nt(this,dt);Nt(this,gt);Nt(this,Et);Nt(this,kt);Nt(this,Pt);Nt(this,Vt);Nt(this,tn);Nt(this,Zt);Nt(this,Tn);Nt(this,Cn);Nt(this,Gt);Nt(this,Pn);Nt(this,In);Nt(this,en);Nt(this,Ft);Nt(this,_,0);Nt(this,b,0);Nt(this,j,this.canvasPointermove.bind(this));Nt(this,_e,this.canvasPointerleave.bind(this));Nt(this,$,this.canvasPointerup.bind(this));Nt(this,et,this.canvasPointerdown.bind(this));Nt(this,rt,new Path2D);Nt(this,st,!1);Nt(this,tt,!1);Nt(this,nt,!1);Nt(this,it,null);Nt(this,pt,0);Nt(this,lt,0);Nt(this,at,null);this.color=$t.color||null,this.thickness=$t.thickness||null,this.opacity=$t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize($t){a.AnnotationEditor.initialize($t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams($t,fn){switch($t){case s.AnnotationEditorParamsType.INK_THICKNESS:hn._defaultThickness=fn;break;case s.AnnotationEditorParamsType.INK_COLOR:hn._defaultColor=fn;break;case s.AnnotationEditorParamsType.INK_OPACITY:hn._defaultOpacity=fn/100;break}}updateParams($t,fn){switch($t){case s.AnnotationEditorParamsType.INK_THICKNESS:jt(this,At,wo).call(this,fn);break;case s.AnnotationEditorParamsType.INK_COLOR:jt(this,ft,ko).call(this,fn);break;case s.AnnotationEditorParamsType.INK_OPACITY:jt(this,yt,_o).call(this,fn);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,hn._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,hn._defaultColor||a.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(hn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||hn._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||hn._defaultColor||a.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??hn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(jt(this,tn,Er).call(this),jt(this,Zt,vr).call(this)),this.isAttachedToDOM||(this.parent.add(this),jt(this,Tn,er).call(this)),jt(this,Ft,tr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ot(this,it).disconnect(),Yt(this,it,null),super.remove())}setParent($t){!this.parent&&$t?this._uiManager.removeShouldRescale(this):this.parent&&$t===null&&this._uiManager.addShouldRescale(this),super.setParent($t)}onScaleChanging(){const[$t,fn]=this.parentDimensions,_n=this.width*$t,mn=this.height*fn;this.setDimensions(_n,mn)}enableEditMode(){ot(this,st)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",ot(this,et)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ot(this,et)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){ot(this,st)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Yt(this,st,!0),this.div.classList.add("disabled"),jt(this,Ft,tr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin($t){this._focusEventsAllowed&&(super.focusin($t),this.enableEditMode())}canvasPointerdown($t){$t.button!==0||!this.isInEditMode()||ot(this,st)||(this.setInForeground(),$t.preventDefault(),$t.type!=="mouse"&&this.div.focus(),jt(this,Kt,xo).call(this,$t.offsetX,$t.offsetY))}canvasPointermove($t){$t.preventDefault(),jt(this,Ut,Jr).call(this,$t.offsetX,$t.offsetY)}canvasPointerup($t){$t.preventDefault(),jt(this,Vt,Zr).call(this,$t)}canvasPointerleave($t){jt(this,Vt,Zr).call(this,$t)}get isResizable(){return!this.isEmpty()&&ot(this,st)}render(){if(this.div)return this.div;let $t,fn;this.width&&($t=this.x,fn=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(jn=>{var un;return(un=this.div)==null?void 0:un.setAttribute("aria-label",jn)});const[_n,mn,bn,xn]=jt(this,Mt,bo).call(this);if(this.setAt(_n,mn,0,0),this.setDims(bn,xn),jt(this,tn,Er).call(this),this.width){const[jn,un]=this.parentDimensions;this.setAspectRatio(this.width*jn,this.height*un),this.setAt($t*jn,fn*un,this.width*jn,this.height*un),Yt(this,nt,!0),jt(this,Tn,er).call(this),this.setDims(this.width*jn,this.height*un),jt(this,Pt,Wn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return jt(this,Zt,vr).call(this),this.div}setDimensions($t,fn){const _n=Math.round($t),mn=Math.round(fn);if(ot(this,pt)===_n&&ot(this,lt)===mn)return;Yt(this,pt,_n),Yt(this,lt,mn),this.canvas.style.visibility="hidden";const[bn,xn]=this.parentDimensions;this.width=$t/bn,this.height=fn/xn,this.fixAndSetPosition(),ot(this,st)&&jt(this,Cn,_i).call(this,$t,fn),jt(this,Tn,er).call(this),jt(this,Pt,Wn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize($t,fn,_n){var Dt,Ht,Jt;if($t instanceof c.InkAnnotationElement)return null;const mn=super.deserialize($t,fn,_n);mn.thickness=$t.thickness,mn.color=s.Util.makeHexColor(...$t.color),mn.opacity=$t.opacity;const[bn,xn]=mn.pageDimensions,jn=mn.width*bn,un=mn.height*xn,Dn=mn.parentScale,wn=$t.thickness/2;Yt(mn,st,!0),Yt(mn,pt,Math.round(jn)),Yt(mn,lt,Math.round(un));const{paths:Rt,rect:ht,rotation:wt}=$t;for(let{bezier:ln}of Rt){ln=jt(Dt=hn,vn,Lo).call(Dt,ln,ht,wt);const En=[];mn.paths.push(En);let yn=Dn*(ln[0]-wn),Nn=Dn*(ln[1]-wn);for(let Sn=2,On=ln.length;Sn<On;Sn+=6){const Ln=Dn*(ln[Sn]-wn),Fn=Dn*(ln[Sn+1]-wn),Un=Dn*(ln[Sn+2]-wn),Kn=Dn*(ln[Sn+3]-wn),$n=Dn*(ln[Sn+4]-wn),Vn=Dn*(ln[Sn+5]-wn);En.push([[yn,Nn],[Ln,Fn],[Un,Kn],[$n,Vn]]),yn=$n,Nn=Vn}const An=jt(this,Ot,No).call(this,En);mn.bezierPath2D.push(An)}const It=jt(Ht=mn,In,to).call(Ht);return Yt(mn,b,Math.max(a.AnnotationEditor.MIN_SIZE,It[2]-It[0])),Yt(mn,_,Math.max(a.AnnotationEditor.MIN_SIZE,It[3]-It[1])),jt(Jt=mn,Cn,_i).call(Jt,jn,un),mn}serialize(){if(this.isEmpty())return null;const $t=this.getRect(0,0),fn=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:fn,thickness:this.thickness,opacity:this.opacity,paths:jt(this,Pn,Do).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,$t),pageIndex:this.pageIndex,rect:$t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};_=new WeakMap,b=new WeakMap,j=new WeakMap,_e=new WeakMap,$=new WeakMap,et=new WeakMap,rt=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,pt=new WeakMap,lt=new WeakMap,at=new WeakMap,At=new WeakSet,wo=function($t){const fn=this.thickness;this.addCommands({cmd:()=>{this.thickness=$t,jt(this,Ft,tr).call(this)},undo:()=>{this.thickness=fn,jt(this,Ft,tr).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ft=new WeakSet,ko=function($t){const fn=this.color;this.addCommands({cmd:()=>{this.color=$t,jt(this,Pt,Wn).call(this)},undo:()=>{this.color=fn,jt(this,Pt,Wn).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yt=new WeakSet,_o=function($t){$t/=100;const fn=this.opacity;this.addCommands({cmd:()=>{this.opacity=$t,jt(this,Pt,Wn).call(this)},undo:()=>{this.opacity=fn,jt(this,Pt,Wn).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Mt=new WeakSet,bo=function(){const{parentRotation:$t,parentDimensions:[fn,_n]}=this;switch($t){case 90:return[0,_n,_n,fn];case 180:return[fn,_n,fn,_n];case 270:return[fn,0,_n,fn];default:return[0,0,fn,_n]}},Lt=new WeakSet,Qr=function(){const{ctx:$t,color:fn,opacity:_n,thickness:mn,parentScale:bn,scaleFactor:xn}=this;$t.lineWidth=mn*bn/xn,$t.lineCap="round",$t.lineJoin="round",$t.miterLimit=10,$t.strokeStyle=`${fn}${(0,d.opacityToHex)(_n)}`},Kt=new WeakSet,xo=function($t,fn){this.canvas.addEventListener("contextmenu",h.noContextMenu),this.canvas.addEventListener("pointerleave",ot(this,_e)),this.canvas.addEventListener("pointermove",ot(this,j)),this.canvas.addEventListener("pointerup",ot(this,$)),this.canvas.removeEventListener("pointerdown",ot(this,et)),this.isEditing=!0,ot(this,nt)||(Yt(this,nt,!0),jt(this,Tn,er).call(this),this.thickness||(this.thickness=hn._defaultThickness),this.color||(this.color=hn._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=hn._defaultOpacity)),this.currentPath.push([$t,fn]),Yt(this,tt,!1),jt(this,Lt,Qr).call(this),Yt(this,at,()=>{jt(this,gt,Po).call(this),ot(this,at)&&window.requestAnimationFrame(ot(this,at))}),window.requestAnimationFrame(ot(this,at))},Ut=new WeakSet,Jr=function($t,fn){const[_n,mn]=this.currentPath.at(-1);if(this.currentPath.length>1&&$t===_n&&fn===mn)return;const bn=this.currentPath;let xn=ot(this,rt);if(bn.push([$t,fn]),Yt(this,tt,!0),bn.length<=2){xn.moveTo(...bn[0]),xn.lineTo($t,fn);return}bn.length===3&&(Yt(this,rt,xn=new Path2D),xn.moveTo(...bn[0])),jt(this,Et,Mo).call(this,xn,...bn.at(-3),...bn.at(-2),$t,fn)},rn=new WeakSet,Ro=function(){if(this.currentPath.length===0)return;const $t=this.currentPath.at(-1);ot(this,rt).lineTo(...$t)},dt=new WeakSet,Io=function($t,fn){Yt(this,at,null),$t=Math.min(Math.max($t,0),this.canvas.width),fn=Math.min(Math.max(fn,0),this.canvas.height),jt(this,Ut,Jr).call(this,$t,fn),jt(this,rn,Ro).call(this);let _n;if(this.currentPath.length!==1)_n=jt(this,kt,Oo).call(this);else{const un=[$t,fn];_n=[[un,un.slice(),un.slice(),un]]}const mn=ot(this,rt),bn=this.currentPath;this.currentPath=[],Yt(this,rt,new Path2D);const xn=()=>{this.allRawPaths.push(bn),this.paths.push(_n),this.bezierPath2D.push(mn),this.rebuild()},jn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(jt(this,tn,Er).call(this),jt(this,Zt,vr).call(this)),jt(this,Ft,tr).call(this))};this.addCommands({cmd:xn,undo:jn,mustExec:!0})},gt=new WeakSet,Po=function(){if(!ot(this,tt))return;Yt(this,tt,!1);const $t=Math.ceil(this.thickness*this.parentScale),fn=this.currentPath.slice(-3),_n=fn.map(xn=>xn[0]),mn=fn.map(xn=>xn[1]);Math.min(..._n)-$t,Math.max(..._n)+$t,Math.min(...mn)-$t,Math.max(...mn)+$t;const{ctx:bn}=this;bn.save(),bn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const xn of this.bezierPath2D)bn.stroke(xn);bn.stroke(ot(this,rt)),bn.restore()},Et=new WeakSet,Mo=function($t,fn,_n,mn,bn,xn,jn){const un=(fn+mn)/2,Dn=(_n+bn)/2,wn=(mn+xn)/2,Rt=(bn+jn)/2;$t.bezierCurveTo(un+2*(mn-un)/3,Dn+2*(bn-Dn)/3,wn+2*(mn-wn)/3,Rt+2*(bn-Rt)/3,wn,Rt)},kt=new WeakSet,Oo=function(){const $t=this.currentPath;if($t.length<=2)return[[$t[0],$t[0],$t.at(-1),$t.at(-1)]];const fn=[];let _n,[mn,bn]=$t[0];for(_n=1;_n<$t.length-2;_n++){const[ht,wt]=$t[_n],[It,Dt]=$t[_n+1],Ht=(ht+It)/2,Jt=(wt+Dt)/2,ln=[mn+2*(ht-mn)/3,bn+2*(wt-bn)/3],En=[Ht+2*(ht-Ht)/3,Jt+2*(wt-Jt)/3];fn.push([[mn,bn],ln,En,[Ht,Jt]]),[mn,bn]=[Ht,Jt]}const[xn,jn]=$t[_n],[un,Dn]=$t[_n+1],wn=[mn+2*(xn-mn)/3,bn+2*(jn-bn)/3],Rt=[un+2*(xn-un)/3,Dn+2*(jn-Dn)/3];return fn.push([[mn,bn],wn,Rt,[un,Dn]]),fn},Pt=new WeakSet,Wn=function(){if(this.isEmpty()){jt(this,Gt,Cr).call(this);return}jt(this,Lt,Qr).call(this);const{canvas:$t,ctx:fn}=this;fn.setTransform(1,0,0,1,0,0),fn.clearRect(0,0,$t.width,$t.height),jt(this,Gt,Cr).call(this);for(const _n of this.bezierPath2D)fn.stroke(_n)},Vt=new WeakSet,Zr=function($t){this.canvas.removeEventListener("pointerleave",ot(this,_e)),this.canvas.removeEventListener("pointermove",ot(this,j)),this.canvas.removeEventListener("pointerup",ot(this,$)),this.canvas.addEventListener("pointerdown",ot(this,et)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",h.noContextMenu)},10),jt(this,dt,Io).call(this,$t.offsetX,$t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},tn=new WeakSet,Er=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then($t=>{var fn;return(fn=this.canvas)==null?void 0:fn.setAttribute("aria-label",$t)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Zt=new WeakSet,vr=function(){Yt(this,it,new ResizeObserver($t=>{const fn=$t[0].contentRect;fn.width&&fn.height&&this.setDimensions(fn.width,fn.height)})),ot(this,it).observe(this.div)},Tn=new WeakSet,er=function(){if(!ot(this,nt))return;const[$t,fn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*$t),this.canvas.height=Math.ceil(this.height*fn),jt(this,Gt,Cr).call(this)},Cn=new WeakSet,_i=function($t,fn){const _n=jt(this,en,Ar).call(this),mn=($t-_n)/ot(this,b),bn=(fn-_n)/ot(this,_);this.scaleFactor=Math.min(mn,bn)},Gt=new WeakSet,Cr=function(){const $t=jt(this,en,Ar).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$t,this.translationY*this.scaleFactor+$t)},Ot=new WeakSet,No=function($t){const fn=new Path2D;for(let _n=0,mn=$t.length;_n<mn;_n++){const[bn,xn,jn,un]=$t[_n];_n===0&&fn.moveTo(...bn),fn.bezierCurveTo(xn[0],xn[1],jn[0],jn[1],un[0],un[1])}return fn},nn=new WeakSet,eo=function($t,fn,_n){const[mn,bn,xn,jn]=fn;switch(_n){case 0:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]+=mn,$t[un+1]=jn-$t[un+1];break;case 90:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=$t[un+1]+mn,$t[un+1]=wn+bn}break;case 180:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]=xn-$t[un],$t[un+1]+=bn;break;case 270:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=xn-$t[un+1],$t[un+1]=jn-wn}break;default:throw new Error("Invalid rotation")}return $t},vn=new WeakSet,Lo=function($t,fn,_n){const[mn,bn,xn,jn]=fn;switch(_n){case 0:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]-=mn,$t[un+1]=jn-$t[un+1];break;case 90:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=$t[un+1]-bn,$t[un+1]=wn-mn}break;case 180:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]=xn-$t[un],$t[un+1]-=bn;break;case 270:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=jn-$t[un+1],$t[un+1]=xn-wn}break;default:throw new Error("Invalid rotation")}return $t},Pn=new WeakSet,Do=function($t,fn,_n,mn){var Dn,wn;const bn=[],xn=this.thickness/2,jn=$t*fn+xn,un=$t*_n+xn;for(const Rt of this.paths){const ht=[],wt=[];for(let It=0,Dt=Rt.length;It<Dt;It++){const[Ht,Jt,ln,En]=Rt[It],yn=$t*Ht[0]+jn,Nn=$t*Ht[1]+un,An=$t*Jt[0]+jn,Sn=$t*Jt[1]+un,On=$t*ln[0]+jn,Ln=$t*ln[1]+un,Fn=$t*En[0]+jn,Un=$t*En[1]+un;It===0&&(ht.push(yn,Nn),wt.push(yn,Nn)),ht.push(An,Sn,On,Ln,Fn,Un),wt.push(An,Sn),It===Dt-1&&wt.push(Fn,Un)}bn.push({bezier:jt(Dn=hn,nn,eo).call(Dn,ht,mn,this.rotation),points:jt(wn=hn,nn,eo).call(wn,wt,mn,this.rotation)})}return bn},In=new WeakSet,to=function(){let $t=1/0,fn=-1/0,_n=1/0,mn=-1/0;for(const bn of this.paths)for(const[xn,jn,un,Dn]of bn){const wn=s.Util.bezierBoundingBox(...xn,...jn,...un,...Dn);$t=Math.min($t,wn[0]),_n=Math.min(_n,wn[1]),fn=Math.max(fn,wn[2]),mn=Math.max(mn,wn[3])}return[$t,_n,fn,mn]},en=new WeakSet,Ar=function(){return ot(this,st)?Math.ceil(this.thickness*this.parentScale):0},Ft=new WeakSet,tr=function($t=!1){if(this.isEmpty())return;if(!ot(this,st)){jt(this,Pt,Wn).call(this);return}const fn=jt(this,In,to).call(this),_n=jt(this,en,Ar).call(this);Yt(this,b,Math.max(a.AnnotationEditor.MIN_SIZE,fn[2]-fn[0])),Yt(this,_,Math.max(a.AnnotationEditor.MIN_SIZE,fn[3]-fn[1]));const mn=Math.ceil(_n+ot(this,b)*this.scaleFactor),bn=Math.ceil(_n+ot(this,_)*this.scaleFactor),[xn,jn]=this.parentDimensions;this.width=mn/xn,this.height=bn/jn,this.setAspectRatio(mn,bn);const un=this.translationX,Dn=this.translationY;this.translationX=-fn[0],this.translationY=-fn[1],jt(this,Tn,er).call(this),jt(this,Pt,Wn).call(this),Yt(this,pt,mn),Yt(this,lt,bn),this.setDims(mn,bn);const wn=$t?_n/this.scaleFactor/2:0;this.translate(un-this.translationX-wn,Dn-this.translationY-wn)},Nt(hn,Ot),Nt(hn,nn),Nt(hn,vn),zn(hn,"_defaultColor",null),zn(hn,"_defaultOpacity",1),zn(hn,"_defaultThickness",1),zn(hn,"_type","ink");let g=hn;e.InkEditor=g},(i,e,o)=>{var g,_,b,j,_e,$,et,rt,st,tt,nt,lr,pt,cr,at,Sr,vt,no,mt,Fo,bt,jo,Tt,ro,Bt,Tr,_t,Uo;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var s=o(1),a=o(4),c=o(6),h=o(29);const St=class St extends a.AnnotationEditor{constructor(dt){super({...dt,name:"stampEditor"});Nt(this,nt);Nt(this,pt);Nt(this,at);Nt(this,vt);Nt(this,mt);Nt(this,bt);Nt(this,Tt);Nt(this,Bt);Nt(this,_t);Nt(this,g,null);Nt(this,_,null);Nt(this,b,null);Nt(this,j,null);Nt(this,_e,null);Nt(this,$,null);Nt(this,et,null);Nt(this,rt,null);Nt(this,st,!1);Nt(this,tt,!1);Yt(this,j,dt.bitmapUrl),Yt(this,_e,dt.bitmapFile)}static initialize(dt){a.AnnotationEditor.initialize(dt)}static get supportedTypes(){const dt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",dt.map(ct=>`image/${ct}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(dt){return this.supportedTypes.includes(dt)}static paste(dt,ct){ct.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:dt.getAsFile()})}remove(){var dt,ct;ot(this,_)&&(Yt(this,g,null),this._uiManager.imageManager.deleteId(ot(this,_)),(dt=ot(this,$))==null||dt.remove(),Yt(this,$,null),(ct=ot(this,et))==null||ct.disconnect(),Yt(this,et,null)),super.remove()}rebuild(){if(!this.parent){ot(this,_)&&jt(this,at,Sr).call(this);return}super.rebuild(),this.div!==null&&(ot(this,_)&&jt(this,at,Sr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(ot(this,b)||ot(this,g)||ot(this,j)||ot(this,_e))}get isResizable(){return!0}render(){if(this.div)return this.div;let dt,ct;if(this.width&&(dt=this.x,ct=this.y),super.render(),this.div.hidden=!0,ot(this,g)?jt(this,vt,no).call(this):jt(this,at,Sr).call(this),this.width){const[gt,ut]=this.parentDimensions;this.setAt(dt*gt,ct*ut,this.width*gt,this.height*ut)}return this.div}static deserialize(dt,ct,gt){if(dt instanceof h.StampAnnotationElement)return null;const ut=super.deserialize(dt,ct,gt),{rect:Et,bitmapUrl:Ct,bitmapId:kt,isSvg:xt,accessibilityData:Pt}=dt;kt&&gt.imageManager.isValidId(kt)?Yt(ut,_,kt):Yt(ut,j,Ct),Yt(ut,st,xt);const[qt,Vt]=ut.pageDimensions;return ut.width=(Et[2]-Et[0])/qt,ut.height=(Et[3]-Et[1])/Vt,Pt&&(ut.altTextData=Pt),ut}serialize(dt=!1,ct=null){if(this.isEmpty())return null;const gt={annotationType:s.AnnotationEditorType.STAMP,bitmapId:ot(this,_),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:ot(this,st),structTreeParentId:this._structTreeParentId};if(dt)return gt.bitmapUrl=jt(this,Bt,Tr).call(this,!0),gt.accessibilityData=this.altTextData,gt;const{decorative:ut,altText:Et}=this.altTextData;if(!ut&&Et&&(gt.accessibilityData={type:"Figure",alt:Et}),ct===null)return gt;ct.stamps||(ct.stamps=new Map);const Ct=ot(this,st)?(gt.rect[2]-gt.rect[0])*(gt.rect[3]-gt.rect[1]):null;if(!ct.stamps.has(ot(this,_)))ct.stamps.set(ot(this,_),{area:Ct,serialized:gt}),gt.bitmap=jt(this,Bt,Tr).call(this,!1);else if(ot(this,st)){const kt=ct.stamps.get(ot(this,_));Ct>kt.area&&(kt.area=Ct,kt.serialized.bitmap.close(),kt.serialized.bitmap=jt(this,Bt,Tr).call(this,!1))}return gt}};g=new WeakMap,_=new WeakMap,b=new WeakMap,j=new WeakMap,_e=new WeakMap,$=new WeakMap,et=new WeakMap,rt=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakSet,lr=function(dt,ct=!1){if(!dt){this.remove();return}Yt(this,g,dt.bitmap),ct||(Yt(this,_,dt.id),Yt(this,st,dt.isSvg)),jt(this,vt,no).call(this)},pt=new WeakSet,cr=function(){Yt(this,b,null),this._uiManager.enableWaiting(!1),ot(this,$)&&this.div.focus()},at=new WeakSet,Sr=function(){if(ot(this,_)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(ot(this,_)).then(ct=>jt(this,nt,lr).call(this,ct,!0)).finally(()=>jt(this,pt,cr).call(this));return}if(ot(this,j)){const ct=ot(this,j);Yt(this,j,null),this._uiManager.enableWaiting(!0),Yt(this,b,this._uiManager.imageManager.getFromUrl(ct).then(gt=>jt(this,nt,lr).call(this,gt)).finally(()=>jt(this,pt,cr).call(this)));return}if(ot(this,_e)){const ct=ot(this,_e);Yt(this,_e,null),this._uiManager.enableWaiting(!0),Yt(this,b,this._uiManager.imageManager.getFromFile(ct).then(gt=>jt(this,nt,lr).call(this,gt)).finally(()=>jt(this,pt,cr).call(this)));return}const dt=document.createElement("input");dt.type="file",dt.accept=St.supportedTypesStr,Yt(this,b,new Promise(ct=>{dt.addEventListener("change",async()=>{if(!dt.files||dt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const gt=await this._uiManager.imageManager.getFromFile(dt.files[0]);jt(this,nt,lr).call(this,gt)}ct()}),dt.addEventListener("cancel",()=>{this.remove(),ct()})}).finally(()=>jt(this,pt,cr).call(this))),dt.click()},vt=new WeakSet,no=function(){const{div:dt}=this;let{width:ct,height:gt}=ot(this,g);const[ut,Et]=this.pageDimensions,Ct=.75;if(this.width)ct=this.width*ut,gt=this.height*Et;else if(ct>Ct*ut||gt>Ct*Et){const qt=Math.min(Ct*ut/ct,Ct*Et/gt);ct*=qt,gt*=qt}const[kt,xt]=this.parentDimensions;this.setDims(ct*kt/ut,gt*xt/Et),this._uiManager.enableWaiting(!1);const Pt=Yt(this,$,document.createElement("canvas"));dt.append(Pt),dt.hidden=!1,jt(this,Tt,ro).call(this,ct,gt),jt(this,_t,Uo).call(this),ot(this,tt)||(this.parent.addUndoableEditor(this),Yt(this,tt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},mt=new WeakSet,Fo=function(dt,ct){var Ct;const[gt,ut]=this.parentDimensions;this.width=dt/gt,this.height=ct/ut,this.setDims(dt,ct),(Ct=this._initialOptions)!=null&&Ct.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,ot(this,rt)!==null&&clearTimeout(ot(this,rt)),Yt(this,rt,setTimeout(()=>{Yt(this,rt,null),jt(this,Tt,ro).call(this,dt,ct)},200))},bt=new WeakSet,jo=function(dt,ct){const{width:gt,height:ut}=ot(this,g);let Et=gt,Ct=ut,kt=ot(this,g);for(;Et>2*dt||Ct>2*ct;){const xt=Et,Pt=Ct;Et>2*dt&&(Et=Et>=16384?Math.floor(Et/2)-1:Math.ceil(Et/2)),Ct>2*ct&&(Ct=Ct>=16384?Math.floor(Ct/2)-1:Math.ceil(Ct/2));const qt=new OffscreenCanvas(Et,Ct);qt.getContext("2d").drawImage(kt,0,0,xt,Pt,0,0,Et,Ct),kt=qt.transferToImageBitmap()}return kt},Tt=new WeakSet,ro=function(dt,ct){dt=Math.ceil(dt),ct=Math.ceil(ct);const gt=ot(this,$);if(!gt||gt.width===dt&&gt.height===ct)return;gt.width=dt,gt.height=ct;const ut=ot(this,st)?ot(this,g):jt(this,bt,jo).call(this,dt,ct),Et=gt.getContext("2d");Et.filter=this._uiManager.hcmFilter,Et.drawImage(ut,0,0,ut.width,ut.height,0,0,dt,ct)},Bt=new WeakSet,Tr=function(dt){if(dt){if(ot(this,st)){const ut=this._uiManager.imageManager.getSvgUrl(ot(this,_));if(ut)return ut}const ct=document.createElement("canvas");return{width:ct.width,height:ct.height}=ot(this,g),ct.getContext("2d").drawImage(ot(this,g),0,0),ct.toDataURL()}if(ot(this,st)){const[ct,gt]=this.pageDimensions,ut=Math.round(this.width*ct*c.PixelsPerInch.PDF_TO_CSS_UNITS),Et=Math.round(this.height*gt*c.PixelsPerInch.PDF_TO_CSS_UNITS),Ct=new OffscreenCanvas(ut,Et);return Ct.getContext("2d").drawImage(ot(this,g),0,0,ot(this,g).width,ot(this,g).height,0,0,ut,Et),Ct.transferToImageBitmap()}return structuredClone(ot(this,g))},_t=new WeakSet,Uo=function(){Yt(this,et,new ResizeObserver(dt=>{const ct=dt[0].contentRect;ct.width&&ct.height&&jt(this,mt,Fo).call(this,ct.width,ct.height)})),ot(this,et).observe(this.div)},zn(St,"_type","stamp");let d=St;e.StampEditor=d}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var o=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i](o,o.exports,__w_pdfjs_require__),o.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return h.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return d.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return o.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return o.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return o.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return o.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return o.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return o.version}});var e=__w_pdfjs_require__(1),o=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),h=__w_pdfjs_require__(5),d=__w_pdfjs_require__(29),g=__w_pdfjs_require__(14),_=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i(s,a,c,h,d,g){if(g!==ReactPropTypesSecret){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}i.isRequired=i;function e(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return o.PropTypes=o,o};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(i,e,o){if(o||arguments.length===2)for(var s=0,a=e.length,c;s<a;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(i,e){var o={};return allEvents.forEach(function(s){var a=i[s];a&&(e?o[s]=function(c){return a(c,e(s))}:o[s]=a)}),o}function makeCancellablePromise(i){var e=!1,o=new Promise(function(s,a){i.then(function(c){return!e&&s(c)}).catch(function(c){return!e&&a(c)})});return{promise:o,cancel:function(){e=!0}}}function r(i){var e,o,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(o=r(i[e]))&&(s&&(s+=" "),s+=o)}else for(o in i)i[o]&&(s&&(s+=" "),s+=o);return s}function clsx(){for(var i,e,o=0,s="",a=arguments.length;o<a;o++)(i=arguments[o])&&(e=r(i))&&(s&&(s+=" "),s+=e);return s}var isProduction=!0,prefix="Invariant failed";function invariant(i,e){if(!i){if(isProduction)throw new Error(prefix);var o=typeof e=="function"?e():e,s=o?"".concat(prefix,": ").concat(o):prefix;throw new Error(s)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(i,e,o){for(o of i.keys())if(dequal(o,e))return o}function dequal(i,e){var o,s,a;if(i===e)return!0;if(i&&e&&(o=i.constructor)===e.constructor){if(o===Date)return i.getTime()===e.getTime();if(o===RegExp)return i.toString()===e.toString();if(o===Array){if((s=i.length)===e.length)for(;s--&&dequal(i[s],e[s]););return s===-1}if(o===Set){if(i.size!==e.size)return!1;for(s of i)if(a=s,a&&typeof a=="object"&&(a=find(e,a),!a)||!e.has(a))return!1;return!0}if(o===Map){if(i.size!==e.size)return!1;for(s of i)if(a=s[0],a&&typeof a=="object"&&(a=find(e,a),!a)||!dequal(s[1],e.get(a)))return!1;return!0}if(o===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(o===DataView){if((s=i.byteLength)===e.byteLength)for(;s--&&i.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(i)){if((s=i.byteLength)===e.byteLength)for(;s--&&i[s]===e[s];);return s===-1}if(!o||typeof i=="object"){s=0;for(o in i)if(has.call(i,o)&&++s&&!has.call(e,o)||!(o in e)||!dequal(i[o],e[o]))return!1;return Object.keys(e).length===s}}return i!==i&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:i,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},i)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(o=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(o):Array.isArray(e)?o(e):e.then(o)}).then(o=>{invariant(Array.isArray(o),`"${o}" is not a valid destination array.`);const s=o[0];new Promise(a=>{invariant(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(c=>{a(c)}).catch(()=>{invariant(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?a(s):invariant(!1,`"${s}" is not a valid destination reference.`)}).then(a=>{const c=a+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(c>=1&&c<=this.pagesCount,`"${c}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:o,pageIndex:a,pageNumber:c})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const o=e-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:o,pageNumber:e})}addLinkAttributes(e,o,s){e.href=o,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(i){return typeof i<"u"}function isProvided(i){return isDefined(i)&&i!==null}function isString(i){return typeof i=="string"}function isArrayBuffer(i){return i instanceof ArrayBuffer}function isBlob(i){return invariant(isBrowser,"isBlob can only be used in a browser environment"),i instanceof Blob}function isDataURI(i){return isString(i)&&/^data:/.test(i)}function dataURItoByteString(i){invariant(isDataURI(i),"Invalid data URI.");const[e="",o=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(o):unescape(o)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(i){i&&i.cancel&&i.cancel()}function makePageCallback(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function isCancelException(i){return i.name==="RenderingCancelledException"}function loadFromFile(i){return new Promise((e,o)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return o(new Error("Error while reading a file."));e(s.result)},s.onerror=a=>{if(!a.target)return o(new Error("Error while reading a file."));const{error:c}=a.target;if(!c)return o(new Error("Error while reading a file."));switch(c.code){case c.NOT_FOUND_ERR:return o(new Error("Error while reading a file: File not found."));case c.SECURITY_ERR:return o(new Error("Error while reading a file: Security error."));case c.ABORT_ERR:return o(new Error("Error while reading a file: Aborted."));default:return o(new Error("Error while reading a file."))}},s.readAsArrayBuffer(i)})}function reducer(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const i={};return allEvents.forEach(e=>{i[e]=PropTypes.func}),i})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function i(e,o,s){const{[o]:a,pageNumber:c,pdf:h}=e;if(!isDefined(h))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${o}\` of type \`${typeof a}\` supplied to \`${s}\`, expected \`number\`.`);if(a<0)return new Error(`Expected \`${o}\` to be greater or equal to 0.`);const{numPages:d}=h;if(a+1>d)return new Error(`Expected \`${o}\` to be less or equal to ${d-1}.`)}else if(!isDefined(c))return new Error(`\`${o}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${s}\`.`);return null},isPageNumber=function i(e,o,s){const{[o]:a,pageIndex:c,pdf:h}=e;if(!isDefined(h))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${o}\` of type \`${typeof a}\` supplied to \`${s}\`, expected \`number\`.`);if(a<1)return new Error(`Expected \`${o}\` to be greater or equal to 1.`);const{numPages:d}=h;if(a>d)return new Error(`Expected \`${o}\` to be less or equal to ${d}.`)}else if(!isDefined(c))return new Error(`\`${o}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${s}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(i,e,o,s){function a(c){return c instanceof o?c:new o(function(h){h(c)})}return new(o||(o=Promise))(function(c,h){function d(b){try{_(s.next(b))}catch(j){h(j)}}function g(b){try{_(s.throw(b))}catch(j){h(j)}}function _(b){b.done?c(b.value):a(b.value).then(d,g)}_((s=s.apply(i,e||[])).next())})},__rest$1=function(i,e){var o={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(o[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(o[s[a]]=i[s[a]]);return o};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(i,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const o=prompt("Enter the password to open this PDF file.");i(o);break}case PasswordResponses.INCORRECT_PASSWORD:{const o=prompt("Invalid password. Please try again.");i(o);break}}};function isParameterObject(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Document=reactExports.forwardRef(function i(e,o){var{children:s,className:a,error:c="Failed to load PDF file.",externalLinkRel:h,externalLinkTarget:d,file:g,inputRef:_,imageResourcesPath:b,loading:j="Loading PDF",noData:_e="No PDF file specified.",onItemClick:$,onLoadError:et,onLoadProgress:rt,onLoadSuccess:st,onPassword:tt=defaultOnPassword,onSourceError:nt,onSourceSuccess:it,options:pt,renderMode:lt,rotate:at}=e,At=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[vt,ft]=useResolver(),{value:mt,error:yt}=vt,[bt,Mt]=useResolver(),{value:Tt,error:Lt}=bt,Bt=reactExports.useRef(new LinkService),Kt=reactExports.useRef([]),_t=reactExports.useRef(),Ut=reactExports.useRef();reactExports.useEffect(()=>{g&&g!==_t.current&&isParameterObject(g)&&(warning$1(!dequal(g,_t.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),_t.current=g)},[g]),reactExports.useEffect(()=>{pt&&pt!==Ut.current&&(warning$1(!dequal(pt,Ut.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ut.current=pt)},[pt]);const St=reactExports.useRef({scrollPageIntoView:on=>{const{dest:Zt,pageNumber:pn,pageIndex:Tn=pn-1}=on;if($){$({dest:Zt,pageIndex:Tn,pageNumber:pn});return}const dn=Kt.current[Tn];if(dn){dn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${pn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(o,()=>({linkService:Bt,pages:Kt,viewer:St}),[]);function rn(){it&&it()}function an(){yt&&(warning$1(!1,yt.toString()),nt&&nt(yt))}function dt(){ft({type:"RESET"})}reactExports.useEffect(dt,[g,ft]);const ct=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!g)return null;if(typeof g=="string")return isDataURI(g)?{data:dataURItoByteString(g)}:(displayCORSWarning(),{url:g});if(g instanceof PDFDataRangeTransport)return{range:g};if(isArrayBuffer(g))return{data:g};if(isBrowser&&isBlob(g))return{data:yield loadFromFile(g)};if(invariant(typeof g=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(g),"Invalid parameter object: need either .data, .range or .url"),"url"in g&&typeof g.url=="string"){if(isDataURI(g.url)){const{url:on}=g,Zt=__rest$1(g,["url"]),pn=dataURItoByteString(on);return Object.assign({data:pn},Zt)}displayCORSWarning()}return g}),[g]);reactExports.useEffect(()=>{const on=makeCancellablePromise(ct());return on.promise.then(Zt=>{ft({type:"RESOLVE",value:Zt})}).catch(Zt=>{ft({type:"REJECT",error:Zt})}),()=>{cancelRunningTask(on)}},[ct,ft]),reactExports.useEffect(()=>{if(!(typeof mt>"u")){if(mt===!1){an();return}rn()}},[mt]);function gt(){Tt&&(st&&st(Tt),Kt.current=new Array(Tt.numPages),Bt.current.setDocument(Tt))}function ut(){Lt&&(warning$1(!1,Lt.toString()),et&&et(Lt))}function Et(){Mt({type:"RESET"})}reactExports.useEffect(Et,[Mt,mt]);function Ct(){if(!mt)return;const on=pt?Object.assign(Object.assign({},mt),pt):mt,Zt=pdfjs.getDocument(on);rt&&(Zt.onProgress=rt),tt&&(Zt.onPassword=tt);const pn=Zt;return pn.promise.then(Tn=>{Mt({type:"RESOLVE",value:Tn})}).catch(Tn=>{pn.destroyed||Mt({type:"REJECT",error:Tn})}),()=>{pn.destroy()}}reactExports.useEffect(Ct,[pt,Mt,mt]),reactExports.useEffect(()=>{if(!(typeof Tt>"u")){if(Tt===!1){ut();return}gt()}},[Tt]);function kt(){Bt.current.setViewer(St.current),Bt.current.setExternalLinkRel(h),Bt.current.setExternalLinkTarget(d)}reactExports.useEffect(kt,[h,d]);function xt(on,Zt){Kt.current[on]=Zt}function Pt(on){delete Kt.current[on]}const qt=reactExports.useMemo(()=>({imageResourcesPath:b,linkService:Bt.current,onItemClick:$,pdf:Tt,registerPage:xt,renderMode:lt,rotate:at,unregisterPage:Pt}),[b,$,Tt,lt,at]),Vt=reactExports.useMemo(()=>makeEventProps(At,()=>Tt),[At,Tt]);function Qt(){return React.createElement(DocumentContext.Provider,{value:qt},s)}function tn(){return g?Tt==null?React.createElement(Message,{type:"loading"},typeof j=="function"?j():j):Tt===!1?React.createElement(Message,{type:"error"},typeof c=="function"?c():c):Qt():React.createElement(Message,{type:"no-data"},typeof _e=="function"?_e():_e)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",a),ref:_,style:{"--scale-factor":"1"}},Vt),tn())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var o=i.filter(Boolean);if(o.length<=1){var s=o[0];return s||null}return function(c){o.forEach(function(h){typeof h=="function"?h(c):h&&(h.current=c)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(i){return i in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(i){return"children"in i}function isStructTreeNodeWithOnlyContentChild(i){return isStructTreeNode(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function getRoleAttributes(i){const e={};if(isStructTreeNode(i)){const{role:o}=i,s=o.match(HEADING_PATTERN);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(isPdfRole(o)){const a=PDF_ROLE_TO_HTML_ROLE[o];a&&(e.role=a)}}return e}function getBaseAttributes(i){const e={};if(isStructTreeNode(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),isStructTreeNodeWithOnlyContentChild(i)){const[o]=i.children;if(o){const s=getBaseAttributes(o);return Object.assign(Object.assign({},e),s)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function getAttributes(i){return i?Object.assign(Object.assign({},getRoleAttributes(i)),getBaseAttributes(i)):null}function StructTreeItem({className:i,node:e}){const o=reactExports.useMemo(()=>getAttributes(e),[e]),s=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((a,c)=>React.createElement(StructTreeItem,{key:c,node:a})),[e]);return React.createElement("span",Object.assign({className:i},o),s)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:o}=i,[s,a]=useResolver(),{value:c,error:h}=s,{customTextRenderer:d,page:g}=i;function _(){c&&o&&o(c)}function b(){h&&(warning$1(!1,h.toString()),e&&e(h))}function j(){a({type:"RESET"})}reactExports.useEffect(j,[a,g]);function _e(){if(d||!g)return;const $=makeCancellablePromise(g.getStructTree()),et=$;return $.promise.then(rt=>{a({type:"RESOLVE",value:rt})}).catch(rt=>{a({type:"REJECT",error:rt})}),()=>cancelRunningTask(et)}return reactExports.useEffect(_e,[d,g,a]),reactExports.useEffect(()=>{if(c!==void 0){if(c===!1){b();return}_()}},[c]),c?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:c}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(i){const e=usePageContext();invariant(e,"Unable to find Page context.");const o=Object.assign(Object.assign({},e),i),{_className:s,canvasBackground:a,devicePixelRatio:c=getDevicePixelRatio(),onRenderError:h,onRenderSuccess:d,page:g,renderForms:_,renderTextLayer:b,rotate:j,scale:_e}=o,{canvasRef:$}=i;invariant(g,"Attempted to render page canvas, but no page was specified.");const et=reactExports.useRef(null);function rt(){g&&d&&d(makePageCallback(g,_e))}function st(lt){isCancelException(lt)||(warning$1(!1,lt.toString()),h&&h(lt))}const tt=reactExports.useMemo(()=>g.getViewport({scale:_e*c,rotation:j}),[c,g,j,_e]),nt=reactExports.useMemo(()=>g.getViewport({scale:_e,rotation:j}),[g,j,_e]);function it(){if(!g)return;g.cleanup();const{current:lt}=et;if(!lt)return;lt.width=tt.width,lt.height=tt.height,lt.style.width=`${Math.floor(nt.width)}px`,lt.style.height=`${Math.floor(nt.height)}px`,lt.style.visibility="hidden";const at={annotationMode:_?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:lt.getContext("2d",{alpha:!1}),viewport:tt};a&&(at.background=a);const At=g.render(at),vt=At;return At.promise.then(()=>{lt.style.visibility="",rt()}).catch(st),()=>cancelRunningTask(vt)}reactExports.useEffect(it,[a,et,c,g,_,tt,nt]);const pt=reactExports.useCallback(()=>{const{current:lt}=et;lt&&(lt.width=0,lt.height=0)},[et]);return reactExports.useEffect(()=>pt,[pt]),React.createElement("canvas",{className:`${s}__canvas`,dir:"ltr",ref:mergeRefs($,et),style:{display:"block",userSelect:"none"}},b?React.createElement(StructTree,null):null)}function PageSVG(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{_className:e,onRenderSuccess:o,onRenderError:s,page:a,rotate:c,scale:h}=i;invariant(a,"Attempted to render page SVG, but no page was specified.");const[d,g]=useResolver(),{value:_,error:b}=d;function j(){a&&o&&o(makePageCallback(a,h))}function _e(){b&&(isCancelException(b)||(warning$1(!1,b.toString()),s&&s(b)))}const $=reactExports.useMemo(()=>a.getViewport({scale:h,rotation:c}),[a,c,h]);function et(){g({type:"RESET"})}reactExports.useEffect(et,[a,g,$]);function rt(){if(!a)return;const it=makeCancellablePromise(a.getOperatorList());return it.promise.then(pt=>{new pdfjs.SVGGraphics(a.commonObjs,a.objs).getSVG(pt,$).then(at=>{if(!(at instanceof SVGElement))throw new Error("getSVG returned unexpected result.");g({type:"RESOLVE",value:at})}).catch(at=>{g({type:"REJECT",error:at})})}).catch(pt=>{g({type:"REJECT",error:pt})}),()=>cancelRunningTask(it)}reactExports.useEffect(rt,[a,g,$]),reactExports.useEffect(()=>{if(_!==void 0){if(_===!1){_e();return}j()}},[_]);function st(it){if(!it||!_)return;it.firstElementChild||it.appendChild(_);const{width:pt,height:lt}=$;_.setAttribute("width",`${pt}`),_.setAttribute("height",`${lt}`)}const{width:tt,height:nt}=$;return React.createElement("div",{className:`${e}__svg`,ref:it=>st(it),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:tt,height:nt,userSelect:"none"}})}function isTextItem(i){return"str"in i}function TextLayer(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:o,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:c,page:h,pageIndex:d,pageNumber:g,rotate:_,scale:b}=i;invariant(h,"Attempted to load page text content, but no page was specified.");const[j,_e]=useResolver(),{value:$,error:et}=j,rt=reactExports.useRef(null),st=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function tt(){$&&s&&s($)}function nt(){et&&(warning$1(!1,et.toString()),o&&o(et))}function it(){_e({type:"RESET"})}reactExports.useEffect(it,[h,_e]);function pt(){if(!h)return;const yt=makeCancellablePromise(h.getTextContent()),bt=yt;return yt.promise.then(Mt=>{_e({type:"RESOLVE",value:Mt})}).catch(Mt=>{_e({type:"REJECT",error:Mt})}),()=>cancelRunningTask(bt)}reactExports.useEffect(pt,[h,_e]),reactExports.useEffect(()=>{if($!==void 0){if($===!1){nt();return}tt()}},[$]);const lt=reactExports.useCallback(()=>{c&&c()},[c]),at=reactExports.useCallback(yt=>{warning$1(!1,yt.toString()),a&&a(yt)},[a]);function At(){const yt=st.current;yt&&yt.classList.add("active")}function vt(){const yt=st.current;yt&&yt.classList.remove("active")}const ft=reactExports.useMemo(()=>h.getViewport({scale:b,rotation:_}),[h,_,b]);function mt(){if(!h||!$)return;const{current:yt}=rt;if(!yt)return;yt.innerHTML="";const bt=h.streamTextContent({includeMarkedContent:!0}),Mt={container:yt,textContentSource:bt,viewport:ft},Tt=pdfjs.renderTextLayer(Mt),Lt=Tt;return Tt.promise.then(()=>{const Bt=document.createElement("div");Bt.className="endOfContent",yt.append(Bt),st.current=Bt;const Kt=yt.querySelectorAll('[role="presentation"]');if(e){let _t=0;$.items.forEach((Ut,St)=>{if(!isTextItem(Ut))return;const rn=Kt[_t];if(!rn)return;const an=e(Object.assign({pageIndex:d,pageNumber:g,itemIndex:St},Ut));rn.innerHTML=an,_t+=Ut.str&&Ut.hasEOL?2:1})}lt()}).catch(at),()=>cancelRunningTask(Lt)}return reactExports.useLayoutEffect(mt,[e,at,lt,h,d,g,$,ft]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:vt,onMouseDown:At,ref:rt})}function AnnotationLayer(){const i=useDocumentContext(),e=usePageContext();invariant(e,"Unable to find Page context.");const o=Object.assign(Object.assign({},i),e),{imageResourcesPath:s,linkService:a,onGetAnnotationsError:c,onGetAnnotationsSuccess:h,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:g,page:_,pdf:b,renderForms:j,rotate:_e,scale:$=1}=o;invariant(b,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(_,"Attempted to load page annotations, but no page was specified."),invariant(a,"Attempted to load page annotations, but no linkService was specified.");const[et,rt]=useResolver(),{value:st,error:tt}=et,nt=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function it(){st&&h&&h(st)}function pt(){tt&&(warning$1(!1,tt.toString()),c&&c(tt))}function lt(){rt({type:"RESET"})}reactExports.useEffect(lt,[rt,_]);function at(){if(!_)return;const yt=makeCancellablePromise(_.getAnnotations()),bt=yt;return yt.promise.then(Mt=>{rt({type:"RESOLVE",value:Mt})}).catch(Mt=>{rt({type:"REJECT",error:Mt})}),()=>{cancelRunningTask(bt)}}reactExports.useEffect(at,[rt,_,j]),reactExports.useEffect(()=>{if(st!==void 0){if(st===!1){pt();return}it()}},[st]);function At(){g&&g()}function vt(yt){warning$1(!1,`${yt}`),d&&d(yt)}const ft=reactExports.useMemo(()=>_.getViewport({scale:$,rotation:_e}),[_,_e,$]);function mt(){if(!b||!_||!a||!st)return;const{current:yt}=nt;if(!yt)return;const bt=ft.clone({dontFlip:!0}),Mt={accessibilityManager:null,annotationCanvasMap:null,div:yt,l10n:null,page:_,viewport:bt},Tt={annotations:st,annotationStorage:b.annotationStorage,div:yt,downloadManager:null,imageResourcesPath:s,linkService:a,page:_,renderForms:j,viewport:bt};yt.innerHTML="";try{new pdfjs.AnnotationLayer(Mt).render(Tt),At()}catch(Lt){vt(Lt)}return()=>{}}return reactExports.useEffect(mt,[st,s,a,_,j,ft]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:nt})}var __rest=function(i,e){var o={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(o[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(o[s[a]]=i[s[a]]);return o};const defaultScale=1,Page=function i(e){const o=useDocumentContext(),s=Object.assign(Object.assign({},o),e),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:c=!0,canvasBackground:h,canvasRef:d,children:g,className:_,customRenderer:b,customTextRenderer:j,devicePixelRatio:_e,error:$="Failed to load the page.",height:et,inputRef:rt,loading:st="Loading page",noData:tt="No page specified.",onGetAnnotationsError:nt,onGetAnnotationsSuccess:it,onGetStructTreeError:pt,onGetStructTreeSuccess:lt,onGetTextError:at,onGetTextSuccess:At,onLoadError:vt,onLoadSuccess:ft,onRenderAnnotationLayerError:mt,onRenderAnnotationLayerSuccess:yt,onRenderError:bt,onRenderSuccess:Mt,onRenderTextLayerError:Tt,onRenderTextLayerSuccess:Lt,pageIndex:Bt,pageNumber:Kt,pdf:_t,registerPage:Ut,renderAnnotationLayer:St=!0,renderForms:rn=!1,renderMode:an="canvas",renderTextLayer:dt=!0,rotate:ct,scale:gt=defaultScale,unregisterPage:ut,width:Et}=s,Ct=__rest(s,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[kt,xt]=useResolver(),{value:Pt,error:qt}=kt,Vt=reactExports.useRef(null);invariant(_t,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Qt=isProvided(Kt)?Kt-1:Bt??null,tn=Kt??(isProvided(Bt)?Bt+1:null),on=ct??(Pt?Pt.rotate:null),Zt=reactExports.useMemo(()=>{if(!Pt)return null;let Rn=1;const In=gt??defaultScale;if(Et||et){const Mn=Pt.getViewport({scale:1,rotation:on});Et?Rn=Et/Mn.width:et&&(Rn=et/Mn.height)}return In*Rn},[et,Pt,on,gt,Et]);function pn(){return()=>{isProvided(Qt)&&c&&ut&&ut(Qt)}}reactExports.useEffect(pn,[c,_t,Qt,ut]);function Tn(){if(ft){if(!Pt||!Zt)return;ft(makePageCallback(Pt,Zt))}if(c&&Ut){if(!isProvided(Qt)||!Vt.current)return;Ut(Qt,Vt.current)}}function dn(){qt&&(warning$1(!1,qt.toString()),vt&&vt(qt))}function Cn(){xt({type:"RESET"})}reactExports.useEffect(Cn,[xt,_t,Qt]);function sn(){if(!_t||!tn)return;const Rn=makeCancellablePromise(_t.getPage(tn)),In=Rn;return Rn.promise.then(Mn=>{xt({type:"RESOLVE",value:Mn})}).catch(Mn=>{xt({type:"REJECT",error:Mn})}),()=>cancelRunningTask(In)}reactExports.useEffect(sn,[xt,_t,Qt,tn,Ut]),reactExports.useEffect(()=>{if(Pt!==void 0){if(Pt===!1){dn();return}Tn()}},[Pt,Zt]);const Gt=reactExports.useMemo(()=>Pt&&isProvided(Qt)&&tn&&isProvided(on)&&isProvided(Zt)?{_className:a,canvasBackground:h,customTextRenderer:j,devicePixelRatio:_e,onGetAnnotationsError:nt,onGetAnnotationsSuccess:it,onGetStructTreeError:pt,onGetStructTreeSuccess:lt,onGetTextError:at,onGetTextSuccess:At,onRenderAnnotationLayerError:mt,onRenderAnnotationLayerSuccess:yt,onRenderError:bt,onRenderSuccess:Mt,onRenderTextLayerError:Tt,onRenderTextLayerSuccess:Lt,page:Pt,pageIndex:Qt,pageNumber:tn,renderForms:rn,renderTextLayer:dt,rotate:on,scale:Zt}:null,[a,h,j,_e,nt,it,pt,lt,at,At,mt,yt,bt,Mt,Tt,Lt,Pt,Qt,tn,rn,dt,on,Zt]),Wt=reactExports.useMemo(()=>makeEventProps(Ct,()=>Pt&&(Zt?makePageCallback(Pt,Zt):void 0)),[Ct,Pt,Zt]),Ot=`${Qt}@${Zt}/${on}`,Xt=`${Qt}/${on}`;function nn(){switch(an){case"custom":return invariant(b,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(b,{key:`${Ot}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Xt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Ot}_canvas`,canvasRef:d})}}function gn(){return dt?React.createElement(TextLayer,{key:`${Ot}_text`}):null}function vn(){return St?React.createElement(AnnotationLayer,{key:`${Ot}_annotations`}):null}function kn(){return React.createElement(PageContext.Provider,{value:Gt},nn(),gn(),vn(),g)}function Pn(){return tn?_t===null||Pt===void 0||Pt===null?React.createElement(Message,{type:"loading"},typeof st=="function"?st():st):_t===!1||Pt===!1?React.createElement(Message,{type:"error"},typeof $=="function"?$():$):kn():React.createElement(Message,{type:"no-data"},typeof tt=="function"?tt():tt)}return React.createElement("div",Object.assign({className:clsx(a,_),"data-page-number":tn,ref:mergeRefs(rt,Vt),style:{"--scale-factor":`${Zt}`,backgroundColor:h||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Wt),Pn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-DKQKFyKK.js",import.meta.url).toString();const ReferencePopup=({path:i,page:e,onClose:o})=>{const[s,a]=reactExports.useState(),[c,h]=reactExports.useState(parseInt(e));function d({numPages:b}){a(b)}const g=b=>{console.log("here"),b.preventDefault(),b.stopPropagation(),o()};function _(b){h(j=>j+b)}return reactExports.useEffect(()=>{const b=j=>{j.keyCode===27&&o()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[o]),jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 w-full h-full  backdrop-blur-sm",onClick:g,children:jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center w-full",onClick:b=>b.stopPropagation(),children:jsxRuntimeExports.jsxs("div",{className:"pdf-container bg-white border border-gray-500 overflow-auto relative",children:[jsxRuntimeExports.jsx(Document$1,{file:i,onLoadSuccess:d,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:c,renderTextLayer:!1,renderAnnotationLayer:!1})}),jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"border border-gray-300 bg-gray-100 cursor-pointer h-8 w-8 flex items-center justify-center",children:jsxRuntimeExports.jsx(ChromeCloseIcon$1,{})})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-2 w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex w-full items-center justify-center flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 bg-gray-100 m-auto relative shadow-lg flex",children:[jsxRuntimeExports.jsx("button",{className:"p-2 pt-1 hover:bg-white cursor-pointer",type:"button",disabled:c<=1,onClick:()=>_(-1),children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{})}),jsxRuntimeExports.jsxs("div",{className:"p-2 border-r border-l border-gray-300",children:["Page ",c||(s?1:"--")," of ",s||"--"]}),jsxRuntimeExports.jsx("button",{className:"p-2 pt-1 hover:bg-white cursor-pointer",type:"button",disabled:c>=(s||0),onClick:()=>_(1),children:jsxRuntimeExports.jsx(ChevronRightIcon$1,{})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1"})]})})]})})})},ChatMessage=({message:i})=>jsxRuntimeExports.jsxs("div",{className:"mx-1 my-2",children:[i.role==="user"&&i.agent==="human"&&jsxRuntimeExports.jsx(UserMessage,{message:i}),i.role==="assistant"&&jsxRuntimeExports.jsx(AssistantMessage,{message:i})]}),UserMessage=({message:i})=>{const e=useAccount(),s=e&&i.userId===e.localAccountId?"bg-blue-100":"bg-gray-100";return jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-24",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx("div",{className:"header absolute -right-6",children:jsxRuntimeExports.jsx(Avatar,{userId:i.userId,userName:i.name,size:8})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 rounded-lg p-2 pr-4 border-gray-300 border "+s,children:[jsxRuntimeExports.jsx("div",{className:"date text-xs text-gray-700 flex flex-row",children:jsxRuntimeExports.jsxs("div",{className:"flex-0",children:["Sent ",new Date(i.timestamp).toLocaleString()]})}),jsxRuntimeExports.jsx("div",{className:"content min-h-8",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm,supersub],children:i.content})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-4",children:""})]})},ReferenceItem=({referenceId:i,id:e})=>{const{topicId:o}=useParams(),[s,a]=reactExports.useState(!0),[c,h]=reactExports.useState(null),[d,g]=reactExports.useState(null),[_,b]=reactExports.useState(""),[j,_e]=reactExports.useState(!1);reactExports.useEffect(()=>{o!==void 0&&fetchSearchResults(o,i).then(et=>h(et))},[o]),reactExports.useEffect(()=>{o!==void 0&&c!==null&&fetchFile(o,c.fileId).then(async et=>{g(et);const rt=await fetchBlobSasToken(o,et.file);a(!1),b(rt)})},[o,c]);const $=()=>{c!==null&&d!==null&&(console.log("Open file",d),_e(!0))};return jsxRuntimeExports.jsxs("div",{className:"overflow-hidden border border-gray-300 mt-1 px-1 bg-white rounded-md flex items-center relative cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"text-lg text-blue-600",onClick:$,children:["[",e,"]"]}),c&&d&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-700",onClick:$,children:[d.filename," - Page ",c.pageNumber,c.truncatedStart&&"and possibly previous pages",c.truncatedEnd&&"and possibly following pages"]}),s&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:jsxRuntimeExports.jsx(LoadingBar,{})}),c&&d&&j&&reactDomExports.createPortal(jsxRuntimeExports.jsx(ReferencePopup,{path:d.file+"?"+_,page:c.pageNumber,onClose:()=>_e(!1)}),document.body)]})},AssistantMessage=({message:i})=>{const{content:e,references:o}=i;return jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-4",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx("div",{className:"header absolute -left-6",children:jsxRuntimeExports.jsx(Avatar,{staticPath:"/img/gpt.png",size:8,staticText:"GPT"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-gray-100 rounded-lg p-2 pl-5 border-gray-300 border",children:[jsxRuntimeExports.jsx("div",{className:"date text-xs text-gray-700 flex flex-row",children:jsxRuntimeExports.jsxs("div",{className:"flex-0",children:["Sent ",new Date(i.timestamp).toLocaleString()]})}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm,supersub],children:e}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[o.length>0&&jsxRuntimeExports.jsx("div",{className:"text-lg text-blue-600",children:"References:"}),o.map((s,a)=>jsxRuntimeExports.jsx(ReferenceItem,{referenceId:s,id:a+1},a))]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-24",children:""})]})},LoadingSpinner=()=>jsxRuntimeExports.jsxs("div",{role:"status",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]}),EmptyArea=()=>jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-300",children:jsxRuntimeExports.jsx("div",{className:"text-3xl",children:"Start typing below"})}),SingleConversation=()=>{var _e,$;const{topicId:i,conversationId:e}=useParams(),[o,s]=reactExports.useState(null),[a,c]=reactExports.useState(!1),h=reactExports.useRef(null),d=useAccount();reactExports.useEffect(()=>{i&&e&&(console.log("fetching conversation"),fetchConversation(i,e).then(et=>{s(et),console.log(et),h.current&&h.current.scrollIntoView({behavior:"smooth"})}))},[i,e]);const g=async et=>{var tt,nt;if(et.preventDefault(),console.log(et),!i)return console.error("No topicId");if(!e)return console.error("No conversationId");if(!o)return console.error("No conversation");const rt=et.target.querySelector("#message").innerText;c(!0),et.target.querySelector("#message").innerText="",s({...o,messages:[...o.messages,{role:"user",agent:"human",userId:(d==null?void 0:d.localAccountId)||"",name:`${(tt=d==null?void 0:d.idTokenClaims)==null?void 0:tt.given_name} ${(nt=d==null?void 0:d.idTokenClaims)==null?void 0:nt.family_name}`||"Me",content:rt,timestamp:new Date().toISOString()}]});const st=await sendConversationChat(i,e,rt);s(st),c(!1)},_=(_e=o==null?void 0:o.usage)==null?void 0:_e.map(et=>et.prompt_tokens).reduce((et,rt)=>et+rt,0),b=($=o==null?void 0:o.usage)==null?void 0:$.map(et=>et.completion_tokens).reduce((et,rt)=>et+rt,0);if(!o)return jsxRuntimeExports.jsx(LoadingSpinner,{});const j=et=>{if(et.key==="Enter"&&!et.shiftKey){et.preventDefault();let rt=et.target;for(;rt.tagName!=="FORM";)rt=rt.parentElement;et.target=rt,g(et)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:i}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col  flex-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex-none h-16",children:jsxRuntimeExports.jsxs("h1",{children:["Conversation: ",o?o.name:"..."]})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[(!o.messages||o.messages.length==0)&&jsxRuntimeExports.jsx(EmptyArea,{}),o.messages&&o.messages.map((et,rt)=>jsxRuntimeExports.jsx(ChatMessage,{message:et},rt)),a&&jsxRuntimeExports.jsx(LoadingBar,{})]}),jsxRuntimeExports.jsx("div",{className:"flex-none ",ref:h,children:jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 py-4 -m-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-row items-stretch",children:jsxRuntimeExports.jsxs("form",{onSubmit:g,className:"w-full flex items-end",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("span",{role:"textbox",id:"message",className:"w-full inline-block bg-white border rounded-md min-h-12 p-2",contentEditable:!0,onKeyDown:et=>j(et)})}),jsxRuntimeExports.jsx("div",{className:"flex-0 item-bottom",children:jsxRuntimeExports.jsxs("button",{className:"btn border ml-2 border-blue-600 text-blue-600 rounded-full w-8 h-8 item-center hover:text-white hover:bg-blue-600",children:[jsxRuntimeExports.jsx("div",{className:"h-0.5"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-full w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-1"}),jsxRuntimeExports.jsx(SendIcon$1,{})]})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["Usage so far: ",_||0," prompt tokens + ",b||0," response tokens"]})})]})]})})]})]})},ExcelDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM261 1424h189q2-4 12-23t25-45 29-55 29-53 23-41 10-17q27 59 60 118t65 116h187l-209-339 205-333H707q-31 57-60 114t-63 112q-29-57-57-113t-57-113H279l199 335-217 337zm379 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm640-1024V768h512v128h-512zm0 256v-128h512v128h-512zm0 256v-128h512v128h-512z"})),displayName:"ExcelDocumentIcon"}),ExcelDocumentIcon$1=ExcelDocumentIcon,PowerPointDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM368 752v672h150v-226h100q52 0 97-15t78-46 53-72 20-97q0-56-17-97t-50-67-76-39-97-13H368zm1552 1168V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256h1280zM1536 640q79 0 149 30t122 82 83 123 30 149h-384V640zm-128 128v384h384q0 80-30 149t-82 122-123 83-149 30q-33 0-65-6t-63-18V792q31-11 63-17t65-7zm-804 300h-86V883h90q47 0 74 20t27 70q0 52-28 73t-77 22z"})),displayName:"PowerPointDocumentIcon"}),PowerPointDocumentIcon$1=PowerPointDocumentIcon,WordDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM320 1424h161q2-8 9-43t18-83 21-103 22-101 16-76 8-31l7 30q7 30 17 77t23 100 23 103 19 84 10 43h160l148-672H834l-80 438-100-438H502l-96 440-86-440H170l150 672zm320 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm640-1024V768h512v128h-512zm0 256v-128h512v128h-512zm0 256v-128h512v128h-512z"})),displayName:"WordDocumentIcon"}),WordDocumentIcon$1=WordDocumentIcon,FileIcon=({file:i})=>{const e=(i.filename.split(".").pop()||"").toLowerCase();return e==="pdf"?jsxRuntimeExports.jsx(PDFIcon$1,{}):e==="docx"?jsxRuntimeExports.jsx(WordDocumentIcon$1,{}):e==="pptx"?jsxRuntimeExports.jsx(PowerPointDocumentIcon$1,{}):e==="xlsx"?jsxRuntimeExports.jsx(ExcelDocumentIcon$1,{}):e==="docx"?jsxRuntimeExports.jsx(WordDocumentIcon$1,{}):jsxRuntimeExports.jsx(TextDocumentIcon$1,{})},STEPS=["upload_to_local","upload_to_blob","process_doc_intelligence","upload_doc_intelligence","perform_chunking","perform_embedding","postprocess_chunks","upload_to_ai_search","complete"],Progress=({step:i,progress:e})=>{const o=e.find(c=>c.step===i),s=o==null?void 0:o.success,a=s?"bg-green-600":"bg-gray-200";return jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("div",{className:"flex-0 w-16 relative h-12",children:[jsxRuntimeExports.jsx("div",{className:"absolute border-r border-gray-400 h-12 w-6 left-0 z-10"}),jsxRuntimeExports.jsxs("div",{className:"rounded-full text-center w-8 ml-2 h-8 mt-2 z-20 relative overflow-hidden "+a,children:[s&&jsxRuntimeExports.jsx(SkypeCheckIcon$1,{className:"text-white text-3xl"}),!s&&jsxRuntimeExports.jsx(LoadingSpinner,{})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-1 h-12 text-ellipsis overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"text-xl h-6",children:i}),jsxRuntimeExports.jsx("div",{className:"text-sm h-6 text-ellipsis overflow-hidden text-gray-400",children:o==null?void 0:o.message})]})]})},SingleFile=()=>{const{topicId:i,fileId:e}=useParams(),[o,s]=reactExports.useState(null),[a,c]=reactExports.useState(0);return reactExports.useEffect(()=>{async function h(d,g){if(d&&g){const _=await fetchFile(d,g);return s(_),!!_.processed}}h(i,e).then(d=>{d||setTimeout(()=>c(g=>g+1),1e3)})},[i,e,a]),!i||!e||!o?jsxRuntimeExports.jsx(LoadingBar,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:i}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1 rounded-t-md bg-gray-100 border border-gray-100",children:[jsxRuntimeExports.jsx(FileIcon,{file:o})," ",o.filename]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-100 p-1",children:[jsxRuntimeExports.jsx("div",{className:"text-lg",children:"File progress"}),jsxRuntimeExports.jsx("div",{className:"progress-container",children:STEPS.map((h,d)=>jsxRuntimeExports.jsx(Progress,{step:h,progress:o.progress},d))})]})]})]})},NewTopic=()=>{const[i,e]=reactExports.useState(""),o=useNavigate(),s=async a=>{e(""),a.preventDefault(),console.log(a);const c=a.target.querySelector("#name").value,h=a.target.querySelector("#description").value,d={name:c,description:h};try{const g=await createTopic(d);console.log(g),o(`/topics/${g.id}`)}catch(g){e(g.message)}};return jsxRuntimeExports.jsx("form",{onSubmit:s,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",placeholder:"Description",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})},NewConversation=()=>{const[i,e]=reactExports.useState(""),{topicId:o}=useParams(),s=useNavigate(),a=async c=>{if(e(""),c.preventDefault(),console.log(c),!o)return console.error("No topicId");const h=c.target.querySelector("#name").value,d=c.target.querySelector("#description").value,g={name:h,description:d};try{const _=await createConversation(o,g);console.log(_),s(`/topics/${o}/conversations/${_.id}`)}catch(_){e(_.message)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:o}),jsxRuntimeExports.jsx("form",{onSubmit:a,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",placeholder:"Description",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})]})},NewFile=()=>{const[i,e]=reactExports.useState(""),[o,s]=reactExports.useState(!1),{topicId:a}=useParams(),c=useNavigate(),h=async d=>{if(e(""),d.preventDefault(),console.log(d),!a)return console.error("No topicId");const g=d.target.querySelector("#file"),_=g.files[0].name,b=await g.files[0].arrayBuffer();console.log({filename:_,data:b});try{s(!0);const j=await createFile(a,_,b);console.log(j),s(!1),c(`/topics/${a}/files/${j.id}`)}catch(j){s(!1),e(j.message)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:a}),jsxRuntimeExports.jsx("form",{onSubmit:h,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"File "}),jsxRuntimeExports.jsx("input",{type:"file",id:"file",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",placeholder:"Description",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",disabled:o,value:o?"...":"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),o&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-blue-100 text-blue-950",children:"Uploading file. Please be patient. Depending on your file size this may take upto 5 minutes."}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})]})},NewUser=()=>{const i=async e=>{e.preventDefault(),console.log(e);const o=e.target.querySelector("#name").value,s=e.target.querySelector("#email").value,c=await createUser({name:o,email:s});console.log(c),localStorage.setItem("userId",c.userId),localStorage.setItem("token",c.userId)};return jsxRuntimeExports.jsxs("form",{onSubmit:i,children:[jsxRuntimeExports.jsxs("label",{children:["Name:",jsxRuntimeExports.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"border border-gray-800"})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("label",{children:["Email:",jsxRuntimeExports.jsx("input",{type:"text",id:"email",placeholder:"Description",className:"border border-gray-800"})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit"})]})};let title=window.TITLE||"";const tmp=document.createElement("div");tmp.innerHTML=title;title=tmp.textContent||title;const Menu=({account:i})=>{var o;const e=((o=i==null?void 0:i.idTokenClaims)==null?void 0:o.roles)||["User"];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-0"}),jsxRuntimeExports.jsx("div",{className:"fixed top-0 right-0 mt-16 min-w-64 rounded-sm shadow-lg bg-white text-blue-950 border border-gray-200",style:{zIndex:9999},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 m-2",children:["You are logged in as",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"italic",children:[" ",i.username]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 m-2",children:["You have the following roles:",jsxRuntimeExports.jsx("ul",{children:e.map((s,a)=>jsxRuntimeExports.jsx("li",{className:"italic",children:s},a))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-gray-100 p-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>handleLogout(!0),className:"border border-gray-700 hover:bg-blue-700 hover:text-white hover:shadow-md bg-white rounded-md p-2",children:"Sign out"})})]})})]})},LoggedInPanel=({account:i})=>{const[e,o]=reactExports.useState(!1),s=()=>o(!e);return jsxRuntimeExports.jsxs("div",{className:"cursor-pointer",onClick:s,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row  hover:bg-blue-200 hover:text-blue-900 transition-all duration-500",children:[jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsx("div",{className:"col1 max-w-48",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full justify-center",children:jsxRuntimeExports.jsx("div",{className:"row1 text-xl overflow-hidden",children:i.name})})}),jsxRuntimeExports.jsx(Avatar,{userId:i.localAccountId,userName:i.name})]}),e&&jsxRuntimeExports.jsx(Menu,{account:i})]})},LoggedOutPanel=()=>jsxRuntimeExports.jsx("div",{className:"w-20 h-12 flex items-center justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>handleLogin(!0),className:"border border-gray-700 hover:bg-blue-700 hover:text-white hover:shadow-md bg-white rounded-md p-2 text-blue-900",children:"Sign in"})}),Header=()=>{const{instance:i}=useMsal();let e=null;return i&&(e=i.getActiveAccount()),jsxRuntimeExports.jsxs("section",{id:"header",className:"flex flex-row h-16 overflow-hidden items-center bg-blue-950 text-blue-100",children:[jsxRuntimeExports.jsx("div",{className:"flex-grow-0 flex-shrink-0 px-2 text-3xl flex items-center",children:title}),jsxRuntimeExports.jsx(Link,{className:"p-1 underline cursor-pointer transition-all hover:bg-white hover:text-blue-600 items-center flex",to:"/",children:"Home"}),jsxRuntimeExports.jsx(Link,{className:"p-1 underline cursor-pointer transition-all hover:bg-white hover:text-blue-600 items-center flex",to:"/topics",children:"Topics"}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-0",children:[jsxRuntimeExports.jsx(AuthenticatedTemplate,{children:jsxRuntimeExports.jsx(LoggedInPanel,{account:e})}),jsxRuntimeExports.jsx(UnauthenticatedTemplate,{children:jsxRuntimeExports.jsx(LoggedOutPanel,{})})]})]})};function HomePage(){const[i,e]=reactExports.useState("");return reactExports.useEffect(()=>{wrappedFetch("/settings/homepage",{method:"GET"}).then(o=>e(o.content))},[]),jsxRuntimeExports.jsx("section",{className:"markdown-container",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx(Link,{to:"/topics",children:jsxRuntimeExports.jsx("div",{className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white",children:"Go to topics"})})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:i})})]})})}function App({instance:i}){return jsxRuntimeExports.jsx(MsalProvider,{instance:i,children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen",children:[jsxRuntimeExports.jsx("div",{id:"header",className:"flex-0",children:jsxRuntimeExports.jsx(Header,{})}),jsxRuntimeExports.jsx("div",{id:"content",className:"flex-auto overflow-auto p-2 flex flex-col",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/files/new",element:jsxRuntimeExports.jsx(NewFile,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/files/:fileId",element:jsxRuntimeExports.jsx(SingleFile,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/conversations/new",element:jsxRuntimeExports.jsx(NewConversation,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/conversations/:conversationId",element:jsxRuntimeExports.jsx(SingleConversation,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/new",element:jsxRuntimeExports.jsx(NewTopic,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId",element:jsxRuntimeExports.jsx(SingleTopic,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics",element:jsxRuntimeExports.jsx(TopicHome,{})}),jsxRuntimeExports.jsx(Route,{path:"/users",element:jsxRuntimeExports.jsx(NewUser,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{})})]})}),jsxRuntimeExports.jsxs("div",{id:"footer",className:"flex-0 h-6 bg-gray-500 text-white overflow-hidden text-sm px-6",children:["Server Version: ",SERVER_VERSION," | Frontend Version: ","1.2.0"]})]})})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{instance:msalInstance})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-BQWTNQvk.js.map
