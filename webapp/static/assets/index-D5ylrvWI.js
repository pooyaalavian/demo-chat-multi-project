var Bo=Object.defineProperty;var Ho=(i,e,o)=>e in i?Bo(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var zn=(i,e,o)=>(Ho(i,typeof e!="symbol"?e+"":e,o),o),wr=(i,e,o)=>{if(!e.has(i))throw TypeError("Cannot "+o)};var ot=(i,e,o)=>(wr(i,e,"read from private field"),o?o.call(i):e.get(i)),Ot=(i,e,o)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,o)},Yt=(i,e,o,s)=>(wr(i,e,"write to private field"),s?s.call(i,o):e.set(i,o),o);var nr=(i,e,o,s)=>({set _(a){Yt(i,e,a,o)},get _(){return ot(i,e,s)}}),jt=(i,e,o)=>(wr(i,e,"access private method"),o);function _mergeNamespaces(i,e){for(var o=0;o<e.length;o++){const s=e[o];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in i)){const c=Object.getOwnPropertyDescriptor(s,a);c&&Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var o=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var a=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(o,s,a.get?a:{enumerable:!0,get:function(){return i[s]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(i){return i===null||typeof i!="object"?null:(i=z$1&&i[z$1]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,e,o){this.props=i,this.context=e,this.refs=D$1,this.updater=o||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,e,o){this.props=i,this.context=e,this.refs=D$1,this.updater=o||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,e,o){var s,a={},c=null,d=null;if(e!=null)for(s in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,s)&&!L$1.hasOwnProperty(s)&&(a[s]=e[s]);var h=arguments.length-2;if(h===1)a.children=o;else if(1<h){for(var g=Array(h),b=0;b<h;b++)g[b]=arguments[b+2];a.children=g}if(i&&i.defaultProps)for(s in h=i.defaultProps,h)a[s]===void 0&&(a[s]=h[s]);return{$$typeof:l$1,type:i,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(o){return e[o]})}var P$1=/\/+/g;function Q$1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$1(i,e,o,s,a){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var d=!1;if(i===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=i,a=a(d),i=s===""?"."+Q$1(d,0):s,I$1(a)?(o="",i!=null&&(o=i.replace(P$1,"$&/")+"/"),R$1(a,e,o,"",function(b){return b})):a!=null&&(O$1(a)&&(a=N$1(a,o+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+i)),e.push(a)),1;if(d=0,s=s===""?".":s+":",I$1(i))for(var h=0;h<i.length;h++){c=i[h];var g=s+Q$1(c,h);d+=R$1(c,e,o,g,a)}else if(g=A$1(i),typeof g=="function")for(i=g.call(i),h=0;!(c=i.next()).done;)c=c.value,g=s+Q$1(c,h++),d+=R$1(c,e,o,g,a);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(i,e,o){if(i==null)return i;var s=[],a=0;return R$1(i,s,"","",function(c){return e.call(o,c,a++)}),s}function T$1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(o){(i._status===0||i._status===-1)&&(i._status=1,i._result=o)},function(o){(i._status===0||i._status===-1)&&(i._status=2,i._result=o)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(i,e,o){S$1(i,function(){e.apply(this,arguments)},o)},count:function(i){var e=0;return S$1(i,function(){e++}),e},toArray:function(i){return S$1(i,function(e){return e})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,e,o){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var s=C$1({},i.props),a=i.key,c=i.ref,d=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$1.current),e.key!==void 0&&(a=""+e.key),i.type&&i.type.defaultProps)var h=i.type.defaultProps;for(g in e)J.call(e,g)&&!L$1.hasOwnProperty(g)&&(s[g]=e[g]===void 0&&h!==void 0?h[g]:e[g])}var g=arguments.length-2;if(g===1)s.children=o;else if(1<g){h=Array(g);for(var b=0;b<g;b++)h[b]=arguments[b+2];s.children=h}return{$$typeof:l$1,type:i.type,key:a,ref:c,props:s,_owner:d}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var e=M$1.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,e){return{$$typeof:x,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,o){return U$1.current.useImperativeHandle(i,e,o)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,o){return U$1.current.useReducer(i,e,o)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,o){return U$1.current.useSyncExternalStore(i,e,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,o){var s,a={},c=null,d=null;o!==void 0&&(c=""+o),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(s in e)m$1.call(e,s)&&!p$1.hasOwnProperty(s)&&(a[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:k,type:i,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(kt,Ut){var St=kt.length;kt.push(Ut);e:for(;0<St;){var rn=St-1>>>1,an=kt[rn];if(0<a(an,Ut))kt[rn]=Ut,kt[St]=an,St=rn;else break e}}function o(kt){return kt.length===0?null:kt[0]}function s(kt){if(kt.length===0)return null;var Ut=kt[0],St=kt.pop();if(St!==Ut){kt[0]=St;e:for(var rn=0,an=kt.length,ht=an>>>1;rn<ht;){var ct=2*(rn+1)-1,mt=kt[ct],ut=ct+1,vt=kt[ut];if(0>a(mt,St))ut<an&&0>a(vt,mt)?(kt[rn]=vt,kt[ut]=St,rn=ut):(kt[rn]=mt,kt[ct]=St,rn=ct);else if(ut<an&&0>a(vt,St))kt[rn]=vt,kt[ut]=St,rn=ut;else break e}}return Ut}function a(kt,Ut){var St=kt.sortIndex-Ut.sortIndex;return St!==0?St:kt.id-Ut.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var g=[],b=[],_=1,j=null,$=3,_e=!1,et=!1,rt=!1,lt=typeof setTimeout=="function"?setTimeout:null,tt=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function it(kt){for(var Ut=o(b);Ut!==null;){if(Ut.callback===null)s(b);else if(Ut.startTime<=kt)s(b),Ut.sortIndex=Ut.expirationTime,e(g,Ut);else break;Ut=o(b)}}function ft(kt){if(rt=!1,it(kt),!et)if(o(g)!==null)et=!0,Bt(st);else{var Ut=o(b);Ut!==null&&Kt(ft,Ut.startTime-kt)}}function st(kt,Ut){et=!1,rt&&(rt=!1,tt(yt),yt=-1),_e=!0;var St=$;try{for(it(Ut),j=o(g);j!==null&&(!(j.expirationTime>Ut)||kt&&!Et());){var rn=j.callback;if(typeof rn=="function"){j.callback=null,$=j.priorityLevel;var an=rn(j.expirationTime<=Ut);Ut=i.unstable_now(),typeof an=="function"?j.callback=an:j===o(g)&&s(g),it(Ut)}else s(g);j=o(g)}if(j!==null)var ht=!0;else{var ct=o(b);ct!==null&&Kt(ft,ct.startTime-Ut),ht=!1}return ht}finally{j=null,$=St,_e=!1}}var at=!1,Ct=null,yt=-1,pt=5,gt=-1;function Et(){return!(i.unstable_now()-gt<pt)}function bt(){if(Ct!==null){var kt=i.unstable_now();gt=kt;var Ut=!0;try{Ut=Ct(!0,kt)}finally{Ut?Pt():(at=!1,Ct=null)}}else at=!1}var Pt;if(typeof nt=="function")Pt=function(){nt(bt)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Lt=xt.port2;xt.port1.onmessage=bt,Pt=function(){Lt.postMessage(null)}}else Pt=function(){lt(bt,0)};function Bt(kt){Ct=kt,at||(at=!0,Pt())}function Kt(kt,Ut){yt=lt(function(){kt(i.unstable_now())},Ut)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(kt){kt.callback=null},i.unstable_continueExecution=function(){et||_e||(et=!0,Bt(st))},i.unstable_forceFrameRate=function(kt){0>kt||125<kt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<kt?Math.floor(1e3/kt):5},i.unstable_getCurrentPriorityLevel=function(){return $},i.unstable_getFirstCallbackNode=function(){return o(g)},i.unstable_next=function(kt){switch($){case 1:case 2:case 3:var Ut=3;break;default:Ut=$}var St=$;$=Ut;try{return kt()}finally{$=St}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(kt,Ut){switch(kt){case 1:case 2:case 3:case 4:case 5:break;default:kt=3}var St=$;$=kt;try{return Ut()}finally{$=St}},i.unstable_scheduleCallback=function(kt,Ut,St){var rn=i.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?rn+St:rn):St=rn,kt){case 1:var an=-1;break;case 2:an=250;break;case 5:an=1073741823;break;case 4:an=1e4;break;default:an=5e3}return an=St+an,kt={id:_++,callback:Ut,priorityLevel:kt,startTime:St,expirationTime:an,sortIndex:-1},St>rn?(kt.sortIndex=St,e(b,kt),o(g)===null&&kt===o(b)&&(rt?(tt(yt),yt=-1):rt=!0,Kt(ft,St-rn))):(kt.sortIndex=an,e(g,kt),et||_e||(et=!0,Bt(st))),kt},i.unstable_shouldYield=Et,i.unstable_wrapCallback=function(kt){var Ut=$;return function(){var St=$;$=Ut;try{return kt.apply(this,arguments)}finally{$=St}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,o,s){if(o!==null&&o.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,o,s){if(e===null||typeof e>"u"||pa(i,e,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(i,e,o,s,a,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=o,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z[e]=new v(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,o,s){var a=z.hasOwnProperty(e)?z[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,o,a,s)&&(o=null),s||a===null?oa(e)&&(o===null?i.removeAttribute(e):i.setAttribute(e,""+o)):a.mustUseProperty?i[a.propertyName]=o===null?a.type===3?!1:"":o:(e=a.attributeName,s=a.attributeNamespace,o===null?i.removeAttribute(e):(a=a.type,o=a===3||a===4&&o===!0?"":""+o,s?i.setAttributeNS(s,e,o):i.setAttribute(e,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(o){var e=o.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(b){var s=b}Reflect.construct(i,[],e)}else{try{e.call()}catch(b){s=b}i.call(e.prototype)}else{try{throw Error()}catch(b){s=b}i()}}catch(b){if(b&&s&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),c=s.stack.split(`
`),d=a.length-1,h=c.length-1;1<=d&&0<=h&&a[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(a[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||a[d]!==c[h]){var g=`
`+a[d].replace(" at new "," at ");return i.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",i.displayName)),g}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),s=""+i[e];if(!i.hasOwnProperty(e)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var a=o.get,c=o.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){s=""+d,c.call(this,d)}}),Object.defineProperty(i,e,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var o=e.getValue(),s="";return i&&(s=Ta(i)?i.checked?"true":"false":i.value),i=s,i!==o?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var o=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??i._wrapperState.initialChecked})}function Za(i,e){var o=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;o=Sa(e.value!=null?e.value:o),i._wrapperState={initialChecked:s,initialValue:o,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var o=Sa(e.value),s=e.type;if(o!=null)s==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+o):i.value!==""+o&&(i.value=""+o);else if(s==="submit"||s==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,o):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,o||e===i.value||(i.value=e),i.defaultValue=e}o=i.name,o!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,o!==""&&(i.name=o)}function cb(i,e,o){(e!=="number"||Xa(i.ownerDocument)!==i)&&(o==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+o&&(i.defaultValue=""+o))}var eb=Array.isArray;function fb(i,e,o,s){if(i=i.options,e){e={};for(var a=0;a<o.length;a++)e["$"+o[a]]=!0;for(o=0;o<i.length;o++)a=e.hasOwnProperty("$"+i[o].value),i[o].selected!==a&&(i[o].selected=a),a&&s&&(i[o].defaultSelected=!0)}else{for(o=""+Sa(o),e=null,a=0;a<i.length;a++){if(i[a].value===o){i[a].selected=!0,s&&(i[a].defaultSelected=!0);return}e!==null||i[a].disabled||(e=i[a])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var o=e.value;if(o==null){if(o=e.children,e=e.defaultValue,o!=null){if(e!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}e=o}e==null&&(e=""),o=e}i._wrapperState={initialValue:Sa(o)}}function ib(i,e){var o=Sa(e.value),s=Sa(e.defaultValue);o!=null&&(o=""+o,o!==i.value&&(i.value=o),e.defaultValue==null&&i.defaultValue!==o&&(i.defaultValue=o)),s!=null&&(i.defaultValue=""+s)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,o,s,a){MSApp.execUnsafeLocalFunction(function(){return i(e,o,s,a)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,o){return e==null||typeof e=="boolean"||e===""?"":o||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var o in e)if(e.hasOwnProperty(o)){var s=o.indexOf("--")===0,a=rb(o,e[o],s);o==="float"&&(o="cssFloat"),s?i.setProperty(o,a):i[o]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,o){if(Ib)return i(e,o);Ib=!0;try{return Gb(i,e,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var o=i.stateNode;if(o===null)return null;var s=Db(o);if(s===null)return null;o=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(i=i.type,s=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!s;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(p(231,e,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,o,s,a,c,d,h,g){var b=Array.prototype.slice.call(arguments,3);try{e.apply(o,b)}catch(_){this.onError(_)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,o,s,a,c,d,h,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,o,s,a,c,d,h,g){if(Tb.apply(this,arguments),Ob){if(Ob){var b=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=b)}}function Vb(i){var e=i,o=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(o=e.return),i=e.return;while(i)}return e.tag===3?o:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var o=i,s=e;;){var a=o.return;if(a===null)break;var c=a.alternate;if(c===null){if(s=a.return,s!==null){o=s;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===o)return Xb(a),i;if(c===s)return Xb(a),e;c=c.sibling}throw Error(p(188))}if(o.return!==s.return)o=a,s=c;else{for(var d=!1,h=a.child;h;){if(h===o){d=!0,o=a,s=c;break}if(h===s){d=!0,s=a,o=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===o){d=!0,o=c,s=a;break}if(h===s){d=!0,s=c,o=a;break}h=h.sibling}if(!d)throw Error(p(189))}}if(o.alternate!==s)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var o=i.pendingLanes;if(o===0)return 0;var s=0,a=i.suspendedLanes,c=i.pingedLanes,d=o&268435455;if(d!==0){var h=d&~a;h!==0?s=tc(h):(c&=d,c!==0&&(s=tc(c)))}else d=o&~a,d!==0?s=tc(d):c!==0&&(s=tc(c));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(s&4&&(s|=o&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=s;0<e;)o=31-oc(e),a=1<<o,s|=i[o],e&=~a;return s}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var o=i.suspendedLanes,s=i.pingedLanes,a=i.expirationTimes,c=i.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,g=a[d];g===-1?(!(h&o)||h&s)&&(a[d]=vc(h,e)):g<=e&&(i.expiredLanes|=h),c&=~h}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],o=0;31>o;o++)e.push(i);return e}function Ac(i,e,o){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=o}function Bc(i,e){var o=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var s=i.eventTimes;for(i=i.expirationTimes;0<o;){var a=31-oc(o),c=1<<a;e[a]=0,s[a]=-1,i[a]=-1,o&=~c}}function Cc(i,e){var o=i.entangledLanes|=e;for(i=i.entanglements;o;){var s=31-oc(o),a=1<<s;a&e|i[s]&e&&(i[s]|=e),o&=~a}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,o,s,a,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:o,eventSystemFlags:s,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=s,e=i.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),i)}function Uc(i,e,o,s,a){switch(e){case"focusin":return Lc=Tc(Lc,i,e,o,s,a),!0;case"dragenter":return Mc=Tc(Mc,i,e,o,s,a),!0;case"mouseover":return Nc=Tc(Nc,i,e,o,s,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,o,s,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,o,s,a)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var o=Vb(e);if(o!==null){if(e=o.tag,e===13){if(e=Wb(o),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(o)});return}}else if(e===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var o=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(o===null){o=i.nativeEvent;var s=new o.constructor(o.type,o);wb=s,o.target.dispatchEvent(s),wb=null}else return e=Cb(o),e!==null&&Fc(e),i.blockedOn=o,!1;e.shift()}return!0}function Zc(i,e,o){Xc(i)&&o.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(a){return ad(a,i)}if(0<Kc.length){ad(Kc[0],i);for(var o=1;o<Kc.length;o++){var s=Kc[o];s.blockedOn===i&&(s.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),o=0;o<Qc.length;o++)s=Qc[o],s.blockedOn===i&&(s.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,o,s){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(i,e,o,s)}finally{C=a,cd.transition=c}}function gd(i,e,o,s){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(i,e,o,s)}finally{C=a,cd.transition=c}}function fd(i,e,o,s){if(dd){var a=Yc(i,e,o,s);if(a===null)hd(i,e,s,id,o),Sc(i,s);else if(Uc(a,i,e,o,s))s.stopPropagation();else if(Sc(i,s),e&4&&-1<Rc.indexOf(i)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(i,e,o,s),c===null&&hd(i,e,s,id,o),c===a)break;a=c}a!==null&&s.stopPropagation()}else hd(i,e,s,null,o)}}var id=null;function Yc(i,e,o,s){if(id=null,i=xb(s),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(o=e.tag,o===13){if(i=Wb(e),i!==null)return i;i=null}else if(o===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,o=e.length,s,a="value"in kd?kd.value:kd.textContent,c=a.length;for(i=0;i<o&&e[i]===a[i];i++);var d=o-i;for(s=1;s<=d&&e[o-s]===a[c-s];s++);return md=a.slice(i,1<s?1-s:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(o,s,a,c,d){this._reactName=o,this._targetInst=a,this.type=s,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in i)i.hasOwnProperty(h)&&(o=i[h],this[h]=o?o(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return i=e.data,i===ee&&fe?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae&&ge(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le[i.type]:e==="textarea"}function ne(i,e,o,s){Eb(s),e=oe(e,"onChange"),0<e.length&&(o=new td("onChange","change",null,o,s),i.push({event:o,listeners:e}))}var pe=null,qe=null;function re$1(i){se(i,0)}function te(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,i,xb(i)),Jb(re$1,e)}}function Ce(i,e,o){i==="focusin"?(Ae(),pe=e,qe=o,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var o=Object.keys(i),s=Object.keys(e);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var a=o[s];if(!ja.call(e,a)||!He(i[a],e[a]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var o=Je(i);i=0;for(var s;o;){if(o.nodeType===3){if(s=i+o.textContent.length,i<=e&&s>=e)return{node:o,offset:e-i};i=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var o=typeof e.contentWindow.location.href=="string"}catch{o=!1}if(o)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),o=i.focusedElem,s=i.selectionRange;if(e!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(s!==null&&Ne(o)){if(e=s.start,i=s.end,i===void 0&&(i=e),"selectionStart"in o)o.selectionStart=e,o.selectionEnd=Math.min(i,o.value.length);else if(i=(e=o.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var a=o.textContent.length,c=Math.min(s.start,a);s=s.end===void 0?c:Math.min(s.end,a),!i.extend&&c>s&&(a=s,s=c,c=a),a=Ke(o,c);var d=Ke(o,s);a&&d&&(i.rangeCount!==1||i.anchorNode!==a.node||i.anchorOffset!==a.offset||i.focusNode!==d.node||i.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),i.removeAllRanges(),c>s?(i.addRange(e),i.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),i.addRange(e)))}}for(e=[],i=o;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<e.length;o++)i=e[o],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,e,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(s)||(s=Qe,"selectionStart"in s&&Ne(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Se&&Ie(Se,s)||(Se=s,s=oe(Re,"onSelect"),0<s.length&&(e=new td("onSelect","select",null,e,o),i.push({event:e,listeners:s}),e.target=Qe)))}function Ve(i,e){var o={};return o[i.toLowerCase()]=e.toLowerCase(),o["Webkit"+i]="webkit"+e,o["Moz"+i]="moz"+e,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],o;for(o in e)if(e.hasOwnProperty(o)&&o in Ye)return Xe[i]=e[o];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,o){var s=i.type||"unknown-event";i.currentTarget=o,Ub(s,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var o=0;o<i.length;o++){var s=i[o],a=s.event;s=s.listeners;e:{var c=void 0;if(e)for(var d=s.length-1;0<=d;d--){var h=s[d],g=h.instance,b=h.currentTarget;if(h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,b),c=g}else for(d=0;d<s.length;d++){if(h=s[d],g=h.instance,b=h.currentTarget,h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,b),c=g}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,e){var o=e[of];o===void 0&&(o=e[of]=new Set);var s=i+"__bubble";o.has(s)||(pf(e,i,2,!1),o.add(s))}function qf(i,e,o){var s=0;e&&(s|=4),pf(o,i,s,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,i),qf(o,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,o,s){switch(jd(e)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}o=a.bind(null,e,o,i),a=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?i.addEventListener(e,o,{capture:!0,passive:a}):i.addEventListener(e,o,!0):a!==void 0?i.addEventListener(e,o,{passive:a}):i.addEventListener(e,o,!1)}function hd(i,e,o,s,a){var c=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var h=s.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(d===4)for(d=s.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(g=d.tag,g===5||g===6){s=c=d;continue e}h=h.parentNode}}s=s.return}Jb(function(){var b=c,_=xb(o),j=[];e:{var $=df.get(i);if($!==void 0){var _e=td,et=i;switch(i){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":_e=Rd;break;case"focusin":et="focus",_e=Fd;break;case"focusout":et="blur",_e=Fd;break;case"beforeblur":case"afterblur":_e=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Vd;break;case $e:case af:case bf:_e=Hd;break;case cf:_e=Xd;break;case"scroll":_e=vd;break;case"wheel":_e=Zd;break;case"copy":case"cut":case"paste":_e=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Td}var rt=(e&4)!==0,lt=!rt&&i==="scroll",tt=rt?$!==null?$+"Capture":null:$;rt=[];for(var nt=b,it;nt!==null;){it=nt;var ft=it.stateNode;if(it.tag===5&&ft!==null&&(it=ft,tt!==null&&(ft=Kb(nt,tt),ft!=null&&rt.push(tf(nt,ft,it)))),lt)break;nt=nt.return}0<rt.length&&($=new _e($,et,null,o,_),j.push({event:$,listeners:rt}))}}if(!(e&7)){e:{if($=i==="mouseover"||i==="pointerover",_e=i==="mouseout"||i==="pointerout",$&&o!==wb&&(et=o.relatedTarget||o.fromElement)&&(Wc(et)||et[uf]))break e;if((_e||$)&&($=_.window===_?_:($=_.ownerDocument)?$.defaultView||$.parentWindow:window,_e?(et=o.relatedTarget||o.toElement,_e=b,et=et?Wc(et):null,et!==null&&(lt=Vb(et),et!==lt||et.tag!==5&&et.tag!==6)&&(et=null)):(_e=null,et=b),_e!==et)){if(rt=Bd,ft="onMouseLeave",tt="onMouseEnter",nt="mouse",(i==="pointerout"||i==="pointerover")&&(rt=Td,ft="onPointerLeave",tt="onPointerEnter",nt="pointer"),lt=_e==null?$:ue(_e),it=et==null?$:ue(et),$=new rt(ft,nt+"leave",_e,o,_),$.target=lt,$.relatedTarget=it,ft=null,Wc(_)===b&&(rt=new rt(tt,nt+"enter",et,o,_),rt.target=it,rt.relatedTarget=lt,ft=rt),lt=ft,_e&&et)t:{for(rt=_e,tt=et,nt=0,it=rt;it;it=vf(it))nt++;for(it=0,ft=tt;ft;ft=vf(ft))it++;for(;0<nt-it;)rt=vf(rt),nt--;for(;0<it-nt;)tt=vf(tt),it--;for(;nt--;){if(rt===tt||tt!==null&&rt===tt.alternate)break t;rt=vf(rt),tt=vf(tt)}rt=null}else rt=null;_e!==null&&wf(j,$,_e,rt,!1),et!==null&&lt!==null&&wf(j,lt,et,rt,!0)}}e:{if($=b?ue(b):window,_e=$.nodeName&&$.nodeName.toLowerCase(),_e==="select"||_e==="input"&&$.type==="file")var st=ve;else if(me($))if(we)st=Fe;else{st=De;var at=Ce}else(_e=$.nodeName)&&_e.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(st=Ee);if(st&&(st=st(i,b))){ne(j,st,o,_);break e}at&&at(i,$,b),i==="focusout"&&(at=$._wrapperState)&&at.controlled&&$.type==="number"&&cb($,"number",$.value)}switch(at=b?ue(b):window,i){case"focusin":(me(at)||at.contentEditable==="true")&&(Qe=at,Re=b,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,o,_);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(j,o,_)}var Ct;if(ae)e:{switch(i){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ie?ge(i,o)&&(yt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(de&&o.locale!=="ko"&&(ie||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ie&&(Ct=nd()):(kd=_,ld="value"in kd?kd.value:kd.textContent,ie=!0)),at=oe(b,yt),0<at.length&&(yt=new Ld(yt,i,null,o,_),j.push({event:yt,listeners:at}),Ct?yt.data=Ct:(Ct=he(o),Ct!==null&&(yt.data=Ct)))),(Ct=ce?je(i,o):ke(i,o))&&(b=oe(b,"onBeforeInput"),0<b.length&&(_=new Ld("onBeforeInput","beforeinput",null,o,_),j.push({event:_,listeners:b}),_.data=Ct))}se(j,e)})}function tf(i,e,o){return{instance:i,listener:e,currentTarget:o}}function oe(i,e){for(var o=e+"Capture",s=[];i!==null;){var a=i,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(i,o),c!=null&&s.unshift(tf(i,c,a)),c=Kb(i,e),c!=null&&s.push(tf(i,c,a))),i=i.return}return s}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,o,s,a){for(var c=e._reactName,d=[];o!==null&&o!==s;){var h=o,g=h.alternate,b=h.stateNode;if(g!==null&&g===s)break;h.tag===5&&b!==null&&(h=b,a?(g=Kb(o,c),g!=null&&d.unshift(tf(o,g,h))):a||(g=Kb(o,c),g!=null&&d.push(tf(o,g,h)))),o=o.return}d.length!==0&&i.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,o){if(e=zf(e),zf(i)!==e&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var o=e,s=0;do{var a=o.nextSibling;if(i.removeChild(o),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(s===0){i.removeChild(a),bd(e);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=a}while(o);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(e===0)return i;e--}else o==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var o=i.parentNode;o;){if(e=o[uf]||o[Of]){if(o=e.alternate,e.child!==null||o!==null&&o.child!==null)for(i=Mf(i);i!==null;){if(o=i[Of])return o;i=Mf(i)}return e}i=o,o=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var o=i.type.contextTypes;if(!o)return Vf;var s=i.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in o)a[c]=e[c];return s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,e,o){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,o)}function bg(i,e,o){var s=i.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(p(108,Ra(i)||"Unknown",a));return A({},o,s)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,e,o){var s=i.stateNode;if(!s)throw Error(p(169));o?(i=bg(i,e,Xf),s.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C;try{var o=eg;for(C=1;i<o.length;i++){var s=o[i];do s=s(!0);while(s!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),a}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var s=rg;i=sg;var a=32-oc(s)-1;s&=~(1<<a),o+=1;var c=32-oc(e)+a;if(30<c){var d=a-a%5;c=(s&(1<<d)-1).toString(32),s>>=d,a-=d,rg=1<<32-oc(e)+a|o<<a|s,sg=c+i}else rg=1<<c|o<<a|s,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,e){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=e,o.return=i,e=i.deletions,e===null?(i.deletions=[o],i.flags|=16):e.push(o)}function Cg(i,e){switch(i.tag){case 5:var o=i.type;return e=e.nodeType!==1||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(o=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=e,o.return=i,i.child=o,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var e=yg;if(e){var o=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(o.nextSibling);var s=xg;e&&Cg(i,e)?Ag(s,o):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else o!=="$"&&o!=="$!"&&o!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e){if(i&&i.defaultProps){e=A({},e),i=i.defaultProps;for(var o in i)e[o]===void 0&&(e[o]=i[o]);return e}return e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var e=Mg.current;E(Mg),i._currentValue=e}function Sg(i,e,o){for(;i!==null;){var s=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),i===o)break;i=i.return}}function Tg(i,e){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ug=!0),i.firstContext=null)}function Vg(i){var e=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:e,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return e}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,e,o,s){var a=e.interleaved;return a===null?(o.next=o,Xg(e)):(o.next=a.next,a.next=o),e.interleaved=o,Zg(i,s)}function Zg(i,e){i.lanes|=e;var o=i.alternate;for(o!==null&&(o.lanes|=e),o=i,i=i.return;i!==null;)i.childLanes|=e,o=i.alternate,o!==null&&(o.childLanes|=e),o=i,i=i.return;return o.tag===3?o.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function dh(i,e,o){var s=i.updateQueue;if(s===null)return null;if(s=s.shared,K&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,Zg(i,o)}return a=s.interleaved,a===null?(e.next=e,Xg(s)):(e.next=a.next,a.next=e),s.interleaved=e,Zg(i,o)}function eh(i,e,o){if(e=e.updateQueue,e!==null&&(e=e.shared,(o&4194240)!==0)){var s=e.lanes;s&=i.pendingLanes,o|=s,e.lanes=o,Cc(i,o)}}function fh(i,e){var o=i.updateQueue,s=i.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var a=null,c=null;if(o=o.firstBaseUpdate,o!==null){do{var d={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};c===null?a=c=d:c=c.next=d,o=o.next}while(o!==null);c===null?a=c=e:c=c.next=e}else a=c=e;o={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:s.shared,effects:s.effects},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=e:i.next=e,o.lastBaseUpdate=e}function gh(i,e,o,s){var a=i.updateQueue;$g=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var g=h,b=g.next;g.next=null,d===null?c=b:d.next=b,d=g;var _=i.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==d&&(h===null?_.firstBaseUpdate=b:h.next=b,_.lastBaseUpdate=g))}if(c!==null){var j=a.baseState;d=0,_=b=g=null,h=c;do{var $=h.lane,_e=h.eventTime;if((s&$)===$){_!==null&&(_=_.next={eventTime:_e,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var et=i,rt=h;switch($=e,_e=o,rt.tag){case 1:if(et=rt.payload,typeof et=="function"){j=et.call(_e,j,$);break e}j=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=rt.payload,$=typeof et=="function"?et.call(_e,j,$):et,$==null)break e;j=A({},j,$);break e;case 2:$g=!0}}h.callback!==null&&h.lane!==0&&(i.flags|=64,$=a.effects,$===null?a.effects=[h]:$.push(h))}else _e={eventTime:_e,lane:$,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(b=_=_e,g=j):_=_.next=_e,d|=$;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;$=h,h=$.next,$.next=null,a.lastBaseUpdate=$,a.shared.pending=null}}while(!0);if(_===null&&(g=j),a.baseState=g,a.firstBaseUpdate=b,a.lastBaseUpdate=_,e=a.shared.interleaved,e!==null){a=e;do d|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);hh|=d,i.lanes=d,i.memoizedState=j}}function ih(i,e,o){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var s=i[e],a=s.callback;if(a!==null){if(s.callback=null,s=o,typeof a!="function")throw Error(p(191,a));a.call(s)}}}var jh=new aa.Component().refs;function kh(i,e,o,s){e=i.memoizedState,o=o(s,e),o=o==null?e:A({},e,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,o){i=i._reactInternals;var s=L(),a=lh(i),c=ch(s,a);c.payload=e,o!=null&&(c.callback=o),e=dh(i,c,a),e!==null&&(mh(e,i,a,s),eh(e,i,a))},enqueueReplaceState:function(i,e,o){i=i._reactInternals;var s=L(),a=lh(i),c=ch(s,a);c.tag=1,c.payload=e,o!=null&&(c.callback=o),e=dh(i,c,a),e!==null&&(mh(e,i,a,s),eh(e,i,a))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var o=L(),s=lh(i),a=ch(o,s);a.tag=2,e!=null&&(a.callback=e),e=dh(i,a,s),e!==null&&(mh(e,i,s,o),eh(e,i,s))}};function oh(i,e,o,s,a,c,d){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(s,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(o,s)||!Ie(a,c):!0}function ph(i,e,o){var s=!1,a=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=Vg(c):(a=Zf(e)?Xf:H.current,s=e.contextTypes,c=(s=s!=null)?Yf(i,a):Vf),e=new e(o,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,i.stateNode=e,e._reactInternals=i,s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=c),e}function qh(i,e,o,s){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(o,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(o,s),e.state!==i&&nh.enqueueReplaceState(e,e.state,null)}function rh(i,e,o,s){var a=i.stateNode;a.props=o,a.state=i.memoizedState,a.refs=jh,ah(i);var c=e.contextType;typeof c=="object"&&c!==null?a.context=Vg(c):(c=Zf(e)?Xf:H.current,a.context=Yf(i,c)),a.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(kh(i,e,c,o),a.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&nh.enqueueReplaceState(a,a.state,null),gh(i,o,a,s),a.state=i.memoizedState),typeof a.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,e,o){if(i=o.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var s=o.stateNode}if(!s)throw Error(p(147,i));var a=s,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var h=a.refs;h===jh&&(h=a.refs={}),d===null?delete h[c]:h[c]=d},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,i))}return i}function th(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function uh(i){var e=i._init;return e(i._payload)}function vh(i){function e(tt,nt){if(i){var it=tt.deletions;it===null?(tt.deletions=[nt],tt.flags|=16):it.push(nt)}}function o(tt,nt){if(!i)return null;for(;nt!==null;)e(tt,nt),nt=nt.sibling;return null}function s(tt,nt){for(tt=new Map;nt!==null;)nt.key!==null?tt.set(nt.key,nt):tt.set(nt.index,nt),nt=nt.sibling;return tt}function a(tt,nt){return tt=wh(tt,nt),tt.index=0,tt.sibling=null,tt}function c(tt,nt,it){return tt.index=it,i?(it=tt.alternate,it!==null?(it=it.index,it<nt?(tt.flags|=2,nt):it):(tt.flags|=2,nt)):(tt.flags|=1048576,nt)}function d(tt){return i&&tt.alternate===null&&(tt.flags|=2),tt}function h(tt,nt,it,ft){return nt===null||nt.tag!==6?(nt=xh(it,tt.mode,ft),nt.return=tt,nt):(nt=a(nt,it),nt.return=tt,nt)}function g(tt,nt,it,ft){var st=it.type;return st===ya?_(tt,nt,it.props.children,ft,it.key):nt!==null&&(nt.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ha&&uh(st)===nt.type)?(ft=a(nt,it.props),ft.ref=sh(tt,nt,it),ft.return=tt,ft):(ft=yh(it.type,it.key,it.props,null,tt.mode,ft),ft.ref=sh(tt,nt,it),ft.return=tt,ft)}function b(tt,nt,it,ft){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==it.containerInfo||nt.stateNode.implementation!==it.implementation?(nt=zh(it,tt.mode,ft),nt.return=tt,nt):(nt=a(nt,it.children||[]),nt.return=tt,nt)}function _(tt,nt,it,ft,st){return nt===null||nt.tag!==7?(nt=Ah(it,tt.mode,ft,st),nt.return=tt,nt):(nt=a(nt,it),nt.return=tt,nt)}function j(tt,nt,it){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=xh(""+nt,tt.mode,it),nt.return=tt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case va:return it=yh(nt.type,nt.key,nt.props,null,tt.mode,it),it.ref=sh(tt,null,nt),it.return=tt,it;case wa:return nt=zh(nt,tt.mode,it),nt.return=tt,nt;case Ha:var ft=nt._init;return j(tt,ft(nt._payload),it)}if(eb(nt)||Ka(nt))return nt=Ah(nt,tt.mode,it,null),nt.return=tt,nt;th(tt,nt)}return null}function $(tt,nt,it,ft){var st=nt!==null?nt.key:null;if(typeof it=="string"&&it!==""||typeof it=="number")return st!==null?null:h(tt,nt,""+it,ft);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return it.key===st?g(tt,nt,it,ft):null;case wa:return it.key===st?b(tt,nt,it,ft):null;case Ha:return st=it._init,$(tt,nt,st(it._payload),ft)}if(eb(it)||Ka(it))return st!==null?null:_(tt,nt,it,ft,null);th(tt,it)}return null}function _e(tt,nt,it,ft,st){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return tt=tt.get(it)||null,h(nt,tt,""+ft,st);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return tt=tt.get(ft.key===null?it:ft.key)||null,g(nt,tt,ft,st);case wa:return tt=tt.get(ft.key===null?it:ft.key)||null,b(nt,tt,ft,st);case Ha:var at=ft._init;return _e(tt,nt,it,at(ft._payload),st)}if(eb(ft)||Ka(ft))return tt=tt.get(it)||null,_(nt,tt,ft,st,null);th(nt,ft)}return null}function et(tt,nt,it,ft){for(var st=null,at=null,Ct=nt,yt=nt=0,pt=null;Ct!==null&&yt<it.length;yt++){Ct.index>yt?(pt=Ct,Ct=null):pt=Ct.sibling;var gt=$(tt,Ct,it[yt],ft);if(gt===null){Ct===null&&(Ct=pt);break}i&&Ct&&gt.alternate===null&&e(tt,Ct),nt=c(gt,nt,yt),at===null?st=gt:at.sibling=gt,at=gt,Ct=pt}if(yt===it.length)return o(tt,Ct),I&&tg(tt,yt),st;if(Ct===null){for(;yt<it.length;yt++)Ct=j(tt,it[yt],ft),Ct!==null&&(nt=c(Ct,nt,yt),at===null?st=Ct:at.sibling=Ct,at=Ct);return I&&tg(tt,yt),st}for(Ct=s(tt,Ct);yt<it.length;yt++)pt=_e(Ct,tt,yt,it[yt],ft),pt!==null&&(i&&pt.alternate!==null&&Ct.delete(pt.key===null?yt:pt.key),nt=c(pt,nt,yt),at===null?st=pt:at.sibling=pt,at=pt);return i&&Ct.forEach(function(Et){return e(tt,Et)}),I&&tg(tt,yt),st}function rt(tt,nt,it,ft){var st=Ka(it);if(typeof st!="function")throw Error(p(150));if(it=st.call(it),it==null)throw Error(p(151));for(var at=st=null,Ct=nt,yt=nt=0,pt=null,gt=it.next();Ct!==null&&!gt.done;yt++,gt=it.next()){Ct.index>yt?(pt=Ct,Ct=null):pt=Ct.sibling;var Et=$(tt,Ct,gt.value,ft);if(Et===null){Ct===null&&(Ct=pt);break}i&&Ct&&Et.alternate===null&&e(tt,Ct),nt=c(Et,nt,yt),at===null?st=Et:at.sibling=Et,at=Et,Ct=pt}if(gt.done)return o(tt,Ct),I&&tg(tt,yt),st;if(Ct===null){for(;!gt.done;yt++,gt=it.next())gt=j(tt,gt.value,ft),gt!==null&&(nt=c(gt,nt,yt),at===null?st=gt:at.sibling=gt,at=gt);return I&&tg(tt,yt),st}for(Ct=s(tt,Ct);!gt.done;yt++,gt=it.next())gt=_e(Ct,tt,yt,gt.value,ft),gt!==null&&(i&&gt.alternate!==null&&Ct.delete(gt.key===null?yt:gt.key),nt=c(gt,nt,yt),at===null?st=gt:at.sibling=gt,at=gt);return i&&Ct.forEach(function(bt){return e(tt,bt)}),I&&tg(tt,yt),st}function lt(tt,nt,it,ft){if(typeof it=="object"&&it!==null&&it.type===ya&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case va:e:{for(var st=it.key,at=nt;at!==null;){if(at.key===st){if(st=it.type,st===ya){if(at.tag===7){o(tt,at.sibling),nt=a(at,it.props.children),nt.return=tt,tt=nt;break e}}else if(at.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ha&&uh(st)===at.type){o(tt,at.sibling),nt=a(at,it.props),nt.ref=sh(tt,at,it),nt.return=tt,tt=nt;break e}o(tt,at);break}else e(tt,at);at=at.sibling}it.type===ya?(nt=Ah(it.props.children,tt.mode,ft,it.key),nt.return=tt,tt=nt):(ft=yh(it.type,it.key,it.props,null,tt.mode,ft),ft.ref=sh(tt,nt,it),ft.return=tt,tt=ft)}return d(tt);case wa:e:{for(at=it.key;nt!==null;){if(nt.key===at)if(nt.tag===4&&nt.stateNode.containerInfo===it.containerInfo&&nt.stateNode.implementation===it.implementation){o(tt,nt.sibling),nt=a(nt,it.children||[]),nt.return=tt,tt=nt;break e}else{o(tt,nt);break}else e(tt,nt);nt=nt.sibling}nt=zh(it,tt.mode,ft),nt.return=tt,tt=nt}return d(tt);case Ha:return at=it._init,lt(tt,nt,at(it._payload),ft)}if(eb(it))return et(tt,nt,it,ft);if(Ka(it))return rt(tt,nt,it,ft);th(tt,it)}return typeof it=="string"&&it!==""||typeof it=="number"?(it=""+it,nt!==null&&nt.tag===6?(o(tt,nt.sibling),nt=a(nt,it),nt.return=tt,tt=nt):(o(tt,nt),nt=xh(it,tt.mode,ft),nt.return=tt,tt=nt),d(tt)):o(tt,nt)}return lt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p(174));return i}function Ih(i,e){switch(G(Gh,e),G(Fh,i),G(Eh,Dh),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(Eh),G(Eh,e)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var e=Hh(Eh.current),o=lb(e,i.type);e!==o&&(G(Fh,i),G(Eh,o))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var e=i;e!==null;){if(e.tag===13){var o=e.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(i,e){if(e===null)return!1;for(var o=0;o<e.length&&o<i.length;o++)if(!He(i[o],e[o]))return!1;return!0}function Xh(i,e,o,s,a,c){if(Rh=c,N=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=o(s,a),Th){c=0;do{if(Th=!1,Uh=0,25<=c)throw Error(p(301));c+=1,P=O=null,e.updateQueue=null,Ph.current=$h,i=o(s,a)}while(Th)}if(Ph.current=ai,e=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,e)throw Error(p(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var e=P===null?N.memoizedState:P.next;if(e!==null)P=e,O=i;else{if(i===null)throw Error(p(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,e){return typeof e=="function"?e(i):e}function fi(i){var e=di(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=i;var s=O,a=s.baseQueue,c=o.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}s.baseQueue=a=c,o.pending=null}if(a!==null){c=a.next,s=s.baseState;var h=d=null,g=null,b=c;do{var _=b.lane;if((Rh&_)===_)g!==null&&(g=g.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),s=b.hasEagerState?b.eagerState:i(s,b.action);else{var j={lane:_,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};g===null?(h=g=j,d=s):g=g.next=j,N.lanes|=_,hh|=_}b=b.next}while(b!==null&&b!==c);g===null?d=s:g.next=h,He(s,e.memoizedState)||(Ug=!0),e.memoizedState=s,e.baseState=d,e.baseQueue=g,o.lastRenderedState=s}if(i=o.interleaved,i!==null){a=i;do c=a.lane,N.lanes|=c,hh|=c,a=a.next;while(a!==i)}else a===null&&(o.lanes=0);return[e.memoizedState,o.dispatch]}function gi(i){var e=di(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=i;var s=o.dispatch,a=o.pending,c=e.memoizedState;if(a!==null){o.pending=null;var d=a=a.next;do c=i(c,d.action),d=d.next;while(d!==a);He(c,e.memoizedState)||(Ug=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),o.lastRenderedState=c}return[c,s]}function hi(){}function ii(i,e){var o=N,s=di(),a=e(),c=!He(s.memoizedState,a);if(c&&(s.memoizedState=a,Ug=!0),s=s.queue,ji(ki.bind(null,o,s,i),[i]),s.getSnapshot!==e||c||P!==null&&P.memoizedState.tag&1){if(o.flags|=2048,li(9,mi.bind(null,o,s,a,e),void 0,null),R===null)throw Error(p(349));Rh&30||ni(o,e,a)}return a}function ni(i,e,o){i.flags|=16384,i={getSnapshot:e,value:o},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.stores=[i]):(o=e.stores,o===null?e.stores=[i]:o.push(i))}function mi(i,e,o,s){e.value=o,e.getSnapshot=s,oi(e)&&pi(i)}function ki(i,e,o){return o(function(){oi(e)&&pi(i)})}function oi(i){var e=i.getSnapshot;i=i.value;try{var o=e();return!He(i,o)}catch{return!0}}function pi(i){var e=Zg(i,1);e!==null&&mh(e,i,1,-1)}function qi(i){var e=ci();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},e.queue=i,i=i.dispatch=ri.bind(null,N,i),[e.memoizedState,i]}function li(i,e,o,s){return i={tag:i,create:e,destroy:o,deps:s,next:null},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.lastEffect=i.next=i):(o=e.lastEffect,o===null?e.lastEffect=i.next=i:(s=o.next,o.next=i,i.next=s,e.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,e,o,s){var a=ci();N.flags|=i,a.memoizedState=li(1|e,o,void 0,s===void 0?null:s)}function ui(i,e,o,s){var a=di();s=s===void 0?null:s;var c=void 0;if(O!==null){var d=O.memoizedState;if(c=d.destroy,s!==null&&Wh(s,d.deps)){a.memoizedState=li(e,o,c,s);return}}N.flags|=i,a.memoizedState=li(1|e,o,c,s)}function vi(i,e){return ti(8390656,8,i,e)}function ji(i,e){return ui(2048,8,i,e)}function wi(i,e){return ui(4,2,i,e)}function xi(i,e){return ui(4,4,i,e)}function yi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function zi(i,e,o){return o=o!=null?o.concat([i]):null,ui(4,4,yi.bind(null,e,i),o)}function Ai(){}function Bi(i,e){var o=di();e=e===void 0?null:e;var s=o.memoizedState;return s!==null&&e!==null&&Wh(e,s[1])?s[0]:(o.memoizedState=[i,e],i)}function Ci(i,e){var o=di();e=e===void 0?null:e;var s=o.memoizedState;return s!==null&&e!==null&&Wh(e,s[1])?s[0]:(i=i(),o.memoizedState=[i,e],i)}function Di(i,e,o){return Rh&21?(He(o,e)||(o=yc(),N.lanes|=o,hh|=o,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=o)}function Ei(i,e){var o=C;C=o!==0&&4>o?o:4,i(!0);var s=Qh.transition;Qh.transition={};try{i(!1),e()}finally{C=o,Qh.transition=s}}function Fi(){return di().memoizedState}function Gi(i,e,o){var s=lh(i);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(e,o);else if(o=Yg(i,e,o,s),o!==null){var a=L();mh(o,i,s,a),Ji(o,e,s)}}function ri(i,e,o){var s=lh(i),a={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(e,a);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,h=c(d,o);if(a.hasEagerState=!0,a.eagerState=h,He(h,d)){var g=e.interleaved;g===null?(a.next=a,Xg(e)):(a.next=g.next,g.next=a),e.interleaved=a;return}}catch{}finally{}o=Yg(i,e,a,s),o!==null&&(a=L(),mh(o,i,s,a),Ji(o,e,s))}}function Hi(i){var e=i.alternate;return i===N||e!==null&&e===N}function Ii(i,e){Th=Sh=!0;var o=i.pending;o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e}function Ji(i,e,o){if(o&4194240){var s=e.lanes;s&=i.pendingLanes,o|=s,e.lanes=o,Cc(i,o)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,e){return ci().memoizedState=[i,e===void 0?null:e],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,e,o){return o=o!=null?o.concat([i]):null,ti(4194308,4,yi.bind(null,e,i),o)},useLayoutEffect:function(i,e){return ti(4194308,4,i,e)},useInsertionEffect:function(i,e){return ti(4,2,i,e)},useMemo:function(i,e){var o=ci();return e=e===void 0?null:e,i=i(),o.memoizedState=[i,e],i},useReducer:function(i,e,o){var s=ci();return e=o!==void 0?o(e):e,s.memoizedState=s.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},s.queue=i,i=i.dispatch=Gi.bind(null,N,i),[s.memoizedState,i]},useRef:function(i){var e=ci();return i={current:i},e.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),e=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,o){var s=N,a=ci();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=e(),R===null)throw Error(p(349));Rh&30||ni(s,e,o)}a.memoizedState=o;var c={value:o,getSnapshot:e};return a.queue=c,vi(ki.bind(null,s,c,i),[i]),s.flags|=2048,li(9,mi.bind(null,s,c,o,e),void 0,null),o},useId:function(){var i=ci(),e=R.identifierPrefix;if(I){var o=sg,s=rg;o=(s&~(1<<32-oc(s)-1)).toString(32)+o,e=":"+e+"R"+o,o=Uh++,0<o&&(e+="H"+o.toString(32)),e+=":"}else o=Vh++,e=":"+e+"r"+o.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return Di(e,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return O===null?e.memoizedState=i:Di(e,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,e){try{var o="",s=e;do o+=Pa(s),s=s.return;while(s);var a=o}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:a,digest:null}}function Li(i,e,o){return{value:i,source:null,stack:o??null,digest:e??null}}function Mi(i,e){try{console.error(e.value)}catch(o){setTimeout(function(){throw o})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,e,o){o=ch(-1,o),o.tag=3,o.payload={element:null};var s=e.value;return o.callback=function(){Pi||(Pi=!0,Qi=s),Mi(i,e)},o}function Ri(i,e,o){o=ch(-1,o),o.tag=3;var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;o.payload=function(){return s(a)},o.callback=function(){Mi(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(o.callback=function(){Mi(i,e),typeof s!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),o}function Ti(i,e,o){var s=i.pingCache;if(s===null){s=i.pingCache=new Ni;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(o)||(a.add(o),i=Ui.bind(null,i,e,o),e.then(i,i))}function Vi(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Wi(i,e,o,s,a){return i.mode&1?(i.flags|=65536,i.lanes=a,i):(i===e?i.flags|=65536:(i.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(e=ch(-1,1),e.tag=2,dh(o,e,1))),o.lanes|=1),i)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(i,e,o,s){e.child=i===null?Ch(e,null,o,s):Bh(e,i.child,o,s)}function Zi(i,e,o,s,a){o=o.render;var c=e.ref;return Tg(e,a),s=Xh(i,e,o,s,c,a),o=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,$i(i,e,a)):(I&&o&&vg(e),e.flags|=1,Yi(i,e,s,a),e.child)}function aj(i,e,o,s,a){if(i===null){var c=o.type;return typeof c=="function"&&!bj(c)&&c.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(e.tag=15,e.type=c,cj(i,e,c,s,a)):(i=yh(o.type,null,s,e,e.mode,a),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&a)){var d=c.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(d,s)&&i.ref===e.ref)return $i(i,e,a)}return e.flags|=1,i=wh(c,s),i.ref=e.ref,i.return=e,e.child=i}function cj(i,e,o,s,a){if(i!==null){var c=i.memoizedProps;if(Ie(c,s)&&i.ref===e.ref)if(Ug=!1,e.pendingProps=s=c,(i.lanes&a)!==0)i.flags&131072&&(Ug=!0);else return e.lanes=i.lanes,$i(i,e,a)}return dj(i,e,o,s,a)}function ej(i,e,o){var s=e.pendingProps,a=s.children,c=i!==null?i.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=o;else{if(!(o&1073741824))return i=c!==null?c.baseLanes|o:o,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(fj,gj),gj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:o,G(fj,gj),gj|=s}else c!==null?(s=c.baseLanes|o,e.memoizedState=null):s=o,G(fj,gj),gj|=s;return Yi(i,e,a,o),e.child}function hj(i,e){var o=e.ref;(i===null&&o!==null||i!==null&&i.ref!==o)&&(e.flags|=512,e.flags|=2097152)}function dj(i,e,o,s,a){var c=Zf(o)?Xf:H.current;return c=Yf(e,c),Tg(e,a),o=Xh(i,e,o,s,c,a),s=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,$i(i,e,a)):(I&&s&&vg(e),e.flags|=1,Yi(i,e,o,a),e.child)}function ij(i,e,o,s,a){if(Zf(o)){var c=!0;cg(e)}else c=!1;if(Tg(e,a),e.stateNode===null)jj(i,e),ph(e,o,s),rh(e,o,s,a),s=!0;else if(i===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var g=d.context,b=o.contextType;typeof b=="object"&&b!==null?b=Vg(b):(b=Zf(o)?Xf:H.current,b=Yf(e,b));var _=o.getDerivedStateFromProps,j=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";j||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==s||g!==b)&&qh(e,d,s,b),$g=!1;var $=e.memoizedState;d.state=$,gh(e,s,d,a),g=e.memoizedState,h!==s||$!==g||Wf.current||$g?(typeof _=="function"&&(kh(e,o,_,s),g=e.memoizedState),(h=$g||oh(e,o,h,s,$,g,b))?(j||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=g),d.props=s,d.state=g,d.context=b,s=h):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{d=e.stateNode,bh(i,e),h=e.memoizedProps,b=e.type===e.elementType?h:Lg(e.type,h),d.props=b,j=e.pendingProps,$=d.context,g=o.contextType,typeof g=="object"&&g!==null?g=Vg(g):(g=Zf(o)?Xf:H.current,g=Yf(e,g));var _e=o.getDerivedStateFromProps;(_=typeof _e=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==j||$!==g)&&qh(e,d,s,g),$g=!1,$=e.memoizedState,d.state=$,gh(e,s,d,a);var et=e.memoizedState;h!==j||$!==et||Wf.current||$g?(typeof _e=="function"&&(kh(e,o,_e,s),et=e.memoizedState),(b=$g||oh(e,o,b,s,$,et,g)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,et,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,et,g)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=et),d.props=s,d.state=et,d.context=g,s=b):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=1024),s=!1)}return kj(i,e,o,s,c,a)}function kj(i,e,o,s,a,c){hj(i,e);var d=(e.flags&128)!==0;if(!s&&!d)return a&&dg(e,o,!1),$i(i,e,c);s=e.stateNode,Xi.current=e;var h=d&&typeof o.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,i!==null&&d?(e.child=Bh(e,i.child,null,c),e.child=Bh(e,null,h,c)):Yi(i,e,h,c),e.memoizedState=s.state,a&&dg(e,o,!0),e.child}function lj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),Ih(i,e.containerInfo)}function mj(i,e,o,s,a){return Ig(),Jg(a),e.flags|=256,Yi(i,e,o,s),e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,e,o){var s=e.pendingProps,a=M.current,c=!1,d=(e.flags&128)!==0,h;if((h=d)||(h=i!==null&&i.memoizedState===null?!1:(a&2)!==0),h?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(a|=1),G(M,a&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=s.children,i=s.fallback,c?(s=e.mode,c=e.child,d={mode:"hidden",children:d},!(s&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=qj(d,s,0,null),i=Ah(i,s,o,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=oj(o),e.memoizedState=nj,i):rj(e,d));if(a=i.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return sj(i,e,d,s,h,a,o);if(c){c=s.fallback,d=e.mode,a=i.child,h=a.sibling;var g={mode:"hidden",children:s.children};return!(d&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=g,e.deletions=null):(s=wh(a,g),s.subtreeFlags=a.subtreeFlags&14680064),h!==null?c=wh(h,c):(c=Ah(c,d,o,null),c.flags|=2),c.return=e,s.return=e,s.sibling=c,e.child=s,s=c,c=e.child,d=i.child.memoizedState,d=d===null?oj(o):{baseLanes:d.baseLanes|o,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=i.childLanes&~o,e.memoizedState=nj,s}return c=i.child,i=c.sibling,s=wh(c,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=o),s.return=e,s.sibling=null,i!==null&&(o=e.deletions,o===null?(e.deletions=[i],e.flags|=16):o.push(i)),e.child=s,e.memoizedState=null,s}function rj(i,e){return e=qj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function tj(i,e,o,s){return s!==null&&Jg(s),Bh(e,i.child,null,o),i=rj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function sj(i,e,o,s,a,c,d){if(o)return e.flags&256?(e.flags&=-257,s=Li(Error(p(422))),tj(i,e,d,s)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=s.fallback,a=e.mode,s=qj({mode:"visible",children:s.children},a,0,null),c=Ah(c,a,d,null),c.flags|=2,s.return=e,c.return=e,s.sibling=c,e.child=s,e.mode&1&&Bh(e,i.child,null,d),e.child.memoizedState=oj(d),e.memoizedState=nj,c);if(!(e.mode&1))return tj(i,e,d,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var h=s.dgst;return s=h,c=Error(p(419)),s=Li(c,s,void 0),tj(i,e,d,s)}if(h=(d&i.childLanes)!==0,Ug||h){if(s=R,s!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Zg(i,a),mh(s,i,a,-1))}return uj(),s=Li(Error(p(421))),tj(i,e,d,s)}return a.data==="$?"?(e.flags|=128,e.child=i.child,e=vj.bind(null,i),a._reactRetry=e,null):(i=c.treeContext,yg=Lf(a.nextSibling),xg=e,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=rj(e,s.children),e.flags|=4096,e)}function wj(i,e,o){i.lanes|=e;var s=i.alternate;s!==null&&(s.lanes|=e),Sg(i.return,e,o)}function xj(i,e,o,s,a){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=o,c.tailMode=a)}function yj(i,e,o){var s=e.pendingProps,a=s.revealOrder,c=s.tail;if(Yi(i,e,s.children,o),s=M.current,s&2)s=s&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,o,e);else if(i.tag===19)wj(i,o,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s&=1}if(G(M,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(o=e.child,a=null;o!==null;)i=o.alternate,i!==null&&Mh(i)===null&&(a=o),o=o.sibling;o=a,o===null?(a=e.child,e.child=null):(a=o.sibling,o.sibling=null),xj(e,!1,a,o,c);break;case"backwards":for(o=null,a=e.child,e.child=null;a!==null;){if(i=a.alternate,i!==null&&Mh(i)===null){e.child=a;break}i=a.sibling,a.sibling=o,o=a,a=i}xj(e,!0,o,null,c);break;case"together":xj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jj(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function $i(i,e,o){if(i!==null&&(e.dependencies=i.dependencies),hh|=e.lanes,!(o&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,o=wh(i,i.pendingProps),e.child=o,o.return=e;i.sibling!==null;)i=i.sibling,o=o.sibling=wh(i,i.pendingProps),o.return=e;o.sibling=null}return e.child}function zj(i,e,o){switch(e.tag){case 3:lj(e),Ig();break;case 5:Kh(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;G(Mg,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(G(M,M.current&1),e.flags|=128,null):o&e.child.childLanes?pj(i,e,o):(G(M,M.current&1),i=$i(i,e,o),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if(s=(o&e.childLanes)!==0,i.flags&128){if(s)return yj(i,e,o);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(M,M.current),s)break;return null;case 22:case 23:return e.lanes=0,ej(i,e,o)}return $i(i,e,o)}var Aj,Bj,Cj,Dj;Aj=function(i,e){for(var o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Bj=function(){};Cj=function(i,e,o,s){var a=i.memoizedProps;if(a!==s){i=e.stateNode,Hh(Eh.current);var c=null;switch(o){case"input":a=Ya(i,a),s=Ya(i,s),c=[];break;case"select":a=A({},a,{value:void 0}),s=A({},s,{value:void 0}),c=[];break;case"textarea":a=gb(i,a),s=gb(i,s),c=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(i.onclick=Bf)}ub(o,s);var d;o=null;for(b in a)if(!s.hasOwnProperty(b)&&a.hasOwnProperty(b)&&a[b]!=null)if(b==="style"){var h=a[b];for(d in h)h.hasOwnProperty(d)&&(o||(o={}),o[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in s){var g=s[b];if(h=a!=null?a[b]:void 0,s.hasOwnProperty(b)&&g!==h&&(g!=null||h!=null))if(b==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(o||(o={}),o[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(o||(o={}),o[d]=g[d])}else o||(c||(c=[]),c.push(b,o)),o=g;else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(c=c||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ea.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&D("scroll",i),c||h===g||(c=[])):(c=c||[]).push(b,g))}o&&(c=c||[]).push("style",o);var b=c;(e.updateQueue=b)&&(e.flags|=4)}};Dj=function(i,e,o,s){o!==s&&(e.flags|=4)};function Ej(i,e){if(!I)switch(i.tailMode){case"hidden":e=i.tail;for(var o=null;e!==null;)e.alternate!==null&&(o=e),e=e.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:s.sibling=null}}function S(i){var e=i.alternate!==null&&i.alternate.child===i.child,o=0,s=0;if(e)for(var a=i.child;a!==null;)o|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=i,a=a.sibling;else for(a=i.child;a!==null;)o|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=i,a=a.sibling;return i.subtreeFlags|=s,i.childLanes=o,e}function Fj(i,e,o){var s=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return s=e.stateNode,Jh(),E(Wf),E(H),Oh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,e),S(e),null;case 5:Lh(e);var a=Hh(Gh.current);if(o=e.type,i!==null&&e.stateNode!=null)Cj(i,e,o,s,a),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(i=Hh(Eh.current),Gg(e)){s=e.stateNode,o=e.type;var c=e.memoizedProps;switch(s[Of]=e,s[Pf]=c,i=(e.mode&1)!==0,o){case"dialog":D("cancel",s),D("close",s);break;case"iframe":case"object":case"embed":D("load",s);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],s);break;case"source":D("error",s);break;case"img":case"image":case"link":D("error",s),D("load",s);break;case"details":D("toggle",s);break;case"input":Za(s,c),D("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},D("invalid",s);break;case"textarea":hb(s,c),D("invalid",s)}ub(o,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?s.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(s.textContent,h,i),a=["children",h]):typeof h=="number"&&s.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(s.textContent,h,i),a=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D("scroll",s)}switch(o){case"input":Va(s),db(s,c,!0);break;case"textarea":Va(s),jb(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=Bf)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(o)),i==="http://www.w3.org/1999/xhtml"?o==="script"?(i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof s.is=="string"?i=d.createElement(o,{is:s.is}):(i=d.createElement(o),o==="select"&&(d=i,s.multiple?d.multiple=!0:s.size&&(d.size=s.size))):i=d.createElementNS(i,o),i[Of]=e,i[Pf]=s,Aj(i,e,!1,!1),e.stateNode=i;e:{switch(d=vb(o,s),o){case"dialog":D("cancel",i),D("close",i),a=s;break;case"iframe":case"object":case"embed":D("load",i),a=s;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],i);a=s;break;case"source":D("error",i),a=s;break;case"img":case"image":case"link":D("error",i),D("load",i),a=s;break;case"details":D("toggle",i),a=s;break;case"input":Za(i,s),a=Ya(i,s),D("invalid",i);break;case"option":a=s;break;case"select":i._wrapperState={wasMultiple:!!s.multiple},a=A({},s,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,s),a=gb(i,s),D("invalid",i);break;default:a=s}ub(o,a),h=a;for(c in h)if(h.hasOwnProperty(c)){var g=h[c];c==="style"?sb(i,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(i,g)):c==="children"?typeof g=="string"?(o!=="textarea"||g!=="")&&ob(i,g):typeof g=="number"&&ob(i,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D("scroll",i):g!=null&&ta(i,c,g,d))}switch(o){case"input":Va(i),db(i,s,!1);break;case"textarea":Va(i),jb(i);break;case"option":s.value!=null&&i.setAttribute("value",""+Sa(s.value));break;case"select":i.multiple=!!s.multiple,c=s.value,c!=null?fb(i,!!s.multiple,c,!1):s.defaultValue!=null&&fb(i,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(i.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(i&&e.stateNode!=null)Dj(i,e,i.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(p(166));if(o=Hh(Gh.current),Hh(Eh.current),Gg(e)){if(s=e.stateNode,o=e.memoizedProps,s[Of]=e,(c=s.nodeValue!==o)&&(i=xg,i!==null))switch(i.tag){case 3:Af(s.nodeValue,o,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(s.nodeValue,o,(i.mode&1)!==0)}c&&(e.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Of]=e,e.stateNode=s}return S(e),null;case 13:if(E(M),s=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),s!==null&&s.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Gj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=o,e):(s=s!==null,s!==(i!==null&&i.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return Jh(),Bj(i,e),i===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return Rg(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(M),c=e.memoizedState,c===null)return S(e),null;if(s=(e.flags&128)!==0,d=c.rendering,d===null)if(s)Ej(c,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(d=Mh(i),d!==null){for(e.flags|=128,Ej(c,!1),s=d.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=o,o=e.child;o!==null;)c=o,i=s,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,i=d.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),o=o.sibling;return G(M,M.current&1|2),e.child}i=i.sibling}c.tail!==null&&B()>Hj&&(e.flags|=128,s=!0,Ej(c,!1),e.lanes=4194304)}else{if(!s)if(i=Mh(d),i!==null){if(e.flags|=128,s=!0,o=i.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),Ej(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(e),null}else 2*B()-c.renderingStartTime>Hj&&o!==1073741824&&(e.flags|=128,s=!0,Ej(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(o=c.last,o!==null?o.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,o=M.current,G(M,s?o&1|2:o&1),e):(S(e),null);case 22:case 23:return Ij(),s=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?gj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Jj(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Jh(),E(Wf),E(H),Oh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(E(M),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,e){var o=i.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){W(i,e,s)}else o.current=null}function Nj(i,e,o){try{o()}catch(s){W(i,e,s)}}var Oj=!1;function Pj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var a=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{o.nodeType,c.nodeType}catch{o=null;break e}var d=0,h=-1,g=-1,b=0,_=0,j=i,$=null;t:for(;;){for(var _e;j!==o||a!==0&&j.nodeType!==3||(h=d+a),j!==c||s!==0&&j.nodeType!==3||(g=d+s),j.nodeType===3&&(d+=j.nodeValue.length),(_e=j.firstChild)!==null;)$=j,j=_e;for(;;){if(j===i)break t;if($===o&&++b===a&&(h=d),$===c&&++_===s&&(g=d),(_e=j.nextSibling)!==null)break;j=$,$=j.parentNode}j=_e}o=h===-1||g===-1?null:{start:h,end:g}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:i,selectionRange:o},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var et=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var rt=et.memoizedProps,lt=et.memoizedState,tt=e.stateNode,nt=tt.getSnapshotBeforeUpdate(e.elementType===e.type?rt:Lg(e.type,rt),lt);tt.__reactInternalSnapshotBeforeUpdate=nt}break;case 3:var it=e.stateNode.containerInfo;it.nodeType===1?it.textContent="":it.nodeType===9&&it.documentElement&&it.removeChild(it.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ft){W(e,e.return,ft)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return et=Oj,Oj=!1,et}function Qj(i,e,o){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&i)===i){var c=a.destroy;a.destroy=void 0,c!==void 0&&Nj(e,o,c)}a=a.next}while(a!==s)}}function Rj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var o=e=e.next;do{if((o.tag&i)===i){var s=o.create;o.destroy=s()}o=o.next}while(o!==e)}}function Sj(i){var e=i.ref;if(e!==null){var o=i.stateNode;switch(i.tag){case 5:i=o;break;default:i=o}typeof e=="function"?e(i):e.current=i}}function Tj(i){var e=i.alternate;e!==null&&(i.alternate=null,Tj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,e,o){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?o.nodeType===8?o.parentNode.insertBefore(i,e):o.insertBefore(i,e):(o.nodeType===8?(e=o.parentNode,e.insertBefore(i,o)):(e=o,e.appendChild(i)),o=o._reactRootContainer,o!=null||e.onclick!==null||(e.onclick=Bf));else if(s!==4&&(i=i.child,i!==null))for(Wj(i,e,o),i=i.sibling;i!==null;)Wj(i,e,o),i=i.sibling}function Xj(i,e,o){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?o.insertBefore(i,e):o.appendChild(i);else if(s!==4&&(i=i.child,i!==null))for(Xj(i,e,o),i=i.sibling;i!==null;)Xj(i,e,o),i=i.sibling}var X=null,Yj=!1;function Zj(i,e,o){for(o=o.child;o!==null;)ak(i,e,o),o=o.sibling}function ak(i,e,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Mj(o,e);case 6:var s=X,a=Yj;X=null,Zj(i,e,o),X=s,Yj=a,X!==null&&(Yj?(i=X,o=o.stateNode,i.nodeType===8?i.parentNode.removeChild(o):i.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Yj?(i=X,o=o.stateNode,i.nodeType===8?Kf(i.parentNode,o):i.nodeType===1&&Kf(i,o),bd(i)):Kf(X,o.stateNode));break;case 4:s=X,a=Yj,X=o.stateNode.containerInfo,Yj=!0,Zj(i,e,o),X=s,Yj=a;break;case 0:case 11:case 14:case 15:if(!U&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Nj(o,e,d),a=a.next}while(a!==s)}Zj(i,e,o);break;case 1:if(!U&&(Mj(o,e),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(h){W(o,e,h)}Zj(i,e,o);break;case 21:Zj(i,e,o);break;case 22:o.mode&1?(U=(s=U)||o.memoizedState!==null,Zj(i,e,o),U=s):Zj(i,e,o);break;default:Zj(i,e,o)}}function bk(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var o=i.stateNode;o===null&&(o=i.stateNode=new Lj),e.forEach(function(s){var a=ck.bind(null,i,s);o.has(s)||(o.add(s),s.then(a,a))})}}function dk(i,e){var o=e.deletions;if(o!==null)for(var s=0;s<o.length;s++){var a=o[s];try{var c=i,d=e,h=d;e:for(;h!==null;){switch(h.tag){case 5:X=h.stateNode,Yj=!1;break e;case 3:X=h.stateNode.containerInfo,Yj=!0;break e;case 4:X=h.stateNode.containerInfo,Yj=!0;break e}h=h.return}if(X===null)throw Error(p(160));ak(c,d,a),X=null,Yj=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(b){W(a,e,b)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ek(e,i),e=e.sibling}function ek(i,e){var o=i.alternate,s=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(e,i),fk(i),s&4){try{Qj(3,i,i.return),Rj(3,i)}catch(rt){W(i,i.return,rt)}try{Qj(5,i,i.return)}catch(rt){W(i,i.return,rt)}}break;case 1:dk(e,i),fk(i),s&512&&o!==null&&Mj(o,o.return);break;case 5:if(dk(e,i),fk(i),s&512&&o!==null&&Mj(o,o.return),i.flags&32){var a=i.stateNode;try{ob(a,"")}catch(rt){W(i,i.return,rt)}}if(s&4&&(a=i.stateNode,a!=null)){var c=i.memoizedProps,d=o!==null?o.memoizedProps:c,h=i.type,g=i.updateQueue;if(i.updateQueue=null,g!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(h,d);var b=vb(h,c);for(d=0;d<g.length;d+=2){var _=g[d],j=g[d+1];_==="style"?sb(a,j):_==="dangerouslySetInnerHTML"?nb(a,j):_==="children"?ob(a,j):ta(a,_,j,b)}switch(h){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var $=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var _e=c.value;_e!=null?fb(a,!!c.multiple,_e,!1):$!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(rt){W(i,i.return,rt)}}break;case 6:if(dk(e,i),fk(i),s&4){if(i.stateNode===null)throw Error(p(162));a=i.stateNode,c=i.memoizedProps;try{a.nodeValue=c}catch(rt){W(i,i.return,rt)}}break;case 3:if(dk(e,i),fk(i),s&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(rt){W(i,i.return,rt)}break;case 4:dk(e,i),fk(i);break;case 13:dk(e,i),fk(i),a=i.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(gk=B())),s&4&&bk(i);break;case 22:if(_=o!==null&&o.memoizedState!==null,i.mode&1?(U=(b=U)||_,dk(e,i),U=b):dk(e,i),fk(i),s&8192){if(b=i.memoizedState!==null,(i.stateNode.isHidden=b)&&!_&&i.mode&1)for(V=i,_=i.child;_!==null;){for(j=V=_;V!==null;){switch($=V,_e=$.child,$.tag){case 0:case 11:case 14:case 15:Qj(4,$,$.return);break;case 1:Mj($,$.return);var et=$.stateNode;if(typeof et.componentWillUnmount=="function"){s=$,o=$.return;try{e=s,et.props=e.memoizedProps,et.state=e.memoizedState,et.componentWillUnmount()}catch(rt){W(s,o,rt)}}break;case 5:Mj($,$.return);break;case 22:if($.memoizedState!==null){hk(j);continue}}_e!==null?(_e.return=$,V=_e):hk(j)}_=_.sibling}e:for(_=null,j=i;;){if(j.tag===5){if(_===null){_=j;try{a=j.stateNode,b?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=j.stateNode,g=j.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=rb("display",d))}catch(rt){W(i,i.return,rt)}}}else if(j.tag===6){if(_===null)try{j.stateNode.nodeValue=b?"":j.memoizedProps}catch(rt){W(i,i.return,rt)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===i)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===i)break e;for(;j.sibling===null;){if(j.return===null||j.return===i)break e;_===j&&(_=null),j=j.return}_===j&&(_=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:dk(e,i),fk(i),s&4&&bk(i);break;case 21:break;default:dk(e,i),fk(i)}}function fk(i){var e=i.flags;if(e&2){try{e:{for(var o=i.return;o!==null;){if(Uj(o)){var s=o;break e}o=o.return}throw Error(p(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ob(a,""),s.flags&=-33);var c=Vj(i);Xj(i,c,a);break;case 3:case 4:var d=s.stateNode.containerInfo,h=Vj(i);Wj(i,h,d);break;default:throw Error(p(161))}}catch(g){W(i,i.return,g)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function ik(i,e,o){V=i,jk(i)}function jk(i,e,o){for(var s=(i.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&s){var d=a.memoizedState!==null||Kj;if(!d){var h=a.alternate,g=h!==null&&h.memoizedState!==null||U;h=Kj;var b=U;if(Kj=d,(U=g)&&!b)for(V=a;V!==null;)d=V,g=d.child,d.tag===22&&d.memoizedState!==null?kk(a):g!==null?(g.return=d,V=g):kk(a);for(;c!==null;)V=c,jk(c),c=c.sibling;V=a,Kj=h,U=b}lk(i)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):lk(i)}}function lk(i){for(;V!==null;){var e=V;if(e.flags&8772){var o=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Rj(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!U)if(o===null)s.componentDidMount();else{var a=e.elementType===e.type?o.memoizedProps:Lg(e.type,o.memoizedProps);s.componentDidUpdate(a,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&ih(e,c,s);break;case 3:var d=e.updateQueue;if(d!==null){if(o=null,e.child!==null)switch(e.child.tag){case 5:o=e.child.stateNode;break;case 1:o=e.child.stateNode}ih(e,d,o)}break;case 5:var h=e.stateNode;if(o===null&&e.flags&4){o=h;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&o.focus();break;case"img":g.src&&(o.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var b=e.alternate;if(b!==null){var _=b.memoizedState;if(_!==null){var j=_.dehydrated;j!==null&&bd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Sj(e)}catch($){W(e,e.return,$)}}if(e===i){V=null;break}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}}function hk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var o=e.sibling;if(o!==null){o.return=e.return,V=o;break}V=e.return}}function kk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var o=e.return;try{Rj(4,e)}catch(g){W(e,o,g)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(g){W(e,a,g)}}var c=e.return;try{Sj(e)}catch(g){W(e,c,g)}break;case 5:var d=e.return;try{Sj(e)}catch(g){W(e,d,g)}}}catch(g){W(e,e.return,g)}if(e===i){V=null;break}var h=e.sibling;if(h!==null){h.return=e.return,V=h;break}V=e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok$3=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,e,o,s){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(i,o,s),(!(K&2)||i!==R)&&(i===R&&(!(K&2)&&(rk|=o),T===4&&Dk(i,Z)),Ek(i,s),o===1&&K===0&&!(e.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,e){var o=i.callbackNode;wc(i,e);var s=uc(i,i===R?Z:0);if(s===0)o!==null&&bc(o),i.callbackNode=null,i.callbackPriority=0;else if(e=s&-s,i.callbackPriority!==e){if(o!=null&&bc(o),e===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(s)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Gk(o,Hk.bind(null,i))}i.callbackPriority=e,i.callbackNode=o}}function Hk(i,e){if(Bk=-1,Ck=0,K&6)throw Error(p(327));var o=i.callbackNode;if(Ik()&&i.callbackNode!==o)return null;var s=uc(i,i===R?Z:0);if(s===0)return null;if(s&30||s&i.expiredLanes||e)e=Jk(i,s);else{e=s;var a=K;K|=2;var c=Kk();(R!==i||Z!==e)&&(vk=null,Hj=B()+500,Lk(i,e));do try{Mk();break}catch(h){Nk(i,h)}while(!0);Qg(),nk.current=c,K=a,Y!==null?e=0:(R=null,Z=0,e=T)}if(e!==0){if(e===2&&(a=xc(i),a!==0&&(s=a,e=Ok(i,a))),e===1)throw o=qk,Lk(i,0),Dk(i,s),Ek(i,B()),o;if(e===6)Dk(i,s);else{if(a=i.current.alternate,!(s&30)&&!Pk(a)&&(e=Jk(i,s),e===2&&(c=xc(i),c!==0&&(s=c,e=Ok(i,c))),e===1))throw o=qk,Lk(i,0),Dk(i,s),Ek(i,B()),o;switch(i.finishedWork=a,i.finishedLanes=s,e){case 0:case 1:throw Error(p(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,s),(s&130023424)===s&&(e=gk+500-B(),10<e)){if(uc(i,0)!==0)break;if(a=i.suspendedLanes,(a&s)!==s){L(),i.pingedLanes|=i.suspendedLanes&a;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),e);break}Qk(i,uk,vk);break;case 4:if(Dk(i,s),(s&4194240)===s)break;for(e=i.eventTimes,a=-1;0<s;){var d=31-oc(s);c=1<<d,d=e[d],d>a&&(a=d),s&=~c}if(s=a,s=B()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*mk(s/1960))-s,10<s){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),s);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p(329))}}}return Ek(i,B()),i.callbackNode===o?Hk.bind(null,i):null}function Ok(i,e){var o=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,e).flags|=256),i=Jk(i,e),i!==2&&(e=uk,uk=o,e!==null&&Gj(e)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var e=i;;){if(e.flags&16384){var o=e.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var a=o[s],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(o=e.child,e.subtreeFlags&16384&&o!==null)o.return=e,e=o;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dk(i,e){for(e&=~sk,e&=~rk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var o=31-oc(e),s=1<<o;i[o]=-1,e&=~s}}function Fk(i){if(K&6)throw Error(p(327));Ik();var e=uc(i,0);if(!(e&1))return Ek(i,B()),null;var o=Jk(i,e);if(i.tag!==0&&o===2){var s=xc(i);s!==0&&(e=s,o=Ok(i,s))}if(o===1)throw o=qk,Lk(i,0),Dk(i,e),Ek(i,B()),o;if(o===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,e){var o=K;K|=1;try{return i(e)}finally{K=o,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var e=K;K|=1;var o=pk.transition,s=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=s,pk.transition=o,K=e,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,e){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;if(o!==-1&&(i.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var s=o;switch(wg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(s);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(s.type._context);break;case 22:case 23:Ij()}o=o.return}if(R=i,Y=i=wh(i.current,null),Z=gj=e,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(e=0;e<Wg.length;e++)if(o=Wg[e],s=o.interleaved,s!==null){o.interleaved=null;var a=s.next,c=o.pending;if(c!==null){var d=c.next;c.next=a,s.next=d}o.pending=s}Wg=null}return i}function Nk(i,e){do{var o=Y;try{if(Qg(),Ph.current=ai,Sh){for(var s=N.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok$3.current=null,o===null||o.return===null){T=1,qk=e,Y=null;break}e:{var c=i,d=o.return,h=o,g=e;if(e=Z,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g,_=h,j=_.tag;if(!(_.mode&1)&&(j===0||j===11||j===15)){var $=_.alternate;$?(_.updateQueue=$.updateQueue,_.memoizedState=$.memoizedState,_.lanes=$.lanes):(_.updateQueue=null,_.memoizedState=null)}var _e=Vi(d);if(_e!==null){_e.flags&=-257,Wi(_e,d,h,c,e),_e.mode&1&&Ti(c,b,e),e=_e,g=b;var et=e.updateQueue;if(et===null){var rt=new Set;rt.add(g),e.updateQueue=rt}else et.add(g);break e}else{if(!(e&1)){Ti(c,b,e),uj();break e}g=Error(p(426))}}else if(I&&h.mode&1){var lt=Vi(d);if(lt!==null){!(lt.flags&65536)&&(lt.flags|=256),Wi(lt,d,h,c,e),Jg(Ki(g,h));break e}}c=g=Ki(g,h),T!==4&&(T=2),tk===null?tk=[c]:tk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var tt=Oi(c,g,e);fh(c,tt);break e;case 1:h=g;var nt=c.type,it=c.stateNode;if(!(c.flags&128)&&(typeof nt.getDerivedStateFromError=="function"||it!==null&&typeof it.componentDidCatch=="function"&&(Si===null||!Si.has(it)))){c.flags|=65536,e&=-e,c.lanes|=e;var ft=Ri(c,h,e);fh(c,ft);break e}}c=c.return}while(c!==null)}Tk(o)}catch(st){e=st,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(!0)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(i,e){var o=K;K|=2;var s=Kk();(R!==i||Z!==e)&&(vk=null,Lk(i,e));do try{Uk();break}catch(a){Nk(i,a)}while(!0);if(Qg(),K=o,nk.current=s,Y!==null)throw Error(p(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var e=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,e===null?Tk(i):Y=e,ok$3.current=null}function Tk(i){var e=i;do{var o=e.alternate;if(i=e.return,e.flags&32768){if(o=Jj(o,e),o!==null){o.flags&=32767,Y=o;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(o=Fj(o,e,gj),o!==null){Y=o;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T===0&&(T=5)}function Qk(i,e,o){var s=C,a=pk.transition;try{pk.transition=null,C=1,Xk(i,e,o,s)}finally{pk.transition=a,C=s}return null}function Xk(i,e,o,s){do Ik();while(xk!==null);if(K&6)throw Error(p(327));o=i.finishedWork;var a=i.finishedLanes;if(o===null)return null;if(i.finishedWork=null,i.finishedLanes=0,o===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=o.lanes|o.childLanes;if(Bc(i,c),i===R&&(Y=R=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),c=(o.flags&15990)!==0,o.subtreeFlags&15990||c){c=pk.transition,pk.transition=null;var d=C;C=1;var h=K;K|=4,ok$3.current=null,Pj(i,o),ek(o,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=o,ik(o),dc(),K=h,C=d,pk.transition=c}else i.current=o;if(wk&&(wk=!1,xk=i,yk=a),c=i.pendingLanes,c===0&&(Si=null),mc(o.stateNode),Ek(i,B()),e!==null)for(s=i.onRecoverableError,o=0;o<e.length;o++)a=e[o],s(a.value,{componentStack:a.stack,digest:a.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),c=i.pendingLanes,c&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),e=pk.transition,o=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var s=!1;else{if(i=xk,xk=null,yk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=i.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var h=c.deletions;if(h!==null){for(var g=0;g<h.length;g++){var b=h[g];for(V=b;V!==null;){var _=V;switch(_.tag){case 0:case 11:case 15:Qj(8,_,c)}var j=_.child;if(j!==null)j.return=_,V=j;else for(;V!==null;){_=V;var $=_.sibling,_e=_.return;if(Tj(_),_===b){V=null;break}if($!==null){$.return=_e,V=$;break}V=_e}}}var et=c.alternate;if(et!==null){var rt=et.child;if(rt!==null){et.child=null;do{var lt=rt.sibling;rt.sibling=null,rt=lt}while(rt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj(9,c,c.return)}var tt=c.sibling;if(tt!==null){tt.return=c.return,V=tt;break e}V=c.return}}var nt=i.current;for(V=nt;V!==null;){d=V;var it=d.child;if(d.subtreeFlags&2064&&it!==null)it.return=d,V=it;else e:for(d=nt;V!==null;){if(h=V,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Rj(9,h)}}catch(st){W(h,h.return,st)}if(h===d){V=null;break e}var ft=h.sibling;if(ft!==null){ft.return=h.return,V=ft;break e}V=h.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}s=!0}return s}finally{C=o,pk.transition=e}}return!1}function Yk(i,e,o){e=Ki(o,e),e=Oi(i,e,1),i=dh(i,e,1),e=L(),i!==null&&(Ac(i,1,e),Ek(i,e))}function W(i,e,o){if(i.tag===3)Yk(i,i,o);else for(;e!==null;){if(e.tag===3){Yk(e,i,o);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Si===null||!Si.has(s))){i=Ki(o,i),i=Ri(e,i,1),e=dh(e,i,1),i=L(),e!==null&&(Ac(e,1,i),Ek(e,i));break}}e=e.return}}function Ui(i,e,o){var s=i.pingCache;s!==null&&s.delete(e),e=L(),i.pingedLanes|=i.suspendedLanes&o,R===i&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=o),Ek(i,e)}function Zk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var o=L();i=Zg(i,e),i!==null&&(Ac(i,e,o),Ek(i,o))}function vj(i){var e=i.memoizedState,o=0;e!==null&&(o=e.retryLane),Zk(i,o)}function ck(i,e){var o=0;switch(i.tag){case 13:var s=i.stateNode,a=i.memoizedState;a!==null&&(o=a.retryLane);break;case 19:s=i.stateNode;break;default:throw Error(p(314))}s!==null&&s.delete(e),Zk(i,o)}var Wk;Wk=function(i,e,o){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&o)&&!(e.flags&128))return Ug=!1,zj(i,e,o);Ug=!!(i.flags&131072)}else Ug=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;jj(i,e),i=e.pendingProps;var a=Yf(e,H.current);Tg(e,o),a=Xh(null,e,s,i,a,o);var c=bi();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(s)?(c=!0,cg(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ah(e),a.updater=nh,e.stateNode=a,a._reactInternals=e,rh(e,s,i,o),e=kj(null,e,s,!0,c,o)):(e.tag=0,I&&c&&vg(e),Yi(null,e,a,o),e=e.child),e;case 16:s=e.elementType;e:{switch(jj(i,e),i=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=$k(s),i=Lg(s,i),a){case 0:e=dj(null,e,s,i,o);break e;case 1:e=ij(null,e,s,i,o);break e;case 11:e=Zi(null,e,s,i,o);break e;case 14:e=aj(null,e,s,Lg(s.type,i),o);break e}throw Error(p(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),dj(i,e,s,a,o);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),ij(i,e,s,a,o);case 3:e:{if(lj(e),i===null)throw Error(p(387));s=e.pendingProps,c=e.memoizedState,a=c.element,bh(i,e),gh(e,s,null,o);var d=e.memoizedState;if(s=d.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ki(Error(p(423)),e),e=mj(i,e,s,o,a);break e}else if(s!==a){a=Ki(Error(p(424)),e),e=mj(i,e,s,o,a);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,o=Ch(e,null,s,o),e.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),s===a){e=$i(i,e,o);break e}Yi(i,e,s,o)}e=e.child}return e;case 5:return Kh(e),i===null&&Eg(e),s=e.type,a=e.pendingProps,c=i!==null?i.memoizedProps:null,d=a.children,Ef(s,a)?d=null:c!==null&&Ef(s,c)&&(e.flags|=32),hj(i,e),Yi(i,e,d,o),e.child;case 6:return i===null&&Eg(e),null;case 13:return pj(i,e,o);case 4:return Ih(e,e.stateNode.containerInfo),s=e.pendingProps,i===null?e.child=Bh(e,null,s,o):Yi(i,e,s,o),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),Zi(i,e,s,a,o);case 7:return Yi(i,e,e.pendingProps,o),e.child;case 8:return Yi(i,e,e.pendingProps.children,o),e.child;case 12:return Yi(i,e,e.pendingProps.children,o),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,c=e.memoizedProps,d=a.value,G(Mg,s._currentValue),s._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){e=$i(i,e,o);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var g=h.firstContext;g!==null;){if(g.context===s){if(c.tag===1){g=ch(-1,o&-o),g.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var _=b.pending;_===null?g.next=g:(g.next=_.next,_.next=g),b.pending=g}}c.lanes|=o,g=c.alternate,g!==null&&(g.lanes|=o),Sg(c.return,o,e),h.lanes|=o;break}g=g.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=o,h=d.alternate,h!==null&&(h.lanes|=o),Sg(d,o,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Yi(i,e,a.children,o),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Tg(e,o),a=Vg(a),s=s(a),e.flags|=1,Yi(i,e,s,o),e.child;case 14:return s=e.type,a=Lg(s,e.pendingProps),a=Lg(s.type,a),aj(i,e,s,a,o);case 15:return cj(i,e,e.type,e.pendingProps,o);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Lg(s,a),jj(i,e),e.tag=1,Zf(s)?(i=!0,cg(e)):i=!1,Tg(e,o),ph(e,s,a),rh(e,s,a,o),kj(null,e,s,!0,i,o);case 19:return yj(i,e,o);case 22:return ej(i,e,o)}throw Error(p(156,e.tag))};function Gk(i,e){return ac(i,e)}function al(i,e,o,s){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,o,s){return new al(i,e,o,s)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,e){var o=i.alternate;return o===null?(o=Bg(i.tag,e,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=e,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&14680064,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o}function yh(i,e,o,s,a,c){var d=2;if(s=i,typeof i=="function")bj(i)&&(d=1);else if(typeof i=="string")d=5;else e:switch(i){case ya:return Ah(o.children,a,c,e);case za:d=8,a|=8;break;case Aa:return i=Bg(12,o,e,a|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,o,e,a),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,o,e,a),i.elementType=Fa,i.lanes=c,i;case Ia:return qj(o,a,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,s=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(d,o,e,a),e.elementType=i,e.type=s,e.lanes=c,e}function Ah(i,e,o,s){return i=Bg(7,i,s,e),i.lanes=o,i}function qj(i,e,o,s){return i=Bg(22,i,s,e),i.elementType=Ia,i.lanes=o,i.stateNode={isHidden:!1},i}function xh(i,e,o){return i=Bg(6,i,null,e),i.lanes=o,i}function zh(i,e,o){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=o,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function bl(i,e,o,s,a){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cl(i,e,o,s,a,c,d,h,g){return i=new bl(i,e,o,h,g),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(c),i}function dl(i,e,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:s==null?null:""+s,children:i,containerInfo:e,implementation:o}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var o=i.type;if(Zf(o))return bg(i,o,e)}return e}function fl(i,e,o,s,a,c,d,h,g){return i=cl(o,s,!0,i,a,c,d,h,g),i.context=el(null),o=i.current,s=L(),a=lh(o),c=ch(s,a),c.callback=e??null,dh(o,c,a),i.current.lanes=a,Ac(i,a,s),Ek(i,s),i}function gl(i,e,o,s){var a=e.current,c=L(),d=lh(a);return o=el(o),e.context===null?e.context=o:e.pendingContext=o,e=ch(c,d),e.payload={element:i},s=s===void 0?null:s,s!==null&&(e.callback=s),i=dh(a,e,d),i!==null&&(mh(i,a,d,c),eh(i,a,d)),d}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<e?o:e}}function jl(i,e){il(i,e),(i=i.alternate)&&il(i,e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));gl(i,e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Sk(function(){gl(null,i,null,null)}),e[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var o=0;o<Qc.length&&e!==0&&e<Qc[o].priority;o++);Qc.splice(o,0,i),o===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,e,o,s,a){if(a){if(typeof s=="function"){var c=s;s=function(){var b=hl(d);c.call(b)}}var d=fl(e,s,i,0,null,!1,!1,"",ql);return i._reactRootContainer=d,i[uf]=d.current,sf(i.nodeType===8?i.parentNode:i),Sk(),d}for(;a=i.lastChild;)i.removeChild(a);if(typeof s=="function"){var h=s;s=function(){var b=hl(g);h.call(b)}}var g=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=g,i[uf]=g.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(e,g,o,s)}),g}function sl(i,e,o,s,a){var c=o._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var h=a;a=function(){var g=hl(d);h.call(g)}}gl(e,d,i,a)}else d=rl(o,e,i,a,s);return hl(d)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var o=tc(e.pendingLanes);o!==0&&(Cc(e,o|1),Ek(e,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var s=Zg(i,1);if(s!==null){var a=L();mh(s,i,1,a)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var e=Zg(i,134217728);if(e!==null){var o=L();mh(e,i,134217728,o)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var e=lh(i),o=Zg(i,e);if(o!==null){var s=L();mh(o,i,e,s)}jl(i,e)}};Hc=function(){return C};Ic=function(i,e){var o=C;try{return C=i,e()}finally{C=o}};yb=function(i,e,o){switch(e){case"input":if(bb(i,o),e=o.name,o.type==="radio"&&e!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var s=o[e];if(s!==i&&s.form===i.form){var a=Db(s);if(!a)throw Error(p(90));Wa(s),bb(s,a)}}}break;case"textarea":ib(i,o);break;case"select":e=o.value,e!=null&&fb(i,!!o.multiple,e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(p(200));return dl(i,e,null,o)};reactDom_production_min.createRoot=function(i,e){if(!ol(i))throw Error(p(299));var o=!1,s="",a=ll;return e!=null&&(e.unstable_strictMode===!0&&(o=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=cl(i,1,!1,null,null,o,!1,s,a),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ml(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,e,o){if(!pl(e))throw Error(p(200));return sl(null,i,e,!0,o)};reactDom_production_min.hydrateRoot=function(i,e,o){if(!ol(i))throw Error(p(405));var s=o!=null&&o.hydratedSources||null,a=!1,c="",d=ll;if(o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onRecoverableError!==void 0&&(d=o.onRecoverableError)),e=fl(e,null,i,1,o??null,a,!1,c,d),i[uf]=e.current,sf(i),s)for(i=0;i<s.length;i++)o=s[i],a=o._getVersion,a=a(o._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[o,a]:e.mutableSourceEagerHydrationData.push(o,a);return new nl(e)};reactDom_production_min.render=function(i,e,o){if(!pl(e))throw Error(p(200));return sl(null,i,e,!1,o)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,o,s){if(!pl(o))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return sl(i,e,o,!1,s)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.15.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},_extends$2.apply(this,arguments)}var Action;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(i){i===void 0&&(i={});function e(s,a){let{pathname:c,search:d,hash:h}=s.location;return createLocation("",{pathname:c,search:d,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function o(s,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(e,o,null,i)}function invariant$1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning$2(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,o,s){return o===void 0&&(o=null),_extends$2({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:o,key:e&&e.key||s||createKey()})}function createPath(i){let{pathname:e="/",search:o="",hash:s=""}=i;return o&&o!=="?"&&(e+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function parsePath(i){let e={};if(i){let o=i.indexOf("#");o>=0&&(e.hash=i.substr(o),i=i.substr(0,o));let s=i.indexOf("?");s>=0&&(e.search=i.substr(s),i=i.substr(0,s)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,o,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,d=a.history,h=Action.Pop,g=null,b=_();b==null&&(b=0,d.replaceState(_extends$2({},d.state,{idx:b}),""));function _(){return(d.state||{idx:null}).idx}function j(){h=Action.Pop;let lt=_(),tt=lt==null?null:lt-b;b=lt,g&&g({action:h,location:rt.location,delta:tt})}function $(lt,tt){h=Action.Push;let nt=createLocation(rt.location,lt,tt);o&&o(nt,lt),b=_()+1;let it=getHistoryState(nt,b),ft=rt.createHref(nt);try{d.pushState(it,"",ft)}catch(st){if(st instanceof DOMException&&st.name==="DataCloneError")throw st;a.location.assign(ft)}c&&g&&g({action:h,location:rt.location,delta:1})}function _e(lt,tt){h=Action.Replace;let nt=createLocation(rt.location,lt,tt);o&&o(nt,lt),b=_();let it=getHistoryState(nt,b),ft=rt.createHref(nt);d.replaceState(it,"",ft),c&&g&&g({action:h,location:rt.location,delta:0})}function et(lt){let tt=a.location.origin!=="null"?a.location.origin:a.location.href,nt=typeof lt=="string"?lt:createPath(lt);return nt=nt.replace(/ $/,"%20"),invariant$1(tt,"No window.location.(origin|href) available to create URL for href: "+nt),new URL(nt,tt)}let rt={get action(){return h},get location(){return i(a,d)},listen(lt){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,j),g=lt,()=>{a.removeEventListener(PopStateEventType,j),g=null}},createHref(lt){return e(a,lt)},createURL:et,encodeLocation(lt){let tt=et(lt);return{pathname:tt.pathname,search:tt.search,hash:tt.hash}},push:$,replace:_e,go(lt){return d.go(lt)}};return rt}var ResultType;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(ResultType||(ResultType={}));function matchRoutes(i,e,o){o===void 0&&(o="/");let s=typeof e=="string"?parsePath(e):e,a=stripBasename(s.pathname||"/",o);if(a==null)return null;let c=flattenRoutes(i);rankRouteBranches(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let g=decodePath(a);d=matchRouteBranch(c[h],g)}return d}function flattenRoutes(i,e,o,s){e===void 0&&(e=[]),o===void 0&&(o=[]),s===void 0&&(s="");let a=(c,d,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(invariant$1(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let b=joinPaths([s,g.relativePath]),_=o.concat(g);c.children&&c.children.length>0&&(invariant$1(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),flattenRoutes(c.children,e,_,b)),!(c.path==null&&!c.index)&&e.push({path:b,score:computeScore(b,c.index),routesMeta:_})};return i.forEach((c,d)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))a(c,d);else for(let g of explodeOptionalSegments(c.path))a(c,d,g)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[o,...s]=e,a=o.endsWith("?"),c=o.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let d=explodeOptionalSegments(s.join("/")),h=[];return h.push(...d.map(g=>g===""?c:[c,g].join("/"))),a&&h.push(...d),h.map(g=>i.startsWith("/")&&g===""?"/":g)}function rankRouteBranches(i){i.sort((e,o)=>e.score!==o.score?o.score-e.score:compareIndexes(e.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let o=i.split("/"),s=o.length;return o.some(isSplat)&&(s+=splatPenalty),e&&(s+=indexRouteValue),o.filter(a=>!isSplat(a)).reduce((a,c)=>a+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e){let{routesMeta:o}=i,s={},a="/",c=[];for(let d=0;d<o.length;++d){let h=o[d],g=d===o.length-1,b=a==="/"?e:e.slice(a.length)||"/",_=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},b);if(!_)return null;Object.assign(s,_.params);let j=h.route;c.push({params:s,pathname:joinPaths([a,_.pathname]),pathnameBase:normalizePathname(joinPaths([a,_.pathnameBase])),route:j}),_.pathnameBase!=="/"&&(a=joinPaths([a,_.pathnameBase]))}return c}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[o,s]=compilePath(i.path,i.caseSensitive,i.end),a=e.match(o);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((b,_,j)=>{let{paramName:$,isOptional:_e}=_;if($==="*"){let rt=h[j]||"";d=c.slice(0,c.length-rt.length).replace(/(.)\/+$/,"$1")}const et=h[j];return _e&&!et?b[$]=void 0:b[$]=(et||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:d,pattern:i}}function compilePath(i,e,o){e===void 0&&(e=!1),o===void 0&&(o=!0),warning$2(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,g)=>(s.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function decodePath(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$2(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let o=e.endsWith("/")?e.length-1:e.length,s=i.charAt(o);return s&&s!=="/"?null:i.slice(o)||"/"}function resolvePath(i,e){e===void 0&&(e="/");let{pathname:o,search:s="",hash:a=""}=typeof i=="string"?parsePath(i):i;return{pathname:o?o.startsWith("/")?o:resolvePathname(o,e):e,search:normalizeSearch(s),hash:normalizeHash(a)}}function resolvePathname(i,e){let o=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?o.length>1&&o.pop():a!=="."&&o.push(a)}),o.length>1?o.join("/"):"/"}function getInvalidPathError(i,e,o,s){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(i){return i.filter((e,o)=>o===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i,e){let o=getPathContributingMatches(i);return e?o.map((s,a)=>a===i.length-1?s.pathname:s.pathnameBase):o.map(s=>s.pathnameBase)}function resolveTo(i,e,o,s){s===void 0&&(s=!1);let a;typeof i=="string"?a=parsePath(i):(a=_extends$2({},i),invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let c=i===""||a.pathname==="",d=c?"/":a.pathname,h;if(d==null)h=o;else{let j=e.length-1;if(!s&&d.startsWith("..")){let $=d.split("/");for(;$[0]==="..";)$.shift(),j-=1;a.pathname=$.join("/")}h=j>=0?e[j]:"/"}let g=resolvePath(a,h),b=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&o.endsWith("/");return!g.pathname.endsWith("/")&&(b||_)&&(g.pathname+="/"),g}const joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(i,e){let{relative:o}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:s,navigator:a}=reactExports.useContext(NavigationContext),{hash:c,pathname:d,search:h}=useResolvedPath(i,{relative:o}),g=d;return s!=="/"&&(g=d==="/"?s:joinPaths([s,d])),a.createHref({pathname:g,search:h,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let i=reactExports.useContext(DataRouterContext),{basename:e,future:o,navigator:s}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(a,o.v7_relativeSplatPath)),h=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{h.current=!0}),reactExports.useCallback(function(b,_){if(_===void 0&&(_={}),!h.current)return;if(typeof b=="number"){s.go(b);return}let j=resolveTo(b,JSON.parse(d),c,_.relative==="path");i==null&&e!=="/"&&(j.pathname=j.pathname==="/"?e:joinPaths([e,j.pathname])),(_.replace?s.replace:s.push)(j,_.state,_)},[e,s,d,c,i])}function useParams(){let{matches:i}=reactExports.useContext(RouteContext),e=i[i.length-1];return e?e.params:{}}function useResolvedPath(i,e){let{relative:o}=e===void 0?{}:e,{future:s}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(a,s.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(d),c,o==="path"),[i,d,c,o])}function useRoutes(i,e){return useRoutesImpl(i,e)}function useRoutesImpl(i,e,o,s){useInRouterContext()||invariant$1(!1);let{navigator:a}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),d=c[c.length-1],h=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let b=useLocation(),_;if(e){var j;let lt=typeof e=="string"?parsePath(e):e;g==="/"||(j=lt.pathname)!=null&&j.startsWith(g)||invariant$1(!1),_=lt}else _=b;let $=_.pathname||"/",_e=$;if(g!=="/"){let lt=g.replace(/^\//,"").split("/");_e="/"+$.replace(/^\//,"").split("/").slice(lt.length).join("/")}let et=matchRoutes(i,{pathname:_e}),rt=_renderMatches(et&&et.map(lt=>Object.assign({},lt,{params:Object.assign({},h,lt.params),pathname:joinPaths([g,a.encodeLocation?a.encodeLocation(lt.pathname).pathname:lt.pathname]),pathnameBase:lt.pathnameBase==="/"?g:joinPaths([g,a.encodeLocation?a.encodeLocation(lt.pathnameBase).pathname:lt.pathnameBase])})),c,o,s);return e&&rt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Action.Pop}},rt):rt}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),o=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),o?reactExports.createElement("pre",{style:a},o):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,o){return o.location!==e.location||o.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:o.error,location:o.location,revalidation:e.revalidation||o.revalidation}}componentDidCatch(e,o){console.error("React Router caught the following error during render",e,o)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(i){let{routeContext:e,match:o,children:s}=i,a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=o.route.id),reactExports.createElement(RouteContext.Provider,{value:e},s)}function _renderMatches(i,e,o,s){var a;if(e===void 0&&(e=[]),o===void 0&&(o=null),s===void 0&&(s=null),i==null){var c;if((c=o)!=null&&c.errors)i=o.matches;else return null}let d=i,h=(a=o)==null?void 0:a.errors;if(h!=null){let _=d.findIndex(j=>j.route.id&&(h==null?void 0:h[j.route.id]));_>=0||invariant$1(!1),d=d.slice(0,Math.min(d.length,_+1))}let g=!1,b=-1;if(o&&s&&s.v7_partialHydration)for(let _=0;_<d.length;_++){let j=d[_];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(b=_),j.route.id){let{loaderData:$,errors:_e}=o,et=j.route.loader&&$[j.route.id]===void 0&&(!_e||_e[j.route.id]===void 0);if(j.route.lazy||et){g=!0,b>=0?d=d.slice(0,b+1):d=[d[0]];break}}}return d.reduceRight((_,j,$)=>{let _e,et=!1,rt=null,lt=null;o&&(_e=h&&j.route.id?h[j.route.id]:void 0,rt=j.route.errorElement||defaultErrorElement,g&&(b<0&&$===0?(warningOnce("route-fallback",!1),et=!0,lt=null):b===$&&(et=!0,lt=j.route.hydrateFallbackElement||null)));let tt=e.concat(d.slice(0,$+1)),nt=()=>{let it;return _e?it=rt:et?it=lt:j.route.Component?it=reactExports.createElement(j.route.Component,null):j.route.element?it=j.route.element:it=_,reactExports.createElement(RenderedRoute,{match:j,routeContext:{outlet:_,matches:tt,isDataRoute:o!=null},children:it})};return o&&(j.route.ErrorBoundary||j.route.errorElement||$===0)?reactExports.createElement(RenderErrorBoundary,{location:o.location,revalidation:o.revalidation,component:rt,error:_e,children:nt(),routeContext:{outlet:null,matches:tt,isDataRoute:!0}}):nt()},null)}var DataRouterHook$1=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(DataRouterHook$1||{}),DataRouterStateHook$1=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(DataRouterStateHook$1||{});function useDataRouterContext(i){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(i){let e=useRouteContext(),o=e.matches[e.matches.length-1];return o.route.id||invariant$1(!1),o.route.id}function useRouteError(){var i;let e=reactExports.useContext(RouteErrorContext),o=useDataRouterState(DataRouterStateHook$1.UseRouteError),s=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(i=o.errors)==null?void 0:i[s]}function useNavigateStable(){let{router:i}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{o.current=!0}),reactExports.useCallback(function(a,c){c===void 0&&(c={}),o.current&&(typeof a=="number"?i.navigate(a):i.navigate(a,_extends$1({fromRouteId:e},c)))},[i,e])}const alreadyWarned={};function warningOnce(i,e,o){!e&&!alreadyWarned[i]&&(alreadyWarned[i]=!0)}function Route(i){invariant$1(!1)}function Router(i){let{basename:e="/",children:o=null,location:s,navigationType:a=Action.Pop,navigator:c,static:d=!1,future:h}=i;useInRouterContext()&&invariant$1(!1);let g=e.replace(/^\/*/,"/"),b=reactExports.useMemo(()=>({basename:g,navigator:c,static:d,future:_extends$1({v7_relativeSplatPath:!1},h)}),[g,h,c,d]);typeof s=="string"&&(s=parsePath(s));let{pathname:_="/",search:j="",hash:$="",state:_e=null,key:et="default"}=s,rt=reactExports.useMemo(()=>{let lt=stripBasename(_,g);return lt==null?null:{location:{pathname:lt,search:j,hash:$,state:_e,key:et},navigationType:a}},[g,_,j,$,_e,et,a]);return rt==null?null:reactExports.createElement(NavigationContext.Provider,{value:b},reactExports.createElement(LocationContext.Provider,{children:o,value:rt}))}function Routes(i){let{children:e,location:o}=i;return useRoutes(createRoutesFromChildren(e),o)}new Promise(()=>{});function createRoutesFromChildren(i,e){e===void 0&&(e=[]);let o=[];return reactExports.Children.forEach(i,(s,a)=>{if(!reactExports.isValidElement(s))return;let c=[...e,a];if(s.type===reactExports.Fragment){o.push.apply(o,createRoutesFromChildren(s.props.children,c));return}s.type!==Route&&invariant$1(!1),!s.props.index||!s.props.children||invariant$1(!1);let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=createRoutesFromChildren(s.props.children,c)),o.push(d)}),o}/**
 * React Router DOM v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var o={},s=Object.keys(i),a,c;for(c=0;c<s.length;c++)a=s[c],!(e.indexOf(a)>=0)&&(o[a]=i[a]);return o}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,e){return i.button===0&&(!e||e==="_self")&&!isModifiedEvent(i)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(i){let{basename:e,children:o,future:s,window:a}=i,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:a,v5Compat:!0}));let d=c.current,[h,g]=reactExports.useState({action:d.action,location:d.location}),{v7_startTransition:b}=s||{},_=reactExports.useCallback(j=>{b&&startTransitionImpl?startTransitionImpl(()=>g(j)):g(j)},[g,b]);return reactExports.useLayoutEffect(()=>d.listen(_),[d,_]),reactExports.createElement(Router,{basename:e,children:o,location:h.location,navigationType:h.action,navigator:d,future:s})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,o){let{onClick:s,relative:a,reloadDocument:c,replace:d,state:h,target:g,to:b,preventScrollReset:_,unstable_viewTransition:j}=e,$=_objectWithoutPropertiesLoose(e,_excluded),{basename:_e}=reactExports.useContext(NavigationContext),et,rt=!1;if(typeof b=="string"&&ABSOLUTE_URL_REGEX.test(b)&&(et=b,isBrowser$1))try{let it=new URL(window.location.href),ft=b.startsWith("//")?new URL(it.protocol+b):new URL(b),st=stripBasename(ft.pathname,_e);ft.origin===it.origin&&st!=null?b=st+ft.search+ft.hash:rt=!0}catch{}let lt=useHref(b,{relative:a}),tt=useLinkClickHandler(b,{replace:d,state:h,target:g,preventScrollReset:_,relative:a,unstable_viewTransition:j});function nt(it){s&&s(it),it.defaultPrevented||tt(it)}return reactExports.createElement("a",_extends({},$,{href:et||lt,onClick:rt||c?s:nt,ref:o,target:g}))});var DataRouterHook;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(i,e){let{target:o,replace:s,state:a,preventScrollReset:c,relative:d,unstable_viewTransition:h}=e===void 0?{}:e,g=useNavigate(),b=useLocation(),_=useResolvedPath(i,{relative:d});return reactExports.useCallback(j=>{if(shouldProcessLinkClick(j,o)){j.preventDefault();let $=s!==void 0?s:createPath(b)===createPath(_);g(i,{replace:$,state:a,preventScrollReset:c,relative:d,unstable_viewTransition:h})}},[b,g,_,s,a,o,i,c,d,h])}var define_import_meta_env_default={VITE_ENTRA_CLIENT_ID:"3952eac2-55db-48e3-a7cb-0c8f074a0190",VITE_ENTRA_TENANT_ID:"a7053deb-181e-4402-b6e4-7b89b67613de",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const environment_prod={production:!0,api:"/api"};console.log({env:define_import_meta_env_default});const environment=environment_prod;/*! @azure/msal-common v14.7.1 2024-02-17 */const Constants={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},HttpStatus={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},OIDC_DEFAULT_SCOPES=[Constants.OPENID_SCOPE,Constants.PROFILE_SCOPE,Constants.OFFLINE_ACCESS_SCOPE],OIDC_SCOPES=[...OIDC_DEFAULT_SCOPES,Constants.EMAIL_SCOPE],HeaderNames={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},PersistentCacheKeys={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},AADAuthorityConstants={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ClaimsRequestKeys={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},PromptValue={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},CodeChallengeMethodValues={PLAIN:"plain",S256:"S256"},ServerResponseType={QUERY:"query",FRAGMENT:"fragment"},ResponseMode={...ServerResponseType,FORM_POST:"form_post"},GrantType={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},CacheAccountType={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Separators={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},CredentialType={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},APP_METADATA="appmetadata",CLIENT_INFO="client_info",THE_FAMILY_ID="1",AUTHORITY_METADATA_CONSTANTS={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},AuthorityMetadataSource={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},SERVER_TELEM_CONSTANTS={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},AuthenticationScheme={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ThrottlingConstants={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Errors={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},PasswordGrantConstants={username:"username",password:"password"},ResponseCodes={httpSuccess:200,httpBadRequest:400},RegionDiscoverySources={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},RegionDiscoveryOutcomes={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},CacheOutcome={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},JsonWebTokenTypes={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};/*! @azure/msal-common v14.7.1 2024-02-17 */const unexpectedError="unexpected_error",postRequestFailed$1="post_request_failed";/*! @azure/msal-common v14.7.1 2024-02-17 */const AuthErrorMessages={[unexpectedError]:"Unexpected error in authentication.",[postRequestFailed$1]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class AuthError extends Error{constructor(e,o,s){const a=o?`${e}: ${o}`:e;super(a),Object.setPrototypeOf(this,AuthError.prototype),this.errorCode=e||Constants.EMPTY_STRING,this.errorMessage=o||Constants.EMPTY_STRING,this.subError=s||Constants.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function createAuthError(i,e){return new AuthError(i,e?`${AuthErrorMessages[i]} ${e}`:AuthErrorMessages[i])}/*! @azure/msal-common v14.7.1 2024-02-17 */const clientInfoDecodingError="client_info_decoding_error",clientInfoEmptyError="client_info_empty_error",tokenParsingError="token_parsing_error",nullOrEmptyToken="null_or_empty_token",endpointResolutionError="endpoints_resolution_error",networkError="network_error",openIdConfigError="openid_config_error",hashNotDeserialized="hash_not_deserialized",invalidState="invalid_state",stateMismatch="state_mismatch",stateNotFound="state_not_found",nonceMismatch="nonce_mismatch",authTimeNotFound="auth_time_not_found",maxAgeTranspired="max_age_transpired",multipleMatchingTokens="multiple_matching_tokens",multipleMatchingAccounts="multiple_matching_accounts",multipleMatchingAppMetadata="multiple_matching_appMetadata",requestCannotBeMade="request_cannot_be_made",cannotRemoveEmptyScope="cannot_remove_empty_scope",cannotAppendScopeSet="cannot_append_scopeset",emptyInputScopeSet="empty_input_scopeset",deviceCodePollingCancelled="device_code_polling_cancelled",deviceCodeExpired="device_code_expired",deviceCodeUnknownError="device_code_unknown_error",noAccountInSilentRequest="no_account_in_silent_request",invalidCacheRecord="invalid_cache_record",invalidCacheEnvironment="invalid_cache_environment",noAccountFound="no_account_found",noCryptoObject="no_crypto_object",unexpectedCredentialType="unexpected_credential_type",invalidAssertion="invalid_assertion",invalidClientCredential="invalid_client_credential",tokenRefreshRequired="token_refresh_required",userTimeoutReached="user_timeout_reached",tokenClaimsCnfRequiredForSignedJwt="token_claims_cnf_required_for_signedjwt",authorizationCodeMissingFromServerResponse="authorization_code_missing_from_server_response",bindingKeyNotRemoved="binding_key_not_removed",endSessionEndpointNotSupported="end_session_endpoint_not_supported",keyIdMissing="key_id_missing",noNetworkConnectivity$1="no_network_connectivity",userCanceled="user_canceled",missingTenantIdError="missing_tenant_id_error",methodNotImplemented="method_not_implemented",nestedAppAuthBridgeDisabled="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.7.1 2024-02-17 */const ClientAuthErrorMessages={[clientInfoDecodingError]:"The client info could not be parsed/decoded correctly",[clientInfoEmptyError]:"The client info was empty",[tokenParsingError]:"Token cannot be parsed",[nullOrEmptyToken]:"The token is null or empty",[endpointResolutionError]:"Endpoints cannot be resolved",[networkError]:"Network request failed",[openIdConfigError]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[hashNotDeserialized]:"The hash parameters could not be deserialized",[invalidState]:"State was not the expected format",[stateMismatch]:"State mismatch error",[stateNotFound]:"State not found",[nonceMismatch]:"Nonce mismatch error",[authTimeNotFound]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[maxAgeTranspired]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[multipleMatchingTokens]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[multipleMatchingAccounts]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[multipleMatchingAppMetadata]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[requestCannotBeMade]:"Token request cannot be made without authorization code or refresh token.",[cannotRemoveEmptyScope]:"Cannot remove null or empty scope from ScopeSet",[cannotAppendScopeSet]:"Cannot append ScopeSet",[emptyInputScopeSet]:"Empty input ScopeSet cannot be processed",[deviceCodePollingCancelled]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[deviceCodeExpired]:"Device code is expired.",[deviceCodeUnknownError]:"Device code stopped polling for unknown reasons.",[noAccountInSilentRequest]:"Please pass an account object, silent flow is not supported without account information",[invalidCacheRecord]:"Cache record object was null or undefined.",[invalidCacheEnvironment]:"Invalid environment when attempting to create cache entry",[noAccountFound]:"No account found in cache for given key.",[noCryptoObject]:"No crypto object detected.",[unexpectedCredentialType]:"Unexpected credential type.",[invalidAssertion]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[invalidClientCredential]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[tokenRefreshRequired]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[userTimeoutReached]:"User defined timeout for device code polling reached",[tokenClaimsCnfRequiredForSignedJwt]:"Cannot generate a POP jwt if the token_claims are not populated",[authorizationCodeMissingFromServerResponse]:"Server response does not contain an authorization code to proceed",[bindingKeyNotRemoved]:"Could not remove the credential's binding key from storage.",[endSessionEndpointNotSupported]:"The provided authority does not support logout",[keyIdMissing]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[noNetworkConnectivity$1]:"No network connectivity. Check your internet connection.",[userCanceled]:"User cancelled the flow.",[missingTenantIdError]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[methodNotImplemented]:"This method has not been implemented",[nestedAppAuthBridgeDisabled]:"The nested app auth bridge is disabled"};class ClientAuthError extends AuthError{constructor(e,o){super(e,o?`${ClientAuthErrorMessages[e]}: ${o}`:ClientAuthErrorMessages[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ClientAuthError.prototype)}}function createClientAuthError(i,e){return new ClientAuthError(i,e)}/*! @azure/msal-common v14.7.1 2024-02-17 */const DEFAULT_CRYPTO_IMPLEMENTATION={createNewGuid:()=>{throw createClientAuthError(methodNotImplemented)},base64Decode:()=>{throw createClientAuthError(methodNotImplemented)},base64Encode:()=>{throw createClientAuthError(methodNotImplemented)},async getPublicKeyThumbprint(){throw createClientAuthError(methodNotImplemented)},async removeTokenBindingKey(){throw createClientAuthError(methodNotImplemented)},async clearKeystore(){throw createClientAuthError(methodNotImplemented)},async signJwt(){throw createClientAuthError(methodNotImplemented)},async hashString(){throw createClientAuthError(methodNotImplemented)}};/*! @azure/msal-common v14.7.1 2024-02-17 */var LogLevel;(function(i){i[i.Error=0]="Error",i[i.Warning=1]="Warning",i[i.Info=2]="Info",i[i.Verbose=3]="Verbose",i[i.Trace=4]="Trace"})(LogLevel||(LogLevel={}));class Logger{constructor(e,o,s){this.level=LogLevel.Info;const a=()=>{},c=e||Logger.createDefaultLoggerOptions();this.localCallback=c.loggerCallback||a,this.piiLoggingEnabled=c.piiLoggingEnabled||!1,this.level=typeof c.logLevel=="number"?c.logLevel:LogLevel.Info,this.correlationId=c.correlationId||Constants.EMPTY_STRING,this.packageName=o||Constants.EMPTY_STRING,this.packageVersion=s||Constants.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info}}clone(e,o,s){return new Logger({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:s||this.correlationId},e,o)}logMessage(e,o){if(o.logLevel>this.level||!this.piiLoggingEnabled&&o.containsPii)return;const c=`${`[${new Date().toUTCString()}] : [${o.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${LogLevel[o.logLevel]} - ${e}`;this.executeCallback(o.logLevel,c,o.containsPii||!1)}executeCallback(e,o,s){this.localCallback&&this.localCallback(e,o,s)}error(e,o){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}errorPii(e,o){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}warning(e,o){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}warningPii(e,o){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}info(e,o){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}infoPii(e,o){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}verbose(e,o){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}verbosePii(e,o){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}trace(e,o){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!1,correlationId:o||Constants.EMPTY_STRING})}tracePii(e,o){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!0,correlationId:o||Constants.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.7.1 2024-02-17 */const name$3="@azure/msal-common",version$2="14.7.1";/*! @azure/msal-common v14.7.1 2024-02-17 */const AzureCloudInstance={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.7.1 2024-02-17 */function extractTokenClaims(i,e){const o=getJWSPayload(i);try{const s=e(o);return JSON.parse(s)}catch{throw createClientAuthError(tokenParsingError)}}function getJWSPayload(i){if(!i)throw createClientAuthError(nullOrEmptyToken);const o=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(i);if(!o||o.length<4)throw createClientAuthError(tokenParsingError);return o[2]}function checkMaxAge(i,e){if(e===0||Date.now()-3e5>i+e)throw createClientAuthError(maxAgeTranspired)}/*! @azure/msal-common v14.7.1 2024-02-17 */function nowSeconds(){return Math.round(new Date().getTime()/1e3)}function isTokenExpired(i,e){const o=Number(i)||0;return nowSeconds()+e>o}function wasClockTurnedBack(i){return Number(i)>nowSeconds()}/*! @azure/msal-common v14.7.1 2024-02-17 */function generateCredentialKey(i){return[generateAccountId(i),generateCredentialId(i),generateTarget(i),generateClaimsHash(i),generateScheme(i)].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function createIdTokenEntity(i,e,o,s,a){return{credentialType:CredentialType.ID_TOKEN,homeAccountId:i,environment:e,clientId:s,secret:o,realm:a}}function createAccessTokenEntity(i,e,o,s,a,c,d,h,g,b,_,j,$,_e,et){var lt,tt;const rt={homeAccountId:i,credentialType:CredentialType.ACCESS_TOKEN,secret:o,cachedAt:nowSeconds().toString(),expiresOn:d.toString(),extendedExpiresOn:h.toString(),environment:e,clientId:s,realm:a,target:c,tokenType:_||AuthenticationScheme.BEARER};if(j&&(rt.userAssertionHash=j),b&&(rt.refreshOn=b.toString()),_e&&(rt.requestedClaims=_e,rt.requestedClaimsHash=et),((lt=rt.tokenType)==null?void 0:lt.toLowerCase())!==AuthenticationScheme.BEARER.toLowerCase())switch(rt.credentialType=CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME,rt.tokenType){case AuthenticationScheme.POP:const nt=extractTokenClaims(o,g);if(!((tt=nt==null?void 0:nt.cnf)!=null&&tt.kid))throw createClientAuthError(tokenClaimsCnfRequiredForSignedJwt);rt.keyId=nt.cnf.kid;break;case AuthenticationScheme.SSH:rt.keyId=$}return rt}function createRefreshTokenEntity(i,e,o,s,a,c,d){const h={credentialType:CredentialType.REFRESH_TOKEN,homeAccountId:i,environment:e,clientId:s,secret:o};return c&&(h.userAssertionHash=c),a&&(h.familyId=a),d&&(h.expiresOn=d.toString()),h}function isCredentialEntity(i){return i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("credentialType")&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("secret")}function isAccessTokenEntity(i){return i?isCredentialEntity(i)&&i.hasOwnProperty("realm")&&i.hasOwnProperty("target")&&(i.credentialType===CredentialType.ACCESS_TOKEN||i.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function isIdTokenEntity(i){return i?isCredentialEntity(i)&&i.hasOwnProperty("realm")&&i.credentialType===CredentialType.ID_TOKEN:!1}function isRefreshTokenEntity(i){return i?isCredentialEntity(i)&&i.credentialType===CredentialType.REFRESH_TOKEN:!1}function generateAccountId(i){return[i.homeAccountId,i.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateCredentialId(i){const e=i.credentialType===CredentialType.REFRESH_TOKEN&&i.familyId||i.clientId;return[i.credentialType,e,i.realm||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateTarget(i){return(i.target||"").toLowerCase()}function generateClaimsHash(i){return(i.requestedClaimsHash||"").toLowerCase()}function generateScheme(i){return i.tokenType&&i.tokenType.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?i.tokenType.toLowerCase():""}function isServerTelemetryEntity(i,e){const o=i.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY)===0;let s=!0;return e&&(s=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),o&&s}function isThrottlingEntity(i,e){let o=!1;i&&(o=i.indexOf(ThrottlingConstants.THROTTLING_PREFIX)===0);let s=!0;return e&&(s=e.hasOwnProperty("throttleTime")),o&&s}function generateAppMetadataKey({environment:i,clientId:e}){return[APP_METADATA,i,e].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function isAppMetadataEntity(i,e){return e?i.indexOf(APP_METADATA)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function isAuthorityMetadataEntity(i,e){return e?i.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function generateAuthorityMetadataExpiresAt(){return nowSeconds()+AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS}function updateAuthorityEndpointMetadata(i,e,o){i.authorization_endpoint=e.authorization_endpoint,i.token_endpoint=e.token_endpoint,i.end_session_endpoint=e.end_session_endpoint,i.issuer=e.issuer,i.endpointsFromNetwork=o,i.jwks_uri=e.jwks_uri}function updateCloudDiscoveryMetadata(i,e,o){i.aliases=e.aliases,i.preferred_cache=e.preferred_cache,i.preferred_network=e.preferred_network,i.aliasesFromNetwork=o}function isAuthorityMetadataExpired(i){return i.expiresAt<=nowSeconds()}/*! @azure/msal-common v14.7.1 2024-02-17 */const redirectUriEmpty="redirect_uri_empty",claimsRequestParsingError="claims_request_parsing_error",authorityUriInsecure="authority_uri_insecure",urlParseError="url_parse_error",urlEmptyError="empty_url_error",emptyInputScopesError="empty_input_scopes_error",invalidPromptValue="invalid_prompt_value",invalidClaims="invalid_claims",tokenRequestEmpty="token_request_empty",logoutRequestEmpty="logout_request_empty",invalidCodeChallengeMethod="invalid_code_challenge_method",pkceParamsMissing="pkce_params_missing",invalidCloudDiscoveryMetadata="invalid_cloud_discovery_metadata",invalidAuthorityMetadata="invalid_authority_metadata",untrustedAuthority="untrusted_authority",missingSshJwk="missing_ssh_jwk",missingSshKid="missing_ssh_kid",missingNonceAuthenticationHeader="missing_nonce_authentication_header",invalidAuthenticationHeader="invalid_authentication_header",cannotSetOIDCOptions="cannot_set_OIDCOptions",cannotAllowNativeBroker="cannot_allow_native_broker",authorityMismatch="authority_mismatch";/*! @azure/msal-common v14.7.1 2024-02-17 */const ClientConfigurationErrorMessages={[redirectUriEmpty]:"A redirect URI is required for all calls, and none has been set.",[claimsRequestParsingError]:"Could not parse the given claims request object.",[authorityUriInsecure]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[urlParseError]:"URL could not be parsed into appropriate segments.",[urlEmptyError]:"URL was empty or null.",[emptyInputScopesError]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[invalidPromptValue]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[invalidClaims]:"Given claims parameter must be a stringified JSON object.",[tokenRequestEmpty]:"Token request was empty and not found in cache.",[logoutRequestEmpty]:"The logout request was null or undefined.",[invalidCodeChallengeMethod]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[pkceParamsMissing]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[invalidCloudDiscoveryMetadata]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[invalidAuthorityMetadata]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[untrustedAuthority]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[missingSshJwk]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[missingSshKid]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[missingNonceAuthenticationHeader]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[invalidAuthenticationHeader]:"Invalid authentication header provided",[cannotSetOIDCOptions]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[cannotAllowNativeBroker]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[authorityMismatch]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ClientConfigurationError extends AuthError{constructor(e){super(e,ClientConfigurationErrorMessages[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ClientConfigurationError.prototype)}}function createClientConfigurationError(i){return new ClientConfigurationError(i)}/*! @azure/msal-common v14.7.1 2024-02-17 */class StringUtils{static isEmptyObj(e){if(e)try{const o=JSON.parse(e);return Object.keys(o).length===0}catch{}return!0}static startsWith(e,o){return e.indexOf(o)===0}static endsWith(e,o){return e.length>=o.length&&e.lastIndexOf(o)===e.length-o.length}static queryStringToObject(e){const o={},s=e.split("&"),a=c=>decodeURIComponent(c.replace(/\+/g," "));return s.forEach(c=>{if(c.trim()){const[d,h]=c.split(/=(.+)/g,2);d&&h&&(o[a(d)]=a(h))}}),o}static trimArrayEntries(e){return e.map(o=>o.trim())}static removeEmptyStringsFromArray(e){return e.filter(o=>!!o)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,o){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(o)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ScopeSet{constructor(e){const o=e?StringUtils.trimArrayEntries([...e]):[],s=o?StringUtils.removeEmptyStringsFromArray(o):[];this.validateInputScopes(s),this.scopes=new Set,s.forEach(a=>this.scopes.add(a))}static fromString(e){const s=(e||Constants.EMPTY_STRING).split(" ");return new ScopeSet(s)}static createSearchScopes(e){const o=new ScopeSet(e);return o.containsOnlyOIDCScopes()?o.removeScope(Constants.OFFLINE_ACCESS_SCOPE):o.removeOIDCScopes(),o}validateInputScopes(e){if(!e||e.length<1)throw createClientConfigurationError(emptyInputScopesError)}containsScope(e){const o=this.printScopesLowerCase().split(" "),s=new ScopeSet(o);return e?s.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(o=>this.containsScope(o))}containsOnlyOIDCScopes(){let e=0;return OIDC_SCOPES.forEach(o=>{this.containsScope(o)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(o=>this.appendScope(o))}catch{throw createClientAuthError(cannotAppendScopeSet)}}removeScope(e){if(!e)throw createClientAuthError(cannotRemoveEmptyScope);this.scopes.delete(e.trim())}removeOIDCScopes(){OIDC_SCOPES.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);const o=new Set;return e.scopes.forEach(s=>o.add(s.toLowerCase())),this.scopes.forEach(s=>o.add(s.toLowerCase())),o}intersectingScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const o=this.unionScopeSets(e),s=e.getScopeCount(),a=this.getScopeCount();return o.size<a+s}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(o=>e.push(o)),e}printScopes(){return this.scopes?this.asArray().join(" "):Constants.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.7.1 2024-02-17 */function buildClientInfo(i,e){if(!i)throw createClientAuthError(clientInfoEmptyError);try{const o=e(i);return JSON.parse(o)}catch{throw createClientAuthError(clientInfoDecodingError)}}function buildClientInfoFromHomeAccountId(i){if(!i)throw createClientAuthError(clientInfoDecodingError);const e=i.split(Separators.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Constants.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.7.1 2024-02-17 */function tenantIdMatchesHomeTenant(i,e){return!!i&&!!e&&i===e.split(".")[1]}function buildTenantProfileFromIdTokenClaims(i,e){const{oid:o,sub:s,tid:a,name:c,tfp:d,acr:h}=e,g=a||d||h||"";return{tenantId:g,localAccountId:o||s||"",name:c,isHomeTenant:tenantIdMatchesHomeTenant(g,i)}}function updateAccountTenantProfileData(i,e,o,s){let a=i;if(e){const{isHomeTenant:c,...d}=e;a={...i,...d}}if(o){const{isHomeTenant:c,...d}=buildTenantProfileFromIdTokenClaims(i.homeAccountId,o);return a={...a,...d,idTokenClaims:o,idToken:s},a}return a}/*! @azure/msal-common v14.7.1 2024-02-17 */const AuthorityType={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.7.1 2024-02-17 */function getTenantIdFromIdTokenClaims(i){return i&&(i.tid||i.tfp||i.acr)||null}/*! @azure/msal-common v14.7.1 2024-02-17 */const ProtocolMode={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.7.1 2024-02-17 */class AccountEntity{generateAccountId(){return[this.homeAccountId,this.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return AccountEntity.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const o=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",o||e.tenantId||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,o,s){const a=new AccountEntity;o.authorityType===AuthorityType.Adfs?a.authorityType=CacheAccountType.ADFS_ACCOUNT_TYPE:o.protocolMode===ProtocolMode.AAD?a.authorityType=CacheAccountType.MSSTS_ACCOUNT_TYPE:a.authorityType=CacheAccountType.GENERIC_ACCOUNT_TYPE;let c;e.clientInfo&&s&&(c=buildClientInfo(e.clientInfo,s)),a.clientInfo=e.clientInfo,a.homeAccountId=e.homeAccountId,a.nativeAccountId=e.nativeAccountId;const d=e.environment||o&&o.getPreferredCache();if(!d)throw createClientAuthError(invalidCacheEnvironment);a.environment=d,a.realm=(c==null?void 0:c.utid)||getTenantIdFromIdTokenClaims(e.idTokenClaims)||"",a.localAccountId=(c==null?void 0:c.uid)||e.idTokenClaims.oid||e.idTokenClaims.sub||"";const h=e.idTokenClaims.preferred_username||e.idTokenClaims.upn,g=e.idTokenClaims.emails?e.idTokenClaims.emails[0]:null;if(a.username=h||g||"",a.name=e.idTokenClaims.name,a.cloudGraphHostName=e.cloudGraphHostName,a.msGraphHost=e.msGraphHost,e.tenantProfiles)a.tenantProfiles=e.tenantProfiles;else{const b=[];if(e.idTokenClaims){const _=buildTenantProfileFromIdTokenClaims(e.homeAccountId,e.idTokenClaims);b.push(_)}a.tenantProfiles=b}return a}static createFromAccountInfo(e,o,s){var c;const a=new AccountEntity;return a.authorityType=e.authorityType||CacheAccountType.GENERIC_ACCOUNT_TYPE,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.cloudGraphHostName=o,a.msGraphHost=s,a.tenantProfiles=Array.from(((c=e.tenantProfiles)==null?void 0:c.values())||[]),a}static generateHomeAccountId(e,o,s,a,c){if(!(o===AuthorityType.Adfs||o===AuthorityType.Dsts)){if(e)try{const d=buildClientInfo(e,a.base64Decode);if(d.uid&&d.utid)return`${d.uid}.${d.utid}`}catch{}s.warning("No client info in response")}return(c==null?void 0:c.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,o,s){if(!e||!o)return!1;let a=!0;if(s){const c=e.idTokenClaims||{},d=o.idTokenClaims||{};a=c.iat===d.iat&&c.nonce===d.nonce}return e.homeAccountId===o.homeAccountId&&e.localAccountId===o.localAccountId&&e.username===o.username&&e.tenantId===o.tenantId&&e.environment===o.environment&&e.nativeAccountId===o.nativeAccountId&&a}}/*! @azure/msal-common v14.7.1 2024-02-17 */function stripLeadingHashOrQuery(i){return i.startsWith("#/")?i.substring(2):i.startsWith("#")||i.startsWith("?")?i.substring(1):i}function getDeserializedResponse(i){if(!i||i.indexOf("=")<0)return null;try{const e=stripLeadingHashOrQuery(i),o=Object.fromEntries(new URLSearchParams(e));if(o.code||o.error||o.error_description||o.state)return o}catch{throw createClientAuthError(hashNotDeserialized)}return null}/*! @azure/msal-common v14.7.1 2024-02-17 */class UrlString{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw createClientConfigurationError(urlEmptyError);e.includes("#")||(this._urlString=UrlString.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let o=e.toLowerCase();return StringUtils.endsWith(o,"?")?o=o.slice(0,-1):StringUtils.endsWith(o,"?/")&&(o=o.slice(0,-2)),StringUtils.endsWith(o,"/")||(o+="/"),o}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw createClientConfigurationError(urlParseError)}if(!e.HostNameAndPort||!e.PathSegments)throw createClientConfigurationError(urlParseError);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw createClientConfigurationError(authorityUriInsecure)}static appendQueryString(e,o){return o?e.indexOf("?")<0?`${e}?${o}`:`${e}&${o}`:e}static removeHashFromUrl(e){return UrlString.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const o=this.getUrlComponents(),s=o.PathSegments;return e&&s.length!==0&&(s[0]===AADAuthorityConstants.COMMON||s[0]===AADAuthorityConstants.ORGANIZATIONS)&&(s[0]=e),UrlString.constructAuthorityUriFromObject(o)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),o=this.urlString.match(e);if(!o)throw createClientConfigurationError(urlParseError);const s={Protocol:o[1],HostNameAndPort:o[4],AbsolutePath:o[5],QueryString:o[7]};let a=s.AbsolutePath.split("/");return a=a.filter(c=>c&&c.length>0),s.PathSegments=a,s.QueryString&&s.QueryString.endsWith("/")&&(s.QueryString=s.QueryString.substring(0,s.QueryString.length-1)),s}static getDomainFromUrl(e){const o=RegExp("^([^:/?#]+://)?([^/?#]*)"),s=e.match(o);if(!s)throw createClientConfigurationError(urlParseError);return s[2]}static getAbsoluteUrl(e,o){if(e[0]===Constants.FORWARD_SLASH){const a=new UrlString(o).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new UrlString(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!getDeserializedResponse(e)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const rawMetdataJSON={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},EndpointMetadata=rawMetdataJSON.endpointMetadata,InstanceDiscoveryMetadata=rawMetdataJSON.instanceDiscoveryMetadata,InstanceDiscoveryMetadataAliases=new Set;InstanceDiscoveryMetadata.metadata.forEach(i=>{i.aliases.forEach(e=>{InstanceDiscoveryMetadataAliases.add(e)})});function getAliasesFromStaticSources(i,e){var a;let o;const s=i.canonicalAuthority;if(s){const c=new UrlString(s).getUrlComponents().HostNameAndPort;o=getAliasesFromMetadata(c,(a=i.cloudDiscoveryMetadata)==null?void 0:a.metadata,AuthorityMetadataSource.CONFIG,e)||getAliasesFromMetadata(c,InstanceDiscoveryMetadata.metadata,AuthorityMetadataSource.HARDCODED_VALUES,e)||i.knownAuthorities}return o||[]}function getAliasesFromMetadata(i,e,o,s){if(s==null||s.trace(`getAliasesFromMetadata called with source: ${o}`),i&&e){const a=getCloudDiscoveryMetadataFromNetworkResponse(e,i);if(a)return s==null||s.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${o}, returning aliases`),a.aliases;s==null||s.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${o}`)}return null}function getCloudDiscoveryMetadataFromHardcodedValues(i){return getCloudDiscoveryMetadataFromNetworkResponse(InstanceDiscoveryMetadata.metadata,i)}function getCloudDiscoveryMetadataFromNetworkResponse(i,e){for(let o=0;o<i.length;o++){const s=i[o];if(s.aliases.includes(e))return s}return null}/*! @azure/msal-common v14.7.1 2024-02-17 */class CacheManager{constructor(e,o,s,a){this.clientId=e,this.cryptoImpl=o,this.commonLogger=s.clone(name$3,version$2),this.staticAuthorityOptions=a}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const o=this.getAllAccounts(e);return o.length>1?o.sort(a=>a.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(e){const o=this.getAccountsFilteredBy(e);return o.length>0?o[0].getAccountInfo():null}buildTenantProfiles(e,o){return e.flatMap(s=>this.getAccountInfoForTenantProfiles(s,o))}getAccountInfoForTenantProfiles(e,o){return this.getTenantProfilesFromAccountEntity(e,o==null?void 0:o.tenantId,o)}getTenantedAccountInfoByFilter(e,o,s,a){let c=null,d;if(a&&!this.tenantProfileMatchesFilter(s,a))return null;const h=this.getIdToken(e,o,s.tenantId);return h&&(d=extractTokenClaims(h.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(d,a))?null:(c=updateAccountTenantProfileData(e,s,d,h==null?void 0:h.secret),c)}getTenantProfilesFromAccountEntity(e,o,s){const a=e.getAccountInfo();let c=a.tenantProfiles||new Map;const d=this.getTokenKeys();if(o){const g=c.get(o);if(g)c=new Map([[o,g]]);else return[]}const h=[];return c.forEach(g=>{const b=this.getTenantedAccountInfoByFilter(a,d,g,s);b&&h.push(b)}),h}tenantProfileMatchesFilter(e,o){return!(o.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,o.localAccountId)||o.name&&e.name!==o.name||o.isHomeTenant!==void 0&&e.isHomeTenant!==o.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,o){return!(o&&(o.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,o.localAccountId)||o.loginHint&&!this.matchLoginHintFromTokenClaims(e,o.loginHint)||o.username&&!this.matchUsername(e.preferred_username,o.username)||o.name&&!this.matchName(e,o.name)||o.sid&&!this.matchSid(e,o.sid)))}async saveCacheRecord(e,o){if(!e)throw createClientAuthError(invalidCacheRecord);e.account&&this.setAccount(e.account),e.idToken&&(o==null?void 0:o.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(o==null?void 0:o.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(o==null?void 0:o.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}async saveAccessToken(e){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=this.getTokenKeys(),a=ScopeSet.fromString(e.target),c=[];s.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,o,!1))return;const h=this.getAccessTokenCredential(d);h&&this.credentialMatchesFilter(h,o)&&ScopeSet.fromString(h.target).intersectingScopeSets(a)&&c.push(this.removeAccessToken(d))}),await Promise.all(c),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const o=this.getAccountKeys(),s=[];return o.forEach(a=>{var g;if(!this.isAccountKey(a,e.homeAccountId))return;const c=this.getAccount(a,this.commonLogger);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;const d={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},h=(g=c.tenantProfiles)==null?void 0:g.filter(b=>this.tenantProfileMatchesFilter(b,d));h&&h.length===0||s.push(c)}),s}isAccountKey(e,o,s){return!(e.split(Separators.CACHE_KEY_SEPARATOR).length<3||o&&!e.toLowerCase().includes(o.toLowerCase())||s&&!e.toLowerCase().includes(s.toLowerCase()))}isCredentialKey(e){if(e.split(Separators.CACHE_KEY_SEPARATOR).length<6)return!1;const o=e.toLowerCase();if(o.indexOf(CredentialType.ID_TOKEN.toLowerCase())===-1&&o.indexOf(CredentialType.ACCESS_TOKEN.toLowerCase())===-1&&o.indexOf(CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&o.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(o.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())>-1){const s=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${this.clientId}${Separators.CACHE_KEY_SEPARATOR}`,a=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${THE_FAMILY_ID}${Separators.CACHE_KEY_SEPARATOR}`;if(o.indexOf(s.toLowerCase())===-1&&o.indexOf(a.toLowerCase())===-1)return!1}else if(o.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,o){return!(o.clientId&&!this.matchClientId(e,o.clientId)||o.userAssertionHash&&!this.matchUserAssertionHash(e,o.userAssertionHash)||typeof o.homeAccountId=="string"&&!this.matchHomeAccountId(e,o.homeAccountId)||o.environment&&!this.matchEnvironment(e,o.environment)||o.realm&&!this.matchRealm(e,o.realm)||o.credentialType&&!this.matchCredentialType(e,o.credentialType)||o.familyId&&!this.matchFamilyId(e,o.familyId)||o.target&&!this.matchTarget(e,o.target)||(o.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==o.requestedClaimsHash||e.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(o.tokenType&&!this.matchTokenType(e,o.tokenType)||o.tokenType===AuthenticationScheme.SSH&&o.keyId&&!this.matchKeyId(e,o.keyId)))}getAppMetadataFilteredBy(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)}getAppMetadataFilteredByInternal(e,o){const s=this.getKeys(),a={};return s.forEach(c=>{if(!this.isAppMetadata(c))return;const d=this.getAppMetadata(c);d&&(e&&!this.matchEnvironment(d,e)||o&&!this.matchClientId(d,o)||(a[c]=d))}),a}getAuthorityMetadataByAlias(e){const o=this.getAuthorityMetadataKeys();let s=null;return o.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const c=this.getAuthorityMetadata(a);c&&c.aliases.indexOf(e)!==-1&&(s=c)}),s}async removeAllAccounts(){const e=this.getAccountKeys(),o=[];e.forEach(s=>{o.push(this.removeAccount(s))}),await Promise.all(o)}async removeAccount(e){const o=this.getAccount(e,this.commonLogger);o&&(await this.removeAccountContext(o),this.removeItem(e))}async removeAccountContext(e){const o=this.getTokenKeys(),s=e.generateAccountId(),a=[];o.idToken.forEach(c=>{c.indexOf(s)===0&&this.removeIdToken(c)}),o.accessToken.forEach(c=>{c.indexOf(s)===0&&a.push(this.removeAccessToken(c))}),o.refreshToken.forEach(c=>{c.indexOf(s)===0&&this.removeRefreshToken(c)}),await Promise.all(a)}updateOutdatedCachedAccount(e,o,s){var a;if(o&&o.isSingleTenant()){(a=this.commonLogger)==null||a.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const c=this.getAccountKeys().filter(_=>_.startsWith(o.homeAccountId)),d=[];c.forEach(_=>{const j=this.getCachedAccountEntity(_);j&&d.push(j)});const h=d.find(_=>tenantIdMatchesHomeTenant(_.realm,_.homeAccountId))||d[0];h.tenantProfiles=d.map(_=>({tenantId:_.realm,localAccountId:_.localAccountId,name:_.name,isHomeTenant:tenantIdMatchesHomeTenant(_.realm,_.homeAccountId)}));const g=CacheManager.toObject(new AccountEntity,{...h}),b=g.generateAccountKey();return c.forEach(_=>{_!==b&&this.removeOutdatedAccount(e)}),this.setAccount(g),s==null||s.verbose("Updated an outdated account entity in the cache"),g}return o}async removeAccessToken(e){const o=this.getAccessTokenCredential(e);if(o){if(o.credentialType.toLowerCase()===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&o.tokenType===AuthenticationScheme.POP){const a=o.keyId;if(a)try{await this.cryptoImpl.removeTokenBindingKey(a)}catch{throw createClientAuthError(bindingKeyNotRemoved)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o)}),!0}readAccountFromCache(e){const o=AccountEntity.generateAccountCacheKey(e);return this.getAccount(o,this.commonLogger)}getIdToken(e,o,s,a,c){this.commonLogger.trace("CacheManager - getIdToken called");const d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.ID_TOKEN,clientId:this.clientId,realm:s},h=this.getIdTokensByFilter(d,o),g=h.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(g>1){let b=h;if(!s){const _=new Map;h.forEach(($,_e)=>{$.realm===e.tenantId&&_.set(_e,$)});const j=_.size;if(j<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),h.values().next().value;if(j===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),_.values().next().value;b=_}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),b.forEach((_,j)=>{this.removeIdToken(j)}),a&&c&&a.addFields({multiMatchedID:h.size},c),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),h.values().next().value}getIdTokensByFilter(e,o){const s=o&&o.idToken||this.getTokenKeys().idToken,a=new Map;return s.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;const d=this.getIdTokenCredential(c);d&&this.credentialMatchesFilter(d,e)&&a.set(c,d)}),a}idTokenKeyMatchesFilter(e,o){const s=e.toLowerCase();return!(o.clientId&&s.indexOf(o.clientId.toLowerCase())===-1||o.homeAccountId&&s.indexOf(o.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,o,s,a,c,d){this.commonLogger.trace("CacheManager - getAccessToken called");const h=ScopeSet.createSearchScopes(o.scopes),g=o.authenticationScheme||AuthenticationScheme.BEARER,b=g&&g.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:CredentialType.ACCESS_TOKEN,_={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:b,clientId:this.clientId,realm:a||e.tenantId,target:h,tokenType:g,keyId:o.sshKid,requestedClaimsHash:o.requestedClaimsHash},j=s&&s.accessToken||this.getTokenKeys().accessToken,$=[];j.forEach(et=>{if(this.accessTokenKeyMatchesFilter(et,_,!0)){const rt=this.getAccessTokenCredential(et);rt&&this.credentialMatchesFilter(rt,_)&&$.push(rt)}});const _e=$.length;return _e<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):_e>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),$.forEach(et=>{this.removeAccessToken(generateCredentialKey(et))}),c&&d&&c.addFields({multiMatchedAT:$.length},d),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),$[0])}accessTokenKeyMatchesFilter(e,o,s){const a=e.toLowerCase();if(o.clientId&&a.indexOf(o.clientId.toLowerCase())===-1||o.homeAccountId&&a.indexOf(o.homeAccountId.toLowerCase())===-1||o.realm&&a.indexOf(o.realm.toLowerCase())===-1||o.requestedClaimsHash&&a.indexOf(o.requestedClaimsHash.toLowerCase())===-1)return!1;if(o.target){const c=o.target.asArray();for(let d=0;d<c.length;d++){if(s&&!a.includes(c[d].toLowerCase()))return!1;if(!s&&a.includes(c[d].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const o=this.getTokenKeys(),s=[];return o.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,e,!0))return;const c=this.getAccessTokenCredential(a);c&&this.credentialMatchesFilter(c,e)&&s.push(c)}),s}getRefreshToken(e,o,s,a,c){this.commonLogger.trace("CacheManager - getRefreshToken called");const d=o?THE_FAMILY_ID:void 0,h={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.REFRESH_TOKEN,clientId:this.clientId,familyId:d},g=s&&s.refreshToken||this.getTokenKeys().refreshToken,b=[];g.forEach(j=>{if(this.refreshTokenKeyMatchesFilter(j,h)){const $=this.getRefreshTokenCredential(j);$&&this.credentialMatchesFilter($,h)&&b.push($)}});const _=b.length;return _<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(_>1&&a&&c&&a.addFields({multiMatchedRT:_},c),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),b[0])}refreshTokenKeyMatchesFilter(e,o){const s=e.toLowerCase();return!(o.familyId&&s.indexOf(o.familyId.toLowerCase())===-1||!o.familyId&&o.clientId&&s.indexOf(o.clientId.toLowerCase())===-1||o.homeAccountId&&s.indexOf(o.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const o={environment:e,clientId:this.clientId},s=this.getAppMetadataFilteredBy(o),a=Object.keys(s).map(d=>s[d]),c=a.length;if(c<1)return null;if(c>1)throw createClientAuthError(multipleMatchingAppMetadata);return a[0]}isAppMetadataFOCI(e){const o=this.readAppMetadataFromCache(e);return!!(o&&o.familyId===THE_FAMILY_ID)}matchHomeAccountId(e,o){return typeof e.homeAccountId=="string"&&o===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,o){const s=e.oid||e.sub;return o===s}matchLocalAccountIdFromTenantProfile(e,o){return e.localAccountId===o}matchName(e,o){var s;return o.toLowerCase()===((s=e.name)==null?void 0:s.toLowerCase())}matchUsername(e,o){return!!(e&&typeof e=="string"&&(o==null?void 0:o.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,o){return!!(e.userAssertionHash&&o===e.userAssertionHash)}matchEnvironment(e,o){if(this.staticAuthorityOptions){const a=getAliasesFromStaticSources(this.staticAuthorityOptions,this.commonLogger);if(a.includes(o)&&a.includes(e.environment))return!0}const s=this.getAuthorityMetadataByAlias(o);return!!(s&&s.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,o){return e.credentialType&&o.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,o){return!!(e.clientId&&o===e.clientId)}matchFamilyId(e,o){return!!(e.familyId&&o===e.familyId)}matchRealm(e,o){var s;return((s=e.realm)==null?void 0:s.toLowerCase())===o.toLowerCase()}matchNativeAccountId(e,o){return!!(e.nativeAccountId&&o===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,o){return e.login_hint===o||e.preferred_username===o||e.upn===o}matchSid(e,o){return e.sid===o}matchAuthorityType(e,o){return!!(e.authorityType&&o.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,o){return e.credentialType!==CredentialType.ACCESS_TOKEN&&e.credentialType!==CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ScopeSet.fromString(e.target).containsScopeSet(o)}matchTokenType(e,o){return!!(e.tokenType&&e.tokenType===o)}matchKeyId(e,o){return!!(e.keyId&&e.keyId===o)}isAppMetadata(e){return e.indexOf(APP_METADATA)!==-1}isAuthorityMetadata(e){return e.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,o){for(const s in o)e[s]=o[s];return e}}class DefaultStorageClass extends CacheManager{setAccount(){throw createClientAuthError(methodNotImplemented)}getAccount(){throw createClientAuthError(methodNotImplemented)}getCachedAccountEntity(){throw createClientAuthError(methodNotImplemented)}setIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}getIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}getAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}setRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}getRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAppMetadata(){throw createClientAuthError(methodNotImplemented)}getAppMetadata(){throw createClientAuthError(methodNotImplemented)}setServerTelemetry(){throw createClientAuthError(methodNotImplemented)}getServerTelemetry(){throw createClientAuthError(methodNotImplemented)}setAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadataKeys(){throw createClientAuthError(methodNotImplemented)}setThrottlingCache(){throw createClientAuthError(methodNotImplemented)}getThrottlingCache(){throw createClientAuthError(methodNotImplemented)}removeItem(){throw createClientAuthError(methodNotImplemented)}containsKey(){throw createClientAuthError(methodNotImplemented)}getKeys(){throw createClientAuthError(methodNotImplemented)}getAccountKeys(){throw createClientAuthError(methodNotImplemented)}getTokenKeys(){throw createClientAuthError(methodNotImplemented)}async clear(){throw createClientAuthError(methodNotImplemented)}updateCredentialCacheKey(){throw createClientAuthError(methodNotImplemented)}removeOutdatedAccount(){throw createClientAuthError(methodNotImplemented)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=300,DEFAULT_SYSTEM_OPTIONS={tokenRenewalOffsetSeconds:DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,preventCorsPreflight:!1},DEFAULT_LOGGER_IMPLEMENTATION={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info,correlationId:Constants.EMPTY_STRING},DEFAULT_CACHE_OPTIONS={claimsBasedCachingEnabled:!1},DEFAULT_NETWORK_IMPLEMENTATION={async sendGetRequestAsync(){throw createClientAuthError(methodNotImplemented)},async sendPostRequestAsync(){throw createClientAuthError(methodNotImplemented)}},DEFAULT_LIBRARY_INFO={sku:Constants.SKU,version:version$2,cpu:Constants.EMPTY_STRING,os:Constants.EMPTY_STRING},DEFAULT_CLIENT_CREDENTIALS={clientSecret:Constants.EMPTY_STRING,clientAssertion:void 0},DEFAULT_AZURE_CLOUD_OPTIONS={azureCloudInstance:AzureCloudInstance.None,tenant:`${Constants.DEFAULT_COMMON_TENANT}`},DEFAULT_TELEMETRY_OPTIONS={application:{appName:"",appVersion:""}};function buildClientConfiguration({authOptions:i,systemOptions:e,loggerOptions:o,cacheOptions:s,storageInterface:a,networkInterface:c,cryptoInterface:d,clientCredentials:h,libraryInfo:g,telemetry:b,serverTelemetryManager:_,persistencePlugin:j,serializableCache:$}){const _e={...DEFAULT_LOGGER_IMPLEMENTATION,...o};return{authOptions:buildAuthOptions(i),systemOptions:{...DEFAULT_SYSTEM_OPTIONS,...e},loggerOptions:_e,cacheOptions:{...DEFAULT_CACHE_OPTIONS,...s},storageInterface:a||new DefaultStorageClass(i.clientId,DEFAULT_CRYPTO_IMPLEMENTATION,new Logger(_e)),networkInterface:c||DEFAULT_NETWORK_IMPLEMENTATION,cryptoInterface:d||DEFAULT_CRYPTO_IMPLEMENTATION,clientCredentials:h||DEFAULT_CLIENT_CREDENTIALS,libraryInfo:{...DEFAULT_LIBRARY_INFO,...g},telemetry:{...DEFAULT_TELEMETRY_OPTIONS,...b},serverTelemetryManager:_||null,persistencePlugin:j||null,serializableCache:$||null}}function buildAuthOptions(i){return{clientCapabilities:[],azureCloudOptions:DEFAULT_AZURE_CLOUD_OPTIONS,skipAuthorityMetadataCache:!1,...i}}function isOidcProtocolMode(i){return i.authOptions.authority.options.protocolMode===ProtocolMode.OIDC}/*! @azure/msal-common v14.7.1 2024-02-17 */class ServerError extends AuthError{constructor(e,o,s){super(e,o,s),this.name="ServerError",Object.setPrototypeOf(this,ServerError.prototype)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ThrottlingUtils{static generateThrottlingStorageKey(e){return`${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,o){var c;const s=ThrottlingUtils.generateThrottlingStorageKey(o),a=e.getThrottlingCache(s);if(a){if(a.throttleTime<Date.now()){e.removeItem(s);return}throw new ServerError(((c=a.errorCodes)==null?void 0:c.join(" "))||Constants.EMPTY_STRING,a.errorMessage,a.subError)}}static postProcess(e,o,s){if(ThrottlingUtils.checkResponseStatus(s)||ThrottlingUtils.checkResponseForRetryAfter(s)){const a={throttleTime:ThrottlingUtils.calculateThrottleTime(parseInt(s.headers[HeaderNames.RETRY_AFTER])),error:s.body.error,errorCodes:s.body.error_codes,errorMessage:s.body.error_description,subError:s.body.suberror};e.setThrottlingCache(ThrottlingUtils.generateThrottlingStorageKey(o),a)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(HeaderNames.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const o=e<=0?0:e,s=Date.now()/1e3;return Math.floor(Math.min(s+(o||ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS),s+ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,o,s,a){const c={clientId:o,authority:s.authority,scopes:s.scopes,homeAccountIdentifier:a,claims:s.claims,authenticationScheme:s.authenticationScheme,resourceRequestMethod:s.resourceRequestMethod,resourceRequestUri:s.resourceRequestUri,shrClaims:s.shrClaims,sshKid:s.sshKid},d=this.generateThrottlingStorageKey(c);e.removeItem(d)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class NetworkManager{constructor(e,o){this.networkClient=e,this.cacheManager=o}async sendPostRequest(e,o,s){ThrottlingUtils.preProcess(this.cacheManager,e);let a;try{a=await this.networkClient.sendPostRequestAsync(o,s)}catch(c){throw c instanceof AuthError?c:createClientAuthError(networkError)}return ThrottlingUtils.postProcess(this.cacheManager,e,a),a}}/*! @azure/msal-common v14.7.1 2024-02-17 */const CcsCredentialType={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.7.1 2024-02-17 */const CLIENT_ID="client_id",REDIRECT_URI="redirect_uri",RESPONSE_TYPE="response_type",RESPONSE_MODE="response_mode",GRANT_TYPE="grant_type",CLAIMS="claims",SCOPE="scope",REFRESH_TOKEN="refresh_token",STATE="state",NONCE="nonce",PROMPT="prompt",CODE="code",CODE_CHALLENGE="code_challenge",CODE_CHALLENGE_METHOD="code_challenge_method",CODE_VERIFIER="code_verifier",CLIENT_REQUEST_ID="client-request-id",X_CLIENT_SKU="x-client-SKU",X_CLIENT_VER="x-client-VER",X_CLIENT_OS="x-client-OS",X_CLIENT_CPU="x-client-CPU",X_CLIENT_CURR_TELEM="x-client-current-telemetry",X_CLIENT_LAST_TELEM="x-client-last-telemetry",X_MS_LIB_CAPABILITY="x-ms-lib-capability",X_APP_NAME="x-app-name",X_APP_VER="x-app-ver",POST_LOGOUT_URI="post_logout_redirect_uri",ID_TOKEN_HINT="id_token_hint",DEVICE_CODE="device_code",CLIENT_SECRET="client_secret",CLIENT_ASSERTION="client_assertion",CLIENT_ASSERTION_TYPE="client_assertion_type",TOKEN_TYPE="token_type",REQ_CNF="req_cnf",OBO_ASSERTION="assertion",REQUESTED_TOKEN_USE="requested_token_use",RETURN_SPA_CODE="return_spa_code",NATIVE_BROKER="nativebroker",LOGOUT_HINT="logout_hint",SID="sid",LOGIN_HINT="login_hint",DOMAIN_HINT="domain_hint";/*! @azure/msal-common v14.7.1 2024-02-17 */class RequestValidator{static validateRedirectUri(e){if(!e)throw createClientConfigurationError(redirectUriEmpty)}static validatePrompt(e){const o=[];for(const s in PromptValue)o.push(PromptValue[s]);if(o.indexOf(e)<0)throw createClientConfigurationError(invalidPromptValue)}static validateClaims(e){try{JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}}static validateCodeChallengeParams(e,o){if(!e||!o)throw createClientConfigurationError(pkceParamsMissing);this.validateCodeChallengeMethod(o)}static validateCodeChallengeMethod(e){if([CodeChallengeMethodValues.PLAIN,CodeChallengeMethodValues.S256].indexOf(e)<0)throw createClientConfigurationError(invalidCodeChallengeMethod)}static sanitizeEQParams(e,o){return e?(o.forEach((s,a)=>{e[a]&&delete e[a]}),Object.fromEntries(Object.entries(e).filter(s=>s[1]!==""))):{}}}/*! @azure/msal-common v14.7.1 2024-02-17 */class RequestParameterBuilder{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(Constants.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(`${Constants.TOKEN_RESPONSE_TYPE} ${Constants.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(RESPONSE_MODE,encodeURIComponent(e||ResponseMode.QUERY))}addNativeBroker(){this.parameters.set(NATIVE_BROKER,encodeURIComponent("1"))}addScopes(e,o=!0,s=OIDC_DEFAULT_SCOPES){o&&!s.includes("openid")&&!e.includes("openid")&&s.push("openid");const a=o?[...e||[],...s]:e||[],c=new ScopeSet(a);this.parameters.set(SCOPE,encodeURIComponent(c.printScopes()))}addClientId(e){this.parameters.set(CLIENT_ID,encodeURIComponent(e))}addRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(REDIRECT_URI,encodeURIComponent(e))}addPostLogoutRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(POST_LOGOUT_URI,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(ID_TOKEN_HINT,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(DOMAIN_HINT,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(LOGIN_HINT,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(SID,encodeURIComponent(e))}addClaims(e,o){const s=this.addClientCapabilitiesToClaims(e,o);RequestValidator.validateClaims(s),this.parameters.set(CLAIMS,encodeURIComponent(s))}addCorrelationId(e){this.parameters.set(CLIENT_REQUEST_ID,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(X_CLIENT_SKU,e.sku),this.parameters.set(X_CLIENT_VER,e.version),e.os&&this.parameters.set(X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(X_CLIENT_CPU,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(X_APP_NAME,e.appName),e!=null&&e.appVersion&&this.parameters.set(X_APP_VER,e.appVersion)}addPrompt(e){RequestValidator.validatePrompt(e),this.parameters.set(`${PROMPT}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(STATE,encodeURIComponent(e))}addNonce(e){this.parameters.set(NONCE,encodeURIComponent(e))}addCodeChallengeParams(e,o){if(RequestValidator.validateCodeChallengeParams(e,o),e&&o)this.parameters.set(CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(CODE_CHALLENGE_METHOD,encodeURIComponent(o));else throw createClientConfigurationError(pkceParamsMissing)}addAuthorizationCode(e){this.parameters.set(CODE,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(DEVICE_CODE,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(REFRESH_TOKEN,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(CODE_VERIFIER,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(CLIENT_SECRET,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(CLIENT_ASSERTION,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(CLIENT_ASSERTION_TYPE,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(OBO_ASSERTION,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(REQUESTED_TOKEN_USE,encodeURIComponent(e))}addGrantType(e){this.parameters.set(GRANT_TYPE,encodeURIComponent(e))}addClientInfo(){this.parameters.set(CLIENT_INFO,"1")}addExtraQueryParameters(e){const o=RequestValidator.sanitizeEQParams(e,this.parameters);Object.keys(o).forEach(s=>{this.parameters.set(s,e[s])})}addClientCapabilitiesToClaims(e,o){let s;if(!e)s={};else try{s=JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}return o&&o.length>0&&(s.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)||(s[ClaimsRequestKeys.ACCESS_TOKEN]={}),s[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC]={values:o}),JSON.stringify(s)}addUsername(e){this.parameters.set(PasswordGrantConstants.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(PasswordGrantConstants.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.POP),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.SSH),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(X_MS_LIB_CAPABILITY,ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(LOGOUT_HINT,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((o,s)=>{e.push(`${s}=${o}`)}),e.join("&")}}/*! @azure/msal-common v14.7.1 2024-02-17 */function isOpenIdConfigResponse(i){return i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.7.1 2024-02-17 */function isCloudInstanceDiscoveryResponse(i){return i.hasOwnProperty("tenant_discovery_endpoint")&&i.hasOwnProperty("metadata")}/*! @azure/msal-common v14.7.1 2024-02-17 */function isCloudInstanceDiscoveryErrorResponse(i){return i.hasOwnProperty("error")&&i.hasOwnProperty("error_description")}/*! @azure/msal-common v14.7.1 2024-02-17 */const PerformanceEvents={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},PerformanceEventStatus={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v14.7.1 2024-02-17 */const invoke=(i,e,o,s,a)=>(...c)=>{o.trace(`Executing function ${e}`);const d=s==null?void 0:s.startMeasurement(e,a);if(a){const h=e+"CallCount";s==null||s.incrementFields({[h]:1},a)}try{const h=i(...c);return d==null||d.end({success:!0}),o.trace(`Returning result from ${e}`),h}catch(h){o.trace(`Error occurred in ${e}`);try{o.trace(JSON.stringify(h))}catch{o.trace("Unable to print error message.")}throw d==null||d.end({success:!1}),h}},invokeAsync=(i,e,o,s,a)=>(...c)=>{o.trace(`Executing function ${e}`);const d=s==null?void 0:s.startMeasurement(e,a);if(a){const h=e+"CallCount";s==null||s.incrementFields({[h]:1},a)}return s==null||s.setPreQueueTime(e,a),i(...c).then(h=>(o.trace(`Returning result from ${e}`),d==null||d.end({success:!0}),h)).catch(h=>{o.trace(`Error occurred in ${e}`);try{o.trace(JSON.stringify(h))}catch{o.trace("Unable to print error message.")}throw d==null||d.end({success:!1}),h})};/*! @azure/msal-common v14.7.1 2024-02-17 */class RegionDiscovery{constructor(e,o,s,a){this.networkInterface=e,this.logger=o,this.performanceClient=s,this.correlationId=a}async detectRegion(e,o){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryDetectRegion,this.correlationId);let s=e;if(s)o.region_source=RegionDiscoverySources.ENVIRONMENT_VARIABLE;else{const c=RegionDiscovery.IMDS_OPTIONS;try{const d=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Constants.IMDS_VERSION,c);if(d.status===ResponseCodes.httpSuccess&&(s=d.body,o.region_source=RegionDiscoverySources.IMDS),d.status===ResponseCodes.httpBadRequest){const h=await invokeAsync(this.getCurrentVersion.bind(this),PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(c);if(!h)return o.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null;const g=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(h,c);g.status===ResponseCodes.httpSuccess&&(s=g.body,o.region_source=RegionDiscoverySources.IMDS)}}catch{return o.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null}}return s||(o.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION),s||null}async getRegionFromIMDS(e,o){var s;return(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?api-version=${e}&format=text`,o,Constants.IMDS_TIMEOUT)}async getCurrentVersion(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const s=await this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?format=json`,e);return s.status===ResponseCodes.httpBadRequest&&s.body&&s.body["newest-versions"]&&s.body["newest-versions"].length>0?s.body["newest-versions"][0]:null}catch{return null}}}RegionDiscovery.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.7.1 2024-02-17 */class Authority{constructor(e,o,s,a,c,d,h){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=o,this.cacheManager=s,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=c,this.performanceClient=h,this.correlationId=d,this.regionDiscovery=new RegionDiscovery(o,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL))return AuthorityType.Ciam;const o=e.PathSegments;if(o.length)switch(o[0].toLowerCase()){case Constants.ADFS:return AuthorityType.Adfs;case Constants.DSTS:return AuthorityType.Dsts}return AuthorityType.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new UrlString(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw createClientAuthError(endpointResolutionError)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw createClientAuthError(endpointResolutionError)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw createClientAuthError(endpointResolutionError)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw createClientAuthError(endSessionEndpointNotSupported);return this.replacePath(this.metadata.end_session_endpoint)}else throw createClientAuthError(endpointResolutionError)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw createClientAuthError(endpointResolutionError)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw createClientAuthError(endpointResolutionError)}canReplaceTenant(e){return e.PathSegments.length===1&&!Authority.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===AuthorityType.Default&&this.protocolMode===ProtocolMode.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let o=e;const a=new UrlString(this.metadata.canonical_authority).getUrlComponents(),c=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((h,g)=>{let b=c[g];if(g===0&&this.canReplaceTenant(a)){const _=new UrlString(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];b!==_&&(this.logger.verbose(`Replacing tenant domain name ${b} with id ${_}`),b=_)}h!==b&&(o=o.replace(`/${b}/`,`/${h}/`))}),this.replaceTenant(o)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===AuthorityType.Adfs||this.protocolMode!==ProtocolMode.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var a,c;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),o=await invokeAsync(this.updateCloudDiscoveryMetadata.bind(this),PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const s=await invokeAsync(this.updateEndpointMetadata.bind(this),PerformanceEvents.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,o,{source:s}),(c=this.performanceClient)==null||c.addFields({cloudDiscoverySource:o,authorityEndpointSource:s},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:generateAuthorityMetadataExpiresAt(),jwks_uri:""}),e}updateCachedMetadata(e,o,s){o!==AuthorityMetadataSource.CACHE&&(s==null?void 0:s.source)!==AuthorityMetadataSource.CACHE&&(e.expiresAt=generateAuthorityMetadataExpiresAt(),e.canonical_authority=this.canonicalAuthority);const a=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(a,e),this.metadata=e}async updateEndpointMetadata(e){var a,c,d;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateEndpointMetadata,this.correlationId);const o=this.updateEndpointMetadataFromLocalSources(e);if(o){if(o.source===AuthorityMetadataSource.HARDCODED_VALUES&&(c=this.authorityOptions.azureRegionConfiguration)!=null&&c.azureRegion&&o.metadata){const h=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(o.metadata);updateAuthorityEndpointMetadata(e,h,!1),e.canonical_authority=this.canonicalAuthority}return o.source}let s=await invokeAsync(this.getEndpointMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(s)return(d=this.authorityOptions.azureRegionConfiguration)!=null&&d.azureRegion&&(s=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(s)),updateAuthorityEndpointMetadata(e,s,!0),AuthorityMetadataSource.NETWORK;throw createClientAuthError(openIdConfigError,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const o=this.getEndpointMetadataFromConfig();if(o)return this.logger.verbose("Found endpoint metadata in authority configuration"),updateAuthorityEndpointMetadata(e,o,!1),{source:AuthorityMetadataSource.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const a=this.getEndpointMetadataFromHardcodedValues();if(a)return updateAuthorityEndpointMetadata(e,a,!1),{source:AuthorityMetadataSource.HARDCODED_VALUES,metadata:a};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const s=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!s?(this.logger.verbose("Found endpoint metadata in the cache."),{source:AuthorityMetadataSource.CACHE}):(s&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new UrlString(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw createClientConfigurationError(invalidAuthorityMetadata)}return null}async getEndpointMetadataFromNetwork(){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},o=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${o}`);try{const a=await this.networkInterface.sendGetRequestAsync(o,e);return isOpenIdConfigResponse(a.body)?a.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in EndpointMetadata?EndpointMetadata[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var s,a,c;(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const o=(a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.azureRegion;if(o){if(o!==Constants.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=o,Authority.replaceWithRegionalInformation(e,o);const d=await invokeAsync(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),PerformanceEvents.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((c=this.authorityOptions.azureRegionConfiguration)==null?void 0:c.environmentRegion,this.regionDiscoveryMetadata);if(d)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=d,Authority.replaceWithRegionalInformation(e,d);this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const o=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(o)return o;const s=await invokeAsync(this.getCloudDiscoveryMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(s)return updateCloudDiscoveryMetadata(e,s,!0),AuthorityMetadataSource.NETWORK;throw createClientConfigurationError(untrustedAuthority)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Constants.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Constants.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Constants.NOT_APPLICABLE}`);const o=this.getCloudDiscoveryMetadataFromConfig();if(o)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),updateCloudDiscoveryMetadata(e,o,!1),AuthorityMetadataSource.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const a=getCloudDiscoveryMetadataFromHardcodedValues(this.hostnameAndPort);if(a)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),updateCloudDiscoveryMetadata(e,a,!1),AuthorityMetadataSource.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const s=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!s?(this.logger.verbose("Found cloud discovery metadata in the cache."),AuthorityMetadataSource.CACHE):(s&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===AuthorityType.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),o=getCloudDiscoveryMetadataFromNetworkResponse(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),o)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),o;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),createClientConfigurationError(invalidCloudDiscoveryMetadata)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Constants.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,o={};let s=null;try{const c=await this.networkInterface.sendGetRequestAsync(e,o);let d,h;if(isCloudInstanceDiscoveryResponse(c.body))d=c.body,h=d.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${d.tenant_discovery_endpoint}`);else if(isCloudInstanceDiscoveryErrorResponse(c.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${c.status}`),d=c.body,d.error===Constants.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${d.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${d.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),h=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),s=getCloudDiscoveryMetadataFromNetworkResponse(h,this.hostnameAndPort)}catch(c){if(c instanceof AuthError)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${c.errorCode}
Error Description: ${c.errorMessage}`);else{const d=c;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${d.name}
Error Description: ${d.message}`)}return null}return s||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),s=Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),s}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(o=>o&&UrlString.getDomainFromUrl(o).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,o){let s;if(o&&o.azureCloudInstance!==AzureCloudInstance.None){const a=o.tenant?o.tenant:Constants.DEFAULT_COMMON_TENANT;s=`${o.azureCloudInstance}/${a}/`}return s||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw createClientAuthError(endpointResolutionError)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return InstanceDiscoveryMetadataAliases.has(e)}static isPublicCloudAuthority(e){return Constants.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,o,s){const a=new UrlString(e);a.validateAsUri();const c=a.getUrlComponents();let d=`${o}.${c.HostNameAndPort}`;this.isPublicCloudAuthority(c.HostNameAndPort)&&(d=`${o}.${Constants.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const h=UrlString.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:d}).urlString;return s?`${h}?${s}`:h}static replaceWithRegionalInformation(e,o){const s={...e};return s.authorization_endpoint=Authority.buildRegionalAuthorityString(s.authorization_endpoint,o),s.token_endpoint=Authority.buildRegionalAuthorityString(s.token_endpoint,o),s.end_session_endpoint&&(s.end_session_endpoint=Authority.buildRegionalAuthorityString(s.end_session_endpoint,o)),s}static transformCIAMAuthority(e){let o=e;const a=new UrlString(e).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)){const c=a.HostNameAndPort.split(".")[0];o=`${o}${c}${Constants.AAD_TENANT_DOMAIN_SUFFIX}`}return o}}Authority.reservedTenantDomains=new Set(["{tenant}","{tenantid}",AADAuthorityConstants.COMMON,AADAuthorityConstants.CONSUMERS,AADAuthorityConstants.ORGANIZATIONS]);function getTenantFromAuthorityString(i){var a;const s=(a=new UrlString(i).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:a.toLowerCase();switch(s){case AADAuthorityConstants.COMMON:case AADAuthorityConstants.ORGANIZATIONS:case AADAuthorityConstants.CONSUMERS:return;default:return s}}function formatAuthorityUri(i){return i.endsWith(Constants.FORWARD_SLASH)?i:`${i}${Constants.FORWARD_SLASH}`}function buildStaticAuthorityOptions(i){const e=i.cloudDiscoveryMetadata;let o;if(e)try{o=JSON.parse(e)}catch{throw createClientConfigurationError(invalidCloudDiscoveryMetadata)}return{canonicalAuthority:i.authority?formatAuthorityUri(i.authority):void 0,knownAuthorities:i.knownAuthorities,cloudDiscoveryMetadata:o}}/*! @azure/msal-common v14.7.1 2024-02-17 */async function createDiscoveredInstance(i,e,o,s,a,c,d){d==null||d.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,c);const h=Authority.transformCIAMAuthority(formatAuthorityUri(i)),g=new Authority(h,e,o,s,a,c,d);try{return await invokeAsync(g.resolveEndpointsAsync.bind(g),PerformanceEvents.AuthorityResolveEndpointsAsync,a,d,c)(),g}catch{throw createClientAuthError(endpointResolutionError)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class BaseClient{constructor(e,o){this.config=buildClientConfiguration(e),this.logger=new Logger(this.config.loggerOptions,name$3,version$2),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new NetworkManager(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=o}createTokenRequestHeaders(e){const o={};if(o[HeaderNames.CONTENT_TYPE]=Constants.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const s=buildClientInfoFromHomeAccountId(e.credential);o[HeaderNames.CCS_HEADER]=`Oid:${s.uid}@${s.utid}`}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case CcsCredentialType.UPN:o[HeaderNames.CCS_HEADER]=`UPN: ${e.credential}`;break}return o}async executePostToTokenEndpoint(e,o,s,a,c,d){var g,b,_,j;d&&((g=this.performanceClient)==null||g.addQueueMeasurement(d,c));const h=await this.networkManager.sendPostRequest(a,e,{body:o,headers:s});return(j=this.performanceClient)==null||j.addFields({refreshTokenSize:((b=h.body.refresh_token)==null?void 0:b.length)||0,httpVerToken:((_=h.headers)==null?void 0:_[HeaderNames.X_MS_HTTP_VERSION])||""},c),this.config.serverTelemetryManager&&h.status<500&&h.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),h}async updateAuthority(e,o){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.UpdateTokenEndpointAuthority,o);const s=`https://${e}/${this.authority.tenant}/`,a=await createDiscoveredInstance(s,this.networkClient,this.cacheManager,this.authority.options,this.logger,o,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const o=new RequestParameterBuilder;return e.tokenQueryParameters&&o.addExtraQueryParameters(e.tokenQueryParameters),o.createQueryString()}}/*! @azure/msal-common v14.7.1 2024-02-17 */const noTokensFound="no_tokens_found",nativeAccountUnavailable="native_account_unavailable",refreshTokenExpired="refresh_token_expired",interactionRequired="interaction_required",consentRequired="consent_required",loginRequired="login_required",badToken="bad_token";/*! @azure/msal-common v14.7.1 2024-02-17 */const InteractionRequiredServerErrorMessage=[interactionRequired,consentRequired,loginRequired,badToken],InteractionRequiredAuthSubErrorMessage=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],InteractionRequiredAuthErrorMessages={[noTokensFound]:"No refresh token found in the cache. Please sign-in.",[nativeAccountUnavailable]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[refreshTokenExpired]:"Refresh token has expired.",[badToken]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class InteractionRequiredAuthError extends AuthError{constructor(e,o,s,a,c,d,h){super(e,o,s),Object.setPrototypeOf(this,InteractionRequiredAuthError.prototype),this.timestamp=a||Constants.EMPTY_STRING,this.traceId=c||Constants.EMPTY_STRING,this.correlationId=d||Constants.EMPTY_STRING,this.claims=h||Constants.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function isInteractionRequiredError(i,e,o){const s=!!i&&InteractionRequiredServerErrorMessage.indexOf(i)>-1,a=!!o&&InteractionRequiredAuthSubErrorMessage.indexOf(o)>-1,c=!!e&&InteractionRequiredServerErrorMessage.some(d=>e.indexOf(d)>-1);return s||c||a}function createInteractionRequiredAuthError(i){return new InteractionRequiredAuthError(i,InteractionRequiredAuthErrorMessages[i])}/*! @azure/msal-common v14.7.1 2024-02-17 */class CacheRecord{constructor(e,o,s,a,c){this.account=e||null,this.idToken=o||null,this.accessToken=s||null,this.refreshToken=a||null,this.appMetadata=c||null}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ProtocolUtils{static setRequestState(e,o,s){const a=ProtocolUtils.generateLibraryState(e,s);return o?`${a}${Constants.RESOURCE_DELIM}${o}`:a}static generateLibraryState(e,o){if(!e)throw createClientAuthError(noCryptoObject);const s={id:e.createNewGuid()};o&&(s.meta=o);const a=JSON.stringify(s);return e.base64Encode(a)}static parseRequestState(e,o){if(!e)throw createClientAuthError(noCryptoObject);if(!o)throw createClientAuthError(invalidState);try{const s=o.split(Constants.RESOURCE_DELIM),a=s[0],c=s.length>1?s.slice(1).join(Constants.RESOURCE_DELIM):Constants.EMPTY_STRING,d=e.base64Decode(a),h=JSON.parse(d);return{userRequestState:c||Constants.EMPTY_STRING,libraryState:h}}catch{throw createClientAuthError(invalidState)}}}/*! @azure/msal-common v14.7.1 2024-02-17 */const KeyLocation={SW:"sw",UHW:"uhw"};class PopTokenGenerator{constructor(e,o){this.cryptoUtils=e,this.performanceClient=o}async generateCnf(e,o){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.PopTokenGenerateCnf,e.correlationId);const s=await invokeAsync(this.generateKid.bind(this),PerformanceEvents.PopTokenGenerateCnf,o,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64Encode(JSON.stringify(s));return{kid:s.kid,reqCnfString:a,reqCnfHash:await this.cryptoUtils.hashString(a)}}async generateKid(e){var s;return(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:KeyLocation.SW}}async signPopToken(e,o,s){return this.signPayload(e,o,s)}async signPayload(e,o,s,a){const{resourceRequestMethod:c,resourceRequestUri:d,shrClaims:h,shrNonce:g,shrOptions:b}=s,_=d?new UrlString(d):void 0,j=_==null?void 0:_.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:nowSeconds(),m:c==null?void 0:c.toUpperCase(),u:j==null?void 0:j.HostNameAndPort,nonce:g||this.cryptoUtils.createNewGuid(),p:j==null?void 0:j.AbsolutePath,q:j!=null&&j.QueryString?[[],j.QueryString]:void 0,client_claims:h||void 0,...a},o,b,s.correlationId)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class TokenCacheContext{constructor(e,o){this.cache=e,this.hasChanged=o}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ResponseHandler{constructor(e,o,s,a,c,d,h){this.clientId=e,this.cacheStorage=o,this.cryptoObj=s,this.logger=a,this.serializableCache=c,this.persistencePlugin=d,this.performanceClient=h}validateServerAuthorizationCodeResponse(e,o){if(!e.state||!o)throw e.state?createClientAuthError(stateNotFound,"Cached State"):createClientAuthError(stateNotFound,"Server State");let s,a;try{s=decodeURIComponent(e.state)}catch{throw createClientAuthError(invalidState,e.state)}try{a=decodeURIComponent(o)}catch{throw createClientAuthError(invalidState,e.state)}if(s!==a)throw createClientAuthError(stateMismatch);if(e.error||e.error_description||e.suberror)throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||""):new ServerError(e.error||"",e.error_description,e.suberror)}validateTokenResponse(e,o){if(e.error||e.error_description||e.suberror){const s=`${e.error_codes} - [${e.timestamp}]: ${e.error_description} - Correlation ID: ${e.correlation_id} - Trace ID: ${e.trace_id}`,a=new ServerError(e.error,s,e.suberror);if(o&&e.status&&e.status>=HttpStatus.SERVER_ERROR_RANGE_START&&e.status<=HttpStatus.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${a}`);return}else if(o&&e.status&&e.status>=HttpStatus.CLIENT_ERROR_RANGE_START&&e.status<=HttpStatus.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${a}`);return}throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error,e.error_description,e.suberror,e.timestamp||Constants.EMPTY_STRING,e.trace_id||Constants.EMPTY_STRING,e.correlation_id||Constants.EMPTY_STRING,e.claims||Constants.EMPTY_STRING):a}}async handleServerTokenResponse(e,o,s,a,c,d,h,g,b){var et;(et=this.performanceClient)==null||et.addQueueMeasurement(PerformanceEvents.HandleServerTokenResponse,e.correlation_id);let _;if(e.id_token){if(_=extractTokenClaims(e.id_token||Constants.EMPTY_STRING,this.cryptoObj.base64Decode),c&&c.nonce&&_.nonce!==c.nonce)throw createClientAuthError(nonceMismatch);if(a.maxAge||a.maxAge===0){const rt=_.auth_time;if(!rt)throw createClientAuthError(authTimeNotFound);checkMaxAge(rt,a.maxAge)}}this.homeAccountIdentifier=AccountEntity.generateHomeAccountId(e.client_info||Constants.EMPTY_STRING,o.authorityType,this.logger,this.cryptoObj,_);let j;c&&c.state&&(j=ProtocolUtils.parseRequestState(this.cryptoObj,c.state)),e.key_id=e.key_id||a.sshKid||void 0;const $=this.generateCacheRecord(e,o,s,a,_,d,c);let _e;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),_e=new TokenCacheContext(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(_e)),h&&!g&&$.account){const rt=$.account.generateAccountKey();if(!this.cacheStorage.getAccount(rt,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ResponseHandler.generateAuthenticationResult(this.cryptoObj,o,$,!1,a,_,j,void 0,b)}await this.cacheStorage.saveCacheRecord($,a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&_e&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(_e))}return ResponseHandler.generateAuthenticationResult(this.cryptoObj,o,$,!1,a,_,j,e,b)}generateCacheRecord(e,o,s,a,c,d,h){const g=o.getPreferredCache();if(!g)throw createClientAuthError(invalidCacheEnvironment);const b=getTenantIdFromIdTokenClaims(c);let _,j;e.id_token&&c&&(_=createIdTokenEntity(this.homeAccountIdentifier,g,e.id_token,this.clientId,b||""),j=buildAccountToCache(this.cacheStorage,o,this.homeAccountIdentifier,c,this.cryptoObj.base64Decode,e.client_info,g,b,h,void 0,this.logger));let $=null;if(e.access_token){const rt=e.scope?ScopeSet.fromString(e.scope):new ScopeSet(a.scopes||[]),lt=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,tt=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,nt=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,it=s+lt,ft=it+tt,st=nt&&nt>0?s+nt:void 0;$=createAccessTokenEntity(this.homeAccountIdentifier,g,e.access_token,this.clientId,b||o.tenant||"",rt.printScopes(),it,ft,this.cryptoObj.base64Decode,st,e.token_type,d,e.key_id,a.claims,a.requestedClaimsHash)}let _e=null;if(e.refresh_token){let rt;if(e.refresh_token_expires_in){const lt=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;rt=s+lt}_e=createRefreshTokenEntity(this.homeAccountIdentifier,g,e.refresh_token,this.clientId,e.foci,d,rt)}let et=null;return e.foci&&(et={clientId:this.clientId,environment:g,familyId:e.foci}),new CacheRecord(j,_,$,_e,et)}static async generateAuthenticationResult(e,o,s,a,c,d,h,g,b){var it,ft,st,at,Ct;let _=Constants.EMPTY_STRING,j=[],$=null,_e,et,rt=Constants.EMPTY_STRING;if(s.accessToken){if(s.accessToken.tokenType===AuthenticationScheme.POP){const yt=new PopTokenGenerator(e),{secret:pt,keyId:gt}=s.accessToken;if(!gt)throw createClientAuthError(keyIdMissing);_=await yt.signPopToken(pt,gt,c)}else _=s.accessToken.secret;j=ScopeSet.fromString(s.accessToken.target).asArray(),$=new Date(Number(s.accessToken.expiresOn)*1e3),_e=new Date(Number(s.accessToken.extendedExpiresOn)*1e3),s.accessToken.refreshOn&&(et=new Date(Number(s.accessToken.refreshOn)*1e3))}s.appMetadata&&(rt=s.appMetadata.familyId===THE_FAMILY_ID?THE_FAMILY_ID:"");const lt=(d==null?void 0:d.oid)||(d==null?void 0:d.sub)||"",tt=(d==null?void 0:d.tid)||"";g!=null&&g.spa_accountid&&s.account&&(s.account.nativeAccountId=g==null?void 0:g.spa_accountid);const nt=s.account?updateAccountTenantProfileData(s.account.getAccountInfo(),void 0,d,(it=s.idToken)==null?void 0:it.secret):null;return{authority:o.canonicalAuthority,uniqueId:lt,tenantId:tt,scopes:j,account:nt,idToken:((ft=s==null?void 0:s.idToken)==null?void 0:ft.secret)||"",idTokenClaims:d||{},accessToken:_,fromCache:a,expiresOn:$,extExpiresOn:_e,refreshOn:et,correlationId:c.correlationId,requestId:b||Constants.EMPTY_STRING,familyId:rt,tokenType:((st=s.accessToken)==null?void 0:st.tokenType)||Constants.EMPTY_STRING,state:h?h.userRequestState:Constants.EMPTY_STRING,cloudGraphHostName:((at=s.account)==null?void 0:at.cloudGraphHostName)||Constants.EMPTY_STRING,msGraphHost:((Ct=s.account)==null?void 0:Ct.msGraphHost)||Constants.EMPTY_STRING,code:g==null?void 0:g.spa_code,fromNativeBroker:!1}}}function buildAccountToCache(i,e,o,s,a,c,d,h,g,b,_){_==null||_.verbose("setCachedAccount called");const $=i.getAccountKeys().find(lt=>lt.startsWith(o));let _e=null;$&&(_e=i.getAccount($,_));const et=_e||AccountEntity.createAccount({homeAccountId:o,idTokenClaims:s,clientInfo:c,environment:d,cloudGraphHostName:g==null?void 0:g.cloud_graph_host_name,msGraphHost:g==null?void 0:g.msgraph_host,nativeAccountId:b},e,a),rt=et.tenantProfiles||[];if(h&&!rt.find(lt=>lt.tenantId===h)){const lt=buildTenantProfileFromIdTokenClaims(o,s);rt.push(lt)}return et.tenantProfiles=rt,et}/*! @azure/msal-common v14.7.1 2024-02-17 */class AuthorizationCodeClient extends BaseClient{constructor(e,o){var s;super(e,o),this.includeRedirectUri=!0,this.oidcDefaultScopes=(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes}async getAuthCodeUrl(e){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.GetAuthCodeUrl,e.correlationId);const o=await invokeAsync(this.createAuthCodeUrlQueryString.bind(this),PerformanceEvents.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return UrlString.appendQueryString(this.authority.authorizationEndpoint,o)}async acquireToken(e,o){var h,g;if((h=this.performanceClient)==null||h.addQueueMeasurement(PerformanceEvents.AuthClientAcquireToken,e.correlationId),!e.code)throw createClientAuthError(requestCannotBeMade);const s=nowSeconds(),a=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),c=(g=a.headers)==null?void 0:g[HeaderNames.X_MS_REQUEST_ID],d=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return d.validateTokenResponse(a.body),invokeAsync(d.handleServerTokenResponse.bind(d),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,s,e,o,void 0,void 0,void 0,c)}handleFragmentResponse(e,o){if(new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,o),!e.code)throw createClientAuthError(authorizationCodeMissingFromServerResponse);return e}getLogoutUri(e){if(!e)throw createClientConfigurationError(logoutRequestEmpty);const o=this.createLogoutUrlQueryString(e);return UrlString.appendQueryString(this.authority.endSessionEndpoint,o)}async executeTokenRequest(e,o){var b,_;(b=this.performanceClient)==null||b.addQueueMeasurement(PerformanceEvents.AuthClientExecuteTokenRequest,o.correlationId);const s=this.createTokenQueryParameters(o),a=UrlString.appendQueryString(e.tokenEndpoint,s),c=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,o.correlationId)(o);let d;if(o.clientInfo)try{const j=buildClientInfo(o.clientInfo,this.cryptoUtils.base64Decode);d={credential:`${j.uid}${Separators.CLIENT_INFO_SEPARATOR}${j.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(j){this.logger.verbose("Could not parse client info for CCS Header: "+j)}const h=this.createTokenRequestHeaders(d||o.ccsCredential),g={clientId:((_=o.tokenBodyParameters)==null?void 0:_.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:o.scopes,claims:o.claims,authenticationScheme:o.authenticationScheme,resourceRequestMethod:o.resourceRequestMethod,resourceRequestUri:o.resourceRequestUri,shrClaims:o.shrClaims,sshKid:o.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,o.correlationId)(a,c,h,g,o.correlationId,PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var c,d;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthClientCreateTokenRequestBody,e.correlationId);const o=new RequestParameterBuilder;if(o.addClientId(((d=e.tokenBodyParameters)==null?void 0:d[CLIENT_ID])||this.config.authOptions.clientId),this.includeRedirectUri?o.addRedirectUri(e.redirectUri):RequestValidator.validateRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,this.oidcDefaultScopes),o.addAuthorizationCode(e.code),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&o.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&o.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&o.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const h=this.config.clientCredentials.clientAssertion;o.addClientAssertion(h.assertion),o.addClientAssertionType(h.assertionType)}if(o.addGrantType(GrantType.AUTHORIZATION_CODE_GRANT),o.addClientInfo(),e.authenticationScheme===AuthenticationScheme.POP){const h=new PopTokenGenerator(this.cryptoUtils,this.performanceClient),g=await invokeAsync(h.generateCnf.bind(h),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);o.addPopToken(g.reqCnfString)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)o.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);const s=e.correlationId||this.config.cryptoInterface.createNewGuid();o.addCorrelationId(s),(!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities);let a;if(e.clientInfo)try{const h=buildClientInfo(e.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${h.uid}${Separators.CLIENT_INFO_SEPARATOR}${h.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(h){this.logger.verbose("Could not parse client info for CCS Header: "+h)}else a=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const h=buildClientInfoFromHomeAccountId(a.credential);o.addCcsOid(h)}catch(h){this.logger.verbose("Could not parse home account ID for CCS Header: "+h)}break;case CcsCredentialType.UPN:o.addCcsUpn(a.credential);break}return e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[RETURN_SPA_CODE])&&o.addExtraQueryParameters({[RETURN_SPA_CODE]:"1"}),o.createQueryString()}async createAuthCodeUrlQueryString(e){var c,d;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthClientCreateQueryString,e.correlationId);const o=new RequestParameterBuilder;o.addClientId(((d=e.extraQueryParameters)==null?void 0:d[CLIENT_ID])||this.config.authOptions.clientId);const s=[...e.scopes||[],...e.extraScopesToConsent||[]];o.addScopes(s,!0,this.oidcDefaultScopes),o.addRedirectUri(e.redirectUri);const a=e.correlationId||this.config.cryptoInterface.createNewGuid();if(o.addCorrelationId(a),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(this.config.libraryInfo),isOidcProtocolMode(this.config)||o.addApplicationTelemetry(this.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==PromptValue.SELECT_ACCOUNT)if(e.sid&&e.prompt===PromptValue.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const h=this.extractAccountSid(e.account),g=this.extractLoginHint(e.account);if(g){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(g);try{const b=buildClientInfoFromHomeAccountId(e.account.homeAccountId);o.addCcsOid(b)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(h&&e.prompt===PromptValue.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(h);try{const b=buildClientInfoFromHomeAccountId(e.account.homeAccountId);o.addCcsOid(b)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const b=buildClientInfoFromHomeAccountId(e.account.homeAccountId);o.addCcsOid(b)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&o.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===AuthenticationScheme.POP)){const h=new PopTokenGenerator(this.cryptoUtils),g=await invokeAsync(h.generateCnf.bind(h),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);o.addPopToken(g.reqCnfHash)}return o.createQueryString()}createLogoutUrlQueryString(e){const o=new RequestParameterBuilder;return e.postLogoutRedirectUri&&o.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&o.addCorrelationId(e.correlationId),e.idTokenHint&&o.addIdTokenHint(e.idTokenHint),e.state&&o.addState(e.state),e.logoutHint&&o.addLogoutHint(e.logoutHint),e.extraQueryParameters&&o.addExtraQueryParameters(e.extraQueryParameters),o.createQueryString()}extractAccountSid(e){var o;return((o=e.idTokenClaims)==null?void 0:o.sid)||null}extractLoginHint(e){var o;return((o=e.idTokenClaims)==null?void 0:o.login_hint)||null}}/*! @azure/msal-common v14.7.1 2024-02-17 */const DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS=300;class RefreshTokenClient extends BaseClient{constructor(e,o){super(e,o)}async acquireToken(e){var d,h;(d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireToken,e.correlationId);const o=nowSeconds(),s=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=(h=s.headers)==null?void 0:h[HeaderNames.X_MS_REQUEST_ID],c=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return c.validateTokenResponse(s.body),invokeAsync(c.handleServerTokenResponse.bind(c),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(s.body,this.authority,o,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){var s;if(!e)throw createClientConfigurationError(tokenRequestEmpty);if((s=this.performanceClient)==null||s.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw createClientAuthError(noAccountInSilentRequest);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(a){const c=a instanceof InteractionRequiredAuthError&&a.errorCode===noTokensFound,d=a instanceof ServerError&&a.errorCode===Errors.INVALID_GRANT_ERROR&&a.subError===Errors.CLIENT_MISMATCH_ERROR;if(c||d)return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw a}return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,o){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const s=invoke(this.cacheManager.getRefreshToken.bind(this.cacheManager),PerformanceEvents.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,o,void 0,this.performanceClient,e.correlationId);if(!s)throw createInteractionRequiredAuthError(noTokensFound);if(s.expiresOn&&isTokenExpired(s.expiresOn,e.refreshTokenExpirationOffsetSeconds||DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS))throw createInteractionRequiredAuthError(refreshTokenExpired);const a={...e,refreshToken:s.secret,authenticationScheme:e.authenticationScheme||AuthenticationScheme.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}};try{return await invokeAsync(this.acquireToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(a)}catch(d){if(d instanceof InteractionRequiredAuthError&&d.subError===badToken){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const h=generateCredentialKey(s);this.cacheManager.removeRefreshToken(h)}throw d}}async executeTokenRequest(e,o){var g,b;(g=this.performanceClient)==null||g.addQueueMeasurement(PerformanceEvents.RefreshTokenClientExecuteTokenRequest,e.correlationId);const s=this.createTokenQueryParameters(e),a=UrlString.appendQueryString(o.tokenEndpoint,s),c=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),d=this.createTokenRequestHeaders(e.ccsCredential),h={clientId:((b=e.tokenBodyParameters)==null?void 0:b.clientId)||this.config.authOptions.clientId,authority:o.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(a,c,d,h,e.correlationId,PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var a,c,d;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const o=e.correlationId,s=new RequestParameterBuilder;if(s.addClientId(((c=e.tokenBodyParameters)==null?void 0:c[CLIENT_ID])||this.config.authOptions.clientId),e.redirectUri&&s.addRedirectUri(e.redirectUri),s.addScopes(e.scopes,!0,(d=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:d.defaultScopes),s.addGrantType(GrantType.REFRESH_TOKEN_GRANT),s.addClientInfo(),s.addLibraryInfo(this.config.libraryInfo),s.addApplicationTelemetry(this.config.telemetry.application),s.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&s.addServerTelemetry(this.serverTelemetryManager),s.addCorrelationId(o),s.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&s.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const h=this.config.clientCredentials.clientAssertion;s.addClientAssertion(h.assertion),s.addClientAssertionType(h.assertionType)}if(e.authenticationScheme===AuthenticationScheme.POP){const h=new PopTokenGenerator(this.cryptoUtils,this.performanceClient),g=await invokeAsync(h.generateCnf.bind(h),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);s.addPopToken(g.reqCnfString)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)s.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);if((!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&s.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const h=buildClientInfoFromHomeAccountId(e.ccsCredential.credential);s.addCcsOid(h)}catch(h){this.logger.verbose("Could not parse home account ID for CCS Header: "+h)}break;case CcsCredentialType.UPN:s.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&s.addExtraQueryParameters(e.tokenBodyParameters),s.createQueryString()}}/*! @azure/msal-common v14.7.1 2024-02-17 */class SilentFlowClient extends BaseClient{constructor(e,o){super(e,o)}async acquireToken(e){try{const[o,s]=await this.acquireCachedToken(e);return s===CacheOutcome.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),o}catch(o){if(o instanceof ClientAuthError&&o.errorCode===tokenRefreshRequired)return new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw o}}async acquireCachedToken(e){var g;(g=this.performanceClient)==null||g.addQueueMeasurement(PerformanceEvents.SilentFlowClientAcquireCachedToken,e.correlationId);let o=CacheOutcome.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!StringUtils.isEmptyObj(e.claims))throw this.setCacheOutcome(CacheOutcome.FORCE_REFRESH_OR_CLAIMS,e.correlationId),createClientAuthError(tokenRefreshRequired);if(!e.account)throw createClientAuthError(noAccountInSilentRequest);const s=e.account.tenantId||getTenantFromAuthorityString(e.authority),a=this.cacheManager.getTokenKeys(),c=this.cacheManager.getAccessToken(e.account,e,a,s,this.performanceClient,e.correlationId);if(c){if(wasClockTurnedBack(c.cachedAt)||isTokenExpired(c.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),createClientAuthError(tokenRefreshRequired);c.refreshOn&&isTokenExpired(c.refreshOn,0)&&(o=CacheOutcome.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN,e.correlationId),createClientAuthError(tokenRefreshRequired);const d=e.authority||this.authority.getPreferredCache(),h={account:this.cacheManager.readAccountFromCache(e.account),accessToken:c,idToken:this.cacheManager.getIdToken(e.account,a,s,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(d)};return this.setCacheOutcome(o,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await invokeAsync(this.generateResultFromCacheRecord.bind(this),PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(h,e),o]}setCacheOutcome(e,o){var s,a;(s=this.serverTelemetryManager)==null||s.setCacheOutcome(e),(a=this.performanceClient)==null||a.addFields({cacheOutcome:e},o),e!==CacheOutcome.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,o){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,o.correlationId);let s;if(e.idToken&&(s=extractTokenClaims(e.idToken.secret,this.config.cryptoInterface.base64Decode)),o.maxAge||o.maxAge===0){const c=s==null?void 0:s.auth_time;if(!c)throw createClientAuthError(authTimeNotFound);checkMaxAge(c,o.maxAge)}return ResponseHandler.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,o,s)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const StubbedNetworkModule={sendGetRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented)),sendPostRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented))};/*! @azure/msal-common v14.7.1 2024-02-17 */const missingKidError="missing_kid_error",missingAlgError="missing_alg_error";/*! @azure/msal-common v14.7.1 2024-02-17 */const JoseHeaderErrorMessages={[missingKidError]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[missingAlgError]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class JoseHeaderError extends AuthError{constructor(e,o){super(e,o),this.name="JoseHeaderError",Object.setPrototypeOf(this,JoseHeaderError.prototype)}}function createJoseHeaderError(i){return new JoseHeaderError(i,JoseHeaderErrorMessages[i])}/*! @azure/msal-common v14.7.1 2024-02-17 */class JoseHeader{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw createJoseHeaderError(missingKidError);if(!e.alg)throw createJoseHeaderError(missingAlgError);const o=new JoseHeader({typ:e.typ||JsonWebTokenTypes.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(o)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class ServerTelemetryManager{constructor(e,o){this.cacheOutcome=CacheOutcome.NOT_APPLICABLE,this.cacheManager=o,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Constants.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Constants.EMPTY_STRING,this.telemetryCacheKey=SERVER_TELEM_CONSTANTS.CACHE_KEY+Separators.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`,o=[this.wrapperSKU,this.wrapperVer].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),a=[e,s].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,a,o].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),o=ServerTelemetryManager.maxErrorsToSend(e),s=e.failedRequests.slice(0,2*o).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),a=e.errors.slice(0,o).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),c=e.errors.length,d=o<c?SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE:SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE,h=[c,d].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,e.cacheHits,s,a,h].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const o=this.getLastRequests();o.errors.length>=SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS&&(o.failedRequests.shift(),o.failedRequests.shift(),o.errors.shift()),o.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof AuthError?e.subError?o.errors.push(e.subError):e.errorCode?o.errors.push(e.errorCode):o.errors.push(e.toString()):o.errors.push(e.toString()):o.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),o=ServerTelemetryManager.maxErrorsToSend(e),s=e.errors.length;if(o===s)this.cacheManager.removeItem(this.telemetryCacheKey);else{const a={failedRequests:e.failedRequests.slice(o*2),errors:e.errors.slice(o),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}}static maxErrorsToSend(e){let o,s=0,a=0;const c=e.errors.length;for(o=0;o<c;o++){const d=e.failedRequests[2*o]||Constants.EMPTY_STRING,h=e.failedRequests[2*o+1]||Constants.EMPTY_STRING,g=e.errors[o]||Constants.EMPTY_STRING;if(a+=d.toString().length+h.toString().length+g.length+3,a<SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES)s+=1;else break}return s}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Constants.EMPTY_STRING),e.push(this.regionSource||Constants.EMPTY_STRING),e.push(this.regionOutcome||Constants.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}}/*! @azure/msal-common v14.7.1 2024-02-17 */class StubPerformanceMeasurement{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class StubPerformanceClient{generateId(){return"callback-id"}startMeasurement(e,o){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:PerformanceEventStatus.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:o||""},measurement:new StubPerformanceMeasurement}}startPerformanceMeasurement(){return new StubPerformanceMeasurement}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const pkceNotCreated="pkce_not_created",cryptoNonExistent="crypto_nonexistent",emptyNavigateUri="empty_navigate_uri",hashEmptyError="hash_empty_error",noStateInHash="no_state_in_hash",hashDoesNotContainKnownProperties="hash_does_not_contain_known_properties",unableToParseState="unable_to_parse_state",stateInteractionTypeMismatch="state_interaction_type_mismatch",interactionInProgress="interaction_in_progress",popupWindowError="popup_window_error",emptyWindowError="empty_window_error",userCancelled="user_cancelled",monitorPopupTimeout="monitor_popup_timeout",monitorWindowTimeout="monitor_window_timeout",redirectInIframe="redirect_in_iframe",blockIframeReload="block_iframe_reload",blockNestedPopups="block_nested_popups",iframeClosedPrematurely="iframe_closed_prematurely",silentLogoutUnsupported="silent_logout_unsupported",noAccountError="no_account_error",silentPromptValueError="silent_prompt_value_error",noTokenRequestCacheError="no_token_request_cache_error",unableToParseTokenRequestCacheError="unable_to_parse_token_request_cache_error",noCachedAuthorityError="no_cached_authority_error",authRequestNotSetError="auth_request_not_set_error",invalidCacheType="invalid_cache_type",nonBrowserEnvironment="non_browser_environment",databaseNotOpen="database_not_open",noNetworkConnectivity="no_network_connectivity",postRequestFailed="post_request_failed",getRequestFailed="get_request_failed",failedToParseResponse="failed_to_parse_response",unableToLoadToken="unable_to_load_token",cryptoKeyNotFound="crypto_key_not_found",authCodeRequired="auth_code_required",authCodeOrNativeAccountIdRequired="auth_code_or_nativeAccountId_required",spaCodeAndNativeAccountIdPresent="spa_code_and_nativeAccountId_present",databaseUnavailable="database_unavailable",unableToAcquireTokenFromNativePlatform="unable_to_acquire_token_from_native_platform",nativeHandshakeTimeout="native_handshake_timeout",nativeExtensionNotInstalled="native_extension_not_installed",nativeConnectionNotEstablished="native_connection_not_established",uninitializedPublicClientApplication="uninitialized_public_client_application",nativePromptNotSupported="native_prompt_not_supported",invalidBase64String="invalid_base64_string";/*! @azure/msal-browser v3.10.0 2024-02-17 */const ErrorLink="For more visit: aka.ms/msaljs/browser-errors",BrowserAuthErrorMessages={[pkceNotCreated]:"The PKCE code challenge and verifier could not be generated.",[cryptoNonExistent]:"The crypto object or function is not available.",[emptyNavigateUri]:"Navigation URI is empty. Please check stack trace for more info.",[hashEmptyError]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ErrorLink}`,[noStateInHash]:"Hash does not contain state. Please verify that the request originated from msal.",[hashDoesNotContainKnownProperties]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ErrorLink}`,[unableToParseState]:"Unable to parse state. Please verify that the request originated from msal.",[stateInteractionTypeMismatch]:"Hash contains state but the interaction type does not match the caller.",[interactionInProgress]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ErrorLink}`,[popupWindowError]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[emptyWindowError]:"window.open returned null or undefined window object.",[userCancelled]:"User cancelled the flow.",[monitorPopupTimeout]:`Token acquisition in popup failed due to timeout.  ${ErrorLink}`,[monitorWindowTimeout]:`Token acquisition in iframe failed due to timeout.  ${ErrorLink}`,[redirectInIframe]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[blockIframeReload]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ErrorLink}`,[blockNestedPopups]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[iframeClosedPrematurely]:"The iframe being monitored was closed prematurely.",[silentLogoutUnsupported]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[noAccountError]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[silentPromptValueError]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[noTokenRequestCacheError]:"No token request found in cache.",[unableToParseTokenRequestCacheError]:"The cached token request could not be parsed.",[noCachedAuthorityError]:"No cached authority found.",[authRequestNotSetError]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[invalidCacheType]:"Invalid cache type",[nonBrowserEnvironment]:"Login and token requests are not supported in non-browser environments.",[databaseNotOpen]:"Database is not open!",[noNetworkConnectivity]:"No network connectivity. Check your internet connection.",[postRequestFailed]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[getRequestFailed]:"Network request failed. Please check the network trace to determine root cause.",[failedToParseResponse]:"Failed to parse network response. Check network trace.",[unableToLoadToken]:"Error loading token to cache.",[cryptoKeyNotFound]:"Cryptographic Key or Keypair not found in browser storage.",[authCodeRequired]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[authCodeOrNativeAccountIdRequired]:"An authorization code or nativeAccountId must be provided to this flow.",[spaCodeAndNativeAccountIdPresent]:"Request cannot contain both spa code and native account id.",[databaseUnavailable]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[unableToAcquireTokenFromNativePlatform]:`Unable to acquire token from native platform.  ${ErrorLink}`,[nativeHandshakeTimeout]:"Timed out while attempting to establish connection to browser extension",[nativeExtensionNotInstalled]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[nativeConnectionNotEstablished]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ErrorLink}`,[uninitializedPublicClientApplication]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ErrorLink}`,[nativePromptNotSupported]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[invalidBase64String]:"Invalid base64 encoded string."};class BrowserAuthError extends AuthError{constructor(e){super(e,BrowserAuthErrorMessages[e]),Object.setPrototypeOf(this,BrowserAuthError.prototype),this.name="BrowserAuthError"}}function createBrowserAuthError(i){return new BrowserAuthError(i)}/*! @azure/msal-browser v3.10.0 2024-02-17 */const BrowserConstants={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},NativeConstants={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},NativeExtensionMethod={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},BrowserCacheLocation={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},HTTP_REQUEST_TYPE={GET:"GET",POST:"POST"},TemporaryCacheKeys={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},StaticCacheKeys={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},InMemoryCacheKeys={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ApiId={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var InteractionType;(function(i){i.Redirect="redirect",i.Popup="popup",i.Silent="silent",i.None="none"})(InteractionType||(InteractionType={}));const InteractionStatus={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},DEFAULT_REQUEST={scopes:OIDC_DEFAULT_SCOPES},KEY_FORMAT_JWK="jwk",WrapperSKU={React:"@azure/msal-react",Angular:"@azure/msal-angular"},DB_NAME="msal.db",DB_VERSION=1,DB_TABLE_NAME=`${DB_NAME}.keys`,CacheLookupPolicy={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},iFrameRenewalPolicies=[CacheLookupPolicy.Default,CacheLookupPolicy.Skip,CacheLookupPolicy.RefreshTokenAndNetwork],LOG_LEVEL_CACHE_KEY="msal.browser.log.level",LOG_PII_CACHE_KEY="msal.browser.log.pii";/*! @azure/msal-browser v3.10.0 2024-02-17 */const PKCS1_V15_KEYGEN_ALG="RSASSA-PKCS1-v1_5",S256_HASH_ALG="SHA-256",MODULUS_LENGTH=2048,PUBLIC_EXPONENT=new Uint8Array([1,0,1]),UUID_CHARS="0123456789abcdef",UINT32_ARR=new Uint32Array(1),keygenAlgorithmOptions={name:PKCS1_V15_KEYGEN_ALG,hash:S256_HASH_ALG,modulusLength:MODULUS_LENGTH,publicExponent:PUBLIC_EXPONENT};function validateCryptoAvailable(i){if("crypto"in window)i.verbose("BrowserCrypto: modern crypto interface available");else throw i.error("BrowserCrypto: crypto interface is unavailable"),createBrowserAuthError(cryptoNonExistent)}async function sha256Digest(i,e,o){e==null||e.addQueueMeasurement(PerformanceEvents.Sha256Digest,o);const a=new TextEncoder().encode(i);return window.crypto.subtle.digest(S256_HASH_ALG,a)}function getRandomValues(i){return window.crypto.getRandomValues(i)}function getRandomUint32(){return window.crypto.getRandomValues(UINT32_ARR),UINT32_ARR[0]}function createNewGuid(){const i=Date.now(),e=getRandomUint32()*1024+(getRandomUint32()&1023),o=new Uint8Array(16),s=Math.trunc(e/2**30),a=e&2**30-1,c=getRandomUint32();o[0]=i/2**40,o[1]=i/2**32,o[2]=i/2**24,o[3]=i/2**16,o[4]=i/2**8,o[5]=i,o[6]=112|s>>>8,o[7]=s,o[8]=128|a>>>24,o[9]=a>>>16,o[10]=a>>>8,o[11]=a,o[12]=c>>>24,o[13]=c>>>16,o[14]=c>>>8,o[15]=c;let d="";for(let h=0;h<o.length;h++)d+=UUID_CHARS.charAt(o[h]>>>4),d+=UUID_CHARS.charAt(o[h]&15),(h===3||h===5||h===7||h===9)&&(d+="-");return d}async function generateKeyPair(i,e){return window.crypto.subtle.generateKey(keygenAlgorithmOptions,i,e)}async function exportJwk(i){return window.crypto.subtle.exportKey(KEY_FORMAT_JWK,i)}async function importJwk(i,e,o){return window.crypto.subtle.importKey(KEY_FORMAT_JWK,i,keygenAlgorithmOptions,e,o)}async function sign(i,e){return window.crypto.subtle.sign(keygenAlgorithmOptions,i,e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function clearHash(i){i.location.hash="",typeof i.history.replaceState=="function"&&i.history.replaceState(null,"",`${i.location.origin}${i.location.pathname}${i.location.search}`)}function replaceHash(i){const e=i.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function isInIframe(){return window.parent!==window}function isInPopup(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${BrowserConstants.POPUP_NAME_PREFIX}.`)===0}function getCurrentUri(){return window.location.href.split("?")[0].split("#")[0]}function getHomepage(){const e=new UrlString(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function blockReloadInHiddenIframes(){if(UrlString.hashContainsKnownProperties(window.location.hash)&&isInIframe())throw createBrowserAuthError(blockIframeReload)}function blockRedirectInIframe(i,e){const o=isInIframe();if(i===InteractionType.Redirect&&o&&!e)throw createBrowserAuthError(redirectInIframe)}function blockAcquireTokenInPopups(){if(isInPopup())throw createBrowserAuthError(blockNestedPopups)}function blockNonBrowserEnvironment(i){if(!i)throw createBrowserAuthError(nonBrowserEnvironment)}function blockAPICallsBeforeInitialize(i){if(!i)throw createBrowserAuthError(uninitializedPublicClientApplication)}function preconnect(i){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(i).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function(e,o,s){let a=Promise.resolve();if(o&&o.length>0){const c=document.getElementsByTagName("link");a=Promise.all(o.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(!!s)for(let j=c.length-1;j>=0;j--){const $=c[j];if($.href===d&&(!h||$.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${g}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":scriptRel,h||(_.as="script",_.crossOrigin=""),_.href=d,document.head.appendChild(_),h)return new Promise((j,$)=>{_.addEventListener("load",j),_.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${d}`)))})}))}return a.then(()=>e()).catch(c=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c})};/*! @azure/msal-browser v3.10.0 2024-02-17 */class NavigationClient{navigateInternal(e,o){return NavigationClient.defaultNavigateWindow(e,o)}navigateExternal(e,o){return NavigationClient.defaultNavigateWindow(e,o)}static defaultNavigateWindow(e,o){return o.noHistory?window.location.replace(e):window.location.assign(e),new Promise(s=>{setTimeout(()=>{s(!0)},o.timeout)})}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class FetchClient{async sendGetRequestAsync(e,o){let s;try{s=await fetch(e,{method:HTTP_REQUEST_TYPE.GET,headers:this.getFetchHeaders(o)})}catch{throw window.navigator.onLine?createBrowserAuthError(getRequestFailed):createBrowserAuthError(noNetworkConnectivity)}try{return{headers:this.getHeaderDict(s.headers),body:await s.json(),status:s.status}}catch{throw createBrowserAuthError(failedToParseResponse)}}async sendPostRequestAsync(e,o){const s=o&&o.body||Constants.EMPTY_STRING;let a;try{a=await fetch(e,{method:HTTP_REQUEST_TYPE.POST,headers:this.getFetchHeaders(o),body:s})}catch{throw window.navigator.onLine?createBrowserAuthError(postRequestFailed):createBrowserAuthError(noNetworkConnectivity)}try{return{headers:this.getHeaderDict(a.headers),body:await a.json(),status:a.status}}catch{throw createBrowserAuthError(failedToParseResponse)}}getFetchHeaders(e){const o=new Headers;if(!(e&&e.headers))return o;const s=e.headers;return Object.keys(s).forEach(a=>{o.append(a,s[a])}),o}getHeaderDict(e){const o={};return e.forEach((s,a)=>{o[a]=s}),o}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const DEFAULT_POPUP_TIMEOUT_MS=6e4,DEFAULT_IFRAME_TIMEOUT_MS=1e4,DEFAULT_REDIRECT_TIMEOUT_MS=3e4,DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS=2e3;function buildConfiguration({auth:i,cache:e,system:o,telemetry:s},a){const c={clientId:Constants.EMPTY_STRING,authority:`${Constants.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Constants.EMPTY_STRING,authorityMetadata:Constants.EMPTY_STRING,redirectUri:Constants.EMPTY_STRING,postLogoutRedirectUri:Constants.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ProtocolMode.AAD,OIDCOptions:{serverResponseType:ServerResponseType.FRAGMENT,defaultScopes:[Constants.OPENID_SCOPE,Constants.PROFILE_SCOPE,Constants.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:AzureCloudInstance.None,tenant:Constants.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},d={cacheLocation:BrowserCacheLocation.SessionStorage,temporaryCacheLocation:BrowserCacheLocation.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===BrowserCacheLocation.LocalStorage),claimsBasedCachingEnabled:!1},h={loggerCallback:()=>{},logLevel:LogLevel.Info,piiLoggingEnabled:!1},b={...{...DEFAULT_SYSTEM_OPTIONS,loggerOptions:h,networkClient:a?new FetchClient:StubbedNetworkModule,navigationClient:new NavigationClient,loadFrameTimeout:0,windowHashTimeout:(o==null?void 0:o.loadFrameTimeout)||DEFAULT_POPUP_TIMEOUT_MS,iframeHashTimeout:(o==null?void 0:o.loadFrameTimeout)||DEFAULT_IFRAME_TIMEOUT_MS,navigateFrameWait:0,redirectNavigationTimeout:DEFAULT_REDIRECT_TIMEOUT_MS,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(o==null?void 0:o.nativeBrokerHandshakeTimeout)||DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS,pollIntervalMilliseconds:BrowserConstants.DEFAULT_POLL_INTERVAL_MS},...o,loggerOptions:(o==null?void 0:o.loggerOptions)||h},_={application:{appName:Constants.EMPTY_STRING,appVersion:Constants.EMPTY_STRING},client:new StubPerformanceClient};if((i==null?void 0:i.protocolMode)!==ProtocolMode.OIDC&&(i!=null&&i.OIDCOptions)&&new Logger(b.loggerOptions).warning(JSON.stringify(createClientConfigurationError(cannotSetOIDCOptions))),i!=null&&i.protocolMode&&i.protocolMode!==ProtocolMode.AAD&&(b!=null&&b.allowNativeBroker))throw createClientConfigurationError(cannotAllowNativeBroker);return{auth:{...c,...i,OIDCOptions:{...c.OIDCOptions,...i==null?void 0:i.OIDCOptions}},cache:{...d,...e},system:b,telemetry:{..._,...s}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const name$2="@azure/msal-browser",version$1="3.10.0";/*! @azure/msal-browser v3.10.0 2024-02-17 */class BaseOperatingContext{static loggerCallback(e,o){switch(e){case LogLevel.Error:console.error(o);return;case LogLevel.Info:console.info(o);return;case LogLevel.Verbose:console.debug(o);return;case LogLevel.Warning:console.warn(o);return;default:console.log(o);return}}constructor(e){var g;this.browserEnvironment=typeof window<"u",this.config=buildConfiguration(e,this.browserEnvironment);let o;try{o=window[BrowserCacheLocation.SessionStorage]}catch{}const s=o==null?void 0:o.getItem(LOG_LEVEL_CACHE_KEY),a=(g=o==null?void 0:o.getItem(LOG_PII_CACHE_KEY))==null?void 0:g.toLowerCase(),c=a==="true"?!0:a==="false"?!1:void 0,d={...this.config.system.loggerOptions},h=s&&Object.keys(LogLevel).includes(s)?LogLevel[s]:void 0;h&&(d.loggerCallback=BaseOperatingContext.loggerCallback,d.logLevel=h),c!==void 0&&(d.piiLoggingEnabled=c),this.logger=new Logger(d,name$2,version$1),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class StandardOperatingContext extends BaseOperatingContext{getModuleName(){return StandardOperatingContext.MODULE_NAME}getId(){return StandardOperatingContext.ID}async initialize(){return this.available=typeof window<"u",this.available}}StandardOperatingContext.MODULE_NAME="";StandardOperatingContext.ID="StandardOperatingContext";async function createV3Controller(i){const e=new StandardOperatingContext(i);return await e.initialize(),(await __vitePreload(()=>Promise.resolve().then(()=>StandardController$1),void 0)).StandardController.createController(e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function urlEncode(i){return encodeURIComponent(base64Encode(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function urlEncodeArr(i){return base64EncArr(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64Encode(i){return base64EncArr(new TextEncoder().encode(i))}function base64EncArr(i){const e=Array.from(i,o=>String.fromCodePoint(o)).join("");return btoa(e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function base64Decode(i){return new TextDecoder().decode(base64DecToArr(i))}function base64DecToArr(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw createBrowserAuthError(invalidBase64String)}const o=atob(e);return Uint8Array.from(o,s=>s.codePointAt(0)||0)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class DatabaseStorage{constructor(){this.dbName=DB_NAME,this.version=DB_VERSION,this.tableName=DB_TABLE_NAME,this.dbOpen=!1}async open(){return new Promise((e,o)=>{const s=window.indexedDB.open(this.dbName,this.version);s.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),s.addEventListener("success",a=>{const c=a;this.db=c.target.result,this.dbOpen=!0,e()}),s.addEventListener("error",()=>o(createBrowserAuthError(databaseUnavailable)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((o,s)=>{if(!this.db)return s(createBrowserAuthError(databaseNotOpen));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);d.addEventListener("success",h=>{const g=h;this.closeConnection(),o(g.target.result)}),d.addEventListener("error",h=>{this.closeConnection(),s(h)})})}async setItem(e,o){return await this.validateDbIsOpen(),new Promise((s,a)=>{if(!this.db)return a(createBrowserAuthError(databaseNotOpen));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(o,e);h.addEventListener("success",()=>{this.closeConnection(),s()}),h.addEventListener("error",g=>{this.closeConnection(),a(g)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((o,s)=>{if(!this.db)return s(createBrowserAuthError(databaseNotOpen));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);d.addEventListener("success",()=>{this.closeConnection(),o()}),d.addEventListener("error",h=>{this.closeConnection(),s(h)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,o)=>{if(!this.db)return o(createBrowserAuthError(databaseNotOpen));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();c.addEventListener("success",d=>{const h=d;this.closeConnection(),e(h.target.result)}),c.addEventListener("error",d=>{this.closeConnection(),o(d)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((o,s)=>{if(!this.db)return s(createBrowserAuthError(databaseNotOpen));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);d.addEventListener("success",h=>{const g=h;this.closeConnection(),o(g.target.result===1)}),d.addEventListener("error",h=>{this.closeConnection(),s(h)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,o)=>{const s=window.indexedDB.deleteDatabase(DB_NAME);s.addEventListener("success",()=>e(!0)),s.addEventListener("blocked",()=>e(!0)),s.addEventListener("error",()=>o(!1))})}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class MemoryStorage{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,o){this.cache.set(e,o)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((o,s)=>{e.push(s)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class AsyncMemoryStorage{constructor(e,o){this.inMemoryCache=new MemoryStorage,this.indexedDBCache=new DatabaseStorage,this.logger=e,this.storeName=o}handleDatabaseAccessError(e){if(e instanceof BrowserAuthError&&e.errorCode===databaseUnavailable)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const o=this.inMemoryCache.getItem(e);if(!o)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(s){this.handleDatabaseAccessError(s)}return o}async setItem(e,o){this.inMemoryCache.setItem(e,o);try{await this.indexedDBCache.setItem(e,o)}catch(s){this.handleDatabaseAccessError(s)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(o){this.handleDatabaseAccessError(o)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(o){this.handleDatabaseAccessError(o)}return e}async containsKey(e){const o=this.inMemoryCache.containsKey(e);if(!o)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(s){this.handleDatabaseAccessError(s)}return o}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const CryptoKeyStoreNames={asymmetricKeys:"asymmetricKeys",symmetricKeys:"symmetricKeys"};class CryptoKeyStore{constructor(e){this.logger=e,this.asymmetricKeys=new AsyncMemoryStorage(this.logger,CryptoKeyStoreNames.asymmetricKeys),this.symmetricKeys=new AsyncMemoryStorage(this.logger,CryptoKeyStoreNames.symmetricKeys)}async clear(){this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory();try{return await this.asymmetricKeys.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class CryptoOps{constructor(e,o){this.logger=e,validateCryptoAvailable(e),this.cache=new CryptoKeyStore(this.logger),this.performanceClient=o}createNewGuid(){return createNewGuid()}base64Encode(e){return base64Encode(e)}base64Decode(e){return base64Decode(e)}async getPublicKeyThumbprint(e){var _;const o=(_=this.performanceClient)==null?void 0:_.startMeasurement(PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,e.correlationId),s=await generateKeyPair(CryptoOps.EXTRACTABLE,CryptoOps.POP_KEY_USAGES),a=await exportJwk(s.publicKey),c={e:a.e,kty:a.kty,n:a.n},d=getSortedObjectString(c),h=await this.hashString(d),g=await exportJwk(s.privateKey),b=await importJwk(g,!1,["sign"]);return await this.cache.asymmetricKeys.setItem(h,{privateKey:b,publicKey:s.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),o&&o.end({success:!0}),h}async removeTokenBindingKey(e){return await this.cache.asymmetricKeys.removeItem(e),!await this.cache.asymmetricKeys.containsKey(e)}async clearKeystore(){return this.cache.clear()}async signJwt(e,o,s,a){var it;const c=(it=this.performanceClient)==null?void 0:it.startMeasurement(PerformanceEvents.CryptoOptsSignJwt,a),d=await this.cache.asymmetricKeys.getItem(o);if(!d)throw createBrowserAuthError(cryptoKeyNotFound);const h=await exportJwk(d.publicKey),g=getSortedObjectString(h),b=urlEncode(JSON.stringify({kid:o})),_=JoseHeader.getShrHeaderString({...s==null?void 0:s.header,alg:h.alg,kid:b}),j=urlEncode(_);e.cnf={jwk:JSON.parse(g)};const $=urlEncode(JSON.stringify(e)),_e=`${j}.${$}`,rt=new TextEncoder().encode(_e),lt=await sign(d.privateKey,rt),tt=urlEncodeArr(new Uint8Array(lt)),nt=`${_e}.${tt}`;return c&&c.end({success:!0}),nt}async hashString(e){const o=await sha256Digest(e),s=new Uint8Array(o);return urlEncodeArr(s)}}CryptoOps.POP_KEY_USAGES=["sign","verify"];CryptoOps.EXTRACTABLE=!0;function getSortedObjectString(i){return JSON.stringify(i,Object.keys(i).sort())}/*! @azure/msal-browser v3.10.0 2024-02-17 */const storageNotSupported="storage_not_supported",stubbedPublicClientApplicationCalled="stubbed_public_client_application_called",inMemRedirectUnavailable="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.10.0 2024-02-17 */const BrowserConfigurationAuthErrorMessages={[storageNotSupported]:"Given storage configuration option was not supported.",[stubbedPublicClientApplicationCalled]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[inMemRedirectUnavailable]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class BrowserConfigurationAuthError extends AuthError{constructor(e,o){super(e,o),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,BrowserConfigurationAuthError.prototype)}}function createBrowserConfigurationAuthError(i){return new BrowserConfigurationAuthError(i,BrowserConfigurationAuthErrorMessages[i])}/*! @azure/msal-browser v3.10.0 2024-02-17 */class BrowserStorage{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==BrowserCacheLocation.LocalStorage&&e!==BrowserCacheLocation.SessionStorage||!window[e])throw createBrowserConfigurationAuthError(storageNotSupported)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,o){this.windowStorage.setItem(e,o)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */function extractBrowserRequestState(i,e){if(!e)return null;try{return ProtocolUtils.parseRequestState(i,e).libraryState.meta}catch{throw createClientAuthError(invalidState)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class BrowserCacheManager extends CacheManager{constructor(e,o,s,a,c){super(e,s,a,c),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=o,this.logger=a,this.internalStorage=new MemoryStorage,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),o.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(e){switch(e){case BrowserCacheLocation.LocalStorage:case BrowserCacheLocation.SessionStorage:try{return new BrowserStorage(e)}catch(o){this.logger.verbose(o);break}}return this.cacheConfig.cacheLocation=BrowserCacheLocation.MemoryStorage,new MemoryStorage}setupTemporaryCacheStorage(e,o){switch(o){case BrowserCacheLocation.LocalStorage:case BrowserCacheLocation.SessionStorage:try{return new BrowserStorage(e||BrowserCacheLocation.SessionStorage)}catch(s){return this.logger.verbose(s),this.internalStorage}case BrowserCacheLocation.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.ID_TOKEN}`,o=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.CLIENT_INFO}`,s=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.ERROR}`,a=`${Constants.CACHE_PREFIX}.${PersistentCacheKeys.ERROR_DESC}`,c=this.browserStorage.getItem(e),d=this.browserStorage.getItem(o),h=this.browserStorage.getItem(s),g=this.browserStorage.getItem(a),b=[c,d,h,g];[PersistentCacheKeys.ID_TOKEN,PersistentCacheKeys.CLIENT_INFO,PersistentCacheKeys.ERROR,PersistentCacheKeys.ERROR_DESC].forEach((j,$)=>this.migrateCacheEntry(j,b[$]))}migrateCacheEntry(e,o){o&&this.setTemporaryCache(e,o,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS),o=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e&&o){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(a=>{if(this.isCredentialKey(a)){const c=this.getItem(a);if(c){const d=this.validateAndParseJson(c);if(d&&d.hasOwnProperty("credentialType"))switch(d.credentialType){case CredentialType.ID_TOKEN:if(isIdTokenEntity(d)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${a} found, saving key to token key map`);const h=d,g=this.updateCredentialCacheKey(a,h);this.addTokenKey(g,CredentialType.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${a}`);break;case CredentialType.ACCESS_TOKEN:case CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(isAccessTokenEntity(d)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${a} found, saving key to token key map`);const h=d,g=this.updateCredentialCacheKey(a,h);this.addTokenKey(g,CredentialType.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${a}`);break;case CredentialType.REFRESH_TOKEN:if(isRefreshTokenEntity(d)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${a} found, saving key to token key map`);const h=d,g=this.updateCredentialCacheKey(a,h);this.addTokenKey(g,CredentialType.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${a}`);break}}}if(this.isAccountKey(a)){const c=this.getItem(a);if(c){const d=this.validateAndParseJson(c);d&&AccountEntity.isAccountEntity(d)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${a} found, saving key to account key map`),this.addAccountKeyToMap(a))}}})}validateAndParseJson(e){try{const o=JSON.parse(e);return o&&typeof o=="object"?o:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,o){this.browserStorage.setItem(e,o)}getAccount(e,o){this.logger.trace("BrowserCacheManager.getAccount called");const s=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,s,o)}getCachedAccountEntity(e){const o=this.getItem(e);if(!o)return this.removeAccountKeyFromMap(e),null;const s=this.validateAndParseJson(o);return!s||!AccountEntity.isAccountEntity(s)?(this.removeAccountKeyFromMap(e),null):CacheManager.toObject(new AccountEntity,s)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const o=e.generateAccountKey();this.setItem(o,JSON.stringify(e)),this.addAccountKeyToMap(o)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const o=this.getAccountKeys();o.indexOf(e)===-1?(o.push(e),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(o)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const o=this.getAccountKeys(),s=o.indexOf(e);s>-1?(o.splice(s,1),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(o)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,CredentialType.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e){const o=this.validateAndParseJson(e);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,o){this.logger.trace("BrowserCacheManager addTokenKey called");const s=this.getTokenKeys();switch(o){case CredentialType.ID_TOKEN:s.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(e));break;case CredentialType.ACCESS_TOKEN:s.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),s.accessToken.push(e));break;case CredentialType.REFRESH_TOKEN:s.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${o}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(s))}removeTokenKey(e,o){this.logger.trace("BrowserCacheManager removeTokenKey called");const s=this.getTokenKeys();switch(o){case CredentialType.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const a=s.idToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),s.idToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const c=s.accessToken.indexOf(e);c>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),s.accessToken.splice(c,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const d=s.refreshToken.indexOf(e);d>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),s.refreshToken.splice(d,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${o}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(s))}getIdTokenCredential(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null;const s=this.validateAndParseJson(o);return!s||!isIdTokenEntity(s)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),s)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const o=generateCredentialKey(e);this.setItem(o,JSON.stringify(e)),this.addTokenKey(o,CredentialType.ID_TOKEN)}getAccessTokenCredential(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null;const s=this.validateAndParseJson(o);return!s||!isAccessTokenEntity(s)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),s)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const o=generateCredentialKey(e);this.setItem(o,JSON.stringify(e)),this.addTokenKey(o,CredentialType.ACCESS_TOKEN)}getRefreshTokenCredential(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null;const s=this.validateAndParseJson(o);return!s||!isRefreshTokenEntity(s)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),s)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const o=generateCredentialKey(e);this.setItem(o,JSON.stringify(e)),this.addTokenKey(o,CredentialType.REFRESH_TOKEN)}getAppMetadata(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const s=this.validateAndParseJson(o);return!s||!isAppMetadataEntity(e,s)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),s)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const o=generateAppMetadataKey(e);this.setItem(o,JSON.stringify(e))}getServerTelemetry(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const s=this.validateAndParseJson(o);return!s||!isServerTelemetryEntity(e,s)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),s)}setServerTelemetry(e,o){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(o))}getAuthorityMetadata(e){const o=this.internalStorage.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const s=this.validateAndParseJson(o);return s&&isAuthorityMetadataEntity(e,s)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),s):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(o=>this.isAuthorityMetadata(o))}setWrapperMetadata(e,o){this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_SKU,e),this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_VER,o)}getWrapperMetadata(){const e=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_SKU)||Constants.EMPTY_STRING,o=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_VER)||Constants.EMPTY_STRING;return[e,o]}setAuthorityMetadata(e,o){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(o))}getActiveAccount(){const e=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),o=this.getItem(e);if(!o){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const a=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT),c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const d=this.getAccountInfoFilteredBy({localAccountId:c});return d?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(d),d):null}const s=this.validateAndParseJson(o);return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId,tenantId:s.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const o=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),s=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(o,JSON.stringify(a)),this.browserStorage.setItem(s,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(o),this.browserStorage.removeItem(s)}getThrottlingCache(e){const o=this.getItem(e);if(!o)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const s=this.validateAndParseJson(o);return!s||!isThrottlingEntity(e,s)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),s)}setThrottlingCache(e,o){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(o))}getTemporaryCache(e,o){const s=o?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const c=this.getItemCookie(s);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),c}const a=this.temporaryCacheStorage.getItem(s);if(!a){if(this.cacheConfig.cacheLocation===BrowserCacheLocation.LocalStorage){const c=this.browserStorage.getItem(s);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),c}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(e,o,s){const a=s?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(a,o),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(a,o))}removeItem(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}containsKey(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.getKeys().forEach(e=>{(this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e))&&(e.indexOf(Constants.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e){e.addQueueMeasurement(PerformanceEvents.ClearTokensAndKeysWithClaims);const o=this.getTokenKeys(),s=[];o.accessToken.forEach(a=>{const c=this.getAccessTokenCredential(a);c!=null&&c.requestedClaimsHash&&a.includes(c.requestedClaimsHash.toLowerCase())&&s.push(this.removeAccessToken(a))}),await Promise.all(s),s.length>0&&this.logger.warning(`${s.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,o,s){let a=`${encodeURIComponent(e)}=${encodeURIComponent(o)};path=/;SameSite=Lax;`;if(s){const c=this.getCookieExpirationTime(s);a+=`expires=${c};`}this.cacheConfig.secureCookies&&(a+="Secure;"),document.cookie=a}getItemCookie(e){const o=`${encodeURIComponent(e)}=`,s=document.cookie.split(";");for(let a=0;a<s.length;a++){let c=s[a];for(;c.charAt(0)===" ";)c=c.substring(1);if(c.indexOf(o)===0)return decodeURIComponent(c.substring(o.length,c.length))}return Constants.EMPTY_STRING}clearMsalCookies(){const e=`${Constants.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(s=>{for(;s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(e)===0){const a=s.split("=")[0];this.clearItemCookie(a)}})}clearItemCookie(e){this.setItemCookie(e,Constants.EMPTY_STRING,-1)}getCookieExpirationTime(e){const o=new Date;return new Date(o.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):StringUtils.startsWith(e,Constants.CACHE_PREFIX)||StringUtils.startsWith(e,PersistentCacheKeys.ADAL_ID_TOKEN)?e:`${Constants.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:o}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.AUTHORITY}.${o}`)}generateNonceKey(e){const{libraryState:{id:o}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.NONCE_IDTOKEN}.${o}`)}generateStateKey(e){const{libraryState:{id:o}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.REQUEST_STATE}.${o}`)}getCachedAuthority(e){const o=this.generateStateKey(e),s=this.getTemporaryCache(o);if(!s)return null;const a=this.generateAuthorityKey(s);return this.getTemporaryCache(a)}updateCacheEntries(e,o,s,a,c){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const d=this.generateStateKey(e);this.setTemporaryCache(d,e,!1);const h=this.generateNonceKey(e);this.setTemporaryCache(h,o,!1);const g=this.generateAuthorityKey(e);if(this.setTemporaryCache(g,s,!1),c){const b={credential:c.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(b),!0)}else if(a){const b={credential:a,type:CcsCredentialType.UPN};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(b),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.getKeys().forEach(o=>{o.indexOf(e)!==-1&&this.removeItem(o)}),this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.ORIGIN_URI)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.URL_HASH)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.CORRELATION_ID)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const o=this.generateStateKey(e),s=this.temporaryCacheStorage.getItem(o);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${s}`),this.resetRequestCache(s||Constants.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(o=>{if(o.indexOf(TemporaryCacheKeys.REQUEST_STATE)===-1)return;const s=this.temporaryCacheStorage.getItem(o);if(!s)return;const a=extractBrowserRequestState(this.cryptoImpl,s);a&&a.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${s}`),this.resetRequestCache(s))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const o=base64Encode(JSON.stringify(e));this.setTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,o,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const o=this.getTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,!0);if(!o)throw createBrowserAuthError(noTokenRequestCacheError);let s;try{s=JSON.parse(base64Decode(o))}catch(a){throw this.logger.errorPii(`Attempted to parse: ${o}`),this.logger.error(`Parsing cached token request threw with error: ${a}`),createBrowserAuthError(unableToParseTokenRequestCacheError)}if(this.removeItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),!s.authority){const a=this.generateAuthorityKey(e),c=this.getTemporaryCache(a);if(!c)throw createBrowserAuthError(noCachedAuthorityError);s.authority=c}return s}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const o=this.validateAndParseJson(e);return o||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const o=this.getInteractionInProgress();return e?o===this.clientId:!!o}getInteractionInProgress(){const e=`${Constants.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const o=`${Constants.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw createBrowserAuthError(interactionInProgress);this.setTemporaryCache(o,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeItem(o)}getLegacyLoginHint(){const e=this.getTemporaryCache(PersistentCacheKeys.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(PersistentCacheKeys.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const o=this.getTemporaryCache(PersistentCacheKeys.ID_TOKEN,!0);o&&(this.removeItem(this.generateCacheKey(PersistentCacheKeys.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const s=o||e;if(s){const a=extractTokenClaims(s,base64Decode);if(a.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),a.preferred_username;if(a.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),a.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,o){const s=generateCredentialKey(o);if(e!==s){const a=this.getItem(e);if(a)return this.removeItem(e),this.setItem(s,a),this.logger.verbose(`Updated an outdated ${o.credentialType} cache key`),s;this.logger.error(`Attempted to update an outdated ${o.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}getRedirectRequestContext(){return this.getTemporaryCache(TemporaryCacheKeys.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(e){this.setTemporaryCache(TemporaryCacheKeys.REDIRECT_CONTEXT,e,!0)}async hydrateCache(e,o){var h,g,b,_,j;const s=createIdTokenEntity((h=e.account)==null?void 0:h.homeAccountId,(g=e.account)==null?void 0:g.environment,e.idToken,this.clientId,e.tenantId);let a;o.claims&&(a=await this.cryptoImpl.hashString(o.claims));const c=createAccessTokenEntity((b=e.account)==null?void 0:b.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),((_=e.expiresOn)==null?void 0:_.getTime())||0,((j=e.extExpiresOn)==null?void 0:j.getTime())||0,base64Decode,void 0,e.tokenType,void 0,o.sshKid,o.claims,a),d=new CacheRecord(void 0,s,c);return this.saveCacheRecord(d)}}const DEFAULT_BROWSER_CACHE_MANAGER=(i,e)=>{const o={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new BrowserCacheManager(i,o,DEFAULT_CRYPTO_IMPLEMENTATION,e)};/*! @azure/msal-browser v3.10.0 2024-02-17 */const EventType={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.10.0 2024-02-17 */class EventHandler{constructor(e,o){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=o,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(e){if(typeof window<"u"){const o=createNewGuid();return this.eventCallbacks.set(o,e),this.logger.verbose(`Event callback registered with id: ${o}`),o}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(e,o,s,a){if(typeof window<"u"){const c={eventType:e,interactionType:o||null,payload:s||null,error:a||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${e}`),this.eventCallbacks.forEach((d,h)=>{this.logger.verbose(`Emitting event to callback ${h}: ${e}`),d.apply(null,[c])})}}handleAccountCacheChange(e){var o;try{(o=e.key)!=null&&o.includes(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS)&&this.emitEvent(EventType.ACTIVE_ACCOUNT_CHANGED);const s=e.newValue||e.oldValue;if(!s)return;const a=JSON.parse(s);if(typeof a!="object"||!AccountEntity.isAccountEntity(a))return;const d=CacheManager.toObject(new AccountEntity,a).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(EventType.ACCOUNT_ADDED,void 0,d)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(EventType.ACCOUNT_REMOVED,void 0,d))}catch{return}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class BaseInteractionClient{constructor(e,o,s,a,c,d,h,g,b){this.config=e,this.browserStorage=o,this.browserCrypto=s,this.networkClient=this.config.system.networkClient,this.eventHandler=c,this.navigationClient=d,this.nativeMessageHandler=g,this.correlationId=b||createNewGuid(),this.logger=a.clone(BrowserConstants.MSAL_SKU,version$1,this.correlationId),this.performanceClient=h}async clearCacheOnLogout(e){if(e){AccountEntity.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(AccountEntity.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}async initializeBaseRequest(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.InitializeBaseRequest,this.correlationId);const o=e.authority||this.config.auth.authority,s=[...e&&e.scopes||[]],a={...e,correlationId:this.correlationId,authority:o,scopes:s};if(!a.authenticationScheme)a.authenticationScheme=AuthenticationScheme.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(a.authenticationScheme===AuthenticationScheme.SSH){if(!e.sshJwk)throw createClientConfigurationError(missingSshJwk);if(!e.sshKid)throw createClientConfigurationError(missingSshKid)}this.logger.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}return this.config.cache.claimsBasedCachingEnabled&&e.claims&&!StringUtils.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await this.browserCrypto.hashString(e.claims)),a}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const o=e||this.config.auth.redirectUri||getCurrentUri();return UrlString.getAbsoluteUrl(o,getCurrentUri())}initializeServerTelemetryManager(e,o){this.logger.verbose("initializeServerTelemetryManager called");const s={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:o||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ServerTelemetryManager(s,this.browserStorage)}async getDiscoveredAuthority(e,o,s){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const a={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=e||this.config.auth.authority,d=Authority.generateAuthority(c,o||this.config.auth.azureCloudOptions),h=await invokeAsync(createDiscoveredInstance,PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(d,this.config.system.networkClient,this.browserStorage,a,this.logger,this.correlationId,this.performanceClient);if(s&&!h.isAlias(s.environment))throw createClientConfigurationError(authorityMismatch);return h}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const RANDOM_BYTE_ARR_LENGTH=32;async function generatePkceCodes(i,e,o){i.addQueueMeasurement(PerformanceEvents.GeneratePkceCodes,o);const s=invoke(generateCodeVerifier,PerformanceEvents.GenerateCodeVerifier,e,i,o)(i,e,o),a=await invokeAsync(generateCodeChallengeFromVerifier,PerformanceEvents.GenerateCodeChallengeFromVerifier,e,i,o)(s,i,e,o);return{verifier:s,challenge:a}}function generateCodeVerifier(i,e,o){try{const s=new Uint8Array(RANDOM_BYTE_ARR_LENGTH);return invoke(getRandomValues,PerformanceEvents.GetRandomValues,e,i,o)(s),urlEncodeArr(s)}catch{throw createBrowserAuthError(pkceNotCreated)}}async function generateCodeChallengeFromVerifier(i,e,o,s){e.addQueueMeasurement(PerformanceEvents.GenerateCodeChallengeFromVerifier,s);try{const a=await invokeAsync(sha256Digest,PerformanceEvents.Sha256Digest,o,e,s)(i,e,s);return urlEncodeArr(new Uint8Array(a))}catch{throw createBrowserAuthError(pkceNotCreated)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class StandardInteractionClient extends BaseInteractionClient{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const o=await invokeAsync(generatePkceCodes,PerformanceEvents.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),s={...e,redirectUri:e.redirectUri,code:Constants.EMPTY_STRING,codeVerifier:o.verifier};return e.codeChallenge=o.challenge,e.codeChallengeMethod=Constants.S256_CODE_CHALLENGE_METHOD,s}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const o={correlationId:this.correlationId||createNewGuid(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const s=this.getLogoutHintFromIdTokenClaims(e.account);s&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),o.logoutHint=s)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",o.correlationId),o.postLogoutRedirectUri=UrlString.getAbsoluteUrl(e.postLogoutRedirectUri,getCurrentUri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",o.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",o.correlationId),o.postLogoutRedirectUri=UrlString.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",o.correlationId),o.postLogoutRedirectUri=UrlString.getAbsoluteUrl(getCurrentUri(),getCurrentUri())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",o.correlationId),o}getLogoutHintFromIdTokenClaims(e){const o=e.idTokenClaims;if(o){if(o.login_hint)return o.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e,o,s,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,o,s,a);return new AuthorizationCodeClient(c,this.performanceClient)}async getClientConfiguration(e,o,s,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.correlationId);const c=await invokeAsync(this.getDiscoveredAuthority.bind(this),PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(o,s,a),d=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:c,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:d.loggerCallback,piiLoggingEnabled:d.piiLoggingEnabled,logLevel:d.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:BrowserConstants.MSAL_SKU,version:version$1,cpu:Constants.EMPTY_STRING,os:Constants.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,o){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const s=this.getRedirectUri(e.redirectUri),a={interactionType:o},c=ProtocolUtils.setRequestState(this.browserCrypto,e&&e.state||Constants.EMPTY_STRING,a),h={...await invokeAsync(this.initializeBaseRequest.bind(this),PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e),redirectUri:s,state:c,nonce:e.nonce||createNewGuid(),responseMode:this.config.auth.OIDCOptions.serverResponseType},g=e.account||this.browserStorage.getActiveAccount();if(g&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${g.homeAccountId}`,this.correlationId),h.account=g),!h.loginHint&&!g){const b=this.browserStorage.getLegacyLoginHint();b&&(h.loginHint=b)}return h}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const contentError="ContentError",userSwitch="user_switch";/*! @azure/msal-browser v3.10.0 2024-02-17 */const USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",USER_CANCEL="USER_CANCEL",NO_NETWORK="NO_NETWORK",PERSISTENT_ERROR="PERSISTENT_ERROR",DISABLED="DISABLED",ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.10.0 2024-02-17 */const INVALID_METHOD_ERROR=-2147186943,NativeAuthErrorMessages={[userSwitch]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class NativeAuthError extends AuthError{constructor(e,o,s){super(e,o),Object.setPrototypeOf(this,NativeAuthError.prototype),this.name="NativeAuthError",this.ext=s}}function isFatalNativeAuthError(i){if(i.ext&&i.ext.status&&(i.ext.status===PERSISTENT_ERROR||i.ext.status===DISABLED)||i.ext&&i.ext.error&&i.ext.error===INVALID_METHOD_ERROR)return!0;switch(i.errorCode){case contentError:return!0;default:return!1}}function createNativeAuthError(i,e,o){if(o&&o.status)switch(o.status){case ACCOUNT_UNAVAILABLE:return createInteractionRequiredAuthError(nativeAccountUnavailable);case USER_INTERACTION_REQUIRED:return new InteractionRequiredAuthError(i,e);case USER_CANCEL:return createBrowserAuthError(userCancelled);case NO_NETWORK:return createBrowserAuthError(noNetworkConnectivity)}return new NativeAuthError(i,NativeAuthErrorMessages[i]||e,o)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentCacheClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentCacheClientAcquireToken,e.correlationId);const o=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),s=await this.createSilentFlowClient(o,e.authority,e.azureCloudOptions,e.account);this.logger.verbose("Silent auth client created");try{const c=(await invokeAsync(s.acquireCachedToken.bind(s),PerformanceEvents.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),c}catch(a){throw a instanceof BrowserAuthError&&a.errorCode===cryptoKeyNotFound&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),a}}logout(e){this.logger.verbose("logoutRedirect called");const o=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(o==null?void 0:o.account)}async createSilentFlowClient(e,o,s,a){const c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,o,s,a);return new SilentFlowClient(c,this.performanceClient)}async initializeSilentRequest(e,o){this.performanceClient.addQueueMeasurement(PerformanceEvents.InitializeSilentRequest,this.correlationId);const s=await invokeAsync(this.initializeBaseRequest.bind(this),PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e);return{...e,...s,account:o,forceRefresh:e.forceRefresh||!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const BrokerServerParamKeys={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class NativeInteractionClient extends BaseInteractionClient{constructor(e,o,s,a,c,d,h,g,b,_,j,$){super(e,o,s,a,c,d,g,b,$),this.apiId=h,this.accountId=_,this.nativeMessageHandler=b,this.nativeStorageManager=j,this.silentCacheClient=new SilentCacheClient(e,this.nativeStorageManager,s,a,c,d,g,b,$)}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const o=this.performanceClient.startMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),s=nowSeconds(),a=await this.initializeNativeRequest(e);try{const g=await this.acquireTokensFromCache(this.accountId,a);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),g}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const c={method:NativeExtensionMethod.GetToken,request:a},d=await this.nativeMessageHandler.sendMessage(c),h=this.validateNativeResponse(d);return this.handleNativeResponse(h,a,s).then(g=>(o.end({success:!0,isNativeBroker:!0,requestId:g.requestId}),g)).catch(g=>{throw o.end({success:!1,errorCode:g.errorCode,subErrorCode:g.subError,isNativeBroker:!0}),g})}createSilentCacheRequest(e,o){return{authority:e.authority,correlationId:this.correlationId,scopes:ScopeSet.fromString(e.scope).asArray(),account:o,forceRefresh:!1}}async acquireTokensFromCache(e,o){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),createClientAuthError(noAccountFound);const s=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!s)throw createClientAuthError(noAccountFound);try{const a=this.createSilentCacheRequest(o,s),c=await this.silentCacheClient.acquireToken(a),d={...s,idTokenClaims:c==null?void 0:c.idTokenClaims,idToken:c==null?void 0:c.idToken};return{...c,account:d}}catch(a){throw a}}async acquireTokenRedirect(e){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const o=await this.initializeNativeRequest(e),s={method:NativeExtensionMethod.GetToken,request:o};try{const d=await this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(d)}catch(d){if(d instanceof NativeAuthError&&isFatalNativeAuthError(d))throw d}this.browserStorage.setTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,JSON.stringify(o),!0);const a={apiId:ApiId.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);await this.navigationClient.navigateExternal(c,a)}async handleRedirectPromise(e,o){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const s=this.browserStorage.getCachedNativeRequest();if(!s)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&o&&(e==null||e.addFields({errorCode:"no_cached_request"},o)),null;const{prompt:a,...c}=s;a&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST));const d={method:NativeExtensionMethod.GetToken,request:c},h=nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const g=await this.nativeMessageHandler.sendMessage(d);this.validateNativeResponse(g);const b=this.handleNativeResponse(g,c,h);return this.browserStorage.setInteractionInProgress(!1),await b}catch(g){throw this.browserStorage.setInteractionInProgress(!1),g}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,o,s){var _;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=extractTokenClaims(e.id_token,base64Decode),c=this.createHomeAccountIdentifier(e,a),d=(_=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:o.accountId}))==null?void 0:_.homeAccountId;if(c!==d&&e.account.id!==o.accountId)throw createNativeAuthError(userSwitch);const h=await this.getDiscoveredAuthority(o.authority),g=buildAccountToCache(this.browserStorage,h,c,a,base64Decode,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger),b=await this.generateAuthenticationResult(e,o,a,g,h.canonicalAuthority,s);return this.cacheAccount(g),this.cacheNativeTokens(e,o,c,a,b.accessToken,b.tenantId,s),b}createHomeAccountIdentifier(e,o){return AccountEntity.generateHomeAccountId(e.client_info||Constants.EMPTY_STRING,AuthorityType.Default,this.logger,this.browserCrypto,o)}generateScopes(e,o){return e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(o.scope)}async generatePopAccessToken(e,o){if(o.tokenType===AuthenticationScheme.POP){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const s=new PopTokenGenerator(this.browserCrypto),a={resourceRequestMethod:o.resourceRequestMethod,resourceRequestUri:o.resourceRequestUri,shrClaims:o.shrClaims,shrNonce:o.shrNonce};if(!o.keyId)throw createClientAuthError(keyIdMissing);return s.signPopToken(e.access_token,o.keyId,a)}else return e.access_token}async generateAuthenticationResult(e,o,s,a,c,d){const h=this.addTelemetryFromNativeResponse(e),g=e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(o.scope),b=e.account.properties||{},_=b.UID||s.oid||s.sub||Constants.EMPTY_STRING,j=b.TenantId||s.tid||Constants.EMPTY_STRING,$=updateAccountTenantProfileData(a.getAccountInfo(),void 0,s,e.id_token);$.nativeAccountId!==e.account.id&&($.nativeAccountId=e.account.id);const _e=await this.generatePopAccessToken(e,o),et=o.tokenType===AuthenticationScheme.POP?AuthenticationScheme.POP:AuthenticationScheme.BEARER;return{authority:c,uniqueId:_,tenantId:j,scopes:g.asArray(),account:$,idToken:e.id_token,idTokenClaims:s,accessToken:_e,fromCache:h?this.isResponseFromCache(h):!1,expiresOn:new Date(Number(d+e.expires_in)*1e3),tokenType:et,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(o=>{this.logger.error(`Error occurred while removing account context from browser storage. ${o}`)})}cacheNativeTokens(e,o,s,a,c,d,h){const g=createIdTokenEntity(s,o.authority,e.id_token||"",o.clientId,a.tid||""),b=o.tokenType===AuthenticationScheme.POP?Constants.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,_=h+b,j=this.generateScopes(e,o),$=createAccessTokenEntity(s,o.authority,c,o.clientId,a.tid||d,j.printScopes(),_,0,base64Decode),_e=new CacheRecord(void 0,g,$);this.nativeStorageManager.saveCacheRecord(_e,o.storeInCache)}addTelemetryFromNativeResponse(e){const o=this.getMATSFromResponse(e);return o?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:o.broker_version,matsAccountJoinOnStart:o.account_join_on_start,matsAccountJoinOnEnd:o.account_join_on_end,matsDeviceJoin:o.device_join,matsPromptBehavior:o.prompt_behavior,matsApiErrorCode:o.api_error_code,matsUiVisible:o.ui_visible,matsSilentCode:o.silent_code,matsSilentBiSubCode:o.silent_bi_sub_code,matsSilentMessage:o.silent_message,matsSilentStatus:o.silent_status,matsHttpStatus:o.http_status,matsHttpEventCount:o.http_event_count},this.correlationId),o):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw createAuthError(unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const o=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority(o,e.azureCloudOptions,e.account);const s=new UrlString(o);s.validateAsUri();const{scopes:a,...c}=e,d=new ScopeSet(a||[]);d.appendScopes(OIDC_DEFAULT_SCOPES);const h=()=>{switch(this.apiId){case ApiId.ssoSilent:case ApiId.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),PromptValue.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),createBrowserAuthError(nativePromptNotSupported)}},g={...c,accountId:this.accountId,clientId:this.config.auth.clientId,authority:s.urlString,scope:d.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:h(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1};if(this.handleExtraBrokerParams(g),g.extraParameters=g.extraParameters||{},g.extraParameters.telemetry=NativeConstants.MATS_TELEMETRY,e.authenticationScheme===AuthenticationScheme.POP){const b={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},_=new PopTokenGenerator(this.browserCrypto),j=await invokeAsync(_.generateCnf.bind(_),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(b,this.logger);g.reqCnf=j.reqCnfHash,g.keyId=j.kid}return g}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(BrokerServerParamKeys.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(BrokerServerParamKeys.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(CLIENT_ID)){const o=e.extraParameters[CLIENT_ID],s=e.redirectUri,a=e.extraParameters[BrokerServerParamKeys.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:o,child_redirect_uri:s},e.redirectUri=a}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class NativeMessageHandler{constructor(e,o,s,a){this.logger=e,this.handshakeTimeoutMs=o,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=s,this.handshakeEvent=s.startMeasurement(PerformanceEvents.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const o={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(o)}`),this.messageChannel.port1.postMessage(o),new Promise((s,a)=>{this.resolvers.set(o.responseId,{resolve:s,reject:a})})}static async createProvider(e,o,s){e.trace("NativeMessageHandler - createProvider called.");try{const a=new NativeMessageHandler(e,o,s,NativeConstants.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const c=new NativeMessageHandler(e,o,s);return await c.sendHandshakeRequest(),c}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:{method:NativeExtensionMethod.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=o=>{this.onChannelMessage(o)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((o,s)=>{this.handshakeResolvers.set(e.responseId,{resolve:o,reject:s}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),s(createBrowserAuthError(nativeHandshakeTimeout)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const o=e.data;if(!(!o.channel||o.channel!==NativeConstants.CHANNEL_ID)&&!(o.extensionId&&o.extensionId!==this.extensionId)&&o.body.method===NativeExtensionMethod.HandshakeRequest){const s=this.handshakeResolvers.get(o.responseId);if(!s){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${o.responseId}`);return}this.logger.verbose(o.extensionId?`Extension with id: ${o.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),s.reject(createBrowserAuthError(nativeExtensionNotInstalled))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const o=e.data,s=this.resolvers.get(o.responseId),a=this.handshakeResolvers.get(o.responseId);try{const c=o.body.method;if(c===NativeExtensionMethod.Response){if(!s)return;const d=o.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(d)}`),d.status!=="Success")s.reject(createNativeAuthError(d.code,d.description,d.ext));else if(d.result)d.result.code&&d.result.description?s.reject(createNativeAuthError(d.result.code,d.result.description,d.result.ext)):s.resolve(d.result);else throw createAuthError(unexpectedError,"Event does not contain result.");this.resolvers.delete(o.responseId)}else if(c===NativeExtensionMethod.HandshakeResponse){if(!a){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${o.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=o.extensionId,this.extensionVersion=o.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(o.responseId)}}catch(c){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${c}`),this.logger.errorPii(`Unable to parse ${e}`),s?s.reject(c):a&&a.reject(c)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,o,s,a){if(o.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return o.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!s)return o.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(a)switch(a){case AuthenticationScheme.BEARER:case AuthenticationScheme.POP:return o.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return o.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class InteractionHandler{constructor(e,o,s,a,c){this.authModule=e,this.browserStorage=o,this.authCodeRequest=s,this.logger=a,this.performanceClient=c}async handleCodeResponse(e,o){this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponse,o.correlationId);let s;try{s=this.authModule.handleFragmentResponse(e,o.state)}catch(a){throw a instanceof ServerError&&a.subError===userCancelled?createBrowserAuthError(userCancelled):a}return invokeAsync(this.handleCodeResponseFromServer.bind(this),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,o.correlationId)(s,o)}async handleCodeResponseFromServer(e,o,s=!0){if(this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponseFromServer,o.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,o.correlationId)(e.cloud_instance_host_name,o.correlationId),s&&(e.nonce=o.nonce||void 0),e.state=o.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const c=this.createCcsCredentials(o);c&&(this.authCodeRequest.ccsCredential=c)}return await invokeAsync(this.authModule.acquireToken.bind(this.authModule),PerformanceEvents.AuthClientAcquireToken,this.logger,this.performanceClient,o.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:CcsCredentialType.UPN}:null}}/*! @azure/msal-browser v3.10.0 2024-02-17 */function deserializeResponse(i,e,o){const s=getDeserializedResponse(i);if(!s)throw stripLeadingHashOrQuery(i)?(o.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),o.errorPii(`The ${e} detected is: ${i}`),createBrowserAuthError(hashDoesNotContainKnownProperties)):(o.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),createBrowserAuthError(hashEmptyError));return s}function validateInteractionType(i,e,o){if(!i.state)throw createBrowserAuthError(noStateInHash);const s=extractBrowserRequestState(e,i.state);if(!s)throw createBrowserAuthError(unableToParseState);if(s.interactionType!==o)throw createBrowserAuthError(stateInteractionTypeMismatch)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class PopupClient extends StandardInteractionClient{constructor(e,o,s,a,c,d,h,g,b,_){super(e,o,s,a,c,d,h,b,_),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=g}acquireToken(e){try{const o=this.generatePopupName(e.scopes||OIDC_DEFAULT_SCOPES,e.authority||this.config.auth.authority),s=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,s);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const a=this.openSizedPopup("about:blank",o,s);return this.acquireTokenPopupAsync(e,o,s,a)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");const o=this.initializeLogoutRequest(e),s=this.generateLogoutPopupName(o),a=e&&e.authority,c=e&&e.mainWindowRedirectUri,d=(e==null?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(o,s,d,a,void 0,c);{this.logger.verbose("asyncPopup set to false, opening popup");const h=this.openSizedPopup("about:blank",s,d);return this.logoutPopupAsync(o,s,d,a,h,c)}}catch(o){return Promise.reject(o)}}async acquireTokenPopupAsync(e,o,s,a){this.logger.verbose("acquireTokenPopupAsync called");const c=this.initializeServerTelemetryManager(ApiId.acquireTokenPopup),d=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Popup);preconnect(d.authority);try{const h=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(d),g=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(c,d.authority,d.azureCloudOptions,d.account),b=NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let _;b&&(_=this.performanceClient.startMeasurement(PerformanceEvents.FetchAccountIdWithNativeBroker,e.correlationId));const j=await g.getAuthCodeUrl({...d,nativeBroker:b}),$=new InteractionHandler(g,this.browserStorage,h,this.logger,this.performanceClient),_e={popup:a,popupName:o,popupWindowAttributes:s},et=this.initiateAuthRequest(j,_e);this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:et},null);const rt=await this.monitorPopupForHash(et),lt=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(rt,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,h),lt.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),_&&_.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const nt=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,lt.accountId,this.nativeStorage,d.correlationId),{userRequestState:it}=ProtocolUtils.parseRequestState(this.browserCrypto,d.state);return await nt.acquireToken({...d,state:it,prompt:void 0})}return await $.handleCodeResponse(lt,d)}catch(h){throw a&&a.close(),h instanceof AuthError&&(h.setCorrelationId(this.correlationId),c.cacheFailedRequest(h)),h}}async logoutPopupAsync(e,o,s,a,c,d){var g,b;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Popup,e);const h=this.initializeServerTelemetryManager(ApiId.logoutPopup);try{await this.clearCacheOnLogout(e.account);const _=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(h,a,void 0,e.account||void 0);try{_.authority.endSessionEndpoint}catch{if((g=e.account)!=null&&g.homeAccountId&&e.postLogoutRedirectUri&&_.authority.protocolMode===ProtocolMode.OIDC){if(this.browserStorage.removeAccount((b=e.account)==null?void 0:b.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e),d){const _e={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},et=UrlString.getAbsoluteUrl(d,getCurrentUri());await this.navigationClient.navigateInternal(et,_e)}c&&c.close();return}}const j=_.getLogoutUri(e);this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e);const $=this.openPopup(j,{popupName:o,popupWindowAttributes:s,popup:c});if(this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:$},null),await this.monitorPopupForHash($).catch(()=>{}),d){const _e={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},et=UrlString.getAbsoluteUrl(d,getCurrentUri());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${et}`),await this.navigationClient.navigateInternal(et,_e)}else this.logger.verbose("No main window navigation requested")}catch(_){throw c&&c.close(),_ instanceof AuthError&&(_.setCorrelationId(this.correlationId),h.cacheFailedRequest(_)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Popup,null,_),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup),_}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup)}initiateAuthRequest(e,o){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,o);throw this.logger.error("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}monitorPopupForHash(e){return new Promise((o,s)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const a=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(a),s(createBrowserAuthError(userCancelled));return}let c="";try{c=e.location.href}catch{}if(!c||c==="about:blank")return;clearInterval(a);let d="";const h=this.config.auth.OIDCOptions.serverResponseType;e&&(h===ServerResponseType.QUERY?d=e.location.search:d=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),o(d)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e)})}openPopup(e,o){try{let s;if(o.popup?(s=o.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),s.location.assign(e)):typeof o.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),s=this.openSizedPopup(e,o.popupName,o.popupWindowAttributes)),!s)throw createBrowserAuthError(emptyWindowError);return s.focus&&s.focus(),this.currentWindow=s,window.addEventListener("beforeunload",this.unloadWindow),s}catch(s){throw this.logger.error("error opening popup "+s.message),this.browserStorage.setInteractionInProgress(!1),createBrowserAuthError(popupWindowError)}}openSizedPopup(e,o,s){var $,_e,et,rt;const a=window.screenLeft?window.screenLeft:window.screenX,c=window.screenTop?window.screenTop:window.screenY,d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let g=($=s.popupSize)==null?void 0:$.width,b=(_e=s.popupSize)==null?void 0:_e.height,_=(et=s.popupPosition)==null?void 0:et.top,j=(rt=s.popupPosition)==null?void 0:rt.left;return(!g||g<0||g>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),g=BrowserConstants.POPUP_WIDTH),(!b||b<0||b>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),b=BrowserConstants.POPUP_HEIGHT),(!_||_<0||_>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),_=Math.max(0,h/2-BrowserConstants.POPUP_HEIGHT/2+c)),(!j||j<0||j>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),j=Math.max(0,d/2-BrowserConstants.POPUP_WIDTH/2+a)),window.open(e,o,`width=${g}, height=${b}, top=${_}, left=${j}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(InteractionType.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,o){return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${o}.${this.correlationId}`}generateLogoutPopupName(e){const o=e.account&&e.account.homeAccountId;return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${o}.${this.correlationId}`}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class RedirectHandler{constructor(e,o,s,a,c){this.authModule=e,this.browserStorage=o,this.authCodeRequest=s,this.logger=a,this.performanceClient=c}async initiateAuthRequest(e,o){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){o.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,o.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const s={apiId:ApiId.acquireTokenRedirect,timeout:o.redirectTimeout,noHistory:!1};if(typeof o.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await o.navigationClient.navigateExternal(e,s);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await o.navigationClient.navigateExternal(e,s);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}async handleCodeResponse(e,o){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const s=this.browserStorage.generateStateKey(o),a=this.browserStorage.getTemporaryCache(s);if(!a)throw createClientAuthError(stateNotFound,"Cached State");let c;try{c=this.authModule.handleFragmentResponse(e,a)}catch(b){throw b instanceof ServerError&&b.subError===userCancelled?createBrowserAuthError(userCancelled):b}const d=this.browserStorage.generateNonceKey(a),h=this.browserStorage.getTemporaryCache(d);if(this.authCodeRequest.code=c.code,c.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(c.cloud_instance_host_name,this.authCodeRequest.correlationId),c.nonce=h||void 0,c.state=a,c.client_info)this.authCodeRequest.clientInfo=c.client_info;else{const b=this.checkCcsCredentials();b&&(this.authCodeRequest.ccsCredential=b)}const g=await this.authModule.acquireToken(this.authCodeRequest,c);return this.browserStorage.cleanRequestByState(o),g}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class RedirectClient extends StandardInteractionClient{constructor(e,o,s,a,c,d,h,g,b,_){super(e,o,s,a,c,d,h,b,_),this.nativeStorage=g}async acquireToken(e){const o=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Redirect);this.browserStorage.updateCacheEntries(o.state,o.nonce,o.authority,o.loginHint||"",o.account||null);const s=this.initializeServerTelemetryManager(ApiId.acquireTokenRedirect),a=c=>{c.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(o.state),this.eventHandler.emitEvent(EventType.RESTORE_FROM_BFCACHE,InteractionType.Redirect))};try{const c=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),d=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(s,o.authority,o.azureCloudOptions,o.account),h=new RedirectHandler(d,this.browserStorage,c,this.logger,this.performanceClient),g=await d.getAuthCodeUrl({...o,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),b=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${b}`),window.addEventListener("pageshow",a),await h.initiateAuthRequest(g,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:b,onRedirectNavigate:e.onRedirectNavigate})}catch(c){throw c instanceof AuthError&&(c.setCorrelationId(this.correlationId),s.cacheFailedRequest(c)),window.removeEventListener("pageshow",a),this.browserStorage.cleanRequestByState(o.state),c}}async handleRedirectPromise(e,o,s){const a=this.initializeServerTelemetryManager(ApiId.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[c,d]=this.getRedirectResponse(e||"");if(!c)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),o&&s&&(o==null||o.addFields({errorCode:"no_server_response"},s)),null;const h=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,!0)||Constants.EMPTY_STRING,g=UrlString.removeHashFromUrl(h),b=UrlString.removeHashFromUrl(window.location.href);if(g===b&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),h.indexOf("#")>-1&&replaceHash(h),await this.handleResponse(c,a);if(this.config.auth.navigateToLoginRequestUrl){if(!isInIframe()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(TemporaryCacheKeys.URL_HASH,d,!0);const _={apiId:ApiId.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let j=!0;if(!h||h==="null"){const $=getHomepage();this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,$,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),j=await this.navigationClient.navigateInternal($,_)}else this.logger.verbose(`Navigating to loginRequestUrl: ${h}`),j=await this.navigationClient.navigateInternal(h,_);if(!j)return await this.handleResponse(c,a)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(c,a);return null}catch(c){throw c instanceof AuthError&&(c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c)),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),c}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let o=e;o||(this.config.auth.OIDCOptions.serverResponseType===ServerResponseType.QUERY?o=window.location.search:o=window.location.hash);let s=getDeserializedResponse(o);if(s){try{validateInteractionType(s,this.browserCrypto,InteractionType.Redirect)}catch(c){return c instanceof AuthError&&this.logger.error(`Interaction type validation failed due to ${c.errorCode}: ${c.errorMessage}`),[null,""]}return clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),[s,o]}const a=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.URL_HASH)),a&&(s=getDeserializedResponse(a),s)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[s,a]):[null,""]}async handleResponse(e,o){const s=e.state;if(!s)throw createBrowserAuthError(noStateInHash);const a=this.browserStorage.getCachedRequest(s);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const g=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,a.correlationId),{userRequestState:b}=ProtocolUtils.parseRequestState(this.browserCrypto,s);return g.acquireToken({...a,state:b,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(s)})}const c=this.browserStorage.getCachedAuthority(s);if(!c)throw createBrowserAuthError(noCachedAuthorityError);const d=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(o,c);return ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,a),new RedirectHandler(d,this.browserStorage,a,this.logger,this.performanceClient).handleCodeResponse(e,s)}async logout(e){var a,c;this.logger.verbose("logoutRedirect called");const o=this.initializeLogoutRequest(e),s=this.initializeServerTelemetryManager(ApiId.logout);try{this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Redirect,e),await this.clearCacheOnLogout(o.account);const d={apiId:ApiId.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(s,e&&e.authority,void 0,e&&e.account||void 0);if(h.authority.protocolMode===ProtocolMode.OIDC)try{h.authority.endSessionEndpoint}catch{if((a=o.account)!=null&&a.homeAccountId){this.browserStorage.removeAccount((c=o.account)==null?void 0:c.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,o);return}}const g=h.getLogoutUri(o);if(this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,o),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(g)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(g,d);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(g,d);return}}catch(d){throw d instanceof AuthError&&(d.setCorrelationId(this.correlationId),s.cacheFailedRequest(d)),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Redirect,null,d),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect),d}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect)}getRedirectStartPage(e){const o=e||window.location.href;return UrlString.getAbsoluteUrl(o,getCurrentUri())}}/*! @azure/msal-browser v3.10.0 2024-02-17 */async function initiateAuthRequest(i,e,o,s,a){if(e.addQueueMeasurement(PerformanceEvents.SilentHandlerInitiateAuthRequest,s),!i)throw o.info("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri);return a?invokeAsync(loadFrame,PerformanceEvents.SilentHandlerLoadFrame,o,e,s)(i,a,e,s):invoke(loadFrameSync,PerformanceEvents.SilentHandlerLoadFrameSync,o,e,s)(i)}async function monitorIframeForHash(i,e,o,s,a,c,d){return s.addQueueMeasurement(PerformanceEvents.SilentHandlerMonitorIframeForHash,c),new Promise((h,g)=>{e<DEFAULT_IFRAME_TIMEOUT_MS&&a.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${DEFAULT_IFRAME_TIMEOUT_MS}ms). This may result in timeouts.`);const b=window.setTimeout(()=>{window.clearInterval(_),g(createBrowserAuthError(monitorWindowTimeout))},e),_=window.setInterval(()=>{let j="";const $=i.contentWindow;try{j=$?$.location.href:""}catch{}if(!j||j==="about:blank")return;let _e="";$&&(d===ServerResponseType.QUERY?_e=$.location.search:_e=$.location.hash),window.clearTimeout(b),window.clearInterval(_),h(_e)},o)}).finally(()=>{invoke(removeHiddenIframe,PerformanceEvents.RemoveHiddenIframe,a,s,c)(i)})}function loadFrame(i,e,o,s){return o.addQueueMeasurement(PerformanceEvents.SilentHandlerLoadFrame,s),new Promise((a,c)=>{const d=createHiddenIframe();window.setTimeout(()=>{if(!d){c("Unable to load iframe");return}d.src=i,a(d)},e)})}function loadFrameSync(i){const e=createHiddenIframe();return e.src=i,e}function createHiddenIframe(){const i=document.createElement("iframe");return i.style.visibility="hidden",i.style.position="absolute",i.style.width=i.style.height="0",i.style.border="0",i.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(i),i}function removeHiddenIframe(i){document.body===i.parentNode&&document.body.removeChild(i)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentIframeClient extends StandardInteractionClient{constructor(e,o,s,a,c,d,h,g,b,_,j){super(e,o,s,a,c,d,g,_,j),this.apiId=h,this.nativeStorage=b}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const o={...e};o.prompt?o.prompt!==PromptValue.NONE&&o.prompt!==PromptValue.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${o.prompt} with ${PromptValue.NONE}`),o.prompt=PromptValue.NONE):o.prompt=PromptValue.NONE;const s=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(o,InteractionType.Silent);preconnect(s.authority);const a=this.initializeServerTelemetryManager(this.apiId);try{const c=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)(a,s.authority,s.azureCloudOptions,s.account);return await invokeAsync(this.silentTokenHelper.bind(this),PerformanceEvents.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(c,s)}catch(c){throw c instanceof AuthError&&(c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c)),c}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async silentTokenHelper(e,o){const s=o.correlationId;this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientTokenHelper,s);const a=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,s)(o),c=await invokeAsync(e.getAuthCodeUrl.bind(e),PerformanceEvents.GetAuthCodeUrl,this.logger,this.performanceClient,s)({...o,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,o.authenticationScheme)}),d=new InteractionHandler(e,this.browserStorage,a,this.logger,this.performanceClient),h=await invokeAsync(initiateAuthRequest,PerformanceEvents.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,s)(c,this.performanceClient,this.logger,s,this.config.system.navigateFrameWait),g=this.config.auth.OIDCOptions.serverResponseType,b=await invokeAsync(monitorIframeForHash,PerformanceEvents.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(h,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,s,g),_=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(b,g,this.logger);if(_.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const j=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,_.accountId,this.browserStorage,s),{userRequestState:$}=ProtocolUtils.parseRequestState(this.browserCrypto,o.state);return invokeAsync(j.acquireToken.bind(j),PerformanceEvents.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,s)({...o,state:$,prompt:o.prompt||PromptValue.NONE})}return invokeAsync(d.handleCodeResponse.bind(d),PerformanceEvents.HandleCodeResponse,this.logger,this.performanceClient,s)(_,o)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentRefreshClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken,e.correlationId);const o=await invokeAsync(this.initializeBaseRequest.bind(this),PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e),s={...e,...o};e.redirectUri&&(s.redirectUri=this.getRedirectUri(e.redirectUri));const a=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),c=await this.createRefreshTokenClient(a,s.authority,s.azureCloudOptions,s.account);return invokeAsync(c.acquireTokenByRefreshToken.bind(c),PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(s).catch(d=>{throw d.setCorrelationId(this.correlationId),a.cacheFailedRequest(d),d})}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async createRefreshTokenClient(e,o,s,a){const c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,o,s,a);return new RefreshTokenClient(c,this.performanceClient)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class TokenCache{constructor(e,o,s,a){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=o,this.logger=s,this.cryptoObj=a}loadExternalTokens(e,o,s){if(this.logger.info("TokenCache - loadExternalTokens called"),!o.id_token)throw createBrowserAuthError(unableToLoadToken);const a=extractTokenClaims(o.id_token,base64Decode);let c,d,h;if(e.account)h=AccountEntity.createFromAccountInfo(e.account),c=new CacheRecord(h,this.loadIdToken(o.id_token,h.homeAccountId,e.account.environment,e.account.tenantId),this.loadAccessToken(e,o,h.homeAccountId,e.account.environment,e.account.tenantId,s),this.loadRefreshToken(e,o,h.homeAccountId,e.account.environment));else if(e.authority){const g=Authority.generateAuthority(e.authority,e.azureCloudOptions),b={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(d=new Authority(g,this.config.system.networkClient,this.storage,b,this.logger,e.correlationId||createNewGuid()),s.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),h=this.loadAccount(a,d,s.clientInfo),c=new CacheRecord(h,this.loadIdToken(o.id_token,h.homeAccountId,d.hostnameAndPort,d.tenant),this.loadAccessToken(e,o,h.homeAccountId,d.hostnameAndPort,d.tenant,s),this.loadRefreshToken(e,o,h.homeAccountId,d.hostnameAndPort));else if(o.client_info)this.logger.trace("TokenCache - homeAccountId from response"),h=this.loadAccount(a,d,o.client_info),c=new CacheRecord(h,this.loadIdToken(o.id_token,h.homeAccountId,d.hostnameAndPort,d.tenant),this.loadAccessToken(e,o,h.homeAccountId,d.hostnameAndPort,d.tenant,s),this.loadRefreshToken(e,o,h.homeAccountId,d.hostnameAndPort));else throw createBrowserAuthError(unableToLoadToken)}else throw createBrowserAuthError(unableToLoadToken);return this.generateAuthenticationResult(e,a,c,h,d)}loadAccount(e,o,s,a){if(this.isBrowserEnvironment){this.logger.verbose("TokenCache - loading account");let c;if(a?c=a:o.authorityType!==void 0&&s&&(c=AccountEntity.generateHomeAccountId(s,o.authorityType,this.logger,this.cryptoObj,e)),!c)throw createBrowserAuthError(unableToLoadToken);const d=e.tid,h=buildAccountToCache(this.storage,o,c,e,base64Decode,s,o.hostnameAndPort,d,void 0,void 0,this.logger);return this.storage.setAccount(h),h}else throw createBrowserAuthError(unableToLoadToken)}loadIdToken(e,o,s,a){const c=createIdTokenEntity(o,s,e,this.config.auth.clientId,a);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(c),c;throw createBrowserAuthError(unableToLoadToken)}loadAccessToken(e,o,s,a,c,d){if(!o.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!o.expires_in||!d.extendedExpiresOn)throw createBrowserAuthError(unableToLoadToken);const h=new ScopeSet(e.scopes).printScopes(),g=d.expiresOn||o.expires_in+new Date().getTime()/1e3,b=d.extendedExpiresOn,_=createAccessTokenEntity(s,a,o.access_token,this.config.auth.clientId,c,h,g,b,base64Decode);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(_),_;throw createBrowserAuthError(unableToLoadToken)}loadRefreshToken(e,o,s,a){if(!o.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const c=createRefreshTokenEntity(s,a,o.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(c),c;throw createBrowserAuthError(unableToLoadToken)}generateAuthenticationResult(e,o,s,a,c){var $,_e;let d=Constants.EMPTY_STRING,h=[],g=null,b;s!=null&&s.accessToken&&(d=s.accessToken.secret,h=ScopeSet.fromString(s.accessToken.target).asArray(),g=new Date(Number(s.accessToken.expiresOn)*1e3),b=new Date(Number(s.accessToken.extendedExpiresOn)*1e3));const _=o.oid||o.sub||Constants.EMPTY_STRING,j=o.tid||Constants.EMPTY_STRING;return{authority:c?c.canonicalAuthority:Constants.EMPTY_STRING,uniqueId:_,tenantId:j,scopes:h,account:a.getAccountInfo(),idToken:(($=s.idToken)==null?void 0:$.secret)||"",idTokenClaims:o||{},accessToken:d,fromCache:!0,expiresOn:g,correlationId:e.correlationId||Constants.EMPTY_STRING,requestId:Constants.EMPTY_STRING,extExpiresOn:b,familyId:Constants.EMPTY_STRING,tokenType:((_e=s==null?void 0:s.accessToken)==null?void 0:_e.tokenType)||Constants.EMPTY_STRING,state:Constants.EMPTY_STRING,cloudGraphHostName:a.cloudGraphHostName||Constants.EMPTY_STRING,msGraphHost:a.msGraphHost||Constants.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class HybridSpaAuthorizationCodeClient extends AuthorizationCodeClient{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class SilentAuthCodeClient extends StandardInteractionClient{constructor(e,o,s,a,c,d,h,g,b,_){super(e,o,s,a,c,d,g,b,_),this.apiId=h}async acquireToken(e){if(!e.code)throw createBrowserAuthError(authCodeRequired);const o=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,InteractionType.Silent),s=this.initializeServerTelemetryManager(this.apiId);try{const a={...o,code:e.code},c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)(s,o.authority,o.azureCloudOptions,o.account),d=new HybridSpaAuthorizationCodeClient(c);this.logger.verbose("Auth code client created");const h=new InteractionHandler(d,this.browserStorage,a,this.logger,this.performanceClient);return await invokeAsync(h.handleCodeResponseFromServer.bind(h),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},o,!1)}catch(a){throw a instanceof AuthError&&(a.setCorrelationId(this.correlationId),s.cacheFailedRequest(a)),a}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class StandardController{constructor(e){this.atsAsyncMeasurement=void 0,this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new CryptoOps(this.logger,this.performanceClient):DEFAULT_CRYPTO_IMPLEMENTATION,this.eventHandler=new EventHandler(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new BrowserCacheManager(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,buildStaticAuthorityOptions(this.config.auth)):DEFAULT_BROWSER_CACHE_MANAGER(this.config.auth.clientId,this.logger);const o={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new BrowserCacheManager(this.config.auth.clientId,o,this.browserCrypto,this.logger),this.tokenCache=new TokenCache(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e){const o=new StandardController(e);return await o.initialize(),o}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}async initialize(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}const e=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(PerformanceEvents.InitializeClientApplication);if(this.eventHandler.emitEvent(EventType.INITIALIZE_START),e)try{this.nativeExtensionProvider=await NativeMessageHandler.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await invokeAsync(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),PerformanceEvents.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient)(this.performanceClient)),this.initialized=!0,this.eventHandler.emitEvent(EventType.INITIALIZE_END),o.end({allowNativeBroker:e,success:!0})}async handleRedirectPromise(e){this.logger.verbose("handleRedirectPromise called"),blockAPICallsBeforeInitialize(this.initialized);const o=this.getAllAccounts();if(this.isBrowserEnvironment){const s=e||"";let a=this.redirectResponse.get(s);if(typeof a>"u"){const c=this.browserStorage.getCachedNativeRequest(),d=c&&NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,h=d?c==null?void 0:c.correlationId:this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,!0)||"",g=this.performanceClient.startMeasurement("acquireTokenRedirect",h);this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_START,InteractionType.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");let b;if(d&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const _=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,c.accountId,this.nativeInternalStorage,c.correlationId);b=invokeAsync(_.handleRedirectPromise.bind(_),PerformanceEvents.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,g.event.correlationId)(this.performanceClient,g.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const _=this.createRedirectClient(h);b=invokeAsync(_.handleRedirectPromise.bind(_),PerformanceEvents.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,g.event.correlationId)(e,this.performanceClient,g.event.correlationId)}a=b.then(_=>(_&&(o.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Redirect,_),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Redirect,_),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),g.end({success:!0})),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),g.end({success:!1}),_)).catch(_=>{const j=_;throw o.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,j):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,j),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),j instanceof AuthError?g.end({success:!1,errorCode:j.errorCode,subErrorCode:j.subError}):g.end({success:!1}),_}),this.redirectResponse.set(s,a)}else this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return a}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async acquireTokenRedirect(e){const o=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",o),this.preflightBrowserEnvironmentCheck(InteractionType.Redirect);const s=this.getAllAccounts().length>0;s?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Redirect,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Redirect,e);let a;return this.nativeExtensionProvider&&this.canUseNative(e)?a=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,o).acquireTokenRedirect(e).catch(d=>{if(d instanceof NativeAuthError&&isFatalNativeAuthError(d))return this.nativeExtensionProvider=void 0,this.createRedirectClient(o).acquireToken(e);if(d instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(o).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),d}):a=this.createRedirectClient(o).acquireToken(e),a.catch(c=>{throw s?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,c):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,c),c})}acquireTokenPopup(e){const o=this.getRequestCorrelationId(e),s=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPopup,o);try{this.logger.verbose("acquireTokenPopup called",o),this.preflightBrowserEnvironmentCheck(InteractionType.Popup)}catch(d){return Promise.reject(d)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Popup,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Popup,e);let c;return this.canUseNative(e)?c=this.acquireTokenNative({...e,correlationId:o},ApiId.acquireTokenPopup).then(d=>(this.getBrowserStorage().setInteractionInProgress(!1),s.end({success:!0,isNativeBroker:!0,requestId:d.requestId}),d)).catch(d=>{if(d instanceof NativeAuthError&&isFatalNativeAuthError(d))return this.nativeExtensionProvider=void 0,this.createPopupClient(o).acquireToken(e);if(d instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(o).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),d}):c=this.createPopupClient(o).acquireToken(e),c.then(d=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Popup,d):this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Popup,d),s.add({accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length}),s.end({success:!0,requestId:d.requestId}),d)).catch(d=>(a.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Popup,null,d):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Popup,null,d),s.end({errorCode:d.errorCode,subErrorCode:d.subError,success:!1}),Promise.reject(d)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var c;const o=this.getRequestCorrelationId(e),s={...e,prompt:e.prompt,correlationId:o};this.preflightBrowserEnvironmentCheck(InteractionType.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.SsoSilent,o),(c=this.ssoSilentMeasurement)==null||c.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",o),this.eventHandler.emitEvent(EventType.SSO_SILENT_START,InteractionType.Silent,s);let a;return this.canUseNative(s)?a=this.acquireTokenNative(s,ApiId.ssoSilent).catch(d=>{if(d instanceof NativeAuthError&&isFatalNativeAuthError(d))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(s.correlationId).acquireToken(s);throw d}):a=this.createSilentIframeClient(s.correlationId).acquireToken(s),a.then(d=>{var h,g;return this.eventHandler.emitEvent(EventType.SSO_SILENT_SUCCESS,InteractionType.Silent,d),(h=this.ssoSilentMeasurement)==null||h.add({accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length}),(g=this.ssoSilentMeasurement)==null||g.end({success:!0,isNativeBroker:d.fromNativeBroker,requestId:d.requestId}),d}).catch(d=>{var h;throw this.eventHandler.emitEvent(EventType.SSO_SILENT_FAILURE,InteractionType.Silent,null,d),(h=this.ssoSilentMeasurement)==null||h.end({errorCode:d.errorCode,subErrorCode:d.subError,success:!1}),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const o=this.getRequestCorrelationId(e);this.preflightBrowserEnvironmentCheck(InteractionType.Silent),this.logger.trace("acquireTokenByCode called",o),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_START,InteractionType.Silent,e);const s=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCode,o);try{if(e.code&&e.nativeAccountId)throw createBrowserAuthError(spaCodeAndNativeAccountIdPresent);if(e.code){const a=e.code;let c=this.hybridAuthCodeResponses.get(a);return c?(this.logger.verbose("Existing acquireTokenByCode request found",o),s.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",o),c=this.acquireTokenByCodeAsync({...e,correlationId:o}).then(d=>(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_SUCCESS,InteractionType.Silent,d),this.hybridAuthCodeResponses.delete(a),s.add({accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length}),s.end({success:!0,isNativeBroker:d.fromNativeBroker,requestId:d.requestId}),d)).catch(d=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,d),s.end({errorCode:d.errorCode,subErrorCode:d.subError,success:!1}),d}),this.hybridAuthCodeResponses.set(a,c)),await c}else if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return await this.acquireTokenNative({...e,correlationId:o},ApiId.acquireTokenByCode,e.nativeAccountId).catch(a=>{throw a instanceof NativeAuthError&&isFatalNativeAuthError(a)&&(this.nativeExtensionProvider=void 0),a});throw createBrowserAuthError(unableToAcquireTokenFromNativePlatform)}else throw createBrowserAuthError(authCodeOrNativeAccountIdRequired)}catch(a){throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,a),s.end({errorCode:a instanceof AuthError&&a.errorCode||void 0,subErrorCode:a instanceof AuthError&&a.subError||void 0,success:!1}),a}}async acquireTokenByCodeAsync(e){var a;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCodeAsync,e.correlationId),(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(c=>{var d;return(d=this.acquireTokenByCodeAsyncMeasurement)==null||d.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c}).catch(c=>{var d;throw(d=this.acquireTokenByCodeAsyncMeasurement)==null||d.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,o,s){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenFromCache,o.correlationId),s){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessToken:case CacheLookupPolicy.AccessTokenAndRefreshToken:return invokeAsync(e.acquireToken.bind(e),PerformanceEvents.SilentCacheClientAcquireToken,this.logger,this.performanceClient,o.correlationId)(o);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenByRefreshToken(e,o){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenByRefreshToken,e.correlationId),o){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessTokenAndRefreshToken:case CacheLookupPolicy.RefreshToken:case CacheLookupPolicy.RefreshTokenAndNetwork:const s=this.createSilentRefreshClient(e.correlationId);return invokeAsync(s.acquireToken.bind(s),PerformanceEvents.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenBySilentIframe,e.correlationId);const o=this.createSilentIframeClient(e.correlationId);return invokeAsync(o.acquireToken.bind(o),PerformanceEvents.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const o=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",o),this.logoutRedirect({correlationId:o,...e})}async logoutRedirect(e){const o=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(InteractionType.Redirect),this.createRedirectClient(o).logout(e)}logoutPopup(e){try{const o=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(InteractionType.Popup),this.createPopupClient(o).logout(e)}catch(o){return Promise.reject(o)}}async clearCache(e){const o=this.getRequestCorrelationId(e);return this.createSilentCacheClient(o).logout(e)}getAllAccounts(e){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(e):[]}getAccount(e){if(this.logger.trace("getAccount called"),Object.keys(e).length===0)return this.logger.warning("getAccount: No accountFilter provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy(e);return o?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),o):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(e){if(this.logger.trace("getAccountByUsername called"),!e)return this.logger.warning("getAccountByUsername: No username provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy({username:e});return o?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),o):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(e){if(this.logger.trace("getAccountByHomeId called"),!e)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:e});return o?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),o):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(e){if(this.logger.trace("getAccountByLocalId called"),!e)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const o=this.browserStorage.getAccountInfoFilteredBy({localAccountId:e});return o?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),o):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(e){this.browserStorage.setActiveAccount(e)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,o){this.logger.verbose("hydrateCache called");const s=AccountEntity.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(s),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,o)):this.browserStorage.hydrateCache(e,o)}preflightBrowserEnvironmentCheck(e,o=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),blockNonBrowserEnvironment(this.isBrowserEnvironment),blockRedirectInIframe(e,this.config.system.allowRedirectInIframe),blockReloadInHiddenIframes(),blockAcquireTokenInPopups(),blockAPICallsBeforeInitialize(this.initialized),e===InteractionType.Redirect&&this.config.cache.cacheLocation===BrowserCacheLocation.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw createBrowserConfigurationAuthError(inMemRedirectUnavailable);(e===InteractionType.Redirect||e===InteractionType.Popup)&&this.preflightInteractiveRequest(!o)}preflightInteractiveRequest(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),blockReloadInHiddenIframes(),e&&this.getBrowserStorage().setInteractionInProgress(!0)}async acquireTokenNative(e,o,s){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw createBrowserAuthError(nativeConnectionNotEstablished);return new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,o,this.performanceClient,this.nativeExtensionProvider,s||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,o){if(this.logger.trace("canUseNative called"),!NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!o&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const o=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return o&&o.nativeAccountId||""}createPopupClient(e){return new PopupClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new RedirectClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new SilentIframeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new SilentCacheClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new SilentRefreshClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new SilentAuthCodeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,o){this.browserStorage.setWrapperMetadata(e,o)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?createNewGuid():Constants.EMPTY_STRING}async loginRedirect(e){const o=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",o),this.acquireTokenRedirect({correlationId:o,...e||DEFAULT_REQUEST})}loginPopup(e){const o=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",o),this.acquireTokenPopup({correlationId:o,...e||DEFAULT_REQUEST})}async acquireTokenSilent(e){const o=this.getRequestCorrelationId(e),s=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenSilent,o);s.add({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(InteractionType.Silent),this.logger.verbose("acquireTokenSilent called",o);const a=e.account||this.getActiveAccount();if(!a)throw createBrowserAuthError(noAccountError);const c={clientId:this.config.auth.clientId,authority:e.authority||Constants.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:a.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},d=JSON.stringify(c),h=this.activeSilentTokenRequests.get(d);if(typeof h>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",o);const g=invokeAsync(this.acquireTokenSilentAsync.bind(this),PerformanceEvents.AcquireTokenSilentAsync,this.logger,this.performanceClient,o)({...e,correlationId:o},a).then(b=>(this.activeSilentTokenRequests.delete(d),s.add({accessTokenSize:b.accessToken.length,idTokenSize:b.idToken.length}),s.end({success:!0,fromCache:b.fromCache,isNativeBroker:b.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:b.requestId}),b)).catch(b=>{throw this.activeSilentTokenRequests.delete(d),s.end({errorCode:b.errorCode,subErrorCode:b.subError,success:!1}),b});return this.activeSilentTokenRequests.set(d,g),{...await g,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",o),s.discard(),{...await h,state:e.state}}async acquireTokenSilentAsync(e,o){var a;this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Silent,e),this.atsAsyncMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenSilentAsync,e.correlationId),(a=this.atsAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility);let s;if(NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&o.nativeAccountId){this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const c={...e,account:o};s=this.acquireTokenNative(c,ApiId.acquireTokenSilent_silentFlow).catch(async d=>{if(d instanceof NativeAuthError&&isFatalNativeAuthError(d))return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,this.createSilentIframeClient(e.correlationId).acquireToken(e);throw d})}else{this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const c=this.createSilentCacheClient(e.correlationId),d=await invokeAsync(c.initializeSilentRequest.bind(c),PerformanceEvents.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,o),h=e.cacheLookupPolicy||CacheLookupPolicy.Default;s=invokeAsync(this.acquireTokenFromCache.bind(this),PerformanceEvents.AcquireTokenFromCache,this.logger,this.performanceClient,d.correlationId)(c,d,h).catch(g=>{if(e.cacheLookupPolicy===CacheLookupPolicy.AccessToken)throw g;return blockReloadInHiddenIframes(),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_NETWORK_START,InteractionType.Silent,d),invokeAsync(this.acquireTokenByRefreshToken.bind(this),PerformanceEvents.AcquireTokenByRefreshToken,this.logger,this.performanceClient,d.correlationId)(d,h).catch(b=>{if(checkIfRefreshTokenErrorCanBeResolvedSilently(b,d,h))return this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",d.correlationId),invokeAsync(this.acquireTokenBySilentIframe.bind(this),PerformanceEvents.AcquireTokenBySilentIframe,this.logger,this.performanceClient,d.correlationId)(d);throw b})})}return s.then(c=>{var d;return this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Silent,c),(d=this.atsAsyncMeasurement)==null||d.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c}).catch(c=>{var d;throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Silent,null,c),(d=this.atsAsyncMeasurement)==null||d.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibility)})}}function checkIfRefreshTokenErrorCanBeResolvedSilently(i,e,o){const s=!(i instanceof InteractionRequiredAuthError&&i.subError!==badToken),a=i.errorCode===BrowserConstants.INVALID_GRANT_ERROR||i.errorCode===tokenRefreshRequired,c=s&&a||i.errorCode===noTokensFound||i.errorCode===refreshTokenExpired,d=iFrameRenewalPolicies.includes(o);return c&&d}const StandardController$1=Object.freeze(Object.defineProperty({__proto__:null,StandardController},Symbol.toStringTag,{value:"Module"}));/*! @azure/msal-browser v3.10.0 2024-02-17 */class PublicClientApplication{static async createPublicClientApplication(e){const o=await createV3Controller(e);return new PublicClientApplication(e,o)}constructor(e,o){if(o)this.controller=o;else{const s=new StandardOperatingContext(e);this.controller=new StandardController(s)}}async initialize(){return this.controller.initialize()}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e){return this.controller.addEventCallback(e)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,o){return this.controller.initializeWrapperLibrary(e,o)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,o){return this.controller.hydrateCache(e,o)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const stubbedPublicClientApplication={initialize:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenByCode:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),getAllAccounts:()=>[],getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logout:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),ssoSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},getLogger:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},hydrateCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),clearCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled))};/*! @azure/msal-browser v3.10.0 2024-02-17 */class EventMessageUtils{static getInteractionStatusFromEvent(e,o){switch(e.eventType){case EventType.LOGIN_START:return InteractionStatus.Login;case EventType.SSO_SILENT_START:return InteractionStatus.SsoSilent;case EventType.ACQUIRE_TOKEN_START:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup)return InteractionStatus.AcquireToken;break;case EventType.HANDLE_REDIRECT_START:return InteractionStatus.HandleRedirect;case EventType.LOGOUT_START:return InteractionStatus.Logout;case EventType.SSO_SILENT_SUCCESS:case EventType.SSO_SILENT_FAILURE:if(o&&o!==InteractionStatus.SsoSilent)break;return InteractionStatus.None;case EventType.LOGOUT_END:if(o&&o!==InteractionStatus.Logout)break;return InteractionStatus.None;case EventType.HANDLE_REDIRECT_END:if(o&&o!==InteractionStatus.HandleRedirect)break;return InteractionStatus.None;case EventType.LOGIN_SUCCESS:case EventType.LOGIN_FAILURE:case EventType.ACQUIRE_TOKEN_SUCCESS:case EventType.ACQUIRE_TOKEN_FAILURE:case EventType.RESTORE_FROM_BFCACHE:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup){if(o&&o!==InteractionStatus.Login&&o!==InteractionStatus.AcquireToken)break;return InteractionStatus.None}break}return null}}function parseClientInfo(){let i=window.CLIENT_ID,e=window.TENANT_ID;return i.startsWith("{{")&&(i="3952eac2-55db-48e3-a7cb-0c8f074a0190"),e.startsWith("{{")&&(e="a7053deb-181e-4402-b6e4-7b89b67613de"),{clientId:i,tenantId:e}}const{clientId,tenantId}=parseClientInfo();console.log({tenantId,clientId});const msalConfig={auth:{clientId,authority:`https://login.microsoftonline.com/${tenantId}`,redirectUri:"/auth",postLogoutRedirectUri:"/",clientCapabilities:["CP1"]},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(i,e,o)=>{if(!o)switch(i){case LogLevel.Error:console.error(e);return;case LogLevel.Info:return;case LogLevel.Verbose:return;case LogLevel.Warning:console.warn(e);return}}}}},appScopes=["User.Read","profile"],msalInstance=new PublicClientApplication(msalConfig);!msalInstance.getActiveAccount()&&msalInstance.getAllAccounts().length>0&&msalInstance.setActiveAccount(msalInstance.getAllAccounts()[0]);msalInstance.addEventCallback(i=>{if(i.eventType===EventType.LOGIN_SUCCESS&&i.payload&&i.payload.account){const e=i.payload.account;msalInstance.setActiveAccount(e)}i.eventType===EventType.LOGOUT_SUCCESS&&msalInstance.getAllAccounts().length>0&&msalInstance.setActiveAccount(msalInstance.getAllAccounts()[0]),i.eventType===EventType.LOGIN_FAILURE&&console.log(JSON.stringify(i))});async function acquireTokens(i=!1){await msalInstance.initialize();const e=msalInstance.getActiveAccount(),o=msalInstance.getAllAccounts();if(!e&&o.length===0)throw new Error("No accounts found");const s={scopes:appScopes,account:e||o[0],forceRefresh:i},a=await msalInstance.acquireTokenSilent(s),c=a.idTokenClaims.exp,d=Math.floor(Date.now()/1e3)+300;return c<d?await acquireTokens(!0):a}const handleLogin=(i=!1)=>{i?msalInstance.loginPopup({scopes:appScopes,redirectUri:"/auth"}).catch(e=>console.log(e)):msalInstance.loginRedirect({scopes:appScopes,redirectUri:"/auth"}).catch(e=>console.log(e))},handleLogout=(i=!1)=>{i?msalInstance.logoutPopup({mainWindowRedirectUri:"/",account:msalInstance.getActiveAccount()}).catch(e=>console.log(e)):msalInstance.logoutRedirect().catch(e=>console.log(e))},wrappedFetchRaw=async(i,e)=>{const o=await acquireTokens(),s=await fetch(environment.api+i,{...e,headers:{"Content-Type":"application/json",...e.headers,Authorization:`Bearer ${o.idToken}`}});if(!s.ok){const a=await s.text();throw new Error(a)}return s},wrappedFetch=async(i,e)=>await(await wrappedFetchRaw(i,e)).json(),fetchTopics=async()=>wrappedFetch("/topics/",{method:"GET"}),fetchTopic=async i=>wrappedFetch(`/topics/${i}`,{method:"GET"}),fetchConversations=async i=>wrappedFetch(`/topics/${i}/conversations/`,{method:"GET"}),fetchConversation=async(i,e)=>wrappedFetch(`/topics/${i}/conversations/${e}`,{method:"GET"}),sendConversationChat=async(i,e,o)=>wrappedFetch(`/topics/${i}/conversations/${e}/chat`,{method:"POST",body:JSON.stringify({message:o})}),fetchFiles=async i=>wrappedFetch(`/topics/${i}/files/`,{method:"GET"}),fetchFile=async(i,e)=>wrappedFetch(`/topics/${i}/files/${e}`,{method:"GET"}),fetchBlobSasToken=async(i,e)=>wrappedFetch(`/topics/${i}/files/sas-token?url=${e}`,{method:"GET"}),createTopic=async i=>wrappedFetch("/topics/",{method:"POST",body:JSON.stringify(i)}),createConversation=async(i,e)=>wrappedFetch(`/topics/${i}/conversations/`,{method:"POST",body:JSON.stringify(e)}),deleteConversation=async(i,e)=>wrappedFetch(`/topics/${i}/conversations/${e}`,{method:"DELETE"}),deleteTopic=async i=>wrappedFetch(`/topics/${i}`,{method:"DELETE"}),createFile=async(i,e,o)=>{const s=new Blob([o],{type:"application/octet-stream"});return wrappedFetch(`/topics/${i}/files/`,{method:"POST",body:s,headers:{"Content-Type":"application/octet-stream",filename:e,"Content-Disposition":`attachment; filename="${e}"`}})},deleteFile=async(i,e)=>wrappedFetch(`/topics/${i}/files/${e}`,{method:"DELETE"}),createUser=async i=>wrappedFetch("/users/",{method:"POST",body:JSON.stringify(i)}),fetchSearchResults=async(i,e)=>wrappedFetch(`/search/${i}/${e}`,{method:"GET"}),fetchJobs=async i=>wrappedFetch(`/topics/${i}/jobs/`,{method:"GET"}),fetchJob=async(i,e)=>wrappedFetch(`/topics/${i}/jobs/${e}`,{method:"GET"}),createJob=async(i,e)=>wrappedFetch(`/topics/${i}/jobs/`,{method:"POST",body:JSON.stringify(e)}),resubmitJob=async(i,e)=>wrappedFetch(`/topics/${i}/jobs/${e}`,{method:"PUT"}),deleteJob=async(i,e)=>wrappedFetch(`/topics/${i}/jobs/${e}`,{method:"DELETE"}),getAppVersion=async()=>wrappedFetch("/settings/version",{method:"GET"}),downloadJobResultsXlsx=async(i,e)=>{var h;const o=await wrappedFetchRaw(`/topics/${i}/jobs/${e}/results.xlsx`,{method:"GET",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),s=await o.blob(),a=window.URL.createObjectURL(s),c=document.createElement("a");c.href=a;const d=((h=o.headers.get("Content-Disposition"))==null?void 0:h.split("filename=")[1])||`job-${e}.xlsx`;c.setAttribute("download",d),document.body.appendChild(c),c.click(),document.body.removeChild(c)};/*! @azure/msal-react v2.0.12 2024-02-17 */const defaultMsalContext={instance:stubbedPublicClientApplication,inProgress:InteractionStatus.None,accounts:[],logger:new Logger({})},MsalContext=reactExports.createContext(defaultMsalContext);MsalContext.Consumer;/*! @azure/msal-react v2.0.12 2024-02-17 */function getChildrenOrFunction(i,e){return typeof i=="function"?i(e):i}function accountArraysAreEqual(i,e){if(i.length!==e.length)return!1;const o=[...e];return i.every(s=>{const a=o.shift();return!s||!a?!1:s.homeAccountId===a.homeAccountId&&s.localAccountId===a.localAccountId&&s.username===a.username})}function getAccountByIdentifiers(i,e){return i.length>0&&(e.homeAccountId||e.localAccountId||e.username)&&i.filter(s=>!(e.username&&e.username.toLowerCase()!==s.username.toLowerCase()||e.homeAccountId&&e.homeAccountId.toLowerCase()!==s.homeAccountId.toLowerCase()||e.localAccountId&&e.localAccountId.toLowerCase()!==s.localAccountId.toLowerCase()))[0]||null}/*! @azure/msal-react v2.0.12 2024-02-17 */const name$1="@azure/msal-react",version="2.0.12";/*! @azure/msal-react v2.0.12 2024-02-17 */const MsalProviderActionType={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},reducer$1=(i,e)=>{const{type:o,payload:s}=e;let a=i.inProgress;switch(o){case MsalProviderActionType.UNBLOCK_INPROGRESS:i.inProgress===InteractionStatus.Startup&&(a=InteractionStatus.None,s.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case MsalProviderActionType.EVENT:const d=s.message,h=EventMessageUtils.getInteractionStatusFromEvent(d,i.inProgress);h&&(s.logger.info(`MsalProvider - ${d.eventType} results in setting inProgress from ${i.inProgress} to ${h}`),a=h);break;default:throw new Error(`Unknown action type: ${o}`)}const c=s.instance.getAllAccounts();return a!==i.inProgress&&!accountArraysAreEqual(c,i.accounts)?{...i,inProgress:a,accounts:c}:a!==i.inProgress?{...i,inProgress:a}:accountArraysAreEqual(c,i.accounts)?i:{...i,accounts:c}};function MsalProvider({instance:i,children:e}){reactExports.useEffect(()=>{i.initializeWrapperLibrary(WrapperSKU.React,version)},[i]);const o=reactExports.useMemo(()=>i.getLogger().clone(name$1,version),[i]),[s,a]=reactExports.useReducer(reducer$1,void 0,()=>({inProgress:InteractionStatus.Startup,accounts:i.getAllAccounts()}));reactExports.useEffect(()=>{const d=i.addEventCallback(h=>{a({payload:{instance:i,logger:o,message:h},type:MsalProviderActionType.EVENT})});return o.verbose(`MsalProvider - Registered event callback with id: ${d}`),i.initialize().then(()=>{i.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:i,logger:o},type:MsalProviderActionType.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{d&&(o.verbose(`MsalProvider - Removing event callback ${d}`),i.removeEventCallback(d))}},[i,o]);const c={instance:i,inProgress:s.inProgress,accounts:s.accounts,logger:o};return React.createElement(MsalContext.Provider,{value:c},e)}/*! @azure/msal-react v2.0.12 2024-02-17 */const useMsal=()=>reactExports.useContext(MsalContext);/*! @azure/msal-react v2.0.12 2024-02-17 */function isAuthenticated(i,e){return e&&(e.username||e.homeAccountId||e.localAccountId)?!!getAccountByIdentifiers(i,e):i.length>0}function useIsAuthenticated(i){const{accounts:e,inProgress:o}=useMsal(),[s,a]=reactExports.useState(()=>o===InteractionStatus.Startup?!1:isAuthenticated(e,i));return reactExports.useEffect(()=>{a(isAuthenticated(e,i))},[e,i]),s}/*! @azure/msal-react v2.0.12 2024-02-17 */function AuthenticatedTemplate({username:i,homeAccountId:e,localAccountId:o,children:s}){const a=useMsal(),c=reactExports.useMemo(()=>({username:i,homeAccountId:e,localAccountId:o}),[i,e,o]);return useIsAuthenticated(c)&&a.inProgress!==InteractionStatus.Startup?React.createElement(React.Fragment,null,getChildrenOrFunction(s,a)):null}/*! @azure/msal-react v2.0.12 2024-02-17 */function UnauthenticatedTemplate({username:i,homeAccountId:e,localAccountId:o,children:s}){const a=useMsal(),c=reactExports.useMemo(()=>({username:i,homeAccountId:e,localAccountId:o}),[i,e,o]);return!useIsAuthenticated(c)&&a.inProgress!==InteractionStatus.Startup&&a.inProgress!==InteractionStatus.HandleRedirect?React.createElement(React.Fragment,null,getChildrenOrFunction(s,a)):null}/*! @azure/msal-react v2.0.12 2024-02-17 */function getAccount(i,e){return!e||!e.homeAccountId&&!e.localAccountId&&!e.username?i.getActiveAccount():getAccountByIdentifiers(i.getAllAccounts(),e)}function useAccount(i){const{instance:e,inProgress:o,logger:s}=useMsal(),[a,c]=reactExports.useState(()=>getAccount(e,i));return reactExports.useEffect(()=>{c(d=>{const h=getAccount(e,i);return AccountEntity.accountInfoIsEqual(d,h,!0)?d:(s.info("useAccount - Updating account"),h)})},[o,i,e,s]),a}function css(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var o=[],s=0,a=i;s<a.length;s++){var c=a[s];if(c)if(typeof c=="string")o.push(c);else if(c.hasOwnProperty("toString")&&typeof c.toString=="function")o.push(c.toString());else for(var d in c)c[d]&&o.push(d)}return o.join(" ")}var toObjectMap=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var o={},s=0,a=i;s<a.length;s++)for(var c=a[s],d=Array.isArray(c)?c:Object.keys(c),h=0,g=d;h<g.length;h++){var b=g[h];o[b]=1}return o},baseElementEvents=toObjectMap(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),baseElementProperties=toObjectMap(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),htmlElementProperties=toObjectMap(baseElementProperties,baseElementEvents);toObjectMap(htmlElementProperties,["form"]);var audioProperties=toObjectMap(htmlElementProperties,["height","loop","muted","preload","src","width"]);toObjectMap(audioProperties,["poster"]);toObjectMap(htmlElementProperties,["start"]);toObjectMap(htmlElementProperties,["value"]);toObjectMap(htmlElementProperties,["download","href","hrefLang","media","rel","target","type"]);var buttonProperties=toObjectMap(htmlElementProperties,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]);toObjectMap(buttonProperties,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]);toObjectMap(buttonProperties,["autoCapitalize","cols","dirname","form","maxLength","minLength","placeholder","readOnly","required","rows","wrap"]);toObjectMap(buttonProperties,["form","multiple","required"]);toObjectMap(htmlElementProperties,["selected","value"]);toObjectMap(htmlElementProperties,["cellPadding","cellSpacing"]);toObjectMap(htmlElementProperties,["rowSpan","scope"]);toObjectMap(htmlElementProperties,["colSpan","headers","rowSpan","scope"]);toObjectMap(htmlElementProperties,["span"]);toObjectMap(htmlElementProperties,["span"]);toObjectMap(htmlElementProperties,["acceptCharset","action","encType","encType","method","noValidate","target"]);toObjectMap(htmlElementProperties,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]);toObjectMap(htmlElementProperties,["alt","crossOrigin","height","src","srcSet","useMap","width"]);function getNativeProps(i,e,o){for(var s=Array.isArray(e),a={},c=Object.keys(i),d=0,h=c;d<h.length;d++){var g=h[d],b=!s&&e[g]||s&&e.indexOf(g)>=0||g.indexOf("data-")===0||g.indexOf("aria-")===0;b&&(!o||(o==null?void 0:o.indexOf(g))===-1)&&(a[g]=i[g])}return a}var __assign=function(){return __assign=Object.assign||function(i){for(var e,o=1,s=arguments.length;o<s;o++){e=arguments[o];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])}return i},__assign.apply(this,arguments)},_root=typeof window>"u"?global:window,_styleNonce=_root&&_root.CSPSettings&&_root.CSPSettings.nonce,_themeState=initializeThemeState(),_themeTokenRegex=/[\'\"]\[theme:\s*(\w+)\s*(?:\,\s*default:\s*([\\"\']?[\.\,\(\)\#\-\s\w]*[\.\,\(\)\#\-\w][\"\']?))?\s*\][\'\"]/g,now=function(){return typeof performance<"u"&&performance.now?performance.now():Date.now()};function measure(i){var e=now();i();var o=now();_themeState.perf.duration+=o-e}function initializeThemeState(){var i=_root.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};return i.runState||(i=__assign(__assign({},i),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}})),i.registeredThemableStyles||(i=__assign(__assign({},i),{registeredThemableStyles:[]})),_root.__themeState__=i,i}function loadStyles(i,e){e===void 0&&(e=!1),measure(function(){var o=Array.isArray(i)?i:splitStyles(i),s=_themeState.runState,a=s.mode,c=s.buffer,d=s.flushTimer;e||a===1?(c.push(o),d||(_themeState.runState.flushTimer=asyncLoadStyles())):applyThemableStyles(o)})}function flush(){measure(function(){var i=_themeState.runState.buffer.slice();_themeState.runState.buffer=[];var e=[].concat.apply([],i);e.length>0&&applyThemableStyles(e)})}function asyncLoadStyles(){return setTimeout(function(){_themeState.runState.flushTimer=0,flush()},0)}function applyThemableStyles(i,e){_themeState.loadStyles?_themeState.loadStyles(resolveThemableArray(i).styleString,i):registerStyles(i)}function resolveThemableArray(i){var e=_themeState.theme,o=!1,s=(i||[]).map(function(a){var c=a.theme;if(c){o=!0;var d=e?e[c]:void 0,h=a.defaultValue||"inherit";return e&&!d&&console&&!(c in e)&&typeof DEBUG<"u"&&DEBUG&&console.warn('Theming value not provided for "'.concat(c,'". Falling back to "').concat(h,'".')),d||h}else return a.rawString});return{styleString:s.join(""),themable:o}}function splitStyles(i){var e=[];if(i){for(var o=0,s=void 0;s=_themeTokenRegex.exec(i);){var a=s.index;a>o&&e.push({rawString:i.substring(o,a)}),e.push({theme:s[1],defaultValue:s[2]}),o=_themeTokenRegex.lastIndex}e.push({rawString:i.substring(o)})}return e}function registerStyles(i){if(!(typeof document>"u")){var e=document.getElementsByTagName("head")[0],o=document.createElement("style"),s=resolveThemableArray(i),a=s.styleString,c=s.themable;o.setAttribute("data-load-themed-styles","true"),_styleNonce&&o.setAttribute("nonce",_styleNonce),o.appendChild(document.createTextNode(a)),_themeState.perf.count++,e.appendChild(o);var d=document.createEvent("HTMLEvents");d.initEvent("styleinsert",!0,!1),d.args={newStyle:o},document.dispatchEvent(d);var h={styleElement:o,themableStyle:i};c?_themeState.registeredThemableStyles.push(h):_themeState.registeredStyles.push(h)}}loadStyles([{rawString:".root_dd790ee3{display:inline-block;vertical-align:middle;speak:none;width:1em;height:1em}.svg_dd790ee3{height:100%;fill:currentColor;vertical-align:top;forced-color-adjust:auto}"}]);const root$3="root_dd790ee3",svg$2="svg_dd790ee3",classes=Object.freeze(Object.defineProperty({__proto__:null,root:root$3,svg:svg$2},Symbol.toStringTag,{value:"Module"})),IconContext=reactExports.createContext(void 0),useIconSubset=()=>reactExports.useContext(IconContext),createSvgIcon=({svg:i,displayName:e})=>{const o=s=>{var a;const{className:c,style:d={}}=s,h=useIconSubset(),g=getNativeProps(s,htmlElementProperties),b=s["aria-label"]||s["aria-labelledby"]||s.title?{role:"img"}:{"aria-hidden":!0};return reactExports.createElement("span",{...b,...g,className:css(root$3,c),style:d},!((a=h==null?void 0:h.icons)===null||a===void 0)&&a[e]?h.icons[e]:i({classes,props:s}))};return o.displayName=e,o},ChevronLeftIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1443 2045L421 1024 1443 3l90 90-930 931 930 931-90 90z"})),displayName:"ChevronLeftIcon"}),ChevronLeftIcon$1=ChevronLeftIcon,ChevronRightIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M515 1955l930-931L515 93l90-90 1022 1021L605 2045l-90-90z"})),displayName:"ChevronRightIcon"}),ChevronRightIcon$1=ChevronRightIcon,ChromeCloseIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1169 1024l879 879-145 145-879-879-879 879L0 1903l879-879L0 145 145 0l879 879L1903 0l145 145-879 879z"})),displayName:"ChromeCloseIcon"}),ChromeCloseIcon$1=ChromeCloseIcon,DeleteIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1792 384h-128v1472q0 40-15 75t-41 61-61 41-75 15H448q-40 0-75-15t-61-41-41-61-15-75V384H128V256h512V128q0-27 10-50t27-40 41-28 50-10h384q27 0 50 10t40 27 28 41 10 50v128h512v128zM768 256h384V128H768v128zm768 128H384v1472q0 26 19 45t45 19h1024q26 0 45-19t19-45V384zM768 1664H640V640h128v1024zm256 0H896V640h128v1024zm256 0h-128V640h128v1024z"})),displayName:"DeleteIcon"}),DeleteIcon$1=DeleteIcon,FileSymlinkIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M256 1920h640v128H128V0h1115l549 549v347h-128V640h-512V128H256v1792zM1280 512h293l-293-293v293zm768 512v1024H1024V1024h1024zm-128 128h-768v768h768v-768zm-621 531l274-275h-165v-128h384v384h-128v-165l-275 274-90-90z"})),displayName:"FileSymlinkIcon"}),FileSymlinkIcon$1=FileSymlinkIcon,PDFIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1920 1664h-128v384H128v-384H0V640h128V0h1243l421 421v219h128v1024zM1408 384h165l-165-165v165zM256 640h1408V512h-384V128H256v512zm1408 1024H256v256h1408v-256zm128-896H128v768h1664V768zM448 896q40 0 75 15t61 41 41 61 15 75q0 40-15 75t-41 61-61 41-75 15h-64v128H256V896h192zm0 256q26 0 45-19t19-45q0-26-19-45t-45-19h-64v128h64zm448-256q53 0 99 20t82 55 55 81 20 100q0 53-20 99t-55 82-81 55-100 20H768V896h128zm0 384q27 0 50-10t40-27 28-41 10-50q0-27-10-50t-27-40-41-28-50-10v256zm384-384h320v128h-192v128h192v128h-192v128h-128V896z"})),displayName:"PDFIcon"}),PDFIcon$1=PDFIcon,SendIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1997 960L18 1843l220-883L18 77l1979 883zM206 301l149 598h1190L206 301zm147 726l-147 592 1327-592H353z"})),displayName:"SendIcon"}),SendIcon$1=SendIcon,SkypeCheckIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1570 437q42 0 78 15t64 43 42 63 16 79q0 40-15 77t-43 65l-794 795q-28 28-65 43t-77 16q-40 0-77-15t-65-44l-362-362q-28-28-43-65t-16-77q0-42 16-78t43-64 63-42 79-16q40 0 77 15t65 43l220 220 652-653q28-28 65-43t77-15z"})),displayName:"SkypeCheckIcon"}),SkypeCheckIcon$1=SkypeCheckIcon,TextDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg,focusable:"false"},reactExports.createElement("path",{d:"M1243 0l549 549v1499H128V0h1115zm37 219v293h293l-293-293zM256 1920h1408V640h-512V128H256v1792zm256-896V896h896v128H512zm0 256v-128h896v128H512zm0 256v-128h896v128H512z"})),displayName:"TextDocumentIcon"}),TextDocumentIcon$1=TextDocumentIcon,TopicItem=({topic:i,index:e,onDelete:o})=>jsxRuntimeExports.jsx("div",{className:"my-1",children:jsxRuntimeExports.jsxs("div",{className:"p-1 border border-gray-700 bg-blue-100 flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs(Link,{to:`/topics/${i.id}`,children:[jsxRuntimeExports.jsx("span",{className:"text-bold text-xl pr-3",children:i.name}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:i.description})]})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:()=>o(i.id),title:`Delete ${i.name}`,children:jsxRuntimeExports.jsx(DeleteIcon$1,{})})})]})},e),TopicHome=()=>{const[i,e]=reactExports.useState([]),o=useAccount();reactExports.useEffect(()=>{fetchTopics().then(a=>e(a))},[o]);const s=a=>{console.log(`Delete ${a}`),deleteTopic(a).then(()=>{fetchTopics().then(c=>e(c))})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:"Topics"})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx(Link,{to:"/topics/new",children:jsxRuntimeExports.jsx("span",{className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white",children:"+ Create a New Topic"})})})]}),i.map((a,c)=>jsxRuntimeExports.jsx(TopicItem,{topic:a,index:c,onDelete:s},c))]})},LoadingSpinner=({size:i})=>{const e=i||8,o=`w-${e} h-${e} text-gray-200 animate-spin dark:text-gray-600 fill-blue-600`;return jsxRuntimeExports.jsxs("div",{role:"status",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",className:o,viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]})},FilePanel=({file:i,topicId:e})=>{const o=async()=>{const s=await fetchBlobSasToken(e,i.file),a=`${i.file}?${s}`;window.open(a,"_blank")};return jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-100 p-1",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs(Link,{to:`/topics/${e}/files/${i.id}`,children:[jsxRuntimeExports.jsx("div",{className:"",children:i.filename}),i.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:o,title:"Go to document",children:jsxRuntimeExports.jsx(FileSymlinkIcon$1,{})})})]})})})},JobPanel=({job:i,topicId:e,onDelete:o,deletePending:s})=>jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-100 p-1",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Link,{to:`/topics/${e}/jobs/${i.id}`,children:jsxRuntimeExports.jsx("div",{className:"",children:i.question})})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:o,title:`Delete ${i.question}`,disabled:s,children:s?jsxRuntimeExports.jsx(LoadingSpinner,{size:4}):jsxRuntimeExports.jsx(DeleteIcon$1,{})})})]})})}),ConversationPanel=({conversation:i,topicId:e,onDelete:o,deletePending:s})=>jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-100 p-1",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs(Link,{to:`/topics/${e}/conversations/${i.id}`,children:[jsxRuntimeExports.jsxs("div",{className:"",children:[i.name,!i.messages.length&&jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:" (No messages yet)"}),i.messages.length>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:[" (last updated ",new Date(i.messages[i.messages.length-1].timestamp).toLocaleString(),")"]})]}),i.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"hover:bg-sky-800 hover:text-sky-50 p-1",onClick:o,title:`Delete ${i.name}`,disabled:s,children:s?jsxRuntimeExports.jsx(LoadingSpinner,{size:4}):jsxRuntimeExports.jsx(DeleteIcon$1,{})})})]})})}),Panel=({children:i,title:e,actionBtn:o})=>jsxRuntimeExports.jsx("div",{className:"panel my-2 border border-1",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 p-2 text-xl border-b text-white bg-blue-900",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"title",children:e}),jsxRuntimeExports.jsx("div",{className:"btn text-sm",children:o&&jsxRuntimeExports.jsx(Link,{to:o.to,className:"p-1 rounded-sm bg-white text-blue-800 cursor-pointer hover:bg-sky-500 hover:text-white",children:o.title})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-2 overflow-x-hidden",children:i})]})}),SingleTopic=()=>{const{topicId:i}=useParams(),[e,o]=reactExports.useState(null),[s,a]=reactExports.useState([]),[c,d]=reactExports.useState([]),[h,g]=reactExports.useState([]),[b,_]=reactExports.useState({});reactExports.useEffect(()=>{i&&(fetchConversations(i).then(et=>a(et)),fetchFiles(i).then(et=>d(et)),fetchJobs(i).then(et=>g(et)))},[i]);const j=et=>{i&&(_(rt=>({...rt,[et]:!0})),deleteConversation(i,et).then(()=>{fetchConversations(i).then(rt=>{a(rt),_(lt=>({...lt,[et]:!1}))})}))},$=et=>{i&&(_(rt=>({...rt,[et]:!0})),deleteJob(i,et).then(()=>{fetchJobs(i).then(rt=>{g(rt),_(lt=>({...lt,[et]:!1}))})}))};if(reactExports.useEffect(()=>{i&&fetchTopic(i).then(et=>o(et))},[i]),!e)return jsxRuntimeExports.jsx("div",{children:"Loading..."});const _e=()=>{const et=[];s.forEach(ft=>{ft.messages.forEach(st=>{if(st.role==="user"&&st.agent==="search-assistant")return;const at=st.role==="user"&&st.agent==="human"?st.name:"AI",Ct=[];if(st.role==="assistant"){const yt=/<ref.* id="([^"]*)"\/>/gi,pt=st.content.matchAll(yt);for(const gt of pt)Ct.push(gt[1])}et.push({Conversation:ft.name,Timestamp:'"'+new Date(st.timestamp).toLocaleString()+'"',From:at,Content:'"'+st.content.replace(/"/g,'""').replace(/,/g,",")+'"',Resources:Ct.join(",")})})});const rt=["Conversation","Timestamp","From","Content","Resources"],lt=rt.join(",")+`
`+et.map(ft=>rt.map(st=>ft[st]).join(",")).join(`
`),tt=new Blob([lt],{type:"text/csv"}),nt=URL.createObjectURL(tt),it=document.createElement("a");it.href=nt,it.download="chat-history.csv",it.click()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"top flex-0",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl",children:e.name}),jsxRuntimeExports.jsx("h2",{className:"text-md text-gray-500",children:e.description})]}),jsxRuntimeExports.jsx("div",{className:"main flex-1",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-between",children:[jsxRuntimeExports.jsx("div",{className:" flex-1",children:jsxRuntimeExports.jsx(Panel,{title:"Files",actionBtn:{to:`/topics/${i}/files/new`,title:"Upload New File"},children:i&&c.map((et,rt)=>jsxRuntimeExports.jsx(FilePanel,{file:et,topicId:i,deletePending:b[et.id]},rt))})}),jsxRuntimeExports.jsx("div",{className:" flex-1",children:jsxRuntimeExports.jsxs(Panel,{title:"Conversations",actionBtn:{to:`/topics/${i}/conversations/new`,title:"Start a New Conversation"},children:[i&&s.map((et,rt)=>jsxRuntimeExports.jsx(ConversationPanel,{conversation:et,onDelete:()=>j(et.id),deletePending:b[et.id],topicId:i},rt)),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-400 pt-2",children:jsxRuntimeExports.jsx("button",{onClick:_e,className:"p-1 rounded-sm bg-whiteborder border-blue-800 text-blue-800 cursor-pointer hover:bg-sky-500 hover:text-white",children:"Export chat history to Excel"})})]})}),jsxRuntimeExports.jsx("div",{className:" flex-1",children:jsxRuntimeExports.jsx(Panel,{title:"Batch Jobs",actionBtn:{to:`/topics/${i}/jobs/new`,title:"Submit a New Job"},children:i&&h.map((et,rt)=>jsxRuntimeExports.jsx(JobPanel,{job:et,onDelete:()=>$(et.id),deletePending:b[et.id],topicId:i},rt))})})]})})]})},BackToTopic=({topicId:i})=>i?jsxRuntimeExports.jsx("div",{className:"flex-0 h-8",children:jsxRuntimeExports.jsx(Link,{to:`/topics/${i}`,children:jsxRuntimeExports.jsx("span",{className:"rounded-full bg-blue-500 text-white px-2 text-sm",children:"<Back to topic"})})}):null;function ok$2(){}function unreachable(){}function stringify$1(i,e){const o=e||{};return(i[i.length-1]===""?[...i,""]:i).join((o.padRight?" ":"")+","+(o.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$3={};function name(i,e){return((e||emptyOptions$3).jsx?nameReJsx:nameRe).test(i)}const re=/[ \t\n\f\r]/g;function whitespace(i){return typeof i=="object"?i.type==="text"?empty$1(i.value):!1:empty$1(i)}function empty$1(i){return i.replace(re,"")===""}class Schema{constructor(e,o,s){this.property=e,this.normal=o,s&&(this.space=s)}}Schema.prototype.property={};Schema.prototype.normal={};Schema.prototype.space=null;function merge(i,e){const o={},s={};let a=-1;for(;++a<i.length;)Object.assign(o,i[a].property),Object.assign(s,i[a].normal);return new Schema(o,s,e)}function normalize$1(i){return i.toLowerCase()}class Info{constructor(e,o){this.property=e,this.attribute=o}}Info.prototype.space=null;Info.prototype.boolean=!1;Info.prototype.booleanish=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.number=!1;Info.prototype.commaSeparated=!1;Info.prototype.spaceSeparated=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.mustUseProperty=!1;Info.prototype.defined=!1;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,o,s,a){let c=-1;if(super(e,o),mark(this,"space",a),typeof s=="number")for(;++c<checks.length;){const d=checks[c];mark(this,checks[c],(s&types[d])===types[d])}}}DefinedInfo.prototype.defined=!0;function mark(i,e,o){o&&(i[e]=o)}const own$4={}.hasOwnProperty;function create(i){const e={},o={};let s;for(s in i.properties)if(own$4.call(i.properties,s)){const a=i.properties[s],c=new DefinedInfo(s,i.transform(i.attributes||{},s),a,i.space);i.mustUseProperty&&i.mustUseProperty.includes(s)&&(c.mustUseProperty=!0),e[s]=c,o[normalize$1(s)]=s,o[normalize$1(c.attribute)]=s}return new Schema(e,o,i.space)}const xlink=create({space:"xlink",transform(i,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xml=create({space:"xml",transform(i,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(i,e){return e in i?i[e]:e}function caseInsensitiveTransform(i,e){return caseSensitiveTransform(i,e.toLowerCase())}const xmlns=create({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),aria=create({transform(i,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null}}),html$3=create({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:boolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null}}),svg$1=create({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),valid=/^data[-\w.:]+$/i,dash=/-[a-z]/g,cap$1=/[A-Z]/g;function find$1(i,e){const o=normalize$1(e);let s=e,a=Info;if(o in i.normal)return i.property[i.normal[o]];if(o.length>4&&o.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const c=e.slice(5).replace(dash,camelcase);s="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=e.slice(4);if(!dash.test(c)){let d=c.replace(cap$1,kebab);d.charAt(0)!=="-"&&(d="-"+d),e="data"+d}}a=DefinedInfo}return new a(s,e)}function kebab(i){return"-"+i.toLowerCase()}function camelcase(i){return i.charAt(1).toUpperCase()}const hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},html$2=merge([xml,xlink,xmlns,aria,html$3],"html"),svg=merge([xml,xlink,xmlns,aria,svg$1],"svg");function stringify(i){return i.join(" ").trim()}var cjs={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration",inlineStyleParser=function(i,e){if(typeof i!="string")throw new TypeError("First argument must be a string");if(!i)return[];e=e||{};var o=1,s=1;function a(et){var rt=et.match(NEWLINE_REGEX);rt&&(o+=rt.length);var lt=et.lastIndexOf(NEWLINE);s=~lt?et.length-lt:s+et.length}function c(){var et={line:o,column:s};return function(rt){return rt.position=new d(et),b(),rt}}function d(et){this.start=et,this.end={line:o,column:s},this.source=e.source}d.prototype.content=i;function h(et){var rt=new Error(e.source+":"+o+":"+s+": "+et);if(rt.reason=et,rt.filename=e.source,rt.line=o,rt.column=s,rt.source=i,!e.silent)throw rt}function g(et){var rt=et.exec(i);if(rt){var lt=rt[0];return a(lt),i=i.slice(lt.length),rt}}function b(){g(WHITESPACE_REGEX)}function _(et){var rt;for(et=et||[];rt=j();)rt!==!1&&et.push(rt);return et}function j(){var et=c();if(!(FORWARD_SLASH!=i.charAt(0)||ASTERISK!=i.charAt(1))){for(var rt=2;EMPTY_STRING!=i.charAt(rt)&&(ASTERISK!=i.charAt(rt)||FORWARD_SLASH!=i.charAt(rt+1));)++rt;if(rt+=2,EMPTY_STRING===i.charAt(rt-1))return h("End of comment missing");var lt=i.slice(2,rt-2);return s+=2,a(lt),i=i.slice(rt),s+=2,et({type:TYPE_COMMENT,comment:lt})}}function $(){var et=c(),rt=g(PROPERTY_REGEX);if(rt){if(j(),!g(COLON_REGEX))return h("property missing ':'");var lt=g(VALUE_REGEX),tt=et({type:TYPE_DECLARATION,property:trim(rt[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:lt?trim(lt[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return g(SEMICOLON_REGEX),tt}}function _e(){var et=[];_(et);for(var rt;rt=$();)rt!==!1&&(et.push(rt),_(et));return et}return b(),_e()};function trim(i){return i?i.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(cjs,"__esModule",{value:!0});var inline_style_parser_1=__importDefault(inlineStyleParser);function StyleToObject(i,e){var o=null;if(!i||typeof i!="string")return o;var s=(0,inline_style_parser_1.default)(i),a=typeof e=="function";return s.forEach(function(c){if(c.type==="declaration"){var d=c.property,h=c.value;a?e(d,h,c):h&&(o=o||{},o[d]=h)}}),o}var _default=cjs.default=StyleToObject;const styleToObject=_default.default||_default,pointEnd=point$2("end"),pointStart=point$2("start");function point$2(i){return e;function e(o){const s=o&&o.position&&o.position[i]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function position$1(i){const e=pointStart(i),o=pointEnd(i);if(e&&o)return{start:e,end:o}}function stringifyPosition(i){return!i||typeof i!="object"?"":"position"in i||"type"in i?position(i.position):"start"in i||"end"in i?position(i):"line"in i||"column"in i?point$1(i):""}function point$1(i){return index(i&&i.line)+":"+index(i&&i.column)}function position(i){return point$1(i&&i.start)+"-"+point$1(i&&i.end)}function index(i){return i&&typeof i=="number"?i:1}class VFileMessage extends Error{constructor(e,o,s){super(),typeof o=="string"&&(s=o,o=void 0);let a="",c={},d=!1;if(o&&("line"in o&&"column"in o?c={place:o}:"start"in o&&"end"in o?c={place:o}:"type"in o?c={ancestors:[o],place:o.position}:c={...o}),typeof e=="string"?a=e:!c.cause&&e&&(d=!0,a=e.message,c.cause=e),!c.ruleId&&!c.source&&typeof s=="string"){const g=s.indexOf(":");g===-1?c.ruleId=s:(c.source=s.slice(0,g),c.ruleId=s.slice(g+1))}if(!c.place&&c.ancestors&&c.ancestors){const g=c.ancestors[c.ancestors.length-1];g&&(c.place=g.position)}const h=c.place&&"start"in c.place?c.place.start:c.place;this.ancestors=c.ancestors||void 0,this.cause=c.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=h?h.line:void 0,this.name=stringifyPosition(c.place)||"1:1",this.place=c.place||void 0,this.reason=this.message,this.ruleId=c.ruleId||void 0,this.source=c.source||void 0,this.stack=d&&c.cause&&typeof c.cause.stack=="string"?c.cause.stack:"",this.actual,this.expected,this.note,this.url}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,dashSomething=/-([a-z])/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(i,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const o=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=developmentCreate(o,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=productionCreate(o,e.jsx,e.jsxs)}const a={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:o,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$2,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},c=one$1(a,i,void 0);return c&&typeof c!="string"?c:a.create(i,a.Fragment,{children:c||void 0},void 0)}function one$1(i,e,o){if(e.type==="element")return element$1(i,e,o);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(i,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(i,e,o);if(e.type==="mdxjsEsm")return mdxEsm(i,e);if(e.type==="root")return root$2(i,e,o);if(e.type==="text")return text$5(i,e)}function element$1(i,e,o){const s=i.schema;let a=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=svg,i.schema=a),i.ancestors.push(e);const c=findComponentFromName(i,e.tagName,!1),d=createElementProps(i,e);let h=createChildren(i,e);return tableElements.has(e.tagName)&&(h=h.filter(function(g){return typeof g=="string"?!whitespace(g):!0})),addNode(i,d,c,e),addChildren(d,h),i.ancestors.pop(),i.schema=s,i.create(e,c,d,o)}function mdxExpression(i,e){if(e.data&&e.data.estree&&i.evaluater){const s=e.data.estree.body[0];return s.type,i.evaluater.evaluateExpression(s.expression)}crashEstree(i,e.position)}function mdxEsm(i,e){if(e.data&&e.data.estree&&i.evaluater)return i.evaluater.evaluateProgram(e.data.estree);crashEstree(i,e.position)}function mdxJsxElement(i,e,o){const s=i.schema;let a=s;e.name==="svg"&&s.space==="html"&&(a=svg,i.schema=a),i.ancestors.push(e);const c=e.name===null?i.Fragment:findComponentFromName(i,e.name,!0),d=createJsxElementProps(i,e),h=createChildren(i,e);return addNode(i,d,c,e),addChildren(d,h),i.ancestors.pop(),i.schema=s,i.create(e,c,d,o)}function root$2(i,e,o){const s={};return addChildren(s,createChildren(i,e)),i.create(e,i.Fragment,s,o)}function text$5(i,e){return e.value}function addNode(i,e,o,s){typeof o!="string"&&o!==i.Fragment&&i.passNode&&(e.node=s)}function addChildren(i,e){if(e.length>0){const o=e.length>1?e:e[0];o&&(i.children=o)}}function productionCreate(i,e,o){return s;function s(a,c,d,h){const b=Array.isArray(d.children)?o:e;return h?b(c,d,h):b(c,d)}}function developmentCreate(i,e){return o;function o(s,a,c,d){const h=Array.isArray(c.children),g=pointStart(s);return e(a,c,d,h,{columnNumber:g?g.column-1:void 0,fileName:i,lineNumber:g?g.line:void 0},void 0)}}function createElementProps(i,e){const o={};let s,a;for(a in e.properties)if(a!=="children"&&own$3.call(e.properties,a)){const c=createProperty(i,a,e.properties[a]);if(c){const[d,h]=c;i.tableCellAlignToStyle&&d==="align"&&typeof h=="string"&&tableCellElement.has(e.tagName)?s=h:o[d]=h}}if(s){const c=o.style||(o.style={});c[i.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return o}function createJsxElementProps(i,e){const o={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&i.evaluater){const c=s.data.estree.body[0];c.type;const d=c.expression;d.type;const h=d.properties[0];h.type,Object.assign(o,i.evaluater.evaluateExpression(h.argument))}else crashEstree(i,e.position);else{const a=s.name;let c;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&i.evaluater){const h=s.value.data.estree.body[0];h.type,c=i.evaluater.evaluateExpression(h.expression)}else crashEstree(i,e.position);else c=s.value===null?!0:s.value;o[a]=c}return o}function createChildren(i,e){const o=[];let s=-1;const a=i.passKeys?new Map:emptyMap;for(;++s<e.children.length;){const c=e.children[s];let d;if(i.passKeys){const g=c.type==="element"?c.tagName:c.type==="mdxJsxFlowElement"||c.type==="mdxJsxTextElement"?c.name:void 0;if(g){const b=a.get(g)||0;d=g+"-"+b,a.set(g,b+1)}}const h=one$1(i,c,d);h!==void 0&&o.push(h)}return o}function createProperty(i,e,o){const s=find$1(i.schema,e);if(!(o==null||typeof o=="number"&&Number.isNaN(o))){if(Array.isArray(o)&&(o=s.commaSeparated?stringify$1(o):stringify(o)),s.property==="style"){let a=typeof o=="object"?o:parseStyle(i,String(o));return i.stylePropertyNameCase==="css"&&(a=transformStylesToCssCasing(a)),["style",a]}return[i.elementAttributeNameCase==="react"&&s.space?hastToReact[s.property]||s.property:s.attribute,o]}}function parseStyle(i,e){const o={};try{styleToObject(e,s)}catch(a){if(!i.ignoreInvalidStyle){const c=a,d=new VFileMessage("Cannot parse `style` attribute",{ancestors:i.ancestors,cause:c,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw d.file=i.filePath||void 0,d.url=docs+"#cannot-parse-style-attribute",d}}return o;function s(a,c){let d=a;d.slice(0,2)!=="--"&&(d.slice(0,4)==="-ms-"&&(d="ms-"+d.slice(4)),d=d.replace(dashSomething,toCamel)),o[d]=c}}function findComponentFromName(i,e,o){let s;if(!o)s={type:"Literal",value:e};else if(e.includes(".")){const a=e.split(".");let c=-1,d;for(;++c<a.length;){const h=name(a[c])?{type:"Identifier",name:a[c]}:{type:"Literal",value:a[c]};d=d?{type:"MemberExpression",object:d,property:h,computed:!!(c&&h.type==="Literal"),optional:!1}:h}s=d}else s=name(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const a=s.value;return own$3.call(i.components,a)?i.components[a]:a}if(i.evaluater)return i.evaluater.evaluateExpression(s);crashEstree(i)}function crashEstree(i,e){const o=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:i.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw o.file=i.filePath||void 0,o.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",o}function transformStylesToCssCasing(i){const e={};let o;for(o in i)own$3.call(i,o)&&(e[transformStyleToCssCasing(o)]=i[o]);return e}function transformStyleToCssCasing(i){let e=i.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toCamel(i,e){return e.toUpperCase()}function toDash(i){return"-"+i.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$2={};function toString$1(i,e){const o=e||emptyOptions$2,s=typeof o.includeImageAlt=="boolean"?o.includeImageAlt:!0,a=typeof o.includeHtml=="boolean"?o.includeHtml:!0;return one(i,s,a)}function one(i,e,o){if(node(i)){if("value"in i)return i.type==="html"&&!o?"":i.value;if(e&&"alt"in i&&i.alt)return i.alt;if("children"in i)return all(i.children,e,o)}return Array.isArray(i)?all(i,e,o):""}function all(i,e,o){const s=[];let a=-1;for(;++a<i.length;)s[a]=one(i[a],e,o);return s.join("")}function node(i){return!!(i&&typeof i=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(i){const e="&"+i+";";element.innerHTML=e;const o=element.textContent;return o.charCodeAt(o.length-1)===59&&i!=="semi"||o===e?!1:o}function splice(i,e,o,s){const a=i.length;let c=0,d;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,o=o>0?o:0,s.length<1e4)d=Array.from(s),d.unshift(e,o),i.splice(...d);else for(o&&i.splice(e,o);c<s.length;)d=s.slice(c,c+1e4),d.unshift(e,0),i.splice(...d),c+=1e4,e+=1e4}function push(i,e){return i.length>0?(splice(i,i.length,0,e),i):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(i){const e={};let o=-1;for(;++o<i.length;)syntaxExtension(e,i[o]);return e}function syntaxExtension(i,e){let o;for(o in e){const a=(hasOwnProperty.call(i,o)?i[o]:void 0)||(i[o]={}),c=e[o];let d;if(c)for(d in c){hasOwnProperty.call(a,d)||(a[d]=[]);const h=c[d];constructs(a[d],Array.isArray(h)?h:h?[h]:[])}}}function constructs(i,e){let o=-1;const s=[];for(;++o<e.length;)(e[o].add==="after"?i:s).push(e[o]);splice(i,0,0,s)}function decodeNumericCharacterReference(i,e){const o=Number.parseInt(i,e);return o<9||o===11||o>13&&o<32||o>126&&o<160||o>55295&&o<57344||o>64975&&o<65008||(o&65535)===65535||(o&65535)===65534||o>1114111?"":String.fromCodePoint(o)}function normalizeIdentifier(i){return i.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(i){return i!==null&&(i<32||i===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(i){return i!==null&&i<-2}function markdownLineEndingOrSpace(i){return i!==null&&(i<0||i===32)}function markdownSpace(i){return i===-2||i===-1||i===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(i){return e;function e(o){return o!==null&&o>-1&&i.test(String.fromCharCode(o))}}function normalizeUri(i){const e=[];let o=-1,s=0,a=0;for(;++o<i.length;){const c=i.charCodeAt(o);let d="";if(c===37&&asciiAlphanumeric(i.charCodeAt(o+1))&&asciiAlphanumeric(i.charCodeAt(o+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(d=String.fromCharCode(c));else if(c>55295&&c<57344){const h=i.charCodeAt(o+1);c<56320&&h>56319&&h<57344?(d=String.fromCharCode(c,h),a=1):d=""}else d=String.fromCharCode(c);d&&(e.push(i.slice(s,o),encodeURIComponent(d)),s=o+a+1,d=""),a&&(o+=a,a=0)}return e.join("")+i.slice(s)}function factorySpace(i,e,o,s){const a=s?s-1:Number.POSITIVE_INFINITY;let c=0;return d;function d(g){return markdownSpace(g)?(i.enter(o),h(g)):e(g)}function h(g){return markdownSpace(g)&&c++<a?(i.consume(g),h):(i.exit(o),e(g))}}const content$1={tokenize:initializeContent};function initializeContent(i){const e=i.attempt(this.parser.constructs.contentInitial,s,a);let o;return e;function s(h){if(h===null){i.consume(h);return}return i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),factorySpace(i,e,"linePrefix")}function a(h){return i.enter("paragraph"),c(h)}function c(h){const g=i.enter("chunkText",{contentType:"text",previous:o});return o&&(o.next=g),o=g,d(h)}function d(h){if(h===null){i.exit("chunkText"),i.exit("paragraph"),i.consume(h);return}return markdownLineEnding(h)?(i.consume(h),i.exit("chunkText"),c):(i.consume(h),d)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(i){const e=this,o=[];let s=0,a,c,d;return h;function h(it){if(s<o.length){const ft=o[s];return e.containerState=ft[1],i.attempt(ft[0].continuation,g,b)(it)}return b(it)}function g(it){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&nt();const ft=e.events.length;let st=ft,at;for(;st--;)if(e.events[st][0]==="exit"&&e.events[st][1].type==="chunkFlow"){at=e.events[st][1].end;break}tt(s);let Ct=ft;for(;Ct<e.events.length;)e.events[Ct][1].end=Object.assign({},at),Ct++;return splice(e.events,st+1,0,e.events.slice(ft)),e.events.length=Ct,b(it)}return h(it)}function b(it){if(s===o.length){if(!a)return $(it);if(a.currentConstruct&&a.currentConstruct.concrete)return et(it);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},i.check(containerConstruct,_,j)(it)}function _(it){return a&&nt(),tt(s),$(it)}function j(it){return e.parser.lazy[e.now().line]=s!==o.length,d=e.now().offset,et(it)}function $(it){return e.containerState={},i.attempt(containerConstruct,_e,et)(it)}function _e(it){return s++,o.push([e.currentConstruct,e.containerState]),$(it)}function et(it){if(it===null){a&&nt(),tt(0),i.consume(it);return}return a=a||e.parser.flow(e.now()),i.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),rt(it)}function rt(it){if(it===null){lt(i.exit("chunkFlow"),!0),tt(0),i.consume(it);return}return markdownLineEnding(it)?(i.consume(it),lt(i.exit("chunkFlow")),s=0,e.interrupt=void 0,h):(i.consume(it),rt)}function lt(it,ft){const st=e.sliceStream(it);if(ft&&st.push(null),it.previous=c,c&&(c.next=it),c=it,a.defineSkip(it.start),a.write(st),e.parser.lazy[it.start.line]){let at=a.events.length;for(;at--;)if(a.events[at][1].start.offset<d&&(!a.events[at][1].end||a.events[at][1].end.offset>d))return;const Ct=e.events.length;let yt=Ct,pt,gt;for(;yt--;)if(e.events[yt][0]==="exit"&&e.events[yt][1].type==="chunkFlow"){if(pt){gt=e.events[yt][1].end;break}pt=!0}for(tt(s),at=Ct;at<e.events.length;)e.events[at][1].end=Object.assign({},gt),at++;splice(e.events,yt+1,0,e.events.slice(Ct)),e.events.length=at}}function tt(it){let ft=o.length;for(;ft-- >it;){const st=o[ft];e.containerState=st[1],st[0].exit.call(e,i)}o.length=it}function nt(){a.write([null]),c=void 0,a=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(i,e,o){return factorySpace(i,i.attempt(this.parser.constructs.document,e,o),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(i){if(i===null||markdownLineEndingOrSpace(i)||unicodeWhitespace(i))return 1;if(unicodePunctuation(i))return 2}function resolveAll(i,e,o){const s=[];let a=-1;for(;++a<i.length;){const c=i[a].resolveAll;c&&!s.includes(c)&&(e=c(e,o),s.push(c))}return e}const attention={name:"attention",tokenize:tokenizeAttention,resolveAll:resolveAllAttention};function resolveAllAttention(i,e){let o=-1,s,a,c,d,h,g,b,_;for(;++o<i.length;)if(i[o][0]==="enter"&&i[o][1].type==="attentionSequence"&&i[o][1]._close){for(s=o;s--;)if(i[s][0]==="exit"&&i[s][1].type==="attentionSequence"&&i[s][1]._open&&e.sliceSerialize(i[s][1]).charCodeAt(0)===e.sliceSerialize(i[o][1]).charCodeAt(0)){if((i[s][1]._close||i[o][1]._open)&&(i[o][1].end.offset-i[o][1].start.offset)%3&&!((i[s][1].end.offset-i[s][1].start.offset+i[o][1].end.offset-i[o][1].start.offset)%3))continue;g=i[s][1].end.offset-i[s][1].start.offset>1&&i[o][1].end.offset-i[o][1].start.offset>1?2:1;const j=Object.assign({},i[s][1].end),$=Object.assign({},i[o][1].start);movePoint(j,-g),movePoint($,g),d={type:g>1?"strongSequence":"emphasisSequence",start:j,end:Object.assign({},i[s][1].end)},h={type:g>1?"strongSequence":"emphasisSequence",start:Object.assign({},i[o][1].start),end:$},c={type:g>1?"strongText":"emphasisText",start:Object.assign({},i[s][1].end),end:Object.assign({},i[o][1].start)},a={type:g>1?"strong":"emphasis",start:Object.assign({},d.start),end:Object.assign({},h.end)},i[s][1].end=Object.assign({},d.start),i[o][1].start=Object.assign({},h.end),b=[],i[s][1].end.offset-i[s][1].start.offset&&(b=push(b,[["enter",i[s][1],e],["exit",i[s][1],e]])),b=push(b,[["enter",a,e],["enter",d,e],["exit",d,e],["enter",c,e]]),b=push(b,resolveAll(e.parser.constructs.insideSpan.null,i.slice(s+1,o),e)),b=push(b,[["exit",c,e],["enter",h,e],["exit",h,e],["exit",a,e]]),i[o][1].end.offset-i[o][1].start.offset?(_=2,b=push(b,[["enter",i[o][1],e],["exit",i[o][1],e]])):_=0,splice(i,s-1,o-s+3,b),o=s+b.length-_-2;break}}for(o=-1;++o<i.length;)i[o][1].type==="attentionSequence"&&(i[o][1].type="data");return i}function tokenizeAttention(i,e){const o=this.parser.constructs.attentionMarkers.null,s=this.previous,a=classifyCharacter(s);let c;return d;function d(g){return c=g,i.enter("attentionSequence"),h(g)}function h(g){if(g===c)return i.consume(g),h;const b=i.exit("attentionSequence"),_=classifyCharacter(g),j=!_||_===2&&a||o.includes(g),$=!a||a===2&&_||o.includes(s);return b._open=!!(c===42?j:j&&(a||!$)),b._close=!!(c===42?$:$&&(_||!j)),e(g)}}function movePoint(i,e){i.column+=e,i.offset+=e,i._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(i,e,o){let s=0;return a;function a(_e){return i.enter("autolink"),i.enter("autolinkMarker"),i.consume(_e),i.exit("autolinkMarker"),i.enter("autolinkProtocol"),c}function c(_e){return asciiAlpha(_e)?(i.consume(_e),d):b(_e)}function d(_e){return _e===43||_e===45||_e===46||asciiAlphanumeric(_e)?(s=1,h(_e)):b(_e)}function h(_e){return _e===58?(i.consume(_e),s=0,g):(_e===43||_e===45||_e===46||asciiAlphanumeric(_e))&&s++<32?(i.consume(_e),h):(s=0,b(_e))}function g(_e){return _e===62?(i.exit("autolinkProtocol"),i.enter("autolinkMarker"),i.consume(_e),i.exit("autolinkMarker"),i.exit("autolink"),e):_e===null||_e===32||_e===60||asciiControl(_e)?o(_e):(i.consume(_e),g)}function b(_e){return _e===64?(i.consume(_e),_):asciiAtext(_e)?(i.consume(_e),b):o(_e)}function _(_e){return asciiAlphanumeric(_e)?j(_e):o(_e)}function j(_e){return _e===46?(i.consume(_e),s=0,_):_e===62?(i.exit("autolinkProtocol").type="autolinkEmail",i.enter("autolinkMarker"),i.consume(_e),i.exit("autolinkMarker"),i.exit("autolink"),e):$(_e)}function $(_e){if((_e===45||asciiAlphanumeric(_e))&&s++<63){const et=_e===45?$:j;return i.consume(_e),et}return o(_e)}}const blankLine={tokenize:tokenizeBlankLine,partial:!0};function tokenizeBlankLine(i,e,o){return s;function s(c){return markdownSpace(c)?factorySpace(i,a,"linePrefix")(c):a(c)}function a(c){return c===null||markdownLineEnding(c)?e(c):o(c)}}const blockQuote={name:"blockQuote",tokenize:tokenizeBlockQuoteStart,continuation:{tokenize:tokenizeBlockQuoteContinuation},exit:exit$1};function tokenizeBlockQuoteStart(i,e,o){const s=this;return a;function a(d){if(d===62){const h=s.containerState;return h.open||(i.enter("blockQuote",{_container:!0}),h.open=!0),i.enter("blockQuotePrefix"),i.enter("blockQuoteMarker"),i.consume(d),i.exit("blockQuoteMarker"),c}return o(d)}function c(d){return markdownSpace(d)?(i.enter("blockQuotePrefixWhitespace"),i.consume(d),i.exit("blockQuotePrefixWhitespace"),i.exit("blockQuotePrefix"),e):(i.exit("blockQuotePrefix"),e(d))}}function tokenizeBlockQuoteContinuation(i,e,o){const s=this;return a;function a(d){return markdownSpace(d)?factorySpace(i,c,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):c(d)}function c(d){return i.attempt(blockQuote,e,o)(d)}}function exit$1(i){i.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(i,e,o){return s;function s(c){return i.enter("characterEscape"),i.enter("escapeMarker"),i.consume(c),i.exit("escapeMarker"),a}function a(c){return asciiPunctuation(c)?(i.enter("characterEscapeValue"),i.consume(c),i.exit("characterEscapeValue"),i.exit("characterEscape"),e):o(c)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(i,e,o){const s=this;let a=0,c,d;return h;function h(j){return i.enter("characterReference"),i.enter("characterReferenceMarker"),i.consume(j),i.exit("characterReferenceMarker"),g}function g(j){return j===35?(i.enter("characterReferenceMarkerNumeric"),i.consume(j),i.exit("characterReferenceMarkerNumeric"),b):(i.enter("characterReferenceValue"),c=31,d=asciiAlphanumeric,_(j))}function b(j){return j===88||j===120?(i.enter("characterReferenceMarkerHexadecimal"),i.consume(j),i.exit("characterReferenceMarkerHexadecimal"),i.enter("characterReferenceValue"),c=6,d=asciiHexDigit,_):(i.enter("characterReferenceValue"),c=7,d=asciiDigit,_(j))}function _(j){if(j===59&&a){const $=i.exit("characterReferenceValue");return d===asciiAlphanumeric&&!decodeNamedCharacterReference(s.sliceSerialize($))?o(j):(i.enter("characterReferenceMarker"),i.consume(j),i.exit("characterReferenceMarker"),i.exit("characterReference"),e)}return d(j)&&a++<c?(i.consume(j),_):o(j)}}const nonLazyContinuation={tokenize:tokenizeNonLazyContinuation,partial:!0},codeFenced={name:"codeFenced",tokenize:tokenizeCodeFenced,concrete:!0};function tokenizeCodeFenced(i,e,o){const s=this,a={tokenize:st,partial:!0};let c=0,d=0,h;return g;function g(at){return b(at)}function b(at){const Ct=s.events[s.events.length-1];return c=Ct&&Ct[1].type==="linePrefix"?Ct[2].sliceSerialize(Ct[1],!0).length:0,h=at,i.enter("codeFenced"),i.enter("codeFencedFence"),i.enter("codeFencedFenceSequence"),_(at)}function _(at){return at===h?(d++,i.consume(at),_):d<3?o(at):(i.exit("codeFencedFenceSequence"),markdownSpace(at)?factorySpace(i,j,"whitespace")(at):j(at))}function j(at){return at===null||markdownLineEnding(at)?(i.exit("codeFencedFence"),s.interrupt?e(at):i.check(nonLazyContinuation,rt,ft)(at)):(i.enter("codeFencedFenceInfo"),i.enter("chunkString",{contentType:"string"}),$(at))}function $(at){return at===null||markdownLineEnding(at)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),j(at)):markdownSpace(at)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),factorySpace(i,_e,"whitespace")(at)):at===96&&at===h?o(at):(i.consume(at),$)}function _e(at){return at===null||markdownLineEnding(at)?j(at):(i.enter("codeFencedFenceMeta"),i.enter("chunkString",{contentType:"string"}),et(at))}function et(at){return at===null||markdownLineEnding(at)?(i.exit("chunkString"),i.exit("codeFencedFenceMeta"),j(at)):at===96&&at===h?o(at):(i.consume(at),et)}function rt(at){return i.attempt(a,ft,lt)(at)}function lt(at){return i.enter("lineEnding"),i.consume(at),i.exit("lineEnding"),tt}function tt(at){return c>0&&markdownSpace(at)?factorySpace(i,nt,"linePrefix",c+1)(at):nt(at)}function nt(at){return at===null||markdownLineEnding(at)?i.check(nonLazyContinuation,rt,ft)(at):(i.enter("codeFlowValue"),it(at))}function it(at){return at===null||markdownLineEnding(at)?(i.exit("codeFlowValue"),nt(at)):(i.consume(at),it)}function ft(at){return i.exit("codeFenced"),e(at)}function st(at,Ct,yt){let pt=0;return gt;function gt(Lt){return at.enter("lineEnding"),at.consume(Lt),at.exit("lineEnding"),Et}function Et(Lt){return at.enter("codeFencedFence"),markdownSpace(Lt)?factorySpace(at,bt,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Lt):bt(Lt)}function bt(Lt){return Lt===h?(at.enter("codeFencedFenceSequence"),Pt(Lt)):yt(Lt)}function Pt(Lt){return Lt===h?(pt++,at.consume(Lt),Pt):pt>=d?(at.exit("codeFencedFenceSequence"),markdownSpace(Lt)?factorySpace(at,xt,"whitespace")(Lt):xt(Lt)):yt(Lt)}function xt(Lt){return Lt===null||markdownLineEnding(Lt)?(at.exit("codeFencedFence"),Ct(Lt)):yt(Lt)}}}function tokenizeNonLazyContinuation(i,e,o){const s=this;return a;function a(d){return d===null?o(d):(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),c)}function c(d){return s.parser.lazy[s.now().line]?o(d):e(d)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={tokenize:tokenizeFurtherStart,partial:!0};function tokenizeCodeIndented(i,e,o){const s=this;return a;function a(b){return i.enter("codeIndented"),factorySpace(i,c,"linePrefix",5)(b)}function c(b){const _=s.events[s.events.length-1];return _&&_[1].type==="linePrefix"&&_[2].sliceSerialize(_[1],!0).length>=4?d(b):o(b)}function d(b){return b===null?g(b):markdownLineEnding(b)?i.attempt(furtherStart,d,g)(b):(i.enter("codeFlowValue"),h(b))}function h(b){return b===null||markdownLineEnding(b)?(i.exit("codeFlowValue"),d(b)):(i.consume(b),h)}function g(b){return i.exit("codeIndented"),e(b)}}function tokenizeFurtherStart(i,e,o){const s=this;return a;function a(d){return s.parser.lazy[s.now().line]?o(d):markdownLineEnding(d)?(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),a):factorySpace(i,c,"linePrefix",5)(d)}function c(d){const h=s.events[s.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(d):markdownLineEnding(d)?a(d):o(d)}}const codeText={name:"codeText",tokenize:tokenizeCodeText,resolve:resolveCodeText,previous:previous$1};function resolveCodeText(i){let e=i.length-4,o=3,s,a;if((i[o][1].type==="lineEnding"||i[o][1].type==="space")&&(i[e][1].type==="lineEnding"||i[e][1].type==="space")){for(s=o;++s<e;)if(i[s][1].type==="codeTextData"){i[o][1].type="codeTextPadding",i[e][1].type="codeTextPadding",o+=2,e-=2;break}}for(s=o-1,e++;++s<=e;)a===void 0?s!==e&&i[s][1].type!=="lineEnding"&&(a=s):(s===e||i[s][1].type==="lineEnding")&&(i[a][1].type="codeTextData",s!==a+2&&(i[a][1].end=i[s-1][1].end,i.splice(a+2,s-a-2),e-=s-a-2,s=a+2),a=void 0);return i}function previous$1(i){return i!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(i,e,o){let s=0,a,c;return d;function d(j){return i.enter("codeText"),i.enter("codeTextSequence"),h(j)}function h(j){return j===96?(i.consume(j),s++,h):(i.exit("codeTextSequence"),g(j))}function g(j){return j===null?o(j):j===32?(i.enter("space"),i.consume(j),i.exit("space"),g):j===96?(c=i.enter("codeTextSequence"),a=0,_(j)):markdownLineEnding(j)?(i.enter("lineEnding"),i.consume(j),i.exit("lineEnding"),g):(i.enter("codeTextData"),b(j))}function b(j){return j===null||j===32||j===96||markdownLineEnding(j)?(i.exit("codeTextData"),g(j)):(i.consume(j),b)}function _(j){return j===96?(i.consume(j),a++,_):a===s?(i.exit("codeTextSequence"),i.exit("codeText"),e(j)):(c.type="codeTextData",b(j))}}function subtokenize(i){const e={};let o=-1,s,a,c,d,h,g,b;for(;++o<i.length;){for(;o in e;)o=e[o];if(s=i[o],o&&s[1].type==="chunkFlow"&&i[o-1][1].type==="listItemPrefix"&&(g=s[1]._tokenizer.events,c=0,c<g.length&&g[c][1].type==="lineEndingBlank"&&(c+=2),c<g.length&&g[c][1].type==="content"))for(;++c<g.length&&g[c][1].type!=="content";)g[c][1].type==="chunkText"&&(g[c][1]._isInFirstContentOfListItem=!0,c++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,subcontent(i,o)),o=e[o],b=!0);else if(s[1]._container){for(c=o,a=void 0;c--&&(d=i[c],d[1].type==="lineEnding"||d[1].type==="lineEndingBlank");)d[0]==="enter"&&(a&&(i[a][1].type="lineEndingBlank"),d[1].type="lineEnding",a=c);a&&(s[1].end=Object.assign({},i[a][1].start),h=i.slice(a,o),h.unshift(s),splice(i,a,o-a+1,h))}}return!b}function subcontent(i,e){const o=i[e][1],s=i[e][2];let a=e-1;const c=[],d=o._tokenizer||s.parser[o.contentType](o.start),h=d.events,g=[],b={};let _,j,$=-1,_e=o,et=0,rt=0;const lt=[rt];for(;_e;){for(;i[++a][1]!==_e;);c.push(a),_e._tokenizer||(_=s.sliceStream(_e),_e.next||_.push(null),j&&d.defineSkip(_e.start),_e._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write(_),_e._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),j=_e,_e=_e.next}for(_e=o;++$<h.length;)h[$][0]==="exit"&&h[$-1][0]==="enter"&&h[$][1].type===h[$-1][1].type&&h[$][1].start.line!==h[$][1].end.line&&(rt=$+1,lt.push(rt),_e._tokenizer=void 0,_e.previous=void 0,_e=_e.next);for(d.events=[],_e?(_e._tokenizer=void 0,_e.previous=void 0):lt.pop(),$=lt.length;$--;){const tt=h.slice(lt[$],lt[$+1]),nt=c.pop();g.unshift([nt,nt+tt.length-1]),splice(i,nt,2,tt)}for($=-1;++$<g.length;)b[et+g[$][0]]=et+g[$][1],et+=g[$][1]-g[$][0]-1;return b}const content={tokenize:tokenizeContent,resolve:resolveContent},continuationConstruct={tokenize:tokenizeContinuation,partial:!0};function resolveContent(i){return subtokenize(i),i}function tokenizeContent(i,e){let o;return s;function s(h){return i.enter("content"),o=i.enter("chunkContent",{contentType:"content"}),a(h)}function a(h){return h===null?c(h):markdownLineEnding(h)?i.check(continuationConstruct,d,c)(h):(i.consume(h),a)}function c(h){return i.exit("chunkContent"),i.exit("content"),e(h)}function d(h){return i.consume(h),i.exit("chunkContent"),o.next=i.enter("chunkContent",{contentType:"content",previous:o}),o=o.next,a}}function tokenizeContinuation(i,e,o){const s=this;return a;function a(d){return i.exit("chunkContent"),i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),factorySpace(i,c,"linePrefix")}function c(d){if(d===null||markdownLineEnding(d))return o(d);const h=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(d):i.interrupt(s.parser.constructs.flow,o,e)(d)}}function factoryDestination(i,e,o,s,a,c,d,h,g){const b=g||Number.POSITIVE_INFINITY;let _=0;return j;function j(tt){return tt===60?(i.enter(s),i.enter(a),i.enter(c),i.consume(tt),i.exit(c),$):tt===null||tt===32||tt===41||asciiControl(tt)?o(tt):(i.enter(s),i.enter(d),i.enter(h),i.enter("chunkString",{contentType:"string"}),rt(tt))}function $(tt){return tt===62?(i.enter(c),i.consume(tt),i.exit(c),i.exit(a),i.exit(s),e):(i.enter(h),i.enter("chunkString",{contentType:"string"}),_e(tt))}function _e(tt){return tt===62?(i.exit("chunkString"),i.exit(h),$(tt)):tt===null||tt===60||markdownLineEnding(tt)?o(tt):(i.consume(tt),tt===92?et:_e)}function et(tt){return tt===60||tt===62||tt===92?(i.consume(tt),_e):_e(tt)}function rt(tt){return!_&&(tt===null||tt===41||markdownLineEndingOrSpace(tt))?(i.exit("chunkString"),i.exit(h),i.exit(d),i.exit(s),e(tt)):_<b&&tt===40?(i.consume(tt),_++,rt):tt===41?(i.consume(tt),_--,rt):tt===null||tt===32||tt===40||asciiControl(tt)?o(tt):(i.consume(tt),tt===92?lt:rt)}function lt(tt){return tt===40||tt===41||tt===92?(i.consume(tt),rt):rt(tt)}}function factoryLabel(i,e,o,s,a,c){const d=this;let h=0,g;return b;function b(_e){return i.enter(s),i.enter(a),i.consume(_e),i.exit(a),i.enter(c),_}function _(_e){return h>999||_e===null||_e===91||_e===93&&!g||_e===94&&!h&&"_hiddenFootnoteSupport"in d.parser.constructs?o(_e):_e===93?(i.exit(c),i.enter(a),i.consume(_e),i.exit(a),i.exit(s),e):markdownLineEnding(_e)?(i.enter("lineEnding"),i.consume(_e),i.exit("lineEnding"),_):(i.enter("chunkString",{contentType:"string"}),j(_e))}function j(_e){return _e===null||_e===91||_e===93||markdownLineEnding(_e)||h++>999?(i.exit("chunkString"),_(_e)):(i.consume(_e),g||(g=!markdownSpace(_e)),_e===92?$:j)}function $(_e){return _e===91||_e===92||_e===93?(i.consume(_e),h++,j):j(_e)}}function factoryTitle(i,e,o,s,a,c){let d;return h;function h($){return $===34||$===39||$===40?(i.enter(s),i.enter(a),i.consume($),i.exit(a),d=$===40?41:$,g):o($)}function g($){return $===d?(i.enter(a),i.consume($),i.exit(a),i.exit(s),e):(i.enter(c),b($))}function b($){return $===d?(i.exit(c),g(d)):$===null?o($):markdownLineEnding($)?(i.enter("lineEnding"),i.consume($),i.exit("lineEnding"),factorySpace(i,b,"linePrefix")):(i.enter("chunkString",{contentType:"string"}),_($))}function _($){return $===d||$===null||markdownLineEnding($)?(i.exit("chunkString"),b($)):(i.consume($),$===92?j:_)}function j($){return $===d||$===92?(i.consume($),_):_($)}}function factoryWhitespace(i,e){let o;return s;function s(a){return markdownLineEnding(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),o=!0,s):markdownSpace(a)?factorySpace(i,s,o?"linePrefix":"lineSuffix")(a):e(a)}}const definition$1={name:"definition",tokenize:tokenizeDefinition},titleBefore={tokenize:tokenizeTitleBefore,partial:!0};function tokenizeDefinition(i,e,o){const s=this;let a;return c;function c(_e){return i.enter("definition"),d(_e)}function d(_e){return factoryLabel.call(s,i,h,o,"definitionLabel","definitionLabelMarker","definitionLabelString")(_e)}function h(_e){return a=normalizeIdentifier(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),_e===58?(i.enter("definitionMarker"),i.consume(_e),i.exit("definitionMarker"),g):o(_e)}function g(_e){return markdownLineEndingOrSpace(_e)?factoryWhitespace(i,b)(_e):b(_e)}function b(_e){return factoryDestination(i,_,o,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(_e)}function _(_e){return i.attempt(titleBefore,j,j)(_e)}function j(_e){return markdownSpace(_e)?factorySpace(i,$,"whitespace")(_e):$(_e)}function $(_e){return _e===null||markdownLineEnding(_e)?(i.exit("definition"),s.parser.defined.push(a),e(_e)):o(_e)}}function tokenizeTitleBefore(i,e,o){return s;function s(h){return markdownLineEndingOrSpace(h)?factoryWhitespace(i,a)(h):o(h)}function a(h){return factoryTitle(i,c,o,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function c(h){return markdownSpace(h)?factorySpace(i,d,"whitespace")(h):d(h)}function d(h){return h===null||markdownLineEnding(h)?e(h):o(h)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(i,e,o){return s;function s(c){return i.enter("hardBreakEscape"),i.consume(c),a}function a(c){return markdownLineEnding(c)?(i.exit("hardBreakEscape"),e(c)):o(c)}}const headingAtx={name:"headingAtx",tokenize:tokenizeHeadingAtx,resolve:resolveHeadingAtx};function resolveHeadingAtx(i,e){let o=i.length-2,s=3,a,c;return i[s][1].type==="whitespace"&&(s+=2),o-2>s&&i[o][1].type==="whitespace"&&(o-=2),i[o][1].type==="atxHeadingSequence"&&(s===o-1||o-4>s&&i[o-2][1].type==="whitespace")&&(o-=s+1===o?2:4),o>s&&(a={type:"atxHeadingText",start:i[s][1].start,end:i[o][1].end},c={type:"chunkText",start:i[s][1].start,end:i[o][1].end,contentType:"text"},splice(i,s,o-s+1,[["enter",a,e],["enter",c,e],["exit",c,e],["exit",a,e]])),i}function tokenizeHeadingAtx(i,e,o){let s=0;return a;function a(_){return i.enter("atxHeading"),c(_)}function c(_){return i.enter("atxHeadingSequence"),d(_)}function d(_){return _===35&&s++<6?(i.consume(_),d):_===null||markdownLineEndingOrSpace(_)?(i.exit("atxHeadingSequence"),h(_)):o(_)}function h(_){return _===35?(i.enter("atxHeadingSequence"),g(_)):_===null||markdownLineEnding(_)?(i.exit("atxHeading"),e(_)):markdownSpace(_)?factorySpace(i,h,"whitespace")(_):(i.enter("atxHeadingText"),b(_))}function g(_){return _===35?(i.consume(_),g):(i.exit("atxHeadingSequence"),h(_))}function b(_){return _===null||_===35||markdownLineEndingOrSpace(_)?(i.exit("atxHeadingText"),h(_)):(i.consume(_),b)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={name:"htmlFlow",tokenize:tokenizeHtmlFlow,resolveTo:resolveToHtmlFlow,concrete:!0},blankLineBefore={tokenize:tokenizeBlankLineBefore,partial:!0},nonLazyContinuationStart={tokenize:tokenizeNonLazyContinuationStart,partial:!0};function resolveToHtmlFlow(i){let e=i.length;for(;e--&&!(i[e][0]==="enter"&&i[e][1].type==="htmlFlow"););return e>1&&i[e-2][1].type==="linePrefix"&&(i[e][1].start=i[e-2][1].start,i[e+1][1].start=i[e-2][1].start,i.splice(e-2,2)),i}function tokenizeHtmlFlow(i,e,o){const s=this;let a,c,d,h,g;return b;function b(ht){return _(ht)}function _(ht){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(ht),j}function j(ht){return ht===33?(i.consume(ht),$):ht===47?(i.consume(ht),c=!0,rt):ht===63?(i.consume(ht),a=3,s.interrupt?e:St):asciiAlpha(ht)?(i.consume(ht),d=String.fromCharCode(ht),lt):o(ht)}function $(ht){return ht===45?(i.consume(ht),a=2,_e):ht===91?(i.consume(ht),a=5,h=0,et):asciiAlpha(ht)?(i.consume(ht),a=4,s.interrupt?e:St):o(ht)}function _e(ht){return ht===45?(i.consume(ht),s.interrupt?e:St):o(ht)}function et(ht){const ct="CDATA[";return ht===ct.charCodeAt(h++)?(i.consume(ht),h===ct.length?s.interrupt?e:bt:et):o(ht)}function rt(ht){return asciiAlpha(ht)?(i.consume(ht),d=String.fromCharCode(ht),lt):o(ht)}function lt(ht){if(ht===null||ht===47||ht===62||markdownLineEndingOrSpace(ht)){const ct=ht===47,mt=d.toLowerCase();return!ct&&!c&&htmlRawNames.includes(mt)?(a=1,s.interrupt?e(ht):bt(ht)):htmlBlockNames.includes(d.toLowerCase())?(a=6,ct?(i.consume(ht),tt):s.interrupt?e(ht):bt(ht)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?o(ht):c?nt(ht):it(ht))}return ht===45||asciiAlphanumeric(ht)?(i.consume(ht),d+=String.fromCharCode(ht),lt):o(ht)}function tt(ht){return ht===62?(i.consume(ht),s.interrupt?e:bt):o(ht)}function nt(ht){return markdownSpace(ht)?(i.consume(ht),nt):gt(ht)}function it(ht){return ht===47?(i.consume(ht),gt):ht===58||ht===95||asciiAlpha(ht)?(i.consume(ht),ft):markdownSpace(ht)?(i.consume(ht),it):gt(ht)}function ft(ht){return ht===45||ht===46||ht===58||ht===95||asciiAlphanumeric(ht)?(i.consume(ht),ft):st(ht)}function st(ht){return ht===61?(i.consume(ht),at):markdownSpace(ht)?(i.consume(ht),st):it(ht)}function at(ht){return ht===null||ht===60||ht===61||ht===62||ht===96?o(ht):ht===34||ht===39?(i.consume(ht),g=ht,Ct):markdownSpace(ht)?(i.consume(ht),at):yt(ht)}function Ct(ht){return ht===g?(i.consume(ht),g=null,pt):ht===null||markdownLineEnding(ht)?o(ht):(i.consume(ht),Ct)}function yt(ht){return ht===null||ht===34||ht===39||ht===47||ht===60||ht===61||ht===62||ht===96||markdownLineEndingOrSpace(ht)?st(ht):(i.consume(ht),yt)}function pt(ht){return ht===47||ht===62||markdownSpace(ht)?it(ht):o(ht)}function gt(ht){return ht===62?(i.consume(ht),Et):o(ht)}function Et(ht){return ht===null||markdownLineEnding(ht)?bt(ht):markdownSpace(ht)?(i.consume(ht),Et):o(ht)}function bt(ht){return ht===45&&a===2?(i.consume(ht),Bt):ht===60&&a===1?(i.consume(ht),Kt):ht===62&&a===4?(i.consume(ht),rn):ht===63&&a===3?(i.consume(ht),St):ht===93&&a===5?(i.consume(ht),Ut):markdownLineEnding(ht)&&(a===6||a===7)?(i.exit("htmlFlowData"),i.check(blankLineBefore,an,Pt)(ht)):ht===null||markdownLineEnding(ht)?(i.exit("htmlFlowData"),Pt(ht)):(i.consume(ht),bt)}function Pt(ht){return i.check(nonLazyContinuationStart,xt,an)(ht)}function xt(ht){return i.enter("lineEnding"),i.consume(ht),i.exit("lineEnding"),Lt}function Lt(ht){return ht===null||markdownLineEnding(ht)?Pt(ht):(i.enter("htmlFlowData"),bt(ht))}function Bt(ht){return ht===45?(i.consume(ht),St):bt(ht)}function Kt(ht){return ht===47?(i.consume(ht),d="",kt):bt(ht)}function kt(ht){if(ht===62){const ct=d.toLowerCase();return htmlRawNames.includes(ct)?(i.consume(ht),rn):bt(ht)}return asciiAlpha(ht)&&d.length<8?(i.consume(ht),d+=String.fromCharCode(ht),kt):bt(ht)}function Ut(ht){return ht===93?(i.consume(ht),St):bt(ht)}function St(ht){return ht===62?(i.consume(ht),rn):ht===45&&a===2?(i.consume(ht),St):bt(ht)}function rn(ht){return ht===null||markdownLineEnding(ht)?(i.exit("htmlFlowData"),an(ht)):(i.consume(ht),rn)}function an(ht){return i.exit("htmlFlow"),e(ht)}}function tokenizeNonLazyContinuationStart(i,e,o){const s=this;return a;function a(d){return markdownLineEnding(d)?(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),c):o(d)}function c(d){return s.parser.lazy[s.now().line]?o(d):e(d)}}function tokenizeBlankLineBefore(i,e,o){return s;function s(a){return i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),i.attempt(blankLine,e,o)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(i,e,o){const s=this;let a,c,d;return h;function h(St){return i.enter("htmlText"),i.enter("htmlTextData"),i.consume(St),g}function g(St){return St===33?(i.consume(St),b):St===47?(i.consume(St),st):St===63?(i.consume(St),it):asciiAlpha(St)?(i.consume(St),yt):o(St)}function b(St){return St===45?(i.consume(St),_):St===91?(i.consume(St),c=0,et):asciiAlpha(St)?(i.consume(St),nt):o(St)}function _(St){return St===45?(i.consume(St),_e):o(St)}function j(St){return St===null?o(St):St===45?(i.consume(St),$):markdownLineEnding(St)?(d=j,Kt(St)):(i.consume(St),j)}function $(St){return St===45?(i.consume(St),_e):j(St)}function _e(St){return St===62?Bt(St):St===45?$(St):j(St)}function et(St){const rn="CDATA[";return St===rn.charCodeAt(c++)?(i.consume(St),c===rn.length?rt:et):o(St)}function rt(St){return St===null?o(St):St===93?(i.consume(St),lt):markdownLineEnding(St)?(d=rt,Kt(St)):(i.consume(St),rt)}function lt(St){return St===93?(i.consume(St),tt):rt(St)}function tt(St){return St===62?Bt(St):St===93?(i.consume(St),tt):rt(St)}function nt(St){return St===null||St===62?Bt(St):markdownLineEnding(St)?(d=nt,Kt(St)):(i.consume(St),nt)}function it(St){return St===null?o(St):St===63?(i.consume(St),ft):markdownLineEnding(St)?(d=it,Kt(St)):(i.consume(St),it)}function ft(St){return St===62?Bt(St):it(St)}function st(St){return asciiAlpha(St)?(i.consume(St),at):o(St)}function at(St){return St===45||asciiAlphanumeric(St)?(i.consume(St),at):Ct(St)}function Ct(St){return markdownLineEnding(St)?(d=Ct,Kt(St)):markdownSpace(St)?(i.consume(St),Ct):Bt(St)}function yt(St){return St===45||asciiAlphanumeric(St)?(i.consume(St),yt):St===47||St===62||markdownLineEndingOrSpace(St)?pt(St):o(St)}function pt(St){return St===47?(i.consume(St),Bt):St===58||St===95||asciiAlpha(St)?(i.consume(St),gt):markdownLineEnding(St)?(d=pt,Kt(St)):markdownSpace(St)?(i.consume(St),pt):Bt(St)}function gt(St){return St===45||St===46||St===58||St===95||asciiAlphanumeric(St)?(i.consume(St),gt):Et(St)}function Et(St){return St===61?(i.consume(St),bt):markdownLineEnding(St)?(d=Et,Kt(St)):markdownSpace(St)?(i.consume(St),Et):pt(St)}function bt(St){return St===null||St===60||St===61||St===62||St===96?o(St):St===34||St===39?(i.consume(St),a=St,Pt):markdownLineEnding(St)?(d=bt,Kt(St)):markdownSpace(St)?(i.consume(St),bt):(i.consume(St),xt)}function Pt(St){return St===a?(i.consume(St),a=void 0,Lt):St===null?o(St):markdownLineEnding(St)?(d=Pt,Kt(St)):(i.consume(St),Pt)}function xt(St){return St===null||St===34||St===39||St===60||St===61||St===96?o(St):St===47||St===62||markdownLineEndingOrSpace(St)?pt(St):(i.consume(St),xt)}function Lt(St){return St===47||St===62||markdownLineEndingOrSpace(St)?pt(St):o(St)}function Bt(St){return St===62?(i.consume(St),i.exit("htmlTextData"),i.exit("htmlText"),e):o(St)}function Kt(St){return i.exit("htmlTextData"),i.enter("lineEnding"),i.consume(St),i.exit("lineEnding"),kt}function kt(St){return markdownSpace(St)?factorySpace(i,Ut,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(St):Ut(St)}function Ut(St){return i.enter("htmlTextData"),d(St)}}const labelEnd={name:"labelEnd",tokenize:tokenizeLabelEnd,resolveTo:resolveToLabelEnd,resolveAll:resolveAllLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(i){let e=-1;for(;++e<i.length;){const o=i[e][1];(o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd")&&(i.splice(e+1,o.type==="labelImage"?4:2),o.type="data",e++)}return i}function resolveToLabelEnd(i,e){let o=i.length,s=0,a,c,d,h;for(;o--;)if(a=i[o][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;i[o][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(d){if(i[o][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=o,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(d=o);const g={type:i[c][1].type==="labelLink"?"link":"image",start:Object.assign({},i[c][1].start),end:Object.assign({},i[i.length-1][1].end)},b={type:"label",start:Object.assign({},i[c][1].start),end:Object.assign({},i[d][1].end)},_={type:"labelText",start:Object.assign({},i[c+s+2][1].end),end:Object.assign({},i[d-2][1].start)};return h=[["enter",g,e],["enter",b,e]],h=push(h,i.slice(c+1,c+s+3)),h=push(h,[["enter",_,e]]),h=push(h,resolveAll(e.parser.constructs.insideSpan.null,i.slice(c+s+4,d-3),e)),h=push(h,[["exit",_,e],i[d-2],i[d-1],["exit",b,e]]),h=push(h,i.slice(d+1)),h=push(h,[["exit",g,e]]),splice(i,c,i.length,h),i}function tokenizeLabelEnd(i,e,o){const s=this;let a=s.events.length,c,d;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){c=s.events[a][1];break}return h;function h($){return c?c._inactive?j($):(d=s.parser.defined.includes(normalizeIdentifier(s.sliceSerialize({start:c.end,end:s.now()}))),i.enter("labelEnd"),i.enter("labelMarker"),i.consume($),i.exit("labelMarker"),i.exit("labelEnd"),g):o($)}function g($){return $===40?i.attempt(resourceConstruct,_,d?_:j)($):$===91?i.attempt(referenceFullConstruct,_,d?b:j)($):d?_($):j($)}function b($){return i.attempt(referenceCollapsedConstruct,_,j)($)}function _($){return e($)}function j($){return c._balanced=!0,o($)}}function tokenizeResource(i,e,o){return s;function s(j){return i.enter("resource"),i.enter("resourceMarker"),i.consume(j),i.exit("resourceMarker"),a}function a(j){return markdownLineEndingOrSpace(j)?factoryWhitespace(i,c)(j):c(j)}function c(j){return j===41?_(j):factoryDestination(i,d,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(j)}function d(j){return markdownLineEndingOrSpace(j)?factoryWhitespace(i,g)(j):_(j)}function h(j){return o(j)}function g(j){return j===34||j===39||j===40?factoryTitle(i,b,o,"resourceTitle","resourceTitleMarker","resourceTitleString")(j):_(j)}function b(j){return markdownLineEndingOrSpace(j)?factoryWhitespace(i,_)(j):_(j)}function _(j){return j===41?(i.enter("resourceMarker"),i.consume(j),i.exit("resourceMarker"),i.exit("resource"),e):o(j)}}function tokenizeReferenceFull(i,e,o){const s=this;return a;function a(h){return factoryLabel.call(s,i,c,d,"reference","referenceMarker","referenceString")(h)}function c(h){return s.parser.defined.includes(normalizeIdentifier(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(h):o(h)}function d(h){return o(h)}}function tokenizeReferenceCollapsed(i,e,o){return s;function s(c){return i.enter("reference"),i.enter("referenceMarker"),i.consume(c),i.exit("referenceMarker"),a}function a(c){return c===93?(i.enter("referenceMarker"),i.consume(c),i.exit("referenceMarker"),i.exit("reference"),e):o(c)}}const labelStartImage={name:"labelStartImage",tokenize:tokenizeLabelStartImage,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartImage(i,e,o){const s=this;return a;function a(h){return i.enter("labelImage"),i.enter("labelImageMarker"),i.consume(h),i.exit("labelImageMarker"),c}function c(h){return h===91?(i.enter("labelMarker"),i.consume(h),i.exit("labelMarker"),i.exit("labelImage"),d):o(h)}function d(h){return h===94&&"_hiddenFootnoteSupport"in s.parser.constructs?o(h):e(h)}}const labelStartLink={name:"labelStartLink",tokenize:tokenizeLabelStartLink,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartLink(i,e,o){const s=this;return a;function a(d){return i.enter("labelLink"),i.enter("labelMarker"),i.consume(d),i.exit("labelMarker"),i.exit("labelLink"),c}function c(d){return d===94&&"_hiddenFootnoteSupport"in s.parser.constructs?o(d):e(d)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(i,e){return o;function o(s){return i.enter("lineEnding"),i.consume(s),i.exit("lineEnding"),factorySpace(i,e,"linePrefix")}}const thematicBreak$2={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(i,e,o){let s=0,a;return c;function c(b){return i.enter("thematicBreak"),d(b)}function d(b){return a=b,h(b)}function h(b){return b===a?(i.enter("thematicBreakSequence"),g(b)):s>=3&&(b===null||markdownLineEnding(b))?(i.exit("thematicBreak"),e(b)):o(b)}function g(b){return b===a?(i.consume(b),s++,g):(i.exit("thematicBreakSequence"),markdownSpace(b)?factorySpace(i,h,"whitespace")(b):h(b))}}const list$2={name:"list",tokenize:tokenizeListStart,continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd},listItemPrefixWhitespaceConstruct={tokenize:tokenizeListItemPrefixWhitespace,partial:!0},indentConstruct={tokenize:tokenizeIndent$1,partial:!0};function tokenizeListStart(i,e,o){const s=this,a=s.events[s.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,d=0;return h;function h(_e){const et=s.containerState.type||(_e===42||_e===43||_e===45?"listUnordered":"listOrdered");if(et==="listUnordered"?!s.containerState.marker||_e===s.containerState.marker:asciiDigit(_e)){if(s.containerState.type||(s.containerState.type=et,i.enter(et,{_container:!0})),et==="listUnordered")return i.enter("listItemPrefix"),_e===42||_e===45?i.check(thematicBreak$2,o,b)(_e):b(_e);if(!s.interrupt||_e===49)return i.enter("listItemPrefix"),i.enter("listItemValue"),g(_e)}return o(_e)}function g(_e){return asciiDigit(_e)&&++d<10?(i.consume(_e),g):(!s.interrupt||d<2)&&(s.containerState.marker?_e===s.containerState.marker:_e===41||_e===46)?(i.exit("listItemValue"),b(_e)):o(_e)}function b(_e){return i.enter("listItemMarker"),i.consume(_e),i.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||_e,i.check(blankLine,s.interrupt?o:_,i.attempt(listItemPrefixWhitespaceConstruct,$,j))}function _(_e){return s.containerState.initialBlankLine=!0,c++,$(_e)}function j(_e){return markdownSpace(_e)?(i.enter("listItemPrefixWhitespace"),i.consume(_e),i.exit("listItemPrefixWhitespace"),$):o(_e)}function $(_e){return s.containerState.size=c+s.sliceSerialize(i.exit("listItemPrefix"),!0).length,e(_e)}}function tokenizeListContinuation(i,e,o){const s=this;return s.containerState._closeFlow=void 0,i.check(blankLine,a,c);function a(h){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,factorySpace(i,e,"listItemIndent",s.containerState.size+1)(h)}function c(h){return s.containerState.furtherBlankLines||!markdownSpace(h)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,d(h)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,i.attempt(indentConstruct,e,d)(h))}function d(h){return s.containerState._closeFlow=!0,s.interrupt=void 0,factorySpace(i,i.attempt(list$2,e,o),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function tokenizeIndent$1(i,e,o){const s=this;return factorySpace(i,a,"listItemIndent",s.containerState.size+1);function a(c){const d=s.events[s.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===s.containerState.size?e(c):o(c)}}function tokenizeListEnd(i){i.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(i,e,o){const s=this;return factorySpace(i,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(c){const d=s.events[s.events.length-1];return!markdownSpace(c)&&d&&d[1].type==="listItemPrefixWhitespace"?e(c):o(c)}}const setextUnderline={name:"setextUnderline",tokenize:tokenizeSetextUnderline,resolveTo:resolveToSetextUnderline};function resolveToSetextUnderline(i,e){let o=i.length,s,a,c;for(;o--;)if(i[o][0]==="enter"){if(i[o][1].type==="content"){s=o;break}i[o][1].type==="paragraph"&&(a=o)}else i[o][1].type==="content"&&i.splice(o,1),!c&&i[o][1].type==="definition"&&(c=o);const d={type:"setextHeading",start:Object.assign({},i[a][1].start),end:Object.assign({},i[i.length-1][1].end)};return i[a][1].type="setextHeadingText",c?(i.splice(a,0,["enter",d,e]),i.splice(c+1,0,["exit",i[s][1],e]),i[s][1].end=Object.assign({},i[c][1].end)):i[s][1]=d,i.push(["exit",d,e]),i}function tokenizeSetextUnderline(i,e,o){const s=this;let a;return c;function c(b){let _=s.events.length,j;for(;_--;)if(s.events[_][1].type!=="lineEnding"&&s.events[_][1].type!=="linePrefix"&&s.events[_][1].type!=="content"){j=s.events[_][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||j)?(i.enter("setextHeadingLine"),a=b,d(b)):o(b)}function d(b){return i.enter("setextHeadingLineSequence"),h(b)}function h(b){return b===a?(i.consume(b),h):(i.exit("setextHeadingLineSequence"),markdownSpace(b)?factorySpace(i,g,"lineSuffix")(b):g(b))}function g(b){return b===null||markdownLineEnding(b)?(i.exit("setextHeadingLine"),e(b)):o(b)}}const flow$1={tokenize:initializeFlow};function initializeFlow(i){const e=this,o=i.attempt(blankLine,s,i.attempt(this.parser.constructs.flowInitial,a,factorySpace(i,i.attempt(this.parser.constructs.flow,a,i.attempt(content,a)),"linePrefix")));return o;function s(c){if(c===null){i.consume(c);return}return i.enter("lineEndingBlank"),i.consume(c),i.exit("lineEndingBlank"),e.currentConstruct=void 0,o}function a(c){if(c===null){i.consume(c);return}return i.enter("lineEnding"),i.consume(c),i.exit("lineEnding"),e.currentConstruct=void 0,o}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$4=initializeFactory("text");function initializeFactory(i){return{tokenize:e,resolveAll:createResolver(i==="text"?resolveAllLineSuffixes:void 0)};function e(o){const s=this,a=this.parser.constructs[i],c=o.attempt(a,d,h);return d;function d(_){return b(_)?c(_):h(_)}function h(_){if(_===null){o.consume(_);return}return o.enter("data"),o.consume(_),g}function g(_){return b(_)?(o.exit("data"),c(_)):(o.consume(_),g)}function b(_){if(_===null)return!0;const j=a[_];let $=-1;if(j)for(;++$<j.length;){const _e=j[$];if(!_e.previous||_e.previous.call(s,s.previous))return!0}return!1}}}function createResolver(i){return e;function e(o,s){let a=-1,c;for(;++a<=o.length;)c===void 0?o[a]&&o[a][1].type==="data"&&(c=a,a++):(!o[a]||o[a][1].type!=="data")&&(a!==c+2&&(o[c][1].end=o[a-1][1].end,o.splice(c+2,a-c-2),a=c+2),c=void 0);return i?i(o,s):o}}function resolveAllLineSuffixes(i,e){let o=0;for(;++o<=i.length;)if((o===i.length||i[o][1].type==="lineEnding")&&i[o-1][1].type==="data"){const s=i[o-1][1],a=e.sliceStream(s);let c=a.length,d=-1,h=0,g;for(;c--;){const b=a[c];if(typeof b=="string"){for(d=b.length;b.charCodeAt(d-1)===32;)h++,d--;if(d)break;d=-1}else if(b===-2)g=!0,h++;else if(b!==-1){c++;break}}if(h){const b={type:o===i.length||g||h<2?"lineSuffix":"hardBreakTrailing",start:{line:s.end.line,column:s.end.column-h,offset:s.end.offset-h,_index:s.start._index+c,_bufferIndex:c?d:s.start._bufferIndex+d},end:Object.assign({},s.end)};s.end=Object.assign({},b.start),s.start.offset===s.end.offset?Object.assign(s,b):(i.splice(o,0,["enter",b,e],["exit",b,e]),o+=2)}o++}return i}function createTokenizer(i,e,o){let s=Object.assign(o?Object.assign({},o):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let d=[],h=[];const g={consume:nt,enter:it,exit:ft,attempt:Ct(st),check:Ct(at),interrupt:Ct(at,{interrupt:!0})},b={previous:null,code:null,containerState:{},events:[],parser:i,sliceStream:_e,sliceSerialize:$,now:et,defineSkip:rt,write:j};let _=e.tokenize.call(b,g);return e.resolveAll&&c.push(e),b;function j(Et){return d=push(d,Et),lt(),d[d.length-1]!==null?[]:(yt(e,0),b.events=resolveAll(c,b.events,b),b.events)}function $(Et,bt){return serializeChunks(_e(Et),bt)}function _e(Et){return sliceChunks(d,Et)}function et(){const{line:Et,column:bt,offset:Pt,_index:xt,_bufferIndex:Lt}=s;return{line:Et,column:bt,offset:Pt,_index:xt,_bufferIndex:Lt}}function rt(Et){a[Et.line]=Et.column,gt()}function lt(){let Et;for(;s._index<d.length;){const bt=d[s._index];if(typeof bt=="string")for(Et=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===Et&&s._bufferIndex<bt.length;)tt(bt.charCodeAt(s._bufferIndex));else tt(bt)}}function tt(Et){_=_(Et)}function nt(Et){markdownLineEnding(Et)?(s.line++,s.column=1,s.offset+=Et===-3?2:1,gt()):Et!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===d[s._index].length&&(s._bufferIndex=-1,s._index++)),b.previous=Et}function it(Et,bt){const Pt=bt||{};return Pt.type=Et,Pt.start=et(),b.events.push(["enter",Pt,b]),h.push(Pt),Pt}function ft(Et){const bt=h.pop();return bt.end=et(),b.events.push(["exit",bt,b]),bt}function st(Et,bt){yt(Et,bt.from)}function at(Et,bt){bt.restore()}function Ct(Et,bt){return Pt;function Pt(xt,Lt,Bt){let Kt,kt,Ut,St;return Array.isArray(xt)?an(xt):"tokenize"in xt?an([xt]):rn(xt);function rn(ut){return vt;function vt(At){const Tt=At!==null&&ut[At],_t=At!==null&&ut.null,Mt=[...Array.isArray(Tt)?Tt:Tt?[Tt]:[],...Array.isArray(_t)?_t:_t?[_t]:[]];return an(Mt)(At)}}function an(ut){return Kt=ut,kt=0,ut.length===0?Bt:ht(ut[kt])}function ht(ut){return vt;function vt(At){return St=pt(),Ut=ut,ut.partial||(b.currentConstruct=ut),ut.name&&b.parser.constructs.disable.null.includes(ut.name)?mt():ut.tokenize.call(bt?Object.assign(Object.create(b),bt):b,g,ct,mt)(At)}}function ct(ut){return Et(Ut,St),Lt}function mt(ut){return St.restore(),++kt<Kt.length?ht(Kt[kt]):Bt}}}function yt(Et,bt){Et.resolveAll&&!c.includes(Et)&&c.push(Et),Et.resolve&&splice(b.events,bt,b.events.length-bt,Et.resolve(b.events.slice(bt),b)),Et.resolveTo&&(b.events=Et.resolveTo(b.events,b))}function pt(){const Et=et(),bt=b.previous,Pt=b.currentConstruct,xt=b.events.length,Lt=Array.from(h);return{restore:Bt,from:xt};function Bt(){s=Et,b.previous=bt,b.currentConstruct=Pt,b.events.length=xt,h=Lt,gt()}}function gt(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function sliceChunks(i,e){const o=e.start._index,s=e.start._bufferIndex,a=e.end._index,c=e.end._bufferIndex;let d;if(o===a)d=[i[o].slice(s,c)];else{if(d=i.slice(o,a),s>-1){const h=d[0];typeof h=="string"?d[0]=h.slice(s):d.shift()}c>0&&d.push(i[a].slice(0,c))}return d}function serializeChunks(i,e){let o=-1;const s=[];let a;for(;++o<i.length;){const c=i[o];let d;if(typeof c=="string")d=c;else switch(c){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=e?" ":"	";break}case-1:{if(!e&&a)continue;d=" ";break}default:d=String.fromCharCode(c)}a=c===-2,s.push(d)}return s.join("")}const document$1={42:list$2,43:list$2,45:list$2,48:list$2,49:list$2,50:list$2,51:list$2,52:list$2,53:list$2,54:list$2,55:list$2,56:list$2,57:list$2,62:blockQuote},contentInitial={91:definition$1},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$2,45:[setextUnderline,thematicBreak$2],60:htmlFlow,61:setextUnderline,95:thematicBreak$2,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$3={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$3},Symbol.toStringTag,{value:"Module"}));function parse(i){const o=combineExtensions([defaultConstructs,...(i||{}).extensions||[]]),s={defined:[],lazy:{},constructs:o,content:a(content$1),document:a(document$2),flow:a(flow$1),string:a(string$1),text:a(text$4)};return s;function a(c){return d;function d(h){return createTokenizer(s,c,h)}}}function postprocess(i){for(;!subtokenize(i););return i}const search=/[\0\t\n\r]/g;function preprocess(){let i=1,e="",o=!0,s;return a;function a(c,d,h){const g=[];let b,_,j,$,_e;for(c=e+(typeof c=="string"?c.toString():new TextDecoder(d||void 0).decode(c)),j=0,e="",o&&(c.charCodeAt(0)===65279&&j++,o=void 0);j<c.length;){if(search.lastIndex=j,b=search.exec(c),$=b&&b.index!==void 0?b.index:c.length,_e=c.charCodeAt($),!b){e=c.slice(j);break}if(_e===10&&j===$&&s)g.push(-3),s=void 0;else switch(s&&(g.push(-5),s=void 0),j<$&&(g.push(c.slice(j,$)),i+=$-j),_e){case 0:{g.push(65533),i++;break}case 9:{for(_=Math.ceil(i/4)*4,g.push(-2);i++<_;)g.push(-1);break}case 10:{g.push(-4),i=1;break}default:s=!0,i=1}j=$+1}return h&&(s&&g.push(-5),e&&g.push(e),g.push(null)),g}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(i){return i.replace(characterEscapeOrReference,decode)}function decode(i,e,o){if(e)return e;if(o.charCodeAt(0)===35){const a=o.charCodeAt(1),c=a===120||a===88;return decodeNumericCharacterReference(o.slice(c?2:1),c?16:10)}return decodeNamedCharacterReference(o)||i}const own$2={}.hasOwnProperty;function fromMarkdown(i,e,o){return typeof e!="string"&&(o=e,e=void 0),compiler(o)(postprocess(parse(o).document().write(preprocess()(i,e,!0))))}function compiler(i){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(fn),autolinkProtocol:pt,autolinkEmail:pt,atxHeading:c(Qt),blockQuote:c(Tt),characterEscape:pt,characterReference:pt,codeFenced:c(_t),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:c(_t,d),codeText:c(Mt,d),codeTextData:pt,data:pt,codeFlowValue:pt,definition:c(Wt),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:c(Vt),hardBreakEscape:c(tn),hardBreakTrailing:c(tn),htmlFlow:c(on,d),htmlFlowData:pt,htmlText:c(on,d),htmlTextData:pt,image:c(Zt),label:d,link:c(fn),listItem:c(hn),listItemValue:$,listOrdered:c(xn,j),listUnordered:c(xn),paragraph:c(Cn),reference:ht,referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:c(Qt),strong:c(sn),thematicBreak:c(qt)},exit:{atxHeading:g(),atxHeadingSequence:st,autolink:g(),autolinkEmail:At,autolinkProtocol:vt,blockQuote:g(),characterEscapeValue:gt,characterReferenceMarkerHexadecimal:mt,characterReferenceMarkerNumeric:mt,characterReferenceValue:ut,codeFenced:g(lt),codeFencedFence:rt,codeFencedFenceInfo:_e,codeFencedFenceMeta:et,codeFlowValue:gt,codeIndented:g(tt),codeText:g(Lt),codeTextData:gt,data:gt,definition:g(),definitionDestinationString:ft,definitionLabelString:nt,definitionTitleString:it,emphasis:g(),hardBreakEscape:g(bt),hardBreakTrailing:g(bt),htmlFlow:g(Pt),htmlFlowData:gt,htmlText:g(xt),htmlTextData:gt,image:g(Kt),label:Ut,labelText:kt,lineEnding:Et,link:g(Bt),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:ct,resourceDestinationString:St,resourceTitleString:rn,resource:an,setextHeading:g(yt),setextHeadingLineSequence:Ct,setextHeadingText:at,strong:g(),thematicBreak:g()}};configure(e,(i||{}).mdastExtensions||[]);const o={};return s;function s(Nt){let Xt={type:"root",children:[]};const nn={stack:[Xt],tokenStack:[],config:e,enter:h,exit:b,buffer:d,resume:_,data:o},mn=[];let vn=-1;for(;++vn<Nt.length;)if(Nt[vn][1].type==="listOrdered"||Nt[vn][1].type==="listUnordered")if(Nt[vn][0]==="enter")mn.push(vn);else{const Tn=mn.pop();vn=a(Nt,Tn,vn)}for(vn=-1;++vn<Nt.length;){const Tn=e[Nt[vn][0]];own$2.call(Tn,Nt[vn][1].type)&&Tn[Nt[vn][1].type].call(Object.assign({sliceSerialize:Nt[vn][2].sliceSerialize},nn),Nt[vn][1])}if(nn.tokenStack.length>0){const Tn=nn.tokenStack[nn.tokenStack.length-1];(Tn[1]||defaultOnError).call(nn,void 0,Tn[0])}for(Xt.position={start:point(Nt.length>0?Nt[0][1].start:{line:1,column:1,offset:0}),end:point(Nt.length>0?Nt[Nt.length-2][1].end:{line:1,column:1,offset:0})},vn=-1;++vn<e.transforms.length;)Xt=e.transforms[vn](Xt)||Xt;return Xt}function a(Nt,Xt,nn){let mn=Xt-1,vn=-1,Tn=!1,Pn,Rn,In,Mn;for(;++mn<=nn;){const en=Nt[mn];switch(en[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{en[0]==="enter"?vn++:vn--,Mn=void 0;break}case"lineEndingBlank":{en[0]==="enter"&&(Pn&&!Mn&&!vn&&!In&&(In=mn),Mn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Mn=void 0}if(!vn&&en[0]==="enter"&&en[1].type==="listItemPrefix"||vn===-1&&en[0]==="exit"&&(en[1].type==="listUnordered"||en[1].type==="listOrdered")){if(Pn){let zt=mn;for(Rn=void 0;zt--;){const Ft=Nt[zt];if(Ft[1].type==="lineEnding"||Ft[1].type==="lineEndingBlank"){if(Ft[0]==="exit")continue;Rn&&(Nt[Rn][1].type="lineEndingBlank",Tn=!0),Ft[1].type="lineEnding",Rn=zt}else if(!(Ft[1].type==="linePrefix"||Ft[1].type==="blockQuotePrefix"||Ft[1].type==="blockQuotePrefixWhitespace"||Ft[1].type==="blockQuoteMarker"||Ft[1].type==="listItemIndent"))break}In&&(!Rn||In<Rn)&&(Pn._spread=!0),Pn.end=Object.assign({},Rn?Nt[Rn][1].start:en[1].end),Nt.splice(Rn||mn,0,["exit",Pn,en[2]]),mn++,nn++}if(en[1].type==="listItemPrefix"){const zt={type:"listItem",_spread:!1,start:Object.assign({},en[1].start),end:void 0};Pn=zt,Nt.splice(mn,0,["enter",zt,en[2]]),mn++,nn++,In=void 0,Mn=!0}}}return Nt[Xt][1]._spread=Tn,nn}function c(Nt,Xt){return nn;function nn(mn){h.call(this,Nt(mn),mn),Xt&&Xt.call(this,mn)}}function d(){this.stack.push({type:"fragment",children:[]})}function h(Nt,Xt,nn){this.stack[this.stack.length-1].children.push(Nt),this.stack.push(Nt),this.tokenStack.push([Xt,nn]),Nt.position={start:point(Xt.start),end:void 0}}function g(Nt){return Xt;function Xt(nn){Nt&&Nt.call(this,nn),b.call(this,nn)}}function b(Nt,Xt){const nn=this.stack.pop(),mn=this.tokenStack.pop();if(mn)mn[0].type!==Nt.type&&(Xt?Xt.call(this,Nt,mn[0]):(mn[1]||defaultOnError).call(this,Nt,mn[0]));else throw new Error("Cannot close `"+Nt.type+"` ("+stringifyPosition({start:Nt.start,end:Nt.end})+"): its not open");nn.position.end=point(Nt.end)}function _(){return toString$1(this.stack.pop())}function j(){this.data.expectingFirstListItemValue=!0}function $(Nt){if(this.data.expectingFirstListItemValue){const Xt=this.stack[this.stack.length-2];Xt.start=Number.parseInt(this.sliceSerialize(Nt),10),this.data.expectingFirstListItemValue=void 0}}function _e(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.lang=Nt}function et(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.meta=Nt}function rt(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function lt(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Nt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function tt(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Nt.replace(/(\r?\n|\r)$/g,"")}function nt(Nt){const Xt=this.resume(),nn=this.stack[this.stack.length-1];nn.label=Xt,nn.identifier=normalizeIdentifier(this.sliceSerialize(Nt)).toLowerCase()}function it(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.title=Nt}function ft(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.url=Nt}function st(Nt){const Xt=this.stack[this.stack.length-1];if(!Xt.depth){const nn=this.sliceSerialize(Nt).length;Xt.depth=nn}}function at(){this.data.setextHeadingSlurpLineEnding=!0}function Ct(Nt){const Xt=this.stack[this.stack.length-1];Xt.depth=this.sliceSerialize(Nt).codePointAt(0)===61?1:2}function yt(){this.data.setextHeadingSlurpLineEnding=void 0}function pt(Nt){const nn=this.stack[this.stack.length-1].children;let mn=nn[nn.length-1];(!mn||mn.type!=="text")&&(mn=Gt(),mn.position={start:point(Nt.start),end:void 0},nn.push(mn)),this.stack.push(mn)}function gt(Nt){const Xt=this.stack.pop();Xt.value+=this.sliceSerialize(Nt),Xt.position.end=point(Nt.end)}function Et(Nt){const Xt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const nn=Xt.children[Xt.children.length-1];nn.position.end=point(Nt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Xt.type)&&(pt.call(this,Nt),gt.call(this,Nt))}function bt(){this.data.atHardBreak=!0}function Pt(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Nt}function xt(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Nt}function Lt(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.value=Nt}function Bt(){const Nt=this.stack[this.stack.length-1];if(this.data.inReference){const Xt=this.data.referenceType||"shortcut";Nt.type+="Reference",Nt.referenceType=Xt,delete Nt.url,delete Nt.title}else delete Nt.identifier,delete Nt.label;this.data.referenceType=void 0}function Kt(){const Nt=this.stack[this.stack.length-1];if(this.data.inReference){const Xt=this.data.referenceType||"shortcut";Nt.type+="Reference",Nt.referenceType=Xt,delete Nt.url,delete Nt.title}else delete Nt.identifier,delete Nt.label;this.data.referenceType=void 0}function kt(Nt){const Xt=this.sliceSerialize(Nt),nn=this.stack[this.stack.length-2];nn.label=decodeString(Xt),nn.identifier=normalizeIdentifier(Xt).toLowerCase()}function Ut(){const Nt=this.stack[this.stack.length-1],Xt=this.resume(),nn=this.stack[this.stack.length-1];if(this.data.inReference=!0,nn.type==="link"){const mn=Nt.children;nn.children=mn}else nn.alt=Xt}function St(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.url=Nt}function rn(){const Nt=this.resume(),Xt=this.stack[this.stack.length-1];Xt.title=Nt}function an(){this.data.inReference=void 0}function ht(){this.data.referenceType="collapsed"}function ct(Nt){const Xt=this.resume(),nn=this.stack[this.stack.length-1];nn.label=Xt,nn.identifier=normalizeIdentifier(this.sliceSerialize(Nt)).toLowerCase(),this.data.referenceType="full"}function mt(Nt){this.data.characterReferenceType=Nt.type}function ut(Nt){const Xt=this.sliceSerialize(Nt),nn=this.data.characterReferenceType;let mn;nn?(mn=decodeNumericCharacterReference(Xt,nn==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):mn=decodeNamedCharacterReference(Xt);const vn=this.stack.pop();vn.value+=mn,vn.position.end=point(Nt.end)}function vt(Nt){gt.call(this,Nt);const Xt=this.stack[this.stack.length-1];Xt.url=this.sliceSerialize(Nt)}function At(Nt){gt.call(this,Nt);const Xt=this.stack[this.stack.length-1];Xt.url="mailto:"+this.sliceSerialize(Nt)}function Tt(){return{type:"blockquote",children:[]}}function _t(){return{type:"code",lang:null,meta:null,value:""}}function Mt(){return{type:"inlineCode",value:""}}function Wt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Vt(){return{type:"emphasis",children:[]}}function Qt(){return{type:"heading",depth:0,children:[]}}function tn(){return{type:"break"}}function on(){return{type:"html",value:""}}function Zt(){return{type:"image",title:null,url:"",alt:null}}function fn(){return{type:"link",title:null,url:"",children:[]}}function xn(Nt){return{type:"list",ordered:Nt.type==="listOrdered",start:null,spread:Nt._spread,children:[]}}function hn(Nt){return{type:"listItem",spread:Nt._spread,checked:null,children:[]}}function Cn(){return{type:"paragraph",children:[]}}function sn(){return{type:"strong",children:[]}}function Gt(){return{type:"text",value:""}}function qt(){return{type:"thematicBreak"}}}function point(i){return{line:i.line,column:i.column,offset:i.offset}}function configure(i,e){let o=-1;for(;++o<e.length;){const s=e[o];Array.isArray(s)?configure(i,s):extension(i,s)}}function extension(i,e){let o;for(o in e)if(own$2.call(e,o))switch(o){case"canContainEols":{const s=e[o];s&&i[o].push(...s);break}case"transforms":{const s=e[o];s&&i[o].push(...s);break}case"enter":case"exit":{const s=e[o];s&&Object.assign(i[o],s);break}}}function defaultOnError(i,e){throw i?new Error("Cannot close `"+i.type+"` ("+stringifyPosition({start:i.start,end:i.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(i){const e=this;e.parser=o;function o(s){return fromMarkdown(s,{...e.data("settings"),...i,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote$1(i,e){const o={type:"element",tagName:"blockquote",properties:{},children:i.wrap(i.all(e),!0)};return i.patch(e,o),i.applyData(e,o)}function hardBreak$1(i,e){const o={type:"element",tagName:"br",properties:{},children:[]};return i.patch(e,o),[i.applyData(e,o),{type:"text",value:`
`}]}function code$2(i,e){const o=e.value?e.value+`
`:"",s={};e.lang&&(s.className=["language-"+e.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:o}]};return e.meta&&(a.data={meta:e.meta}),i.patch(e,a),a=i.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},i.patch(e,a),a}function strikethrough(i,e){const o={type:"element",tagName:"del",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function emphasis$1(i,e){const o={type:"element",tagName:"em",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function footnoteReference$1(i,e){const o=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),a=normalizeUri(s.toLowerCase()),c=i.footnoteOrder.indexOf(s);let d,h=i.footnoteCounts.get(s);h===void 0?(h=0,i.footnoteOrder.push(s),d=i.footnoteOrder.length):d=c+1,h+=1,i.footnoteCounts.set(s,h);const g={type:"element",tagName:"a",properties:{href:"#"+o+"fn-"+a,id:o+"fnref-"+a+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(d)}]};i.patch(e,g);const b={type:"element",tagName:"sup",properties:{},children:[g]};return i.patch(e,b),i.applyData(e,b)}function heading$1(i,e){const o={type:"element",tagName:"h"+e.depth,properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function html$1(i,e){if(i.options.allowDangerousHtml){const o={type:"raw",value:e.value};return i.patch(e,o),i.applyData(e,o)}}function revert(i,e){const o=e.referenceType;let s="]";if(o==="collapsed"?s+="[]":o==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const a=i.all(e),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift({type:"text",value:"["});const d=a[a.length-1];return d&&d.type==="text"?d.value+=s:a.push({type:"text",value:s}),a}function imageReference$1(i,e){const o=String(e.identifier).toUpperCase(),s=i.definitionById.get(o);if(!s)return revert(i,e);const a={src:normalizeUri(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const c={type:"element",tagName:"img",properties:a,children:[]};return i.patch(e,c),i.applyData(e,c)}function image$1(i,e){const o={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(o.alt=e.alt),e.title!==null&&e.title!==void 0&&(o.title=e.title);const s={type:"element",tagName:"img",properties:o,children:[]};return i.patch(e,s),i.applyData(e,s)}function inlineCode$1(i,e){const o={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};i.patch(e,o);const s={type:"element",tagName:"code",properties:{},children:[o]};return i.patch(e,s),i.applyData(e,s)}function linkReference$1(i,e){const o=String(e.identifier).toUpperCase(),s=i.definitionById.get(o);if(!s)return revert(i,e);const a={href:normalizeUri(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const c={type:"element",tagName:"a",properties:a,children:i.all(e)};return i.patch(e,c),i.applyData(e,c)}function link$1(i,e){const o={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(o.title=e.title);const s={type:"element",tagName:"a",properties:o,children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function listItem$1(i,e,o){const s=i.all(e),a=o?listLoose(o):listItemLoose(e),c={},d=[];if(typeof e.checked=="boolean"){const _=s[0];let j;_&&_.type==="element"&&_.tagName==="p"?j=_:(j={type:"element",tagName:"p",properties:{},children:[]},s.unshift(j)),j.children.length>0&&j.children.unshift({type:"text",value:" "}),j.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),c.className=["task-list-item"]}let h=-1;for(;++h<s.length;){const _=s[h];(a||h!==0||_.type!=="element"||_.tagName!=="p")&&d.push({type:"text",value:`
`}),_.type==="element"&&_.tagName==="p"&&!a?d.push(..._.children):d.push(_)}const g=s[s.length-1];g&&(a||g.type!=="element"||g.tagName!=="p")&&d.push({type:"text",value:`
`});const b={type:"element",tagName:"li",properties:c,children:d};return i.patch(e,b),i.applyData(e,b)}function listLoose(i){let e=!1;if(i.type==="list"){e=i.spread||!1;const o=i.children;let s=-1;for(;!e&&++s<o.length;)e=listItemLoose(o[s])}return e}function listItemLoose(i){const e=i.spread;return e??i.children.length>1}function list$1(i,e){const o={},s=i.all(e);let a=-1;for(typeof e.start=="number"&&e.start!==1&&(o.start=e.start);++a<s.length;){const d=s[a];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){o.className=["contains-task-list"];break}}const c={type:"element",tagName:e.ordered?"ol":"ul",properties:o,children:i.wrap(s,!0)};return i.patch(e,c),i.applyData(e,c)}function paragraph$1(i,e){const o={type:"element",tagName:"p",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function root$1(i,e){const o={type:"root",children:i.wrap(i.all(e))};return i.patch(e,o),i.applyData(e,o)}function strong$1(i,e){const o={type:"element",tagName:"strong",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function table(i,e){const o=i.all(e),s=o.shift(),a=[];if(s){const d={type:"element",tagName:"thead",properties:{},children:i.wrap([s],!0)};i.patch(e.children[0],d),a.push(d)}if(o.length>0){const d={type:"element",tagName:"tbody",properties:{},children:i.wrap(o,!0)},h=pointStart(e.children[1]),g=pointEnd(e.children[e.children.length-1]);h&&g&&(d.position={start:h,end:g}),a.push(d)}const c={type:"element",tagName:"table",properties:{},children:i.wrap(a,!0)};return i.patch(e,c),i.applyData(e,c)}function tableRow(i,e,o){const s=o?o.children:void 0,c=(s?s.indexOf(e):1)===0?"th":"td",d=o&&o.type==="table"?o.align:void 0,h=d?d.length:e.children.length;let g=-1;const b=[];for(;++g<h;){const j=e.children[g],$={},_e=d?d[g]:void 0;_e&&($.align=_e);let et={type:"element",tagName:c,properties:$,children:[]};j&&(et.children=i.all(j),i.patch(j,et),et=i.applyData(j,et)),b.push(et)}const _={type:"element",tagName:"tr",properties:{},children:i.wrap(b,!0)};return i.patch(e,_),i.applyData(e,_)}function tableCell(i,e){const o={type:"element",tagName:"td",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}const tab=9,space=32;function trimLines(i){const e=String(i),o=/\r?\n|\r/g;let s=o.exec(e),a=0;const c=[];for(;s;)c.push(trimLine(e.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=o.exec(e);return c.push(trimLine(e.slice(a),a>0,!1)),c.join("")}function trimLine(i,e,o){let s=0,a=i.length;if(e){let c=i.codePointAt(s);for(;c===tab||c===space;)s++,c=i.codePointAt(s)}if(o){let c=i.codePointAt(a-1);for(;c===tab||c===space;)a--,c=i.codePointAt(a-1)}return a>s?i.slice(s,a):""}function text$2(i,e){const o={type:"text",value:trimLines(String(e.value))};return i.patch(e,o),i.applyData(e,o)}function thematicBreak$1(i,e){const o={type:"element",tagName:"hr",properties:{},children:[]};return i.patch(e,o),i.applyData(e,o)}const handlers={blockquote:blockquote$1,break:hardBreak$1,code:code$2,delete:strikethrough,emphasis:emphasis$1,footnoteReference:footnoteReference$1,heading:heading$1,html:html$1,imageReference:imageReference$1,image:image$1,inlineCode:inlineCode$1,linkReference:linkReference$1,link:link$1,listItem:listItem$1,list:list$1,paragraph:paragraph$1,root:root$1,strong:strong$1,table,tableCell,tableRow,text:text$2,thematicBreak:thematicBreak$1,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(i,e)=>{const o=(a,c)=>(i.set(c,a),a),s=a=>{if(i.has(a))return i.get(a);const[c,d]=e[a];switch(c){case PRIMITIVE:case VOID:return o(d,a);case ARRAY:{const h=o([],a);for(const g of d)h.push(s(g));return h}case OBJECT:{const h=o({},a);for(const[g,b]of d)h[s(g)]=s(b);return h}case DATE:return o(new Date(d),a);case REGEXP:{const{source:h,flags:g}=d;return o(new RegExp(h,g),a)}case MAP:{const h=o(new Map,a);for(const[g,b]of d)h.set(s(g),s(b));return h}case SET:{const h=o(new Set,a);for(const g of d)h.add(s(g));return h}case ERROR:{const{name:h,message:g}=d;return o(new env[h](g),a)}case BIGINT:return o(BigInt(d),a);case"BigInt":return o(Object(BigInt(d)),a)}return o(new env[c](d),a)};return s},deserialize=i=>deserializer(new Map,i)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=i=>{const e=typeof i;if(e!=="object"||!i)return[PRIMITIVE,e];const o=toString.call(i).slice(8,-1);switch(o){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY]}return o.includes("Array")?[ARRAY,o]:o.includes("Error")?[ERROR,o]:[OBJECT,o]},shouldSkip=([i,e])=>i===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(i,e,o,s)=>{const a=(d,h)=>{const g=s.push(d)-1;return o.set(h,g),g},c=d=>{if(o.has(d))return o.get(d);let[h,g]=typeOf(d);switch(h){case PRIMITIVE:{let _=d;switch(g){case"bigint":h=BIGINT,_=d.toString();break;case"function":case"symbol":if(i)throw new TypeError("unable to serialize "+g);_=null;break;case"undefined":return a([VOID],d)}return a([h,_],d)}case ARRAY:{if(g)return a([g,[...d]],d);const _=[],j=a([h,_],d);for(const $ of d)_.push(c($));return j}case OBJECT:{if(g)switch(g){case"BigInt":return a([g,d.toString()],d);case"Boolean":case"Number":case"String":return a([g,d.valueOf()],d)}if(e&&"toJSON"in d)return c(d.toJSON());const _=[],j=a([h,_],d);for(const $ of keys(d))(i||!shouldSkip(typeOf(d[$])))&&_.push([c($),c(d[$])]);return j}case DATE:return a([h,d.toISOString()],d);case REGEXP:{const{source:_,flags:j}=d;return a([h,{source:_,flags:j}],d)}case MAP:{const _=[],j=a([h,_],d);for(const[$,_e]of d)(i||!(shouldSkip(typeOf($))||shouldSkip(typeOf(_e))))&&_.push([c($),c(_e)]);return j}case SET:{const _=[],j=a([h,_],d);for(const $ of d)(i||!shouldSkip(typeOf($)))&&_.push(c($));return j}}const{message:b}=d;return a([h,{name:g,message:b}],d)};return c},serialize$1=(i,{json:e,lossy:o}={})=>{const s=[];return serializer(!(e||o),!!e,new Map,s)(i),s},structuredClone$1=typeof structuredClone=="function"?(i,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize$1(i,e)):structuredClone(i):(i,e)=>deserialize(serialize$1(i,e));function defaultFootnoteBackContent(i,e){const o=[{type:"text",value:""}];return e>1&&o.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),o}function defaultFootnoteBackLabel(i,e){return"Back to reference "+(i+1)+(e>1?"-"+e:"")}function footer(i){const e=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",o=i.options.footnoteBackContent||defaultFootnoteBackContent,s=i.options.footnoteBackLabel||defaultFootnoteBackLabel,a=i.options.footnoteLabel||"Footnotes",c=i.options.footnoteLabelTagName||"h2",d=i.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let g=-1;for(;++g<i.footnoteOrder.length;){const b=i.footnoteById.get(i.footnoteOrder[g]);if(!b)continue;const _=i.all(b),j=String(b.identifier).toUpperCase(),$=normalizeUri(j.toLowerCase());let _e=0;const et=[],rt=i.footnoteCounts.get(j);for(;rt!==void 0&&++_e<=rt;){et.length>0&&et.push({type:"text",value:" "});let nt=typeof o=="string"?o:o(g,_e);typeof nt=="string"&&(nt={type:"text",value:nt}),et.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+$+(_e>1?"-"+_e:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(g,_e),className:["data-footnote-backref"]},children:Array.isArray(nt)?nt:[nt]})}const lt=_[_.length-1];if(lt&&lt.type==="element"&&lt.tagName==="p"){const nt=lt.children[lt.children.length-1];nt&&nt.type==="text"?nt.value+=" ":lt.children.push({type:"text",value:" "}),lt.children.push(...et)}else _.push(...et);const tt={type:"element",tagName:"li",properties:{id:e+"fn-"+$},children:i.wrap(_,!0)};i.patch(b,tt),h.push(tt)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:c,properties:{...structuredClone$1(d),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(h,!0)},{type:"text",value:`
`}]}}const convert$1=function(i){if(i==null)return ok$1;if(typeof i=="function")return castFactory$1(i);if(typeof i=="object")return Array.isArray(i)?anyFactory$1(i):propsFactory$1(i);if(typeof i=="string")return typeFactory$1(i);throw new Error("Expected function, string, or object as test")};function anyFactory$1(i){const e=[];let o=-1;for(;++o<i.length;)e[o]=convert$1(i[o]);return castFactory$1(s);function s(...a){let c=-1;for(;++c<e.length;)if(e[c].apply(this,a))return!0;return!1}}function propsFactory$1(i){const e=i;return castFactory$1(o);function o(s){const a=s;let c;for(c in i)if(a[c]!==e[c])return!1;return!0}}function typeFactory$1(i){return castFactory$1(e);function e(o){return o&&o.type===i}}function castFactory$1(i){return e;function e(o,s,a){return!!(looksLikeANode(o)&&i.call(this,o,typeof s=="number"?s:void 0,a||void 0))}}function ok$1(){return!0}function looksLikeANode(i){return i!==null&&typeof i=="object"&&"type"in i}function color$1(i){return i}const empty=[],CONTINUE$1=!0,EXIT$1=!1,SKIP$1="skip";function visitParents$1(i,e,o,s){let a;typeof e=="function"&&typeof o!="function"?(s=o,o=e):a=e;const c=convert$1(a),d=s?-1:1;h(i,void 0,[])();function h(g,b,_){const j=g&&typeof g=="object"?g:{};if(typeof j.type=="string"){const _e=typeof j.tagName=="string"?j.tagName:typeof j.name=="string"?j.name:void 0;Object.defineProperty($,"name",{value:"node ("+(g.type+(_e?"<"+_e+">":""))+")"})}return $;function $(){let _e=empty,et,rt,lt;if((!e||c(g,b,_[_.length-1]||void 0))&&(_e=toResult$1(o(g,_)),_e[0]===EXIT$1))return _e;if("children"in g&&g.children){const tt=g;if(tt.children&&_e[0]!==SKIP$1)for(rt=(s?tt.children.length:-1)+d,lt=_.concat(tt);rt>-1&&rt<tt.children.length;){const nt=tt.children[rt];if(et=h(nt,rt,lt)(),et[0]===EXIT$1)return et;rt=typeof et[1]=="number"?et[1]:rt+d}}return _e}}}function toResult$1(i){return Array.isArray(i)?i:typeof i=="number"?[CONTINUE$1,i]:i==null?empty:[i]}function visit$1(i,e,o,s){let a,c,d;typeof e=="function"&&typeof o!="function"?(c=void 0,d=e,a=o):(c=e,d=o,a=s),visitParents$1(i,c,h,a);function h(g,b){const _=b[b.length-1],j=_?_.children.indexOf(g):void 0;return d(g,j,_)}}const own$1={}.hasOwnProperty,emptyOptions$1={};function createState(i,e){const o=e||emptyOptions$1,s=new Map,a=new Map,c=new Map,d={...handlers,...o.handlers},h={all:b,applyData,definitionById:s,footnoteById:a,footnoteCounts:c,footnoteOrder:[],handlers:d,one:g,options:o,patch,wrap:wrap$1};return visit$1(i,function(_){if(_.type==="definition"||_.type==="footnoteDefinition"){const j=_.type==="definition"?s:a,$=String(_.identifier).toUpperCase();j.has($)||j.set($,_)}}),h;function g(_,j){const $=_.type,_e=h.handlers[$];if(own$1.call(h.handlers,$)&&_e)return _e(h,_,j);if(h.options.passThrough&&h.options.passThrough.includes($)){if("children"in _){const{children:rt,...lt}=_,tt=structuredClone$1(lt);return tt.children=h.all(_),tt}return structuredClone$1(_)}return(h.options.unknownHandler||defaultUnknownHandler)(h,_,j)}function b(_){const j=[];if("children"in _){const $=_.children;let _e=-1;for(;++_e<$.length;){const et=h.one($[_e],_);if(et){if(_e&&$[_e-1].type==="break"&&(!Array.isArray(et)&&et.type==="text"&&(et.value=trimMarkdownSpaceStart(et.value)),!Array.isArray(et)&&et.type==="element")){const rt=et.children[0];rt&&rt.type==="text"&&(rt.value=trimMarkdownSpaceStart(rt.value))}Array.isArray(et)?j.push(...et):j.push(et)}}}return j}}function patch(i,e){i.position&&(e.position=position$1(i))}function applyData(i,e){let o=e;if(i&&i.data){const s=i.data.hName,a=i.data.hChildren,c=i.data.hProperties;if(typeof s=="string")if(o.type==="element")o.tagName=s;else{const d="children"in o?o.children:[o];o={type:"element",tagName:s,properties:{},children:d}}o.type==="element"&&c&&Object.assign(o.properties,structuredClone$1(c)),"children"in o&&o.children&&a!==null&&a!==void 0&&(o.children=a)}return o}function defaultUnknownHandler(i,e){const o=e.data||{},s="value"in e&&!(own$1.call(o,"hProperties")||own$1.call(o,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function wrap$1(i,e){const o=[];let s=-1;for(e&&o.push({type:"text",value:`
`});++s<i.length;)s&&o.push({type:"text",value:`
`}),o.push(i[s]);return e&&i.length>0&&o.push({type:"text",value:`
`}),o}function trimMarkdownSpaceStart(i){let e=0,o=i.charCodeAt(e);for(;o===9||o===32;)e++,o=i.charCodeAt(e);return i.slice(e)}function toHast(i,e){const o=createState(i,e),s=o.one(i,void 0),a=footer(o),c=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&c.children.push({type:"text",value:`
`},a),c}function remarkRehype(i,e){return i&&"run"in i?async function(o,s){const a=toHast(o,{file:s,...e});await i.run(a,s)}:function(o,s){return toHast(o,{file:s,...e||i})}}function bail(i){if(i)throw i}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function(e){return typeof Array.isArray=="function"?Array.isArray(e):toStr.call(e)==="[object Array]"},isPlainObject$1=function(e){if(!e||toStr.call(e)!=="[object Object]")return!1;var o=hasOwn.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&hasOwn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!s)return!1;var a;for(a in e);return typeof a>"u"||hasOwn.call(e,a)},setProperty=function(e,o){defineProperty&&o.name==="__proto__"?defineProperty(e,o.name,{enumerable:!0,configurable:!0,value:o.newValue,writable:!0}):e[o.name]=o.newValue},getProperty=function(e,o){if(o==="__proto__")if(hasOwn.call(e,o)){if(gOPD)return gOPD(e,o).value}else return;return e[o]},extend=function i(){var e,o,s,a,c,d,h=arguments[0],g=1,b=arguments.length,_=!1;for(typeof h=="boolean"&&(_=h,h=arguments[1]||{},g=2),(h==null||typeof h!="object"&&typeof h!="function")&&(h={});g<b;++g)if(e=arguments[g],e!=null)for(o in e)s=getProperty(h,o),a=getProperty(e,o),h!==a&&(_&&a&&(isPlainObject$1(a)||(c=isArray(a)))?(c?(c=!1,d=s&&isArray(s)?s:[]):d=s&&isPlainObject$1(s)?s:{},setProperty(h,{name:o,newValue:i(_,d,a)})):typeof a<"u"&&setProperty(h,{name:o,newValue:a}));return h};const extend$1=getDefaultExportFromCjs(extend);function isPlainObject(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function trough(){const i=[],e={run:o,use:s};return e;function o(...a){let c=-1;const d=a.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);h(null,...a);function h(g,...b){const _=i[++c];let j=-1;if(g){d(g);return}for(;++j<a.length;)(b[j]===null||b[j]===void 0)&&(b[j]=a[j]);a=b,_?wrap(_,h)(...b):d(null,...b)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return i.push(a),e}}function wrap(i,e){let o;return s;function s(...d){const h=i.length>d.length;let g;h&&d.push(a);try{g=i.apply(this,d)}catch(b){const _=b;if(h&&o)throw _;return a(_)}h||(g&&g.then&&typeof g.then=="function"?g.then(c,a):g instanceof Error?a(g):c(g))}function a(d,...h){o||(o=!0,e(d,...h))}function c(d){a(null,d)}}const path$1={basename,dirname,extname,join,sep:"/"};function basename(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(i);let o=0,s=-1,a=i.length,c;if(e===void 0||e.length===0||e.length>i.length){for(;a--;)if(i.codePointAt(a)===47){if(c){o=a+1;break}}else s<0&&(c=!0,s=a+1);return s<0?"":i.slice(o,s)}if(e===i)return"";let d=-1,h=e.length-1;for(;a--;)if(i.codePointAt(a)===47){if(c){o=a+1;break}}else d<0&&(c=!0,d=a+1),h>-1&&(i.codePointAt(a)===e.codePointAt(h--)?h<0&&(s=a):(h=-1,s=d));return o===s?s=d:s<0&&(s=i.length),i.slice(o,s)}function dirname(i){if(assertPath$1(i),i.length===0)return".";let e=-1,o=i.length,s;for(;--o;)if(i.codePointAt(o)===47){if(s){e=o;break}}else s||(s=!0);return e<0?i.codePointAt(0)===47?"/":".":e===1&&i.codePointAt(0)===47?"//":i.slice(0,e)}function extname(i){assertPath$1(i);let e=i.length,o=-1,s=0,a=-1,c=0,d;for(;e--;){const h=i.codePointAt(e);if(h===47){if(d){s=e+1;break}continue}o<0&&(d=!0,o=e+1),h===46?a<0?a=e:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||o<0||c===0||c===1&&a===o-1&&a===s+1?"":i.slice(a,o)}function join(...i){let e=-1,o;for(;++e<i.length;)assertPath$1(i[e]),i[e]&&(o=o===void 0?i[e]:o+"/"+i[e]);return o===void 0?".":normalize(o)}function normalize(i){assertPath$1(i);const e=i.codePointAt(0)===47;let o=normalizeString(i,!e);return o.length===0&&!e&&(o="."),o.length>0&&i.codePointAt(i.length-1)===47&&(o+="/"),e?"/"+o:o}function normalizeString(i,e){let o="",s=0,a=-1,c=0,d=-1,h,g;for(;++d<=i.length;){if(d<i.length)h=i.codePointAt(d);else{if(h===47)break;h=47}if(h===47){if(!(a===d-1||c===1))if(a!==d-1&&c===2){if(o.length<2||s!==2||o.codePointAt(o.length-1)!==46||o.codePointAt(o.length-2)!==46){if(o.length>2){if(g=o.lastIndexOf("/"),g!==o.length-1){g<0?(o="",s=0):(o=o.slice(0,g),s=o.length-1-o.lastIndexOf("/")),a=d,c=0;continue}}else if(o.length>0){o="",s=0,a=d,c=0;continue}}e&&(o=o.length>0?o+"/..":"..",s=2)}else o.length>0?o+="/"+i.slice(a+1,d):o=i.slice(a+1,d),s=d-a-1;a=d,c=0}else h===46&&c>-1?c++:c=-1}return o}function assertPath$1(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}const proc={cwd};function cwd(){return"/"}function isUrl(i){return!!(i!==null&&typeof i=="object"&&"href"in i&&i.href&&"protocol"in i&&i.protocol&&i.auth===void 0)}function urlToPath(i){if(typeof i=="string")i=new URL(i);else if(!isUrl(i)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+i+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(i.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(i)}function getPathFromURLPosix(i){if(i.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=i.pathname;let o=-1;for(;++o<e.length;)if(e.codePointAt(o)===37&&e.codePointAt(o+1)===50){const s=e.codePointAt(o+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let o;e?isUrl(e)?o={path:e}:typeof e=="string"||isUint8Array$1(e)?o={value:e}:o=e:o={},this.cwd=proc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<order.length;){const c=order[s];c in o&&o[c]!==void 0&&o[c]!==null&&(this[c]=c==="history"?[...o[c]]:o[c])}let a;for(a in o)order.includes(a)||(this[a]=o[a])}get basename(){return typeof this.path=="string"?path$1.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=path$1.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?path$1.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=path$1.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?path$1.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=path$1.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?path$1.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=path$1.join(this.dirname||"",e+(this.extname||""))}fail(e,o,s){const a=this.message(e,o,s);throw a.fatal=!0,a}info(e,o,s){const a=this.message(e,o,s);return a.fatal=void 0,a}message(e,o,s){const a=new VFileMessage(e,o,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(i,e){if(i&&i.includes(path$1.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+path$1.sep+"`")}function assertNonEmpty(i,e){if(!i)throw new Error("`"+e+"` cannot be empty")}function assertPath(i,e){if(!i)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const CallableInstance=function(i){const s=this.constructor.prototype,a=s[i],c=function(){return a.apply(c,arguments)};Object.setPrototypeOf(c,s);const d=Object.getOwnPropertyNames(a);for(const h of d){const g=Object.getOwnPropertyDescriptor(a,h);g&&Object.defineProperty(c,h,g)}return c},own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Processor;let o=-1;for(;++o<this.attachers.length;){const s=this.attachers[o];e.use(...s)}return e.data(extend$1(!0,{},this.namespace)),e}data(e,o){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=o,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[o,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=o.call(e,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const o=vfile(e),s=this.parser||this.Parser;return assertParser("parse",s),s(String(o),o)}process(e,o){const s=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),o?a(void 0,o):new Promise(a);function a(c,d){const h=vfile(e),g=s.parse(h);s.run(g,h,function(_,j,$){if(_||!j||!$)return b(_);const _e=j,et=s.stringify(_e,$);looksLikeAValue(et)?$.value=et:$.result=et,b(_,$)});function b(_,j){_||!j?d(_):c?c(j):o(void 0,j)}}}processSync(e){let o=!1,s;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,a),assertDone("processSync","process",o),s;function a(c,d){o=!0,bail(c),s=d}}run(e,o,s){assertNode(e),this.freeze();const a=this.transformers;return!s&&typeof o=="function"&&(s=o,o=void 0),s?c(void 0,s):new Promise(c);function c(d,h){const g=vfile(o);a.run(e,g,b);function b(_,j,$){const _e=j||e;_?h(_):d?d(_e):s(void 0,_e,$)}}}runSync(e,o){let s=!1,a;return this.run(e,o,c),assertDone("runSync","run",s),a;function c(d,h){bail(d),a=h,s=!0}}stringify(e,o){this.freeze();const s=vfile(o),a=this.compiler||this.Compiler;return assertCompiler("stringify",a),assertNode(e),a(e,s)}use(e,...o){const s=this.attachers,a=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")g(e,o);else if(typeof e=="object")Array.isArray(e)?h(e):d(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function c(b){if(typeof b=="function")g(b,[]);else if(typeof b=="object")if(Array.isArray(b)){const[_,...j]=b;g(_,j)}else d(b);else throw new TypeError("Expected usable value, not `"+b+"`")}function d(b){if(!("plugins"in b)&&!("settings"in b))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(b.plugins),b.settings&&(a.settings=extend$1(!0,a.settings,b.settings))}function h(b){let _=-1;if(b!=null)if(Array.isArray(b))for(;++_<b.length;){const j=b[_];c(j)}else throw new TypeError("Expected a list of plugins, not `"+b+"`")}function g(b,_){let j=-1,$=-1;for(;++j<s.length;)if(s[j][0]===b){$=j;break}if($===-1)s.push([b,..._]);else if(_.length>0){let[_e,...et]=_;const rt=s[$][1];isPlainObject(rt)&&isPlainObject(_e)&&(_e=extend$1(!0,rt,_e)),s[$]=[b,_e,...et]}}}}const unified=new Processor().freeze();function assertParser(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `parser`")}function assertCompiler(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `compiler`")}function assertUnfrozen(i,e){if(e)throw new Error("Cannot call `"+i+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(i){if(!isPlainObject(i)||typeof i.type!="string")throw new TypeError("Expected node, got `"+i+"`")}function assertDone(i,e,o){if(!o)throw new Error("`"+i+"` finished async. Use `"+e+"` instead")}function vfile(i){return looksLikeAVFile(i)?i:new VFile(i)}function looksLikeAVFile(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function looksLikeAValue(i){return typeof i=="string"||isUint8Array(i)}function isUint8Array(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(i){const e=i.allowedElements,o=i.allowElement,s=i.children||"",a=i.className,c=i.components,d=i.disallowedElements,h=i.rehypePlugins||emptyPlugins,g=i.remarkPlugins||emptyPlugins,b=i.remarkRehypeOptions?{...i.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions,_=i.skipHtml,j=i.unwrapDisallowed,$=i.urlTransform||defaultUrlTransform,_e=unified().use(remarkParse).use(g).use(remarkRehype,b).use(h),et=new VFile;typeof s=="string"&&(et.value=s);for(const nt of deprecations)Object.hasOwn(i,nt.from)&&(""+nt.from+(nt.to?"use `"+nt.to+"` instead":"remove it")+changelog+nt.id,void 0);const rt=_e.parse(et);let lt=_e.runSync(rt,et);return a&&(lt={type:"element",tagName:"div",properties:{className:a},children:lt.type==="root"?lt.children:[lt]}),visit$1(lt,tt),toJsxRuntime(lt,{Fragment:jsxRuntimeExports.Fragment,components:c,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function tt(nt,it,ft){if(nt.type==="raw"&&ft&&typeof it=="number")return _?ft.children.splice(it,1):ft.children[it]={type:"text",value:nt.value},it;if(nt.type==="element"){let st;for(st in urlAttributes)if(Object.hasOwn(urlAttributes,st)&&Object.hasOwn(nt.properties,st)){const at=nt.properties[st],Ct=urlAttributes[st];(Ct===null||Ct.includes(nt.tagName))&&(nt.properties[st]=$(String(at||""),st,nt))}}if(nt.type==="element"){let st=e?!e.includes(nt.tagName):d?d.includes(nt.tagName):!1;if(!st&&o&&typeof it=="number"&&(st=!o(nt,it,ft)),st&&ft&&typeof it=="number")return j&&nt.children?ft.children.splice(it,1,...nt.children):ft.children.splice(it,1),it}}}function defaultUrlTransform(i){const e=i.indexOf(":"),o=i.indexOf("?"),s=i.indexOf("#"),a=i.indexOf("/");return e<0||a>-1&&e>a||o>-1&&e>o||s>-1&&e>s||safeProtocol.test(i.slice(0,e))?i:""}function ccount(i,e){const o=String(i);if(typeof e!="string")throw new TypeError("Expected character");let s=0,a=o.indexOf(e);for(;a!==-1;)s++,a=o.indexOf(e,a+e.length);return s}function escapeStringRegexp(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace(i,e,o){const a=convert$1((o||{}).ignore||[]),c=toPairs(e);let d=-1;for(;++d<c.length;)visitParents$1(i,"text",h);function h(b,_){let j=-1,$;for(;++j<_.length;){const _e=_[j],et=$?$.children:void 0;if(a(_e,et?et.indexOf(_e):void 0,$))return;$=_e}if($)return g(b,_)}function g(b,_){const j=_[_.length-1],$=c[d][0],_e=c[d][1];let et=0;const lt=j.children.indexOf(b);let tt=!1,nt=[];$.lastIndex=0;let it=$.exec(b.value);for(;it;){const ft=it.index,st={index:it.index,input:it.input,stack:[..._,b]};let at=_e(...it,st);if(typeof at=="string"&&(at=at.length>0?{type:"text",value:at}:void 0),at===!1?$.lastIndex=ft+1:(et!==ft&&nt.push({type:"text",value:b.value.slice(et,ft)}),Array.isArray(at)?nt.push(...at):at&&nt.push(at),et=ft+it[0].length,tt=!0),!$.global)break;it=$.exec(b.value)}return tt?(et<b.value.length&&nt.push({type:"text",value:b.value.slice(et)}),j.children.splice(lt,1,...nt)):nt=[b],lt+nt.length}}function toPairs(i){const e=[];if(!Array.isArray(i))throw new TypeError("Expected find and replace tuple or list of tuples");const o=!i[0]||Array.isArray(i[0])?i:[i];let s=-1;for(;++s<o.length;){const a=o[s];e.push([toExpression(a[0]),toFunction(a[1])])}return e}function toExpression(i){return typeof i=="string"?new RegExp(escapeStringRegexp(i),"g"):i}function toFunction(i){return typeof i=="function"?i:function(){return i}}const inConstruct="phrasing",notInConstruct=["autolink","link","image","label"];function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct,notInConstruct}]}}function enterLiteralAutolink(i){this.enter({type:"link",title:null,url:"",children:[]},i)}function enterLiteralAutolinkValue(i){this.config.enter.autolinkProtocol.call(this,i)}function exitLiteralAutolinkHttp(i){this.config.exit.autolinkProtocol.call(this,i)}function exitLiteralAutolinkWww(i){this.config.exit.data.call(this,i);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(i)}function exitLiteralAutolinkEmail(i){this.config.exit.autolinkEmail.call(this,i)}function exitLiteralAutolink(i){this.exit(i)}function transformGfmAutolinkLiterals(i){findAndReplace(i,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,findEmail]],{ignore:["link","linkReference"]})}function findUrl(i,e,o,s,a){let c="";if(!previous(a)||(/^w/i.test(e)&&(o=e+o,e="",c="http://"),!isCorrectDomain(o)))return!1;const d=splitUrl(o+s);if(!d[0])return!1;const h={type:"link",title:null,url:c+e+d[0],children:[{type:"text",value:e+d[0]}]};return d[1]?[h,{type:"text",value:d[1]}]:h}function findEmail(i,e,o,s){return!previous(s,!0)||/[-\d_]$/.test(o)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+o,children:[{type:"text",value:e+"@"+o}]}}function isCorrectDomain(i){const e=i.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function splitUrl(i){const e=/[!"&'),.:;<>?\]}]+$/.exec(i);if(!e)return[i,void 0];i=i.slice(0,e.index);let o=e[0],s=o.indexOf(")");const a=ccount(i,"(");let c=ccount(i,")");for(;s!==-1&&a>c;)i+=o.slice(0,s+1),o=o.slice(s+1),s=o.indexOf(")"),c++;return[i,o]}function previous(i,e){const o=i.input.charCodeAt(i.index-1);return(i.index===0||unicodeWhitespace(o)||unicodePunctuation(o))&&(!e||o!==47)}footnoteReference.peek=footnoteReferencePeek;function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteDefinition:enterFootnoteDefinition,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteCallString:enterFootnoteCallString},exit:{gfmFootnoteDefinition:exitFootnoteDefinition,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteCallString:exitFootnoteCallString}}}function gfmFootnoteToMarkdown(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition,footnoteReference}}}function enterFootnoteDefinition(i){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},i)}function enterFootnoteDefinitionLabelString(){this.buffer()}function exitFootnoteDefinitionLabelString(i){const e=this.resume(),o=this.stack[this.stack.length-1];o.type,o.label=e,o.identifier=normalizeIdentifier(this.sliceSerialize(i)).toLowerCase()}function exitFootnoteDefinition(i){this.exit(i)}function enterFootnoteCall(i){this.enter({type:"footnoteReference",identifier:"",label:""},i)}function enterFootnoteCallString(){this.buffer()}function exitFootnoteCallString(i){const e=this.resume(),o=this.stack[this.stack.length-1];o.type,o.label=e,o.identifier=normalizeIdentifier(this.sliceSerialize(i)).toLowerCase()}function exitFootnoteCall(i){this.exit(i)}function footnoteReference(i,e,o,s){const a=o.createTracker(s);let c=a.move("[^");const d=o.enter("footnoteReference"),h=o.enter("reference");return c+=a.move(o.safe(o.associationId(i),{...a.current(),before:c,after:"]"})),h(),d(),c+=a.move("]"),c}function footnoteReferencePeek(){return"["}function footnoteDefinition(i,e,o,s){const a=o.createTracker(s);let c=a.move("[^");const d=o.enter("footnoteDefinition"),h=o.enter("label");return c+=a.move(o.safe(o.associationId(i),{...a.current(),before:c,after:"]"})),h(),c+=a.move("]:"+(i.children&&i.children.length>0?" ":"")),a.shift(4),c+=a.move(o.indentLines(o.containerFlow(i,a.current()),map$2)),d(),c}function map$2(i,e,o){return e===0?i:(o?"":"    ")+i}const constructsWithoutStrikethrough=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];handleDelete.peek=peekDelete;function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(i){this.enter({type:"delete",children:[]},i)}function exitStrikethrough(i){this.exit(i)}function handleDelete(i,e,o,s){const a=o.createTracker(s),c=o.enter("strikethrough");let d=a.move("~~");return d+=o.containerPhrasing(i,{...a.current(),before:d,after:"~"}),d+=a.move("~~"),c(),d}function peekDelete(){return"~"}function markdownTable(i,e={}){const o=(e.align||[]).concat(),s=e.stringLength||defaultStringLength,a=[],c=[],d=[],h=[];let g=0,b=-1;for(;++b<i.length;){const et=[],rt=[];let lt=-1;for(i[b].length>g&&(g=i[b].length);++lt<i[b].length;){const tt=serialize(i[b][lt]);if(e.alignDelimiters!==!1){const nt=s(tt);rt[lt]=nt,(h[lt]===void 0||nt>h[lt])&&(h[lt]=nt)}et.push(tt)}c[b]=et,d[b]=rt}let _=-1;if(typeof o=="object"&&"length"in o)for(;++_<g;)a[_]=toAlignment(o[_]);else{const et=toAlignment(o);for(;++_<g;)a[_]=et}_=-1;const j=[],$=[];for(;++_<g;){const et=a[_];let rt="",lt="";et===99?(rt=":",lt=":"):et===108?rt=":":et===114&&(lt=":");let tt=e.alignDelimiters===!1?1:Math.max(1,h[_]-rt.length-lt.length);const nt=rt+"-".repeat(tt)+lt;e.alignDelimiters!==!1&&(tt=rt.length+tt+lt.length,tt>h[_]&&(h[_]=tt),$[_]=tt),j[_]=nt}c.splice(1,0,j),d.splice(1,0,$),b=-1;const _e=[];for(;++b<c.length;){const et=c[b],rt=d[b];_=-1;const lt=[];for(;++_<g;){const tt=et[_]||"";let nt="",it="";if(e.alignDelimiters!==!1){const ft=h[_]-(rt[_]||0),st=a[_];st===114?nt=" ".repeat(ft):st===99?ft%2?(nt=" ".repeat(ft/2+.5),it=" ".repeat(ft/2-.5)):(nt=" ".repeat(ft/2),it=nt):it=" ".repeat(ft)}e.delimiterStart!==!1&&!_&&lt.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&tt==="")&&(e.delimiterStart!==!1||_)&&lt.push(" "),e.alignDelimiters!==!1&&lt.push(nt),lt.push(tt),e.alignDelimiters!==!1&&lt.push(it),e.padding!==!1&&lt.push(" "),(e.delimiterEnd!==!1||_!==g-1)&&lt.push("|")}_e.push(e.delimiterEnd===!1?lt.join("").replace(/ +$/,""):lt.join(""))}return _e.join(`
`)}function serialize(i){return i==null?"":String(i)}function defaultStringLength(i){return i.length}function toAlignment(i){const e=typeof i=="string"?i.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function blockquote(i,e,o,s){const a=o.enter("blockquote"),c=o.createTracker(s);c.move("> "),c.shift(2);const d=o.indentLines(o.containerFlow(i,c.current()),map$1);return a(),d}function map$1(i,e,o){return">"+(o?"":" ")+i}function patternInScope(i,e){return listInScope(i,e.inConstruct,!0)&&!listInScope(i,e.notInConstruct,!1)}function listInScope(i,e,o){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return o;let s=-1;for(;++s<e.length;)if(i.includes(e[s]))return!0;return!1}function hardBreak(i,e,o,s){let a=-1;for(;++a<o.unsafe.length;)if(o.unsafe[a].character===`
`&&patternInScope(o.stack,o.unsafe[a]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function longestStreak(i,e){const o=String(i);let s=o.indexOf(e),a=s,c=0,d=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===a?++c>d&&(d=c):c=1,a=s+e.length,s=o.indexOf(e,a);return d}function formatCodeAsIndented(i,e){return!!(e.options.fences===!1&&i.value&&!i.lang&&/[^ \r\n]/.test(i.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(i.value))}function checkFence(i){const e=i.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function code$1(i,e,o,s){const a=checkFence(o),c=i.value||"",d=a==="`"?"GraveAccent":"Tilde";if(formatCodeAsIndented(i,o)){const j=o.enter("codeIndented"),$=o.indentLines(c,map);return j(),$}const h=o.createTracker(s),g=a.repeat(Math.max(longestStreak(c,a)+1,3)),b=o.enter("codeFenced");let _=h.move(g);if(i.lang){const j=o.enter(`codeFencedLang${d}`);_+=h.move(o.safe(i.lang,{before:_,after:" ",encode:["`"],...h.current()})),j()}if(i.lang&&i.meta){const j=o.enter(`codeFencedMeta${d}`);_+=h.move(" "),_+=h.move(o.safe(i.meta,{before:_,after:`
`,encode:["`"],...h.current()})),j()}return _+=h.move(`
`),c&&(_+=h.move(c+`
`)),_+=h.move(g),b(),_}function map(i,e,o){return(o?"":"    ")+i}function checkQuote(i){const e=i.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function definition(i,e,o,s){const a=checkQuote(o),c=a==='"'?"Quote":"Apostrophe",d=o.enter("definition");let h=o.enter("label");const g=o.createTracker(s);let b=g.move("[");return b+=g.move(o.safe(o.associationId(i),{before:b,after:"]",...g.current()})),b+=g.move("]: "),h(),!i.url||/[\0- \u007F]/.test(i.url)?(h=o.enter("destinationLiteral"),b+=g.move("<"),b+=g.move(o.safe(i.url,{before:b,after:">",...g.current()})),b+=g.move(">")):(h=o.enter("destinationRaw"),b+=g.move(o.safe(i.url,{before:b,after:i.title?" ":`
`,...g.current()}))),h(),i.title&&(h=o.enter(`title${c}`),b+=g.move(" "+a),b+=g.move(o.safe(i.title,{before:b,after:a,...g.current()})),b+=g.move(a),h()),d(),b}function checkEmphasis(i){const e=i.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}emphasis.peek=emphasisPeek;function emphasis(i,e,o,s){const a=checkEmphasis(o),c=o.enter("emphasis"),d=o.createTracker(s);let h=d.move(a);return h+=d.move(o.containerPhrasing(i,{before:h,after:a,...d.current()})),h+=d.move(a),c(),h}function emphasisPeek(i,e,o){return o.options.emphasis||"*"}function formatHeadingAsSetext(i,e){let o=!1;return visit$1(i,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return o=!0,EXIT$1}),!!((!i.depth||i.depth<3)&&toString$1(i)&&(e.options.setext||o))}function heading(i,e,o,s){const a=Math.max(Math.min(6,i.depth||1),1),c=o.createTracker(s);if(formatHeadingAsSetext(i,o)){const _=o.enter("headingSetext"),j=o.enter("phrasing"),$=o.containerPhrasing(i,{...c.current(),before:`
`,after:`
`});return j(),_(),$+`
`+(a===1?"=":"-").repeat($.length-(Math.max($.lastIndexOf("\r"),$.lastIndexOf(`
`))+1))}const d="#".repeat(a),h=o.enter("headingAtx"),g=o.enter("phrasing");c.move(d+" ");let b=o.containerPhrasing(i,{before:"# ",after:`
`,...c.current()});return/^[\t ]/.test(b)&&(b="&#x"+b.charCodeAt(0).toString(16).toUpperCase()+";"+b.slice(1)),b=b?d+" "+b:d,o.options.closeAtx&&(b+=" "+d),g(),h(),b}html.peek=htmlPeek;function html(i){return i.value||""}function htmlPeek(){return"<"}image.peek=imagePeek;function image(i,e,o,s){const a=checkQuote(o),c=a==='"'?"Quote":"Apostrophe",d=o.enter("image");let h=o.enter("label");const g=o.createTracker(s);let b=g.move("![");return b+=g.move(o.safe(i.alt,{before:b,after:"]",...g.current()})),b+=g.move("]("),h(),!i.url&&i.title||/[\0- \u007F]/.test(i.url)?(h=o.enter("destinationLiteral"),b+=g.move("<"),b+=g.move(o.safe(i.url,{before:b,after:">",...g.current()})),b+=g.move(">")):(h=o.enter("destinationRaw"),b+=g.move(o.safe(i.url,{before:b,after:i.title?" ":")",...g.current()}))),h(),i.title&&(h=o.enter(`title${c}`),b+=g.move(" "+a),b+=g.move(o.safe(i.title,{before:b,after:a,...g.current()})),b+=g.move(a),h()),b+=g.move(")"),d(),b}function imagePeek(){return"!"}imageReference.peek=imageReferencePeek;function imageReference(i,e,o,s){const a=i.referenceType,c=o.enter("imageReference");let d=o.enter("label");const h=o.createTracker(s);let g=h.move("![");const b=o.safe(i.alt,{before:g,after:"]",...h.current()});g+=h.move(b+"]["),d();const _=o.stack;o.stack=[],d=o.enter("reference");const j=o.safe(o.associationId(i),{before:g,after:"]",...h.current()});return d(),o.stack=_,c(),a==="full"||!b||b!==j?g+=h.move(j+"]"):a==="shortcut"?g=g.slice(0,-1):g+=h.move("]"),g}function imageReferencePeek(){return"!"}inlineCode.peek=inlineCodePeek;function inlineCode(i,e,o){let s=i.value||"",a="`",c=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(s);)a+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++c<o.unsafe.length;){const d=o.unsafe[c],h=o.compilePattern(d);let g;if(d.atBreak)for(;g=h.exec(s);){let b=g.index;s.charCodeAt(b)===10&&s.charCodeAt(b-1)===13&&b--,s=s.slice(0,b)+" "+s.slice(g.index+1)}}return a+s+a}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(i,e){const o=toString$1(i);return!!(!e.options.resourceLink&&i.url&&!i.title&&i.children&&i.children.length===1&&i.children[0].type==="text"&&(o===i.url||"mailto:"+o===i.url)&&/^[a-z][a-z+.-]+:/i.test(i.url)&&!/[\0- <>\u007F]/.test(i.url))}link.peek=linkPeek;function link(i,e,o,s){const a=checkQuote(o),c=a==='"'?"Quote":"Apostrophe",d=o.createTracker(s);let h,g;if(formatLinkAsAutolink(i,o)){const _=o.stack;o.stack=[],h=o.enter("autolink");let j=d.move("<");return j+=d.move(o.containerPhrasing(i,{before:j,after:">",...d.current()})),j+=d.move(">"),h(),o.stack=_,j}h=o.enter("link"),g=o.enter("label");let b=d.move("[");return b+=d.move(o.containerPhrasing(i,{before:b,after:"](",...d.current()})),b+=d.move("]("),g(),!i.url&&i.title||/[\0- \u007F]/.test(i.url)?(g=o.enter("destinationLiteral"),b+=d.move("<"),b+=d.move(o.safe(i.url,{before:b,after:">",...d.current()})),b+=d.move(">")):(g=o.enter("destinationRaw"),b+=d.move(o.safe(i.url,{before:b,after:i.title?" ":")",...d.current()}))),g(),i.title&&(g=o.enter(`title${c}`),b+=d.move(" "+a),b+=d.move(o.safe(i.title,{before:b,after:a,...d.current()})),b+=d.move(a),g()),b+=d.move(")"),h(),b}function linkPeek(i,e,o){return formatLinkAsAutolink(i,o)?"<":"["}linkReference.peek=linkReferencePeek;function linkReference(i,e,o,s){const a=i.referenceType,c=o.enter("linkReference");let d=o.enter("label");const h=o.createTracker(s);let g=h.move("[");const b=o.containerPhrasing(i,{before:g,after:"]",...h.current()});g+=h.move(b+"]["),d();const _=o.stack;o.stack=[],d=o.enter("reference");const j=o.safe(o.associationId(i),{before:g,after:"]",...h.current()});return d(),o.stack=_,c(),a==="full"||!b||b!==j?g+=h.move(j+"]"):a==="shortcut"?g=g.slice(0,-1):g+=h.move("]"),g}function linkReferencePeek(){return"["}function checkBullet(i){const e=i.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function checkBulletOther(i){const e=checkBullet(i),o=i.options.bulletOther;if(!o)return e==="*"?"-":"*";if(o!=="*"&&o!=="+"&&o!=="-")throw new Error("Cannot serialize items with `"+o+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(o===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+o+"`) to be different");return o}function checkBulletOrdered(i){const e=i.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function checkRule(i){const e=i.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function list(i,e,o,s){const a=o.enter("list"),c=o.bulletCurrent;let d=i.ordered?checkBulletOrdered(o):checkBullet(o);const h=i.ordered?d==="."?")":".":checkBulletOther(o);let g=e&&o.bulletLastUsed?d===o.bulletLastUsed:!1;if(!i.ordered){const _=i.children?i.children[0]:void 0;if((d==="*"||d==="-")&&_&&(!_.children||!_.children[0])&&o.stack[o.stack.length-1]==="list"&&o.stack[o.stack.length-2]==="listItem"&&o.stack[o.stack.length-3]==="list"&&o.stack[o.stack.length-4]==="listItem"&&o.indexStack[o.indexStack.length-1]===0&&o.indexStack[o.indexStack.length-2]===0&&o.indexStack[o.indexStack.length-3]===0&&(g=!0),checkRule(o)===d&&_){let j=-1;for(;++j<i.children.length;){const $=i.children[j];if($&&$.type==="listItem"&&$.children&&$.children[0]&&$.children[0].type==="thematicBreak"){g=!0;break}}}}g&&(d=h),o.bulletCurrent=d;const b=o.containerFlow(i,s);return o.bulletLastUsed=d,o.bulletCurrent=c,a(),b}function checkListItemIndent(i){const e=i.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function listItem(i,e,o,s){const a=checkListItemIndent(o);let c=o.bulletCurrent||checkBullet(o);e&&e.type==="list"&&e.ordered&&(c=(typeof e.start=="number"&&e.start>-1?e.start:1)+(o.options.incrementListMarker===!1?0:e.children.indexOf(i))+c);let d=c.length+1;(a==="tab"||a==="mixed"&&(e&&e.type==="list"&&e.spread||i.spread))&&(d=Math.ceil(d/4)*4);const h=o.createTracker(s);h.move(c+" ".repeat(d-c.length)),h.shift(d);const g=o.enter("listItem"),b=o.indentLines(o.containerFlow(i,h.current()),_);return g(),b;function _(j,$,_e){return $?(_e?"":" ".repeat(d))+j:(_e?c:c+" ".repeat(d-c.length))+j}}function paragraph(i,e,o,s){const a=o.enter("paragraph"),c=o.enter("phrasing"),d=o.containerPhrasing(i,s);return c(),a(),d}const phrasing=convert$1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function root(i,e,o,s){return(i.children.some(function(d){return phrasing(d)})?o.containerPhrasing:o.containerFlow).call(o,i,s)}function checkStrong(i){const e=i.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}strong.peek=strongPeek;function strong(i,e,o,s){const a=checkStrong(o),c=o.enter("strong"),d=o.createTracker(s);let h=d.move(a+a);return h+=d.move(o.containerPhrasing(i,{before:h,after:a,...d.current()})),h+=d.move(a+a),c(),h}function strongPeek(i,e,o){return o.options.strong||"*"}function text$1(i,e,o,s){return o.safe(i.value,s)}function checkRuleRepetition(i){const e=i.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function thematicBreak(i,e,o){const s=(checkRule(o)+(o.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(o));return o.options.ruleSpaces?s.slice(0,-1):s}const handle={blockquote,break:hardBreak,code:code$1,definition,emphasis,hardBreak,heading,html,image,imageReference,inlineCode,link,linkReference,list,listItem,paragraph,root,strong,text:text$1,thematicBreak};function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}}}function enterTable(i){const e=i._align;this.enter({type:"table",align:e.map(function(o){return o==="none"?null:o}),children:[]},i),this.data.inTable=!0}function exitTable(i){this.exit(i),this.data.inTable=void 0}function enterRow(i){this.enter({type:"tableRow",children:[]},i)}function exit(i){this.exit(i)}function enterCell(i){this.enter({type:"tableCell",children:[]},i)}function exitCodeText(i){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,replace));const o=this.stack[this.stack.length-1];o.type,o.value=e,this.exit(i)}function replace(i,e){return e==="|"?e:i}function gfmTableToMarkdown(i){const e=i||{},o=e.tableCellPadding,s=e.tablePipeAlign,a=e.stringLength,c=o?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:$,table:d,tableCell:g,tableRow:h}};function d(_e,et,rt,lt){return b(_(_e,rt,lt),_e.align)}function h(_e,et,rt,lt){const tt=j(_e,rt,lt),nt=b([tt]);return nt.slice(0,nt.indexOf(`
`))}function g(_e,et,rt,lt){const tt=rt.enter("tableCell"),nt=rt.enter("phrasing"),it=rt.containerPhrasing(_e,{...lt,before:c,after:c});return nt(),tt(),it}function b(_e,et){return markdownTable(_e,{align:et,alignDelimiters:s,padding:o,stringLength:a})}function _(_e,et,rt){const lt=_e.children;let tt=-1;const nt=[],it=et.enter("table");for(;++tt<lt.length;)nt[tt]=j(lt[tt],et,rt);return it(),nt}function j(_e,et,rt){const lt=_e.children;let tt=-1;const nt=[],it=et.enter("tableRow");for(;++tt<lt.length;)nt[tt]=g(lt[tt],_e,et,rt);return it(),nt}function $(_e,et,rt){let lt=handle.inlineCode(_e,et,rt);return rt.stack.includes("tableCell")&&(lt=lt.replace(/\|/g,"\\$&")),lt}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(i){const e=this.stack[this.stack.length-2];e.type,e.checked=i.type==="taskListCheckValueChecked"}function exitParagraphWithTaskListItem(i){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const o=this.stack[this.stack.length-1];o.type;const s=o.children[0];if(s&&s.type==="text"){const a=e.children;let c=-1,d;for(;++c<a.length;){const h=a[c];if(h.type==="paragraph"){d=h;break}}d===o&&(s.value=s.value.slice(1),s.value.length===0?o.children.shift():o.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,o.position.start=Object.assign({},s.position.start)))}}this.exit(i)}function listItemWithTaskListItem(i,e,o,s){const a=i.children[0],c=typeof i.checked=="boolean"&&a&&a.type==="paragraph",d="["+(i.checked?"x":" ")+"] ",h=o.createTracker(s);c&&h.move(d);let g=handle.listItem(i,e,o,{...s,...h.current()});return c&&(g=g.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,b)),g;function b(_){return _+d}}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(i){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(i),gfmTaskListItemToMarkdown()]}}const wwwPrefix={tokenize:tokenizeWwwPrefix,partial:!0},domain={tokenize:tokenizeDomain,partial:!0},path={tokenize:tokenizePath,partial:!0},trail={tokenize:tokenizeTrail,partial:!0},emailDomainDotTrail={tokenize:tokenizeEmailDomainDotTrail,partial:!0},wwwAutolink={tokenize:tokenizeWwwAutolink,previous:previousWww},protocolAutolink={tokenize:tokenizeProtocolAutolink,previous:previousProtocol},emailAutolink={tokenize:tokenizeEmailAutolink,previous:previousEmail},text={};function gfmAutolinkLiteral(){return{text}}let code=48;for(;code<123;)text[code]=emailAutolink,code++,code===58?code=65:code===91&&(code=97);text[43]=emailAutolink;text[45]=emailAutolink;text[46]=emailAutolink;text[95]=emailAutolink;text[72]=[emailAutolink,protocolAutolink];text[104]=[emailAutolink,protocolAutolink];text[87]=[emailAutolink,wwwAutolink];text[119]=[emailAutolink,wwwAutolink];function tokenizeEmailAutolink(i,e,o){const s=this;let a,c;return d;function d(j){return!gfmAtext(j)||!previousEmail.call(s,s.previous)||previousUnbalanced(s.events)?o(j):(i.enter("literalAutolink"),i.enter("literalAutolinkEmail"),h(j))}function h(j){return gfmAtext(j)?(i.consume(j),h):j===64?(i.consume(j),g):o(j)}function g(j){return j===46?i.check(emailDomainDotTrail,_,b)(j):j===45||j===95||asciiAlphanumeric(j)?(c=!0,i.consume(j),g):_(j)}function b(j){return i.consume(j),a=!0,g}function _(j){return c&&a&&asciiAlpha(s.previous)?(i.exit("literalAutolinkEmail"),i.exit("literalAutolink"),e(j)):o(j)}}function tokenizeWwwAutolink(i,e,o){const s=this;return a;function a(d){return d!==87&&d!==119||!previousWww.call(s,s.previous)||previousUnbalanced(s.events)?o(d):(i.enter("literalAutolink"),i.enter("literalAutolinkWww"),i.check(wwwPrefix,i.attempt(domain,i.attempt(path,c),o),o)(d))}function c(d){return i.exit("literalAutolinkWww"),i.exit("literalAutolink"),e(d)}}function tokenizeProtocolAutolink(i,e,o){const s=this;let a="",c=!1;return d;function d(j){return(j===72||j===104)&&previousProtocol.call(s,s.previous)&&!previousUnbalanced(s.events)?(i.enter("literalAutolink"),i.enter("literalAutolinkHttp"),a+=String.fromCodePoint(j),i.consume(j),h):o(j)}function h(j){if(asciiAlpha(j)&&a.length<5)return a+=String.fromCodePoint(j),i.consume(j),h;if(j===58){const $=a.toLowerCase();if($==="http"||$==="https")return i.consume(j),g}return o(j)}function g(j){return j===47?(i.consume(j),c?b:(c=!0,g)):o(j)}function b(j){return j===null||asciiControl(j)||markdownLineEndingOrSpace(j)||unicodeWhitespace(j)||unicodePunctuation(j)?o(j):i.attempt(domain,i.attempt(path,_),o)(j)}function _(j){return i.exit("literalAutolinkHttp"),i.exit("literalAutolink"),e(j)}}function tokenizeWwwPrefix(i,e,o){let s=0;return a;function a(d){return(d===87||d===119)&&s<3?(s++,i.consume(d),a):d===46&&s===3?(i.consume(d),c):o(d)}function c(d){return d===null?o(d):e(d)}}function tokenizeDomain(i,e,o){let s,a,c;return d;function d(b){return b===46||b===95?i.check(trail,g,h)(b):b===null||markdownLineEndingOrSpace(b)||unicodeWhitespace(b)||b!==45&&unicodePunctuation(b)?g(b):(c=!0,i.consume(b),d)}function h(b){return b===95?s=!0:(a=s,s=void 0),i.consume(b),d}function g(b){return a||s||!c?o(b):e(b)}}function tokenizePath(i,e){let o=0,s=0;return a;function a(d){return d===40?(o++,i.consume(d),a):d===41&&s<o?c(d):d===33||d===34||d===38||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===60||d===63||d===93||d===95||d===126?i.check(trail,e,c)(d):d===null||markdownLineEndingOrSpace(d)||unicodeWhitespace(d)?e(d):(i.consume(d),a)}function c(d){return d===41&&s++,i.consume(d),a}}function tokenizeTrail(i,e,o){return s;function s(h){return h===33||h===34||h===39||h===41||h===42||h===44||h===46||h===58||h===59||h===63||h===95||h===126?(i.consume(h),s):h===38?(i.consume(h),c):h===93?(i.consume(h),a):h===60||h===null||markdownLineEndingOrSpace(h)||unicodeWhitespace(h)?e(h):o(h)}function a(h){return h===null||h===40||h===91||markdownLineEndingOrSpace(h)||unicodeWhitespace(h)?e(h):s(h)}function c(h){return asciiAlpha(h)?d(h):o(h)}function d(h){return h===59?(i.consume(h),s):asciiAlpha(h)?(i.consume(h),d):o(h)}}function tokenizeEmailDomainDotTrail(i,e,o){return s;function s(c){return i.consume(c),a}function a(c){return asciiAlphanumeric(c)?o(c):e(c)}}function previousWww(i){return i===null||i===40||i===42||i===95||i===91||i===93||i===126||markdownLineEndingOrSpace(i)}function previousProtocol(i){return!asciiAlpha(i)}function previousEmail(i){return!(i===47||gfmAtext(i))}function gfmAtext(i){return i===43||i===45||i===46||i===95||asciiAlphanumeric(i)}function previousUnbalanced(i){let e=i.length,o=!1;for(;e--;){const s=i[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){o=!0;break}if(s._gfmAutolinkLiteralWalkedInto){o=!1;break}}return i.length>0&&!o&&(i[i.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),o}const indent={tokenize:tokenizeIndent,partial:!0};function gfmFootnote(){return{document:{91:{tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{tokenize:tokenizeGfmFootnoteCall},93:{add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(i,e,o){const s=this;let a=s.events.length;const c=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let d;for(;a--;){const g=s.events[a][1];if(g.type==="labelImage"){d=g;break}if(g.type==="gfmFootnoteCall"||g.type==="labelLink"||g.type==="label"||g.type==="image"||g.type==="link")break}return h;function h(g){if(!d||!d._balanced)return o(g);const b=normalizeIdentifier(s.sliceSerialize({start:d.end,end:s.now()}));return b.codePointAt(0)!==94||!c.includes(b.slice(1))?o(g):(i.enter("gfmFootnoteCallLabelMarker"),i.consume(g),i.exit("gfmFootnoteCallLabelMarker"),e(g))}}function resolveToPotentialGfmFootnoteCall(i,e){let o=i.length;for(;o--;)if(i[o][1].type==="labelImage"&&i[o][0]==="enter"){i[o][1];break}i[o+1][1].type="data",i[o+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},i[o+3][1].start),end:Object.assign({},i[i.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},i[o+3][1].end),end:Object.assign({},i[o+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const c={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},i[i.length-1][1].start)},d={type:"chunkString",contentType:"string",start:Object.assign({},c.start),end:Object.assign({},c.end)},h=[i[o+1],i[o+2],["enter",s,e],i[o+3],i[o+4],["enter",a,e],["exit",a,e],["enter",c,e],["enter",d,e],["exit",d,e],["exit",c,e],i[i.length-2],i[i.length-1],["exit",s,e]];return i.splice(o,i.length-o+1,...h),i}function tokenizeGfmFootnoteCall(i,e,o){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let c=0,d;return h;function h(j){return i.enter("gfmFootnoteCall"),i.enter("gfmFootnoteCallLabelMarker"),i.consume(j),i.exit("gfmFootnoteCallLabelMarker"),g}function g(j){return j!==94?o(j):(i.enter("gfmFootnoteCallMarker"),i.consume(j),i.exit("gfmFootnoteCallMarker"),i.enter("gfmFootnoteCallString"),i.enter("chunkString").contentType="string",b)}function b(j){if(c>999||j===93&&!d||j===null||j===91||markdownLineEndingOrSpace(j))return o(j);if(j===93){i.exit("chunkString");const $=i.exit("gfmFootnoteCallString");return a.includes(normalizeIdentifier(s.sliceSerialize($)))?(i.enter("gfmFootnoteCallLabelMarker"),i.consume(j),i.exit("gfmFootnoteCallLabelMarker"),i.exit("gfmFootnoteCall"),e):o(j)}return markdownLineEndingOrSpace(j)||(d=!0),c++,i.consume(j),j===92?_:b}function _(j){return j===91||j===92||j===93?(i.consume(j),c++,b):b(j)}}function tokenizeDefinitionStart(i,e,o){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let c,d=0,h;return g;function g(et){return i.enter("gfmFootnoteDefinition")._container=!0,i.enter("gfmFootnoteDefinitionLabel"),i.enter("gfmFootnoteDefinitionLabelMarker"),i.consume(et),i.exit("gfmFootnoteDefinitionLabelMarker"),b}function b(et){return et===94?(i.enter("gfmFootnoteDefinitionMarker"),i.consume(et),i.exit("gfmFootnoteDefinitionMarker"),i.enter("gfmFootnoteDefinitionLabelString"),i.enter("chunkString").contentType="string",_):o(et)}function _(et){if(d>999||et===93&&!h||et===null||et===91||markdownLineEndingOrSpace(et))return o(et);if(et===93){i.exit("chunkString");const rt=i.exit("gfmFootnoteDefinitionLabelString");return c=normalizeIdentifier(s.sliceSerialize(rt)),i.enter("gfmFootnoteDefinitionLabelMarker"),i.consume(et),i.exit("gfmFootnoteDefinitionLabelMarker"),i.exit("gfmFootnoteDefinitionLabel"),$}return markdownLineEndingOrSpace(et)||(h=!0),d++,i.consume(et),et===92?j:_}function j(et){return et===91||et===92||et===93?(i.consume(et),d++,_):_(et)}function $(et){return et===58?(i.enter("definitionMarker"),i.consume(et),i.exit("definitionMarker"),a.includes(c)||a.push(c),factorySpace(i,_e,"gfmFootnoteDefinitionWhitespace")):o(et)}function _e(et){return e(et)}}function tokenizeDefinitionContinuation(i,e,o){return i.check(blankLine,e,i.attempt(indent,e,o))}function gfmFootnoteDefinitionEnd(i){i.exit("gfmFootnoteDefinition")}function tokenizeIndent(i,e,o){const s=this;return factorySpace(i,a,"gfmFootnoteDefinitionIndent",5);function a(c){const d=s.events[s.events.length-1];return d&&d[1].type==="gfmFootnoteDefinitionIndent"&&d[2].sliceSerialize(d[1],!0).length===4?e(c):o(c)}}function gfmStrikethrough(i){let o=(i||{}).singleTilde;const s={tokenize:c,resolveAll:a};return o==null&&(o=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function a(d,h){let g=-1;for(;++g<d.length;)if(d[g][0]==="enter"&&d[g][1].type==="strikethroughSequenceTemporary"&&d[g][1]._close){let b=g;for(;b--;)if(d[b][0]==="exit"&&d[b][1].type==="strikethroughSequenceTemporary"&&d[b][1]._open&&d[g][1].end.offset-d[g][1].start.offset===d[b][1].end.offset-d[b][1].start.offset){d[g][1].type="strikethroughSequence",d[b][1].type="strikethroughSequence";const _={type:"strikethrough",start:Object.assign({},d[b][1].start),end:Object.assign({},d[g][1].end)},j={type:"strikethroughText",start:Object.assign({},d[b][1].end),end:Object.assign({},d[g][1].start)},$=[["enter",_,h],["enter",d[b][1],h],["exit",d[b][1],h],["enter",j,h]],_e=h.parser.constructs.insideSpan.null;_e&&splice($,$.length,0,resolveAll(_e,d.slice(b+1,g),h)),splice($,$.length,0,[["exit",j,h],["enter",d[g][1],h],["exit",d[g][1],h],["exit",_,h]]),splice(d,b-1,g-b+3,$),g=b+$.length-2;break}}for(g=-1;++g<d.length;)d[g][1].type==="strikethroughSequenceTemporary"&&(d[g][1].type="data");return d}function c(d,h,g){const b=this.previous,_=this.events;let j=0;return $;function $(et){return b===126&&_[_.length-1][1].type!=="characterEscape"?g(et):(d.enter("strikethroughSequenceTemporary"),_e(et))}function _e(et){const rt=classifyCharacter(b);if(et===126)return j>1?g(et):(d.consume(et),j++,_e);if(j<2&&!o)return g(et);const lt=d.exit("strikethroughSequenceTemporary"),tt=classifyCharacter(et);return lt._open=!tt||tt===2&&!!rt,lt._close=!rt||rt===2&&!!tt,h(et)}}}class EditMap{constructor(){this.map=[]}add(e,o,s){addImpl(this,e,o,s)}consume(e){if(this.map.sort(function(c,d){return c[0]-d[0]}),this.map.length===0)return;let o=this.map.length;const s=[];for(;o>0;)o-=1,s.push(e.slice(this.map[o][0]+this.map[o][1]),this.map[o][2]),e.length=this.map[o][0];s.push([...e]),e.length=0;let a=s.pop();for(;a;)e.push(...a),a=s.pop();this.map.length=0}}function addImpl(i,e,o,s){let a=0;if(!(o===0&&s.length===0)){for(;a<i.map.length;){if(i.map[a][0]===e){i.map[a][1]+=o,i.map[a][2].push(...s);return}a+=1}i.map.push([e,o,s])}}function gfmTableAlign(i,e){let o=!1;const s=[];for(;e<i.length;){const a=i[e];if(o){if(a[0]==="enter")a[1].type==="tableContent"&&s.push(i[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(i[e-1][1].type==="tableDelimiterMarker"){const c=s.length-1;s[c]=s[c]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(o=!0);e+=1}return s}function gfmTable(){return{flow:{null:{tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(i,e,o){const s=this;let a=0,c=0,d;return h;function h(gt){let Et=s.events.length-1;for(;Et>-1;){const xt=s.events[Et][1].type;if(xt==="lineEnding"||xt==="linePrefix")Et--;else break}const bt=Et>-1?s.events[Et][1].type:null,Pt=bt==="tableHead"||bt==="tableRow"?at:g;return Pt===at&&s.parser.lazy[s.now().line]?o(gt):Pt(gt)}function g(gt){return i.enter("tableHead"),i.enter("tableRow"),b(gt)}function b(gt){return gt===124||(d=!0,c+=1),_(gt)}function _(gt){return gt===null?o(gt):markdownLineEnding(gt)?c>1?(c=0,s.interrupt=!0,i.exit("tableRow"),i.enter("lineEnding"),i.consume(gt),i.exit("lineEnding"),_e):o(gt):markdownSpace(gt)?factorySpace(i,_,"whitespace")(gt):(c+=1,d&&(d=!1,a+=1),gt===124?(i.enter("tableCellDivider"),i.consume(gt),i.exit("tableCellDivider"),d=!0,_):(i.enter("data"),j(gt)))}function j(gt){return gt===null||gt===124||markdownLineEndingOrSpace(gt)?(i.exit("data"),_(gt)):(i.consume(gt),gt===92?$:j)}function $(gt){return gt===92||gt===124?(i.consume(gt),j):j(gt)}function _e(gt){return s.interrupt=!1,s.parser.lazy[s.now().line]?o(gt):(i.enter("tableDelimiterRow"),d=!1,markdownSpace(gt)?factorySpace(i,et,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(gt):et(gt))}function et(gt){return gt===45||gt===58?lt(gt):gt===124?(d=!0,i.enter("tableCellDivider"),i.consume(gt),i.exit("tableCellDivider"),rt):st(gt)}function rt(gt){return markdownSpace(gt)?factorySpace(i,lt,"whitespace")(gt):lt(gt)}function lt(gt){return gt===58?(c+=1,d=!0,i.enter("tableDelimiterMarker"),i.consume(gt),i.exit("tableDelimiterMarker"),tt):gt===45?(c+=1,tt(gt)):gt===null||markdownLineEnding(gt)?ft(gt):st(gt)}function tt(gt){return gt===45?(i.enter("tableDelimiterFiller"),nt(gt)):st(gt)}function nt(gt){return gt===45?(i.consume(gt),nt):gt===58?(d=!0,i.exit("tableDelimiterFiller"),i.enter("tableDelimiterMarker"),i.consume(gt),i.exit("tableDelimiterMarker"),it):(i.exit("tableDelimiterFiller"),it(gt))}function it(gt){return markdownSpace(gt)?factorySpace(i,ft,"whitespace")(gt):ft(gt)}function ft(gt){return gt===124?et(gt):gt===null||markdownLineEnding(gt)?!d||a!==c?st(gt):(i.exit("tableDelimiterRow"),i.exit("tableHead"),e(gt)):st(gt)}function st(gt){return o(gt)}function at(gt){return i.enter("tableRow"),Ct(gt)}function Ct(gt){return gt===124?(i.enter("tableCellDivider"),i.consume(gt),i.exit("tableCellDivider"),Ct):gt===null||markdownLineEnding(gt)?(i.exit("tableRow"),e(gt)):markdownSpace(gt)?factorySpace(i,Ct,"whitespace")(gt):(i.enter("data"),yt(gt))}function yt(gt){return gt===null||gt===124||markdownLineEndingOrSpace(gt)?(i.exit("data"),Ct(gt)):(i.consume(gt),gt===92?pt:yt)}function pt(gt){return gt===92||gt===124?(i.consume(gt),yt):yt(gt)}}function resolveTable(i,e){let o=-1,s=!0,a=0,c=[0,0,0,0],d=[0,0,0,0],h=!1,g=0,b,_,j;const $=new EditMap;for(;++o<i.length;){const _e=i[o],et=_e[1];_e[0]==="enter"?et.type==="tableHead"?(h=!1,g!==0&&(flushTableEnd($,e,g,b,_),_=void 0,g=0),b={type:"table",start:Object.assign({},et.start),end:Object.assign({},et.end)},$.add(o,0,[["enter",b,e]])):et.type==="tableRow"||et.type==="tableDelimiterRow"?(s=!0,j=void 0,c=[0,0,0,0],d=[0,o+1,0,0],h&&(h=!1,_={type:"tableBody",start:Object.assign({},et.start),end:Object.assign({},et.end)},$.add(o,0,[["enter",_,e]])),a=et.type==="tableDelimiterRow"?2:_?3:1):a&&(et.type==="data"||et.type==="tableDelimiterMarker"||et.type==="tableDelimiterFiller")?(s=!1,d[2]===0&&(c[1]!==0&&(d[0]=d[1],j=flushCell($,e,c,a,void 0,j),c=[0,0,0,0]),d[2]=o)):et.type==="tableCellDivider"&&(s?s=!1:(c[1]!==0&&(d[0]=d[1],j=flushCell($,e,c,a,void 0,j)),c=d,d=[c[1],o,0,0])):et.type==="tableHead"?(h=!0,g=o):et.type==="tableRow"||et.type==="tableDelimiterRow"?(g=o,c[1]!==0?(d[0]=d[1],j=flushCell($,e,c,a,o,j)):d[1]!==0&&(j=flushCell($,e,d,a,o,j)),a=0):a&&(et.type==="data"||et.type==="tableDelimiterMarker"||et.type==="tableDelimiterFiller")&&(d[3]=o)}for(g!==0&&flushTableEnd($,e,g,b,_),$.consume(e.events),o=-1;++o<e.events.length;){const _e=e.events[o];_e[0]==="enter"&&_e[1].type==="table"&&(_e[1]._align=gfmTableAlign(e.events,o))}return i}function flushCell(i,e,o,s,a,c){const d=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",h="tableContent";o[0]!==0&&(c.end=Object.assign({},getPoint(e.events,o[0])),i.add(o[0],0,[["exit",c,e]]));const g=getPoint(e.events,o[1]);if(c={type:d,start:Object.assign({},g),end:Object.assign({},g)},i.add(o[1],0,[["enter",c,e]]),o[2]!==0){const b=getPoint(e.events,o[2]),_=getPoint(e.events,o[3]),j={type:h,start:Object.assign({},b),end:Object.assign({},_)};if(i.add(o[2],0,[["enter",j,e]]),s!==2){const $=e.events[o[2]],_e=e.events[o[3]];if($[1].end=Object.assign({},_e[1].end),$[1].type="chunkText",$[1].contentType="text",o[3]>o[2]+1){const et=o[2]+1,rt=o[3]-o[2]-1;i.add(et,rt,[])}}i.add(o[3]+1,0,[["exit",j,e]])}return a!==void 0&&(c.end=Object.assign({},getPoint(e.events,a)),i.add(a,0,[["exit",c,e]]),c=void 0),c}function flushTableEnd(i,e,o,s,a){const c=[],d=getPoint(e.events,o);a&&(a.end=Object.assign({},d),c.push(["exit",a,e])),s.end=Object.assign({},d),c.push(["exit",s,e]),i.add(o+1,0,c)}function getPoint(i,e){const o=i[e],s=o[0]==="enter"?"start":"end";return o[1][s]}const tasklistCheck={tokenize:tokenizeTasklistCheck};function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(i,e,o){const s=this;return a;function a(g){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?o(g):(i.enter("taskListCheck"),i.enter("taskListCheckMarker"),i.consume(g),i.exit("taskListCheckMarker"),c)}function c(g){return markdownLineEndingOrSpace(g)?(i.enter("taskListCheckValueUnchecked"),i.consume(g),i.exit("taskListCheckValueUnchecked"),d):g===88||g===120?(i.enter("taskListCheckValueChecked"),i.consume(g),i.exit("taskListCheckValueChecked"),d):o(g)}function d(g){return g===93?(i.enter("taskListCheckMarker"),i.consume(g),i.exit("taskListCheckMarker"),i.exit("taskListCheck"),h):o(g)}function h(g){return markdownLineEnding(g)?e(g):markdownSpace(g)?i.check({tokenize:spaceThenNonSpace},e,o)(g):o(g)}}function spaceThenNonSpace(i,e,o){return factorySpace(i,s,"whitespace");function s(a){return a===null?o(a):e(a)}}function gfm(i){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(i),gfmTable(),gfmTaskListItem()])}const emptyOptions={};function remarkGfm(i){const e=this,o=i||emptyOptions,s=e.data(),a=s.micromarkExtensions||(s.micromarkExtensions=[]),c=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),d=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);a.push(gfm(o)),c.push(gfmFromMarkdown()),d.push(gfmToMarkdown(o))}const convert=function(i){if(i==null)return ok;if(typeof i=="string")return typeFactory(i);if(typeof i=="object")return Array.isArray(i)?anyFactory(i):propsFactory(i);if(typeof i=="function")return castFactory(i);throw new Error("Expected function, string, or object as test")};function anyFactory(i){const e=[];let o=-1;for(;++o<i.length;)e[o]=convert(i[o]);return castFactory(s);function s(...a){let c=-1;for(;++c<e.length;)if(e[c].call(this,...a))return!0;return!1}}function propsFactory(i){return castFactory(e);function e(o){let s;for(s in i)if(o[s]!==i[s])return!1;return!0}}function typeFactory(i){return castFactory(e);function e(o){return o&&o.type===i}}function castFactory(i){return e;function e(o,...s){return!!(o&&typeof o=="object"&&"type"in o&&i.call(this,o,...s))}}function ok(){return!0}function color(i){return i}const CONTINUE=!0,EXIT=!1,SKIP="skip",visitParents=function(i,e,o,s){typeof e=="function"&&typeof o!="function"&&(s=o,o=e,e=null);const a=convert(e),c=s?-1:1;d(i,void 0,[])();function d(h,g,b){const _=h&&typeof h=="object"?h:{};if(typeof _.type=="string"){const $=typeof _.tagName=="string"?_.tagName:typeof _.name=="string"?_.name:void 0;Object.defineProperty(j,"name",{value:"node ("+(h.type+($?"<"+$+">":""))+")"})}return j;function j(){let $=[],_e,et,rt;if((!e||a(h,g,b[b.length-1]||null))&&($=toResult(o(h,b)),$[0]===EXIT))return $;if(h.children&&$[0]!==SKIP)for(et=(s?h.children.length:-1)+c,rt=b.concat(h);et>-1&&et<h.children.length;){if(_e=d(h.children[et],et,rt)(),_e[0]===EXIT)return _e;et=typeof _e[1]=="number"?_e[1]:et+c}return $}}};function toResult(i){return Array.isArray(i)?i:typeof i=="number"?[CONTINUE,i]:[i]}const visit=function(i,e,o,s){typeof e=="function"&&typeof o!="function"&&(s=o,o=e,e=null),visitParents(i,e,a,s);function a(c,d){const h=d[d.length-1];return o(c,h?h.children.indexOf(c):null,h)}};function supersub(){return i=>{visit(i,["text"],(e,o,s)=>{if(e.type!=="text")return;const{value:a}=e,c=a.split(/\^/);if(c.length===1||c.length%2===0)return;const d=c.map((h,g)=>g%2===0?{type:"text",value:h}:{type:"superscript",data:{hName:"sup"},children:[{type:"text",value:h}]});s.children.splice(o,1,...d)}),visit(i,["text"],(e,o,s)=>{if(e.type!=="text")return;const{value:a}=e,c=a.split(/\~/);if(c.length===1||c.length%2===0)return;const d=c.map((h,g)=>g%2===0?{type:"text",value:h}:{type:"subscript",data:{hName:"sub"},children:[{type:"text",value:h}]});s.children.splice(o,1,...d)})}}const Avatar=({userId:i,userName:e,staticPath:o,staticText:s,size:a})=>{const[c,d]=reactExports.useState(null),h=a?`h-${a} w-${a}`:"h-12 w-12";reactExports.useEffect(()=>{async function _(){if(!i){o&&d(o);return}const j=(await acquireTokens()).accessToken,$=await fetch(`https://graph.microsoft.com/v1.0/users/${i}/photo/$value`,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"image/jpeg"}});if($.status>299)return d(null),console.error($.statusText);const _e=await $.blob(),et=new FileReader;et.onload=()=>{d(et.result)},et.readAsDataURL(_e)}_().catch(console.error)},[i,o]);const g=e||s||"",b=g?g.split(" ").filter((_,j)=>j<2).map(_=>_[0]).join(""):"";return jsxRuntimeExports.jsx("div",{className:`${h} border border-1 border-neutral-200 flex-grow-0 flex-shrink-0 rounded-full bg-white m-2 overflow-hidden flex items-center justify-center`,title:g,children:c?jsxRuntimeExports.jsx("img",{src:c,className:h,alt:""}):jsxRuntimeExports.jsx("div",{className:"text-2xl",children:b})})},LoadingBar=()=>jsxRuntimeExports.jsx("div",{className:"parent bg-gray-300 h-1 w-full",children:jsxRuntimeExports.jsx("div",{className:"child bg-blue-600 h-1"})});function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,o){module.exports=e.pdfjsLib=o()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e)=>{var Mn;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=Ut,e.bytesToString=Mt,e.createValidAbsoluteUrl=rn,e.getModificationDate=nn,e.getUuid=Rn,e.getVerbosityLevel=Lt,e.info=Bt,e.isArrayBuffer=Nt,e.isArrayEqual=Xt,e.isNodeJS=void 0,e.normalizeUnicode=Pn,e.objectFromMap=tn,e.objectSize=Qt,e.setVerbosityLevel=xt,e.shadow=an,e.string32=Vt,e.stringToBytes=Wt,e.stringToPDFString=sn,e.stringToUTF8String=Gt,e.unreachable=kt,e.utf8StringToString=qt,e.warn=Kt;const o=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=o;const s=[1,0,0,1,0,0];e.IDENTITY_MATRIX=s;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const c=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;e.LINE_FACTOR=d;const h=.35;e.LINE_DESCENT_FACTOR=h;const g=h/d;e.BASELINE_FACTOR=g;const b={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=b;const _={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=_;const j="pdfjs_internal_editor_";e.AnnotationEditorPrefix=j;const $={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=$;const _e={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=_e;const et={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=et;const rt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=rt;const lt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=lt;const tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=tt;const nt={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=nt;const it={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=it;const ft={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=ft;const st={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=st;const at={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=at;const Ct={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=Ct;const yt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=yt;const pt={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=pt;const gt={NONE:0,BINARY:1};e.CMapCompressionType=gt;const Et={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Et;const bt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=bt;let Pt=pt.WARNINGS;function xt(en){Number.isInteger(en)&&(Pt=en)}function Lt(){return Pt}function Bt(en){Pt>=pt.INFOS&&console.log(`Info: ${en}`)}function Kt(en){Pt>=pt.WARNINGS&&console.log(`Warning: ${en}`)}function kt(en){throw new Error(en)}function Ut(en,zt){en||kt(zt)}function St(en){switch(en==null?void 0:en.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rn(en,zt=null,Ft=null){if(!en)return null;try{if(Ft&&typeof en=="string"){if(Ft.addDefaultProtocol&&en.startsWith("www.")){const dn=en.match(/\./g);(dn==null?void 0:dn.length)>=2&&(en=`http://${en}`)}if(Ft.tryConvertEncoding)try{en=Gt(en)}catch{}}const cn=zt?new URL(en,zt):new URL(en);if(St(cn))return cn}catch{}return null}function an(en,zt,Ft,cn=!1){return Object.defineProperty(en,zt,{value:Ft,enumerable:!cn,configurable:!0,writable:!1}),Ft}const ht=function(){function zt(Ft,cn){this.constructor===zt&&kt("Cannot initialize BaseException."),this.message=Ft,this.name=cn}return zt.prototype=new Error,zt.constructor=zt,zt}();e.BaseException=ht;class ct extends ht{constructor(zt,Ft){super(zt,"PasswordException"),this.code=Ft}}e.PasswordException=ct;class mt extends ht{constructor(zt,Ft){super(zt,"UnknownErrorException"),this.details=Ft}}e.UnknownErrorException=mt;class ut extends ht{constructor(zt){super(zt,"InvalidPDFException")}}e.InvalidPDFException=ut;class vt extends ht{constructor(zt){super(zt,"MissingPDFException")}}e.MissingPDFException=vt;class At extends ht{constructor(zt,Ft){super(zt,"UnexpectedResponseException"),this.status=Ft}}e.UnexpectedResponseException=At;class Tt extends ht{constructor(zt){super(zt,"FormatError")}}e.FormatError=Tt;class _t extends ht{constructor(zt){super(zt,"AbortException")}}e.AbortException=_t;function Mt(en){(typeof en!="object"||(en==null?void 0:en.length)===void 0)&&kt("Invalid argument for bytesToString");const zt=en.length,Ft=8192;if(zt<Ft)return String.fromCharCode.apply(null,en);const cn=[];for(let dn=0;dn<zt;dn+=Ft){const Hn=Math.min(dn+Ft,zt),Bn=en.subarray(dn,Hn);cn.push(String.fromCharCode.apply(null,Bn))}return cn.join("")}function Wt(en){typeof en!="string"&&kt("Invalid argument for stringToBytes");const zt=en.length,Ft=new Uint8Array(zt);for(let cn=0;cn<zt;++cn)Ft[cn]=en.charCodeAt(cn)&255;return Ft}function Vt(en){return String.fromCharCode(en>>24&255,en>>16&255,en>>8&255,en&255)}function Qt(en){return Object.keys(en).length}function tn(en){const zt=Object.create(null);for(const[Ft,cn]of en)zt[Ft]=cn;return zt}function on(){const en=new Uint8Array(4);return en[0]=1,new Uint32Array(en.buffer,0,1)[0]===1}function Zt(){try{return new Function(""),!0}catch{return!1}}class fn{static get isLittleEndian(){return an(this,"isLittleEndian",on())}static get isEvalSupported(){return an(this,"isEvalSupported",Zt())}static get isOffscreenCanvasSupported(){return an(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?an(this,"platform",{isWin:!1,isMac:!1}):an(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var zt,Ft;return an(this,"isCSSRoundSupported",(Ft=(zt=globalThis.CSS)==null?void 0:zt.supports)==null?void 0:Ft.call(zt,"width: round(1.5px, 1px)"))}}e.FeatureTest=fn;const xn=[...Array(256).keys()].map(en=>en.toString(16).padStart(2,"0"));class hn{static makeHexColor(zt,Ft,cn){return`#${xn[zt]}${xn[Ft]}${xn[cn]}`}static scaleMinMax(zt,Ft){let cn;zt[0]?(zt[0]<0&&(cn=Ft[0],Ft[0]=Ft[1],Ft[1]=cn),Ft[0]*=zt[0],Ft[1]*=zt[0],zt[3]<0&&(cn=Ft[2],Ft[2]=Ft[3],Ft[3]=cn),Ft[2]*=zt[3],Ft[3]*=zt[3]):(cn=Ft[0],Ft[0]=Ft[2],Ft[2]=cn,cn=Ft[1],Ft[1]=Ft[3],Ft[3]=cn,zt[1]<0&&(cn=Ft[2],Ft[2]=Ft[3],Ft[3]=cn),Ft[2]*=zt[1],Ft[3]*=zt[1],zt[2]<0&&(cn=Ft[0],Ft[0]=Ft[1],Ft[1]=cn),Ft[0]*=zt[2],Ft[1]*=zt[2]),Ft[0]+=zt[4],Ft[1]+=zt[4],Ft[2]+=zt[5],Ft[3]+=zt[5]}static transform(zt,Ft){return[zt[0]*Ft[0]+zt[2]*Ft[1],zt[1]*Ft[0]+zt[3]*Ft[1],zt[0]*Ft[2]+zt[2]*Ft[3],zt[1]*Ft[2]+zt[3]*Ft[3],zt[0]*Ft[4]+zt[2]*Ft[5]+zt[4],zt[1]*Ft[4]+zt[3]*Ft[5]+zt[5]]}static applyTransform(zt,Ft){const cn=zt[0]*Ft[0]+zt[1]*Ft[2]+Ft[4],dn=zt[0]*Ft[1]+zt[1]*Ft[3]+Ft[5];return[cn,dn]}static applyInverseTransform(zt,Ft){const cn=Ft[0]*Ft[3]-Ft[1]*Ft[2],dn=(zt[0]*Ft[3]-zt[1]*Ft[2]+Ft[2]*Ft[5]-Ft[4]*Ft[3])/cn,Hn=(-zt[0]*Ft[1]+zt[1]*Ft[0]+Ft[4]*Ft[1]-Ft[5]*Ft[0])/cn;return[dn,Hn]}static getAxialAlignedBoundingBox(zt,Ft){const cn=this.applyTransform(zt,Ft),dn=this.applyTransform(zt.slice(2,4),Ft),Hn=this.applyTransform([zt[0],zt[3]],Ft),Bn=this.applyTransform([zt[2],zt[1]],Ft);return[Math.min(cn[0],dn[0],Hn[0],Bn[0]),Math.min(cn[1],dn[1],Hn[1],Bn[1]),Math.max(cn[0],dn[0],Hn[0],Bn[0]),Math.max(cn[1],dn[1],Hn[1],Bn[1])]}static inverseTransform(zt){const Ft=zt[0]*zt[3]-zt[1]*zt[2];return[zt[3]/Ft,-zt[1]/Ft,-zt[2]/Ft,zt[0]/Ft,(zt[2]*zt[5]-zt[4]*zt[3])/Ft,(zt[4]*zt[1]-zt[5]*zt[0])/Ft]}static singularValueDecompose2dScale(zt){const Ft=[zt[0],zt[2],zt[1],zt[3]],cn=zt[0]*Ft[0]+zt[1]*Ft[2],dn=zt[0]*Ft[1]+zt[1]*Ft[3],Hn=zt[2]*Ft[0]+zt[3]*Ft[2],Bn=zt[2]*Ft[1]+zt[3]*Ft[3],$t=(cn+Bn)/2,pn=Math.sqrt((cn+Bn)**2-4*(cn*Bn-Hn*dn))/2,kn=$t+pn||1,gn=$t-pn||1;return[Math.sqrt(kn),Math.sqrt(gn)]}static normalizeRect(zt){const Ft=zt.slice(0);return zt[0]>zt[2]&&(Ft[0]=zt[2],Ft[2]=zt[0]),zt[1]>zt[3]&&(Ft[1]=zt[3],Ft[3]=zt[1]),Ft}static intersect(zt,Ft){const cn=Math.max(Math.min(zt[0],zt[2]),Math.min(Ft[0],Ft[2])),dn=Math.min(Math.max(zt[0],zt[2]),Math.max(Ft[0],Ft[2]));if(cn>dn)return null;const Hn=Math.max(Math.min(zt[1],zt[3]),Math.min(Ft[1],Ft[3])),Bn=Math.min(Math.max(zt[1],zt[3]),Math.max(Ft[1],Ft[3]));return Hn>Bn?null:[cn,Hn,dn,Bn]}static bezierBoundingBox(zt,Ft,cn,dn,Hn,Bn,$t,pn){const kn=[],gn=[[],[]];let bn,_n,jn,un,Dn,wn,Rt,dt;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(_n=6*zt-12*cn+6*Hn,bn=-3*zt+9*cn-9*Hn+3*$t,jn=3*cn-3*zt):(_n=6*Ft-12*dn+6*Bn,bn=-3*Ft+9*dn-9*Bn+3*pn,jn=3*dn-3*Ft),Math.abs(bn)<1e-12){if(Math.abs(_n)<1e-12)continue;un=-jn/_n,0<un&&un<1&&kn.push(un);continue}Rt=_n*_n-4*jn*bn,dt=Math.sqrt(Rt),!(Rt<0)&&(Dn=(-_n+dt)/(2*bn),0<Dn&&Dn<1&&kn.push(Dn),wn=(-_n-dt)/(2*bn),0<wn&&wn<1&&kn.push(wn))}let wt=kn.length,It;const Dt=wt;for(;wt--;)un=kn[wt],It=1-un,gn[0][wt]=It*It*It*zt+3*It*It*un*cn+3*It*un*un*Hn+un*un*un*$t,gn[1][wt]=It*It*It*Ft+3*It*It*un*dn+3*It*un*un*Bn+un*un*un*pn;return gn[0][Dt]=zt,gn[1][Dt]=Ft,gn[0][Dt+1]=$t,gn[1][Dt+1]=pn,gn[0].length=gn[1].length=Dt+2,[Math.min(...gn[0]),Math.min(...gn[1]),Math.max(...gn[0]),Math.max(...gn[1])]}}e.Util=hn;const Cn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function sn(en){if(en[0]>=""){let Ft;if(en[0]===""&&en[1]===""?Ft="utf-16be":en[0]===""&&en[1]===""?Ft="utf-16le":en[0]===""&&en[1]===""&&en[2]===""&&(Ft="utf-8"),Ft)try{const cn=new TextDecoder(Ft,{fatal:!0}),dn=Wt(en);return cn.decode(dn)}catch(cn){Kt(`stringToPDFString: "${cn}".`)}}const zt=[];for(let Ft=0,cn=en.length;Ft<cn;Ft++){const dn=Cn[en.charCodeAt(Ft)];zt.push(dn?String.fromCharCode(dn):en.charAt(Ft))}return zt.join("")}function Gt(en){return decodeURIComponent(escape(en))}function qt(en){return unescape(encodeURIComponent(en))}function Nt(en){return typeof en=="object"&&(en==null?void 0:en.byteLength)!==void 0}function Xt(en,zt){if(en.length!==zt.length)return!1;for(let Ft=0,cn=en.length;Ft<cn;Ft++)if(en[Ft]!==zt[Ft])return!1;return!0}function nn(en=new Date){return[en.getUTCFullYear().toString(),(en.getUTCMonth()+1).toString().padStart(2,"0"),en.getUTCDate().toString().padStart(2,"0"),en.getUTCHours().toString().padStart(2,"0"),en.getUTCMinutes().toString().padStart(2,"0"),en.getUTCSeconds().toString().padStart(2,"0")].join("")}class mn{constructor(){Ot(this,Mn,!1);this.promise=new Promise((zt,Ft)=>{this.resolve=cn=>{Yt(this,Mn,!0),zt(cn)},this.reject=cn=>{Yt(this,Mn,!0),Ft(cn)}})}get settled(){return ot(this,Mn)}}Mn=new WeakMap,e.PromiseCapability=mn;let vn=null,Tn=null;function Pn(en){return vn||(vn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Tn=new Map([["","t"]])),en.replaceAll(vn,(zt,Ft,cn)=>Ft?Ft.normalize("NFKC"):Tn.get(cn))}function Rn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const en=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(en);else for(let zt=0;zt<32;zt++)en[zt]=Math.floor(Math.random()*255);return Mt(en)}const In="pdfjs_internal_id_";e.AnnotationPrefix=In},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var i,o,s,a,Qn,d,ur,g,b,_,j,$,_e,et,rt,lt,dr,nt,it,Tr,st,at;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(yt){if(typeof yt=="string"||yt instanceof URL?yt={url:yt}:(0,_util.isArrayBuffer)(yt)&&(yt={data:yt}),typeof yt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!yt.url&&!yt.data&&!yt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const pt=new PDFDocumentLoadingTask,{docId:gt}=pt,Et=yt.url?getUrlProp(yt.url):null,bt=yt.data?getDataProp(yt.data):null,Pt=yt.httpHeaders||null,xt=yt.withCredentials===!0,Lt=yt.password??null,Bt=yt.range instanceof PDFDataRangeTransport?yt.range:null,Kt=Number.isInteger(yt.rangeChunkSize)&&yt.rangeChunkSize>0?yt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let kt=yt.worker instanceof PDFWorker?yt.worker:null;const Ut=yt.verbosity,St=typeof yt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(yt.docBaseUrl)?yt.docBaseUrl:null,rn=typeof yt.cMapUrl=="string"?yt.cMapUrl:null,an=yt.cMapPacked!==!1,ht=yt.CMapReaderFactory||DefaultCMapReaderFactory,ct=typeof yt.standardFontDataUrl=="string"?yt.standardFontDataUrl:null,mt=yt.StandardFontDataFactory||DefaultStandardFontDataFactory,ut=yt.stopAtErrors!==!0,vt=Number.isInteger(yt.maxImageSize)&&yt.maxImageSize>-1?yt.maxImageSize:-1,At=yt.isEvalSupported!==!1,Tt=typeof yt.isOffscreenCanvasSupported=="boolean"?yt.isOffscreenCanvasSupported:!_util.isNodeJS,_t=Number.isInteger(yt.canvasMaxAreaInBytes)?yt.canvasMaxAreaInBytes:-1,Mt=typeof yt.disableFontFace=="boolean"?yt.disableFontFace:_util.isNodeJS,Wt=yt.fontExtraProperties===!0,Vt=yt.enableXfa===!0,Qt=yt.ownerDocument||globalThis.document,tn=yt.disableRange===!0,on=yt.disableStream===!0,Zt=yt.disableAutoFetch===!0,fn=yt.pdfBug===!0,xn=Bt?Bt.length:yt.length??NaN,hn=typeof yt.useSystemFonts=="boolean"?yt.useSystemFonts:!_util.isNodeJS&&!Mt,Cn=typeof yt.useWorkerFetch=="boolean"?yt.useWorkerFetch:ht===_display_utils.DOMCMapReaderFactory&&mt===_display_utils.DOMStandardFontDataFactory&&rn&&ct&&(0,_display_utils.isValidFetchUrl)(rn,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(ct,document.baseURI),sn=yt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Qt}),Gt=yt.filterFactory||new DefaultFilterFactory({docId:gt,ownerDocument:Qt}),qt=null;(0,_util.setVerbosityLevel)(Ut);const Nt={canvasFactory:sn,filterFactory:Gt};if(Cn||(Nt.cMapReaderFactory=new ht({baseUrl:rn,isCompressed:an}),Nt.standardFontDataFactory=new mt({baseUrl:ct})),!kt){const mn={verbosity:Ut,port:_worker_options.GlobalWorkerOptions.workerPort};kt=mn.port?PDFWorker.fromPort(mn):new PDFWorker(mn),pt._worker=kt}const Xt={docId:gt,apiVersion:"3.11.174",data:bt,password:Lt,disableAutoFetch:Zt,rangeChunkSize:Kt,length:xn,docBaseUrl:St,enableXfa:Vt,evaluatorOptions:{maxImageSize:vt,disableFontFace:Mt,ignoreErrors:ut,isEvalSupported:At,isOffscreenCanvasSupported:Tt,canvasMaxAreaInBytes:_t,fontExtraProperties:Wt,useSystemFonts:hn,cMapUrl:Cn?rn:null,standardFontDataUrl:Cn?ct:null}},nn={ignoreErrors:ut,isEvalSupported:At,disableFontFace:Mt,fontExtraProperties:Wt,enableXfa:Vt,ownerDocument:Qt,disableAutoFetch:Zt,pdfBug:fn,styleElement:qt};return kt.promise.then(function(){if(pt.destroyed)throw new Error("Loading aborted");const mn=_fetchDocument(kt,Xt),vn=new Promise(function(Tn){let Pn;Bt?Pn=new _transport_stream.PDFDataTransportStream({length:xn,initialData:Bt.initialData,progressiveDone:Bt.progressiveDone,contentDispositionFilename:Bt.contentDispositionFilename,disableRange:tn,disableStream:on},Bt):bt||(Pn=(In=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(In):(0,_display_utils.isValidFetchUrl)(In.url)?new _displayFetch_stream.PDFFetchStream(In):new _displayNetwork.PDFNetworkStream(In))({url:Et,length:xn,httpHeaders:Pt,withCredentials:xt,rangeChunkSize:Kt,disableRange:tn,disableStream:on})),Tn(Pn)});return Promise.all([mn,vn]).then(function([Tn,Pn]){if(pt.destroyed)throw new Error("Loading aborted");const Rn=new _message_handler.MessageHandler(gt,Tn,kt.port),In=new WorkerTransport(Rn,pt,Pn,nn,Nt);pt._transport=In,Rn.send("Ready",null)})}).catch(pt._capability.reject),pt}async function _fetchDocument(yt,pt){if(yt.destroyed)throw new Error("Worker was destroyed");const gt=await yt.messageHandler.sendWithPromise("GetDocRequest",pt,pt.data?[pt.data.buffer]:null);if(yt.destroyed)throw new Error("Worker was destroyed");return gt}function getUrlProp(yt){if(yt instanceof URL)return yt.href;try{return new URL(yt,window.location).href}catch{if(_util.isNodeJS&&typeof yt=="string")return yt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(yt){if(_util.isNodeJS&&typeof Buffer<"u"&&yt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(yt instanceof Uint8Array&&yt.byteLength===yt.buffer.byteLength)return yt;if(typeof yt=="string")return(0,_util.stringToBytes)(yt);if(typeof yt=="object"&&!isNaN(yt==null?void 0:yt.length)||(0,_util.isArrayBuffer)(yt))return new Uint8Array(yt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${nr(e,i)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var pt,gt,Et;this.destroyed=!0;try{(pt=this._worker)!=null&&pt.port&&(this._worker._pendingDestroy=!0),await((gt=this._transport)==null?void 0:gt.destroy())}catch(bt){throw(Et=this._worker)!=null&&Et.port&&delete this._worker._pendingDestroy,bt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};i=new WeakMap,Ot(e,i,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(pt,gt,Et=!1,bt=null){this.length=pt,this.initialData=gt,this.progressiveDone=Et,this.contentDispositionFilename=bt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(pt){this._rangeListeners.push(pt)}addProgressListener(pt){this._progressListeners.push(pt)}addProgressiveReadListener(pt){this._progressiveReadListeners.push(pt)}addProgressiveDoneListener(pt){this._progressiveDoneListeners.push(pt)}onDataRange(pt,gt){for(const Et of this._rangeListeners)Et(pt,gt)}onDataProgress(pt,gt){this._readyCapability.promise.then(()=>{for(const Et of this._progressListeners)Et(pt,gt)})}onDataProgressiveRead(pt){this._readyCapability.promise.then(()=>{for(const gt of this._progressiveReadListeners)gt(pt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const pt of this._progressiveDoneListeners)pt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(pt,gt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pt,gt){this._pdfInfo=pt,this._transport=gt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Et=>{if(!Et)return Et;const bt=[];for(const Pt in Et)bt.push(...Et[Pt]);return bt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pt){return this._transport.getPage(pt)}getPageIndex(pt){return this._transport.getPageIndex(pt)}getDestinations(){return this._transport.getDestinations()}getDestination(pt){return this._transport.getDestination(pt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(pt=!1){return this._transport.startCleanup(pt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(pt,gt,Et,bt=!1){Ot(this,a);Ot(this,d);Ot(this,o,null);Ot(this,s,!1);this._pageIndex=pt,this._pageInfo=gt,this._transport=Et,this._stats=bt?new _display_utils.StatTimer:null,this._pdfBug=bt,this.commonObjs=Et.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:pt,rotation:gt=this.rotate,offsetX:Et=0,offsetY:bt=0,dontFlip:Pt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:pt,rotation:gt,offsetX:Et,offsetY:bt,dontFlip:Pt})}getAnnotations({intent:pt="display"}={}){const gt=this._transport.getRenderingIntent(pt);return this._transport.getAnnotations(this._pageIndex,gt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var pt;return((pt=this._transport._htmlForXfa)==null?void 0:pt.children[this._pageIndex])||null}render({canvasContext:pt,viewport:gt,intent:Et="display",annotationMode:bt=_util.AnnotationMode.ENABLE,transform:Pt=null,background:xt=null,optionalContentConfigPromise:Lt=null,annotationCanvasMap:Bt=null,pageColors:Kt=null,printAnnotationStorage:kt=null}){var mt,ut;(mt=this._stats)==null||mt.time("Overall");const Ut=this._transport.getRenderingIntent(Et,bt,kt);Yt(this,s,!1),jt(this,d,ur).call(this),Lt||(Lt=this._transport.getOptionalContentConfig());let St=this._intentStates.get(Ut.cacheKey);St||(St=Object.create(null),this._intentStates.set(Ut.cacheKey,St)),St.streamReaderCancelTimeout&&(clearTimeout(St.streamReaderCancelTimeout),St.streamReaderCancelTimeout=null);const rn=!!(Ut.renderingIntent&_util.RenderingIntentFlag.PRINT);St.displayReadyCapability||(St.displayReadyCapability=new _util.PromiseCapability,St.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ut=this._stats)==null||ut.time("Page Request"),this._pumpOperatorList(Ut));const an=vt=>{var At,Tt;St.renderTasks.delete(ht),(this._maybeCleanupAfterRender||rn)&&Yt(this,s,!0),jt(this,a,Qn).call(this,!rn),vt?(ht.capability.reject(vt),this._abortOperatorList({intentState:St,reason:vt instanceof Error?vt:new Error(vt)})):ht.capability.resolve(),(At=this._stats)==null||At.timeEnd("Rendering"),(Tt=this._stats)==null||Tt.timeEnd("Overall")},ht=new InternalRenderTask({callback:an,params:{canvasContext:pt,viewport:gt,transform:Pt,background:xt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Bt,operatorList:St.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!rn,pdfBug:this._pdfBug,pageColors:Kt});(St.renderTasks||(St.renderTasks=new Set)).add(ht);const ct=ht.task;return Promise.all([St.displayReadyCapability.promise,Lt]).then(([vt,At])=>{var Tt;if(this.destroyed){an();return}(Tt=this._stats)==null||Tt.time("Rendering"),ht.initializeGraphics({transparency:vt,optionalContentConfig:At}),ht.operatorListChanged()}).catch(an),ct}getOperatorList({intent:pt="display",annotationMode:gt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Et=null}={}){var Bt;function bt(){xt.operatorList.lastChunk&&(xt.opListReadCapability.resolve(xt.operatorList),xt.renderTasks.delete(Lt))}const Pt=this._transport.getRenderingIntent(pt,gt,Et,!0);let xt=this._intentStates.get(Pt.cacheKey);xt||(xt=Object.create(null),this._intentStates.set(Pt.cacheKey,xt));let Lt;return xt.opListReadCapability||(Lt=Object.create(null),Lt.operatorListChanged=bt,xt.opListReadCapability=new _util.PromiseCapability,(xt.renderTasks||(xt.renderTasks=new Set)).add(Lt),xt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Bt=this._stats)==null||Bt.time("Page Request"),this._pumpOperatorList(Pt)),xt.opListReadCapability.promise}streamTextContent({includeMarkedContent:pt=!1,disableNormalization:gt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:pt===!0,disableNormalization:gt===!0},{highWaterMark:100,size(bt){return bt.items.length}})}getTextContent(pt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Et=>_xfa_text.XfaText.textContent(Et));const gt=this.streamTextContent(pt);return new Promise(function(Et,bt){function Pt(){xt.read().then(function({value:Bt,done:Kt}){if(Kt){Et(Lt);return}Object.assign(Lt.styles,Bt.styles),Lt.items.push(...Bt.items),Pt()},bt)}const xt=gt.getReader(),Lt={items:[],styles:Object.create(null)};Pt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const pt=[];for(const gt of this._intentStates.values())if(this._abortOperatorList({intentState:gt,reason:new Error("Page was destroyed."),force:!0}),!gt.opListReadCapability)for(const Et of gt.renderTasks)pt.push(Et.completed),Et.cancel();return this.objs.clear(),Yt(this,s,!1),jt(this,d,ur).call(this),Promise.all(pt)}cleanup(pt=!1){Yt(this,s,!0);const gt=jt(this,a,Qn).call(this,!1);return pt&&gt&&this._stats&&(this._stats=new _display_utils.StatTimer),gt}_startRenderPage(pt,gt){var bt,Pt;const Et=this._intentStates.get(gt);Et&&((bt=this._stats)==null||bt.timeEnd("Page Request"),(Pt=Et.displayReadyCapability)==null||Pt.resolve(pt))}_renderPageChunk(pt,gt){for(let Et=0,bt=pt.length;Et<bt;Et++)gt.operatorList.fnArray.push(pt.fnArray[Et]),gt.operatorList.argsArray.push(pt.argsArray[Et]);gt.operatorList.lastChunk=pt.lastChunk,gt.operatorList.separateAnnots=pt.separateAnnots;for(const Et of gt.renderTasks)Et.operatorListChanged();pt.lastChunk&&jt(this,a,Qn).call(this,!0)}_pumpOperatorList({renderingIntent:pt,cacheKey:gt,annotationStorageSerializable:Et}){const{map:bt,transfers:Pt}=Et,Lt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:pt,cacheKey:gt,annotationStorage:bt},Pt).getReader(),Bt=this._intentStates.get(gt);Bt.streamReader=Lt;const Kt=()=>{Lt.read().then(({value:kt,done:Ut})=>{if(Ut){Bt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(kt,Bt),Kt())},kt=>{if(Bt.streamReader=null,!this._transport.destroyed){if(Bt.operatorList){Bt.operatorList.lastChunk=!0;for(const Ut of Bt.renderTasks)Ut.operatorListChanged();jt(this,a,Qn).call(this,!0)}if(Bt.displayReadyCapability)Bt.displayReadyCapability.reject(kt);else if(Bt.opListReadCapability)Bt.opListReadCapability.reject(kt);else throw kt}})};Kt()}_abortOperatorList({intentState:pt,reason:gt,force:Et=!1}){if(pt.streamReader){if(pt.streamReaderCancelTimeout&&(clearTimeout(pt.streamReaderCancelTimeout),pt.streamReaderCancelTimeout=null),!Et){if(pt.renderTasks.size>0)return;if(gt instanceof _display_utils.RenderingCancelledException){let bt=RENDERING_CANCELLED_TIMEOUT;gt.extraDelay>0&&gt.extraDelay<1e3&&(bt+=gt.extraDelay),pt.streamReaderCancelTimeout=setTimeout(()=>{pt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:pt,reason:gt,force:!0})},bt);return}}if(pt.streamReader.cancel(new _util.AbortException(gt.message)).catch(()=>{}),pt.streamReader=null,!this._transport.destroyed){for(const[bt,Pt]of this._intentStates)if(Pt===pt){this._intentStates.delete(bt);break}this.cleanup()}}}get stats(){return this._stats}}o=new WeakMap,s=new WeakMap,a=new WeakSet,Qn=function(pt=!1){if(jt(this,d,ur).call(this),!ot(this,s)||this.destroyed)return!1;if(pt)return Yt(this,o,setTimeout(()=>{Yt(this,o,null),jt(this,a,Qn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:gt,operatorList:Et}of this._intentStates.values())if(gt.size>0||!Et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Yt(this,s,!1),!0},d=new WeakSet,ur=function(){ot(this,o)&&(clearTimeout(ot(this,o)),Yt(this,o,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Ot(this,g,new Set);Ot(this,b,Promise.resolve())}postMessage(pt,gt){const Et={data:structuredClone(pt,gt?{transfer:gt}:null)};ot(this,b).then(()=>{for(const bt of ot(this,g))bt.call(this,Et)})}addEventListener(pt,gt){ot(this,g).add(gt)}removeEventListener(pt,gt){ot(this,g).delete(gt)}terminate(){ot(this,g).clear()}}g=new WeakMap,b=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const yt=(_=document==null?void 0:document.currentScript)==null?void 0:_.src;yt&&(PDFWorkerUtil.fallbackWorkerSrc=yt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(yt,pt){let gt;try{if(gt=new URL(yt),!gt.origin||gt.origin==="null")return!1}catch{return!1}const Et=new URL(pt,gt);return gt.origin===Et.origin},PDFWorkerUtil.createCDNWrapper=function(yt){const pt=`importScripts("${yt}");`;return URL.createObjectURL(new Blob([pt]))}}const _PDFWorker=class _PDFWorker{constructor({name:yt=null,port:pt=null,verbosity:gt=(0,_util.getVerbosityLevel)()}={}){var Et;if(this.name=yt,this.destroyed=!1,this.verbosity=gt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,pt){if((Et=ot(_PDFWorker,j))!=null&&Et.has(pt))throw new Error("Cannot use more than one PDFWorker per port.");(ot(_PDFWorker,j)||Yt(_PDFWorker,j,new WeakMap)).set(pt,this),this._initializeFromPort(pt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(yt){this._port=yt,this._messageHandler=new _message_handler.MessageHandler("main","worker",yt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:yt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,yt)||(yt=PDFWorkerUtil.createCDNWrapper(new URL(yt,window.location).href));const pt=new Worker(yt),gt=new _message_handler.MessageHandler("main","worker",pt),Et=()=>{pt.removeEventListener("error",bt),gt.destroy(),pt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},bt=()=>{this._webWorker||Et()};pt.addEventListener("error",bt),gt.on("test",xt=>{if(pt.removeEventListener("error",bt),this.destroyed){Et();return}xt?(this._messageHandler=gt,this._port=pt,this._webWorker=pt,this._readyCapability.resolve(),gt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),gt.destroy(),pt.terminate())}),gt.on("ready",xt=>{if(pt.removeEventListener("error",bt),this.destroyed){Et();return}try{Pt()}catch{this._setupFakeWorker()}});const Pt=()=>{const xt=new Uint8Array;gt.send("test",xt,[xt.buffer])};Pt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(yt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const pt=new LoopbackPort;this._port=pt;const gt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Et=new _message_handler.MessageHandler(gt+"_worker",gt,pt);yt.setup(Et,pt);const bt=new _message_handler.MessageHandler(gt,gt+"_worker",pt);this._messageHandler=bt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})}).catch(yt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${yt.message}".`))})}destroy(){var yt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(yt=ot(_PDFWorker,j))==null||yt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(yt){var gt;if(!(yt!=null&&yt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const pt=(gt=ot(this,j))==null?void 0:gt.get(yt.port);if(pt){if(pt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return pt}return new _PDFWorker(yt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var yt;try{return((yt=globalThis.pdfjsWorker)==null?void 0:yt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};j=new WeakMap,Ot(_PDFWorker,j,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(pt,gt,Et,bt,Pt){Ot(this,lt);Ot(this,$,new Map);Ot(this,_e,new Map);Ot(this,et,new Map);Ot(this,rt,null);this.messageHandler=pt,this.loadingTask=gt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:bt.ownerDocument,styleElement:bt.styleElement}),this._params=bt,this.canvasFactory=Pt.canvasFactory,this.filterFactory=Pt.filterFactory,this.cMapReaderFactory=Pt.cMapReaderFactory,this.standardFontDataFactory=Pt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Et,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(pt,gt=_util.AnnotationMode.ENABLE,Et=null,bt=!1){let Pt=_util.RenderingIntentFlag.DISPLAY,xt=_annotation_storage.SerializableEmpty;switch(pt){case"any":Pt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Pt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${pt}`)}switch(gt){case _util.AnnotationMode.DISABLE:Pt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Pt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Pt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,xt=(Pt&_util.RenderingIntentFlag.PRINT&&Et instanceof _annotation_storage.PrintAnnotationStorage?Et:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${gt}`)}return bt&&(Pt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Pt,cacheKey:`${Pt}_${xt.hash}`,annotationStorageSerializable:xt}}destroy(){var Et;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Et=ot(this,rt))==null||Et.reject(new Error("Worker was destroyed during onPassword callback"));const pt=[];for(const bt of ot(this,_e).values())pt.push(bt._destroy());ot(this,_e).clear(),ot(this,et).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const gt=this.messageHandler.sendWithPromise("Terminate",null);return pt.push(gt),Promise.all(pt).then(()=>{var bt;this.commonObjs.clear(),this.fontLoader.clear(),ot(this,$).clear(),this.filterFactory.destroy(),(bt=this._networkStream)==null||bt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:pt,loadingTask:gt}=this;pt.on("GetReader",(Et,bt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Pt=>{this._lastProgress={loaded:Pt.loaded,total:Pt.total}},bt.onPull=()=>{this._fullReader.read().then(function({value:Pt,done:xt}){if(xt){bt.close();return}(0,_util.assert)(Pt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Pt),1,[Pt])}).catch(Pt=>{bt.error(Pt)})},bt.onCancel=Pt=>{this._fullReader.cancel(Pt),bt.ready.catch(xt=>{if(!this.destroyed)throw xt})}}),pt.on("ReaderHeadersReady",Et=>{const bt=new _util.PromiseCapability,Pt=this._fullReader;return Pt.headersReady.then(()=>{var xt;(!Pt.isStreamingSupported||!Pt.isRangeSupported)&&(this._lastProgress&&((xt=gt.onProgress)==null||xt.call(gt,this._lastProgress)),Pt.onProgress=Lt=>{var Bt;(Bt=gt.onProgress)==null||Bt.call(gt,{loaded:Lt.loaded,total:Lt.total})}),bt.resolve({isStreamingSupported:Pt.isStreamingSupported,isRangeSupported:Pt.isRangeSupported,contentLength:Pt.contentLength})},bt.reject),bt.promise}),pt.on("GetRangeReader",(Et,bt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Pt=this._networkStream.getRangeReader(Et.begin,Et.end);if(!Pt){bt.close();return}bt.onPull=()=>{Pt.read().then(function({value:xt,done:Lt}){if(Lt){bt.close();return}(0,_util.assert)(xt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{bt.error(xt)})},bt.onCancel=xt=>{Pt.cancel(xt),bt.ready.catch(Lt=>{if(!this.destroyed)throw Lt})}}),pt.on("GetDoc",({pdfInfo:Et})=>{this._numPages=Et.numPages,this._htmlForXfa=Et.htmlForXfa,delete Et.htmlForXfa,gt._capability.resolve(new PDFDocumentProxy(Et,this))}),pt.on("DocException",function(Et){let bt;switch(Et.name){case"PasswordException":bt=new _util.PasswordException(Et.message,Et.code);break;case"InvalidPDFException":bt=new _util.InvalidPDFException(Et.message);break;case"MissingPDFException":bt=new _util.MissingPDFException(Et.message);break;case"UnexpectedResponseException":bt=new _util.UnexpectedResponseException(Et.message,Et.status);break;case"UnknownErrorException":bt=new _util.UnknownErrorException(Et.message,Et.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}gt._capability.reject(bt)}),pt.on("PasswordRequest",Et=>{if(Yt(this,rt,new _util.PromiseCapability),gt.onPassword){const bt=Pt=>{Pt instanceof Error?ot(this,rt).reject(Pt):ot(this,rt).resolve({password:Pt})};try{gt.onPassword(bt,Et.code)}catch(Pt){ot(this,rt).reject(Pt)}}else ot(this,rt).reject(new _util.PasswordException(Et.message,Et.code));return ot(this,rt).promise}),pt.on("DataLoaded",Et=>{var bt;(bt=gt.onProgress)==null||bt.call(gt,{loaded:Et.length,total:Et.length}),this.downloadInfoCapability.resolve(Et)}),pt.on("StartRenderPage",Et=>{if(this.destroyed)return;ot(this,_e).get(Et.pageIndex)._startRenderPage(Et.transparency,Et.cacheKey)}),pt.on("commonobj",([Et,bt,Pt])=>{var xt;if(!this.destroyed&&!this.commonObjs.has(Et))switch(bt){case"Font":const Lt=this._params;if("error"in Pt){const kt=Pt.error;(0,_util.warn)(`Error during font loading: ${kt}`),this.commonObjs.resolve(Et,kt);break}const Bt=Lt.pdfBug&&((xt=globalThis.FontInspector)!=null&&xt.enabled)?(kt,Ut)=>globalThis.FontInspector.fontAdded(kt,Ut):null,Kt=new _font_loader.FontFaceObject(Pt,{isEvalSupported:Lt.isEvalSupported,disableFontFace:Lt.disableFontFace,ignoreErrors:Lt.ignoreErrors,inspectFont:Bt});this.fontLoader.bind(Kt).catch(kt=>pt.sendWithPromise("FontFallback",{id:Et})).finally(()=>{!Lt.fontExtraProperties&&Kt.data&&(Kt.data=null),this.commonObjs.resolve(Et,Kt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Et,Pt);break;default:throw new Error(`Got unknown common object type ${bt}`)}}),pt.on("obj",([Et,bt,Pt,xt])=>{var Bt;if(this.destroyed)return;const Lt=ot(this,_e).get(bt);if(!Lt.objs.has(Et))switch(Pt){case"Image":if(Lt.objs.resolve(Et,xt),xt){let Kt;if(xt.bitmap){const{width:kt,height:Ut}=xt;Kt=kt*Ut*4}else Kt=((Bt=xt.data)==null?void 0:Bt.length)||0;Kt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Lt._maybeCleanupAfterRender=!0)}break;case"Pattern":Lt.objs.resolve(Et,xt);break;default:throw new Error(`Got unknown object type ${Pt}`)}}),pt.on("DocProgress",Et=>{var bt;this.destroyed||(bt=gt.onProgress)==null||bt.call(gt,{loaded:Et.loaded,total:Et.total})}),pt.on("FetchBuiltInCMap",Et=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Et):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),pt.on("FetchStandardFontData",Et=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Et):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Et;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:pt,transfers:gt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:pt,filename:((Et=this._fullReader)==null?void 0:Et.filename)??null},gt).finally(()=>{this.annotationStorage.resetModified()})}getPage(pt){if(!Number.isInteger(pt)||pt<=0||pt>this._numPages)return Promise.reject(new Error("Invalid page request."));const gt=pt-1,Et=ot(this,et).get(gt);if(Et)return Et;const bt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:gt}).then(Pt=>{if(this.destroyed)throw new Error("Transport destroyed");const xt=new PDFPageProxy(gt,Pt,this,this._params.pdfBug);return ot(this,_e).set(gt,xt),xt});return ot(this,et).set(gt,bt),bt}getPageIndex(pt){return typeof pt!="object"||pt===null||!Number.isInteger(pt.num)||pt.num<0||!Number.isInteger(pt.gen)||pt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:pt.num,gen:pt.gen})}getAnnotations(pt,gt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pt,intent:gt})}getFieldObjects(){return jt(this,lt,dr).call(this,"GetFieldObjects")}hasJSActions(){return jt(this,lt,dr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(pt){return typeof pt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:pt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return jt(this,lt,dr).call(this,"GetDocJSActions")}getPageJSActions(pt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pt})}getStructTree(pt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:pt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(pt=>new _optional_content_config.OptionalContentConfig(pt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const pt="GetMetadata",gt=ot(this,$).get(pt);if(gt)return gt;const Et=this.messageHandler.sendWithPromise(pt,null).then(bt=>{var Pt,xt;return{info:bt[0],metadata:bt[1]?new _metadata.Metadata(bt[1]):null,contentDispositionFilename:((Pt=this._fullReader)==null?void 0:Pt.filename)??null,contentLength:((xt=this._fullReader)==null?void 0:xt.contentLength)??null}});return ot(this,$).set(pt,Et),Et}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(pt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const gt of ot(this,_e).values())if(!gt.cleanup())throw new Error(`startCleanup: Page ${gt.pageNumber} is currently rendering.`);this.commonObjs.clear(),pt||this.fontLoader.clear(),ot(this,$).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:pt,enableXfa:gt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:pt,enableXfa:gt})}}$=new WeakMap,_e=new WeakMap,et=new WeakMap,rt=new WeakMap,lt=new WeakSet,dr=function(pt,gt=null){const Et=ot(this,$).get(pt);if(Et)return Et;const bt=this.messageHandler.sendWithPromise(pt,gt);return ot(this,$).set(pt,bt),bt};class PDFObjects{constructor(){Ot(this,it);Ot(this,nt,Object.create(null))}get(pt,gt=null){if(gt){const bt=jt(this,it,Tr).call(this,pt);return bt.capability.promise.then(()=>gt(bt.data)),null}const Et=ot(this,nt)[pt];if(!(Et!=null&&Et.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${pt}.`);return Et.data}has(pt){const gt=ot(this,nt)[pt];return(gt==null?void 0:gt.capability.settled)||!1}resolve(pt,gt=null){const Et=jt(this,it,Tr).call(this,pt);Et.data=gt,Et.capability.resolve()}clear(){var pt;for(const gt in ot(this,nt)){const{data:Et}=ot(this,nt)[gt];(pt=Et==null?void 0:Et.bitmap)==null||pt.close()}Yt(this,nt,Object.create(null))}}nt=new WeakMap,it=new WeakSet,Tr=function(pt){var gt;return(gt=ot(this,nt))[pt]||(gt[pt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(pt){Ot(this,st,null);Yt(this,st,pt),this.onContinue=null}get promise(){return ot(this,st).capability.promise}cancel(pt=0){ot(this,st).cancel(null,pt)}get separateAnnots(){const{separateAnnots:pt}=ot(this,st).operatorList;if(!pt)return!1;const{annotationCanvasMap:gt}=ot(this,st);return pt.form||pt.canvas&&(gt==null?void 0:gt.size)>0}}st=new WeakMap,exports.RenderTask=RenderTask;const Ct=class Ct{constructor({callback:pt,params:gt,objs:Et,commonObjs:bt,annotationCanvasMap:Pt,operatorList:xt,pageIndex:Lt,canvasFactory:Bt,filterFactory:Kt,useRequestAnimationFrame:kt=!1,pdfBug:Ut=!1,pageColors:St=null}){this.callback=pt,this.params=gt,this.objs=Et,this.commonObjs=bt,this.annotationCanvasMap=Pt,this.operatorListIdx=null,this.operatorList=xt,this._pageIndex=Lt,this.canvasFactory=Bt,this.filterFactory=Kt,this._pdfBug=Ut,this.pageColors=St,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=kt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=gt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:pt=!1,optionalContentConfig:gt}){var Lt,Bt;if(this.cancelled)return;if(this._canvas){if(ot(Ct,at).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ot(Ct,at).add(this._canvas)}this._pdfBug&&((Lt=globalThis.StepperManager)!=null&&Lt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Et,viewport:bt,transform:Pt,background:xt}=this.params;this.gfx=new _canvas.CanvasGraphics(Et,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:gt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Pt,viewport:bt,transparency:pt,background:xt}),this.operatorListIdx=0,this.graphicsReady=!0,(Bt=this.graphicsReadyCallback)==null||Bt.call(this)}cancel(pt=null,gt=0){var Et;this.running=!1,this.cancelled=!0,(Et=this.gfx)==null||Et.endDrawing(),ot(Ct,at).delete(this._canvas),this.callback(pt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,gt))}operatorListChanged(){var pt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(pt=this.stepper)==null||pt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ot(Ct,at).delete(this._canvas),this.callback())))}};at=new WeakMap,Ot(Ct,at,new WeakSet);let InternalRenderTask=Ct;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(i,e,o)=>{var b,_,j,oo,_e;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var s=o(1),a=o(4),c=o(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=d;class h{constructor(){Ot(this,j);Ot(this,b,!1);Ot(this,_,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(rt,lt){const tt=ot(this,_).get(rt);return tt===void 0?lt:Object.assign(lt,tt)}getRawValue(rt){return ot(this,_).get(rt)}remove(rt){if(ot(this,_).delete(rt),ot(this,_).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const lt of ot(this,_).values())if(lt instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(rt,lt){const tt=ot(this,_).get(rt);let nt=!1;if(tt!==void 0)for(const[it,ft]of Object.entries(lt))tt[it]!==ft&&(nt=!0,tt[it]=ft);else nt=!0,ot(this,_).set(rt,lt);nt&&jt(this,j,oo).call(this),lt instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(lt.constructor._type)}has(rt){return ot(this,_).has(rt)}getAll(){return ot(this,_).size>0?(0,s.objectFromMap)(ot(this,_)):null}setAll(rt){for(const[lt,tt]of Object.entries(rt))this.setValue(lt,tt)}get size(){return ot(this,_).size}resetModified(){ot(this,b)&&(Yt(this,b,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(ot(this,_).size===0)return d;const rt=new Map,lt=new c.MurmurHash3_64,tt=[],nt=Object.create(null);let it=!1;for(const[ft,st]of ot(this,_)){const at=st instanceof a.AnnotationEditor?st.serialize(!1,nt):st;at&&(rt.set(ft,at),lt.update(`${ft}:${JSON.stringify(at)}`),it||(it=!!at.bitmap))}if(it)for(const ft of rt.values())ft.bitmap&&tt.push(ft.bitmap);return rt.size>0?{map:rt,hash:lt.hexdigest(),transfers:tt}:d}}b=new WeakMap,_=new WeakMap,j=new WeakSet,oo=function(){ot(this,b)||(Yt(this,b,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=h;class g extends h{constructor(lt){super();Ot(this,_e,void 0);const{map:tt,hash:nt,transfers:it}=lt.serializable,ft=structuredClone(tt,it?{transfer:it}:null);Yt(this,_e,{map:ft,hash:nt,transfers:it})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return ot(this,_e)}}_e=new WeakMap,e.PrintAnnotationStorage=g},(i,e,o)=>{var g,b,_,j,$,_e,et,rt,lt,tt,nt,it,ft,st,at,kr,yt,br,gt,_r,bt,Rr,xt,so,Bt,ao,kt,lo,St,Ir,an,co;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var s=o(5),a=o(1),c=o(6);const ct=class ct{constructor(ut){Ot(this,at);Ot(this,yt);Ot(this,bt);Ot(this,xt);Ot(this,Bt);Ot(this,kt);Ot(this,St);Ot(this,an);Ot(this,g,"");Ot(this,b,!1);Ot(this,_,null);Ot(this,j,null);Ot(this,$,null);Ot(this,_e,!1);Ot(this,et,null);Ot(this,rt,this.focusin.bind(this));Ot(this,lt,this.focusout.bind(this));Ot(this,tt,!1);Ot(this,nt,!1);Ot(this,it,!1);zn(this,"_initialOptions",Object.create(null));zn(this,"_uiManager",null);zn(this,"_focusEventsAllowed",!0);zn(this,"_l10nPromise",null);Ot(this,ft,!1);Ot(this,st,ct._zIndex++);this.constructor===ct&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=ut.parent,this.id=ut.id,this.width=this.height=null,this.pageIndex=ut.parent.pageIndex,this.name=ut.name,this.div=null,this._uiManager=ut.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=ut.isCentered,this._structTreeParentId=null;const{rotation:vt,rawDims:{pageWidth:At,pageHeight:Tt,pageX:_t,pageY:Mt}}=this.parent.viewport;this.rotation=vt,this.pageRotation=(360+vt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[At,Tt],this.pageTranslation=[_t,Mt];const[Wt,Vt]=this.parentDimensions;this.x=ut.x/Wt,this.y=ut.y/Vt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(ut){const vt=new h({id:ut.parent.getNextId(),parent:ut.parent,uiManager:ut._uiManager});vt.annotationElementId=ut.annotationElementId,vt.deleted=!0,vt._uiManager.addToAnnotationStorage(vt)}static initialize(ut,vt=null){if(ct._l10nPromise||(ct._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Tt=>[Tt,ut.get(Tt)]))),vt!=null&&vt.strings)for(const Tt of vt.strings)ct._l10nPromise.set(Tt,ut.get(Tt));if(ct._borderLineWidth!==-1)return;const At=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(At.getPropertyValue("--outline-width"))||0}static updateDefaultParams(ut,vt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(ut){return!1}static paste(ut,vt){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ot(this,ft)}set _isDraggable(ut){var vt;Yt(this,ft,ut),(vt=this.div)==null||vt.classList.toggle("draggable",ut)}center(){const[ut,vt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*vt/(ut*2),this.y+=this.width*ut/(vt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*vt/(ut*2),this.y-=this.width*ut/(vt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(ut){this._uiManager.addCommands(ut)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ot(this,st)}setParent(ut){ut!==null&&(this.pageIndex=ut.pageIndex,this.pageDimensions=ut.pageDimensions),this.parent=ut}focusin(ut){this._focusEventsAllowed&&(ot(this,tt)?Yt(this,tt,!1):this.parent.setSelected(this))}focusout(ut){var At;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const vt=ut.relatedTarget;vt!=null&&vt.closest(`#${this.id}`)||(ut.preventDefault(),(At=this.parent)!=null&&At.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(ut,vt,At,Tt){const[_t,Mt]=this.parentDimensions;[At,Tt]=this.screenToPageTranslation(At,Tt),this.x=(ut+At)/_t,this.y=(vt+Tt)/Mt,this.fixAndSetPosition()}translate(ut,vt){jt(this,at,kr).call(this,this.parentDimensions,ut,vt)}translateInPage(ut,vt){jt(this,at,kr).call(this,this.pageDimensions,ut,vt),this.div.scrollIntoView({block:"nearest"})}drag(ut,vt){const[At,Tt]=this.parentDimensions;if(this.x+=ut/At,this.y+=vt/Tt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Qt,y:tn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Qt,tn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:_t,y:Mt}=this;const[Wt,Vt]=jt(this,yt,br).call(this);_t+=Wt,Mt+=Vt,this.div.style.left=`${(100*_t).toFixed(2)}%`,this.div.style.top=`${(100*Mt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[ut,vt]=this.pageDimensions;let{x:At,y:Tt,width:_t,height:Mt}=this;switch(_t*=ut,Mt*=vt,At*=ut,Tt*=vt,this.rotation){case 0:At=Math.max(0,Math.min(ut-_t,At)),Tt=Math.max(0,Math.min(vt-Mt,Tt));break;case 90:At=Math.max(0,Math.min(ut-Mt,At)),Tt=Math.min(vt,Math.max(_t,Tt));break;case 180:At=Math.min(ut,Math.max(_t,At)),Tt=Math.min(vt,Math.max(Mt,Tt));break;case 270:At=Math.min(ut,Math.max(Mt,At)),Tt=Math.max(0,Math.min(vt-_t,Tt));break}this.x=At/=ut,this.y=Tt/=vt;const[Wt,Vt]=jt(this,yt,br).call(this);At+=Wt,Tt+=Vt;const{style:Qt}=this.div;Qt.left=`${(100*At).toFixed(2)}%`,Qt.top=`${(100*Tt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(ut,vt){var At;return jt(At=ct,gt,_r).call(At,ut,vt,this.parentRotation)}pageTranslationToScreen(ut,vt){var At;return jt(At=ct,gt,_r).call(At,ut,vt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:ut,pageDimensions:[vt,At]}=this,Tt=vt*ut,_t=At*ut;return a.FeatureTest.isCSSRoundSupported?[Math.round(Tt),Math.round(_t)]:[Tt,_t]}setDims(ut,vt){var _t;const[At,Tt]=this.parentDimensions;this.div.style.width=`${(100*ut/At).toFixed(2)}%`,ot(this,_e)||(this.div.style.height=`${(100*vt/Tt).toFixed(2)}%`),(_t=ot(this,_))==null||_t.classList.toggle("small",ut<ct.SMALL_EDITOR_SIZE||vt<ct.SMALL_EDITOR_SIZE)}fixDims(){const{style:ut}=this.div,{height:vt,width:At}=ut,Tt=At.endsWith("%"),_t=!ot(this,_e)&&vt.endsWith("%");if(Tt&&_t)return;const[Mt,Wt]=this.parentDimensions;Tt||(ut.width=`${(100*parseFloat(At)/Mt).toFixed(2)}%`),!ot(this,_e)&&!_t&&(ut.height=`${(100*parseFloat(vt)/Wt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(ot(this,_))return;const ut=Yt(this,_,document.createElement("button"));ut.className="altText";const vt=await ct._l10nPromise.get("editor_alt_text_button_label");ut.textContent=vt,ut.setAttribute("aria-label",vt),ut.tabIndex="0",ut.addEventListener("contextmenu",c.noContextMenu),ut.addEventListener("pointerdown",At=>At.stopPropagation()),ut.addEventListener("click",At=>{At.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),ut.addEventListener("keydown",At=>{At.target===ut&&At.key==="Enter"&&(At.preventDefault(),this._uiManager.editAltText(this))}),jt(this,St,Ir).call(this),this.div.append(ut),ct.SMALL_EDITOR_SIZE||(ct.SMALL_EDITOR_SIZE=Math.min(128,Math.round(ut.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:ot(this,g),decorative:ot(this,b)}}set altTextData({altText:ut,decorative:vt}){ot(this,g)===ut&&ot(this,b)===vt||(Yt(this,g,ut),Yt(this,b,vt),jt(this,St,Ir).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",ot(this,rt)),this.div.addEventListener("focusout",ot(this,lt));const[ut,vt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*vt/ut).toFixed(2)}%`,this.div.style.maxHeight=`${(100*ut/vt).toFixed(2)}%`);const[At,Tt]=this.getInitialTranslation();return this.translate(At,Tt),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(ut){const{isMac:vt}=a.FeatureTest.platform;if(ut.button!==0||ut.ctrlKey&&vt){ut.preventDefault();return}Yt(this,tt,!0),jt(this,an,co).call(this,ut)}moveInDOM(){var ut;(ut=this.parent)==null||ut.moveEditorInDOM(this)}_setParentAndPosition(ut,vt,At){ut.changeParent(this),this.x=vt,this.y=At,this.fixAndSetPosition()}getRect(ut,vt){const At=this.parentScale,[Tt,_t]=this.pageDimensions,[Mt,Wt]=this.pageTranslation,Vt=ut/At,Qt=vt/At,tn=this.x*Tt,on=this.y*_t,Zt=this.width*Tt,fn=this.height*_t;switch(this.rotation){case 0:return[tn+Vt+Mt,_t-on-Qt-fn+Wt,tn+Vt+Zt+Mt,_t-on-Qt+Wt];case 90:return[tn+Qt+Mt,_t-on+Vt+Wt,tn+Qt+fn+Mt,_t-on+Vt+Zt+Wt];case 180:return[tn-Vt-Zt+Mt,_t-on+Qt+Wt,tn-Vt+Mt,_t-on+Qt+fn+Wt];case 270:return[tn-Qt-fn+Mt,_t-on-Vt-Zt+Wt,tn-Qt+Mt,_t-on-Vt+Wt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(ut,vt){const[At,Tt,_t,Mt]=ut,Wt=_t-At,Vt=Mt-Tt;switch(this.rotation){case 0:return[At,vt-Mt,Wt,Vt];case 90:return[At,vt-Tt,Vt,Wt];case 180:return[_t,vt-Tt,Wt,Vt];case 270:return[_t,vt-Mt,Vt,Wt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Yt(this,it,!0)}disableEditMode(){Yt(this,it,!1)}isInEditMode(){return ot(this,it)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var ut,vt;(ut=this.div)==null||ut.addEventListener("focusin",ot(this,rt)),(vt=this.div)==null||vt.addEventListener("focusout",ot(this,lt))}serialize(ut=!1,vt=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(ut,vt,At){const Tt=new this.prototype.constructor({parent:vt,id:vt.getNextId(),uiManager:At});Tt.rotation=ut.rotation;const[_t,Mt]=Tt.pageDimensions,[Wt,Vt,Qt,tn]=Tt.getRectInCurrentCoords(ut.rect,Mt);return Tt.x=Wt/_t,Tt.y=Vt/Mt,Tt.width=Qt/_t,Tt.height=tn/Mt,Tt}remove(){var ut;this.div.removeEventListener("focusin",ot(this,rt)),this.div.removeEventListener("focusout",ot(this,lt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(ut=ot(this,_))==null||ut.remove(),Yt(this,_,null),Yt(this,j,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(jt(this,xt,so).call(this),ot(this,et).classList.remove("hidden"))}select(){var ut;this.makeResizable(),(ut=this.div)==null||ut.classList.add("selectedEditor")}unselect(){var ut,vt,At;(ut=ot(this,et))==null||ut.classList.add("hidden"),(vt=this.div)==null||vt.classList.remove("selectedEditor"),(At=this.div)!=null&&At.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(ut,vt){}disableEditing(){ot(this,_)&&(ot(this,_).hidden=!0)}enableEditing(){ot(this,_)&&(ot(this,_).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return ot(this,nt)}set isEditing(ut){Yt(this,nt,ut),this.parent&&(ut?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(ut,vt){Yt(this,_e,!0);const At=ut/vt,{style:Tt}=this.div;Tt.aspectRatio=At,Tt.height="auto"}static get MIN_SIZE(){return 16}};g=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,et=new WeakMap,rt=new WeakMap,lt=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakMap,st=new WeakMap,at=new WeakSet,kr=function([ut,vt],At,Tt){[At,Tt]=this.screenToPageTranslation(At,Tt),this.x+=At/ut,this.y+=Tt/vt,this.fixAndSetPosition()},yt=new WeakSet,br=function(){const[ut,vt]=this.parentDimensions,{_borderLineWidth:At}=ct,Tt=At/ut,_t=At/vt;switch(this.rotation){case 90:return[-Tt,_t];case 180:return[Tt,_t];case 270:return[Tt,-_t];default:return[-Tt,-_t]}},gt=new WeakSet,_r=function(ut,vt,At){switch(At){case 90:return[vt,-ut];case 180:return[-ut,-vt];case 270:return[-vt,ut];default:return[ut,vt]}},bt=new WeakSet,Rr=function(ut){switch(ut){case 90:{const[vt,At]=this.pageDimensions;return[0,-vt/At,At/vt,0]}case 180:return[-1,0,0,-1];case 270:{const[vt,At]=this.pageDimensions;return[0,vt/At,-At/vt,0]}default:return[1,0,0,1]}},xt=new WeakSet,so=function(){if(ot(this,et))return;Yt(this,et,document.createElement("div")),ot(this,et).classList.add("resizers");const ut=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||ut.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const vt of ut){const At=document.createElement("div");ot(this,et).append(At),At.classList.add("resizer",vt),At.addEventListener("pointerdown",jt(this,Bt,ao).bind(this,vt)),At.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(ot(this,et))},Bt=new WeakSet,ao=function(ut,vt){vt.preventDefault();const{isMac:At}=a.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&At)return;const Tt=jt(this,kt,lo).bind(this,ut),_t=this._isDraggable;this._isDraggable=!1;const Mt={passive:!0,capture:!0};window.addEventListener("pointermove",Tt,Mt);const Wt=this.x,Vt=this.y,Qt=this.width,tn=this.height,on=this.parent.div.style.cursor,Zt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(vt.target).cursor;const fn=()=>{this._isDraggable=_t,window.removeEventListener("pointerup",fn),window.removeEventListener("blur",fn),window.removeEventListener("pointermove",Tt,Mt),this.parent.div.style.cursor=on,this.div.style.cursor=Zt;const xn=this.x,hn=this.y,Cn=this.width,sn=this.height;xn===Wt&&hn===Vt&&Cn===Qt&&sn===tn||this.addCommands({cmd:()=>{this.width=Cn,this.height=sn,this.x=xn,this.y=hn;const[Gt,qt]=this.parentDimensions;this.setDims(Gt*Cn,qt*sn),this.fixAndSetPosition()},undo:()=>{this.width=Qt,this.height=tn,this.x=Wt,this.y=Vt;const[Gt,qt]=this.parentDimensions;this.setDims(Gt*Qt,qt*tn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",fn),window.addEventListener("blur",fn)},kt=new WeakSet,lo=function(ut,vt){const[At,Tt]=this.parentDimensions,_t=this.x,Mt=this.y,Wt=this.width,Vt=this.height,Qt=ct.MIN_SIZE/At,tn=ct.MIN_SIZE/Tt,on=cn=>Math.round(cn*1e4)/1e4,Zt=jt(this,bt,Rr).call(this,this.rotation),fn=(cn,dn)=>[Zt[0]*cn+Zt[2]*dn,Zt[1]*cn+Zt[3]*dn],xn=jt(this,bt,Rr).call(this,360-this.rotation),hn=(cn,dn)=>[xn[0]*cn+xn[2]*dn,xn[1]*cn+xn[3]*dn];let Cn,sn,Gt=!1,qt=!1;switch(ut){case"topLeft":Gt=!0,Cn=(cn,dn)=>[0,0],sn=(cn,dn)=>[cn,dn];break;case"topMiddle":Cn=(cn,dn)=>[cn/2,0],sn=(cn,dn)=>[cn/2,dn];break;case"topRight":Gt=!0,Cn=(cn,dn)=>[cn,0],sn=(cn,dn)=>[0,dn];break;case"middleRight":qt=!0,Cn=(cn,dn)=>[cn,dn/2],sn=(cn,dn)=>[0,dn/2];break;case"bottomRight":Gt=!0,Cn=(cn,dn)=>[cn,dn],sn=(cn,dn)=>[0,0];break;case"bottomMiddle":Cn=(cn,dn)=>[cn/2,dn],sn=(cn,dn)=>[cn/2,0];break;case"bottomLeft":Gt=!0,Cn=(cn,dn)=>[0,dn],sn=(cn,dn)=>[cn,0];break;case"middleLeft":qt=!0,Cn=(cn,dn)=>[0,dn/2],sn=(cn,dn)=>[cn,dn/2];break}const Nt=Cn(Wt,Vt),Xt=sn(Wt,Vt);let nn=fn(...Xt);const mn=on(_t+nn[0]),vn=on(Mt+nn[1]);let Tn=1,Pn=1,[Rn,In]=this.screenToPageTranslation(vt.movementX,vt.movementY);if([Rn,In]=hn(Rn/At,In/Tt),Gt){const cn=Math.hypot(Wt,Vt);Tn=Pn=Math.max(Math.min(Math.hypot(Xt[0]-Nt[0]-Rn,Xt[1]-Nt[1]-In)/cn,1/Wt,1/Vt),Qt/Wt,tn/Vt)}else qt?Tn=Math.max(Qt,Math.min(1,Math.abs(Xt[0]-Nt[0]-Rn)))/Wt:Pn=Math.max(tn,Math.min(1,Math.abs(Xt[1]-Nt[1]-In)))/Vt;const Mn=on(Wt*Tn),en=on(Vt*Pn);nn=fn(...sn(Mn,en));const zt=mn-nn[0],Ft=vn-nn[1];this.width=Mn,this.height=en,this.x=zt,this.y=Ft,this.setDims(At*Mn,Tt*en),this.fixAndSetPosition()},St=new WeakSet,Ir=async function(){var At;const ut=ot(this,_);if(!ut)return;if(!ot(this,g)&&!ot(this,b)){ut.classList.remove("done"),(At=ot(this,j))==null||At.remove();return}ct._l10nPromise.get("editor_alt_text_edit_button_label").then(Tt=>{ut.setAttribute("aria-label",Tt)});let vt=ot(this,j);if(!vt){Yt(this,j,vt=document.createElement("span")),vt.className="tooltip",vt.setAttribute("role","tooltip");const Tt=vt.id=`alt-text-tooltip-${this.id}`;ut.setAttribute("aria-describedby",Tt);const _t=100;ut.addEventListener("mouseenter",()=>{Yt(this,$,setTimeout(()=>{Yt(this,$,null),ot(this,j).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},_t))}),ut.addEventListener("mouseleave",()=>{var Mt;clearTimeout(ot(this,$)),Yt(this,$,null),(Mt=ot(this,j))==null||Mt.classList.remove("show")})}ut.classList.add("done"),vt.innerText=ot(this,b)?await ct._l10nPromise.get("editor_alt_text_decorative_tooltip"):ot(this,g),vt.parentNode||ut.append(vt)},an=new WeakSet,co=function(ut){if(!this._isDraggable)return;const vt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let At,Tt;vt&&(At={passive:!0,capture:!0},Tt=Mt=>{const[Wt,Vt]=this.screenToPageTranslation(Mt.movementX,Mt.movementY);this._uiManager.dragSelectedEditors(Wt,Vt)},window.addEventListener("pointermove",Tt,At));const _t=()=>{if(window.removeEventListener("pointerup",_t),window.removeEventListener("blur",_t),vt&&window.removeEventListener("pointermove",Tt,At),Yt(this,tt,!1),!this._uiManager.endDragSession()){const{isMac:Mt}=a.FeatureTest.platform;ut.ctrlKey&&!Mt||ut.shiftKey||ut.metaKey&&Mt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",_t),window.addEventListener("blur",_t)},Ot(ct,gt),zn(ct,"_borderLineWidth",-1),zn(ct,"_colorManager",new s.ColorManager),zn(ct,"_zIndex",1),zn(ct,"SMALL_EDITOR_SIZE",0);let d=ct;e.AnnotationEditor=d;class h extends d{constructor(ut){super(ut),this.annotationElementId=ut.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,o)=>{var _e,et,rt,lt,tt,Pr,ft,st,at,Ct,yt,uo,Et,bt,Pt,xt,Lt,Bt,Kt,kt,Ut,St,rn,an,ht,ct,mt,ut,vt,At,Tt,_t,Mt,Wt,Vt,Qt,tn,on,Zt,fn,xn,hn,Cn,sn,Gt,qt,Nt,ho,nn,Mr,vn,Nr,Pn,hr,In,Or,en,Lr,Ft,Gn,dn,rr,Bn,po,pn,fo,gn,Dr,_n,ir,un,Fr;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=c,e.opacityToHex=d;var s=o(1),a=o(6);function c(Rt,dt,wt){for(const It of wt)dt.addEventListener(It,Rt[It].bind(Rt))}function d(Rt){return Math.round(Math.min(255,Math.max(1,255*Rt))).toString(16).padStart(2,"0")}class h{constructor(){Ot(this,_e,0)}getId(){return`${s.AnnotationEditorPrefix}${nr(this,_e)._++}`}}_e=new WeakMap;const it=class it{constructor(){Ot(this,tt);Ot(this,et,(0,s.getUuid)());Ot(this,rt,0);Ot(this,lt,null)}static get _isSVGFittingCanvas(){const dt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',It=new OffscreenCanvas(1,3).getContext("2d"),Dt=new Image;Dt.src=dt;const Ht=Dt.decode().then(()=>(It.drawImage(Dt,0,0,1,1,0,0,1,3),new Uint32Array(It.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",Ht)}async getFromFile(dt){const{lastModified:wt,name:It,size:Dt,type:Ht}=dt;return jt(this,tt,Pr).call(this,`${wt}_${It}_${Dt}_${Ht}`,dt)}async getFromUrl(dt){return jt(this,tt,Pr).call(this,dt,dt)}async getFromId(dt){ot(this,lt)||Yt(this,lt,new Map);const wt=ot(this,lt).get(dt);return wt?wt.bitmap?(wt.refCounter+=1,wt):wt.file?this.getFromFile(wt.file):this.getFromUrl(wt.url):null}getSvgUrl(dt){const wt=ot(this,lt).get(dt);return wt!=null&&wt.isSvg?wt.svgUrl:null}deleteId(dt){ot(this,lt)||Yt(this,lt,new Map);const wt=ot(this,lt).get(dt);wt&&(wt.refCounter-=1,wt.refCounter===0&&(wt.bitmap=null))}isValidId(dt){return dt.startsWith(`image_${ot(this,et)}_`)}};et=new WeakMap,rt=new WeakMap,lt=new WeakMap,tt=new WeakSet,Pr=async function(dt,wt){ot(this,lt)||Yt(this,lt,new Map);let It=ot(this,lt).get(dt);if(It===null)return null;if(It!=null&&It.bitmap)return It.refCounter+=1,It;try{It||(It={bitmap:null,id:`image_${ot(this,et)}_${nr(this,rt)._++}`,refCounter:0,isSvg:!1});let Dt;if(typeof wt=="string"){It.url=wt;const Ht=await fetch(wt);if(!Ht.ok)throw new Error(Ht.statusText);Dt=await Ht.blob()}else Dt=It.file=wt;if(Dt.type==="image/svg+xml"){const Ht=it._isSVGFittingCanvas,Jt=new FileReader,ln=new Image,En=new Promise((yn,On)=>{ln.onload=()=>{It.bitmap=ln,It.isSvg=!0,yn()},Jt.onload=async()=>{const An=It.svgUrl=Jt.result;ln.src=await Ht?`${An}#svgView(preserveAspectRatio(none))`:An},ln.onerror=Jt.onerror=On});Jt.readAsDataURL(Dt),await En}else It.bitmap=await createImageBitmap(Dt);It.refCounter=1}catch(Dt){console.error(Dt),It=null}return ot(this,lt).set(dt,It),It&&ot(this,lt).set(It.id,It),It};let g=it;class b{constructor(dt=128){Ot(this,ft,[]);Ot(this,st,!1);Ot(this,at,void 0);Ot(this,Ct,-1);Yt(this,at,dt)}add({cmd:dt,undo:wt,mustExec:It,type:Dt=NaN,overwriteIfSameType:Ht=!1,keepUndo:Jt=!1}){if(It&&dt(),ot(this,st))return;const ln={cmd:dt,undo:wt,type:Dt};if(ot(this,Ct)===-1){ot(this,ft).length>0&&(ot(this,ft).length=0),Yt(this,Ct,0),ot(this,ft).push(ln);return}if(Ht&&ot(this,ft)[ot(this,Ct)].type===Dt){Jt&&(ln.undo=ot(this,ft)[ot(this,Ct)].undo),ot(this,ft)[ot(this,Ct)]=ln;return}const En=ot(this,Ct)+1;En===ot(this,at)?ot(this,ft).splice(0,1):(Yt(this,Ct,En),En<ot(this,ft).length&&ot(this,ft).splice(En)),ot(this,ft).push(ln)}undo(){ot(this,Ct)!==-1&&(Yt(this,st,!0),ot(this,ft)[ot(this,Ct)].undo(),Yt(this,st,!1),Yt(this,Ct,ot(this,Ct)-1))}redo(){ot(this,Ct)<ot(this,ft).length-1&&(Yt(this,Ct,ot(this,Ct)+1),Yt(this,st,!0),ot(this,ft)[ot(this,Ct)].cmd(),Yt(this,st,!1))}hasSomethingToUndo(){return ot(this,Ct)!==-1}hasSomethingToRedo(){return ot(this,Ct)<ot(this,ft).length-1}destroy(){Yt(this,ft,null)}}ft=new WeakMap,st=new WeakMap,at=new WeakMap,Ct=new WeakMap,e.CommandManager=b;class _{constructor(dt){Ot(this,yt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:wt}=s.FeatureTest.platform;for(const[It,Dt,Ht={}]of dt)for(const Jt of It){const ln=Jt.startsWith("mac+");wt&&ln?(this.callbacks.set(Jt.slice(4),{callback:Dt,options:Ht}),this.allKeys.add(Jt.split("+").at(-1))):!wt&&!ln&&(this.callbacks.set(Jt,{callback:Dt,options:Ht}),this.allKeys.add(Jt.split("+").at(-1)))}}exec(dt,wt){if(!this.allKeys.has(wt.key))return;const It=this.callbacks.get(jt(this,yt,uo).call(this,wt));if(!It)return;const{callback:Dt,options:{bubbles:Ht=!1,args:Jt=[],checker:ln=null}}=It;ln&&!ln(dt,wt)||(Dt.bind(dt,...Jt)(),Ht||(wt.stopPropagation(),wt.preventDefault()))}}yt=new WeakSet,uo=function(dt){dt.altKey&&this.buffer.push("alt"),dt.ctrlKey&&this.buffer.push("ctrl"),dt.metaKey&&this.buffer.push("meta"),dt.shiftKey&&this.buffer.push("shift"),this.buffer.push(dt.key);const wt=this.buffer.join("+");return this.buffer.length=0,wt},e.KeyboardManager=_;const gt=class gt{get _colors(){const dt=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(dt),(0,s.shadow)(this,"_colors",dt)}convert(dt){const wt=(0,a.getRGB)(dt);if(!window.matchMedia("(forced-colors: active)").matches)return wt;for(const[It,Dt]of this._colors)if(Dt.every((Ht,Jt)=>Ht===wt[Jt]))return gt._colorsMapping.get(It);return wt}getHexCode(dt){const wt=this._colors.get(dt);return wt?s.Util.makeHexColor(...wt):dt}};zn(gt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let j=gt;e.ColorManager=j;const wn=class wn{constructor(dt,wt,It,Dt,Ht,Jt){Ot(this,Nt);Ot(this,nn);Ot(this,vn);Ot(this,Pn);Ot(this,In);Ot(this,en);Ot(this,Ft);Ot(this,dn);Ot(this,Bn);Ot(this,pn);Ot(this,gn);Ot(this,_n);Ot(this,un);Ot(this,Et,null);Ot(this,bt,new Map);Ot(this,Pt,new Map);Ot(this,xt,null);Ot(this,Lt,null);Ot(this,Bt,new b);Ot(this,Kt,0);Ot(this,kt,new Set);Ot(this,Ut,null);Ot(this,St,null);Ot(this,rn,new Set);Ot(this,an,null);Ot(this,ht,new h);Ot(this,ct,!1);Ot(this,mt,!1);Ot(this,ut,null);Ot(this,vt,s.AnnotationEditorType.NONE);Ot(this,At,new Set);Ot(this,Tt,null);Ot(this,_t,this.blur.bind(this));Ot(this,Mt,this.focus.bind(this));Ot(this,Wt,this.copy.bind(this));Ot(this,Vt,this.cut.bind(this));Ot(this,Qt,this.paste.bind(this));Ot(this,tn,this.keydown.bind(this));Ot(this,on,this.onEditingAction.bind(this));Ot(this,Zt,this.onPageChanging.bind(this));Ot(this,fn,this.onScaleChanging.bind(this));Ot(this,xn,this.onRotationChanging.bind(this));Ot(this,hn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ot(this,Cn,[0,0]);Ot(this,sn,null);Ot(this,Gt,null);Ot(this,qt,null);Yt(this,Gt,dt),Yt(this,qt,wt),Yt(this,xt,It),this._eventBus=Dt,this._eventBus._on("editingaction",ot(this,on)),this._eventBus._on("pagechanging",ot(this,Zt)),this._eventBus._on("scalechanging",ot(this,fn)),this._eventBus._on("rotationchanging",ot(this,xn)),Yt(this,Lt,Ht.annotationStorage),Yt(this,an,Ht.filterFactory),Yt(this,Tt,Jt),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const dt=wn.prototype,wt=Ht=>{const{activeElement:Jt}=document;return Jt&&ot(Ht,Gt).contains(Jt)&&Ht.hasSomethingToControl()},It=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],dt.selectAll],[["ctrl+z","mac+meta+z"],dt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],dt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],dt.delete],[["Escape","mac+Escape"],dt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],dt.translateSelectedEditors,{args:[-It,0],checker:wt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],dt.translateSelectedEditors,{args:[-Dt,0],checker:wt}],[["ArrowRight","mac+ArrowRight"],dt.translateSelectedEditors,{args:[It,0],checker:wt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],dt.translateSelectedEditors,{args:[Dt,0],checker:wt}],[["ArrowUp","mac+ArrowUp"],dt.translateSelectedEditors,{args:[0,-It],checker:wt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],dt.translateSelectedEditors,{args:[0,-Dt],checker:wt}],[["ArrowDown","mac+ArrowDown"],dt.translateSelectedEditors,{args:[0,It],checker:wt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],dt.translateSelectedEditors,{args:[0,Dt],checker:wt}]]))}destroy(){jt(this,Pn,hr).call(this),jt(this,nn,Mr).call(this),this._eventBus._off("editingaction",ot(this,on)),this._eventBus._off("pagechanging",ot(this,Zt)),this._eventBus._off("scalechanging",ot(this,fn)),this._eventBus._off("rotationchanging",ot(this,xn));for(const dt of ot(this,Pt).values())dt.destroy();ot(this,Pt).clear(),ot(this,bt).clear(),ot(this,rn).clear(),Yt(this,Et,null),ot(this,At).clear(),ot(this,Bt).destroy(),ot(this,xt).destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",ot(this,Tt)?ot(this,an).addHCMFilter(ot(this,Tt).foreground,ot(this,Tt).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(ot(this,Gt)).direction)}editAltText(dt){var wt;(wt=ot(this,xt))==null||wt.editAltText(this,dt)}onPageChanging({pageNumber:dt}){Yt(this,Kt,dt-1)}focusMainContainer(){ot(this,Gt).focus()}findParent(dt,wt){for(const It of ot(this,Pt).values()){const{x:Dt,y:Ht,width:Jt,height:ln}=It.div.getBoundingClientRect();if(dt>=Dt&&dt<=Dt+Jt&&wt>=Ht&&wt<=Ht+ln)return It}return null}disableUserSelect(dt=!1){ot(this,qt).classList.toggle("noUserSelect",dt)}addShouldRescale(dt){ot(this,rn).add(dt)}removeShouldRescale(dt){ot(this,rn).delete(dt)}onScaleChanging({scale:dt}){this.commitOrRemove(),this.viewParameters.realScale=dt*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const wt of ot(this,rn))wt.onScaleChanging()}onRotationChanging({pagesRotation:dt}){this.commitOrRemove(),this.viewParameters.rotation=dt}addToAnnotationStorage(dt){!dt.isEmpty()&&ot(this,Lt)&&!ot(this,Lt).has(dt.id)&&ot(this,Lt).setValue(dt.id,dt)}blur(){if(!this.hasSelection)return;const{activeElement:dt}=document;for(const wt of ot(this,At))if(wt.div.contains(dt)){Yt(this,ut,[wt,dt]),wt._focusEventsAllowed=!1;break}}focus(){if(!ot(this,ut))return;const[dt,wt]=ot(this,ut);Yt(this,ut,null),wt.addEventListener("focusin",()=>{dt._focusEventsAllowed=!0},{once:!0}),wt.focus()}addEditListeners(){jt(this,vn,Nr).call(this),jt(this,In,Or).call(this)}removeEditListeners(){jt(this,Pn,hr).call(this),jt(this,en,Lr).call(this)}copy(dt){var It;if(dt.preventDefault(),(It=ot(this,Et))==null||It.commitOrRemove(),!this.hasSelection)return;const wt=[];for(const Dt of ot(this,At)){const Ht=Dt.serialize(!0);Ht&&wt.push(Ht)}wt.length!==0&&dt.clipboardData.setData("application/pdfjs",JSON.stringify(wt))}cut(dt){this.copy(dt),this.delete()}paste(dt){dt.preventDefault();const{clipboardData:wt}=dt;for(const Ht of wt.items)for(const Jt of ot(this,St))if(Jt.isHandlingMimeForPasting(Ht.type)){Jt.paste(Ht,this.currentLayer);return}let It=wt.getData("application/pdfjs");if(!It)return;try{It=JSON.parse(It)}catch(Ht){(0,s.warn)(`paste: "${Ht.message}".`);return}if(!Array.isArray(It))return;this.unselectAll();const Dt=this.currentLayer;try{const Ht=[];for(const En of It){const yn=Dt.deserialize(En);if(!yn)return;Ht.push(yn)}const Jt=()=>{for(const En of Ht)jt(this,gn,Dr).call(this,En);jt(this,un,Fr).call(this,Ht)},ln=()=>{for(const En of Ht)En.remove()};this.addCommands({cmd:Jt,undo:ln,mustExec:!0})}catch(Ht){(0,s.warn)(`paste: "${Ht.message}".`)}}keydown(dt){var wt;(wt=this.getActive())!=null&&wt.shouldGetKeyboardEvents()||wn._keyboardManager.exec(this,dt)}onEditingAction(dt){["undo","redo","delete","selectAll"].includes(dt.name)&&this[dt.name]()}setEditingState(dt){dt?(jt(this,Nt,ho).call(this),jt(this,vn,Nr).call(this),jt(this,In,Or).call(this),jt(this,Ft,Gn).call(this,{isEditing:ot(this,vt)!==s.AnnotationEditorType.NONE,isEmpty:jt(this,_n,ir).call(this),hasSomethingToUndo:ot(this,Bt).hasSomethingToUndo(),hasSomethingToRedo:ot(this,Bt).hasSomethingToRedo(),hasSelectedEditor:!1})):(jt(this,nn,Mr).call(this),jt(this,Pn,hr).call(this),jt(this,en,Lr).call(this),jt(this,Ft,Gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(dt){if(!ot(this,St)){Yt(this,St,dt);for(const wt of ot(this,St))jt(this,dn,rr).call(this,wt.defaultPropertiesToUpdate)}}getId(){return ot(this,ht).getId()}get currentLayer(){return ot(this,Pt).get(ot(this,Kt))}getLayer(dt){return ot(this,Pt).get(dt)}get currentPageIndex(){return ot(this,Kt)}addLayer(dt){ot(this,Pt).set(dt.pageIndex,dt),ot(this,ct)?dt.enable():dt.disable()}removeLayer(dt){ot(this,Pt).delete(dt.pageIndex)}updateMode(dt,wt=null){if(ot(this,vt)!==dt){if(Yt(this,vt,dt),dt===s.AnnotationEditorType.NONE){this.setEditingState(!1),jt(this,pn,fo).call(this);return}this.setEditingState(!0),jt(this,Bn,po).call(this),this.unselectAll();for(const It of ot(this,Pt).values())It.updateMode(dt);if(wt){for(const It of ot(this,bt).values())if(It.annotationElementId===wt){this.setSelected(It),It.enterInEditMode();break}}}}updateToolbar(dt){dt!==ot(this,vt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:dt})}updateParams(dt,wt){if(ot(this,St)){if(dt===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(dt);return}for(const It of ot(this,At))It.updateParams(dt,wt);for(const It of ot(this,St))It.updateDefaultParams(dt,wt)}}enableWaiting(dt=!1){if(ot(this,mt)!==dt){Yt(this,mt,dt);for(const wt of ot(this,Pt).values())dt?wt.disableClick():wt.enableClick(),wt.div.classList.toggle("waiting",dt)}}getEditors(dt){const wt=[];for(const It of ot(this,bt).values())It.pageIndex===dt&&wt.push(It);return wt}getEditor(dt){return ot(this,bt).get(dt)}addEditor(dt){ot(this,bt).set(dt.id,dt)}removeEditor(dt){var wt;ot(this,bt).delete(dt.id),this.unselect(dt),(!dt.annotationElementId||!ot(this,kt).has(dt.annotationElementId))&&((wt=ot(this,Lt))==null||wt.remove(dt.id))}addDeletedAnnotationElement(dt){ot(this,kt).add(dt.annotationElementId),dt.deleted=!0}isDeletedAnnotationElement(dt){return ot(this,kt).has(dt)}removeDeletedAnnotationElement(dt){ot(this,kt).delete(dt.annotationElementId),dt.deleted=!1}setActiveEditor(dt){ot(this,Et)!==dt&&(Yt(this,Et,dt),dt&&jt(this,dn,rr).call(this,dt.propertiesToUpdate))}toggleSelected(dt){if(ot(this,At).has(dt)){ot(this,At).delete(dt),dt.unselect(),jt(this,Ft,Gn).call(this,{hasSelectedEditor:this.hasSelection});return}ot(this,At).add(dt),dt.select(),jt(this,dn,rr).call(this,dt.propertiesToUpdate),jt(this,Ft,Gn).call(this,{hasSelectedEditor:!0})}setSelected(dt){for(const wt of ot(this,At))wt!==dt&&wt.unselect();ot(this,At).clear(),ot(this,At).add(dt),dt.select(),jt(this,dn,rr).call(this,dt.propertiesToUpdate),jt(this,Ft,Gn).call(this,{hasSelectedEditor:!0})}isSelected(dt){return ot(this,At).has(dt)}unselect(dt){dt.unselect(),ot(this,At).delete(dt),jt(this,Ft,Gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ot(this,At).size!==0}undo(){ot(this,Bt).undo(),jt(this,Ft,Gn).call(this,{hasSomethingToUndo:ot(this,Bt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:jt(this,_n,ir).call(this)})}redo(){ot(this,Bt).redo(),jt(this,Ft,Gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ot(this,Bt).hasSomethingToRedo(),isEmpty:jt(this,_n,ir).call(this)})}addCommands(dt){ot(this,Bt).add(dt),jt(this,Ft,Gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:jt(this,_n,ir).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const dt=[...ot(this,At)],wt=()=>{for(const Dt of dt)Dt.remove()},It=()=>{for(const Dt of dt)jt(this,gn,Dr).call(this,Dt)};this.addCommands({cmd:wt,undo:It,mustExec:!0})}commitOrRemove(){var dt;(dt=ot(this,Et))==null||dt.commitOrRemove()}hasSomethingToControl(){return ot(this,Et)||this.hasSelection}selectAll(){for(const dt of ot(this,At))dt.commit();jt(this,un,Fr).call(this,ot(this,bt).values())}unselectAll(){if(ot(this,Et)){ot(this,Et).commitOrRemove();return}if(this.hasSelection){for(const dt of ot(this,At))dt.unselect();ot(this,At).clear(),jt(this,Ft,Gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(dt,wt,It=!1){if(It||this.commitOrRemove(),!this.hasSelection)return;ot(this,Cn)[0]+=dt,ot(this,Cn)[1]+=wt;const[Dt,Ht]=ot(this,Cn),Jt=[...ot(this,At)],ln=1e3;ot(this,sn)&&clearTimeout(ot(this,sn)),Yt(this,sn,setTimeout(()=>{Yt(this,sn,null),ot(this,Cn)[0]=ot(this,Cn)[1]=0,this.addCommands({cmd:()=>{for(const En of Jt)ot(this,bt).has(En.id)&&En.translateInPage(Dt,Ht)},undo:()=>{for(const En of Jt)ot(this,bt).has(En.id)&&En.translateInPage(-Dt,-Ht)},mustExec:!1})},ln));for(const En of Jt)En.translateInPage(dt,wt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Yt(this,Ut,new Map);for(const dt of ot(this,At))ot(this,Ut).set(dt,{savedX:dt.x,savedY:dt.y,savedPageIndex:dt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ot(this,Ut))return!1;this.disableUserSelect(!1);const dt=ot(this,Ut);Yt(this,Ut,null);let wt=!1;for(const[{x:Dt,y:Ht,pageIndex:Jt},ln]of dt)ln.newX=Dt,ln.newY=Ht,ln.newPageIndex=Jt,wt||(wt=Dt!==ln.savedX||Ht!==ln.savedY||Jt!==ln.savedPageIndex);if(!wt)return!1;const It=(Dt,Ht,Jt,ln)=>{if(ot(this,bt).has(Dt.id)){const En=ot(this,Pt).get(ln);En?Dt._setParentAndPosition(En,Ht,Jt):(Dt.pageIndex=ln,Dt.x=Ht,Dt.y=Jt)}};return this.addCommands({cmd:()=>{for(const[Dt,{newX:Ht,newY:Jt,newPageIndex:ln}]of dt)It(Dt,Ht,Jt,ln)},undo:()=>{for(const[Dt,{savedX:Ht,savedY:Jt,savedPageIndex:ln}]of dt)It(Dt,Ht,Jt,ln)},mustExec:!0}),!0}dragSelectedEditors(dt,wt){if(ot(this,Ut))for(const It of ot(this,Ut).keys())It.drag(dt,wt)}rebuild(dt){if(dt.parent===null){const wt=this.getLayer(dt.pageIndex);wt?(wt.changeParent(dt),wt.addOrRebuild(dt)):(this.addEditor(dt),this.addToAnnotationStorage(dt),dt.rebuild())}else dt.parent.addOrRebuild(dt)}isActive(dt){return ot(this,Et)===dt}getActive(){return ot(this,Et)}getMode(){return ot(this,vt)}get imageManager(){return(0,s.shadow)(this,"imageManager",new g)}};Et=new WeakMap,bt=new WeakMap,Pt=new WeakMap,xt=new WeakMap,Lt=new WeakMap,Bt=new WeakMap,Kt=new WeakMap,kt=new WeakMap,Ut=new WeakMap,St=new WeakMap,rn=new WeakMap,an=new WeakMap,ht=new WeakMap,ct=new WeakMap,mt=new WeakMap,ut=new WeakMap,vt=new WeakMap,At=new WeakMap,Tt=new WeakMap,_t=new WeakMap,Mt=new WeakMap,Wt=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,tn=new WeakMap,on=new WeakMap,Zt=new WeakMap,fn=new WeakMap,xn=new WeakMap,hn=new WeakMap,Cn=new WeakMap,sn=new WeakMap,Gt=new WeakMap,qt=new WeakMap,Nt=new WeakSet,ho=function(){window.addEventListener("focus",ot(this,Mt)),window.addEventListener("blur",ot(this,_t))},nn=new WeakSet,Mr=function(){window.removeEventListener("focus",ot(this,Mt)),window.removeEventListener("blur",ot(this,_t))},vn=new WeakSet,Nr=function(){window.addEventListener("keydown",ot(this,tn),{capture:!0})},Pn=new WeakSet,hr=function(){window.removeEventListener("keydown",ot(this,tn),{capture:!0})},In=new WeakSet,Or=function(){document.addEventListener("copy",ot(this,Wt)),document.addEventListener("cut",ot(this,Vt)),document.addEventListener("paste",ot(this,Qt))},en=new WeakSet,Lr=function(){document.removeEventListener("copy",ot(this,Wt)),document.removeEventListener("cut",ot(this,Vt)),document.removeEventListener("paste",ot(this,Qt))},Ft=new WeakSet,Gn=function(dt){Object.entries(dt).some(([It,Dt])=>ot(this,hn)[It]!==Dt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ot(this,hn),dt)})},dn=new WeakSet,rr=function(dt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:dt})},Bn=new WeakSet,po=function(){if(!ot(this,ct)){Yt(this,ct,!0);for(const dt of ot(this,Pt).values())dt.enable()}},pn=new WeakSet,fo=function(){if(this.unselectAll(),ot(this,ct)){Yt(this,ct,!1);for(const dt of ot(this,Pt).values())dt.disable()}},gn=new WeakSet,Dr=function(dt){const wt=ot(this,Pt).get(dt.pageIndex);wt?wt.addOrRebuild(dt):this.addEditor(dt)},_n=new WeakSet,ir=function(){if(ot(this,bt).size===0)return!0;if(ot(this,bt).size===1)for(const dt of ot(this,bt).values())return dt.isEmpty();return!1},un=new WeakSet,Fr=function(dt){ot(this,At).clear();for(const wt of dt)wt.isEmpty()||(ot(this,At).add(wt),wt.select());jt(this,Ft,Gn).call(this,{hasSelectedEditor:!0})},zn(wn,"TRANSLATE_SMALL",1),zn(wn,"TRANSLATE_BIG",10);let $=wn;e.AnnotationEditorUIManager=$},(i,e,o)=>{var Kt,kt,Ut,St,rn,an,ht,ct,mt,ut,vt,At,Jn,_t,Zn,Wt,jr,Qt,pr,on,fr,fn,or,hn,sr;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=Ct,e.getColorValues=bt,e.getCurrentTransform=Pt,e.getCurrentTransformInverse=xt,e.getFilenameFromUrl=tt,e.getPdfFilenameFromUrl=nt,e.getRGB=Et,e.getXfaPageViewport=gt,e.isDataScheme=rt,e.isPdfFile=lt,e.isValidFetchUrl=ft,e.loadScript=at,e.noContextMenu=st,e.setLayerDimensions=Lt;var s=o(7),a=o(1);const c="http://www.w3.org/2000/svg",Bt=class Bt{};zn(Bt,"CSS",96),zn(Bt,"PDF",72),zn(Bt,"PDF_TO_CSS_UNITS",Bt.CSS/Bt.PDF);let d=Bt;e.PixelsPerInch=d;class h extends s.BaseFilterFactory{constructor({docId:qt,ownerDocument:Nt=globalThis.document}={}){super();Ot(this,At);Ot(this,_t);Ot(this,Wt);Ot(this,Qt);Ot(this,on);Ot(this,fn);Ot(this,hn);Ot(this,Kt,void 0);Ot(this,kt,void 0);Ot(this,Ut,void 0);Ot(this,St,void 0);Ot(this,rn,void 0);Ot(this,an,void 0);Ot(this,ht,void 0);Ot(this,ct,void 0);Ot(this,mt,void 0);Ot(this,ut,void 0);Ot(this,vt,0);Yt(this,Ut,qt),Yt(this,St,Nt)}addFilter(qt){if(!qt)return"none";let Nt=ot(this,At,Jn).get(qt);if(Nt)return Nt;let Xt,nn,mn,vn;if(qt.length===1){const In=qt[0],Mn=new Array(256);for(let en=0;en<256;en++)Mn[en]=In[en]/255;vn=Xt=nn=mn=Mn.join(",")}else{const[In,Mn,en]=qt,zt=new Array(256),Ft=new Array(256),cn=new Array(256);for(let dn=0;dn<256;dn++)zt[dn]=In[dn]/255,Ft[dn]=Mn[dn]/255,cn[dn]=en[dn]/255;Xt=zt.join(","),nn=Ft.join(","),mn=cn.join(","),vn=`${Xt}${nn}${mn}`}if(Nt=ot(this,At,Jn).get(vn),Nt)return ot(this,At,Jn).set(qt,Nt),Nt;const Tn=`g_${ot(this,Ut)}_transfer_map_${nr(this,vt)._++}`,Pn=`url(#${Tn})`;ot(this,At,Jn).set(qt,Pn),ot(this,At,Jn).set(vn,Pn);const Rn=jt(this,Qt,pr).call(this,Tn);return jt(this,fn,or).call(this,Xt,nn,mn,Rn),Pn}addHCMFilter(qt,Nt){var Mn;const Xt=`${qt}-${Nt}`;if(ot(this,an)===Xt)return ot(this,ht);if(Yt(this,an,Xt),Yt(this,ht,"none"),(Mn=ot(this,rn))==null||Mn.remove(),!qt||!Nt)return ot(this,ht);const nn=jt(this,hn,sr).call(this,qt);qt=a.Util.makeHexColor(...nn);const mn=jt(this,hn,sr).call(this,Nt);if(Nt=a.Util.makeHexColor(...mn),ot(this,_t,Zn).style.color="",qt==="#000000"&&Nt==="#ffffff"||qt===Nt)return ot(this,ht);const vn=new Array(256);for(let en=0;en<=255;en++){const zt=en/255;vn[en]=zt<=.03928?zt/12.92:((zt+.055)/1.055)**2.4}const Tn=vn.join(","),Pn=`g_${ot(this,Ut)}_hcm_filter`,Rn=Yt(this,ct,jt(this,Qt,pr).call(this,Pn));jt(this,fn,or).call(this,Tn,Tn,Tn,Rn),jt(this,Wt,jr).call(this,Rn);const In=(en,zt)=>{const Ft=nn[en]/255,cn=mn[en]/255,dn=new Array(zt+1);for(let Hn=0;Hn<=zt;Hn++)dn[Hn]=Ft+Hn/zt*(cn-Ft);return dn.join(",")};return jt(this,fn,or).call(this,In(0,5),In(1,5),In(2,5),Rn),Yt(this,ht,`url(#${Pn})`),ot(this,ht)}addHighlightHCMFilter(qt,Nt,Xt,nn){var cn;const mn=`${qt}-${Nt}-${Xt}-${nn}`;if(ot(this,mt)===mn)return ot(this,ut);if(Yt(this,mt,mn),Yt(this,ut,"none"),(cn=ot(this,ct))==null||cn.remove(),!qt||!Nt)return ot(this,ut);const[vn,Tn]=[qt,Nt].map(jt(this,hn,sr).bind(this));let Pn=Math.round(.2126*vn[0]+.7152*vn[1]+.0722*vn[2]),Rn=Math.round(.2126*Tn[0]+.7152*Tn[1]+.0722*Tn[2]),[In,Mn]=[Xt,nn].map(jt(this,hn,sr).bind(this));Rn<Pn&&([Pn,Rn,In,Mn]=[Rn,Pn,Mn,In]),ot(this,_t,Zn).style.color="";const en=(dn,Hn,Bn)=>{const $t=new Array(256),pn=(Rn-Pn)/Bn,kn=dn/255,gn=(Hn-dn)/(255*Bn);let bn=0;for(let _n=0;_n<=Bn;_n++){const jn=Math.round(Pn+_n*pn),un=kn+_n*gn;for(let Dn=bn;Dn<=jn;Dn++)$t[Dn]=un;bn=jn+1}for(let _n=bn;_n<256;_n++)$t[_n]=$t[bn-1];return $t.join(",")},zt=`g_${ot(this,Ut)}_hcm_highlight_filter`,Ft=Yt(this,ct,jt(this,Qt,pr).call(this,zt));return jt(this,Wt,jr).call(this,Ft),jt(this,fn,or).call(this,en(In[0],Mn[0],5),en(In[1],Mn[1],5),en(In[2],Mn[2],5),Ft),Yt(this,ut,`url(#${zt})`),ot(this,ut)}destroy(qt=!1){qt&&(ot(this,ht)||ot(this,ut))||(ot(this,kt)&&(ot(this,kt).parentNode.parentNode.remove(),Yt(this,kt,null)),ot(this,Kt)&&(ot(this,Kt).clear(),Yt(this,Kt,null)),Yt(this,vt,0))}}Kt=new WeakMap,kt=new WeakMap,Ut=new WeakMap,St=new WeakMap,rn=new WeakMap,an=new WeakMap,ht=new WeakMap,ct=new WeakMap,mt=new WeakMap,ut=new WeakMap,vt=new WeakMap,At=new WeakSet,Jn=function(){return ot(this,Kt)||Yt(this,Kt,new Map)},_t=new WeakSet,Zn=function(){if(!ot(this,kt)){const qt=ot(this,St).createElement("div"),{style:Nt}=qt;Nt.visibility="hidden",Nt.contain="strict",Nt.width=Nt.height=0,Nt.position="absolute",Nt.top=Nt.left=0,Nt.zIndex=-1;const Xt=ot(this,St).createElementNS(c,"svg");Xt.setAttribute("width",0),Xt.setAttribute("height",0),Yt(this,kt,ot(this,St).createElementNS(c,"defs")),qt.append(Xt),Xt.append(ot(this,kt)),ot(this,St).body.append(qt)}return ot(this,kt)},Wt=new WeakSet,jr=function(qt){const Nt=ot(this,St).createElementNS(c,"feColorMatrix");Nt.setAttribute("type","matrix"),Nt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),qt.append(Nt)},Qt=new WeakSet,pr=function(qt){const Nt=ot(this,St).createElementNS(c,"filter");return Nt.setAttribute("color-interpolation-filters","sRGB"),Nt.setAttribute("id",qt),ot(this,_t,Zn).append(Nt),Nt},on=new WeakSet,fr=function(qt,Nt,Xt){const nn=ot(this,St).createElementNS(c,Nt);nn.setAttribute("type","discrete"),nn.setAttribute("tableValues",Xt),qt.append(nn)},fn=new WeakSet,or=function(qt,Nt,Xt,nn){const mn=ot(this,St).createElementNS(c,"feComponentTransfer");nn.append(mn),jt(this,on,fr).call(this,mn,"feFuncR",qt),jt(this,on,fr).call(this,mn,"feFuncG",Nt),jt(this,on,fr).call(this,mn,"feFuncB",Xt)},hn=new WeakSet,sr=function(qt){return ot(this,_t,Zn).style.color=qt,Et(getComputedStyle(ot(this,_t,Zn)).getPropertyValue("color"))},e.DOMFilterFactory=h;class g extends s.BaseCanvasFactory{constructor({ownerDocument:Gt=globalThis.document}={}){super(),this._document=Gt}_createCanvas(Gt,qt){const Nt=this._document.createElement("canvas");return Nt.width=Gt,Nt.height=qt,Nt}}e.DOMCanvasFactory=g;async function b(sn,Gt=!1){if(ft(sn,document.baseURI)){const qt=await fetch(sn);if(!qt.ok)throw new Error(qt.statusText);return Gt?new Uint8Array(await qt.arrayBuffer()):(0,a.stringToBytes)(await qt.text())}return new Promise((qt,Nt)=>{const Xt=new XMLHttpRequest;Xt.open("GET",sn,!0),Gt&&(Xt.responseType="arraybuffer"),Xt.onreadystatechange=()=>{if(Xt.readyState===XMLHttpRequest.DONE){if(Xt.status===200||Xt.status===0){let nn;if(Gt&&Xt.response?nn=new Uint8Array(Xt.response):!Gt&&Xt.responseText&&(nn=(0,a.stringToBytes)(Xt.responseText)),nn){qt(nn);return}}Nt(new Error(Xt.statusText))}},Xt.send(null)})}class _ extends s.BaseCMapReaderFactory{_fetchData(Gt,qt){return b(Gt,this.isCompressed).then(Nt=>({cMapData:Nt,compressionType:qt}))}}e.DOMCMapReaderFactory=_;class j extends s.BaseStandardFontDataFactory{_fetchData(Gt){return b(Gt,!0)}}e.DOMStandardFontDataFactory=j;class $ extends s.BaseSVGFactory{_createSVG(Gt){return document.createElementNS(c,Gt)}}e.DOMSVGFactory=$;class _e{constructor({viewBox:Gt,scale:qt,rotation:Nt,offsetX:Xt=0,offsetY:nn=0,dontFlip:mn=!1}){this.viewBox=Gt,this.scale=qt,this.rotation=Nt,this.offsetX=Xt,this.offsetY=nn;const vn=(Gt[2]+Gt[0])/2,Tn=(Gt[3]+Gt[1])/2;let Pn,Rn,In,Mn;switch(Nt%=360,Nt<0&&(Nt+=360),Nt){case 180:Pn=-1,Rn=0,In=0,Mn=1;break;case 90:Pn=0,Rn=1,In=1,Mn=0;break;case 270:Pn=0,Rn=-1,In=-1,Mn=0;break;case 0:Pn=1,Rn=0,In=0,Mn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}mn&&(In=-In,Mn=-Mn);let en,zt,Ft,cn;Pn===0?(en=Math.abs(Tn-Gt[1])*qt+Xt,zt=Math.abs(vn-Gt[0])*qt+nn,Ft=(Gt[3]-Gt[1])*qt,cn=(Gt[2]-Gt[0])*qt):(en=Math.abs(vn-Gt[0])*qt+Xt,zt=Math.abs(Tn-Gt[1])*qt+nn,Ft=(Gt[2]-Gt[0])*qt,cn=(Gt[3]-Gt[1])*qt),this.transform=[Pn*qt,Rn*qt,In*qt,Mn*qt,en-Pn*qt*vn-In*qt*Tn,zt-Rn*qt*vn-Mn*qt*Tn],this.width=Ft,this.height=cn}get rawDims(){const{viewBox:Gt}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:Gt[2]-Gt[0],pageHeight:Gt[3]-Gt[1],pageX:Gt[0],pageY:Gt[1]})}clone({scale:Gt=this.scale,rotation:qt=this.rotation,offsetX:Nt=this.offsetX,offsetY:Xt=this.offsetY,dontFlip:nn=!1}={}){return new _e({viewBox:this.viewBox.slice(),scale:Gt,rotation:qt,offsetX:Nt,offsetY:Xt,dontFlip:nn})}convertToViewportPoint(Gt,qt){return a.Util.applyTransform([Gt,qt],this.transform)}convertToViewportRectangle(Gt){const qt=a.Util.applyTransform([Gt[0],Gt[1]],this.transform),Nt=a.Util.applyTransform([Gt[2],Gt[3]],this.transform);return[qt[0],qt[1],Nt[0],Nt[1]]}convertToPdfPoint(Gt,qt){return a.Util.applyInverseTransform([Gt,qt],this.transform)}}e.PageViewport=_e;class et extends a.BaseException{constructor(Gt,qt=0){super(Gt,"RenderingCancelledException"),this.extraDelay=qt}}e.RenderingCancelledException=et;function rt(sn){const Gt=sn.length;let qt=0;for(;qt<Gt&&sn[qt].trim()==="";)qt++;return sn.substring(qt,qt+5).toLowerCase()==="data:"}function lt(sn){return typeof sn=="string"&&/\.pdf$/i.test(sn)}function tt(sn,Gt=!1){return Gt||([sn]=sn.split(/[#?]/,1)),sn.substring(sn.lastIndexOf("/")+1)}function nt(sn,Gt="document.pdf"){if(typeof sn!="string")return Gt;if(rt(sn))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Gt;const qt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Nt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Xt=qt.exec(sn);let nn=Nt.exec(Xt[1])||Nt.exec(Xt[2])||Nt.exec(Xt[3]);if(nn&&(nn=nn[0],nn.includes("%")))try{nn=Nt.exec(decodeURIComponent(nn))[0]}catch{}return nn||Gt}class it{constructor(){zn(this,"started",Object.create(null));zn(this,"times",[])}time(Gt){Gt in this.started&&(0,a.warn)(`Timer is already running for ${Gt}`),this.started[Gt]=Date.now()}timeEnd(Gt){Gt in this.started||(0,a.warn)(`Timer has not been started for ${Gt}`),this.times.push({name:Gt,start:this.started[Gt],end:Date.now()}),delete this.started[Gt]}toString(){const Gt=[];let qt=0;for(const{name:Nt}of this.times)qt=Math.max(Nt.length,qt);for(const{name:Nt,start:Xt,end:nn}of this.times)Gt.push(`${Nt.padEnd(qt)} ${nn-Xt}ms
`);return Gt.join("")}}e.StatTimer=it;function ft(sn,Gt){try{const{protocol:qt}=Gt?new URL(sn,Gt):new URL(sn);return qt==="http:"||qt==="https:"}catch{return!1}}function st(sn){sn.preventDefault()}function at(sn,Gt=!1){return new Promise((qt,Nt)=>{const Xt=document.createElement("script");Xt.src=sn,Xt.onload=function(nn){Gt&&Xt.remove(),qt(nn)},Xt.onerror=function(){Nt(new Error(`Cannot load script at: ${Xt.src}`))},(document.head||document.documentElement).append(Xt)})}function Ct(sn){console.log("Deprecated API usage: "+sn)}let yt;class pt{static toDateObject(Gt){if(!Gt||typeof Gt!="string")return null;yt||(yt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const qt=yt.exec(Gt);if(!qt)return null;const Nt=parseInt(qt[1],10);let Xt=parseInt(qt[2],10);Xt=Xt>=1&&Xt<=12?Xt-1:0;let nn=parseInt(qt[3],10);nn=nn>=1&&nn<=31?nn:1;let mn=parseInt(qt[4],10);mn=mn>=0&&mn<=23?mn:0;let vn=parseInt(qt[5],10);vn=vn>=0&&vn<=59?vn:0;let Tn=parseInt(qt[6],10);Tn=Tn>=0&&Tn<=59?Tn:0;const Pn=qt[7]||"Z";let Rn=parseInt(qt[8],10);Rn=Rn>=0&&Rn<=23?Rn:0;let In=parseInt(qt[9],10)||0;return In=In>=0&&In<=59?In:0,Pn==="-"?(mn+=Rn,vn+=In):Pn==="+"&&(mn-=Rn,vn-=In),new Date(Date.UTC(Nt,Xt,nn,mn,vn,Tn))}}e.PDFDateString=pt;function gt(sn,{scale:Gt=1,rotation:qt=0}){const{width:Nt,height:Xt}=sn.attributes.style,nn=[0,0,parseInt(Nt),parseInt(Xt)];return new _e({viewBox:nn,scale:Gt,rotation:qt})}function Et(sn){if(sn.startsWith("#")){const Gt=parseInt(sn.slice(1),16);return[(Gt&16711680)>>16,(Gt&65280)>>8,Gt&255]}return sn.startsWith("rgb(")?sn.slice(4,-1).split(",").map(Gt=>parseInt(Gt)):sn.startsWith("rgba(")?sn.slice(5,-1).split(",").map(Gt=>parseInt(Gt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${sn}"`),[0,0,0])}function bt(sn){const Gt=document.createElement("span");Gt.style.visibility="hidden",document.body.append(Gt);for(const qt of sn.keys()){Gt.style.color=qt;const Nt=window.getComputedStyle(Gt).color;sn.set(qt,Et(Nt))}Gt.remove()}function Pt(sn){const{a:Gt,b:qt,c:Nt,d:Xt,e:nn,f:mn}=sn.getTransform();return[Gt,qt,Nt,Xt,nn,mn]}function xt(sn){const{a:Gt,b:qt,c:Nt,d:Xt,e:nn,f:mn}=sn.getTransform().invertSelf();return[Gt,qt,Nt,Xt,nn,mn]}function Lt(sn,Gt,qt=!1,Nt=!0){if(Gt instanceof _e){const{pageWidth:Xt,pageHeight:nn}=Gt.rawDims,{style:mn}=sn,vn=a.FeatureTest.isCSSRoundSupported,Tn=`var(--scale-factor) * ${Xt}px`,Pn=`var(--scale-factor) * ${nn}px`,Rn=vn?`round(${Tn}, 1px)`:`calc(${Tn})`,In=vn?`round(${Pn}, 1px)`:`calc(${Pn})`;!qt||Gt.rotation%180===0?(mn.width=Rn,mn.height=In):(mn.width=In,mn.height=Rn)}Nt&&sn.setAttribute("data-main-rotation",Gt.rotation)}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var s=o(1);class a{constructor(){this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,j){return"none"}addHighlightHCMFilter(_,j,$,_e){return"none"}destroy(_=!1){}}e.BaseFilterFactory=a;class c{constructor(){this.constructor===c&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,j){if(_<=0||j<=0)throw new Error("Invalid canvas size");const $=this._createCanvas(_,j);return{canvas:$,context:$.getContext("2d")}}reset(_,j,$){if(!_.canvas)throw new Error("Canvas is not specified");if(j<=0||$<=0)throw new Error("Invalid canvas size");_.canvas.width=j,_.canvas.height=$}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,j){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=c;class d{constructor({baseUrl:_=null,isCompressed:j=!0}){this.constructor===d&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=j}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const j=this.baseUrl+_+(this.isCompressed?".bcmap":""),$=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(j,$).catch(_e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${j}`)})}_fetchData(_,j){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=d;class h{constructor({baseUrl:_=null}){this.constructor===h&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const j=`${this.baseUrl}${_}`;return this._fetchData(j).catch($=>{throw new Error(`Unable to load font data at: ${j}`)})}_fetchData(_){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=h;class g{constructor(){this.constructor===g&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,j,$=!1){if(_<=0||j<=0)throw new Error("Invalid SVG dimensions");const _e=this._createSVG("svg:svg");return _e.setAttribute("version","1.1"),$||(_e.setAttribute("width",`${_}px`),_e.setAttribute("height",`${j}px`)),_e.setAttribute("preserveAspectRatio","none"),_e.setAttribute("viewBox",`0 0 ${_} ${j}`),_e}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,s.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=g},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var s=o(1);const a=3285377520,c=4294901760,d=65535;class h{constructor(b){this.h1=b?b&4294967295:a,this.h2=b?b&4294967295:a}update(b){let _,j;if(typeof b=="string"){_=new Uint8Array(b.length*2),j=0;for(let Ct=0,yt=b.length;Ct<yt;Ct++){const pt=b.charCodeAt(Ct);pt<=255?_[j++]=pt:(_[j++]=pt>>>8,_[j++]=pt&255)}}else if((0,s.isArrayBuffer)(b))_=b.slice(),j=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const $=j>>2,_e=j-$*4,et=new Uint32Array(_.buffer,0,$);let rt=0,lt=0,tt=this.h1,nt=this.h2;const it=3432918353,ft=461845907,st=it&d,at=ft&d;for(let Ct=0;Ct<$;Ct++)Ct&1?(rt=et[Ct],rt=rt*it&c|rt*st&d,rt=rt<<15|rt>>>17,rt=rt*ft&c|rt*at&d,tt^=rt,tt=tt<<13|tt>>>19,tt=tt*5+3864292196):(lt=et[Ct],lt=lt*it&c|lt*st&d,lt=lt<<15|lt>>>17,lt=lt*ft&c|lt*at&d,nt^=lt,nt=nt<<13|nt>>>19,nt=nt*5+3864292196);switch(rt=0,_e){case 3:rt^=_[$*4+2]<<16;case 2:rt^=_[$*4+1]<<8;case 1:rt^=_[$*4],rt=rt*it&c|rt*st&d,rt=rt<<15|rt>>>17,rt=rt*ft&c|rt*at&d,$&1?tt^=rt:nt^=rt}this.h1=tt,this.h2=nt}hexdigest(){let b=this.h1,_=this.h2;return b^=_>>>1,b=b*3981806797&c|b*36045&d,_=_*4283543511&c|((_<<16|b>>>16)*2950163797&c)>>>16,b^=_>>>1,b=b*444984403&c|b*60499&d,_=_*3301882366&c|((_<<16|b>>>16)*3120437893&c)>>>16,b^=_>>>1,(b>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=h},(i,e,o)=>{var d;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var s=o(1);class a{constructor({ownerDocument:g=globalThis.document,styleElement:b=null}){Ot(this,d,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const b=this.styleElement.sheet;b.insertRule(g,b.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),ot(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||ot(this,d).has(g.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:b,src:_,style:j}=g,$=new FontFace(b,_,j);this.addNativeFontFace($);try{await $.load(),ot(this,d).add(b)}catch{(0,s.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace($)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const _=g.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(j){throw(0,s.warn)(`Failed to load font '${_.family}': '${j}'.`),g.disableFontFace=!0,j}}return}const b=g.createFontFaceRule();if(b){if(this.insertRule(b),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const j=this._queueLoadingCallback(_);this._prepareFontLoadEvent(g,j)})}}get isFontLoadingAPISupported(){var b;const g=!!((b=this._document)!=null&&b.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function b(){for((0,s.assert)(!j.done,"completeRequest() cannot be called twice."),j.done=!0;_.length>0&&_[0].done;){const $=_.shift();setTimeout($.callback,0)}}const{loadingRequests:_}=this,j={done:!1,complete:b,callback:g};return _.push(j),j}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,b){function _(Et,bt){return Et.charCodeAt(bt)<<24|Et.charCodeAt(bt+1)<<16|Et.charCodeAt(bt+2)<<8|Et.charCodeAt(bt+3)&255}function j(Et,bt,Pt,xt){const Lt=Et.substring(0,bt),Bt=Et.substring(bt+Pt);return Lt+xt+Bt}let $,_e;const et=this._document.createElement("canvas");et.width=1,et.height=1;const rt=et.getContext("2d");let lt=0;function tt(Et,bt){if(++lt>30){(0,s.warn)("Load test font never loaded."),bt();return}if(rt.font="30px "+Et,rt.fillText(".",0,20),rt.getImageData(0,0,1,1).data[3]>0){bt();return}setTimeout(tt.bind(null,Et,bt))}const nt=`lt${Date.now()}${this.loadTestFontId++}`;let it=this._loadTestFont;it=j(it,976,nt.length,nt);const st=16,at=1482184792;let Ct=_(it,st);for($=0,_e=nt.length-3;$<_e;$+=4)Ct=Ct-at+_(nt,$)|0;$<nt.length&&(Ct=Ct-at+_(nt+"XXX",$)|0),it=j(it,st,4,(0,s.string32)(Ct));const yt=`url(data:font/opentype;base64,${btoa(it)});`,pt=`@font-face {font-family:"${nt}";src:${yt}}`;this.insertRule(pt);const gt=this._document.createElement("div");gt.style.visibility="hidden",gt.style.width=gt.style.height="10px",gt.style.position="absolute",gt.style.top=gt.style.left="0px";for(const Et of[g.loadedName,nt]){const bt=this._document.createElement("span");bt.textContent="Hi",bt.style.fontFamily=Et,gt.append(bt)}this._document.body.append(gt),tt(nt,()=>{gt.remove(),b.complete()})}}d=new WeakMap,e.FontLoader=a;class c{constructor(g,{isEvalSupported:b=!0,disableFontFace:_=!1,ignoreErrors:j=!1,inspectFont:$=null}){this.compiledGlyphs=Object.create(null);for(const _e in g)this[_e]=g[_e];this.isEvalSupported=b!==!1,this.disableFontFace=_===!0,this.ignoreErrors=j===!0,this._inspectFont=$}createNativeFontFace(){var b;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(b=this._inspectFont)==null||b.call(this,this),g}createFontFaceRule(){var j;if(!this.data||this.disableFontFace)return null;const g=(0,s.bytesToString)(this.data),b=`url(data:${this.mimetype};base64,${btoa(g)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${b}}`;else{let $=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&($+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${$}src:${b}}`}return(j=this._inspectFont)==null||j.call(this,this,b),_}getPathGenerator(g,b){if(this.compiledGlyphs[b]!==void 0)return this.compiledGlyphs[b];let _;try{_=g.get(this.loadedName+"_path_"+b)}catch(j){if(!this.ignoreErrors)throw j;return(0,s.warn)(`getPathGenerator - ignoring character: "${j}".`),this.compiledGlyphs[b]=function($,_e){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const j=[];for(const $ of _){const _e=$.args!==void 0?$.args.join(","):"";j.push("c.",$.cmd,"(",_e,`);
`)}return this.compiledGlyphs[b]=new Function("c","size",j.join(""))}return this.compiledGlyphs[b]=function(j,$){for(const _e of _)_e.cmd==="scale"&&(_e.args=[$,-$]),j[_e.cmd].apply(j,_e.args)}}}e.FontFaceObject=c},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var s=o(7);o(1);const a=function(b){return new Promise((_,j)=>{require$$5.readFile(b,(_e,et)=>{if(_e||!et){j(new Error(_e));return}_(new Uint8Array(et))})})};class c extends s.BaseFilterFactory{}e.NodeFilterFactory=c;class d extends s.BaseCanvasFactory{_createCanvas(_,j){return require$$5.createCanvas(_,j)}}e.NodeCanvasFactory=d;class h extends s.BaseCMapReaderFactory{_fetchData(_,j){return a(_).then($=>({cMapData:$,compressionType:j}))}}e.NodeCMapReaderFactory=h;class g extends s.BaseStandardFontDataFactory{_fetchData(_){return a(_)}}e.NodeStandardFontDataFactory=g},(i,e,o)=>{var kt,Ur,St,Br;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var s=o(1),a=o(6),c=o(12),d=o(13);const h=16,g=100,b=4096,_=15,j=10,$=1e3,_e=16;function et(ht,ct){if(ht._removeMirroring)throw new Error("Context is already forwarding operations.");ht.__originalSave=ht.save,ht.__originalRestore=ht.restore,ht.__originalRotate=ht.rotate,ht.__originalScale=ht.scale,ht.__originalTranslate=ht.translate,ht.__originalTransform=ht.transform,ht.__originalSetTransform=ht.setTransform,ht.__originalResetTransform=ht.resetTransform,ht.__originalClip=ht.clip,ht.__originalMoveTo=ht.moveTo,ht.__originalLineTo=ht.lineTo,ht.__originalBezierCurveTo=ht.bezierCurveTo,ht.__originalRect=ht.rect,ht.__originalClosePath=ht.closePath,ht.__originalBeginPath=ht.beginPath,ht._removeMirroring=()=>{ht.save=ht.__originalSave,ht.restore=ht.__originalRestore,ht.rotate=ht.__originalRotate,ht.scale=ht.__originalScale,ht.translate=ht.__originalTranslate,ht.transform=ht.__originalTransform,ht.setTransform=ht.__originalSetTransform,ht.resetTransform=ht.__originalResetTransform,ht.clip=ht.__originalClip,ht.moveTo=ht.__originalMoveTo,ht.lineTo=ht.__originalLineTo,ht.bezierCurveTo=ht.__originalBezierCurveTo,ht.rect=ht.__originalRect,ht.closePath=ht.__originalClosePath,ht.beginPath=ht.__originalBeginPath,delete ht._removeMirroring},ht.save=function(){ct.save(),this.__originalSave()},ht.restore=function(){ct.restore(),this.__originalRestore()},ht.translate=function(ut,vt){ct.translate(ut,vt),this.__originalTranslate(ut,vt)},ht.scale=function(ut,vt){ct.scale(ut,vt),this.__originalScale(ut,vt)},ht.transform=function(ut,vt,At,Tt,_t,Mt){ct.transform(ut,vt,At,Tt,_t,Mt),this.__originalTransform(ut,vt,At,Tt,_t,Mt)},ht.setTransform=function(ut,vt,At,Tt,_t,Mt){ct.setTransform(ut,vt,At,Tt,_t,Mt),this.__originalSetTransform(ut,vt,At,Tt,_t,Mt)},ht.resetTransform=function(){ct.resetTransform(),this.__originalResetTransform()},ht.rotate=function(ut){ct.rotate(ut),this.__originalRotate(ut)},ht.clip=function(ut){ct.clip(ut),this.__originalClip(ut)},ht.moveTo=function(mt,ut){ct.moveTo(mt,ut),this.__originalMoveTo(mt,ut)},ht.lineTo=function(mt,ut){ct.lineTo(mt,ut),this.__originalLineTo(mt,ut)},ht.bezierCurveTo=function(mt,ut,vt,At,Tt,_t){ct.bezierCurveTo(mt,ut,vt,At,Tt,_t),this.__originalBezierCurveTo(mt,ut,vt,At,Tt,_t)},ht.rect=function(mt,ut,vt,At){ct.rect(mt,ut,vt,At),this.__originalRect(mt,ut,vt,At)},ht.closePath=function(){ct.closePath(),this.__originalClosePath()},ht.beginPath=function(){ct.beginPath(),this.__originalBeginPath()}}class rt{constructor(ct){this.canvasFactory=ct,this.cache=Object.create(null)}getCanvas(ct,mt,ut){let vt;return this.cache[ct]!==void 0?(vt=this.cache[ct],this.canvasFactory.reset(vt,mt,ut)):(vt=this.canvasFactory.create(mt,ut),this.cache[ct]=vt),vt}delete(ct){delete this.cache[ct]}clear(){for(const ct in this.cache){const mt=this.cache[ct];this.canvasFactory.destroy(mt),delete this.cache[ct]}}}function lt(ht,ct,mt,ut,vt,At,Tt,_t,Mt,Wt){const[Vt,Qt,tn,on,Zt,fn]=(0,a.getCurrentTransform)(ht);if(Qt===0&&tn===0){const Cn=Tt*Vt+Zt,sn=Math.round(Cn),Gt=_t*on+fn,qt=Math.round(Gt),Nt=(Tt+Mt)*Vt+Zt,Xt=Math.abs(Math.round(Nt)-sn)||1,nn=(_t+Wt)*on+fn,mn=Math.abs(Math.round(nn)-qt)||1;return ht.setTransform(Math.sign(Vt),0,0,Math.sign(on),sn,qt),ht.drawImage(ct,mt,ut,vt,At,0,0,Xt,mn),ht.setTransform(Vt,Qt,tn,on,Zt,fn),[Xt,mn]}if(Vt===0&&on===0){const Cn=_t*tn+Zt,sn=Math.round(Cn),Gt=Tt*Qt+fn,qt=Math.round(Gt),Nt=(_t+Wt)*tn+Zt,Xt=Math.abs(Math.round(Nt)-sn)||1,nn=(Tt+Mt)*Qt+fn,mn=Math.abs(Math.round(nn)-qt)||1;return ht.setTransform(0,Math.sign(Qt),Math.sign(tn),0,sn,qt),ht.drawImage(ct,mt,ut,vt,At,0,0,mn,Xt),ht.setTransform(Vt,Qt,tn,on,Zt,fn),[mn,Xt]}ht.drawImage(ct,mt,ut,vt,At,Tt,_t,Mt,Wt);const xn=Math.hypot(Vt,Qt),hn=Math.hypot(tn,on);return[xn*Mt,hn*Wt]}function tt(ht){const{width:ct,height:mt}=ht;if(ct>$||mt>$)return null;const ut=1e3,vt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),At=ct+1;let Tt=new Uint8Array(At*(mt+1)),_t,Mt,Wt;const Vt=ct+7&-8;let Qt=new Uint8Array(Vt*mt),tn=0;for(const hn of ht.data){let Cn=128;for(;Cn>0;)Qt[tn++]=hn&Cn?0:255,Cn>>=1}let on=0;for(tn=0,Qt[tn]!==0&&(Tt[0]=1,++on),Mt=1;Mt<ct;Mt++)Qt[tn]!==Qt[tn+1]&&(Tt[Mt]=Qt[tn]?2:1,++on),tn++;for(Qt[tn]!==0&&(Tt[Mt]=2,++on),_t=1;_t<mt;_t++){tn=_t*Vt,Wt=_t*At,Qt[tn-Vt]!==Qt[tn]&&(Tt[Wt]=Qt[tn]?1:8,++on);let hn=(Qt[tn]?4:0)+(Qt[tn-Vt]?8:0);for(Mt=1;Mt<ct;Mt++)hn=(hn>>2)+(Qt[tn+1]?4:0)+(Qt[tn-Vt+1]?8:0),vt[hn]&&(Tt[Wt+Mt]=vt[hn],++on),tn++;if(Qt[tn-Vt]!==Qt[tn]&&(Tt[Wt+Mt]=Qt[tn]?2:4,++on),on>ut)return null}for(tn=Vt*(mt-1),Wt=_t*At,Qt[tn]!==0&&(Tt[Wt]=8,++on),Mt=1;Mt<ct;Mt++)Qt[tn]!==Qt[tn+1]&&(Tt[Wt+Mt]=Qt[tn]?4:8,++on),tn++;if(Qt[tn]!==0&&(Tt[Wt+Mt]=4,++on),on>ut)return null;const Zt=new Int32Array([0,At,-1,0,-At,0,0,0,1]),fn=new Path2D;for(_t=0;on&&_t<=mt;_t++){let hn=_t*At;const Cn=hn+ct;for(;hn<Cn&&!Tt[hn];)hn++;if(hn===Cn)continue;fn.moveTo(hn%At,_t);const sn=hn;let Gt=Tt[hn];do{const qt=Zt[Gt];do hn+=qt;while(!Tt[hn]);const Nt=Tt[hn];Nt!==5&&Nt!==10?(Gt=Nt,Tt[hn]=0):(Gt=Nt&51*Gt>>4,Tt[hn]&=Gt>>2|Gt<<2),fn.lineTo(hn%At,hn/At|0),Tt[hn]||--on}while(sn!==hn);--_t}return Qt=null,Tt=null,function(hn){hn.save(),hn.scale(1/ct,-1/mt),hn.translate(0,-mt),hn.fill(fn),hn.beginPath(),hn.restore()}}class nt{constructor(ct,mt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,ct,mt])}clone(){const ct=Object.create(this);return ct.clipBox=this.clipBox.slice(),ct}setCurrentPoint(ct,mt){this.x=ct,this.y=mt}updatePathMinMax(ct,mt,ut){[mt,ut]=s.Util.applyTransform([mt,ut],ct),this.minX=Math.min(this.minX,mt),this.minY=Math.min(this.minY,ut),this.maxX=Math.max(this.maxX,mt),this.maxY=Math.max(this.maxY,ut)}updateRectMinMax(ct,mt){const ut=s.Util.applyTransform(mt,ct),vt=s.Util.applyTransform(mt.slice(2),ct);this.minX=Math.min(this.minX,ut[0],vt[0]),this.minY=Math.min(this.minY,ut[1],vt[1]),this.maxX=Math.max(this.maxX,ut[0],vt[0]),this.maxY=Math.max(this.maxY,ut[1],vt[1])}updateScalingPathMinMax(ct,mt){s.Util.scaleMinMax(ct,mt),this.minX=Math.min(this.minX,mt[0]),this.maxX=Math.max(this.maxX,mt[1]),this.minY=Math.min(this.minY,mt[2]),this.maxY=Math.max(this.maxY,mt[3])}updateCurvePathMinMax(ct,mt,ut,vt,At,Tt,_t,Mt,Wt,Vt){const Qt=s.Util.bezierBoundingBox(mt,ut,vt,At,Tt,_t,Mt,Wt);if(Vt){Vt[0]=Math.min(Vt[0],Qt[0],Qt[2]),Vt[1]=Math.max(Vt[1],Qt[0],Qt[2]),Vt[2]=Math.min(Vt[2],Qt[1],Qt[3]),Vt[3]=Math.max(Vt[3],Qt[1],Qt[3]);return}this.updateRectMinMax(ct,Qt)}getPathBoundingBox(ct=c.PathType.FILL,mt=null){const ut=[this.minX,this.minY,this.maxX,this.maxY];if(ct===c.PathType.STROKE){mt||(0,s.unreachable)("Stroke bounding box must include transform.");const vt=s.Util.singularValueDecompose2dScale(mt),At=vt[0]*this.lineWidth/2,Tt=vt[1]*this.lineWidth/2;ut[0]-=At,ut[1]-=Tt,ut[2]+=At,ut[3]+=Tt}return ut}updateClipFromPath(){const ct=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(ct||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(ct){this.clipBox=ct,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(ct=c.PathType.FILL,mt=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(ct,mt))}}function it(ht,ct){if(typeof ImageData<"u"&&ct instanceof ImageData){ht.putImageData(ct,0,0);return}const mt=ct.height,ut=ct.width,vt=mt%_e,At=(mt-vt)/_e,Tt=vt===0?At:At+1,_t=ht.createImageData(ut,_e);let Mt=0,Wt;const Vt=ct.data,Qt=_t.data;let tn,on,Zt,fn;if(ct.kind===s.ImageKind.GRAYSCALE_1BPP){const xn=Vt.byteLength,hn=new Uint32Array(Qt.buffer,0,Qt.byteLength>>2),Cn=hn.length,sn=ut+7>>3,Gt=4294967295,qt=s.FeatureTest.isLittleEndian?4278190080:255;for(tn=0;tn<Tt;tn++){for(Zt=tn<At?_e:vt,Wt=0,on=0;on<Zt;on++){const Nt=xn-Mt;let Xt=0;const nn=Nt>sn?ut:Nt*8-7,mn=nn&-8;let vn=0,Tn=0;for(;Xt<mn;Xt+=8)Tn=Vt[Mt++],hn[Wt++]=Tn&128?Gt:qt,hn[Wt++]=Tn&64?Gt:qt,hn[Wt++]=Tn&32?Gt:qt,hn[Wt++]=Tn&16?Gt:qt,hn[Wt++]=Tn&8?Gt:qt,hn[Wt++]=Tn&4?Gt:qt,hn[Wt++]=Tn&2?Gt:qt,hn[Wt++]=Tn&1?Gt:qt;for(;Xt<nn;Xt++)vn===0&&(Tn=Vt[Mt++],vn=128),hn[Wt++]=Tn&vn?Gt:qt,vn>>=1}for(;Wt<Cn;)hn[Wt++]=0;ht.putImageData(_t,0,tn*_e)}}else if(ct.kind===s.ImageKind.RGBA_32BPP){for(on=0,fn=ut*_e*4,tn=0;tn<At;tn++)Qt.set(Vt.subarray(Mt,Mt+fn)),Mt+=fn,ht.putImageData(_t,0,on),on+=_e;tn<Tt&&(fn=ut*vt*4,Qt.set(Vt.subarray(Mt,Mt+fn)),ht.putImageData(_t,0,on))}else if(ct.kind===s.ImageKind.RGB_24BPP)for(Zt=_e,fn=ut*Zt,tn=0;tn<Tt;tn++){for(tn>=At&&(Zt=vt,fn=ut*Zt),Wt=0,on=fn;on--;)Qt[Wt++]=Vt[Mt++],Qt[Wt++]=Vt[Mt++],Qt[Wt++]=Vt[Mt++],Qt[Wt++]=255;ht.putImageData(_t,0,tn*_e)}else throw new Error(`bad image kind: ${ct.kind}`)}function ft(ht,ct){if(ct.bitmap){ht.drawImage(ct.bitmap,0,0);return}const mt=ct.height,ut=ct.width,vt=mt%_e,At=(mt-vt)/_e,Tt=vt===0?At:At+1,_t=ht.createImageData(ut,_e);let Mt=0;const Wt=ct.data,Vt=_t.data;for(let Qt=0;Qt<Tt;Qt++){const tn=Qt<At?_e:vt;({srcPos:Mt}=(0,d.convertBlackAndWhiteToRGBA)({src:Wt,srcPos:Mt,dest:Vt,width:ut,height:tn,nonBlackColor:0})),ht.putImageData(_t,0,Qt*_e)}}function st(ht,ct){const mt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ut of mt)ht[ut]!==void 0&&(ct[ut]=ht[ut]);ht.setLineDash!==void 0&&(ct.setLineDash(ht.getLineDash()),ct.lineDashOffset=ht.lineDashOffset)}function at(ht){if(ht.strokeStyle=ht.fillStyle="#000000",ht.fillRule="nonzero",ht.globalAlpha=1,ht.lineWidth=1,ht.lineCap="butt",ht.lineJoin="miter",ht.miterLimit=10,ht.globalCompositeOperation="source-over",ht.font="10px sans-serif",ht.setLineDash!==void 0&&(ht.setLineDash([]),ht.lineDashOffset=0),!s.isNodeJS){const{filter:ct}=ht;ct!=="none"&&ct!==""&&(ht.filter="none")}}function Ct(ht,ct,mt,ut){const vt=ht.length;for(let At=3;At<vt;At+=4){const Tt=ht[At];if(Tt===0)ht[At-3]=ct,ht[At-2]=mt,ht[At-1]=ut;else if(Tt<255){const _t=255-Tt;ht[At-3]=ht[At-3]*Tt+ct*_t>>8,ht[At-2]=ht[At-2]*Tt+mt*_t>>8,ht[At-1]=ht[At-1]*Tt+ut*_t>>8}}}function yt(ht,ct,mt){const ut=ht.length,vt=1/255;for(let At=3;At<ut;At+=4){const Tt=mt?mt[ht[At]]:ht[At];ct[At]=ct[At]*Tt*vt|0}}function pt(ht,ct,mt){const ut=ht.length;for(let vt=3;vt<ut;vt+=4){const At=ht[vt-3]*77+ht[vt-2]*152+ht[vt-1]*28;ct[vt]=mt?ct[vt]*mt[At>>8]>>8:ct[vt]*At>>16}}function gt(ht,ct,mt,ut,vt,At,Tt,_t,Mt,Wt,Vt){const Qt=!!At,tn=Qt?At[0]:0,on=Qt?At[1]:0,Zt=Qt?At[2]:0,fn=vt==="Luminosity"?pt:yt,hn=Math.min(ut,Math.ceil(1048576/mt));for(let Cn=0;Cn<ut;Cn+=hn){const sn=Math.min(hn,ut-Cn),Gt=ht.getImageData(_t-Wt,Cn+(Mt-Vt),mt,sn),qt=ct.getImageData(_t,Cn+Mt,mt,sn);Qt&&Ct(Gt.data,tn,on,Zt),fn(Gt.data,qt.data,Tt),ct.putImageData(qt,_t,Cn+Mt)}}function Et(ht,ct,mt,ut){const vt=ut[0],At=ut[1],Tt=ut[2]-vt,_t=ut[3]-At;Tt===0||_t===0||(gt(ct.context,mt,Tt,_t,ct.subtype,ct.backdrop,ct.transferMap,vt,At,ct.offsetX,ct.offsetY),ht.save(),ht.globalAlpha=1,ht.globalCompositeOperation="source-over",ht.setTransform(1,0,0,1,0,0),ht.drawImage(mt.canvas,0,0),ht.restore())}function bt(ht,ct){const mt=s.Util.singularValueDecompose2dScale(ht);mt[0]=Math.fround(mt[0]),mt[1]=Math.fround(mt[1]);const ut=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return ct!==void 0?ct:mt[0]<=ut||mt[1]<=ut}const Pt=["butt","round","square"],xt=["miter","round","bevel"],Lt={},Bt={},an=class an{constructor(ct,mt,ut,vt,At,{optionalContentConfig:Tt,markedContentStack:_t=null},Mt,Wt){Ot(this,kt);Ot(this,St);this.ctx=ct,this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=mt,this.objs=ut,this.canvasFactory=vt,this.filterFactory=At,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=_t||[],this.optionalContentConfig=Tt,this.cachedCanvases=new rt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Mt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Wt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(ct,mt=null){return typeof ct=="string"?ct.startsWith("g_")?this.commonObjs.get(ct):this.objs.get(ct):mt}beginDrawing({transform:ct,viewport:mt,transparency:ut=!1,background:vt=null}){const At=this.ctx.canvas.width,Tt=this.ctx.canvas.height,_t=this.ctx.fillStyle;if(this.ctx.fillStyle=vt||"#ffffff",this.ctx.fillRect(0,0,At,Tt),this.ctx.fillStyle=_t,ut){const Mt=this.cachedCanvases.getCanvas("transparent",At,Tt);this.compositeCtx=this.ctx,this.transparentCanvas=Mt.canvas,this.ctx=Mt.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),at(this.ctx),ct&&(this.ctx.transform(...ct),this.outputScaleX=ct[0],this.outputScaleY=ct[0]),this.ctx.transform(...mt.transform),this.viewportScale=mt.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(ct,mt,ut,vt){const At=ct.argsArray,Tt=ct.fnArray;let _t=mt||0;const Mt=At.length;if(Mt===_t)return _t;const Wt=Mt-_t>j&&typeof ut=="function",Vt=Wt?Date.now()+_:0;let Qt=0;const tn=this.commonObjs,on=this.objs;let Zt;for(;;){if(vt!==void 0&&_t===vt.nextBreakPoint)return vt.breakIt(_t,ut),_t;if(Zt=Tt[_t],Zt!==s.OPS.dependency)this[Zt].apply(this,At[_t]);else for(const fn of At[_t]){const xn=fn.startsWith("g_")?tn:on;if(!xn.has(fn))return xn.get(fn,ut),_t}if(_t++,_t===Mt)return _t;if(Wt&&++Qt>j){if(Date.now()>Vt)return ut(),_t;Qt=0}}}endDrawing(){jt(this,kt,Ur).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const ct of this._cachedBitmapsMap.values()){for(const mt of ct.values())typeof HTMLCanvasElement<"u"&&mt instanceof HTMLCanvasElement&&(mt.width=mt.height=0);ct.clear()}this._cachedBitmapsMap.clear(),jt(this,St,Br).call(this)}_scaleImage(ct,mt){const ut=ct.width,vt=ct.height;let At=Math.max(Math.hypot(mt[0],mt[1]),1),Tt=Math.max(Math.hypot(mt[2],mt[3]),1),_t=ut,Mt=vt,Wt="prescale1",Vt,Qt;for(;At>2&&_t>1||Tt>2&&Mt>1;){let tn=_t,on=Mt;At>2&&_t>1&&(tn=_t>=16384?Math.floor(_t/2)-1||1:Math.ceil(_t/2),At/=_t/tn),Tt>2&&Mt>1&&(on=Mt>=16384?Math.floor(Mt/2)-1||1:Math.ceil(Mt)/2,Tt/=Mt/on),Vt=this.cachedCanvases.getCanvas(Wt,tn,on),Qt=Vt.context,Qt.clearRect(0,0,tn,on),Qt.drawImage(ct,0,0,_t,Mt,0,0,tn,on),ct=Vt.canvas,_t=tn,Mt=on,Wt=Wt==="prescale1"?"prescale2":"prescale1"}return{img:ct,paintWidth:_t,paintHeight:Mt}}_createMaskCanvas(ct){const mt=this.ctx,{width:ut,height:vt}=ct,At=this.current.fillColor,Tt=this.current.patternFill,_t=(0,a.getCurrentTransform)(mt);let Mt,Wt,Vt,Qt;if((ct.bitmap||ct.data)&&ct.count>1){const Xt=ct.bitmap||ct.data.buffer;Wt=JSON.stringify(Tt?_t:[_t.slice(0,4),At]),Mt=this._cachedBitmapsMap.get(Xt),Mt||(Mt=new Map,this._cachedBitmapsMap.set(Xt,Mt));const nn=Mt.get(Wt);if(nn&&!Tt){const mn=Math.round(Math.min(_t[0],_t[2])+_t[4]),vn=Math.round(Math.min(_t[1],_t[3])+_t[5]);return{canvas:nn,offsetX:mn,offsetY:vn}}Vt=nn}Vt||(Qt=this.cachedCanvases.getCanvas("maskCanvas",ut,vt),ft(Qt.context,ct));let tn=s.Util.transform(_t,[1/ut,0,0,-1/vt,0,0]);tn=s.Util.transform(tn,[1,0,0,1,0,-vt]);const on=s.Util.applyTransform([0,0],tn),Zt=s.Util.applyTransform([ut,vt],tn),fn=s.Util.normalizeRect([on[0],on[1],Zt[0],Zt[1]]),xn=Math.round(fn[2]-fn[0])||1,hn=Math.round(fn[3]-fn[1])||1,Cn=this.cachedCanvases.getCanvas("fillCanvas",xn,hn),sn=Cn.context,Gt=Math.min(on[0],Zt[0]),qt=Math.min(on[1],Zt[1]);sn.translate(-Gt,-qt),sn.transform(...tn),Vt||(Vt=this._scaleImage(Qt.canvas,(0,a.getCurrentTransformInverse)(sn)),Vt=Vt.img,Mt&&Tt&&Mt.set(Wt,Vt)),sn.imageSmoothingEnabled=bt((0,a.getCurrentTransform)(sn),ct.interpolate),lt(sn,Vt,0,0,Vt.width,Vt.height,0,0,ut,vt),sn.globalCompositeOperation="source-in";const Nt=s.Util.transform((0,a.getCurrentTransformInverse)(sn),[1,0,0,1,-Gt,-qt]);return sn.fillStyle=Tt?At.getPattern(mt,this,Nt,c.PathType.FILL):At,sn.fillRect(0,0,ut,vt),Mt&&!Tt&&(this.cachedCanvases.delete("fillCanvas"),Mt.set(Wt,Cn.canvas)),{canvas:Cn.canvas,offsetX:Math.round(Gt),offsetY:Math.round(qt)}}setLineWidth(ct){ct!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=ct,this.ctx.lineWidth=ct}setLineCap(ct){this.ctx.lineCap=Pt[ct]}setLineJoin(ct){this.ctx.lineJoin=xt[ct]}setMiterLimit(ct){this.ctx.miterLimit=ct}setDash(ct,mt){const ut=this.ctx;ut.setLineDash!==void 0&&(ut.setLineDash(ct),ut.lineDashOffset=mt)}setRenderingIntent(ct){}setFlatness(ct){}setGState(ct){for(const[mt,ut]of ct)switch(mt){case"LW":this.setLineWidth(ut);break;case"LC":this.setLineCap(ut);break;case"LJ":this.setLineJoin(ut);break;case"ML":this.setMiterLimit(ut);break;case"D":this.setDash(ut[0],ut[1]);break;case"RI":this.setRenderingIntent(ut);break;case"FL":this.setFlatness(ut);break;case"Font":this.setFont(ut[0],ut[1]);break;case"CA":this.current.strokeAlpha=ut;break;case"ca":this.current.fillAlpha=ut,this.ctx.globalAlpha=ut;break;case"BM":this.ctx.globalCompositeOperation=ut;break;case"SMask":this.current.activeSMask=ut?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(ut);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const ct=this.inSMaskMode;this.current.activeSMask&&!ct?this.beginSMaskMode():!this.current.activeSMask&&ct&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ct=this.ctx.canvas.width,mt=this.ctx.canvas.height,ut="smaskGroupAt"+this.groupLevel,vt=this.cachedCanvases.getCanvas(ut,ct,mt);this.suspendedCtx=this.ctx,this.ctx=vt.context;const At=this.ctx;At.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),st(this.suspendedCtx,At),et(At,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),st(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(ct){if(!this.current.activeSMask)return;ct?(ct[0]=Math.floor(ct[0]),ct[1]=Math.floor(ct[1]),ct[2]=Math.ceil(ct[2]),ct[3]=Math.ceil(ct[3])):ct=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const mt=this.current.activeSMask,ut=this.suspendedCtx;Et(ut,mt,this.ctx,ct),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(st(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const ct=this.current;this.stateStack.push(ct),this.current=ct.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),st(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(ct,mt,ut,vt,At,Tt){this.ctx.transform(ct,mt,ut,vt,At,Tt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(ct,mt,ut){const vt=this.ctx,At=this.current;let Tt=At.x,_t=At.y,Mt,Wt;const Vt=(0,a.getCurrentTransform)(vt),Qt=Vt[0]===0&&Vt[3]===0||Vt[1]===0&&Vt[2]===0,tn=Qt?ut.slice(0):null;for(let on=0,Zt=0,fn=ct.length;on<fn;on++)switch(ct[on]|0){case s.OPS.rectangle:Tt=mt[Zt++],_t=mt[Zt++];const xn=mt[Zt++],hn=mt[Zt++],Cn=Tt+xn,sn=_t+hn;vt.moveTo(Tt,_t),xn===0||hn===0?vt.lineTo(Cn,sn):(vt.lineTo(Cn,_t),vt.lineTo(Cn,sn),vt.lineTo(Tt,sn)),Qt||At.updateRectMinMax(Vt,[Tt,_t,Cn,sn]),vt.closePath();break;case s.OPS.moveTo:Tt=mt[Zt++],_t=mt[Zt++],vt.moveTo(Tt,_t),Qt||At.updatePathMinMax(Vt,Tt,_t);break;case s.OPS.lineTo:Tt=mt[Zt++],_t=mt[Zt++],vt.lineTo(Tt,_t),Qt||At.updatePathMinMax(Vt,Tt,_t);break;case s.OPS.curveTo:Mt=Tt,Wt=_t,Tt=mt[Zt+4],_t=mt[Zt+5],vt.bezierCurveTo(mt[Zt],mt[Zt+1],mt[Zt+2],mt[Zt+3],Tt,_t),At.updateCurvePathMinMax(Vt,Mt,Wt,mt[Zt],mt[Zt+1],mt[Zt+2],mt[Zt+3],Tt,_t,tn),Zt+=6;break;case s.OPS.curveTo2:Mt=Tt,Wt=_t,vt.bezierCurveTo(Tt,_t,mt[Zt],mt[Zt+1],mt[Zt+2],mt[Zt+3]),At.updateCurvePathMinMax(Vt,Mt,Wt,Tt,_t,mt[Zt],mt[Zt+1],mt[Zt+2],mt[Zt+3],tn),Tt=mt[Zt+2],_t=mt[Zt+3],Zt+=4;break;case s.OPS.curveTo3:Mt=Tt,Wt=_t,Tt=mt[Zt+2],_t=mt[Zt+3],vt.bezierCurveTo(mt[Zt],mt[Zt+1],Tt,_t,Tt,_t),At.updateCurvePathMinMax(Vt,Mt,Wt,mt[Zt],mt[Zt+1],Tt,_t,Tt,_t,tn),Zt+=4;break;case s.OPS.closePath:vt.closePath();break}Qt&&At.updateScalingPathMinMax(Vt,tn),At.setCurrentPoint(Tt,_t)}closePath(){this.ctx.closePath()}stroke(ct=!0){const mt=this.ctx,ut=this.current.strokeColor;mt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof ut=="object"&&(ut!=null&&ut.getPattern)?(mt.save(),mt.strokeStyle=ut.getPattern(mt,this,(0,a.getCurrentTransformInverse)(mt),c.PathType.STROKE),this.rescaleAndStroke(!1),mt.restore()):this.rescaleAndStroke(!0)),ct&&this.consumePath(this.current.getClippedPathBoundingBox()),mt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(ct=!0){const mt=this.ctx,ut=this.current.fillColor,vt=this.current.patternFill;let At=!1;vt&&(mt.save(),mt.fillStyle=ut.getPattern(mt,this,(0,a.getCurrentTransformInverse)(mt),c.PathType.FILL),At=!0);const Tt=this.current.getClippedPathBoundingBox();this.contentVisible&&Tt!==null&&(this.pendingEOFill?(mt.fill("evenodd"),this.pendingEOFill=!1):mt.fill()),At&&mt.restore(),ct&&this.consumePath(Tt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Lt}eoClip(){this.pendingClip=Bt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const ct=this.pendingTextPaths,mt=this.ctx;if(ct===void 0){mt.beginPath();return}mt.save(),mt.beginPath();for(const ut of ct)mt.setTransform(...ut.transform),mt.translate(ut.x,ut.y),ut.addToPath(mt,ut.fontSize);mt.restore(),mt.clip(),mt.beginPath(),delete this.pendingTextPaths}setCharSpacing(ct){this.current.charSpacing=ct}setWordSpacing(ct){this.current.wordSpacing=ct}setHScale(ct){this.current.textHScale=ct/100}setLeading(ct){this.current.leading=-ct}setFont(ct,mt){var Vt;const ut=this.commonObjs.get(ct),vt=this.current;if(!ut)throw new Error(`Can't find font for ${ct}`);if(vt.fontMatrix=ut.fontMatrix||s.FONT_IDENTITY_MATRIX,(vt.fontMatrix[0]===0||vt.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+ct),mt<0?(mt=-mt,vt.fontDirection=-1):vt.fontDirection=1,this.current.font=ut,this.current.fontSize=mt,ut.isType3Font)return;const At=ut.loadedName||"sans-serif",Tt=((Vt=ut.systemFontInfo)==null?void 0:Vt.css)||`"${At}", ${ut.fallbackName}`;let _t="normal";ut.black?_t="900":ut.bold&&(_t="bold");const Mt=ut.italic?"italic":"normal";let Wt=mt;mt<h?Wt=h:mt>g&&(Wt=g),this.current.fontSizeScale=mt/Wt,this.ctx.font=`${Mt} ${_t} ${Wt}px ${Tt}`}setTextRenderingMode(ct){this.current.textRenderingMode=ct}setTextRise(ct){this.current.textRise=ct}moveText(ct,mt){this.current.x=this.current.lineX+=ct,this.current.y=this.current.lineY+=mt}setLeadingMoveText(ct,mt){this.setLeading(-mt),this.moveText(ct,mt)}setTextMatrix(ct,mt,ut,vt,At,Tt){this.current.textMatrix=[ct,mt,ut,vt,At,Tt],this.current.textMatrixScale=Math.hypot(ct,mt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(ct,mt,ut,vt){const At=this.ctx,Tt=this.current,_t=Tt.font,Mt=Tt.textRenderingMode,Wt=Tt.fontSize/Tt.fontSizeScale,Vt=Mt&s.TextRenderingMode.FILL_STROKE_MASK,Qt=!!(Mt&s.TextRenderingMode.ADD_TO_PATH_FLAG),tn=Tt.patternFill&&!_t.missingFile;let on;(_t.disableFontFace||Qt||tn)&&(on=_t.getPathGenerator(this.commonObjs,ct)),_t.disableFontFace||tn?(At.save(),At.translate(mt,ut),At.beginPath(),on(At,Wt),vt&&At.setTransform(...vt),(Vt===s.TextRenderingMode.FILL||Vt===s.TextRenderingMode.FILL_STROKE)&&At.fill(),(Vt===s.TextRenderingMode.STROKE||Vt===s.TextRenderingMode.FILL_STROKE)&&At.stroke(),At.restore()):((Vt===s.TextRenderingMode.FILL||Vt===s.TextRenderingMode.FILL_STROKE)&&At.fillText(ct,mt,ut),(Vt===s.TextRenderingMode.STROKE||Vt===s.TextRenderingMode.FILL_STROKE)&&At.strokeText(ct,mt,ut)),Qt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(At),x:mt,y:ut,fontSize:Wt,addToPath:on})}get isFontSubpixelAAEnabled(){const{context:ct}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ct.scale(1.5,1),ct.fillText("I",0,10);const mt=ct.getImageData(0,0,10,10).data;let ut=!1;for(let vt=3;vt<mt.length;vt+=4)if(mt[vt]>0&&mt[vt]<255){ut=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",ut)}showText(ct){const mt=this.current,ut=mt.font;if(ut.isType3Font)return this.showType3Text(ct);const vt=mt.fontSize;if(vt===0)return;const At=this.ctx,Tt=mt.fontSizeScale,_t=mt.charSpacing,Mt=mt.wordSpacing,Wt=mt.fontDirection,Vt=mt.textHScale*Wt,Qt=ct.length,tn=ut.vertical,on=tn?1:-1,Zt=ut.defaultVMetrics,fn=vt*mt.fontMatrix[0],xn=mt.textRenderingMode===s.TextRenderingMode.FILL&&!ut.disableFontFace&&!mt.patternFill;At.save(),At.transform(...mt.textMatrix),At.translate(mt.x,mt.y+mt.textRise),Wt>0?At.scale(Vt,-1):At.scale(Vt,1);let hn;if(mt.patternFill){At.save();const Nt=mt.fillColor.getPattern(At,this,(0,a.getCurrentTransformInverse)(At),c.PathType.FILL);hn=(0,a.getCurrentTransform)(At),At.restore(),At.fillStyle=Nt}let Cn=mt.lineWidth;const sn=mt.textMatrixScale;if(sn===0||Cn===0){const Nt=mt.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Nt===s.TextRenderingMode.STROKE||Nt===s.TextRenderingMode.FILL_STROKE)&&(Cn=this.getSinglePixelWidth())}else Cn/=sn;if(Tt!==1&&(At.scale(Tt,Tt),Cn/=Tt),At.lineWidth=Cn,ut.isInvalidPDFjsFont){const Nt=[];let Xt=0;for(const nn of ct)Nt.push(nn.unicode),Xt+=nn.width;At.fillText(Nt.join(""),0,0),mt.x+=Xt*fn*Vt,At.restore(),this.compose();return}let Gt=0,qt;for(qt=0;qt<Qt;++qt){const Nt=ct[qt];if(typeof Nt=="number"){Gt+=on*Nt*vt/1e3;continue}let Xt=!1;const nn=(Nt.isSpace?Mt:0)+_t,mn=Nt.fontChar,vn=Nt.accent;let Tn,Pn,Rn=Nt.width;if(tn){const Mn=Nt.vmetric||Zt,en=-(Nt.vmetric?Mn[1]:Rn*.5)*fn,zt=Mn[2]*fn;Rn=Mn?-Mn[0]:Rn,Tn=en/Tt,Pn=(Gt+zt)/Tt}else Tn=Gt/Tt,Pn=0;if(ut.remeasure&&Rn>0){const Mn=At.measureText(mn).width*1e3/vt*Tt;if(Rn<Mn&&this.isFontSubpixelAAEnabled){const en=Rn/Mn;Xt=!0,At.save(),At.scale(en,1),Tn/=en}else Rn!==Mn&&(Tn+=(Rn-Mn)/2e3*vt/Tt)}if(this.contentVisible&&(Nt.isInFont||ut.missingFile)){if(xn&&!vn)At.fillText(mn,Tn,Pn);else if(this.paintChar(mn,Tn,Pn,hn),vn){const Mn=Tn+vt*vn.offset.x/Tt,en=Pn-vt*vn.offset.y/Tt;this.paintChar(vn.fontChar,Mn,en,hn)}}const In=tn?Rn*fn-nn*Wt:Rn*fn+nn*Wt;Gt+=In,Xt&&At.restore()}tn?mt.y-=Gt:mt.x+=Gt*Vt,At.restore(),this.compose()}showType3Text(ct){const mt=this.ctx,ut=this.current,vt=ut.font,At=ut.fontSize,Tt=ut.fontDirection,_t=vt.vertical?1:-1,Mt=ut.charSpacing,Wt=ut.wordSpacing,Vt=ut.textHScale*Tt,Qt=ut.fontMatrix||s.FONT_IDENTITY_MATRIX,tn=ct.length,on=ut.textRenderingMode===s.TextRenderingMode.INVISIBLE;let Zt,fn,xn,hn;if(!(on||At===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,mt.save(),mt.transform(...ut.textMatrix),mt.translate(ut.x,ut.y),mt.scale(Vt,Tt),Zt=0;Zt<tn;++Zt){if(fn=ct[Zt],typeof fn=="number"){hn=_t*fn*At/1e3,this.ctx.translate(hn,0),ut.x+=hn*Vt;continue}const Cn=(fn.isSpace?Wt:0)+Mt,sn=vt.charProcOperatorList[fn.operatorListId];if(!sn){(0,s.warn)(`Type3 character "${fn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=fn,this.save(),mt.scale(At,At),mt.transform(...Qt),this.executeOperatorList(sn),this.restore()),xn=s.Util.applyTransform([fn.width,0],Qt)[0]*At+Cn,mt.translate(xn,0),ut.x+=xn*Vt}mt.restore(),this.processingType3=null}}setCharWidth(ct,mt){}setCharWidthAndBounds(ct,mt,ut,vt,At,Tt){this.ctx.rect(ut,vt,At-ut,Tt-vt),this.ctx.clip(),this.endPath()}getColorN_Pattern(ct){let mt;if(ct[0]==="TilingPattern"){const ut=ct[1],vt=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),At={createCanvasGraphics:Tt=>new an(Tt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};mt=new c.TilingPattern(ct,ut,this.ctx,At,vt)}else mt=this._getPattern(ct[1],ct[2]);return mt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(ct,mt,ut){const vt=s.Util.makeHexColor(ct,mt,ut);this.ctx.strokeStyle=vt,this.current.strokeColor=vt}setFillRGBColor(ct,mt,ut){const vt=s.Util.makeHexColor(ct,mt,ut);this.ctx.fillStyle=vt,this.current.fillColor=vt,this.current.patternFill=!1}_getPattern(ct,mt=null){let ut;return this.cachedPatterns.has(ct)?ut=this.cachedPatterns.get(ct):(ut=(0,c.getShadingPattern)(this.getObject(ct)),this.cachedPatterns.set(ct,ut)),mt&&(ut.matrix=mt),ut}shadingFill(ct){if(!this.contentVisible)return;const mt=this.ctx;this.save();const ut=this._getPattern(ct);mt.fillStyle=ut.getPattern(mt,this,(0,a.getCurrentTransformInverse)(mt),c.PathType.SHADING);const vt=(0,a.getCurrentTransformInverse)(mt);if(vt){const{width:At,height:Tt}=mt.canvas,[_t,Mt,Wt,Vt]=s.Util.getAxialAlignedBoundingBox([0,0,At,Tt],vt);this.ctx.fillRect(_t,Mt,Wt-_t,Vt-Mt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(ct,mt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(ct)&&ct.length===6&&this.transform(...ct),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),mt)){const ut=mt[2]-mt[0],vt=mt[3]-mt[1];this.ctx.rect(mt[0],mt[1],ut,vt),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),mt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(ct){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const mt=this.ctx;ct.isolated||(0,s.info)("TODO: Support non-isolated groups."),ct.knockout&&(0,s.warn)("Knockout groups not supported.");const ut=(0,a.getCurrentTransform)(mt);if(ct.matrix&&mt.transform(...ct.matrix),!ct.bbox)throw new Error("Bounding box is required.");let vt=s.Util.getAxialAlignedBoundingBox(ct.bbox,(0,a.getCurrentTransform)(mt));const At=[0,0,mt.canvas.width,mt.canvas.height];vt=s.Util.intersect(vt,At)||[0,0,0,0];const Tt=Math.floor(vt[0]),_t=Math.floor(vt[1]);let Mt=Math.max(Math.ceil(vt[2])-Tt,1),Wt=Math.max(Math.ceil(vt[3])-_t,1),Vt=1,Qt=1;Mt>b&&(Vt=Mt/b,Mt=b),Wt>b&&(Qt=Wt/b,Wt=b),this.current.startNewPathAndClipBox([0,0,Mt,Wt]);let tn="groupAt"+this.groupLevel;ct.smask&&(tn+="_smask_"+this.smaskCounter++%2);const on=this.cachedCanvases.getCanvas(tn,Mt,Wt),Zt=on.context;Zt.scale(1/Vt,1/Qt),Zt.translate(-Tt,-_t),Zt.transform(...ut),ct.smask?this.smaskStack.push({canvas:on.canvas,context:Zt,offsetX:Tt,offsetY:_t,scaleX:Vt,scaleY:Qt,subtype:ct.smask.subtype,backdrop:ct.smask.backdrop,transferMap:ct.smask.transferMap||null,startTransformInverse:null}):(mt.setTransform(1,0,0,1,0,0),mt.translate(Tt,_t),mt.scale(Vt,Qt),mt.save()),st(mt,Zt),this.ctx=Zt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(mt),this.groupLevel++}endGroup(ct){if(!this.contentVisible)return;this.groupLevel--;const mt=this.ctx,ut=this.groupStack.pop();if(this.ctx=ut,this.ctx.imageSmoothingEnabled=!1,ct.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const vt=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...vt);const At=s.Util.getAxialAlignedBoundingBox([0,0,mt.canvas.width,mt.canvas.height],vt);this.ctx.drawImage(mt.canvas,0,0),this.ctx.restore(),this.compose(At)}}beginAnnotation(ct,mt,ut,vt,At){if(jt(this,kt,Ur).call(this),at(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(mt)&&mt.length===4){const Tt=mt[2]-mt[0],_t=mt[3]-mt[1];if(At&&this.annotationCanvasMap){ut=ut.slice(),ut[4]-=mt[0],ut[5]-=mt[1],mt=mt.slice(),mt[0]=mt[1]=0,mt[2]=Tt,mt[3]=_t;const[Mt,Wt]=s.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:Vt}=this,Qt=Math.ceil(Tt*this.outputScaleX*Vt),tn=Math.ceil(_t*this.outputScaleY*Vt);this.annotationCanvas=this.canvasFactory.create(Qt,tn);const{canvas:on,context:Zt}=this.annotationCanvas;this.annotationCanvasMap.set(ct,on),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Zt,this.ctx.save(),this.ctx.setTransform(Mt,0,0,-Wt,0,_t*Wt),at(this.ctx)}else at(this.ctx),this.ctx.rect(mt[0],mt[1],Tt,_t),this.ctx.clip(),this.endPath()}this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...ut),this.transform(...vt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),jt(this,St,Br).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(ct){if(!this.contentVisible)return;const mt=ct.count;ct=this.getObject(ct.data,ct),ct.count=mt;const ut=this.ctx,vt=this.processingType3;if(vt&&(vt.compiled===void 0&&(vt.compiled=tt(ct)),vt.compiled)){vt.compiled(ut);return}const At=this._createMaskCanvas(ct),Tt=At.canvas;ut.save(),ut.setTransform(1,0,0,1,0,0),ut.drawImage(Tt,At.offsetX,At.offsetY),ut.restore(),this.compose()}paintImageMaskXObjectRepeat(ct,mt,ut=0,vt=0,At,Tt){if(!this.contentVisible)return;ct=this.getObject(ct.data,ct);const _t=this.ctx;_t.save();const Mt=(0,a.getCurrentTransform)(_t);_t.transform(mt,ut,vt,At,0,0);const Wt=this._createMaskCanvas(ct);_t.setTransform(1,0,0,1,Wt.offsetX-Mt[4],Wt.offsetY-Mt[5]);for(let Vt=0,Qt=Tt.length;Vt<Qt;Vt+=2){const tn=s.Util.transform(Mt,[mt,ut,vt,At,Tt[Vt],Tt[Vt+1]]),[on,Zt]=s.Util.applyTransform([0,0],tn);_t.drawImage(Wt.canvas,on,Zt)}_t.restore(),this.compose()}paintImageMaskXObjectGroup(ct){if(!this.contentVisible)return;const mt=this.ctx,ut=this.current.fillColor,vt=this.current.patternFill;for(const At of ct){const{data:Tt,width:_t,height:Mt,transform:Wt}=At,Vt=this.cachedCanvases.getCanvas("maskCanvas",_t,Mt),Qt=Vt.context;Qt.save();const tn=this.getObject(Tt,At);ft(Qt,tn),Qt.globalCompositeOperation="source-in",Qt.fillStyle=vt?ut.getPattern(Qt,this,(0,a.getCurrentTransformInverse)(mt),c.PathType.FILL):ut,Qt.fillRect(0,0,_t,Mt),Qt.restore(),mt.save(),mt.transform(...Wt),mt.scale(1,-1),lt(mt,Vt.canvas,0,0,_t,Mt,0,-1,1,1),mt.restore()}this.compose()}paintImageXObject(ct){if(!this.contentVisible)return;const mt=this.getObject(ct);if(!mt){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(mt)}paintImageXObjectRepeat(ct,mt,ut,vt){if(!this.contentVisible)return;const At=this.getObject(ct);if(!At){(0,s.warn)("Dependent image isn't ready yet");return}const Tt=At.width,_t=At.height,Mt=[];for(let Wt=0,Vt=vt.length;Wt<Vt;Wt+=2)Mt.push({transform:[mt,0,0,ut,vt[Wt],vt[Wt+1]],x:0,y:0,w:Tt,h:_t});this.paintInlineImageXObjectGroup(At,Mt)}applyTransferMapsToCanvas(ct){return this.current.transferMaps!=="none"&&(ct.filter=this.current.transferMaps,ct.drawImage(ct.canvas,0,0),ct.filter="none"),ct.canvas}applyTransferMapsToBitmap(ct){if(this.current.transferMaps==="none")return ct.bitmap;const{bitmap:mt,width:ut,height:vt}=ct,At=this.cachedCanvases.getCanvas("inlineImage",ut,vt),Tt=At.context;return Tt.filter=this.current.transferMaps,Tt.drawImage(mt,0,0),Tt.filter="none",At.canvas}paintInlineImageXObject(ct){if(!this.contentVisible)return;const mt=ct.width,ut=ct.height,vt=this.ctx;if(this.save(),!s.isNodeJS){const{filter:_t}=vt;_t!=="none"&&_t!==""&&(vt.filter="none")}vt.scale(1/mt,-1/ut);let At;if(ct.bitmap)At=this.applyTransferMapsToBitmap(ct);else if(typeof HTMLElement=="function"&&ct instanceof HTMLElement||!ct.data)At=ct;else{const Mt=this.cachedCanvases.getCanvas("inlineImage",mt,ut).context;it(Mt,ct),At=this.applyTransferMapsToCanvas(Mt)}const Tt=this._scaleImage(At,(0,a.getCurrentTransformInverse)(vt));vt.imageSmoothingEnabled=bt((0,a.getCurrentTransform)(vt),ct.interpolate),lt(vt,Tt.img,0,0,Tt.paintWidth,Tt.paintHeight,0,-ut,mt,ut),this.compose(),this.restore()}paintInlineImageXObjectGroup(ct,mt){if(!this.contentVisible)return;const ut=this.ctx;let vt;if(ct.bitmap)vt=ct.bitmap;else{const At=ct.width,Tt=ct.height,Mt=this.cachedCanvases.getCanvas("inlineImage",At,Tt).context;it(Mt,ct),vt=this.applyTransferMapsToCanvas(Mt)}for(const At of mt)ut.save(),ut.transform(...At.transform),ut.scale(1,-1),lt(ut,vt,At.x,At.y,At.w,At.h,0,-1,1,1),ut.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(ct){}markPointProps(ct,mt){}beginMarkedContent(ct){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(ct,mt){ct==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(mt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(ct){const mt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ct);const ut=this.ctx;this.pendingClip&&(mt||(this.pendingClip===Bt?ut.clip("evenodd"):ut.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ut.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const ct=(0,a.getCurrentTransform)(this.ctx);if(ct[1]===0&&ct[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(ct[0]),Math.abs(ct[3]));else{const mt=Math.abs(ct[0]*ct[3]-ct[2]*ct[1]),ut=Math.hypot(ct[0],ct[2]),vt=Math.hypot(ct[1],ct[3]);this._cachedGetSinglePixelWidth=Math.max(ut,vt)/mt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:ct}=this.current,{a:mt,b:ut,c:vt,d:At}=this.ctx.getTransform();let Tt,_t;if(ut===0&&vt===0){const Mt=Math.abs(mt),Wt=Math.abs(At);if(Mt===Wt)if(ct===0)Tt=_t=1/Mt;else{const Vt=Mt*ct;Tt=_t=Vt<1?1/Vt:1}else if(ct===0)Tt=1/Mt,_t=1/Wt;else{const Vt=Mt*ct,Qt=Wt*ct;Tt=Vt<1?1/Vt:1,_t=Qt<1?1/Qt:1}}else{const Mt=Math.abs(mt*At-ut*vt),Wt=Math.hypot(mt,ut),Vt=Math.hypot(vt,At);if(ct===0)Tt=Vt/Mt,_t=Wt/Mt;else{const Qt=ct*Mt;Tt=Vt>Qt?Vt/Qt:1,_t=Wt>Qt?Wt/Qt:1}}this._cachedScaleForStroking[0]=Tt,this._cachedScaleForStroking[1]=_t}return this._cachedScaleForStroking}rescaleAndStroke(ct){const{ctx:mt}=this,{lineWidth:ut}=this.current,[vt,At]=this.getScaleForStroking();if(mt.lineWidth=ut||1,vt===1&&At===1){mt.stroke();return}const Tt=mt.getLineDash();if(ct&&mt.save(),mt.scale(vt,At),Tt.length>0){const _t=Math.max(vt,At);mt.setLineDash(Tt.map(Mt=>Mt/_t)),mt.lineDashOffset/=_t}mt.stroke(),ct&&mt.restore()}isContentVisible(){for(let ct=this.markedContentStack.length-1;ct>=0;ct--)if(!this.markedContentStack[ct].visible)return!1;return!0}};kt=new WeakSet,Ur=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},St=new WeakSet,Br=function(){if(this.pageColors){const ct=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(ct!=="none"){const mt=this.ctx.filter;this.ctx.filter=ct,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=mt}}};let Kt=an;e.CanvasGraphics=Kt;for(const ht in s.OPS)Kt.prototype[ht]!==void 0&&(Kt.prototype[s.OPS[ht]]=Kt.prototype[ht])},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=_e;var s=o(1),a=o(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function d(tt,nt){if(!nt)return;const it=nt[2]-nt[0],ft=nt[3]-nt[1],st=new Path2D;st.rect(nt[0],nt[1],it,ft),tt.clip(st)}class h{constructor(){this.constructor===h&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class g extends h{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let it;this._type==="axial"?it=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(it=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ft of this._colorStops)it.addColorStop(ft[0],ft[1]);return it}getPattern(nt,it,ft,st){let at;if(st===c.STROKE||st===c.FILL){const Ct=it.current.getClippedPathBoundingBox(st,(0,a.getCurrentTransform)(nt))||[0,0,0,0],yt=Math.ceil(Ct[2]-Ct[0])||1,pt=Math.ceil(Ct[3]-Ct[1])||1,gt=it.cachedCanvases.getCanvas("pattern",yt,pt,!0),Et=gt.context;Et.clearRect(0,0,Et.canvas.width,Et.canvas.height),Et.beginPath(),Et.rect(0,0,Et.canvas.width,Et.canvas.height),Et.translate(-Ct[0],-Ct[1]),ft=s.Util.transform(ft,[1,0,0,1,Ct[0],Ct[1]]),Et.transform(...it.baseTransform),this.matrix&&Et.transform(...this.matrix),d(Et,this._bbox),Et.fillStyle=this._createGradient(Et),Et.fill(),at=nt.createPattern(gt.canvas,"no-repeat");const bt=new DOMMatrix(ft);at.setTransform(bt)}else d(nt,this._bbox),at=this._createGradient(nt);return at}}function b(tt,nt,it,ft,st,at,Ct,yt){const pt=nt.coords,gt=nt.colors,Et=tt.data,bt=tt.width*4;let Pt;pt[it+1]>pt[ft+1]&&(Pt=it,it=ft,ft=Pt,Pt=at,at=Ct,Ct=Pt),pt[ft+1]>pt[st+1]&&(Pt=ft,ft=st,st=Pt,Pt=Ct,Ct=yt,yt=Pt),pt[it+1]>pt[ft+1]&&(Pt=it,it=ft,ft=Pt,Pt=at,at=Ct,Ct=Pt);const xt=(pt[it]+nt.offsetX)*nt.scaleX,Lt=(pt[it+1]+nt.offsetY)*nt.scaleY,Bt=(pt[ft]+nt.offsetX)*nt.scaleX,Kt=(pt[ft+1]+nt.offsetY)*nt.scaleY,kt=(pt[st]+nt.offsetX)*nt.scaleX,Ut=(pt[st+1]+nt.offsetY)*nt.scaleY;if(Lt>=Ut)return;const St=gt[at],rn=gt[at+1],an=gt[at+2],ht=gt[Ct],ct=gt[Ct+1],mt=gt[Ct+2],ut=gt[yt],vt=gt[yt+1],At=gt[yt+2],Tt=Math.round(Lt),_t=Math.round(Ut);let Mt,Wt,Vt,Qt,tn,on,Zt,fn;for(let xn=Tt;xn<=_t;xn++){if(xn<Kt){const qt=xn<Lt?0:(Lt-xn)/(Lt-Kt);Mt=xt-(xt-Bt)*qt,Wt=St-(St-ht)*qt,Vt=rn-(rn-ct)*qt,Qt=an-(an-mt)*qt}else{let qt;xn>Ut?qt=1:Kt===Ut?qt=0:qt=(Kt-xn)/(Kt-Ut),Mt=Bt-(Bt-kt)*qt,Wt=ht-(ht-ut)*qt,Vt=ct-(ct-vt)*qt,Qt=mt-(mt-At)*qt}let hn;xn<Lt?hn=0:xn>Ut?hn=1:hn=(Lt-xn)/(Lt-Ut),tn=xt-(xt-kt)*hn,on=St-(St-ut)*hn,Zt=rn-(rn-vt)*hn,fn=an-(an-At)*hn;const Cn=Math.round(Math.min(Mt,tn)),sn=Math.round(Math.max(Mt,tn));let Gt=bt*xn+Cn*4;for(let qt=Cn;qt<=sn;qt++)hn=(Mt-qt)/(Mt-tn),hn<0?hn=0:hn>1&&(hn=1),Et[Gt++]=Wt-(Wt-on)*hn|0,Et[Gt++]=Vt-(Vt-Zt)*hn|0,Et[Gt++]=Qt-(Qt-fn)*hn|0,Et[Gt++]=255}}function _(tt,nt,it){const ft=nt.coords,st=nt.colors;let at,Ct;switch(nt.type){case"lattice":const yt=nt.verticesPerRow,pt=Math.floor(ft.length/yt)-1,gt=yt-1;for(at=0;at<pt;at++){let Et=at*yt;for(let bt=0;bt<gt;bt++,Et++)b(tt,it,ft[Et],ft[Et+1],ft[Et+yt],st[Et],st[Et+1],st[Et+yt]),b(tt,it,ft[Et+yt+1],ft[Et+1],ft[Et+yt],st[Et+yt+1],st[Et+1],st[Et+yt])}break;case"triangles":for(at=0,Ct=ft.length;at<Ct;at+=3)b(tt,it,ft[at],ft[at+1],ft[at+2],st[at],st[at+1],st[at+2]);break;default:throw new Error("illegal figure")}}class j extends h{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,it,ft){const yt=Math.floor(this._bounds[0]),pt=Math.floor(this._bounds[1]),gt=Math.ceil(this._bounds[2])-yt,Et=Math.ceil(this._bounds[3])-pt,bt=Math.min(Math.ceil(Math.abs(gt*nt[0]*1.1)),3e3),Pt=Math.min(Math.ceil(Math.abs(Et*nt[1]*1.1)),3e3),xt=gt/bt,Lt=Et/Pt,Bt={coords:this._coords,colors:this._colors,offsetX:-yt,offsetY:-pt,scaleX:1/xt,scaleY:1/Lt},Kt=bt+2*2,kt=Pt+2*2,Ut=ft.getCanvas("mesh",Kt,kt,!1),St=Ut.context,rn=St.createImageData(bt,Pt);if(it){const ht=rn.data;for(let ct=0,mt=ht.length;ct<mt;ct+=4)ht[ct]=it[0],ht[ct+1]=it[1],ht[ct+2]=it[2],ht[ct+3]=255}for(const ht of this._figures)_(rn,ht,Bt);return St.putImageData(rn,2,2),{canvas:Ut.canvas,offsetX:yt-2*xt,offsetY:pt-2*Lt,scaleX:xt,scaleY:Lt}}getPattern(nt,it,ft,st){d(nt,this._bbox);let at;if(st===c.SHADING)at=s.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(nt));else if(at=s.Util.singularValueDecompose2dScale(it.baseTransform),this.matrix){const yt=s.Util.singularValueDecompose2dScale(this.matrix);at=[at[0]*yt[0],at[1]*yt[1]]}const Ct=this._createMeshCanvas(at,st===c.SHADING?null:this._background,it.cachedCanvases);return st!==c.SHADING&&(nt.setTransform(...it.baseTransform),this.matrix&&nt.transform(...this.matrix)),nt.translate(Ct.offsetX,Ct.offsetY),nt.scale(Ct.scaleX,Ct.scaleY),nt.createPattern(Ct.canvas,"no-repeat")}}class $ extends h{getPattern(){return"hotpink"}}function _e(tt){switch(tt[0]){case"RadialAxial":return new g(tt);case"Mesh":return new j(tt);case"Dummy":return new $}throw new Error(`Unknown IR type: ${tt[0]}`)}const et={COLORED:1,UNCOLORED:2},lt=class lt{constructor(nt,it,ft,st,at){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=it,this.ctx=ft,this.canvasGraphicsFactory=st,this.baseTransform=at}createPatternCanvas(nt){const it=this.operatorList,ft=this.bbox,st=this.xstep,at=this.ystep,Ct=this.paintType,yt=this.tilingType,pt=this.color,gt=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+yt);const Et=ft[0],bt=ft[1],Pt=ft[2],xt=ft[3],Lt=s.Util.singularValueDecompose2dScale(this.matrix),Bt=s.Util.singularValueDecompose2dScale(this.baseTransform),Kt=[Lt[0]*Bt[0],Lt[1]*Bt[1]],kt=this.getSizeAndScale(st,this.ctx.canvas.width,Kt[0]),Ut=this.getSizeAndScale(at,this.ctx.canvas.height,Kt[1]),St=nt.cachedCanvases.getCanvas("pattern",kt.size,Ut.size,!0),rn=St.context,an=gt.createCanvasGraphics(rn);an.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(an,Ct,pt);let ht=Et,ct=bt,mt=Pt,ut=xt;return Et<0&&(ht=0,mt+=Math.abs(Et)),bt<0&&(ct=0,ut+=Math.abs(bt)),rn.translate(-(kt.scale*ht),-(Ut.scale*ct)),an.transform(kt.scale,0,0,Ut.scale,0,0),rn.save(),this.clipBbox(an,ht,ct,mt,ut),an.baseTransform=(0,a.getCurrentTransform)(an.ctx),an.executeOperatorList(it),an.endDrawing(),{canvas:St.canvas,scaleX:kt.scale,scaleY:Ut.scale,offsetX:ht,offsetY:ct}}getSizeAndScale(nt,it,ft){nt=Math.abs(nt);const st=Math.max(lt.MAX_PATTERN_SIZE,it);let at=Math.ceil(nt*ft);return at>=st?at=st:ft=at/nt,{scale:ft,size:at}}clipBbox(nt,it,ft,st,at){const Ct=st-it,yt=at-ft;nt.ctx.rect(it,ft,Ct,yt),nt.current.updateRectMinMax((0,a.getCurrentTransform)(nt.ctx),[it,ft,st,at]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,it,ft){const st=nt.ctx,at=nt.current;switch(it){case et.COLORED:const Ct=this.ctx;st.fillStyle=Ct.fillStyle,st.strokeStyle=Ct.strokeStyle,at.fillColor=Ct.fillStyle,at.strokeColor=Ct.strokeStyle;break;case et.UNCOLORED:const yt=s.Util.makeHexColor(ft[0],ft[1],ft[2]);st.fillStyle=yt,st.strokeStyle=yt,at.fillColor=yt,at.strokeColor=yt;break;default:throw new s.FormatError(`Unsupported paint type: ${it}`)}}getPattern(nt,it,ft,st){let at=ft;st!==c.SHADING&&(at=s.Util.transform(at,it.baseTransform),this.matrix&&(at=s.Util.transform(at,this.matrix)));const Ct=this.createPatternCanvas(it);let yt=new DOMMatrix(at);yt=yt.translate(Ct.offsetX,Ct.offsetY),yt=yt.scale(1/Ct.scaleX,1/Ct.scaleY);const pt=nt.createPattern(Ct.canvas,"repeat");return pt.setTransform(yt),pt}};zn(lt,"MAX_PATTERN_SIZE",3e3);let rt=lt;e.TilingPattern=rt},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=c,e.convertToRGBA=a,e.grayToRGBA=h;var s=o(1);function a(g){switch(g.kind){case s.ImageKind.GRAYSCALE_1BPP:return c(g);case s.ImageKind.RGB_24BPP:return d(g)}return null}function c({src:g,srcPos:b=0,dest:_,width:j,height:$,nonBlackColor:_e=4294967295,inverseDecode:et=!1}){const rt=s.FeatureTest.isLittleEndian?4278190080:255,[lt,tt]=et?[_e,rt]:[rt,_e],nt=j>>3,it=j&7,ft=g.length;_=new Uint32Array(_.buffer);let st=0;for(let at=0;at<$;at++){for(const yt=b+nt;b<yt;b++){const pt=b<ft?g[b]:255;_[st++]=pt&128?tt:lt,_[st++]=pt&64?tt:lt,_[st++]=pt&32?tt:lt,_[st++]=pt&16?tt:lt,_[st++]=pt&8?tt:lt,_[st++]=pt&4?tt:lt,_[st++]=pt&2?tt:lt,_[st++]=pt&1?tt:lt}if(it===0)continue;const Ct=b<ft?g[b++]:255;for(let yt=0;yt<it;yt++)_[st++]=Ct&1<<7-yt?tt:lt}return{srcPos:b,destPos:st}}function d({src:g,srcPos:b=0,dest:_,destPos:j=0,width:$,height:_e}){let et=0;const rt=g.length>>2,lt=new Uint32Array(g.buffer,b,rt);if(s.FeatureTest.isLittleEndian){for(;et<rt-2;et+=3,j+=4){const tt=lt[et],nt=lt[et+1],it=lt[et+2];_[j]=tt|4278190080,_[j+1]=tt>>>24|nt<<8|4278190080,_[j+2]=nt>>>16|it<<16|4278190080,_[j+3]=it>>>8|4278190080}for(let tt=et*4,nt=g.length;tt<nt;tt+=3)_[j++]=g[tt]|g[tt+1]<<8|g[tt+2]<<16|4278190080}else{for(;et<rt-2;et+=3,j+=4){const tt=lt[et],nt=lt[et+1],it=lt[et+2];_[j]=tt|255,_[j+1]=tt<<24|nt>>>8|255,_[j+2]=nt<<16|it>>>16|255,_[j+3]=it<<8|255}for(let tt=et*4,nt=g.length;tt<nt;tt+=3)_[j++]=g[tt]<<24|g[tt+1]<<16|g[tt+2]<<8|255}return{srcPos:b,destPos:j}}function h(g,b){if(s.FeatureTest.isLittleEndian)for(let _=0,j=g.length;_<j;_++)b[_]=g[_]*65793|4278190080;else for(let _=0,j=g.length;_<j;_++)b[_]=g[_]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const o=Object.create(null);e.GlobalWorkerOptions=o,o.workerPort=null,o.workerSrc=""},(i,e,o)=>{var g,mo,_,go,$,mr;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var s=o(1);const a={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(et){switch(et instanceof Error||typeof et=="object"&&et!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),et.name){case"AbortException":return new s.AbortException(et.message);case"MissingPDFException":return new s.MissingPDFException(et.message);case"PasswordException":return new s.PasswordException(et.message,et.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(et.message,et.status);case"UnknownErrorException":return new s.UnknownErrorException(et.message,et.details);default:return new s.UnknownErrorException(et.message,et.toString())}}class h{constructor(rt,lt,tt){Ot(this,g);Ot(this,_);Ot(this,$);this.sourceName=rt,this.targetName=lt,this.comObj=tt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=nt=>{const it=nt.data;if(it.targetName!==this.sourceName)return;if(it.stream){jt(this,_,go).call(this,it);return}if(it.callback){const st=it.callbackId,at=this.callbackCapabilities[st];if(!at)throw new Error(`Cannot resolve callback ${st}`);if(delete this.callbackCapabilities[st],it.callback===a.DATA)at.resolve(it.data);else if(it.callback===a.ERROR)at.reject(d(it.reason));else throw new Error("Unexpected callback case");return}const ft=this.actionHandler[it.action];if(!ft)throw new Error(`Unknown action from worker: ${it.action}`);if(it.callbackId){const st=this.sourceName,at=it.sourceName;new Promise(function(Ct){Ct(ft(it.data))}).then(function(Ct){tt.postMessage({sourceName:st,targetName:at,callback:a.DATA,callbackId:it.callbackId,data:Ct})},function(Ct){tt.postMessage({sourceName:st,targetName:at,callback:a.ERROR,callbackId:it.callbackId,reason:d(Ct)})});return}if(it.streamId){jt(this,g,mo).call(this,it);return}ft(it.data)},tt.addEventListener("message",this._onComObjOnMessage)}on(rt,lt){const tt=this.actionHandler;if(tt[rt])throw new Error(`There is already an actionName called "${rt}"`);tt[rt]=lt}send(rt,lt,tt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:rt,data:lt},tt)}sendWithPromise(rt,lt,tt){const nt=this.callbackId++,it=new s.PromiseCapability;this.callbackCapabilities[nt]=it;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:rt,callbackId:nt,data:lt},tt)}catch(ft){it.reject(ft)}return it.promise}sendWithStream(rt,lt,tt,nt){const it=this.streamId++,ft=this.sourceName,st=this.targetName,at=this.comObj;return new ReadableStream({start:Ct=>{const yt=new s.PromiseCapability;return this.streamControllers[it]={controller:Ct,startCall:yt,pullCall:null,cancelCall:null,isClosed:!1},at.postMessage({sourceName:ft,targetName:st,action:rt,streamId:it,data:lt,desiredSize:Ct.desiredSize},nt),yt.promise},pull:Ct=>{const yt=new s.PromiseCapability;return this.streamControllers[it].pullCall=yt,at.postMessage({sourceName:ft,targetName:st,stream:c.PULL,streamId:it,desiredSize:Ct.desiredSize}),yt.promise},cancel:Ct=>{(0,s.assert)(Ct instanceof Error,"cancel must have a valid reason");const yt=new s.PromiseCapability;return this.streamControllers[it].cancelCall=yt,this.streamControllers[it].isClosed=!0,at.postMessage({sourceName:ft,targetName:st,stream:c.CANCEL,streamId:it,reason:d(Ct)}),yt.promise}},tt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g=new WeakSet,mo=function(rt){const lt=rt.streamId,tt=this.sourceName,nt=rt.sourceName,it=this.comObj,ft=this,st=this.actionHandler[rt.action],at={enqueue(Ct,yt=1,pt){if(this.isCancelled)return;const gt=this.desiredSize;this.desiredSize-=yt,gt>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),it.postMessage({sourceName:tt,targetName:nt,stream:c.ENQUEUE,streamId:lt,chunk:Ct},pt)},close(){this.isCancelled||(this.isCancelled=!0,it.postMessage({sourceName:tt,targetName:nt,stream:c.CLOSE,streamId:lt}),delete ft.streamSinks[lt])},error(Ct){(0,s.assert)(Ct instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,it.postMessage({sourceName:tt,targetName:nt,stream:c.ERROR,streamId:lt,reason:d(Ct)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:rt.desiredSize,ready:null};at.sinkCapability.resolve(),at.ready=at.sinkCapability.promise,this.streamSinks[lt]=at,new Promise(function(Ct){Ct(st(rt.data,at))}).then(function(){it.postMessage({sourceName:tt,targetName:nt,stream:c.START_COMPLETE,streamId:lt,success:!0})},function(Ct){it.postMessage({sourceName:tt,targetName:nt,stream:c.START_COMPLETE,streamId:lt,reason:d(Ct)})})},_=new WeakSet,go=function(rt){const lt=rt.streamId,tt=this.sourceName,nt=rt.sourceName,it=this.comObj,ft=this.streamControllers[lt],st=this.streamSinks[lt];switch(rt.stream){case c.START_COMPLETE:rt.success?ft.startCall.resolve():ft.startCall.reject(d(rt.reason));break;case c.PULL_COMPLETE:rt.success?ft.pullCall.resolve():ft.pullCall.reject(d(rt.reason));break;case c.PULL:if(!st){it.postMessage({sourceName:tt,targetName:nt,stream:c.PULL_COMPLETE,streamId:lt,success:!0});break}st.desiredSize<=0&&rt.desiredSize>0&&st.sinkCapability.resolve(),st.desiredSize=rt.desiredSize,new Promise(function(at){var Ct;at((Ct=st.onPull)==null?void 0:Ct.call(st))}).then(function(){it.postMessage({sourceName:tt,targetName:nt,stream:c.PULL_COMPLETE,streamId:lt,success:!0})},function(at){it.postMessage({sourceName:tt,targetName:nt,stream:c.PULL_COMPLETE,streamId:lt,reason:d(at)})});break;case c.ENQUEUE:if((0,s.assert)(ft,"enqueue should have stream controller"),ft.isClosed)break;ft.controller.enqueue(rt.chunk);break;case c.CLOSE:if((0,s.assert)(ft,"close should have stream controller"),ft.isClosed)break;ft.isClosed=!0,ft.controller.close(),jt(this,$,mr).call(this,ft,lt);break;case c.ERROR:(0,s.assert)(ft,"error should have stream controller"),ft.controller.error(d(rt.reason)),jt(this,$,mr).call(this,ft,lt);break;case c.CANCEL_COMPLETE:rt.success?ft.cancelCall.resolve():ft.cancelCall.reject(d(rt.reason)),jt(this,$,mr).call(this,ft,lt);break;case c.CANCEL:if(!st)break;new Promise(function(at){var Ct;at((Ct=st.onCancel)==null?void 0:Ct.call(st,d(rt.reason)))}).then(function(){it.postMessage({sourceName:tt,targetName:nt,stream:c.CANCEL_COMPLETE,streamId:lt,success:!0})},function(at){it.postMessage({sourceName:tt,targetName:nt,stream:c.CANCEL_COMPLETE,streamId:lt,reason:d(at)})}),st.sinkCapability.reject(d(rt.reason)),st.isCancelled=!0,delete this.streamSinks[lt];break;default:throw new Error("Unexpected stream case")}},$=new WeakSet,mr=async function(rt,lt){var tt,nt,it;await Promise.allSettled([(tt=rt.startCall)==null?void 0:tt.promise,(nt=rt.pullCall)==null?void 0:nt.promise,(it=rt.cancelCall)==null?void 0:it.promise]),delete this.streamControllers[lt]},e.MessageHandler=h},(i,e,o)=>{var c,d;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var s=o(1);class a{constructor({parsedData:g,rawData:b}){Ot(this,c,void 0);Ot(this,d,void 0);Yt(this,c,g),Yt(this,d,b)}getRaw(){return ot(this,d)}get(g){return ot(this,c).get(g)??null}getAll(){return(0,s.objectFromMap)(ot(this,c))}has(g){return ot(this,c).has(g)}}c=new WeakMap,d=new WeakMap,e.Metadata=a},(i,e,o)=>{var g,b,_,j,$,_e,Hr;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var s=o(1),a=o(8);const c=Symbol("INTERNAL");class d{constructor(lt,tt){Ot(this,g,!0);this.name=lt,this.intent=tt}get visible(){return ot(this,g)}_setVisible(lt,tt){lt!==c&&(0,s.unreachable)("Internal method `_setVisible` called."),Yt(this,g,tt)}}g=new WeakMap;class h{constructor(lt){Ot(this,_e);Ot(this,b,null);Ot(this,_,new Map);Ot(this,j,null);Ot(this,$,null);if(this.name=null,this.creator=null,lt!==null){this.name=lt.name,this.creator=lt.creator,Yt(this,$,lt.order);for(const tt of lt.groups)ot(this,_).set(tt.id,new d(tt.name,tt.intent));if(lt.baseState==="OFF")for(const tt of ot(this,_).values())tt._setVisible(c,!1);for(const tt of lt.on)ot(this,_).get(tt)._setVisible(c,!0);for(const tt of lt.off)ot(this,_).get(tt)._setVisible(c,!1);Yt(this,j,this.getHash())}}isVisible(lt){if(ot(this,_).size===0)return!0;if(!lt)return(0,s.warn)("Optional content group not defined."),!0;if(lt.type==="OCG")return ot(this,_).has(lt.id)?ot(this,_).get(lt.id).visible:((0,s.warn)(`Optional content group not found: ${lt.id}`),!0);if(lt.type==="OCMD"){if(lt.expression)return jt(this,_e,Hr).call(this,lt.expression);if(!lt.policy||lt.policy==="AnyOn"){for(const tt of lt.ids){if(!ot(this,_).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(ot(this,_).get(tt).visible)return!0}return!1}else if(lt.policy==="AllOn"){for(const tt of lt.ids){if(!ot(this,_).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(!ot(this,_).get(tt).visible)return!1}return!0}else if(lt.policy==="AnyOff"){for(const tt of lt.ids){if(!ot(this,_).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(!ot(this,_).get(tt).visible)return!0}return!1}else if(lt.policy==="AllOff"){for(const tt of lt.ids){if(!ot(this,_).has(tt))return(0,s.warn)(`Optional content group not found: ${tt}`),!0;if(ot(this,_).get(tt).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${lt.policy}.`),!0}return(0,s.warn)(`Unknown group type ${lt.type}.`),!0}setVisibility(lt,tt=!0){if(!ot(this,_).has(lt)){(0,s.warn)(`Optional content group not found: ${lt}`);return}ot(this,_).get(lt)._setVisible(c,!!tt),Yt(this,b,null)}get hasInitialVisibility(){return ot(this,j)===null||this.getHash()===ot(this,j)}getOrder(){return ot(this,_).size?ot(this,$)?ot(this,$).slice():[...ot(this,_).keys()]:null}getGroups(){return ot(this,_).size>0?(0,s.objectFromMap)(ot(this,_)):null}getGroup(lt){return ot(this,_).get(lt)||null}getHash(){if(ot(this,b)!==null)return ot(this,b);const lt=new a.MurmurHash3_64;for(const[tt,nt]of ot(this,_))lt.update(`${tt}:${nt.visible}`);return Yt(this,b,lt.hexdigest())}}b=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakSet,Hr=function(lt){const tt=lt.length;if(tt<2)return!0;const nt=lt[0];for(let it=1;it<tt;it++){const ft=lt[it];let st;if(Array.isArray(ft))st=jt(this,_e,Hr).call(this,ft);else if(ot(this,_).has(ft))st=ot(this,_).get(ft).visible;else return(0,s.warn)(`Optional content group not found: ${ft}`),!0;switch(nt){case"And":if(!st)return!1;break;case"Or":if(st)return!0;break;case"Not":return!st;default:return!0}}return nt==="And"},e.OptionalContentConfig=h},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var s=o(1),a=o(6);class c{constructor({length:b,initialData:_,progressiveDone:j=!1,contentDispositionFilename:$=null,disableRange:_e=!1,disableStream:et=!1},rt){if((0,s.assert)(rt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=j,this._contentDispositionFilename=$,(_==null?void 0:_.length)>0){const lt=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(lt)}this._pdfDataRangeTransport=rt,this._isStreamingSupported=!et,this._isRangeSupported=!_e,this._contentLength=b,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((lt,tt)=>{this._onReceiveData({begin:lt,chunk:tt})}),this._pdfDataRangeTransport.addProgressListener((lt,tt)=>{this._onProgress({loaded:lt,total:tt})}),this._pdfDataRangeTransport.addProgressiveReadListener(lt=>{this._onReceiveData({chunk:lt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:b,chunk:_}){const j=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(b===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(j):this._queuedChunks.push(j);else{const $=this._rangeReaders.some(function(_e){return _e._begin!==b?!1:(_e._enqueue(j),!0)});(0,s.assert)($,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}_onProgress(b){var _,j,$,_e;b.total===void 0?(j=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||j.call(_,{loaded:b.loaded}):(_e=($=this._fullRequestReader)==null?void 0:$.onProgress)==null||_e.call($,{loaded:b.loaded,total:b.total})}_onProgressiveDone(){var b;(b=this._fullRequestReader)==null||b.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){const _=this._rangeReaders.indexOf(b);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const b=this._queuedChunks;return this._queuedChunks=null,new d(this,b,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(b,_){if(_<=this._progressiveDataLength)return null;const j=new h(this,b,_);return this._pdfDataRangeTransport.requestDataRange(b,_),this._rangeReaders.push(j),j}cancelAllRequests(b){var _;(_=this._fullRequestReader)==null||_.cancel(b);for(const j of this._rangeReaders.slice(0))j.cancel(b);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=c;class d{constructor(b,_,j=!1,$=null){this._stream=b,this._done=j||!1,this._filename=(0,a.isPdfFile)($)?$:null,this._queuedChunks=_||[],this._loaded=0;for(const _e of this._queuedChunks)this._loaded+=_e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new s.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class h{constructor(b,_,j){this._stream=b,this._begin=_,this._end=j,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){if(!this._done){if(this._requests.length===0)this._queuedChunk=b;else{this._requests.shift().resolve({value:b,done:!1});for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new s.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var s=o(1),a=o(20);function c(j,$,_e){return{method:"GET",headers:j,signal:_e.signal,mode:"cors",credentials:$?"include":"same-origin",redirect:"follow"}}function d(j){const $=new Headers;for(const _e in j){const et=j[_e];et!==void 0&&$.append(_e,et)}return $}function h(j){return j instanceof Uint8Array?j.buffer:j instanceof ArrayBuffer?j:((0,s.warn)(`getArrayBuffer - unexpected data format: ${j}`),new Uint8Array(j).buffer)}class g{constructor($){this.source=$,this.isHttp=/^https?:/i.test($.url),this.httpHeaders=this.isHttp&&$.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var $;return(($=this._fullRequestReader)==null?void 0:$._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader($,_e){if(_e<=this._progressiveDataLength)return null;const et=new _(this,$,_e);return this._rangeRequestReaders.push(et),et}cancelAllRequests($){var _e;(_e=this._fullRequestReader)==null||_e.cancel($);for(const et of this._rangeRequestReaders.slice(0))et.cancel($)}}e.PDFFetchStream=g;class b{constructor($){this._stream=$,this._reader=null,this._loaded=0,this._filename=null;const _e=$.source;this._withCredentials=_e.withCredentials||!1,this._contentLength=_e.length,this._headersCapability=new s.PromiseCapability,this._disableRange=_e.disableRange||!1,this._rangeChunkSize=_e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_e.disableStream,this._isRangeSupported=!_e.disableRange,this._headers=d(this._stream.httpHeaders);const et=_e.url;fetch(et,c(this._headers,this._withCredentials,this._abortController)).then(rt=>{if(!(0,a.validateResponseStatus)(rt.status))throw(0,a.createResponseStatusError)(rt.status,et);this._reader=rt.body.getReader(),this._headersCapability.resolve();const lt=it=>rt.headers.get(it),{allowRangeRequests:tt,suggestedLength:nt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:lt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=tt,this._contentLength=nt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(lt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var et;await this._headersCapability.promise;const{value:$,done:_e}=await this._reader.read();return _e?{value:$,done:_e}:(this._loaded+=$.byteLength,(et=this.onProgress)==null||et.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h($),done:!1})}cancel($){var _e;(_e=this._reader)==null||_e.cancel($),this._abortController.abort()}}class _{constructor($,_e,et){this._stream=$,this._reader=null,this._loaded=0;const rt=$.source;this._withCredentials=rt.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!rt.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_e}-${et-1}`);const lt=rt.url;fetch(lt,c(this._headers,this._withCredentials,this._abortController)).then(tt=>{if(!(0,a.validateResponseStatus)(tt.status))throw(0,a.createResponseStatusError)(tt.status,lt);this._readCapability.resolve(),this._reader=tt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var et;await this._readCapability.promise;const{value:$,done:_e}=await this._reader.read();return _e?{value:$,done:_e}:(this._loaded+=$.byteLength,(et=this.onProgress)==null||et.call(this,{loaded:this._loaded}),{value:h($),done:!1})}cancel($){var _e;(_e=this._reader)==null||_e.cancel($),this._abortController.abort()}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=g,e.extractFilenameFromHeader=h,e.validateRangeRequestCapabilities=d,e.validateResponseStatus=b;var s=o(1),a=o(21),c=o(6);function d({getResponseHeader:_,isHttp:j,rangeChunkSize:$,disableRange:_e}){const et={allowRangeRequests:!1,suggestedLength:void 0},rt=parseInt(_("Content-Length"),10);return!Number.isInteger(rt)||(et.suggestedLength=rt,rt<=2*$)||_e||!j||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(et.allowRangeRequests=!0),et}function h(_){const j=_("Content-Disposition");if(j){let $=(0,a.getFilenameFromContentDispositionHeader)(j);if($.includes("%"))try{$=decodeURIComponent($)}catch{}if((0,c.isPdfFile)($))return $}return null}function g(_,j){return _===404||_===0&&j.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+j+'".'):new s.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${j}".`,_)}function b(_){return _===200||_===206}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var s=o(1);function a(c){let d=!0,h=g("filename\\*","i").exec(c);if(h){h=h[1];let rt=$(h);return rt=unescape(rt),rt=_e(rt),rt=et(rt),_(rt)}if(h=j(c),h){const rt=et(h);return _(rt)}if(h=g("filename","i").exec(c),h){h=h[1];let rt=$(h);return rt=et(rt),_(rt)}function g(rt,lt){return new RegExp("(?:^|;)\\s*"+rt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',lt)}function b(rt,lt){if(rt){if(!/^[\x00-\xFF]+$/.test(lt))return lt;try{const tt=new TextDecoder(rt,{fatal:!0}),nt=(0,s.stringToBytes)(lt);lt=tt.decode(nt),d=!1}catch{}}return lt}function _(rt){return d&&/[\x80-\xff]/.test(rt)&&(rt=b("utf-8",rt),d&&(rt=b("iso-8859-1",rt))),rt}function j(rt){const lt=[];let tt;const nt=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(tt=nt.exec(rt))!==null;){let[,ft,st,at]=tt;if(ft=parseInt(ft,10),ft in lt){if(ft===0)break;continue}lt[ft]=[st,at]}const it=[];for(let ft=0;ft<lt.length&&ft in lt;++ft){let[st,at]=lt[ft];at=$(at),st&&(at=unescape(at),ft===0&&(at=_e(at))),it.push(at)}return it.join("")}function $(rt){if(rt.startsWith('"')){const lt=rt.slice(1).split('\\"');for(let tt=0;tt<lt.length;++tt){const nt=lt[tt].indexOf('"');nt!==-1&&(lt[tt]=lt[tt].slice(0,nt),lt.length=tt+1),lt[tt]=lt[tt].replaceAll(/\\(.)/g,"$1")}rt=lt.join('"')}return rt}function _e(rt){const lt=rt.indexOf("'");if(lt===-1)return rt;const tt=rt.slice(0,lt),it=rt.slice(lt+1).replace(/^[^']*'/,"");return b(tt,it)}function et(rt){return!rt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(rt)?rt:rt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(lt,tt,nt,it){if(nt==="q"||nt==="Q")return it=it.replaceAll("_"," "),it=it.replaceAll(/=([0-9a-fA-F]{2})/g,function(ft,st){return String.fromCharCode(parseInt(st,16))}),b(tt,it);try{it=atob(it)}catch{}return b(tt,it)})}return""}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var s=o(1),a=o(20);const c=200,d=206;function h($){const _e=$.response;return typeof _e!="string"?_e:(0,s.stringToBytes)(_e).buffer}class g{constructor(_e,et={}){this.url=_e,this.isHttp=/^https?:/i.test(_e),this.httpHeaders=this.isHttp&&et.httpHeaders||Object.create(null),this.withCredentials=et.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_e,et,rt){const lt={begin:_e,end:et};for(const tt in rt)lt[tt]=rt[tt];return this.request(lt)}requestFull(_e){return this.request(_e)}request(_e){const et=new XMLHttpRequest,rt=this.currXhrId++,lt=this.pendingRequests[rt]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const tt in this.httpHeaders){const nt=this.httpHeaders[tt];nt!==void 0&&et.setRequestHeader(tt,nt)}return this.isHttp&&"begin"in _e&&"end"in _e?(et.setRequestHeader("Range",`bytes=${_e.begin}-${_e.end-1}`),lt.expectedStatus=d):lt.expectedStatus=c,et.responseType="arraybuffer",_e.onError&&(et.onerror=function(tt){_e.onError(et.status)}),et.onreadystatechange=this.onStateChange.bind(this,rt),et.onprogress=this.onProgress.bind(this,rt),lt.onHeadersReceived=_e.onHeadersReceived,lt.onDone=_e.onDone,lt.onError=_e.onError,lt.onProgress=_e.onProgress,et.send(null),rt}onProgress(_e,et){var lt;const rt=this.pendingRequests[_e];rt&&((lt=rt.onProgress)==null||lt.call(rt,et))}onStateChange(_e,et){var ft,st,at;const rt=this.pendingRequests[_e];if(!rt)return;const lt=rt.xhr;if(lt.readyState>=2&&rt.onHeadersReceived&&(rt.onHeadersReceived(),delete rt.onHeadersReceived),lt.readyState!==4||!(_e in this.pendingRequests))return;if(delete this.pendingRequests[_e],lt.status===0&&this.isHttp){(ft=rt.onError)==null||ft.call(rt,lt.status);return}const tt=lt.status||c;if(!(tt===c&&rt.expectedStatus===d)&&tt!==rt.expectedStatus){(st=rt.onError)==null||st.call(rt,lt.status);return}const it=h(lt);if(tt===d){const Ct=lt.getResponseHeader("Content-Range"),yt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ct);rt.onDone({begin:parseInt(yt[1],10),chunk:it})}else it?rt.onDone({begin:0,chunk:it}):(at=rt.onError)==null||at.call(rt,lt.status)}getRequestXhr(_e){return this.pendingRequests[_e].xhr}isPendingRequest(_e){return _e in this.pendingRequests}abortRequest(_e){const et=this.pendingRequests[_e].xhr;delete this.pendingRequests[_e],et.abort()}}class b{constructor(_e){this._source=_e,this._manager=new g(_e.url,{httpHeaders:_e.httpHeaders,withCredentials:_e.withCredentials}),this._rangeChunkSize=_e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_e){const et=this._rangeRequestReaders.indexOf(_e);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(_e,et){const rt=new j(this._manager,_e,et);return rt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(rt),rt}cancelAllRequests(_e){var et;(et=this._fullRequestReader)==null||et.cancel(_e);for(const rt of this._rangeRequestReaders.slice(0))rt.cancel(_e)}}e.PDFNetworkStream=b;class _{constructor(_e,et){this._manager=_e;const rt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._fullRequestId=_e.requestFull(rt),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _e=this._fullRequestId,et=this._manager.getRequestXhr(_e),rt=nt=>et.getResponseHeader(nt),{allowRangeRequests:lt,suggestedLength:tt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:rt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});lt&&(this._isRangeSupported=!0),this._contentLength=tt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(rt),this._isRangeSupported&&this._manager.abortRequest(_e),this._headersReceivedCapability.resolve()}_onDone(_e){if(_e&&(this._requests.length>0?this._requests.shift().resolve({value:_e.chunk,done:!1}):this._cachedChunks.push(_e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_e){this._storedError=(0,a.createResponseStatusError)(_e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_e){var et;(et=this.onProgress)==null||et.call(this,{loaded:_e.loaded,total:_e.lengthComputable?_e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _e=new s.PromiseCapability;return this._requests.push(_e),_e.promise}cancel(_e){this._done=!0,this._headersReceivedCapability.reject(_e);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class j{constructor(_e,et,rt){this._manager=_e;const lt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_e.url,this._requestId=_e.requestRange(et,rt,lt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _e;(_e=this.onClosed)==null||_e.call(this,this)}_onDone(_e){const et=_e.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_e){this._storedError=(0,a.createResponseStatusError)(_e,this._url);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_e){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:_e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const _e=new s.PromiseCapability;return this._requests.push(_e),_e.promise}cancel(_e){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var s=o(1),a=o(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(rt){const lt=require$$5,tt=lt.parse(rt);return tt.protocol==="file:"||tt.host?tt:/^[a-z]:[/\\]/i.test(rt)?lt.parse(`file:///${rt}`):(tt.host||(tt.protocol="file:"),tt)}class h{constructor(lt){this.source=lt,this.url=d(lt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&lt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var lt;return((lt=this._fullRequestReader)==null?void 0:lt._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _e(this):new j(this),this._fullRequestReader}getRangeReader(lt,tt){if(tt<=this._progressiveDataLength)return null;const nt=this.isFsUrl?new et(this,lt,tt):new $(this,lt,tt);return this._rangeRequestReaders.push(nt),nt}cancelAllRequests(lt){var tt;(tt=this._fullRequestReader)==null||tt.cancel(lt);for(const nt of this._rangeRequestReaders.slice(0))nt.cancel(lt)}}e.PDFNodeStream=h;class g{constructor(lt){this._url=lt.url,this._done=!1,this._storedError=null,this.onProgress=null;const tt=lt.source;this._contentLength=tt.length,this._loaded=0,this._filename=null,this._disableRange=tt.disableRange||!1,this._rangeChunkSize=tt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!tt.disableStream,this._isRangeSupported=!tt.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const lt=this._readableStream.read();return lt===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=lt.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(lt).buffer,done:!1})}cancel(lt){if(!this._readableStream){this._error(lt);return}this._readableStream.destroy(lt)}_error(lt){this._storedError=lt,this._readCapability.resolve()}_setReadableStream(lt){this._readableStream=lt,lt.on("readable",()=>{this._readCapability.resolve()}),lt.on("end",()=>{lt.destroy(),this._done=!0,this._readCapability.resolve()}),lt.on("error",tt=>{this._error(tt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(lt){this._url=lt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const tt=lt.source;this._isStreamingSupported=!tt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const lt=this._readableStream.read();return lt===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=lt.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded}),{value:new Uint8Array(lt).buffer,done:!1})}cancel(lt){if(!this._readableStream){this._error(lt);return}this._readableStream.destroy(lt)}_error(lt){this._storedError=lt,this._readCapability.resolve()}_setReadableStream(lt){this._readableStream=lt,lt.on("readable",()=>{this._readCapability.resolve()}),lt.on("end",()=>{lt.destroy(),this._done=!0,this._readCapability.resolve()}),lt.on("error",tt=>{this._error(tt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _(rt,lt){return{protocol:rt.protocol,auth:rt.auth,host:rt.hostname,port:rt.port,path:rt.path,method:"GET",headers:lt}}class j extends g{constructor(lt){super(lt);const tt=nt=>{if(nt.statusCode===404){const at=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=at,this._headersCapability.reject(at);return}this._headersCapability.resolve(),this._setReadableStream(nt);const it=at=>this._readableStream.headers[at.toLowerCase()],{allowRangeRequests:ft,suggestedLength:st}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:it,isHttp:lt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=st||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(it)};if(this._request=null,this._url.protocol==="http:"){const nt=require$$5;this._request=nt.request(_(this._url,lt.httpHeaders),tt)}else{const nt=require$$5;this._request=nt.request(_(this._url,lt.httpHeaders),tt)}this._request.on("error",nt=>{this._storedError=nt,this._headersCapability.reject(nt)}),this._request.end()}}class $ extends b{constructor(lt,tt,nt){super(lt),this._httpHeaders={};for(const ft in lt.httpHeaders){const st=lt.httpHeaders[ft];st!==void 0&&(this._httpHeaders[ft]=st)}this._httpHeaders.Range=`bytes=${tt}-${nt-1}`;const it=ft=>{if(ft.statusCode===404){const st=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=st;return}this._setReadableStream(ft)};if(this._request=null,this._url.protocol==="http:"){const ft=require$$5;this._request=ft.request(_(this._url,this._httpHeaders),it)}else{const ft=require$$5;this._request=ft.request(_(this._url,this._httpHeaders),it)}this._request.on("error",ft=>{this._storedError=ft}),this._request.end()}}class _e extends g{constructor(lt){super(lt);let tt=decodeURIComponent(this._url.path);c.test(this._url.href)&&(tt=tt.replace(/^\//,""));const nt=require$$5;nt.lstat(tt,(it,ft)=>{if(it){it.code==="ENOENT"&&(it=new s.MissingPDFException(`Missing PDF "${tt}".`)),this._storedError=it,this._headersCapability.reject(it);return}this._contentLength=ft.size,this._setReadableStream(nt.createReadStream(tt)),this._headersCapability.resolve()})}}class et extends b{constructor(lt,tt,nt){super(lt);let it=decodeURIComponent(this._url.path);c.test(this._url.href)&&(it=it.replace(/^\//,""));const ft=require$$5;this._setReadableStream(ft.createReadStream(it,{start:tt,end:nt-1}))}}},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var s=o(6),a=o(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",g=["butt","round","square"],b=["miter","round","bevel"],_=function(ft,st="",at=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!at)return URL.createObjectURL(new Blob([ft],{type:st}));const Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let yt=`data:${st};base64,`;for(let pt=0,gt=ft.length;pt<gt;pt+=3){const Et=ft[pt]&255,bt=ft[pt+1]&255,Pt=ft[pt+2]&255,xt=Et>>2,Lt=(Et&3)<<4|bt>>4,Bt=pt+1<gt?(bt&15)<<2|Pt>>6:64,Kt=pt+2<gt?Pt&63:64;yt+=Ct[xt]+Ct[Lt]+Ct[Bt]+Ct[Kt]}return yt},j=function(){const ft=new Uint8Array([137,80,78,71,13,10,26,10]),st=12,at=new Int32Array(256);for(let Pt=0;Pt<256;Pt++){let xt=Pt;for(let Lt=0;Lt<8;Lt++)xt=xt&1?3988292384^xt>>1&2147483647:xt>>1&2147483647;at[Pt]=xt}function Ct(Pt,xt,Lt){let Bt=-1;for(let Kt=xt;Kt<Lt;Kt++){const kt=(Bt^Pt[Kt])&255,Ut=at[kt];Bt=Bt>>>8^Ut}return Bt^-1}function yt(Pt,xt,Lt,Bt){let Kt=Bt;const kt=xt.length;Lt[Kt]=kt>>24&255,Lt[Kt+1]=kt>>16&255,Lt[Kt+2]=kt>>8&255,Lt[Kt+3]=kt&255,Kt+=4,Lt[Kt]=Pt.charCodeAt(0)&255,Lt[Kt+1]=Pt.charCodeAt(1)&255,Lt[Kt+2]=Pt.charCodeAt(2)&255,Lt[Kt+3]=Pt.charCodeAt(3)&255,Kt+=4,Lt.set(xt,Kt),Kt+=xt.length;const Ut=Ct(Lt,Bt+4,Kt);Lt[Kt]=Ut>>24&255,Lt[Kt+1]=Ut>>16&255,Lt[Kt+2]=Ut>>8&255,Lt[Kt+3]=Ut&255}function pt(Pt,xt,Lt){let Bt=1,Kt=0;for(let kt=xt;kt<Lt;++kt)Bt=(Bt+(Pt[kt]&255))%65521,Kt=(Kt+Bt)%65521;return Kt<<16|Bt}function gt(Pt){if(!a.isNodeJS)return Et(Pt);try{const xt=parseInt(process.versions.node)>=8?Pt:Buffer.from(Pt),Lt=require$$5.deflateSync(xt,{level:9});return Lt instanceof Uint8Array?Lt:new Uint8Array(Lt)}catch(xt){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+xt)}return Et(Pt)}function Et(Pt){let xt=Pt.length;const Lt=65535,Bt=Math.ceil(xt/Lt),Kt=new Uint8Array(2+xt+Bt*5+4);let kt=0;Kt[kt++]=120,Kt[kt++]=156;let Ut=0;for(;xt>Lt;)Kt[kt++]=0,Kt[kt++]=255,Kt[kt++]=255,Kt[kt++]=0,Kt[kt++]=0,Kt.set(Pt.subarray(Ut,Ut+Lt),kt),kt+=Lt,Ut+=Lt,xt-=Lt;Kt[kt++]=1,Kt[kt++]=xt&255,Kt[kt++]=xt>>8&255,Kt[kt++]=~xt&65535&255,Kt[kt++]=(~xt&65535)>>8&255,Kt.set(Pt.subarray(Ut),kt),kt+=Pt.length-Ut;const St=pt(Pt,0,Pt.length);return Kt[kt++]=St>>24&255,Kt[kt++]=St>>16&255,Kt[kt++]=St>>8&255,Kt[kt++]=St&255,Kt}function bt(Pt,xt,Lt,Bt){const Kt=Pt.width,kt=Pt.height;let Ut,St,rn;const an=Pt.data;switch(xt){case a.ImageKind.GRAYSCALE_1BPP:St=0,Ut=1,rn=Kt+7>>3;break;case a.ImageKind.RGB_24BPP:St=2,Ut=8,rn=Kt*3;break;case a.ImageKind.RGBA_32BPP:St=6,Ut=8,rn=Kt*4;break;default:throw new Error("invalid format")}const ht=new Uint8Array((1+rn)*kt);let ct=0,mt=0;for(let Mt=0;Mt<kt;++Mt)ht[ct++]=0,ht.set(an.subarray(mt,mt+rn),ct),mt+=rn,ct+=rn;if(xt===a.ImageKind.GRAYSCALE_1BPP&&Bt){ct=0;for(let Mt=0;Mt<kt;Mt++){ct++;for(let Wt=0;Wt<rn;Wt++)ht[ct++]^=255}}const ut=new Uint8Array([Kt>>24&255,Kt>>16&255,Kt>>8&255,Kt&255,kt>>24&255,kt>>16&255,kt>>8&255,kt&255,Ut,St,0,0,0]),vt=gt(ht),At=ft.length+st*3+ut.length+vt.length,Tt=new Uint8Array(At);let _t=0;return Tt.set(ft,_t),_t+=ft.length,yt("IHDR",ut,Tt,_t),_t+=st+ut.length,yt("IDATA",vt,Tt,_t),_t+=st+vt.length,yt("IEND",new Uint8Array(0),Tt,_t),_(Tt,"image/png",Lt)}return function(xt,Lt,Bt){const Kt=xt.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:xt.kind;return bt(xt,Kt,Lt,Bt)}}();class ${constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(st,at){this.x=st,this.y=at}}function _e(ft){let st=[];const at=[];for(const Ct of ft){if(Ct.fn==="save"){st.push({fnId:92,fn:"group",items:[]}),at.push(st),st=st.at(-1).items;continue}Ct.fn==="restore"?st=at.pop():st.push(Ct)}return st}function et(ft){if(Number.isInteger(ft))return ft.toString();const st=ft.toFixed(10);let at=st.length-1;if(st[at]!=="0")return st;do at--;while(st[at]==="0");return st.substring(0,st[at]==="."?at:at+1)}function rt(ft){if(ft[4]===0&&ft[5]===0){if(ft[1]===0&&ft[2]===0)return ft[0]===1&&ft[3]===1?"":`scale(${et(ft[0])} ${et(ft[3])})`;if(ft[0]===ft[3]&&ft[1]===-ft[2]){const st=Math.acos(ft[0])*180/Math.PI;return`rotate(${et(st)})`}}else if(ft[0]===1&&ft[1]===0&&ft[2]===0&&ft[3]===1)return`translate(${et(ft[4])} ${et(ft[5])})`;return`matrix(${et(ft[0])} ${et(ft[1])} ${et(ft[2])} ${et(ft[3])} ${et(ft[4])} ${et(ft[5])})`}let lt=0,tt=0,nt=0;class it{constructor(st,at,Ct=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new $,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=st,this.objs=at,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Ct,this._operatorIdMapping=[];for(const yt in a.OPS)this._operatorIdMapping[a.OPS[yt]]=yt}getObject(st,at=null){return typeof st=="string"?st.startsWith("g_")?this.commonObjs.get(st):this.objs.get(st):at}save(){this.transformStack.push(this.transformMatrix);const st=this.current;this.extraStack.push(st),this.current=st.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(st){this.save(),this.executeOpTree(st),this.restore()}loadDependencies(st){const at=st.fnArray,Ct=st.argsArray;for(let yt=0,pt=at.length;yt<pt;yt++)if(at[yt]===a.OPS.dependency)for(const gt of Ct[yt]){const Et=gt.startsWith("g_")?this.commonObjs:this.objs,bt=new Promise(Pt=>{Et.get(gt,Pt)});this.current.dependencies.push(bt)}return Promise.all(this.current.dependencies)}transform(st,at,Ct,yt,pt,gt){const Et=[st,at,Ct,yt,pt,gt];this.transformMatrix=a.Util.transform(this.transformMatrix,Et),this.tgrp=null}getSVG(st,at){this.viewport=at;const Ct=this._initialize(at);return this.loadDependencies(st).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(st)),Ct))}convertOpList(st){const at=this._operatorIdMapping,Ct=st.argsArray,yt=st.fnArray,pt=[];for(let gt=0,Et=yt.length;gt<Et;gt++){const bt=yt[gt];pt.push({fnId:bt,fn:at[bt],args:Ct[gt]})}return _e(pt)}executeOpTree(st){for(const at of st){const Ct=at.fn,yt=at.fnId,pt=at.args;switch(yt|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(pt);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(pt[0],pt[1]);break;case a.OPS.setFont:this.setFont(pt);break;case a.OPS.showText:this.showText(pt[0]);break;case a.OPS.showSpacedText:this.showText(pt[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(pt[0],pt[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(pt[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(pt[0]);break;case a.OPS.setHScale:this.setHScale(pt[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]);break;case a.OPS.setTextRise:this.setTextRise(pt[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(pt[0]);break;case a.OPS.setLineWidth:this.setLineWidth(pt[0]);break;case a.OPS.setLineJoin:this.setLineJoin(pt[0]);break;case a.OPS.setLineCap:this.setLineCap(pt[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(pt[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(pt[0],pt[1],pt[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(pt[0],pt[1],pt[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(pt);break;case a.OPS.setFillColorN:this.setFillColorN(pt);break;case a.OPS.shadingFill:this.shadingFill(pt[0]);break;case a.OPS.setDash:this.setDash(pt[0],pt[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(pt[0]);break;case a.OPS.setFlatness:this.setFlatness(pt[0]);break;case a.OPS.setGState:this.setGState(pt[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(pt[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(pt[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(pt[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(pt[0],pt[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]);break;case a.OPS.constructPath:this.constructPath(pt[0],pt[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(at.items);break;default:(0,a.warn)(`Unimplemented operator ${Ct}`);break}}}setWordSpacing(st){this.current.wordSpacing=st}setCharSpacing(st){this.current.charSpacing=st}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(st,at,Ct,yt,pt,gt){const Et=this.current;Et.textMatrix=Et.lineMatrix=[st,at,Ct,yt,pt,gt],Et.textMatrixScale=Math.hypot(st,at),Et.x=Et.lineX=0,Et.y=Et.lineY=0,Et.xcoords=[],Et.ycoords=[],Et.tspan=this.svgFactory.createElement("svg:tspan"),Et.tspan.setAttributeNS(null,"font-family",Et.fontFamily),Et.tspan.setAttributeNS(null,"font-size",`${et(Et.fontSize)}px`),Et.tspan.setAttributeNS(null,"y",et(-Et.y)),Et.txtElement=this.svgFactory.createElement("svg:text"),Et.txtElement.append(Et.tspan)}beginText(){const st=this.current;st.x=st.lineX=0,st.y=st.lineY=0,st.textMatrix=a.IDENTITY_MATRIX,st.lineMatrix=a.IDENTITY_MATRIX,st.textMatrixScale=1,st.tspan=this.svgFactory.createElement("svg:tspan"),st.txtElement=this.svgFactory.createElement("svg:text"),st.txtgrp=this.svgFactory.createElement("svg:g"),st.xcoords=[],st.ycoords=[]}moveText(st,at){const Ct=this.current;Ct.x=Ct.lineX+=st,Ct.y=Ct.lineY+=at,Ct.xcoords=[],Ct.ycoords=[],Ct.tspan=this.svgFactory.createElement("svg:tspan"),Ct.tspan.setAttributeNS(null,"font-family",Ct.fontFamily),Ct.tspan.setAttributeNS(null,"font-size",`${et(Ct.fontSize)}px`),Ct.tspan.setAttributeNS(null,"y",et(-Ct.y))}showText(st){const at=this.current,Ct=at.font,yt=at.fontSize;if(yt===0)return;const pt=at.fontSizeScale,gt=at.charSpacing,Et=at.wordSpacing,bt=at.fontDirection,Pt=at.textHScale*bt,xt=Ct.vertical,Lt=xt?1:-1,Bt=Ct.defaultVMetrics,Kt=yt*at.fontMatrix[0];let kt=0;for(const rn of st){if(rn===null){kt+=bt*Et;continue}else if(typeof rn=="number"){kt+=Lt*rn*yt/1e3;continue}const an=(rn.isSpace?Et:0)+gt,ht=rn.fontChar;let ct,mt,ut=rn.width;if(xt){let At;const Tt=rn.vmetric||Bt;At=rn.vmetric?Tt[1]:ut*.5,At=-At*Kt;const _t=Tt[2]*Kt;ut=Tt?-Tt[0]:ut,ct=At/pt,mt=(kt+_t)/pt}else ct=kt/pt,mt=0;(rn.isInFont||Ct.missingFile)&&(at.xcoords.push(at.x+ct),xt&&at.ycoords.push(-at.y+mt),at.tspan.textContent+=ht);const vt=xt?ut*Kt-an*bt:ut*Kt+an*bt;kt+=vt}at.tspan.setAttributeNS(null,"x",at.xcoords.map(et).join(" ")),xt?at.tspan.setAttributeNS(null,"y",at.ycoords.map(et).join(" ")):at.tspan.setAttributeNS(null,"y",et(-at.y)),xt?at.y-=kt:at.x+=kt*Pt,at.tspan.setAttributeNS(null,"font-family",at.fontFamily),at.tspan.setAttributeNS(null,"font-size",`${et(at.fontSize)}px`),at.fontStyle!==c.fontStyle&&at.tspan.setAttributeNS(null,"font-style",at.fontStyle),at.fontWeight!==c.fontWeight&&at.tspan.setAttributeNS(null,"font-weight",at.fontWeight);const Ut=at.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(Ut===a.TextRenderingMode.FILL||Ut===a.TextRenderingMode.FILL_STROKE?(at.fillColor!==c.fillColor&&at.tspan.setAttributeNS(null,"fill",at.fillColor),at.fillAlpha<1&&at.tspan.setAttributeNS(null,"fill-opacity",at.fillAlpha)):at.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?at.tspan.setAttributeNS(null,"fill","transparent"):at.tspan.setAttributeNS(null,"fill","none"),Ut===a.TextRenderingMode.STROKE||Ut===a.TextRenderingMode.FILL_STROKE){const rn=1/(at.textMatrixScale||1);this._setStrokeAttributes(at.tspan,rn)}let St=at.textMatrix;at.textRise!==0&&(St=St.slice(),St[5]+=at.textRise),at.txtElement.setAttributeNS(null,"transform",`${rt(St)} scale(${et(Pt)}, -1)`),at.txtElement.setAttributeNS(d,"xml:space","preserve"),at.txtElement.append(at.tspan),at.txtgrp.append(at.txtElement),this._ensureTransformGroup().append(at.txtElement)}setLeadingMoveText(st,at){this.setLeading(-at),this.moveText(st,at)}addFontStyle(st){if(!st.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const at=_(st.data,st.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${st.loadedName}"; src: url(${at}); }
`}setFont(st){const at=this.current,Ct=this.commonObjs.get(st[0]);let yt=st[1];at.font=Ct,this.embedFonts&&!Ct.missingFile&&!this.embeddedFonts[Ct.loadedName]&&(this.addFontStyle(Ct),this.embeddedFonts[Ct.loadedName]=Ct),at.fontMatrix=Ct.fontMatrix||a.FONT_IDENTITY_MATRIX;let pt="normal";Ct.black?pt="900":Ct.bold&&(pt="bold");const gt=Ct.italic?"italic":"normal";yt<0?(yt=-yt,at.fontDirection=-1):at.fontDirection=1,at.fontSize=yt,at.fontFamily=Ct.loadedName,at.fontWeight=pt,at.fontStyle=gt,at.tspan=this.svgFactory.createElement("svg:tspan"),at.tspan.setAttributeNS(null,"y",et(-at.y)),at.xcoords=[],at.ycoords=[]}endText(){var at;const st=this.current;st.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((at=st.txtElement)!=null&&at.hasChildNodes())&&(st.element=st.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(st){st>0&&(this.current.lineWidth=st)}setLineCap(st){this.current.lineCap=g[st]}setLineJoin(st){this.current.lineJoin=b[st]}setMiterLimit(st){this.current.miterLimit=st}setStrokeAlpha(st){this.current.strokeAlpha=st}setStrokeRGBColor(st,at,Ct){this.current.strokeColor=a.Util.makeHexColor(st,at,Ct)}setFillAlpha(st){this.current.fillAlpha=st}setFillRGBColor(st,at,Ct){this.current.fillColor=a.Util.makeHexColor(st,at,Ct),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(st){this.current.strokeColor=this._makeColorN_Pattern(st)}setFillColorN(st){this.current.fillColor=this._makeColorN_Pattern(st)}shadingFill(st){const{width:at,height:Ct}=this.viewport,yt=a.Util.inverseTransform(this.transformMatrix),[pt,gt,Et,bt]=a.Util.getAxialAlignedBoundingBox([0,0,at,Ct],yt),Pt=this.svgFactory.createElement("svg:rect");Pt.setAttributeNS(null,"x",pt),Pt.setAttributeNS(null,"y",gt),Pt.setAttributeNS(null,"width",Et-pt),Pt.setAttributeNS(null,"height",bt-gt),Pt.setAttributeNS(null,"fill",this._makeShadingPattern(st)),this.current.fillAlpha<1&&Pt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Pt)}_makeColorN_Pattern(st){return st[0]==="TilingPattern"?this._makeTilingPattern(st):this._makeShadingPattern(st)}_makeTilingPattern(st){const at=st[1],Ct=st[2],yt=st[3]||a.IDENTITY_MATRIX,[pt,gt,Et,bt]=st[4],Pt=st[5],xt=st[6],Lt=st[7],Bt=`shading${nt++}`,[Kt,kt,Ut,St]=a.Util.normalizeRect([...a.Util.applyTransform([pt,gt],yt),...a.Util.applyTransform([Et,bt],yt)]),[rn,an]=a.Util.singularValueDecompose2dScale(yt),ht=Pt*rn,ct=xt*an,mt=this.svgFactory.createElement("svg:pattern");mt.setAttributeNS(null,"id",Bt),mt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),mt.setAttributeNS(null,"width",ht),mt.setAttributeNS(null,"height",ct),mt.setAttributeNS(null,"x",`${Kt}`),mt.setAttributeNS(null,"y",`${kt}`);const ut=this.svg,vt=this.transformMatrix,At=this.current.fillColor,Tt=this.current.strokeColor,_t=this.svgFactory.create(Ut-Kt,St-kt);if(this.svg=_t,this.transformMatrix=yt,Lt===2){const Mt=a.Util.makeHexColor(...at);this.current.fillColor=Mt,this.current.strokeColor=Mt}return this.executeOpTree(this.convertOpList(Ct)),this.svg=ut,this.transformMatrix=vt,this.current.fillColor=At,this.current.strokeColor=Tt,mt.append(_t.childNodes[0]),this.defs.append(mt),`url(#${Bt})`}_makeShadingPattern(st){switch(typeof st=="string"&&(st=this.objs.get(st)),st[0]){case"RadialAxial":const at=`shading${nt++}`,Ct=st[3];let yt;switch(st[1]){case"axial":const pt=st[4],gt=st[5];yt=this.svgFactory.createElement("svg:linearGradient"),yt.setAttributeNS(null,"id",at),yt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),yt.setAttributeNS(null,"x1",pt[0]),yt.setAttributeNS(null,"y1",pt[1]),yt.setAttributeNS(null,"x2",gt[0]),yt.setAttributeNS(null,"y2",gt[1]);break;case"radial":const Et=st[4],bt=st[5],Pt=st[6],xt=st[7];yt=this.svgFactory.createElement("svg:radialGradient"),yt.setAttributeNS(null,"id",at),yt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),yt.setAttributeNS(null,"cx",bt[0]),yt.setAttributeNS(null,"cy",bt[1]),yt.setAttributeNS(null,"r",xt),yt.setAttributeNS(null,"fx",Et[0]),yt.setAttributeNS(null,"fy",Et[1]),yt.setAttributeNS(null,"fr",Pt);break;default:throw new Error(`Unknown RadialAxial type: ${st[1]}`)}for(const pt of Ct){const gt=this.svgFactory.createElement("svg:stop");gt.setAttributeNS(null,"offset",pt[0]),gt.setAttributeNS(null,"stop-color",pt[1]),yt.append(gt)}return this.defs.append(yt),`url(#${at})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${st[0]}`)}}setDash(st,at){this.current.dashArray=st,this.current.dashPhase=at}constructPath(st,at){const Ct=this.current;let yt=Ct.x,pt=Ct.y,gt=[],Et=0;for(const bt of st)switch(bt|0){case a.OPS.rectangle:yt=at[Et++],pt=at[Et++];const Pt=at[Et++],xt=at[Et++],Lt=yt+Pt,Bt=pt+xt;gt.push("M",et(yt),et(pt),"L",et(Lt),et(pt),"L",et(Lt),et(Bt),"L",et(yt),et(Bt),"Z");break;case a.OPS.moveTo:yt=at[Et++],pt=at[Et++],gt.push("M",et(yt),et(pt));break;case a.OPS.lineTo:yt=at[Et++],pt=at[Et++],gt.push("L",et(yt),et(pt));break;case a.OPS.curveTo:yt=at[Et+4],pt=at[Et+5],gt.push("C",et(at[Et]),et(at[Et+1]),et(at[Et+2]),et(at[Et+3]),et(yt),et(pt)),Et+=6;break;case a.OPS.curveTo2:gt.push("C",et(yt),et(pt),et(at[Et]),et(at[Et+1]),et(at[Et+2]),et(at[Et+3])),yt=at[Et+2],pt=at[Et+3],Et+=4;break;case a.OPS.curveTo3:yt=at[Et+2],pt=at[Et+3],gt.push("C",et(at[Et]),et(at[Et+1]),et(yt),et(pt),et(yt),et(pt)),Et+=4;break;case a.OPS.closePath:gt.push("Z");break}gt=gt.join(" "),Ct.path&&st.length>0&&st[0]!==a.OPS.rectangle&&st[0]!==a.OPS.moveTo?gt=Ct.path.getAttributeNS(null,"d")+gt:(Ct.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Ct.path)),Ct.path.setAttributeNS(null,"d",gt),Ct.path.setAttributeNS(null,"fill","none"),Ct.element=Ct.path,Ct.setCurrentPoint(yt,pt)}endPath(){const st=this.current;if(st.path=null,!this.pendingClip)return;if(!st.element){this.pendingClip=null;return}const at=`clippath${lt++}`,Ct=this.svgFactory.createElement("svg:clipPath");Ct.setAttributeNS(null,"id",at),Ct.setAttributeNS(null,"transform",rt(this.transformMatrix));const yt=st.element.cloneNode(!0);if(this.pendingClip==="evenodd"?yt.setAttributeNS(null,"clip-rule","evenodd"):yt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Ct.append(yt),this.defs.append(Ct),st.activeClipUrl){st.clipGroup=null;for(const pt of this.extraStack)pt.clipGroup=null;Ct.setAttributeNS(null,"clip-path",st.activeClipUrl)}st.activeClipUrl=`url(#${at})`,this.tgrp=null}clip(st){this.pendingClip=st}closePath(){const st=this.current;if(st.path){const at=`${st.path.getAttributeNS(null,"d")}Z`;st.path.setAttributeNS(null,"d",at)}}setLeading(st){this.current.leading=-st}setTextRise(st){this.current.textRise=st}setTextRenderingMode(st){this.current.textRenderingMode=st}setHScale(st){this.current.textHScale=st/100}setRenderingIntent(st){}setFlatness(st){}setGState(st){for(const[at,Ct]of st)switch(at){case"LW":this.setLineWidth(Ct);break;case"LC":this.setLineCap(Ct);break;case"LJ":this.setLineJoin(Ct);break;case"ML":this.setMiterLimit(Ct);break;case"D":this.setDash(Ct[0],Ct[1]);break;case"RI":this.setRenderingIntent(Ct);break;case"FL":this.setFlatness(Ct);break;case"Font":this.setFont(Ct);break;case"CA":this.setStrokeAlpha(Ct);break;case"ca":this.setFillAlpha(Ct);break;default:(0,a.warn)(`Unimplemented graphic state operator ${at}`);break}}fill(){const st=this.current;st.element&&(st.element.setAttributeNS(null,"fill",st.fillColor),st.element.setAttributeNS(null,"fill-opacity",st.fillAlpha),this.endPath())}stroke(){const st=this.current;st.element&&(this._setStrokeAttributes(st.element),st.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(st,at=1){const Ct=this.current;let yt=Ct.dashArray;at!==1&&yt.length>0&&(yt=yt.map(function(pt){return at*pt})),st.setAttributeNS(null,"stroke",Ct.strokeColor),st.setAttributeNS(null,"stroke-opacity",Ct.strokeAlpha),st.setAttributeNS(null,"stroke-miterlimit",et(Ct.miterLimit)),st.setAttributeNS(null,"stroke-linecap",Ct.lineCap),st.setAttributeNS(null,"stroke-linejoin",Ct.lineJoin),st.setAttributeNS(null,"stroke-width",et(at*Ct.lineWidth)+"px"),st.setAttributeNS(null,"stroke-dasharray",yt.map(et).join(" ")),st.setAttributeNS(null,"stroke-dashoffset",et(at*Ct.dashPhase)+"px")}eoFill(){var st;(st=this.current.element)==null||st.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var st;(st=this.current.element)==null||st.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x","0"),st.setAttributeNS(null,"y","0"),st.setAttributeNS(null,"width","1px"),st.setAttributeNS(null,"height","1px"),st.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(st)}paintImageXObject(st){const at=this.getObject(st);if(!at){(0,a.warn)(`Dependent image with object ID ${st} is not ready yet`);return}this.paintInlineImageXObject(at)}paintInlineImageXObject(st,at){const Ct=st.width,yt=st.height,pt=j(st,this.forceDataSchema,!!at),gt=this.svgFactory.createElement("svg:rect");gt.setAttributeNS(null,"x","0"),gt.setAttributeNS(null,"y","0"),gt.setAttributeNS(null,"width",et(Ct)),gt.setAttributeNS(null,"height",et(yt)),this.current.element=gt,this.clip("nonzero");const Et=this.svgFactory.createElement("svg:image");Et.setAttributeNS(h,"xlink:href",pt),Et.setAttributeNS(null,"x","0"),Et.setAttributeNS(null,"y",et(-yt)),Et.setAttributeNS(null,"width",et(Ct)+"px"),Et.setAttributeNS(null,"height",et(yt)+"px"),Et.setAttributeNS(null,"transform",`scale(${et(1/Ct)} ${et(-1/yt)})`),at?at.append(Et):this._ensureTransformGroup().append(Et)}paintImageMaskXObject(st){const at=this.getObject(st.data,st);if(at.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Ct=this.current,yt=at.width,pt=at.height,gt=Ct.fillColor;Ct.maskId=`mask${tt++}`;const Et=this.svgFactory.createElement("svg:mask");Et.setAttributeNS(null,"id",Ct.maskId);const bt=this.svgFactory.createElement("svg:rect");bt.setAttributeNS(null,"x","0"),bt.setAttributeNS(null,"y","0"),bt.setAttributeNS(null,"width",et(yt)),bt.setAttributeNS(null,"height",et(pt)),bt.setAttributeNS(null,"fill",gt),bt.setAttributeNS(null,"mask",`url(#${Ct.maskId})`),this.defs.append(Et),this._ensureTransformGroup().append(bt),this.paintInlineImageXObject(at,Et)}paintFormXObjectBegin(st,at){if(Array.isArray(st)&&st.length===6&&this.transform(st[0],st[1],st[2],st[3],st[4],st[5]),at){const Ct=at[2]-at[0],yt=at[3]-at[1],pt=this.svgFactory.createElement("svg:rect");pt.setAttributeNS(null,"x",at[0]),pt.setAttributeNS(null,"y",at[1]),pt.setAttributeNS(null,"width",et(Ct)),pt.setAttributeNS(null,"height",et(yt)),this.current.element=pt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(st){const at=this.svgFactory.create(st.width,st.height),Ct=this.svgFactory.createElement("svg:defs");at.append(Ct),this.defs=Ct;const yt=this.svgFactory.createElement("svg:g");return yt.setAttributeNS(null,"transform",rt(st.transform)),at.append(yt),this.svg=yt,at}_ensureClipGroup(){if(!this.current.clipGroup){const st=this.svgFactory.createElement("svg:g");st.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(st),this.current.clipGroup=st}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",rt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=it},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class o{static textContent(a){const c=[],d={items:c,styles:Object.create(null)};function h(g){var j;if(!g)return;let b=null;const _=g.name;if(_==="#text")b=g.value;else if(o.shouldBuildText(_))(j=g==null?void 0:g.attributes)!=null&&j.textContent?b=g.attributes.textContent:g.value&&(b=g.value);else return;if(b!==null&&c.push({str:b}),!!g.children)for(const $ of g.children)h($)}return h(a),d}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=o},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=rt,e.updateTextLayer=lt;var s=o(1),a=o(6);const c=1e5,d=30,h=.8,g=new Map;function b(tt,nt){let it;if(nt&&s.FeatureTest.isOffscreenCanvasSupported)it=new OffscreenCanvas(tt,tt).getContext("2d",{alpha:!1});else{const ft=document.createElement("canvas");ft.width=ft.height=tt,it=ft.getContext("2d",{alpha:!1})}return it}function _(tt,nt){const it=g.get(tt);if(it)return it;const ft=b(d,nt);ft.font=`${d}px ${tt}`;const st=ft.measureText("");let at=st.fontBoundingBoxAscent,Ct=Math.abs(st.fontBoundingBoxDescent);if(at){const pt=at/(at+Ct);return g.set(tt,pt),ft.canvas.width=ft.canvas.height=0,pt}ft.strokeStyle="red",ft.clearRect(0,0,d,d),ft.strokeText("g",0,0);let yt=ft.getImageData(0,0,d,d).data;Ct=0;for(let pt=yt.length-1-3;pt>=0;pt-=4)if(yt[pt]>0){Ct=Math.ceil(pt/4/d);break}ft.clearRect(0,0,d,d),ft.strokeText("A",0,d),yt=ft.getImageData(0,0,d,d).data,at=0;for(let pt=0,gt=yt.length;pt<gt;pt+=4)if(yt[pt]>0){at=d-Math.floor(pt/4/d);break}if(ft.canvas.width=ft.canvas.height=0,at){const pt=at/(at+Ct);return g.set(tt,pt),pt}return g.set(tt,h),h}function j(tt,nt,it){const ft=document.createElement("span"),st={angle:0,canvasWidth:0,hasText:nt.str!=="",hasEOL:nt.hasEOL,fontSize:0};tt._textDivs.push(ft);const at=s.Util.transform(tt._transform,nt.transform);let Ct=Math.atan2(at[1],at[0]);const yt=it[nt.fontName];yt.vertical&&(Ct+=Math.PI/2);const pt=Math.hypot(at[2],at[3]),gt=pt*_(yt.fontFamily,tt._isOffscreenCanvasSupported);let Et,bt;Ct===0?(Et=at[4],bt=at[5]-gt):(Et=at[4]+gt*Math.sin(Ct),bt=at[5]-gt*Math.cos(Ct));const Pt="calc(var(--scale-factor)*",xt=ft.style;tt._container===tt._rootContainer?(xt.left=`${(100*Et/tt._pageWidth).toFixed(2)}%`,xt.top=`${(100*bt/tt._pageHeight).toFixed(2)}%`):(xt.left=`${Pt}${Et.toFixed(2)}px)`,xt.top=`${Pt}${bt.toFixed(2)}px)`),xt.fontSize=`${Pt}${pt.toFixed(2)}px)`,xt.fontFamily=yt.fontFamily,st.fontSize=pt,ft.setAttribute("role","presentation"),ft.textContent=nt.str,ft.dir=nt.dir,tt._fontInspectorEnabled&&(ft.dataset.fontName=nt.fontName),Ct!==0&&(st.angle=Ct*(180/Math.PI));let Lt=!1;if(nt.str.length>1)Lt=!0;else if(nt.str!==" "&&nt.transform[0]!==nt.transform[3]){const Bt=Math.abs(nt.transform[0]),Kt=Math.abs(nt.transform[3]);Bt!==Kt&&Math.max(Bt,Kt)/Math.min(Bt,Kt)>1.5&&(Lt=!0)}Lt&&(st.canvasWidth=yt.vertical?nt.height:nt.width),tt._textDivProperties.set(ft,st),tt._isReadableStream&&tt._layoutText(ft)}function $(tt){const{div:nt,scale:it,properties:ft,ctx:st,prevFontSize:at,prevFontFamily:Ct}=tt,{style:yt}=nt;let pt="";if(ft.canvasWidth!==0&&ft.hasText){const{fontFamily:gt}=yt,{canvasWidth:Et,fontSize:bt}=ft;(at!==bt||Ct!==gt)&&(st.font=`${bt*it}px ${gt}`,tt.prevFontSize=bt,tt.prevFontFamily=gt);const{width:Pt}=st.measureText(nt.textContent);Pt>0&&(pt=`scaleX(${Et*it/Pt})`)}ft.angle!==0&&(pt=`rotate(${ft.angle}deg) ${pt}`),pt.length>0&&(yt.transform=pt)}function _e(tt){if(tt._canceled)return;const nt=tt._textDivs,it=tt._capability;if(nt.length>c){it.resolve();return}if(!tt._isReadableStream)for(const st of nt)tt._layoutText(st);it.resolve()}class et{constructor({textContentSource:nt,container:it,viewport:ft,textDivs:st,textDivProperties:at,textContentItemsStr:Ct,isOffscreenCanvasSupported:yt}){var Pt;this._textContentSource=nt,this._isReadableStream=nt instanceof ReadableStream,this._container=this._rootContainer=it,this._textDivs=st||[],this._textContentItemsStr=Ct||[],this._isOffscreenCanvasSupported=yt,this._fontInspectorEnabled=!!((Pt=globalThis.FontInspector)!=null&&Pt.enabled),this._reader=null,this._textDivProperties=at||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:ft.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b(0,yt)};const{pageWidth:pt,pageHeight:gt,pageX:Et,pageY:bt}=ft.rawDims;this._transform=[1,0,0,-1,-Et,bt+gt],this._pageWidth=pt,this._pageHeight=gt,(0,a.setLayerDimensions)(it,ft),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(nt,it){for(const ft of nt){if(ft.str===void 0){if(ft.type==="beginMarkedContentProps"||ft.type==="beginMarkedContent"){const st=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),ft.id!==null&&this._container.setAttribute("id",`${ft.id}`),st.append(this._container)}else ft.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(ft.str),j(this,ft,it)}}_layoutText(nt){const it=this._layoutTextParams.properties=this._textDivProperties.get(nt);if(this._layoutTextParams.div=nt,$(this._layoutTextParams),it.hasText&&this._container.append(nt),it.hasEOL){const ft=document.createElement("br");ft.setAttribute("role","presentation"),this._container.append(ft)}}_render(){const nt=new s.PromiseCapability;let it=Object.create(null);if(this._isReadableStream){const ft=()=>{this._reader.read().then(({value:st,done:at})=>{if(at){nt.resolve();return}Object.assign(it,st.styles),this._processItems(st.items,it),ft()},nt.reject)};this._reader=this._textContentSource.getReader(),ft()}else if(this._textContentSource){const{items:ft,styles:st}=this._textContentSource;this._processItems(ft,st),nt.resolve()}else throw new Error('No "textContentSource" parameter specified.');nt.promise.then(()=>{it=null,_e(this)},this._capability.reject)}}e.TextLayerRenderTask=et;function rt(tt){!tt.textContentSource&&(tt.textContent||tt.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),tt.textContentSource=tt.textContent||tt.textContentStream);const{container:nt,viewport:it}=tt,ft=getComputedStyle(nt),st=ft.getPropertyValue("visibility"),at=parseFloat(ft.getPropertyValue("--scale-factor"));st==="visible"&&(!at||Math.abs(at-it.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Ct=new et(tt);return Ct._render(),Ct}function lt({container:tt,viewport:nt,textDivs:it,textDivProperties:ft,isOffscreenCanvasSupported:st,mustRotate:at=!0,mustRescale:Ct=!0}){if(at&&(0,a.setLayerDimensions)(tt,{rotation:nt.rotation}),Ct){const yt=b(0,st),gt={prevFontSize:null,prevFontFamily:null,div:null,scale:nt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:yt};for(const Et of it)gt.properties=ft.get(Et),gt.div=Et,$(gt)}}},(i,e,o)=>{var _,j,$,_e,et,rt,lt,tt,nt,it,ft,zr,at,gr,yt,$r,gt,Kr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var s=o(1),a=o(4),c=o(28),d=o(33),h=o(6),g=o(34);const bt=class bt{constructor({uiManager:xt,pageIndex:Lt,div:Bt,accessibilityManager:Kt,annotationLayer:kt,viewport:Ut,l10n:St}){Ot(this,ft);Ot(this,at);Ot(this,yt);Ot(this,gt);Ot(this,_,void 0);Ot(this,j,!1);Ot(this,$,null);Ot(this,_e,this.pointerup.bind(this));Ot(this,et,this.pointerdown.bind(this));Ot(this,rt,new Map);Ot(this,lt,!1);Ot(this,tt,!1);Ot(this,nt,!1);Ot(this,it,void 0);const rn=[c.FreeTextEditor,d.InkEditor,g.StampEditor];if(!bt._initialized){bt._initialized=!0;for(const an of rn)an.initialize(St)}xt.registerEditorTypes(rn),Yt(this,it,xt),this.pageIndex=Lt,this.div=Bt,Yt(this,_,Kt),Yt(this,$,kt),this.viewport=Ut,ot(this,it).addLayer(this)}get isEmpty(){return ot(this,rt).size===0}updateToolbar(xt){ot(this,it).updateToolbar(xt)}updateMode(xt=ot(this,it).getMode()){jt(this,gt,Kr).call(this),xt===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),xt!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",xt===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",xt===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",xt===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(xt){if(!xt&&ot(this,it).getMode()!==s.AnnotationEditorType.INK)return;if(!xt){for(const Bt of ot(this,rt).values())if(Bt.isEmpty()){Bt.setInBackground();return}}jt(this,at,gr).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(xt){ot(this,it).setEditingState(xt)}addCommands(xt){ot(this,it).addCommands(xt)}enable(){this.div.style.pointerEvents="auto";const xt=new Set;for(const Bt of ot(this,rt).values())Bt.enableEditing(),Bt.annotationElementId&&xt.add(Bt.annotationElementId);if(!ot(this,$))return;const Lt=ot(this,$).getEditableAnnotations();for(const Bt of Lt){if(Bt.hide(),ot(this,it).isDeletedAnnotationElement(Bt.data.id)||xt.has(Bt.data.id))continue;const Kt=this.deserialize(Bt);Kt&&(this.addOrRebuild(Kt),Kt.enableEditing())}}disable(){var Lt;Yt(this,nt,!0),this.div.style.pointerEvents="none";const xt=new Set;for(const Bt of ot(this,rt).values()){if(Bt.disableEditing(),!Bt.annotationElementId||Bt.serialize()!==null){xt.add(Bt.annotationElementId);continue}(Lt=this.getEditableAnnotation(Bt.annotationElementId))==null||Lt.show(),Bt.remove()}if(ot(this,$)){const Bt=ot(this,$).getEditableAnnotations();for(const Kt of Bt){const{id:kt}=Kt.data;xt.has(kt)||ot(this,it).isDeletedAnnotationElement(kt)||Kt.show()}}jt(this,gt,Kr).call(this),this.isEmpty&&(this.div.hidden=!0),Yt(this,nt,!1)}getEditableAnnotation(xt){var Lt;return((Lt=ot(this,$))==null?void 0:Lt.getEditableAnnotation(xt))||null}setActiveEditor(xt){ot(this,it).getActive()!==xt&&ot(this,it).setActiveEditor(xt)}enableClick(){this.div.addEventListener("pointerdown",ot(this,et)),this.div.addEventListener("pointerup",ot(this,_e))}disableClick(){this.div.removeEventListener("pointerdown",ot(this,et)),this.div.removeEventListener("pointerup",ot(this,_e))}attach(xt){ot(this,rt).set(xt.id,xt);const{annotationElementId:Lt}=xt;Lt&&ot(this,it).isDeletedAnnotationElement(Lt)&&ot(this,it).removeDeletedAnnotationElement(xt)}detach(xt){var Lt;ot(this,rt).delete(xt.id),(Lt=ot(this,_))==null||Lt.removePointerInTextLayer(xt.contentDiv),!ot(this,nt)&&xt.annotationElementId&&ot(this,it).addDeletedAnnotationElement(xt)}remove(xt){this.detach(xt),ot(this,it).removeEditor(xt),xt.div.contains(document.activeElement)&&setTimeout(()=>{ot(this,it).focusMainContainer()},0),xt.div.remove(),xt.isAttachedToDOM=!1,ot(this,tt)||this.addInkEditorIfNeeded(!1)}changeParent(xt){var Lt;xt.parent!==this&&(xt.annotationElementId&&(ot(this,it).addDeletedAnnotationElement(xt.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(xt),xt.annotationElementId=null),this.attach(xt),(Lt=xt.parent)==null||Lt.detach(xt),xt.setParent(this),xt.div&&xt.isAttachedToDOM&&(xt.div.remove(),this.div.append(xt.div)))}add(xt){if(this.changeParent(xt),ot(this,it).addEditor(xt),this.attach(xt),!xt.isAttachedToDOM){const Lt=xt.render();this.div.append(Lt),xt.isAttachedToDOM=!0}xt.fixAndSetPosition(),xt.onceAdded(),ot(this,it).addToAnnotationStorage(xt)}moveEditorInDOM(xt){var Bt;if(!xt.isAttachedToDOM)return;const{activeElement:Lt}=document;xt.div.contains(Lt)&&(xt._focusEventsAllowed=!1,setTimeout(()=>{xt.div.contains(document.activeElement)?xt._focusEventsAllowed=!0:(xt.div.addEventListener("focusin",()=>{xt._focusEventsAllowed=!0},{once:!0}),Lt.focus())},0)),xt._structTreeParentId=(Bt=ot(this,_))==null?void 0:Bt.moveElementInDOM(this.div,xt.div,xt.contentDiv,!0)}addOrRebuild(xt){xt.needsToBeRebuilt()?xt.rebuild():this.add(xt)}addUndoableEditor(xt){const Lt=()=>xt._uiManager.rebuild(xt),Bt=()=>{xt.remove()};this.addCommands({cmd:Lt,undo:Bt,mustExec:!1})}getNextId(){return ot(this,it).getId()}pasteEditor(xt,Lt){ot(this,it).updateToolbar(xt),ot(this,it).updateMode(xt);const{offsetX:Bt,offsetY:Kt}=jt(this,yt,$r).call(this),kt=this.getNextId(),Ut=jt(this,ft,zr).call(this,{parent:this,id:kt,x:Bt,y:Kt,uiManager:ot(this,it),isCentered:!0,...Lt});Ut&&this.add(Ut)}deserialize(xt){switch(xt.annotationType??xt.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(xt,this,ot(this,it));case s.AnnotationEditorType.INK:return d.InkEditor.deserialize(xt,this,ot(this,it));case s.AnnotationEditorType.STAMP:return g.StampEditor.deserialize(xt,this,ot(this,it))}return null}addNewEditor(){jt(this,at,gr).call(this,jt(this,yt,$r).call(this),!0)}setSelected(xt){ot(this,it).setSelected(xt)}toggleSelected(xt){ot(this,it).toggleSelected(xt)}isSelected(xt){return ot(this,it).isSelected(xt)}unselect(xt){ot(this,it).unselect(xt)}pointerup(xt){const{isMac:Lt}=s.FeatureTest.platform;if(!(xt.button!==0||xt.ctrlKey&&Lt)&&xt.target===this.div&&ot(this,lt)){if(Yt(this,lt,!1),!ot(this,j)){Yt(this,j,!0);return}if(ot(this,it).getMode()===s.AnnotationEditorType.STAMP){ot(this,it).unselectAll();return}jt(this,at,gr).call(this,xt,!1)}}pointerdown(xt){if(ot(this,lt)){Yt(this,lt,!1);return}const{isMac:Lt}=s.FeatureTest.platform;if(xt.button!==0||xt.ctrlKey&&Lt||xt.target!==this.div)return;Yt(this,lt,!0);const Bt=ot(this,it).getActive();Yt(this,j,!Bt||Bt.isEmpty())}findNewParent(xt,Lt,Bt){const Kt=ot(this,it).findParent(Lt,Bt);return Kt===null||Kt===this?!1:(Kt.changeParent(xt),!0)}destroy(){var xt,Lt;((xt=ot(this,it).getActive())==null?void 0:xt.parent)===this&&(ot(this,it).commitOrRemove(),ot(this,it).setActiveEditor(null));for(const Bt of ot(this,rt).values())(Lt=ot(this,_))==null||Lt.removePointerInTextLayer(Bt.contentDiv),Bt.setParent(null),Bt.isAttachedToDOM=!1,Bt.div.remove();this.div=null,ot(this,rt).clear(),ot(this,it).removeLayer(this)}render({viewport:xt}){this.viewport=xt,(0,h.setLayerDimensions)(this.div,xt);for(const Lt of ot(this,it).getEditors(this.pageIndex))this.add(Lt);this.updateMode()}update({viewport:xt}){ot(this,it).commitOrRemove(),this.viewport=xt,(0,h.setLayerDimensions)(this.div,{rotation:xt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:xt,pageHeight:Lt}=this.viewport.rawDims;return[xt,Lt]}};_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,et=new WeakMap,rt=new WeakMap,lt=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakSet,zr=function(xt){switch(ot(this,it).getMode()){case s.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(xt);case s.AnnotationEditorType.INK:return new d.InkEditor(xt);case s.AnnotationEditorType.STAMP:return new g.StampEditor(xt)}return null},at=new WeakSet,gr=function(xt,Lt){const Bt=this.getNextId(),Kt=jt(this,ft,zr).call(this,{parent:this,id:Bt,x:xt.offsetX,y:xt.offsetY,uiManager:ot(this,it),isCentered:Lt});return Kt&&this.add(Kt),Kt},yt=new WeakSet,$r=function(){const{x:xt,y:Lt,width:Bt,height:Kt}=this.div.getBoundingClientRect(),kt=Math.max(0,xt),Ut=Math.max(0,Lt),St=Math.min(window.innerWidth,xt+Bt),rn=Math.min(window.innerHeight,Lt+Kt),an=(kt+St)/2-xt,ht=(Ut+rn)/2-Lt,[ct,mt]=this.viewport.rotation%180===0?[an,ht]:[ht,an];return{offsetX:ct,offsetY:mt}},gt=new WeakSet,Kr=function(){Yt(this,tt,!0);for(const xt of ot(this,rt).values())xt.isEmpty()&&xt.remove();Yt(this,tt,!1)},zn(bt,"_initialized",!1);let b=bt;e.AnnotationEditorLayer=b},(i,e,o)=>{var g,b,_,j,$,_e,et,rt,lt,tt,yo,it,Eo,st,vo,Ct,ar,pt,Vr,Et,Co,Pt,Gr;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var s=o(1),a=o(5),c=o(4),d=o(29);const Lt=class Lt extends c.AnnotationEditor{constructor(kt){super({...kt,name:"freeTextEditor"});Ot(this,tt);Ot(this,it);Ot(this,st);Ot(this,Ct);Ot(this,pt);Ot(this,Et);Ot(this,Pt);Ot(this,g,this.editorDivBlur.bind(this));Ot(this,b,this.editorDivFocus.bind(this));Ot(this,_,this.editorDivInput.bind(this));Ot(this,j,this.editorDivKeydown.bind(this));Ot(this,$,void 0);Ot(this,_e,"");Ot(this,et,`${this.id}-editor`);Ot(this,rt,void 0);Ot(this,lt,null);Yt(this,$,kt.color||Lt._defaultColor||c.AnnotationEditor._defaultLineColor),Yt(this,rt,kt.fontSize||Lt._defaultFontSize)}static get _keyboardManager(){const kt=Lt.prototype,Ut=an=>an.isEmpty(),St=a.AnnotationEditorUIManager.TRANSLATE_SMALL,rn=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],kt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],kt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],kt._translateEmpty,{args:[-St,0],checker:Ut}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],kt._translateEmpty,{args:[-rn,0],checker:Ut}],[["ArrowRight","mac+ArrowRight"],kt._translateEmpty,{args:[St,0],checker:Ut}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],kt._translateEmpty,{args:[rn,0],checker:Ut}],[["ArrowUp","mac+ArrowUp"],kt._translateEmpty,{args:[0,-St],checker:Ut}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],kt._translateEmpty,{args:[0,-rn],checker:Ut}],[["ArrowDown","mac+ArrowDown"],kt._translateEmpty,{args:[0,St],checker:Ut}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],kt._translateEmpty,{args:[0,rn],checker:Ut}]]))}static initialize(kt){c.AnnotationEditor.initialize(kt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ut=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ut.getPropertyValue("--freetext-padding"))}static updateDefaultParams(kt,Ut){switch(kt){case s.AnnotationEditorParamsType.FREETEXT_SIZE:Lt._defaultFontSize=Ut;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:Lt._defaultColor=Ut;break}}updateParams(kt,Ut){switch(kt){case s.AnnotationEditorParamsType.FREETEXT_SIZE:jt(this,tt,yo).call(this,Ut);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:jt(this,it,Eo).call(this,Ut);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,Lt._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,Lt._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,ot(this,rt)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,ot(this,$)]]}_translateEmpty(kt,Ut){this._uiManager.translateSelectedEditors(kt,Ut,!0)}getInitialTranslation(){const kt=this.parentScale;return[-Lt._internalPadding*kt,-(Lt._internalPadding+ot(this,rt))*kt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",ot(this,j)),this.editorDiv.addEventListener("focus",ot(this,b)),this.editorDiv.addEventListener("blur",ot(this,g)),this.editorDiv.addEventListener("input",ot(this,_)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ot(this,et)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",ot(this,j)),this.editorDiv.removeEventListener("focus",ot(this,b)),this.editorDiv.removeEventListener("blur",ot(this,g)),this.editorDiv.removeEventListener("input",ot(this,_)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(kt){this._focusEventsAllowed&&(super.focusin(kt),kt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var kt;if(this.width){jt(this,Pt,Gr).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(kt=this._initialOptions)!=null&&kt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const kt=ot(this,_e),Ut=Yt(this,_e,jt(this,st,vo).call(this).trimEnd());if(kt===Ut)return;const St=rn=>{if(Yt(this,_e,rn),!rn){this.remove();return}jt(this,pt,Vr).call(this),this._uiManager.rebuild(this),jt(this,Ct,ar).call(this)};this.addCommands({cmd:()=>{St(Ut)},undo:()=>{St(kt)},mustExec:!1}),jt(this,Ct,ar).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(kt){this.enterInEditMode()}keydown(kt){kt.target===this.div&&kt.key==="Enter"&&(this.enterInEditMode(),kt.preventDefault())}editorDivKeydown(kt){Lt._keyboardManager.exec(this,kt)}editorDivFocus(kt){this.isEditing=!0}editorDivBlur(kt){this.isEditing=!1}editorDivInput(kt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let kt,Ut;this.width&&(kt=this.x,Ut=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ot(this,et)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(rn=>{var an;return(an=this.editorDiv)==null?void 0:an.setAttribute("aria-label",rn)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(rn=>{var an;return(an=this.editorDiv)==null?void 0:an.setAttribute("default-content",rn)}),this.editorDiv.contentEditable=!0;const{style:St}=this.editorDiv;if(St.fontSize=`calc(${ot(this,rt)}px * var(--scale-factor))`,St.color=ot(this,$),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[rn,an]=this.parentDimensions;if(this.annotationElementId){const{position:ht}=ot(this,lt);let[ct,mt]=this.getInitialTranslation();[ct,mt]=this.pageTranslationToScreen(ct,mt);const[ut,vt]=this.pageDimensions,[At,Tt]=this.pageTranslation;let _t,Mt;switch(this.rotation){case 0:_t=kt+(ht[0]-At)/ut,Mt=Ut+this.height-(ht[1]-Tt)/vt;break;case 90:_t=kt+(ht[0]-At)/ut,Mt=Ut-(ht[1]-Tt)/vt,[ct,mt]=[mt,-ct];break;case 180:_t=kt-this.width+(ht[0]-At)/ut,Mt=Ut-(ht[1]-Tt)/vt,[ct,mt]=[-ct,-mt];break;case 270:_t=kt+(ht[0]-At-this.height*vt)/ut,Mt=Ut+(ht[1]-Tt-this.width*ut)/vt,[ct,mt]=[-mt,ct];break}this.setAt(_t*rn,Mt*an,ct,mt)}else this.setAt(kt*rn,Ut*an,this.width*rn,this.height*an);jt(this,pt,Vr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(kt,Ut,St){let rn=null;if(kt instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:ht,fontColor:ct},rect:mt,rotation:ut,id:vt},textContent:At,textPosition:Tt,parent:{page:{pageNumber:_t}}}=kt;if(!At||At.length===0)return null;rn=kt={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(ct),fontSize:ht,value:At.join(`
`),position:Tt,pageIndex:_t-1,rect:mt,rotation:ut,id:vt,deleted:!1}}const an=super.deserialize(kt,Ut,St);return Yt(an,rt,kt.fontSize),Yt(an,$,s.Util.makeHexColor(...kt.color)),Yt(an,_e,kt.value),an.annotationElementId=kt.id||null,Yt(an,lt,rn),an}serialize(kt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ut=Lt._internalPadding*this.parentScale,St=this.getRect(Ut,Ut),rn=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:ot(this,$)),an={annotationType:s.AnnotationEditorType.FREETEXT,color:rn,fontSize:ot(this,rt),value:ot(this,_e),pageIndex:this.pageIndex,rect:St,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return kt?an:this.annotationElementId&&!jt(this,Et,Co).call(this,an)?null:(an.id=this.annotationElementId,an)}};g=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,et=new WeakMap,rt=new WeakMap,lt=new WeakMap,tt=new WeakSet,yo=function(kt){const Ut=rn=>{this.editorDiv.style.fontSize=`calc(${rn}px * var(--scale-factor))`,this.translate(0,-(rn-ot(this,rt))*this.parentScale),Yt(this,rt,rn),jt(this,Ct,ar).call(this)},St=ot(this,rt);this.addCommands({cmd:()=>{Ut(kt)},undo:()=>{Ut(St)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},it=new WeakSet,Eo=function(kt){const Ut=ot(this,$);this.addCommands({cmd:()=>{Yt(this,$,this.editorDiv.style.color=kt)},undo:()=>{Yt(this,$,this.editorDiv.style.color=Ut)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},st=new WeakSet,vo=function(){const kt=this.editorDiv.getElementsByTagName("div");if(kt.length===0)return this.editorDiv.innerText;const Ut=[];for(const St of kt)Ut.push(St.innerText.replace(/\r\n?|\n/,""));return Ut.join(`
`)},Ct=new WeakSet,ar=function(){const[kt,Ut]=this.parentDimensions;let St;if(this.isAttachedToDOM)St=this.div.getBoundingClientRect();else{const{currentLayer:rn,div:an}=this,ht=an.style.display;an.style.display="hidden",rn.div.append(this.div),St=an.getBoundingClientRect(),an.remove(),an.style.display=ht}this.rotation%180===this.parentRotation%180?(this.width=St.width/kt,this.height=St.height/Ut):(this.width=St.height/kt,this.height=St.width/Ut),this.fixAndSetPosition()},pt=new WeakSet,Vr=function(){if(this.editorDiv.replaceChildren(),!!ot(this,_e))for(const kt of ot(this,_e).split(`
`)){const Ut=document.createElement("div");Ut.append(kt?document.createTextNode(kt):document.createElement("br")),this.editorDiv.append(Ut)}},Et=new WeakSet,Co=function(kt){const{value:Ut,fontSize:St,color:rn,rect:an,pageIndex:ht}=ot(this,lt);return kt.value!==Ut||kt.fontSize!==St||kt.rect.some((ct,mt)=>Math.abs(ct-an[mt])>=1)||kt.color.some((ct,mt)=>ct!==rn[mt])||kt.pageIndex!==ht},Pt=new WeakSet,Gr=function(kt=!1){if(!this.annotationElementId)return;if(jt(this,Ct,ar).call(this),!kt&&(this.width===0||this.height===0)){setTimeout(()=>jt(this,Pt,Gr).call(this,!0),0);return}const Ut=Lt._internalPadding*this.parentScale;ot(this,lt).rect=this.getRect(Ut,Ut)},zn(Lt,"_freeTextDefaultContent",""),zn(Lt,"_internalPadding",0),zn(Lt,"_defaultColor",null),zn(Lt,"_defaultFontSize",10),zn(Lt,"_type","freetext");let h=Lt;e.FreeTextEditor=h},(i,e,o)=>{var mt,vt,Xn,Tt,Ao,Mt,Wt,Vt,Qt,tn,on,Zt,fn,xn,hn,Cn,sn,Gt,qt,Nt,Xt,nn,mn,So,Tn,yr,Rn,qr,Mn,Wr,zt,Ft,cn,dn,Hn,Bn,$t,Yr,kn,gn,bn,_n,xo,un,Xr;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var s=o(1),a=o(6),c=o(3),d=o(30),h=o(31),g=o(32);const b=1e3,_=9,j=new WeakSet;function $(wn){return{width:wn[2]-wn[0],height:wn[3]-wn[1]}}class _e{static create(Rt){switch(Rt.data.annotationType){case s.AnnotationType.LINK:return new rt(Rt);case s.AnnotationType.TEXT:return new lt(Rt);case s.AnnotationType.WIDGET:switch(Rt.data.fieldType){case"Tx":return new nt(Rt);case"Btn":return Rt.data.radioButton?new st(Rt):Rt.data.checkBox?new ft(Rt):new at(Rt);case"Ch":return new Ct(Rt);case"Sig":return new it(Rt)}return new tt(Rt);case s.AnnotationType.POPUP:return new yt(Rt);case s.AnnotationType.FREETEXT:return new gt(Rt);case s.AnnotationType.LINE:return new Et(Rt);case s.AnnotationType.SQUARE:return new bt(Rt);case s.AnnotationType.CIRCLE:return new Pt(Rt);case s.AnnotationType.POLYLINE:return new xt(Rt);case s.AnnotationType.CARET:return new Bt(Rt);case s.AnnotationType.INK:return new Kt(Rt);case s.AnnotationType.POLYGON:return new Lt(Rt);case s.AnnotationType.HIGHLIGHT:return new kt(Rt);case s.AnnotationType.UNDERLINE:return new Ut(Rt);case s.AnnotationType.SQUIGGLY:return new St(Rt);case s.AnnotationType.STRIKEOUT:return new rn(Rt);case s.AnnotationType.STAMP:return new an(Rt);case s.AnnotationType.FILEATTACHMENT:return new ht(Rt);default:return new et(Rt)}}}const ut=class ut{constructor(Rt,{isRenderable:dt=!1,ignoreBorder:wt=!1,createQuadrilaterals:It=!1}={}){Ot(this,mt,!1);this.isRenderable=dt,this.data=Rt.data,this.layer=Rt.layer,this.linkService=Rt.linkService,this.downloadManager=Rt.downloadManager,this.imageResourcesPath=Rt.imageResourcesPath,this.renderForms=Rt.renderForms,this.svgFactory=Rt.svgFactory,this.annotationStorage=Rt.annotationStorage,this.enableScripting=Rt.enableScripting,this.hasJSActions=Rt.hasJSActions,this._fieldObjects=Rt.fieldObjects,this.parent=Rt.parent,dt&&(this.container=this._createContainer(wt)),It&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Rt,contentsObj:dt,richText:wt}){return!!(Rt!=null&&Rt.str||dt!=null&&dt.str||wt!=null&&wt.str)}get hasPopupData(){return ut._hasPopupData(this.data)}_createContainer(Rt){const{data:dt,parent:{page:wt,viewport:It}}=this,Dt=document.createElement("section");Dt.setAttribute("data-annotation-id",dt.id),this instanceof tt||(Dt.tabIndex=b),Dt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Dt.setAttribute("aria-haspopup","dialog"),dt.noRotate&&Dt.classList.add("norotate");const{pageWidth:Ht,pageHeight:Jt,pageX:ln,pageY:En}=It.rawDims;if(!dt.rect||this instanceof yt){const{rotation:Nn}=dt;return!dt.hasOwnCanvas&&Nn!==0&&this.setRotation(Nn,Dt),Dt}const{width:yn,height:On}=$(dt.rect),An=s.Util.normalizeRect([dt.rect[0],wt.view[3]-dt.rect[1]+wt.view[1],dt.rect[2],wt.view[3]-dt.rect[3]+wt.view[1]]);if(!Rt&&dt.borderStyle.width>0){Dt.style.borderWidth=`${dt.borderStyle.width}px`;const Nn=dt.borderStyle.horizontalCornerRadius,Ln=dt.borderStyle.verticalCornerRadius;if(Nn>0||Ln>0){const Un=`calc(${Nn}px * var(--scale-factor)) / calc(${Ln}px * var(--scale-factor))`;Dt.style.borderRadius=Un}else if(this instanceof st){const Un=`calc(${yn}px * var(--scale-factor)) / calc(${On}px * var(--scale-factor))`;Dt.style.borderRadius=Un}switch(dt.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:Dt.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:Dt.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:Dt.style.borderBottomStyle="solid";break}const Fn=dt.borderColor||null;Fn?(Yt(this,mt,!0),Dt.style.borderColor=s.Util.makeHexColor(Fn[0]|0,Fn[1]|0,Fn[2]|0)):Dt.style.borderWidth=0}Dt.style.left=`${100*(An[0]-ln)/Ht}%`,Dt.style.top=`${100*(An[1]-En)/Jt}%`;const{rotation:Sn}=dt;return dt.hasOwnCanvas||Sn===0?(Dt.style.width=`${100*yn/Ht}%`,Dt.style.height=`${100*On/Jt}%`):this.setRotation(Sn,Dt),Dt}setRotation(Rt,dt=this.container){if(!this.data.rect)return;const{pageWidth:wt,pageHeight:It}=this.parent.viewport.rawDims,{width:Dt,height:Ht}=$(this.data.rect);let Jt,ln;Rt%180===0?(Jt=100*Dt/wt,ln=100*Ht/It):(Jt=100*Ht/wt,ln=100*Dt/It),dt.style.width=`${Jt}%`,dt.style.height=`${ln}%`,dt.setAttribute("data-main-rotation",(360-Rt)%360)}get _commonActions(){const Rt=(dt,wt,It)=>{const Dt=It.detail[dt],Ht=Dt[0],Jt=Dt.slice(1);It.target.style[wt]=d.ColorConverters[`${Ht}_HTML`](Jt),this.annotationStorage.setValue(this.data.id,{[wt]:d.ColorConverters[`${Ht}_rgb`](Jt)})};return(0,s.shadow)(this,"_commonActions",{display:dt=>{const{display:wt}=dt.detail,It=wt%2===1;this.container.style.visibility=It?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:It,noPrint:wt===1||wt===2})},print:dt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!dt.detail.print})},hidden:dt=>{const{hidden:wt}=dt.detail;this.container.style.visibility=wt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:wt,noView:wt})},focus:dt=>{setTimeout(()=>dt.target.focus({preventScroll:!1}),0)},userName:dt=>{dt.target.title=dt.detail.userName},readonly:dt=>{dt.target.disabled=dt.detail.readonly},required:dt=>{this._setRequired(dt.target,dt.detail.required)},bgColor:dt=>{Rt("bgColor","backgroundColor",dt)},fillColor:dt=>{Rt("fillColor","backgroundColor",dt)},fgColor:dt=>{Rt("fgColor","color",dt)},textColor:dt=>{Rt("textColor","color",dt)},borderColor:dt=>{Rt("borderColor","borderColor",dt)},strokeColor:dt=>{Rt("strokeColor","borderColor",dt)},rotation:dt=>{const wt=dt.detail.rotation;this.setRotation(wt),this.annotationStorage.setValue(this.data.id,{rotation:wt})}})}_dispatchEventFromSandbox(Rt,dt){const wt=this._commonActions;for(const It of Object.keys(dt.detail)){const Dt=Rt[It]||wt[It];Dt==null||Dt(dt)}}_setDefaultPropertiesFromJS(Rt){if(!this.enableScripting)return;const dt=this.annotationStorage.getRawValue(this.data.id);if(!dt)return;const wt=this._commonActions;for(const[It,Dt]of Object.entries(dt)){const Ht=wt[It];if(Ht){const Jt={detail:{[It]:Dt},target:Rt};Ht(Jt),delete dt[It]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Rt}=this.data;if(!Rt)return;const[dt,wt,It,Dt]=this.data.rect;if(Rt.length===1){const[,{x:Ln,y:Fn},{x:Un,y:Kn}]=Rt[0];if(It===Ln&&Dt===Fn&&dt===Un&&wt===Kn)return}const{style:Ht}=this.container;let Jt;if(ot(this,mt)){const{borderColor:Ln,borderWidth:Fn}=Ht;Ht.borderWidth=0,Jt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ln}" stroke-width="${Fn}">`],this.container.classList.add("hasBorder")}const ln=It-dt,En=Dt-wt,{svgFactory:yn}=this,On=yn.createElement("svg");On.classList.add("quadrilateralsContainer"),On.setAttribute("width",0),On.setAttribute("height",0);const An=yn.createElement("defs");On.append(An);const Sn=yn.createElement("clipPath"),Nn=`clippath_${this.data.id}`;Sn.setAttribute("id",Nn),Sn.setAttribute("clipPathUnits","objectBoundingBox"),An.append(Sn);for(const[,{x:Ln,y:Fn},{x:Un,y:Kn}]of Rt){const $n=yn.createElement("rect"),Vn=(Un-dt)/ln,Wn=(Dt-Fn)/En,Yn=(Ln-Un)/ln,io=(Fn-Kn)/En;$n.setAttribute("x",Vn),$n.setAttribute("y",Wn),$n.setAttribute("width",Yn),$n.setAttribute("height",io),Sn.append($n),Jt==null||Jt.push(`<rect vector-effect="non-scaling-stroke" x="${Vn}" y="${Wn}" width="${Yn}" height="${io}"/>`)}ot(this,mt)&&(Jt.push("</g></svg>')"),Ht.backgroundImage=Jt.join("")),this.container.append(On),this.container.style.clipPath=`url(#${Nn})`}_createPopup(){const{container:Rt,data:dt}=this;Rt.setAttribute("aria-haspopup","dialog");const wt=new yt({data:{color:dt.color,titleObj:dt.titleObj,modificationDate:dt.modificationDate,contentsObj:dt.contentsObj,richText:dt.richText,parentRect:dt.rect,borderStyle:0,id:`popup_${dt.id}`,rotation:dt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(wt.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Rt,dt=null){const wt=[];if(this._fieldObjects){const It=this._fieldObjects[Rt];if(It)for(const{page:Dt,id:Ht,exportValues:Jt}of It){if(Dt===-1||Ht===dt)continue;const ln=typeof Jt=="string"?Jt:null,En=document.querySelector(`[data-element-id="${Ht}"]`);if(En&&!j.has(En)){(0,s.warn)(`_getElementsByName - element not allowed: ${Ht}`);continue}wt.push({id:Ht,exportValue:ln,domElement:En})}return wt}for(const It of document.getElementsByName(Rt)){const{exportValue:Dt}=It,Ht=It.getAttribute("data-element-id");Ht!==dt&&j.has(It)&&wt.push({id:Ht,exportValue:Dt,domElement:It})}return wt}show(){var Rt;this.container&&(this.container.hidden=!1),(Rt=this.popup)==null||Rt.maybeShow()}hide(){var Rt;this.container&&(this.container.hidden=!0),(Rt=this.popup)==null||Rt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Rt=this.getElementsToTriggerPopup();if(Array.isArray(Rt))for(const dt of Rt)dt.classList.add("highlightArea");else Rt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Rt,data:{id:dt}}=this;this.container.addEventListener("dblclick",()=>{var wt;(wt=this.linkService.eventBus)==null||wt.dispatch("switchannotationeditormode",{source:this,mode:Rt,editId:dt})})}};mt=new WeakMap;let et=ut;class rt extends et{constructor(dt,wt=null){super(dt,{isRenderable:!0,ignoreBorder:!!(wt!=null&&wt.ignoreBorder),createQuadrilaterals:!0});Ot(this,vt);Ot(this,Tt);this.isTooltipOnly=dt.data.isTooltipOnly}render(){const{data:dt,linkService:wt}=this,It=document.createElement("a");It.setAttribute("data-element-id",dt.id);let Dt=!1;return dt.url?(wt.addLinkAttributes(It,dt.url,dt.newWindow),Dt=!0):dt.action?(this._bindNamedAction(It,dt.action),Dt=!0):dt.attachment?(this._bindAttachment(It,dt.attachment),Dt=!0):dt.setOCGState?(jt(this,Tt,Ao).call(this,It,dt.setOCGState),Dt=!0):dt.dest?(this._bindLink(It,dt.dest),Dt=!0):(dt.actions&&(dt.actions.Action||dt.actions["Mouse Up"]||dt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(It,dt),Dt=!0),dt.resetForm?(this._bindResetFormAction(It,dt.resetForm),Dt=!0):this.isTooltipOnly&&!Dt&&(this._bindLink(It,""),Dt=!0)),this.container.classList.add("linkAnnotation"),Dt&&this.container.append(It),this.container}_bindLink(dt,wt){dt.href=this.linkService.getDestinationHash(wt),dt.onclick=()=>(wt&&this.linkService.goToDestination(wt),!1),(wt||wt==="")&&jt(this,vt,Xn).call(this)}_bindNamedAction(dt,wt){dt.href=this.linkService.getAnchorUrl(""),dt.onclick=()=>(this.linkService.executeNamedAction(wt),!1),jt(this,vt,Xn).call(this)}_bindAttachment(dt,wt){dt.href=this.linkService.getAnchorUrl(""),dt.onclick=()=>{var It;return(It=this.downloadManager)==null||It.openOrDownloadData(this.container,wt.content,wt.filename),!1},jt(this,vt,Xn).call(this)}_bindJSAction(dt,wt){dt.href=this.linkService.getAnchorUrl("");const It=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Dt of Object.keys(wt.actions)){const Ht=It.get(Dt);Ht&&(dt[Ht]=()=>{var Jt;return(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:wt.id,name:Dt}}),!1})}dt.onclick||(dt.onclick=()=>!1),jt(this,vt,Xn).call(this)}_bindResetFormAction(dt,wt){const It=dt.onclick;if(It||(dt.href=this.linkService.getAnchorUrl("")),jt(this,vt,Xn).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),It||(dt.onclick=()=>!1);return}dt.onclick=()=>{var On;It==null||It();const{fields:Dt,refs:Ht,include:Jt}=wt,ln=[];if(Dt.length!==0||Ht.length!==0){const An=new Set(Ht);for(const Sn of Dt){const Nn=this._fieldObjects[Sn]||[];for(const{id:Ln}of Nn)An.add(Ln)}for(const Sn of Object.values(this._fieldObjects))for(const Nn of Sn)An.has(Nn.id)===Jt&&ln.push(Nn)}else for(const An of Object.values(this._fieldObjects))ln.push(...An);const En=this.annotationStorage,yn=[];for(const An of ln){const{id:Sn}=An;switch(yn.push(Sn),An.type){case"text":{const Ln=An.defaultValue||"";En.setValue(Sn,{value:Ln});break}case"checkbox":case"radiobutton":{const Ln=An.defaultValue===An.exportValues;En.setValue(Sn,{value:Ln});break}case"combobox":case"listbox":{const Ln=An.defaultValue||"";En.setValue(Sn,{value:Ln});break}default:continue}const Nn=document.querySelector(`[data-element-id="${Sn}"]`);if(Nn){if(!j.has(Nn)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Sn}`);continue}}else continue;Nn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((On=this.linkService.eventBus)==null||On.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:yn,name:"ResetForm"}})),!1}}}vt=new WeakSet,Xn=function(){this.container.setAttribute("data-internal-link","")},Tt=new WeakSet,Ao=function(dt,wt){dt.href=this.linkService.getAnchorUrl(""),dt.onclick=()=>(this.linkService.executeSetOCGState(wt),!1),jt(this,vt,Xn).call(this)};class lt extends et{constructor(Rt){super(Rt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Rt=document.createElement("img");return Rt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Rt.alt="[{{type}} Annotation]",Rt.dataset.l10nId="text_annotation_type",Rt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Rt),this.container}}class tt extends et{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Rt){var dt;this.data.hasOwnCanvas&&(((dt=Rt.previousSibling)==null?void 0:dt.nodeName)==="CANVAS"&&(Rt.previousSibling.hidden=!0),Rt.hidden=!1)}_getKeyModifier(Rt){const{isWin:dt,isMac:wt}=s.FeatureTest.platform;return dt&&Rt.ctrlKey||wt&&Rt.metaKey}_setEventListener(Rt,dt,wt,It,Dt){wt.includes("mouse")?Rt.addEventListener(wt,Ht=>{var Jt;(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:It,value:Dt(Ht),shift:Ht.shiftKey,modifier:this._getKeyModifier(Ht)}})}):Rt.addEventListener(wt,Ht=>{var Jt;if(wt==="blur"){if(!dt.focused||!Ht.relatedTarget)return;dt.focused=!1}else if(wt==="focus"){if(dt.focused)return;dt.focused=!0}Dt&&((Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:It,value:Dt(Ht)}}))})}_setEventListeners(Rt,dt,wt,It){var Dt,Ht,Jt;for(const[ln,En]of wt)(En==="Action"||(Dt=this.data.actions)!=null&&Dt[En])&&((En==="Focus"||En==="Blur")&&(dt||(dt={focused:!1})),this._setEventListener(Rt,dt,ln,En,It),En==="Focus"&&!((Ht=this.data.actions)!=null&&Ht.Blur)?this._setEventListener(Rt,dt,"blur","Blur",null):En==="Blur"&&!((Jt=this.data.actions)!=null&&Jt.Focus)&&this._setEventListener(Rt,dt,"focus","Focus",null))}_setBackgroundColor(Rt){const dt=this.data.backgroundColor||null;Rt.style.backgroundColor=dt===null?"transparent":s.Util.makeHexColor(dt[0],dt[1],dt[2])}_setTextStyle(Rt){const dt=["left","center","right"],{fontColor:wt}=this.data.defaultAppearanceData,It=this.data.defaultAppearanceData.fontSize||_,Dt=Rt.style;let Ht;const Jt=2,ln=En=>Math.round(10*En)/10;if(this.data.multiLine){const En=Math.abs(this.data.rect[3]-this.data.rect[1]-Jt),yn=Math.round(En/(s.LINE_FACTOR*It))||1,On=En/yn;Ht=Math.min(It,ln(On/s.LINE_FACTOR))}else{const En=Math.abs(this.data.rect[3]-this.data.rect[1]-Jt);Ht=Math.min(It,ln(En/s.LINE_FACTOR))}Dt.fontSize=`calc(${Ht}px * var(--scale-factor))`,Dt.color=s.Util.makeHexColor(wt[0],wt[1],wt[2]),this.data.textAlignment!==null&&(Dt.textAlign=dt[this.data.textAlignment])}_setRequired(Rt,dt){dt?Rt.setAttribute("required",!0):Rt.removeAttribute("required"),Rt.setAttribute("aria-required",dt)}}class nt extends tt{constructor(Rt){const dt=Rt.renderForms||!Rt.data.hasAppearance&&!!Rt.data.fieldValue;super(Rt,{isRenderable:dt})}setPropertyOnSiblings(Rt,dt,wt,It){const Dt=this.annotationStorage;for(const Ht of this._getElementsByName(Rt.name,Rt.id))Ht.domElement&&(Ht.domElement[dt]=wt),Dt.setValue(Ht.id,{[It]:wt})}render(){var It,Dt;const Rt=this.annotationStorage,dt=this.data.id;this.container.classList.add("textWidgetAnnotation");let wt=null;if(this.renderForms){const Ht=Rt.getValue(dt,{value:this.data.fieldValue});let Jt=Ht.value||"";const ln=Rt.getValue(dt,{charLimit:this.data.maxLen}).charLimit;ln&&Jt.length>ln&&(Jt=Jt.slice(0,ln));let En=Ht.formattedValue||((It=this.data.textContent)==null?void 0:It.join(`
`))||null;En&&this.data.comb&&(En=En.replaceAll(/\s+/g,""));const yn={userValue:Jt,formattedValue:En,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(wt=document.createElement("textarea"),wt.textContent=En??Jt,this.data.doNotScroll&&(wt.style.overflowY="hidden")):(wt=document.createElement("input"),wt.type="text",wt.setAttribute("value",En??Jt),this.data.doNotScroll&&(wt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(wt.hidden=!0),j.add(wt),wt.setAttribute("data-element-id",dt),wt.disabled=this.data.readOnly,wt.name=this.data.fieldName,wt.tabIndex=b,this._setRequired(wt,this.data.required),ln&&(wt.maxLength=ln),wt.addEventListener("input",An=>{Rt.setValue(dt,{value:An.target.value}),this.setPropertyOnSiblings(wt,"value",An.target.value,"value"),yn.formattedValue=null}),wt.addEventListener("resetform",An=>{const Sn=this.data.defaultFieldValue??"";wt.value=yn.userValue=Sn,yn.formattedValue=null});let On=An=>{const{formattedValue:Sn}=yn;Sn!=null&&(An.target.value=Sn),An.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){wt.addEventListener("focus",Sn=>{if(yn.focused)return;const{target:Nn}=Sn;yn.userValue&&(Nn.value=yn.userValue),yn.lastCommittedValue=Nn.value,yn.commitKey=1,yn.focused=!0}),wt.addEventListener("updatefromsandbox",Sn=>{this.showElementAndHideCanvas(Sn.target);const Nn={value(Ln){yn.userValue=Ln.detail.value??"",Rt.setValue(dt,{value:yn.userValue.toString()}),Ln.target.value=yn.userValue},formattedValue(Ln){const{formattedValue:Fn}=Ln.detail;yn.formattedValue=Fn,Fn!=null&&Ln.target!==document.activeElement&&(Ln.target.value=Fn),Rt.setValue(dt,{formattedValue:Fn})},selRange(Ln){Ln.target.setSelectionRange(...Ln.detail.selRange)},charLimit:Ln=>{var $n;const{charLimit:Fn}=Ln.detail,{target:Un}=Ln;if(Fn===0){Un.removeAttribute("maxLength");return}Un.setAttribute("maxLength",Fn);let Kn=yn.userValue;!Kn||Kn.length<=Fn||(Kn=Kn.slice(0,Fn),Un.value=yn.userValue=Kn,Rt.setValue(dt,{value:Kn}),($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:dt,name:"Keystroke",value:Kn,willCommit:!0,commitKey:1,selStart:Un.selectionStart,selEnd:Un.selectionEnd}}))}};this._dispatchEventFromSandbox(Nn,Sn)}),wt.addEventListener("keydown",Sn=>{var Fn;yn.commitKey=1;let Nn=-1;if(Sn.key==="Escape"?Nn=0:Sn.key==="Enter"&&!this.data.multiLine?Nn=2:Sn.key==="Tab"&&(yn.commitKey=3),Nn===-1)return;const{value:Ln}=Sn.target;yn.lastCommittedValue!==Ln&&(yn.lastCommittedValue=Ln,yn.userValue=Ln,(Fn=this.linkService.eventBus)==null||Fn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:dt,name:"Keystroke",value:Ln,willCommit:!0,commitKey:Nn,selStart:Sn.target.selectionStart,selEnd:Sn.target.selectionEnd}}))});const An=On;On=null,wt.addEventListener("blur",Sn=>{var Ln;if(!yn.focused||!Sn.relatedTarget)return;yn.focused=!1;const{value:Nn}=Sn.target;yn.userValue=Nn,yn.lastCommittedValue!==Nn&&((Ln=this.linkService.eventBus)==null||Ln.dispatch("dispatcheventinsandbox",{source:this,detail:{id:dt,name:"Keystroke",value:Nn,willCommit:!0,commitKey:yn.commitKey,selStart:Sn.target.selectionStart,selEnd:Sn.target.selectionEnd}})),An(Sn)}),(Dt=this.data.actions)!=null&&Dt.Keystroke&&wt.addEventListener("beforeinput",Sn=>{var Wn;yn.lastCommittedValue=null;const{data:Nn,target:Ln}=Sn,{value:Fn,selectionStart:Un,selectionEnd:Kn}=Ln;let $n=Un,Vn=Kn;switch(Sn.inputType){case"deleteWordBackward":{const Yn=Fn.substring(0,Un).match(/\w*[^\w]*$/);Yn&&($n-=Yn[0].length);break}case"deleteWordForward":{const Yn=Fn.substring(Un).match(/^[^\w]*\w*/);Yn&&(Vn+=Yn[0].length);break}case"deleteContentBackward":Un===Kn&&($n-=1);break;case"deleteContentForward":Un===Kn&&(Vn+=1);break}Sn.preventDefault(),(Wn=this.linkService.eventBus)==null||Wn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:dt,name:"Keystroke",value:Fn,change:Nn||"",willCommit:!1,selStart:$n,selEnd:Vn}})}),this._setEventListeners(wt,yn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Sn=>Sn.target.value)}if(On&&wt.addEventListener("blur",On),this.data.comb){const Sn=(this.data.rect[2]-this.data.rect[0])/ln;wt.classList.add("comb"),wt.style.letterSpacing=`calc(${Sn}px * var(--scale-factor) - 1ch)`}}else wt=document.createElement("div"),wt.textContent=this.data.fieldValue,wt.style.verticalAlign="middle",wt.style.display="table-cell";return this._setTextStyle(wt),this._setBackgroundColor(wt),this._setDefaultPropertiesFromJS(wt),this.container.append(wt),this.container}}class it extends tt{constructor(Rt){super(Rt,{isRenderable:!!Rt.data.hasOwnCanvas})}}class ft extends tt{constructor(Rt){super(Rt,{isRenderable:Rt.renderForms})}render(){const Rt=this.annotationStorage,dt=this.data,wt=dt.id;let It=Rt.getValue(wt,{value:dt.exportValue===dt.fieldValue}).value;typeof It=="string"&&(It=It!=="Off",Rt.setValue(wt,{value:It})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Dt=document.createElement("input");return j.add(Dt),Dt.setAttribute("data-element-id",wt),Dt.disabled=dt.readOnly,this._setRequired(Dt,this.data.required),Dt.type="checkbox",Dt.name=dt.fieldName,It&&Dt.setAttribute("checked",!0),Dt.setAttribute("exportValue",dt.exportValue),Dt.tabIndex=b,Dt.addEventListener("change",Ht=>{const{name:Jt,checked:ln}=Ht.target;for(const En of this._getElementsByName(Jt,wt)){const yn=ln&&En.exportValue===dt.exportValue;En.domElement&&(En.domElement.checked=yn),Rt.setValue(En.id,{value:yn})}Rt.setValue(wt,{value:ln})}),Dt.addEventListener("resetform",Ht=>{const Jt=dt.defaultFieldValue||"Off";Ht.target.checked=Jt===dt.exportValue}),this.enableScripting&&this.hasJSActions&&(Dt.addEventListener("updatefromsandbox",Ht=>{const Jt={value(ln){ln.target.checked=ln.detail.value!=="Off",Rt.setValue(wt,{value:ln.target.checked})}};this._dispatchEventFromSandbox(Jt,Ht)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ht=>Ht.target.checked)),this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class st extends tt{constructor(Rt){super(Rt,{isRenderable:Rt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Rt=this.annotationStorage,dt=this.data,wt=dt.id;let It=Rt.getValue(wt,{value:dt.fieldValue===dt.buttonValue}).value;typeof It=="string"&&(It=It!==dt.buttonValue,Rt.setValue(wt,{value:It}));const Dt=document.createElement("input");if(j.add(Dt),Dt.setAttribute("data-element-id",wt),Dt.disabled=dt.readOnly,this._setRequired(Dt,this.data.required),Dt.type="radio",Dt.name=dt.fieldName,It&&Dt.setAttribute("checked",!0),Dt.tabIndex=b,Dt.addEventListener("change",Ht=>{const{name:Jt,checked:ln}=Ht.target;for(const En of this._getElementsByName(Jt,wt))Rt.setValue(En.id,{value:!1});Rt.setValue(wt,{value:ln})}),Dt.addEventListener("resetform",Ht=>{const Jt=dt.defaultFieldValue;Ht.target.checked=Jt!=null&&Jt===dt.buttonValue}),this.enableScripting&&this.hasJSActions){const Ht=dt.buttonValue;Dt.addEventListener("updatefromsandbox",Jt=>{const ln={value:En=>{const yn=Ht===En.detail.value;for(const On of this._getElementsByName(En.target.name)){const An=yn&&On.id===wt;On.domElement&&(On.domElement.checked=An),Rt.setValue(On.id,{value:An})}}};this._dispatchEventFromSandbox(ln,Jt)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Jt=>Jt.target.checked)}return this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class at extends rt{constructor(Rt){super(Rt,{ignoreBorder:Rt.data.hasAppearance})}render(){const Rt=super.render();Rt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Rt.title=this.data.alternativeText);const dt=Rt.lastChild;return this.enableScripting&&this.hasJSActions&&dt&&(this._setDefaultPropertiesFromJS(dt),dt.addEventListener("updatefromsandbox",wt=>{this._dispatchEventFromSandbox({},wt)})),Rt}}class Ct extends tt{constructor(Rt){super(Rt,{isRenderable:Rt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Rt=this.annotationStorage,dt=this.data.id,wt=Rt.getValue(dt,{value:this.data.fieldValue}),It=document.createElement("select");j.add(It),It.setAttribute("data-element-id",dt),It.disabled=this.data.readOnly,this._setRequired(It,this.data.required),It.name=this.data.fieldName,It.tabIndex=b;let Dt=this.data.combo&&this.data.options.length>0;this.data.combo||(It.size=this.data.options.length,this.data.multiSelect&&(It.multiple=!0)),It.addEventListener("resetform",yn=>{const On=this.data.defaultFieldValue;for(const An of It.options)An.selected=An.value===On});for(const yn of this.data.options){const On=document.createElement("option");On.textContent=yn.displayValue,On.value=yn.exportValue,wt.value.includes(yn.exportValue)&&(On.setAttribute("selected",!0),Dt=!1),It.append(On)}let Ht=null;if(Dt){const yn=document.createElement("option");yn.value=" ",yn.setAttribute("hidden",!0),yn.setAttribute("selected",!0),It.prepend(yn),Ht=()=>{yn.remove(),It.removeEventListener("input",Ht),Ht=null},It.addEventListener("input",Ht)}const Jt=yn=>{const On=yn?"value":"textContent",{options:An,multiple:Sn}=It;return Sn?Array.prototype.filter.call(An,Nn=>Nn.selected).map(Nn=>Nn[On]):An.selectedIndex===-1?null:An[An.selectedIndex][On]};let ln=Jt(!1);const En=yn=>{const On=yn.target.options;return Array.prototype.map.call(On,An=>({displayValue:An.textContent,exportValue:An.value}))};return this.enableScripting&&this.hasJSActions?(It.addEventListener("updatefromsandbox",yn=>{const On={value(An){Ht==null||Ht();const Sn=An.detail.value,Nn=new Set(Array.isArray(Sn)?Sn:[Sn]);for(const Ln of It.options)Ln.selected=Nn.has(Ln.value);Rt.setValue(dt,{value:Jt(!0)}),ln=Jt(!1)},multipleSelection(An){It.multiple=!0},remove(An){const Sn=It.options,Nn=An.detail.remove;Sn[Nn].selected=!1,It.remove(Nn),Sn.length>0&&Array.prototype.findIndex.call(Sn,Fn=>Fn.selected)===-1&&(Sn[0].selected=!0),Rt.setValue(dt,{value:Jt(!0),items:En(An)}),ln=Jt(!1)},clear(An){for(;It.length!==0;)It.remove(0);Rt.setValue(dt,{value:null,items:[]}),ln=Jt(!1)},insert(An){const{index:Sn,displayValue:Nn,exportValue:Ln}=An.detail.insert,Fn=It.children[Sn],Un=document.createElement("option");Un.textContent=Nn,Un.value=Ln,Fn?Fn.before(Un):It.append(Un),Rt.setValue(dt,{value:Jt(!0),items:En(An)}),ln=Jt(!1)},items(An){const{items:Sn}=An.detail;for(;It.length!==0;)It.remove(0);for(const Nn of Sn){const{displayValue:Ln,exportValue:Fn}=Nn,Un=document.createElement("option");Un.textContent=Ln,Un.value=Fn,It.append(Un)}It.options.length>0&&(It.options[0].selected=!0),Rt.setValue(dt,{value:Jt(!0),items:En(An)}),ln=Jt(!1)},indices(An){const Sn=new Set(An.detail.indices);for(const Nn of An.target.options)Nn.selected=Sn.has(Nn.index);Rt.setValue(dt,{value:Jt(!0)}),ln=Jt(!1)},editable(An){An.target.disabled=!An.detail.editable}};this._dispatchEventFromSandbox(On,yn)}),It.addEventListener("input",yn=>{var An;const On=Jt(!0);Rt.setValue(dt,{value:On}),yn.preventDefault(),(An=this.linkService.eventBus)==null||An.dispatch("dispatcheventinsandbox",{source:this,detail:{id:dt,name:"Keystroke",value:ln,changeEx:On,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(It,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],yn=>yn.target.value)):It.addEventListener("input",function(yn){Rt.setValue(dt,{value:Jt(!0)})}),this.data.combo&&this._setTextStyle(It),this._setBackgroundColor(It),this._setDefaultPropertiesFromJS(It),this.container.append(It),this.container}}class yt extends et{constructor(Rt){const{data:dt,elements:wt}=Rt;super(Rt,{isRenderable:et._hasPopupData(dt)}),this.elements=wt}render(){this.container.classList.add("popupAnnotation");const Rt=new pt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),dt=[];for(const wt of this.elements)wt.popup=Rt,dt.push(wt.data.id),wt.addHighlightArea();return this.container.setAttribute("aria-controls",dt.map(wt=>`${s.AnnotationPrefix}${wt}`).join(",")),this.container}}class pt{constructor({container:Rt,color:dt,elements:wt,titleObj:It,modificationDate:Dt,contentsObj:Ht,richText:Jt,parent:ln,rect:En,parentRect:yn,open:On}){Ot(this,mn);Ot(this,Tn);Ot(this,Rn);Ot(this,Mn);Ot(this,Mt,null);Ot(this,Wt,jt(this,mn,So).bind(this));Ot(this,Vt,jt(this,Mn,Wr).bind(this));Ot(this,Qt,jt(this,Rn,qr).bind(this));Ot(this,tn,jt(this,Tn,yr).bind(this));Ot(this,on,null);Ot(this,Zt,null);Ot(this,fn,null);Ot(this,xn,null);Ot(this,hn,null);Ot(this,Cn,null);Ot(this,sn,!1);Ot(this,Gt,null);Ot(this,qt,null);Ot(this,Nt,null);Ot(this,Xt,null);Ot(this,nn,!1);var Sn;Yt(this,Zt,Rt),Yt(this,Xt,It),Yt(this,fn,Ht),Yt(this,Nt,Jt),Yt(this,hn,ln),Yt(this,on,dt),Yt(this,qt,En),Yt(this,Cn,yn),Yt(this,xn,wt);const An=a.PDFDateString.toDateObject(Dt);An&&Yt(this,Mt,ln.l10n.get("annotation_date_string",{date:An.toLocaleDateString(),time:An.toLocaleTimeString()})),this.trigger=wt.flatMap(Nn=>Nn.getElementsToTriggerPopup());for(const Nn of this.trigger)Nn.addEventListener("click",ot(this,tn)),Nn.addEventListener("mouseenter",ot(this,Qt)),Nn.addEventListener("mouseleave",ot(this,Vt)),Nn.classList.add("popupTriggerArea");for(const Nn of wt)(Sn=Nn.container)==null||Sn.addEventListener("keydown",ot(this,Wt));ot(this,Zt).hidden=!0,On&&jt(this,Tn,yr).call(this)}render(){if(ot(this,Gt))return;const{page:{view:Rt},viewport:{rawDims:{pageWidth:dt,pageHeight:wt,pageX:It,pageY:Dt}}}=ot(this,hn),Ht=Yt(this,Gt,document.createElement("div"));if(Ht.className="popup",ot(this,on)){const $n=Ht.style.outlineColor=s.Util.makeHexColor(...ot(this,on));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ht.style.backgroundColor=`color-mix(in srgb, ${$n} 30%, white)`:Ht.style.backgroundColor=s.Util.makeHexColor(...ot(this,on).map(Wn=>Math.floor(.7*(255-Wn)+Wn)))}const Jt=document.createElement("span");Jt.className="header";const ln=document.createElement("h1");if(Jt.append(ln),{dir:ln.dir,str:ln.textContent}=ot(this,Xt),Ht.append(Jt),ot(this,Mt)){const $n=document.createElement("span");$n.classList.add("popupDate"),ot(this,Mt).then(Vn=>{$n.textContent=Vn}),Jt.append($n)}const En=ot(this,fn),yn=ot(this,Nt);if(yn!=null&&yn.str&&(!(En!=null&&En.str)||En.str===yn.str))g.XfaLayer.render({xfaHtml:yn.html,intent:"richText",div:Ht}),Ht.lastChild.classList.add("richText","popupContent");else{const $n=this._formatContents(En);Ht.append($n)}let On=!!ot(this,Cn),An=On?ot(this,Cn):ot(this,qt);for(const $n of ot(this,xn))if(!An||s.Util.intersect($n.data.rect,An)!==null){An=$n.data.rect,On=!0;break}const Sn=s.Util.normalizeRect([An[0],Rt[3]-An[1]+Rt[1],An[2],Rt[3]-An[3]+Rt[1]]),Ln=On?An[2]-An[0]+5:0,Fn=Sn[0]+Ln,Un=Sn[1],{style:Kn}=ot(this,Zt);Kn.left=`${100*(Fn-It)/dt}%`,Kn.top=`${100*(Un-Dt)/wt}%`,ot(this,Zt).append(Ht)}_formatContents({str:Rt,dir:dt}){const wt=document.createElement("p");wt.classList.add("popupContent"),wt.dir=dt;const It=Rt.split(/(?:\r\n?|\n)/);for(let Dt=0,Ht=It.length;Dt<Ht;++Dt){const Jt=It[Dt];wt.append(document.createTextNode(Jt)),Dt<Ht-1&&wt.append(document.createElement("br"))}return wt}forceHide(){Yt(this,nn,this.isVisible),ot(this,nn)&&(ot(this,Zt).hidden=!0)}maybeShow(){ot(this,nn)&&(Yt(this,nn,!1),ot(this,Zt).hidden=!1)}get isVisible(){return ot(this,Zt).hidden===!1}}Mt=new WeakMap,Wt=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,tn=new WeakMap,on=new WeakMap,Zt=new WeakMap,fn=new WeakMap,xn=new WeakMap,hn=new WeakMap,Cn=new WeakMap,sn=new WeakMap,Gt=new WeakMap,qt=new WeakMap,Nt=new WeakMap,Xt=new WeakMap,nn=new WeakMap,mn=new WeakSet,So=function(Rt){Rt.altKey||Rt.shiftKey||Rt.ctrlKey||Rt.metaKey||(Rt.key==="Enter"||Rt.key==="Escape"&&ot(this,sn))&&jt(this,Tn,yr).call(this)},Tn=new WeakSet,yr=function(){Yt(this,sn,!ot(this,sn)),ot(this,sn)?(jt(this,Rn,qr).call(this),ot(this,Zt).addEventListener("click",ot(this,tn)),ot(this,Zt).addEventListener("keydown",ot(this,Wt))):(jt(this,Mn,Wr).call(this),ot(this,Zt).removeEventListener("click",ot(this,tn)),ot(this,Zt).removeEventListener("keydown",ot(this,Wt)))},Rn=new WeakSet,qr=function(){ot(this,Gt)||this.render(),this.isVisible?ot(this,sn)&&ot(this,Zt).classList.add("focused"):(ot(this,Zt).hidden=!1,ot(this,Zt).style.zIndex=parseInt(ot(this,Zt).style.zIndex)+1e3)},Mn=new WeakSet,Wr=function(){ot(this,Zt).classList.remove("focused"),!(ot(this,sn)||!this.isVisible)&&(ot(this,Zt).hidden=!0,ot(this,Zt).style.zIndex=parseInt(ot(this,Zt).style.zIndex)-1e3)};class gt extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Rt.data.textContent,this.textPosition=Rt.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Rt=document.createElement("div");Rt.classList.add("annotationTextContent"),Rt.setAttribute("role","comment");for(const dt of this.textContent){const wt=document.createElement("span");wt.textContent=dt,Rt.append(wt)}this.container.append(Rt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=gt;class Et extends et{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0});Ot(this,zt,null)}render(){this.container.classList.add("lineAnnotation");const dt=this.data,{width:wt,height:It}=$(dt.rect),Dt=this.svgFactory.create(wt,It,!0),Ht=Yt(this,zt,this.svgFactory.createElement("svg:line"));return Ht.setAttribute("x1",dt.rect[2]-dt.lineCoordinates[0]),Ht.setAttribute("y1",dt.rect[3]-dt.lineCoordinates[1]),Ht.setAttribute("x2",dt.rect[2]-dt.lineCoordinates[2]),Ht.setAttribute("y2",dt.rect[3]-dt.lineCoordinates[3]),Ht.setAttribute("stroke-width",dt.borderStyle.width||1),Ht.setAttribute("stroke","transparent"),Ht.setAttribute("fill","transparent"),Dt.append(Ht),this.container.append(Dt),!dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class bt extends et{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0});Ot(this,Ft,null)}render(){this.container.classList.add("squareAnnotation");const dt=this.data,{width:wt,height:It}=$(dt.rect),Dt=this.svgFactory.create(wt,It,!0),Ht=dt.borderStyle.width,Jt=Yt(this,Ft,this.svgFactory.createElement("svg:rect"));return Jt.setAttribute("x",Ht/2),Jt.setAttribute("y",Ht/2),Jt.setAttribute("width",wt-Ht),Jt.setAttribute("height",It-Ht),Jt.setAttribute("stroke-width",Ht||1),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Dt.append(Jt),this.container.append(Dt),!dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,Ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ft=new WeakMap;class Pt extends et{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0});Ot(this,cn,null)}render(){this.container.classList.add("circleAnnotation");const dt=this.data,{width:wt,height:It}=$(dt.rect),Dt=this.svgFactory.create(wt,It,!0),Ht=dt.borderStyle.width,Jt=Yt(this,cn,this.svgFactory.createElement("svg:ellipse"));return Jt.setAttribute("cx",wt/2),Jt.setAttribute("cy",It/2),Jt.setAttribute("rx",wt/2-Ht/2),Jt.setAttribute("ry",It/2-Ht/2),Jt.setAttribute("stroke-width",Ht||1),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Dt.append(Jt),this.container.append(Dt),!dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,cn)}addHighlightArea(){this.container.classList.add("highlightArea")}}cn=new WeakMap;class xt extends et{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0});Ot(this,dn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const dt=this.data,{width:wt,height:It}=$(dt.rect),Dt=this.svgFactory.create(wt,It,!0);let Ht=[];for(const ln of dt.vertices){const En=ln.x-dt.rect[0],yn=dt.rect[3]-ln.y;Ht.push(En+","+yn)}Ht=Ht.join(" ");const Jt=Yt(this,dn,this.svgFactory.createElement(this.svgElementName));return Jt.setAttribute("points",Ht),Jt.setAttribute("stroke-width",dt.borderStyle.width||1),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Dt.append(Jt),this.container.append(Dt),!dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ot(this,dn)}addHighlightArea(){this.container.classList.add("highlightArea")}}dn=new WeakMap;class Lt extends xt{constructor(Rt){super(Rt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Bt extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Kt extends et{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0});Ot(this,Hn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const dt=this.data,{width:wt,height:It}=$(dt.rect),Dt=this.svgFactory.create(wt,It,!0);for(const Ht of dt.inkLists){let Jt=[];for(const En of Ht){const yn=En.x-dt.rect[0],On=dt.rect[3]-En.y;Jt.push(`${yn},${On}`)}Jt=Jt.join(" ");const ln=this.svgFactory.createElement(this.svgElementName);ot(this,Hn).push(ln),ln.setAttribute("points",Jt),ln.setAttribute("stroke-width",dt.borderStyle.width||1),ln.setAttribute("stroke","transparent"),ln.setAttribute("fill","transparent"),!dt.popupRef&&this.hasPopupData&&this._createPopup(),Dt.append(ln)}return this.container.append(Dt),this.container}getElementsToTriggerPopup(){return ot(this,Hn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hn=new WeakMap,e.InkAnnotationElement=Kt;class kt extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Ut extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class St extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rn extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class an extends et{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=an;class ht extends et{constructor(dt){var Dt;super(dt,{isRenderable:!0});Ot(this,$t);Ot(this,Bn,null);const{filename:wt,content:It}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(wt,!0),this.content=It,(Dt=this.linkService.eventBus)==null||Dt.dispatch("fileattachmentannotation",{source:this,filename:wt,content:It})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:dt,data:wt}=this;let It;wt.hasAppearance||wt.fillAlpha===0?It=document.createElement("div"):(It=document.createElement("img"),It.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(wt.name)?"paperclip":"pushpin"}.svg`,wt.fillAlpha&&wt.fillAlpha<1&&(It.style=`filter: opacity(${Math.round(wt.fillAlpha*100)}%);`)),It.addEventListener("dblclick",jt(this,$t,Yr).bind(this)),Yt(this,Bn,It);const{isMac:Dt}=s.FeatureTest.platform;return dt.addEventListener("keydown",Ht=>{Ht.key==="Enter"&&(Dt?Ht.metaKey:Ht.ctrlKey)&&jt(this,$t,Yr).call(this)}),!wt.popupRef&&this.hasPopupData?this._createPopup():It.classList.add("popupTriggerArea"),dt.append(It),dt}getElementsToTriggerPopup(){return ot(this,Bn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bn=new WeakMap,$t=new WeakSet,Yr=function(){var dt;(dt=this.downloadManager)==null||dt.openOrDownloadData(this.container,this.content,this.filename)};class ct{constructor({div:Rt,accessibilityManager:dt,annotationCanvasMap:wt,l10n:It,page:Dt,viewport:Ht}){Ot(this,_n);Ot(this,un);Ot(this,kn,null);Ot(this,gn,null);Ot(this,bn,new Map);this.div=Rt,Yt(this,kn,dt),Yt(this,gn,wt),this.l10n=It,this.page=Dt,this.viewport=Ht,this.zIndex=0,this.l10n||(this.l10n=h.NullL10n)}async render(Rt){const{annotations:dt}=Rt,wt=this.div;(0,a.setLayerDimensions)(wt,this.viewport);const It=new Map,Dt={data:null,layer:wt,linkService:Rt.linkService,downloadManager:Rt.downloadManager,imageResourcesPath:Rt.imageResourcesPath||"",renderForms:Rt.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:Rt.annotationStorage||new c.AnnotationStorage,enableScripting:Rt.enableScripting===!0,hasJSActions:Rt.hasJSActions,fieldObjects:Rt.fieldObjects,parent:this,elements:null};for(const Ht of dt){if(Ht.noHTML)continue;const Jt=Ht.annotationType===s.AnnotationType.POPUP;if(Jt){const yn=It.get(Ht.id);if(!yn)continue;Dt.elements=yn}else{const{width:yn,height:On}=$(Ht.rect);if(yn<=0||On<=0)continue}Dt.data=Ht;const ln=_e.create(Dt);if(!ln.isRenderable)continue;if(!Jt&&Ht.popupRef){const yn=It.get(Ht.popupRef);yn?yn.push(ln):It.set(Ht.popupRef,[ln])}ln.annotationEditorType>0&&ot(this,bn).set(ln.data.id,ln);const En=ln.render();Ht.hidden&&(En.style.visibility="hidden"),jt(this,_n,xo).call(this,En,Ht.id)}jt(this,un,Xr).call(this),await this.l10n.translate(wt)}update({viewport:Rt}){const dt=this.div;this.viewport=Rt,(0,a.setLayerDimensions)(dt,{rotation:Rt.rotation}),jt(this,un,Xr).call(this),dt.hidden=!1}getEditableAnnotations(){return Array.from(ot(this,bn).values())}getEditableAnnotation(Rt){return ot(this,bn).get(Rt)}}kn=new WeakMap,gn=new WeakMap,bn=new WeakMap,_n=new WeakSet,xo=function(Rt,dt){var It;const wt=Rt.firstChild||Rt;wt.id=`${s.AnnotationPrefix}${dt}`,this.div.append(Rt),(It=ot(this,kn))==null||It.moveElementInDOM(this.div,Rt,wt,!1)},un=new WeakSet,Xr=function(){if(!ot(this,gn))return;const Rt=this.div;for(const[dt,wt]of ot(this,gn)){const It=Rt.querySelector(`[data-annotation-id="${dt}"]`);if(!It)continue;const{firstChild:Dt}=It;Dt?Dt.nodeName==="CANVAS"?Dt.replaceWith(wt):Dt.before(wt):It.append(wt)}ot(this,gn).clear()},e.AnnotationLayer=ct},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function o(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function s(c){return Math.max(0,Math.min(255,255*c))}class a{static CMYK_G([d,h,g,b]){return["G",1-Math.min(1,.3*d+.59*g+.11*h+b)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=s(d),[d,d,d]}static G_HTML([d]){const h=o(d);return`#${h}${h}${h}`}static RGB_G([d,h,g]){return["G",.3*d+.59*h+.11*g]}static RGB_rgb(d){return d.map(s)}static RGB_HTML(d){return`#${d.map(o).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,h,g,b]){return["RGB",1-Math.min(1,d+b),1-Math.min(1,g+b),1-Math.min(1,h+b)]}static CMYK_rgb([d,h,g,b]){return[s(1-Math.min(1,d+b)),s(1-Math.min(1,g+b)),s(1-Math.min(1,h+b))]}static CMYK_HTML(d){const h=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(h)}static RGB_CMYK([d,h,g]){const b=1-d,_=1-h,j=1-g,$=Math.min(b,_,j);return["CMYK",b,_,j,$]}}e.ColorConverters=a},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=s;const o={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};o.print_progress_percent="{{progress}}%";function s(d,h){switch(d){case"find_match_count":d=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return o[d]||""}function a(d,h){return h?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,b)=>b in h?h[b]:"{{"+b+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,h=null,g=s(d,h)){return a(g,h)},async translate(d){}};e.NullL10n=c},(i,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var s=o(25);class a{static setupStorage(d,h,g,b,_){const j=b.getValue(h,{value:null});switch(g.name){case"textarea":if(j.value!==null&&(d.textContent=j.value),_==="print")break;d.addEventListener("input",$=>{b.setValue(h,{value:$.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(j.value===g.attributes.xfaOn?d.setAttribute("checked",!0):j.value===g.attributes.xfaOff&&d.removeAttribute("checked"),_==="print")break;d.addEventListener("change",$=>{b.setValue(h,{value:$.target.checked?$.target.getAttribute("xfaOn"):$.target.getAttribute("xfaOff")})})}else{if(j.value!==null&&d.setAttribute("value",j.value),_==="print")break;d.addEventListener("input",$=>{b.setValue(h,{value:$.target.value})})}break;case"select":if(j.value!==null){d.setAttribute("value",j.value);for(const $ of g.children)$.attributes.value===j.value?$.attributes.selected=!0:$.attributes.hasOwnProperty("selected")&&delete $.attributes.selected}d.addEventListener("input",$=>{const _e=$.target.options,et=_e.selectedIndex===-1?"":_e[_e.selectedIndex].value;b.setValue(h,{value:et})});break}}static setAttributes({html:d,element:h,storage:g=null,intent:b,linkService:_}){const{attributes:j}=h,$=d instanceof HTMLAnchorElement;j.type==="radio"&&(j.name=`${j.name}-${b}`);for(const[_e,et]of Object.entries(j))if(et!=null)switch(_e){case"class":et.length&&d.setAttribute(_e,et.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",et);break;case"style":Object.assign(d.style,et);break;case"textContent":d.textContent=et;break;default:(!$||_e!=="href"&&_e!=="newWindow")&&d.setAttribute(_e,et)}$&&_.addLinkAttributes(d,j.href,j.newWindow),g&&j.dataId&&this.setupStorage(d,j.dataId,h,g)}static render(d){var rt;const h=d.annotationStorage,g=d.linkService,b=d.xfaHtml,_=d.intent||"display",j=document.createElement(b.name);b.attributes&&this.setAttributes({html:j,element:b,intent:_,linkService:g});const $=[[b,-1,j]],_e=d.div;if(_e.append(j),d.viewport){const lt=`matrix(${d.viewport.transform.join(",")})`;_e.style.transform=lt}_!=="richText"&&_e.setAttribute("class","xfaLayer xfaFont");const et=[];for(;$.length>0;){const[lt,tt,nt]=$.at(-1);if(tt+1===lt.children.length){$.pop();continue}const it=lt.children[++$.at(-1)[1]];if(it===null)continue;const{name:ft}=it;if(ft==="#text"){const at=document.createTextNode(it.value);et.push(at),nt.append(at);continue}const st=(rt=it==null?void 0:it.attributes)!=null&&rt.xmlns?document.createElementNS(it.attributes.xmlns,ft):document.createElement(ft);if(nt.append(st),it.attributes&&this.setAttributes({html:st,element:it,storage:h,intent:_,linkService:g}),it.children&&it.children.length>0)$.push([it,-1,st]);else if(it.value){const at=document.createTextNode(it.value);s.XfaText.shouldBuildText(ft)&&et.push(at),st.append(at)}}for(const lt of _e.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))lt.setAttribute("readOnly",!0);return{textDivs:et}}static update(d){const h=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=h,d.div.hidden=!1}}e.XfaLayer=a},(i,e,o)=>{var b,_,j,$,_e,et,rt,lt,tt,nt,it,ft,st,at,Ct,wo,pt,To,Et,ko,Pt,bo,Lt,Qr,Kt,_o,Ut,Jr,rn,Ro,ht,Io,mt,Po,vt,Mo,Tt,No,Mt,qn,Vt,Zr,tn,Er,Zt,vr,xn,er,Cn,_i,Gt,Cr,Nt,Oo,nn,eo,vn,Lo,Pn,Do,In,to,en,Ar,Ft,tr;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var s=o(1),a=o(4),c=o(29),d=o(6),h=o(5);const dn=class dn extends a.AnnotationEditor{constructor($t){super({...$t,name:"inkEditor"});Ot(this,Ct);Ot(this,pt);Ot(this,Et);Ot(this,Pt);Ot(this,Lt);Ot(this,Kt);Ot(this,Ut);Ot(this,rn);Ot(this,ht);Ot(this,mt);Ot(this,vt);Ot(this,Tt);Ot(this,Mt);Ot(this,Vt);Ot(this,tn);Ot(this,Zt);Ot(this,xn);Ot(this,Cn);Ot(this,Gt);Ot(this,Pn);Ot(this,In);Ot(this,en);Ot(this,Ft);Ot(this,b,0);Ot(this,_,0);Ot(this,j,this.canvasPointermove.bind(this));Ot(this,$,this.canvasPointerleave.bind(this));Ot(this,_e,this.canvasPointerup.bind(this));Ot(this,et,this.canvasPointerdown.bind(this));Ot(this,rt,new Path2D);Ot(this,lt,!1);Ot(this,tt,!1);Ot(this,nt,!1);Ot(this,it,null);Ot(this,ft,0);Ot(this,st,0);Ot(this,at,null);this.color=$t.color||null,this.thickness=$t.thickness||null,this.opacity=$t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize($t){a.AnnotationEditor.initialize($t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams($t,pn){switch($t){case s.AnnotationEditorParamsType.INK_THICKNESS:dn._defaultThickness=pn;break;case s.AnnotationEditorParamsType.INK_COLOR:dn._defaultColor=pn;break;case s.AnnotationEditorParamsType.INK_OPACITY:dn._defaultOpacity=pn/100;break}}updateParams($t,pn){switch($t){case s.AnnotationEditorParamsType.INK_THICKNESS:jt(this,Ct,wo).call(this,pn);break;case s.AnnotationEditorParamsType.INK_COLOR:jt(this,pt,To).call(this,pn);break;case s.AnnotationEditorParamsType.INK_OPACITY:jt(this,Et,ko).call(this,pn);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,dn._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,dn._defaultColor||a.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||dn._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||dn._defaultColor||a.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(jt(this,tn,Er).call(this),jt(this,Zt,vr).call(this)),this.isAttachedToDOM||(this.parent.add(this),jt(this,xn,er).call(this)),jt(this,Ft,tr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ot(this,it).disconnect(),Yt(this,it,null),super.remove())}setParent($t){!this.parent&&$t?this._uiManager.removeShouldRescale(this):this.parent&&$t===null&&this._uiManager.addShouldRescale(this),super.setParent($t)}onScaleChanging(){const[$t,pn]=this.parentDimensions,kn=this.width*$t,gn=this.height*pn;this.setDimensions(kn,gn)}enableEditMode(){ot(this,lt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",ot(this,et)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ot(this,et)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){ot(this,lt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Yt(this,lt,!0),this.div.classList.add("disabled"),jt(this,Ft,tr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin($t){this._focusEventsAllowed&&(super.focusin($t),this.enableEditMode())}canvasPointerdown($t){$t.button!==0||!this.isInEditMode()||ot(this,lt)||(this.setInForeground(),$t.preventDefault(),$t.type!=="mouse"&&this.div.focus(),jt(this,Kt,_o).call(this,$t.offsetX,$t.offsetY))}canvasPointermove($t){$t.preventDefault(),jt(this,Ut,Jr).call(this,$t.offsetX,$t.offsetY)}canvasPointerup($t){$t.preventDefault(),jt(this,Vt,Zr).call(this,$t)}canvasPointerleave($t){jt(this,Vt,Zr).call(this,$t)}get isResizable(){return!this.isEmpty()&&ot(this,lt)}render(){if(this.div)return this.div;let $t,pn;this.width&&($t=this.x,pn=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(jn=>{var un;return(un=this.div)==null?void 0:un.setAttribute("aria-label",jn)});const[kn,gn,bn,_n]=jt(this,Pt,bo).call(this);if(this.setAt(kn,gn,0,0),this.setDims(bn,_n),jt(this,tn,Er).call(this),this.width){const[jn,un]=this.parentDimensions;this.setAspectRatio(this.width*jn,this.height*un),this.setAt($t*jn,pn*un,this.width*jn,this.height*un),Yt(this,nt,!0),jt(this,xn,er).call(this),this.setDims(this.width*jn,this.height*un),jt(this,Mt,qn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return jt(this,Zt,vr).call(this),this.div}setDimensions($t,pn){const kn=Math.round($t),gn=Math.round(pn);if(ot(this,ft)===kn&&ot(this,st)===gn)return;Yt(this,ft,kn),Yt(this,st,gn),this.canvas.style.visibility="hidden";const[bn,_n]=this.parentDimensions;this.width=$t/bn,this.height=pn/_n,this.fixAndSetPosition(),ot(this,lt)&&jt(this,Cn,_i).call(this,$t,pn),jt(this,xn,er).call(this),jt(this,Mt,qn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize($t,pn,kn){var Dt,Ht,Jt;if($t instanceof c.InkAnnotationElement)return null;const gn=super.deserialize($t,pn,kn);gn.thickness=$t.thickness,gn.color=s.Util.makeHexColor(...$t.color),gn.opacity=$t.opacity;const[bn,_n]=gn.pageDimensions,jn=gn.width*bn,un=gn.height*_n,Dn=gn.parentScale,wn=$t.thickness/2;Yt(gn,lt,!0),Yt(gn,ft,Math.round(jn)),Yt(gn,st,Math.round(un));const{paths:Rt,rect:dt,rotation:wt}=$t;for(let{bezier:ln}of Rt){ln=jt(Dt=dn,vn,Lo).call(Dt,ln,dt,wt);const En=[];gn.paths.push(En);let yn=Dn*(ln[0]-wn),On=Dn*(ln[1]-wn);for(let Sn=2,Nn=ln.length;Sn<Nn;Sn+=6){const Ln=Dn*(ln[Sn]-wn),Fn=Dn*(ln[Sn+1]-wn),Un=Dn*(ln[Sn+2]-wn),Kn=Dn*(ln[Sn+3]-wn),$n=Dn*(ln[Sn+4]-wn),Vn=Dn*(ln[Sn+5]-wn);En.push([[yn,On],[Ln,Fn],[Un,Kn],[$n,Vn]]),yn=$n,On=Vn}const An=jt(this,Nt,Oo).call(this,En);gn.bezierPath2D.push(An)}const It=jt(Ht=gn,In,to).call(Ht);return Yt(gn,_,Math.max(a.AnnotationEditor.MIN_SIZE,It[2]-It[0])),Yt(gn,b,Math.max(a.AnnotationEditor.MIN_SIZE,It[3]-It[1])),jt(Jt=gn,Cn,_i).call(Jt,jn,un),gn}serialize(){if(this.isEmpty())return null;const $t=this.getRect(0,0),pn=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:pn,thickness:this.thickness,opacity:this.opacity,paths:jt(this,Pn,Do).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,$t),pageIndex:this.pageIndex,rect:$t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};b=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,et=new WeakMap,rt=new WeakMap,lt=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakMap,st=new WeakMap,at=new WeakMap,Ct=new WeakSet,wo=function($t){const pn=this.thickness;this.addCommands({cmd:()=>{this.thickness=$t,jt(this,Ft,tr).call(this)},undo:()=>{this.thickness=pn,jt(this,Ft,tr).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},pt=new WeakSet,To=function($t){const pn=this.color;this.addCommands({cmd:()=>{this.color=$t,jt(this,Mt,qn).call(this)},undo:()=>{this.color=pn,jt(this,Mt,qn).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Et=new WeakSet,ko=function($t){$t/=100;const pn=this.opacity;this.addCommands({cmd:()=>{this.opacity=$t,jt(this,Mt,qn).call(this)},undo:()=>{this.opacity=pn,jt(this,Mt,qn).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Pt=new WeakSet,bo=function(){const{parentRotation:$t,parentDimensions:[pn,kn]}=this;switch($t){case 90:return[0,kn,kn,pn];case 180:return[pn,kn,pn,kn];case 270:return[pn,0,kn,pn];default:return[0,0,pn,kn]}},Lt=new WeakSet,Qr=function(){const{ctx:$t,color:pn,opacity:kn,thickness:gn,parentScale:bn,scaleFactor:_n}=this;$t.lineWidth=gn*bn/_n,$t.lineCap="round",$t.lineJoin="round",$t.miterLimit=10,$t.strokeStyle=`${pn}${(0,h.opacityToHex)(kn)}`},Kt=new WeakSet,_o=function($t,pn){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",ot(this,$)),this.canvas.addEventListener("pointermove",ot(this,j)),this.canvas.addEventListener("pointerup",ot(this,_e)),this.canvas.removeEventListener("pointerdown",ot(this,et)),this.isEditing=!0,ot(this,nt)||(Yt(this,nt,!0),jt(this,xn,er).call(this),this.thickness||(this.thickness=dn._defaultThickness),this.color||(this.color=dn._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=dn._defaultOpacity)),this.currentPath.push([$t,pn]),Yt(this,tt,!1),jt(this,Lt,Qr).call(this),Yt(this,at,()=>{jt(this,mt,Po).call(this),ot(this,at)&&window.requestAnimationFrame(ot(this,at))}),window.requestAnimationFrame(ot(this,at))},Ut=new WeakSet,Jr=function($t,pn){const[kn,gn]=this.currentPath.at(-1);if(this.currentPath.length>1&&$t===kn&&pn===gn)return;const bn=this.currentPath;let _n=ot(this,rt);if(bn.push([$t,pn]),Yt(this,tt,!0),bn.length<=2){_n.moveTo(...bn[0]),_n.lineTo($t,pn);return}bn.length===3&&(Yt(this,rt,_n=new Path2D),_n.moveTo(...bn[0])),jt(this,vt,Mo).call(this,_n,...bn.at(-3),...bn.at(-2),$t,pn)},rn=new WeakSet,Ro=function(){if(this.currentPath.length===0)return;const $t=this.currentPath.at(-1);ot(this,rt).lineTo(...$t)},ht=new WeakSet,Io=function($t,pn){Yt(this,at,null),$t=Math.min(Math.max($t,0),this.canvas.width),pn=Math.min(Math.max(pn,0),this.canvas.height),jt(this,Ut,Jr).call(this,$t,pn),jt(this,rn,Ro).call(this);let kn;if(this.currentPath.length!==1)kn=jt(this,Tt,No).call(this);else{const un=[$t,pn];kn=[[un,un.slice(),un.slice(),un]]}const gn=ot(this,rt),bn=this.currentPath;this.currentPath=[],Yt(this,rt,new Path2D);const _n=()=>{this.allRawPaths.push(bn),this.paths.push(kn),this.bezierPath2D.push(gn),this.rebuild()},jn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(jt(this,tn,Er).call(this),jt(this,Zt,vr).call(this)),jt(this,Ft,tr).call(this))};this.addCommands({cmd:_n,undo:jn,mustExec:!0})},mt=new WeakSet,Po=function(){if(!ot(this,tt))return;Yt(this,tt,!1);const $t=Math.ceil(this.thickness*this.parentScale),pn=this.currentPath.slice(-3),kn=pn.map(_n=>_n[0]),gn=pn.map(_n=>_n[1]);Math.min(...kn)-$t,Math.max(...kn)+$t,Math.min(...gn)-$t,Math.max(...gn)+$t;const{ctx:bn}=this;bn.save(),bn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _n of this.bezierPath2D)bn.stroke(_n);bn.stroke(ot(this,rt)),bn.restore()},vt=new WeakSet,Mo=function($t,pn,kn,gn,bn,_n,jn){const un=(pn+gn)/2,Dn=(kn+bn)/2,wn=(gn+_n)/2,Rt=(bn+jn)/2;$t.bezierCurveTo(un+2*(gn-un)/3,Dn+2*(bn-Dn)/3,wn+2*(gn-wn)/3,Rt+2*(bn-Rt)/3,wn,Rt)},Tt=new WeakSet,No=function(){const $t=this.currentPath;if($t.length<=2)return[[$t[0],$t[0],$t.at(-1),$t.at(-1)]];const pn=[];let kn,[gn,bn]=$t[0];for(kn=1;kn<$t.length-2;kn++){const[dt,wt]=$t[kn],[It,Dt]=$t[kn+1],Ht=(dt+It)/2,Jt=(wt+Dt)/2,ln=[gn+2*(dt-gn)/3,bn+2*(wt-bn)/3],En=[Ht+2*(dt-Ht)/3,Jt+2*(wt-Jt)/3];pn.push([[gn,bn],ln,En,[Ht,Jt]]),[gn,bn]=[Ht,Jt]}const[_n,jn]=$t[kn],[un,Dn]=$t[kn+1],wn=[gn+2*(_n-gn)/3,bn+2*(jn-bn)/3],Rt=[un+2*(_n-un)/3,Dn+2*(jn-Dn)/3];return pn.push([[gn,bn],wn,Rt,[un,Dn]]),pn},Mt=new WeakSet,qn=function(){if(this.isEmpty()){jt(this,Gt,Cr).call(this);return}jt(this,Lt,Qr).call(this);const{canvas:$t,ctx:pn}=this;pn.setTransform(1,0,0,1,0,0),pn.clearRect(0,0,$t.width,$t.height),jt(this,Gt,Cr).call(this);for(const kn of this.bezierPath2D)pn.stroke(kn)},Vt=new WeakSet,Zr=function($t){this.canvas.removeEventListener("pointerleave",ot(this,$)),this.canvas.removeEventListener("pointermove",ot(this,j)),this.canvas.removeEventListener("pointerup",ot(this,_e)),this.canvas.addEventListener("pointerdown",ot(this,et)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),jt(this,ht,Io).call(this,$t.offsetX,$t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},tn=new WeakSet,Er=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then($t=>{var pn;return(pn=this.canvas)==null?void 0:pn.setAttribute("aria-label",$t)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Zt=new WeakSet,vr=function(){Yt(this,it,new ResizeObserver($t=>{const pn=$t[0].contentRect;pn.width&&pn.height&&this.setDimensions(pn.width,pn.height)})),ot(this,it).observe(this.div)},xn=new WeakSet,er=function(){if(!ot(this,nt))return;const[$t,pn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*$t),this.canvas.height=Math.ceil(this.height*pn),jt(this,Gt,Cr).call(this)},Cn=new WeakSet,_i=function($t,pn){const kn=jt(this,en,Ar).call(this),gn=($t-kn)/ot(this,_),bn=(pn-kn)/ot(this,b);this.scaleFactor=Math.min(gn,bn)},Gt=new WeakSet,Cr=function(){const $t=jt(this,en,Ar).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$t,this.translationY*this.scaleFactor+$t)},Nt=new WeakSet,Oo=function($t){const pn=new Path2D;for(let kn=0,gn=$t.length;kn<gn;kn++){const[bn,_n,jn,un]=$t[kn];kn===0&&pn.moveTo(...bn),pn.bezierCurveTo(_n[0],_n[1],jn[0],jn[1],un[0],un[1])}return pn},nn=new WeakSet,eo=function($t,pn,kn){const[gn,bn,_n,jn]=pn;switch(kn){case 0:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]+=gn,$t[un+1]=jn-$t[un+1];break;case 90:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=$t[un+1]+gn,$t[un+1]=wn+bn}break;case 180:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]=_n-$t[un],$t[un+1]+=bn;break;case 270:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=_n-$t[un+1],$t[un+1]=jn-wn}break;default:throw new Error("Invalid rotation")}return $t},vn=new WeakSet,Lo=function($t,pn,kn){const[gn,bn,_n,jn]=pn;switch(kn){case 0:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]-=gn,$t[un+1]=jn-$t[un+1];break;case 90:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=$t[un+1]-bn,$t[un+1]=wn-gn}break;case 180:for(let un=0,Dn=$t.length;un<Dn;un+=2)$t[un]=_n-$t[un],$t[un+1]-=bn;break;case 270:for(let un=0,Dn=$t.length;un<Dn;un+=2){const wn=$t[un];$t[un]=jn-$t[un+1],$t[un+1]=_n-wn}break;default:throw new Error("Invalid rotation")}return $t},Pn=new WeakSet,Do=function($t,pn,kn,gn){var Dn,wn;const bn=[],_n=this.thickness/2,jn=$t*pn+_n,un=$t*kn+_n;for(const Rt of this.paths){const dt=[],wt=[];for(let It=0,Dt=Rt.length;It<Dt;It++){const[Ht,Jt,ln,En]=Rt[It],yn=$t*Ht[0]+jn,On=$t*Ht[1]+un,An=$t*Jt[0]+jn,Sn=$t*Jt[1]+un,Nn=$t*ln[0]+jn,Ln=$t*ln[1]+un,Fn=$t*En[0]+jn,Un=$t*En[1]+un;It===0&&(dt.push(yn,On),wt.push(yn,On)),dt.push(An,Sn,Nn,Ln,Fn,Un),wt.push(An,Sn),It===Dt-1&&wt.push(Fn,Un)}bn.push({bezier:jt(Dn=dn,nn,eo).call(Dn,dt,gn,this.rotation),points:jt(wn=dn,nn,eo).call(wn,wt,gn,this.rotation)})}return bn},In=new WeakSet,to=function(){let $t=1/0,pn=-1/0,kn=1/0,gn=-1/0;for(const bn of this.paths)for(const[_n,jn,un,Dn]of bn){const wn=s.Util.bezierBoundingBox(..._n,...jn,...un,...Dn);$t=Math.min($t,wn[0]),kn=Math.min(kn,wn[1]),pn=Math.max(pn,wn[2]),gn=Math.max(gn,wn[3])}return[$t,kn,pn,gn]},en=new WeakSet,Ar=function(){return ot(this,lt)?Math.ceil(this.thickness*this.parentScale):0},Ft=new WeakSet,tr=function($t=!1){if(this.isEmpty())return;if(!ot(this,lt)){jt(this,Mt,qn).call(this);return}const pn=jt(this,In,to).call(this),kn=jt(this,en,Ar).call(this);Yt(this,_,Math.max(a.AnnotationEditor.MIN_SIZE,pn[2]-pn[0])),Yt(this,b,Math.max(a.AnnotationEditor.MIN_SIZE,pn[3]-pn[1]));const gn=Math.ceil(kn+ot(this,_)*this.scaleFactor),bn=Math.ceil(kn+ot(this,b)*this.scaleFactor),[_n,jn]=this.parentDimensions;this.width=gn/_n,this.height=bn/jn,this.setAspectRatio(gn,bn);const un=this.translationX,Dn=this.translationY;this.translationX=-pn[0],this.translationY=-pn[1],jt(this,xn,er).call(this),jt(this,Mt,qn).call(this),Yt(this,ft,gn),Yt(this,st,bn),this.setDims(gn,bn);const wn=$t?kn/this.scaleFactor/2:0;this.translate(un-this.translationX-wn,Dn-this.translationY-wn)},Ot(dn,Nt),Ot(dn,nn),Ot(dn,vn),zn(dn,"_defaultColor",null),zn(dn,"_defaultOpacity",1),zn(dn,"_defaultThickness",1),zn(dn,"_type","ink");let g=dn;e.InkEditor=g},(i,e,o)=>{var g,b,_,j,$,_e,et,rt,lt,tt,nt,lr,ft,cr,at,Sr,yt,no,gt,Fo,bt,jo,xt,ro,Bt,xr,kt,Uo;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var s=o(1),a=o(4),c=o(6),d=o(29);const St=class St extends a.AnnotationEditor{constructor(ht){super({...ht,name:"stampEditor"});Ot(this,nt);Ot(this,ft);Ot(this,at);Ot(this,yt);Ot(this,gt);Ot(this,bt);Ot(this,xt);Ot(this,Bt);Ot(this,kt);Ot(this,g,null);Ot(this,b,null);Ot(this,_,null);Ot(this,j,null);Ot(this,$,null);Ot(this,_e,null);Ot(this,et,null);Ot(this,rt,null);Ot(this,lt,!1);Ot(this,tt,!1);Yt(this,j,ht.bitmapUrl),Yt(this,$,ht.bitmapFile)}static initialize(ht){a.AnnotationEditor.initialize(ht)}static get supportedTypes(){const ht=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",ht.map(ct=>`image/${ct}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ht){return this.supportedTypes.includes(ht)}static paste(ht,ct){ct.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:ht.getAsFile()})}remove(){var ht,ct;ot(this,b)&&(Yt(this,g,null),this._uiManager.imageManager.deleteId(ot(this,b)),(ht=ot(this,_e))==null||ht.remove(),Yt(this,_e,null),(ct=ot(this,et))==null||ct.disconnect(),Yt(this,et,null)),super.remove()}rebuild(){if(!this.parent){ot(this,b)&&jt(this,at,Sr).call(this);return}super.rebuild(),this.div!==null&&(ot(this,b)&&jt(this,at,Sr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(ot(this,_)||ot(this,g)||ot(this,j)||ot(this,$))}get isResizable(){return!0}render(){if(this.div)return this.div;let ht,ct;if(this.width&&(ht=this.x,ct=this.y),super.render(),this.div.hidden=!0,ot(this,g)?jt(this,yt,no).call(this):jt(this,at,Sr).call(this),this.width){const[mt,ut]=this.parentDimensions;this.setAt(ht*mt,ct*ut,this.width*mt,this.height*ut)}return this.div}static deserialize(ht,ct,mt){if(ht instanceof d.StampAnnotationElement)return null;const ut=super.deserialize(ht,ct,mt),{rect:vt,bitmapUrl:At,bitmapId:Tt,isSvg:_t,accessibilityData:Mt}=ht;Tt&&mt.imageManager.isValidId(Tt)?Yt(ut,b,Tt):Yt(ut,j,At),Yt(ut,lt,_t);const[Wt,Vt]=ut.pageDimensions;return ut.width=(vt[2]-vt[0])/Wt,ut.height=(vt[3]-vt[1])/Vt,Mt&&(ut.altTextData=Mt),ut}serialize(ht=!1,ct=null){if(this.isEmpty())return null;const mt={annotationType:s.AnnotationEditorType.STAMP,bitmapId:ot(this,b),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:ot(this,lt),structTreeParentId:this._structTreeParentId};if(ht)return mt.bitmapUrl=jt(this,Bt,xr).call(this,!0),mt.accessibilityData=this.altTextData,mt;const{decorative:ut,altText:vt}=this.altTextData;if(!ut&&vt&&(mt.accessibilityData={type:"Figure",alt:vt}),ct===null)return mt;ct.stamps||(ct.stamps=new Map);const At=ot(this,lt)?(mt.rect[2]-mt.rect[0])*(mt.rect[3]-mt.rect[1]):null;if(!ct.stamps.has(ot(this,b)))ct.stamps.set(ot(this,b),{area:At,serialized:mt}),mt.bitmap=jt(this,Bt,xr).call(this,!1);else if(ot(this,lt)){const Tt=ct.stamps.get(ot(this,b));At>Tt.area&&(Tt.area=At,Tt.serialized.bitmap.close(),Tt.serialized.bitmap=jt(this,Bt,xr).call(this,!1))}return mt}};g=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,et=new WeakMap,rt=new WeakMap,lt=new WeakMap,tt=new WeakMap,nt=new WeakSet,lr=function(ht,ct=!1){if(!ht){this.remove();return}Yt(this,g,ht.bitmap),ct||(Yt(this,b,ht.id),Yt(this,lt,ht.isSvg)),jt(this,yt,no).call(this)},ft=new WeakSet,cr=function(){Yt(this,_,null),this._uiManager.enableWaiting(!1),ot(this,_e)&&this.div.focus()},at=new WeakSet,Sr=function(){if(ot(this,b)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(ot(this,b)).then(ct=>jt(this,nt,lr).call(this,ct,!0)).finally(()=>jt(this,ft,cr).call(this));return}if(ot(this,j)){const ct=ot(this,j);Yt(this,j,null),this._uiManager.enableWaiting(!0),Yt(this,_,this._uiManager.imageManager.getFromUrl(ct).then(mt=>jt(this,nt,lr).call(this,mt)).finally(()=>jt(this,ft,cr).call(this)));return}if(ot(this,$)){const ct=ot(this,$);Yt(this,$,null),this._uiManager.enableWaiting(!0),Yt(this,_,this._uiManager.imageManager.getFromFile(ct).then(mt=>jt(this,nt,lr).call(this,mt)).finally(()=>jt(this,ft,cr).call(this)));return}const ht=document.createElement("input");ht.type="file",ht.accept=St.supportedTypesStr,Yt(this,_,new Promise(ct=>{ht.addEventListener("change",async()=>{if(!ht.files||ht.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const mt=await this._uiManager.imageManager.getFromFile(ht.files[0]);jt(this,nt,lr).call(this,mt)}ct()}),ht.addEventListener("cancel",()=>{this.remove(),ct()})}).finally(()=>jt(this,ft,cr).call(this))),ht.click()},yt=new WeakSet,no=function(){const{div:ht}=this;let{width:ct,height:mt}=ot(this,g);const[ut,vt]=this.pageDimensions,At=.75;if(this.width)ct=this.width*ut,mt=this.height*vt;else if(ct>At*ut||mt>At*vt){const Wt=Math.min(At*ut/ct,At*vt/mt);ct*=Wt,mt*=Wt}const[Tt,_t]=this.parentDimensions;this.setDims(ct*Tt/ut,mt*_t/vt),this._uiManager.enableWaiting(!1);const Mt=Yt(this,_e,document.createElement("canvas"));ht.append(Mt),ht.hidden=!1,jt(this,xt,ro).call(this,ct,mt),jt(this,kt,Uo).call(this),ot(this,tt)||(this.parent.addUndoableEditor(this),Yt(this,tt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},gt=new WeakSet,Fo=function(ht,ct){var At;const[mt,ut]=this.parentDimensions;this.width=ht/mt,this.height=ct/ut,this.setDims(ht,ct),(At=this._initialOptions)!=null&&At.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,ot(this,rt)!==null&&clearTimeout(ot(this,rt)),Yt(this,rt,setTimeout(()=>{Yt(this,rt,null),jt(this,xt,ro).call(this,ht,ct)},200))},bt=new WeakSet,jo=function(ht,ct){const{width:mt,height:ut}=ot(this,g);let vt=mt,At=ut,Tt=ot(this,g);for(;vt>2*ht||At>2*ct;){const _t=vt,Mt=At;vt>2*ht&&(vt=vt>=16384?Math.floor(vt/2)-1:Math.ceil(vt/2)),At>2*ct&&(At=At>=16384?Math.floor(At/2)-1:Math.ceil(At/2));const Wt=new OffscreenCanvas(vt,At);Wt.getContext("2d").drawImage(Tt,0,0,_t,Mt,0,0,vt,At),Tt=Wt.transferToImageBitmap()}return Tt},xt=new WeakSet,ro=function(ht,ct){ht=Math.ceil(ht),ct=Math.ceil(ct);const mt=ot(this,_e);if(!mt||mt.width===ht&&mt.height===ct)return;mt.width=ht,mt.height=ct;const ut=ot(this,lt)?ot(this,g):jt(this,bt,jo).call(this,ht,ct),vt=mt.getContext("2d");vt.filter=this._uiManager.hcmFilter,vt.drawImage(ut,0,0,ut.width,ut.height,0,0,ht,ct)},Bt=new WeakSet,xr=function(ht){if(ht){if(ot(this,lt)){const ut=this._uiManager.imageManager.getSvgUrl(ot(this,b));if(ut)return ut}const ct=document.createElement("canvas");return{width:ct.width,height:ct.height}=ot(this,g),ct.getContext("2d").drawImage(ot(this,g),0,0),ct.toDataURL()}if(ot(this,lt)){const[ct,mt]=this.pageDimensions,ut=Math.round(this.width*ct*c.PixelsPerInch.PDF_TO_CSS_UNITS),vt=Math.round(this.height*mt*c.PixelsPerInch.PDF_TO_CSS_UNITS),At=new OffscreenCanvas(ut,vt);return At.getContext("2d").drawImage(ot(this,g),0,0,ot(this,g).width,ot(this,g).height,0,0,ut,vt),At.transferToImageBitmap()}return structuredClone(ot(this,g))},kt=new WeakSet,Uo=function(){Yt(this,et,new ResizeObserver(ht=>{const ct=ht[0].contentRect;ct.width&&ct.height&&jt(this,gt,Fo).call(this,ct.width,ct.height)})),ot(this,et).observe(this.div)},zn(St,"_type","stamp");let h=St;e.StampEditor=h}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var o=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i](o,o.exports,__w_pdfjs_require__),o.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return h.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return o.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return o.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return o.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return o.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return o.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return o.version}});var e=__w_pdfjs_require__(1),o=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),h=__w_pdfjs_require__(29),g=__w_pdfjs_require__(14),b=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i(s,a,c,d,h,g){if(g!==ReactPropTypesSecret){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}i.isRequired=i;function e(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return o.PropTypes=o,o};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(i,e,o){if(o||arguments.length===2)for(var s=0,a=e.length,c;s<a;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(i,e){var o={};return allEvents.forEach(function(s){var a=i[s];a&&(e?o[s]=function(c){return a(c,e(s))}:o[s]=a)}),o}function makeCancellablePromise(i){var e=!1,o=new Promise(function(s,a){i.then(function(c){return!e&&s(c)}).catch(function(c){return!e&&a(c)})});return{promise:o,cancel:function(){e=!0}}}function r(i){var e,o,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(o=r(i[e]))&&(s&&(s+=" "),s+=o)}else for(o in i)i[o]&&(s&&(s+=" "),s+=o);return s}function clsx(){for(var i,e,o=0,s="",a=arguments.length;o<a;o++)(i=arguments[o])&&(e=r(i))&&(s&&(s+=" "),s+=e);return s}var isProduction=!0,prefix="Invariant failed";function invariant(i,e){if(!i){if(isProduction)throw new Error(prefix);var o=typeof e=="function"?e():e,s=o?"".concat(prefix,": ").concat(o):prefix;throw new Error(s)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(i,e,o){for(o of i.keys())if(dequal(o,e))return o}function dequal(i,e){var o,s,a;if(i===e)return!0;if(i&&e&&(o=i.constructor)===e.constructor){if(o===Date)return i.getTime()===e.getTime();if(o===RegExp)return i.toString()===e.toString();if(o===Array){if((s=i.length)===e.length)for(;s--&&dequal(i[s],e[s]););return s===-1}if(o===Set){if(i.size!==e.size)return!1;for(s of i)if(a=s,a&&typeof a=="object"&&(a=find(e,a),!a)||!e.has(a))return!1;return!0}if(o===Map){if(i.size!==e.size)return!1;for(s of i)if(a=s[0],a&&typeof a=="object"&&(a=find(e,a),!a)||!dequal(s[1],e.get(a)))return!1;return!0}if(o===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(o===DataView){if((s=i.byteLength)===e.byteLength)for(;s--&&i.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(i)){if((s=i.byteLength)===e.byteLength)for(;s--&&i[s]===e[s];);return s===-1}if(!o||typeof i=="object"){s=0;for(o in i)if(has.call(i,o)&&++s&&!has.call(e,o)||!(o in e)||!dequal(i[o],e[o]))return!1;return Object.keys(e).length===s}}return i!==i&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:i,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},i)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(o=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(o):Array.isArray(e)?o(e):e.then(o)}).then(o=>{invariant(Array.isArray(o),`"${o}" is not a valid destination array.`);const s=o[0];new Promise(a=>{invariant(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(c=>{a(c)}).catch(()=>{invariant(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?a(s):invariant(!1,`"${s}" is not a valid destination reference.`)}).then(a=>{const c=a+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(c>=1&&c<=this.pagesCount,`"${c}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:o,pageIndex:a,pageNumber:c})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const o=e-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:o,pageNumber:e})}addLinkAttributes(e,o,s){e.href=o,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(i){return typeof i<"u"}function isProvided(i){return isDefined(i)&&i!==null}function isString(i){return typeof i=="string"}function isArrayBuffer(i){return i instanceof ArrayBuffer}function isBlob(i){return invariant(isBrowser,"isBlob can only be used in a browser environment"),i instanceof Blob}function isDataURI(i){return isString(i)&&/^data:/.test(i)}function dataURItoByteString(i){invariant(isDataURI(i),"Invalid data URI.");const[e="",o=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(o):unescape(o)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(i){i&&i.cancel&&i.cancel()}function makePageCallback(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function isCancelException(i){return i.name==="RenderingCancelledException"}function loadFromFile(i){return new Promise((e,o)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return o(new Error("Error while reading a file."));e(s.result)},s.onerror=a=>{if(!a.target)return o(new Error("Error while reading a file."));const{error:c}=a.target;if(!c)return o(new Error("Error while reading a file."));switch(c.code){case c.NOT_FOUND_ERR:return o(new Error("Error while reading a file: File not found."));case c.SECURITY_ERR:return o(new Error("Error while reading a file: Security error."));case c.ABORT_ERR:return o(new Error("Error while reading a file: Aborted."));default:return o(new Error("Error while reading a file."))}},s.readAsArrayBuffer(i)})}function reducer(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const i={};return allEvents.forEach(e=>{i[e]=PropTypes.func}),i})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function i(e,o,s){const{[o]:a,pageNumber:c,pdf:d}=e;if(!isDefined(d))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${o}\` of type \`${typeof a}\` supplied to \`${s}\`, expected \`number\`.`);if(a<0)return new Error(`Expected \`${o}\` to be greater or equal to 0.`);const{numPages:h}=d;if(a+1>h)return new Error(`Expected \`${o}\` to be less or equal to ${h-1}.`)}else if(!isDefined(c))return new Error(`\`${o}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${s}\`.`);return null},isPageNumber=function i(e,o,s){const{[o]:a,pageIndex:c,pdf:d}=e;if(!isDefined(d))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${o}\` of type \`${typeof a}\` supplied to \`${s}\`, expected \`number\`.`);if(a<1)return new Error(`Expected \`${o}\` to be greater or equal to 1.`);const{numPages:h}=d;if(a>h)return new Error(`Expected \`${o}\` to be less or equal to ${h}.`)}else if(!isDefined(c))return new Error(`\`${o}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${s}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(i,e,o,s){function a(c){return c instanceof o?c:new o(function(d){d(c)})}return new(o||(o=Promise))(function(c,d){function h(_){try{b(s.next(_))}catch(j){d(j)}}function g(_){try{b(s.throw(_))}catch(j){d(j)}}function b(_){_.done?c(_.value):a(_.value).then(h,g)}b((s=s.apply(i,e||[])).next())})},__rest$1=function(i,e){var o={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(o[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(o[s[a]]=i[s[a]]);return o};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(i,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const o=prompt("Enter the password to open this PDF file.");i(o);break}case PasswordResponses.INCORRECT_PASSWORD:{const o=prompt("Invalid password. Please try again.");i(o);break}}};function isParameterObject(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Document=reactExports.forwardRef(function i(e,o){var{children:s,className:a,error:c="Failed to load PDF file.",externalLinkRel:d,externalLinkTarget:h,file:g,inputRef:b,imageResourcesPath:_,loading:j="Loading PDF",noData:$="No PDF file specified.",onItemClick:_e,onLoadError:et,onLoadProgress:rt,onLoadSuccess:lt,onPassword:tt=defaultOnPassword,onSourceError:nt,onSourceSuccess:it,options:ft,renderMode:st,rotate:at}=e,Ct=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[yt,pt]=useResolver(),{value:gt,error:Et}=yt,[bt,Pt]=useResolver(),{value:xt,error:Lt}=bt,Bt=reactExports.useRef(new LinkService),Kt=reactExports.useRef([]),kt=reactExports.useRef(),Ut=reactExports.useRef();reactExports.useEffect(()=>{g&&g!==kt.current&&isParameterObject(g)&&(warning$1(!dequal(g,kt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),kt.current=g)},[g]),reactExports.useEffect(()=>{ft&&ft!==Ut.current&&(warning$1(!dequal(ft,Ut.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ut.current=ft)},[ft]);const St=reactExports.useRef({scrollPageIntoView:on=>{const{dest:Zt,pageNumber:fn,pageIndex:xn=fn-1}=on;if(_e){_e({dest:Zt,pageIndex:xn,pageNumber:fn});return}const hn=Kt.current[xn];if(hn){hn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${fn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(o,()=>({linkService:Bt,pages:Kt,viewer:St}),[]);function rn(){it&&it()}function an(){Et&&(warning$1(!1,Et.toString()),nt&&nt(Et))}function ht(){pt({type:"RESET"})}reactExports.useEffect(ht,[g,pt]);const ct=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!g)return null;if(typeof g=="string")return isDataURI(g)?{data:dataURItoByteString(g)}:(displayCORSWarning(),{url:g});if(g instanceof PDFDataRangeTransport)return{range:g};if(isArrayBuffer(g))return{data:g};if(isBrowser&&isBlob(g))return{data:yield loadFromFile(g)};if(invariant(typeof g=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(g),"Invalid parameter object: need either .data, .range or .url"),"url"in g&&typeof g.url=="string"){if(isDataURI(g.url)){const{url:on}=g,Zt=__rest$1(g,["url"]),fn=dataURItoByteString(on);return Object.assign({data:fn},Zt)}displayCORSWarning()}return g}),[g]);reactExports.useEffect(()=>{const on=makeCancellablePromise(ct());return on.promise.then(Zt=>{pt({type:"RESOLVE",value:Zt})}).catch(Zt=>{pt({type:"REJECT",error:Zt})}),()=>{cancelRunningTask(on)}},[ct,pt]),reactExports.useEffect(()=>{if(!(typeof gt>"u")){if(gt===!1){an();return}rn()}},[gt]);function mt(){xt&&(lt&&lt(xt),Kt.current=new Array(xt.numPages),Bt.current.setDocument(xt))}function ut(){Lt&&(warning$1(!1,Lt.toString()),et&&et(Lt))}function vt(){Pt({type:"RESET"})}reactExports.useEffect(vt,[Pt,gt]);function At(){if(!gt)return;const on=ft?Object.assign(Object.assign({},gt),ft):gt,Zt=pdfjs.getDocument(on);rt&&(Zt.onProgress=rt),tt&&(Zt.onPassword=tt);const fn=Zt;return fn.promise.then(xn=>{Pt({type:"RESOLVE",value:xn})}).catch(xn=>{fn.destroyed||Pt({type:"REJECT",error:xn})}),()=>{fn.destroy()}}reactExports.useEffect(At,[ft,Pt,gt]),reactExports.useEffect(()=>{if(!(typeof xt>"u")){if(xt===!1){ut();return}mt()}},[xt]);function Tt(){Bt.current.setViewer(St.current),Bt.current.setExternalLinkRel(d),Bt.current.setExternalLinkTarget(h)}reactExports.useEffect(Tt,[d,h]);function _t(on,Zt){Kt.current[on]=Zt}function Mt(on){delete Kt.current[on]}const Wt=reactExports.useMemo(()=>({imageResourcesPath:_,linkService:Bt.current,onItemClick:_e,pdf:xt,registerPage:_t,renderMode:st,rotate:at,unregisterPage:Mt}),[_,_e,xt,st,at]),Vt=reactExports.useMemo(()=>makeEventProps(Ct,()=>xt),[Ct,xt]);function Qt(){return React.createElement(DocumentContext.Provider,{value:Wt},s)}function tn(){return g?xt==null?React.createElement(Message,{type:"loading"},typeof j=="function"?j():j):xt===!1?React.createElement(Message,{type:"error"},typeof c=="function"?c():c):Qt():React.createElement(Message,{type:"no-data"},typeof $=="function"?$():$)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",a),ref:b,style:{"--scale-factor":"1"}},Vt),tn())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var o=i.filter(Boolean);if(o.length<=1){var s=o[0];return s||null}return function(c){o.forEach(function(d){typeof d=="function"?d(c):d&&(d.current=c)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(i){return i in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(i){return"children"in i}function isStructTreeNodeWithOnlyContentChild(i){return isStructTreeNode(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function getRoleAttributes(i){const e={};if(isStructTreeNode(i)){const{role:o}=i,s=o.match(HEADING_PATTERN);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(isPdfRole(o)){const a=PDF_ROLE_TO_HTML_ROLE[o];a&&(e.role=a)}}return e}function getBaseAttributes(i){const e={};if(isStructTreeNode(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),isStructTreeNodeWithOnlyContentChild(i)){const[o]=i.children;if(o){const s=getBaseAttributes(o);return Object.assign(Object.assign({},e),s)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function getAttributes(i){return i?Object.assign(Object.assign({},getRoleAttributes(i)),getBaseAttributes(i)):null}function StructTreeItem({className:i,node:e}){const o=reactExports.useMemo(()=>getAttributes(e),[e]),s=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((a,c)=>React.createElement(StructTreeItem,{key:c,node:a})),[e]);return React.createElement("span",Object.assign({className:i},o),s)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:o}=i,[s,a]=useResolver(),{value:c,error:d}=s,{customTextRenderer:h,page:g}=i;function b(){c&&o&&o(c)}function _(){d&&(warning$1(!1,d.toString()),e&&e(d))}function j(){a({type:"RESET"})}reactExports.useEffect(j,[a,g]);function $(){if(h||!g)return;const _e=makeCancellablePromise(g.getStructTree()),et=_e;return _e.promise.then(rt=>{a({type:"RESOLVE",value:rt})}).catch(rt=>{a({type:"REJECT",error:rt})}),()=>cancelRunningTask(et)}return reactExports.useEffect($,[h,g,a]),reactExports.useEffect(()=>{if(c!==void 0){if(c===!1){_();return}b()}},[c]),c?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:c}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(i){const e=usePageContext();invariant(e,"Unable to find Page context.");const o=Object.assign(Object.assign({},e),i),{_className:s,canvasBackground:a,devicePixelRatio:c=getDevicePixelRatio(),onRenderError:d,onRenderSuccess:h,page:g,renderForms:b,renderTextLayer:_,rotate:j,scale:$}=o,{canvasRef:_e}=i;invariant(g,"Attempted to render page canvas, but no page was specified.");const et=reactExports.useRef(null);function rt(){g&&h&&h(makePageCallback(g,$))}function lt(st){isCancelException(st)||(warning$1(!1,st.toString()),d&&d(st))}const tt=reactExports.useMemo(()=>g.getViewport({scale:$*c,rotation:j}),[c,g,j,$]),nt=reactExports.useMemo(()=>g.getViewport({scale:$,rotation:j}),[g,j,$]);function it(){if(!g)return;g.cleanup();const{current:st}=et;if(!st)return;st.width=tt.width,st.height=tt.height,st.style.width=`${Math.floor(nt.width)}px`,st.style.height=`${Math.floor(nt.height)}px`,st.style.visibility="hidden";const at={annotationMode:b?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:st.getContext("2d",{alpha:!1}),viewport:tt};a&&(at.background=a);const Ct=g.render(at),yt=Ct;return Ct.promise.then(()=>{st.style.visibility="",rt()}).catch(lt),()=>cancelRunningTask(yt)}reactExports.useEffect(it,[a,et,c,g,b,tt,nt]);const ft=reactExports.useCallback(()=>{const{current:st}=et;st&&(st.width=0,st.height=0)},[et]);return reactExports.useEffect(()=>ft,[ft]),React.createElement("canvas",{className:`${s}__canvas`,dir:"ltr",ref:mergeRefs(_e,et),style:{display:"block",userSelect:"none"}},_?React.createElement(StructTree,null):null)}function PageSVG(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{_className:e,onRenderSuccess:o,onRenderError:s,page:a,rotate:c,scale:d}=i;invariant(a,"Attempted to render page SVG, but no page was specified.");const[h,g]=useResolver(),{value:b,error:_}=h;function j(){a&&o&&o(makePageCallback(a,d))}function $(){_&&(isCancelException(_)||(warning$1(!1,_.toString()),s&&s(_)))}const _e=reactExports.useMemo(()=>a.getViewport({scale:d,rotation:c}),[a,c,d]);function et(){g({type:"RESET"})}reactExports.useEffect(et,[a,g,_e]);function rt(){if(!a)return;const it=makeCancellablePromise(a.getOperatorList());return it.promise.then(ft=>{new pdfjs.SVGGraphics(a.commonObjs,a.objs).getSVG(ft,_e).then(at=>{if(!(at instanceof SVGElement))throw new Error("getSVG returned unexpected result.");g({type:"RESOLVE",value:at})}).catch(at=>{g({type:"REJECT",error:at})})}).catch(ft=>{g({type:"REJECT",error:ft})}),()=>cancelRunningTask(it)}reactExports.useEffect(rt,[a,g,_e]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){$();return}j()}},[b]);function lt(it){if(!it||!b)return;it.firstElementChild||it.appendChild(b);const{width:ft,height:st}=_e;b.setAttribute("width",`${ft}`),b.setAttribute("height",`${st}`)}const{width:tt,height:nt}=_e;return React.createElement("div",{className:`${e}__svg`,ref:it=>lt(it),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:tt,height:nt,userSelect:"none"}})}function isTextItem(i){return"str"in i}function TextLayer(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:o,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:c,page:d,pageIndex:h,pageNumber:g,rotate:b,scale:_}=i;invariant(d,"Attempted to load page text content, but no page was specified.");const[j,$]=useResolver(),{value:_e,error:et}=j,rt=reactExports.useRef(null),lt=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function tt(){_e&&s&&s(_e)}function nt(){et&&(warning$1(!1,et.toString()),o&&o(et))}function it(){$({type:"RESET"})}reactExports.useEffect(it,[d,$]);function ft(){if(!d)return;const Et=makeCancellablePromise(d.getTextContent()),bt=Et;return Et.promise.then(Pt=>{$({type:"RESOLVE",value:Pt})}).catch(Pt=>{$({type:"REJECT",error:Pt})}),()=>cancelRunningTask(bt)}reactExports.useEffect(ft,[d,$]),reactExports.useEffect(()=>{if(_e!==void 0){if(_e===!1){nt();return}tt()}},[_e]);const st=reactExports.useCallback(()=>{c&&c()},[c]),at=reactExports.useCallback(Et=>{warning$1(!1,Et.toString()),a&&a(Et)},[a]);function Ct(){const Et=lt.current;Et&&Et.classList.add("active")}function yt(){const Et=lt.current;Et&&Et.classList.remove("active")}const pt=reactExports.useMemo(()=>d.getViewport({scale:_,rotation:b}),[d,b,_]);function gt(){if(!d||!_e)return;const{current:Et}=rt;if(!Et)return;Et.innerHTML="";const bt=d.streamTextContent({includeMarkedContent:!0}),Pt={container:Et,textContentSource:bt,viewport:pt},xt=pdfjs.renderTextLayer(Pt),Lt=xt;return xt.promise.then(()=>{const Bt=document.createElement("div");Bt.className="endOfContent",Et.append(Bt),lt.current=Bt;const Kt=Et.querySelectorAll('[role="presentation"]');if(e){let kt=0;_e.items.forEach((Ut,St)=>{if(!isTextItem(Ut))return;const rn=Kt[kt];if(!rn)return;const an=e(Object.assign({pageIndex:h,pageNumber:g,itemIndex:St},Ut));rn.innerHTML=an,kt+=Ut.str&&Ut.hasEOL?2:1})}st()}).catch(at),()=>cancelRunningTask(Lt)}return reactExports.useLayoutEffect(gt,[e,at,st,d,h,g,_e,pt]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:yt,onMouseDown:Ct,ref:rt})}function AnnotationLayer(){const i=useDocumentContext(),e=usePageContext();invariant(e,"Unable to find Page context.");const o=Object.assign(Object.assign({},i),e),{imageResourcesPath:s,linkService:a,onGetAnnotationsError:c,onGetAnnotationsSuccess:d,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:g,page:b,pdf:_,renderForms:j,rotate:$,scale:_e=1}=o;invariant(_,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(b,"Attempted to load page annotations, but no page was specified."),invariant(a,"Attempted to load page annotations, but no linkService was specified.");const[et,rt]=useResolver(),{value:lt,error:tt}=et,nt=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function it(){lt&&d&&d(lt)}function ft(){tt&&(warning$1(!1,tt.toString()),c&&c(tt))}function st(){rt({type:"RESET"})}reactExports.useEffect(st,[rt,b]);function at(){if(!b)return;const Et=makeCancellablePromise(b.getAnnotations()),bt=Et;return Et.promise.then(Pt=>{rt({type:"RESOLVE",value:Pt})}).catch(Pt=>{rt({type:"REJECT",error:Pt})}),()=>{cancelRunningTask(bt)}}reactExports.useEffect(at,[rt,b,j]),reactExports.useEffect(()=>{if(lt!==void 0){if(lt===!1){ft();return}it()}},[lt]);function Ct(){g&&g()}function yt(Et){warning$1(!1,`${Et}`),h&&h(Et)}const pt=reactExports.useMemo(()=>b.getViewport({scale:_e,rotation:$}),[b,$,_e]);function gt(){if(!_||!b||!a||!lt)return;const{current:Et}=nt;if(!Et)return;const bt=pt.clone({dontFlip:!0}),Pt={accessibilityManager:null,annotationCanvasMap:null,div:Et,l10n:null,page:b,viewport:bt},xt={annotations:lt,annotationStorage:_.annotationStorage,div:Et,downloadManager:null,imageResourcesPath:s,linkService:a,page:b,renderForms:j,viewport:bt};Et.innerHTML="";try{new pdfjs.AnnotationLayer(Pt).render(xt),Ct()}catch(Lt){yt(Lt)}return()=>{}}return reactExports.useEffect(gt,[lt,s,a,b,j,pt]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:nt})}var __rest=function(i,e){var o={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(o[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(o[s[a]]=i[s[a]]);return o};const defaultScale=1,Page=function i(e){const o=useDocumentContext(),s=Object.assign(Object.assign({},o),e),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:c=!0,canvasBackground:d,canvasRef:h,children:g,className:b,customRenderer:_,customTextRenderer:j,devicePixelRatio:$,error:_e="Failed to load the page.",height:et,inputRef:rt,loading:lt="Loading page",noData:tt="No page specified.",onGetAnnotationsError:nt,onGetAnnotationsSuccess:it,onGetStructTreeError:ft,onGetStructTreeSuccess:st,onGetTextError:at,onGetTextSuccess:Ct,onLoadError:yt,onLoadSuccess:pt,onRenderAnnotationLayerError:gt,onRenderAnnotationLayerSuccess:Et,onRenderError:bt,onRenderSuccess:Pt,onRenderTextLayerError:xt,onRenderTextLayerSuccess:Lt,pageIndex:Bt,pageNumber:Kt,pdf:kt,registerPage:Ut,renderAnnotationLayer:St=!0,renderForms:rn=!1,renderMode:an="canvas",renderTextLayer:ht=!0,rotate:ct,scale:mt=defaultScale,unregisterPage:ut,width:vt}=s,At=__rest(s,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Tt,_t]=useResolver(),{value:Mt,error:Wt}=Tt,Vt=reactExports.useRef(null);invariant(kt,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Qt=isProvided(Kt)?Kt-1:Bt??null,tn=Kt??(isProvided(Bt)?Bt+1:null),on=ct??(Mt?Mt.rotate:null),Zt=reactExports.useMemo(()=>{if(!Mt)return null;let Rn=1;const In=mt??defaultScale;if(vt||et){const Mn=Mt.getViewport({scale:1,rotation:on});vt?Rn=vt/Mn.width:et&&(Rn=et/Mn.height)}return In*Rn},[et,Mt,on,mt,vt]);function fn(){return()=>{isProvided(Qt)&&c&&ut&&ut(Qt)}}reactExports.useEffect(fn,[c,kt,Qt,ut]);function xn(){if(pt){if(!Mt||!Zt)return;pt(makePageCallback(Mt,Zt))}if(c&&Ut){if(!isProvided(Qt)||!Vt.current)return;Ut(Qt,Vt.current)}}function hn(){Wt&&(warning$1(!1,Wt.toString()),yt&&yt(Wt))}function Cn(){_t({type:"RESET"})}reactExports.useEffect(Cn,[_t,kt,Qt]);function sn(){if(!kt||!tn)return;const Rn=makeCancellablePromise(kt.getPage(tn)),In=Rn;return Rn.promise.then(Mn=>{_t({type:"RESOLVE",value:Mn})}).catch(Mn=>{_t({type:"REJECT",error:Mn})}),()=>cancelRunningTask(In)}reactExports.useEffect(sn,[_t,kt,Qt,tn,Ut]),reactExports.useEffect(()=>{if(Mt!==void 0){if(Mt===!1){hn();return}xn()}},[Mt,Zt]);const Gt=reactExports.useMemo(()=>Mt&&isProvided(Qt)&&tn&&isProvided(on)&&isProvided(Zt)?{_className:a,canvasBackground:d,customTextRenderer:j,devicePixelRatio:$,onGetAnnotationsError:nt,onGetAnnotationsSuccess:it,onGetStructTreeError:ft,onGetStructTreeSuccess:st,onGetTextError:at,onGetTextSuccess:Ct,onRenderAnnotationLayerError:gt,onRenderAnnotationLayerSuccess:Et,onRenderError:bt,onRenderSuccess:Pt,onRenderTextLayerError:xt,onRenderTextLayerSuccess:Lt,page:Mt,pageIndex:Qt,pageNumber:tn,renderForms:rn,renderTextLayer:ht,rotate:on,scale:Zt}:null,[a,d,j,$,nt,it,ft,st,at,Ct,gt,Et,bt,Pt,xt,Lt,Mt,Qt,tn,rn,ht,on,Zt]),qt=reactExports.useMemo(()=>makeEventProps(At,()=>Mt&&(Zt?makePageCallback(Mt,Zt):void 0)),[At,Mt,Zt]),Nt=`${Qt}@${Zt}/${on}`,Xt=`${Qt}/${on}`;function nn(){switch(an){case"custom":return invariant(_,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(_,{key:`${Nt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Xt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Nt}_canvas`,canvasRef:h})}}function mn(){return ht?React.createElement(TextLayer,{key:`${Nt}_text`}):null}function vn(){return St?React.createElement(AnnotationLayer,{key:`${Nt}_annotations`}):null}function Tn(){return React.createElement(PageContext.Provider,{value:Gt},nn(),mn(),vn(),g)}function Pn(){return tn?kt===null||Mt===void 0||Mt===null?React.createElement(Message,{type:"loading"},typeof lt=="function"?lt():lt):kt===!1||Mt===!1?React.createElement(Message,{type:"error"},typeof _e=="function"?_e():_e):Tn():React.createElement(Message,{type:"no-data"},typeof tt=="function"?tt():tt)}return React.createElement("div",Object.assign({className:clsx(a,b),"data-page-number":tn,ref:mergeRefs(rt,Vt),style:{"--scale-factor":`${Zt}`,backgroundColor:d||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},qt),Pn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-DKQKFyKK.js",import.meta.url).toString();const ReferencePopup=({path:i,page:e,onClose:o})=>{const[s,a]=reactExports.useState(),[c,d]=reactExports.useState(parseInt(e));function h({numPages:_}){a(_)}const g=_=>{console.log("here"),_.preventDefault(),_.stopPropagation(),o()};function b(_){d(j=>j+_)}return reactExports.useEffect(()=>{const _=j=>{j.keyCode===27&&o()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[o]),jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 w-full h-full  backdrop-blur-sm",onClick:g,children:jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center w-full",onClick:_=>_.stopPropagation(),children:jsxRuntimeExports.jsxs("div",{className:"pdf-container bg-white border border-gray-500 overflow-auto relative",children:[jsxRuntimeExports.jsx(Document$1,{file:i,onLoadSuccess:h,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:c,renderTextLayer:!1,renderAnnotationLayer:!1})}),jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"border border-gray-300 bg-gray-100 cursor-pointer h-8 w-8 flex items-center justify-center",children:jsxRuntimeExports.jsx(ChromeCloseIcon$1,{})})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-2 w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex w-full items-center justify-center flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 bg-gray-100 m-auto relative shadow-lg flex",children:[jsxRuntimeExports.jsx("button",{className:"p-2 pt-1 hover:bg-white cursor-pointer",type:"button",disabled:c<=1,onClick:()=>b(-1),children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{})}),jsxRuntimeExports.jsxs("div",{className:"p-2 border-r border-l border-gray-300",children:["Page ",c||(s?1:"--")," of ",s||"--"]}),jsxRuntimeExports.jsx("button",{className:"p-2 pt-1 hover:bg-white cursor-pointer",type:"button",disabled:c>=(s||0),onClick:()=>b(1),children:jsxRuntimeExports.jsx(ChevronRightIcon$1,{})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1"})]})})]})})})},ChatMessage=({message:i})=>jsxRuntimeExports.jsxs("div",{className:"mx-1 my-2",children:[i.role==="user"&&i.agent==="human"&&jsxRuntimeExports.jsx(UserMessage,{message:i}),i.role==="assistant"&&jsxRuntimeExports.jsx(AssistantMessage,{message:i})]}),UserMessage=({message:i})=>{const e=useAccount(),s=e&&i.userId===e.localAccountId?"bg-blue-100":"bg-gray-100";return jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-24",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx("div",{className:"header absolute -right-6",children:jsxRuntimeExports.jsx(Avatar,{userId:i.userId,userName:i.name,size:8})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 rounded-lg p-2 pr-4 border-gray-300 border "+s,children:[jsxRuntimeExports.jsx("div",{className:"date text-xs text-gray-700 flex flex-row",children:jsxRuntimeExports.jsxs("div",{className:"flex-0",children:["Sent ",new Date(i.timestamp).toLocaleString()]})}),jsxRuntimeExports.jsx("div",{className:"content min-h-8",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm,supersub],children:i.content})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-4",children:""})]})},ReferenceItem=({referenceId:i,id:e})=>{const{topicId:o}=useParams(),[s,a]=reactExports.useState(!0),[c,d]=reactExports.useState(null),[h,g]=reactExports.useState(null),[b,_]=reactExports.useState(""),[j,$]=reactExports.useState(!1);reactExports.useEffect(()=>{o!==void 0&&fetchSearchResults(o,i).then(et=>d(et))},[o]),reactExports.useEffect(()=>{o!==void 0&&c!==null&&fetchFile(o,c.fileId).then(async et=>{g(et);const rt=await fetchBlobSasToken(o,et.file);a(!1),_(rt)})},[o,c]);const _e=()=>{c!==null&&h!==null&&(console.log("Open file",h),$(!0))};return jsxRuntimeExports.jsxs("div",{className:"overflow-hidden border border-gray-300 mt-1 px-1 bg-white rounded-md flex items-center relative cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"text-lg text-blue-600",onClick:_e,children:["[",e,"]"]}),c&&h&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-700",onClick:_e,children:[h.filename," - Page ",c.pageNumber,c.truncatedStart&&" and possibly the previous page(s)",c.truncatedEnd&&" and possibly the following page(s)"]}),s&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:jsxRuntimeExports.jsx(LoadingBar,{})}),c&&h&&j&&reactDomExports.createPortal(jsxRuntimeExports.jsx(ReferencePopup,{path:h.file+"?"+b,page:c.pageNumber,onClose:()=>$(!1)}),document.body)]})},AssistantMessage=({message:i})=>{const{content:e,references:o}=i;return jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-4",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx("div",{className:"header absolute -left-6",children:jsxRuntimeExports.jsx(Avatar,{staticPath:"/img/gpt.png",size:8,staticText:"GPT"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-gray-100 rounded-lg p-2 pl-5 border-gray-300 border",children:[jsxRuntimeExports.jsx("div",{className:"date text-xs text-gray-700 flex flex-row",children:jsxRuntimeExports.jsxs("div",{className:"flex-0",children:["Sent ",new Date(i.timestamp).toLocaleString()]})}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm,supersub],children:e}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[o.length>0&&jsxRuntimeExports.jsx("div",{className:"text-lg text-blue-600",children:"References:"}),o.map((s,a)=>jsxRuntimeExports.jsx(ReferenceItem,{referenceId:s,id:a+1},a))]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-gorw-0 flex-shrink-0 w-24",children:""})]})},EmptyArea=()=>jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-300",children:jsxRuntimeExports.jsx("div",{className:"text-3xl",children:"Start typing below"})}),SingleConversation=()=>{var $,_e;const{topicId:i,conversationId:e}=useParams(),[o,s]=reactExports.useState(null),[a,c]=reactExports.useState(!1),d=reactExports.useRef(null),h=useAccount();reactExports.useEffect(()=>{i&&e&&(console.log("fetching conversation"),fetchConversation(i,e).then(et=>{s(et),console.log(et),d.current&&d.current.scrollIntoView({behavior:"smooth"})}))},[i,e]);const g=async et=>{var tt,nt;if(et.preventDefault(),console.log(et),!i)return console.error("No topicId");if(!e)return console.error("No conversationId");if(!o)return console.error("No conversation");const rt=et.target.querySelector("#message").innerText;c(!0),et.target.querySelector("#message").innerText="",s({...o,messages:[...o.messages,{role:"user",agent:"human",userId:(h==null?void 0:h.localAccountId)||"",name:`${(tt=h==null?void 0:h.idTokenClaims)==null?void 0:tt.given_name} ${(nt=h==null?void 0:h.idTokenClaims)==null?void 0:nt.family_name}`||"Me",content:rt,timestamp:new Date().toISOString()}]});const lt=await sendConversationChat(i,e,rt);s(lt),c(!1)},b=($=o==null?void 0:o.usage)==null?void 0:$.map(et=>et.prompt_tokens).reduce((et,rt)=>et+rt,0),_=(_e=o==null?void 0:o.usage)==null?void 0:_e.map(et=>et.completion_tokens).reduce((et,rt)=>et+rt,0);if(!o)return jsxRuntimeExports.jsx(LoadingSpinner,{});const j=et=>{if(et.key==="Enter"&&!et.shiftKey){et.preventDefault();let rt=et.target;for(;rt.tagName!=="FORM";)rt=rt.parentElement;et.target=rt,g(et)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:i}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col  flex-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex-none h-16",children:jsxRuntimeExports.jsxs("h1",{children:["Conversation: ",o?o.name:"..."]})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[(!o.messages||o.messages.length==0)&&jsxRuntimeExports.jsx(EmptyArea,{}),o.messages&&o.messages.map((et,rt)=>jsxRuntimeExports.jsx(ChatMessage,{message:et},rt)),a&&jsxRuntimeExports.jsx(LoadingBar,{})]}),jsxRuntimeExports.jsx("div",{className:"flex-none ",ref:d,children:jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 py-4 -m-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-row items-stretch",children:jsxRuntimeExports.jsxs("form",{onSubmit:g,className:"w-full flex items-end",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("span",{role:"textbox",id:"message",className:"w-full inline-block bg-white border rounded-md min-h-12 p-2",contentEditable:!0,onKeyDown:et=>j(et)})}),jsxRuntimeExports.jsx("div",{className:"flex-0 item-bottom",children:jsxRuntimeExports.jsxs("button",{className:"btn border ml-2 border-blue-600 text-blue-600 rounded-full w-8 h-8 item-center hover:text-white hover:bg-blue-600",children:[jsxRuntimeExports.jsx("div",{className:"h-0.5"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-full w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-1"}),jsxRuntimeExports.jsx(SendIcon$1,{})]})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["Usage so far: ",b||0," prompt tokens + ",_||0," response tokens"]})})]})]})})]})]})},ExcelDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM261 1424h189q2-4 12-23t25-45 29-55 29-53 23-41 10-17q27 59 60 118t65 116h187l-209-339 205-333H707q-31 57-60 114t-63 112q-29-57-57-113t-57-113H279l199 335-217 337zm379 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm640-1024V768h512v128h-512zm0 256v-128h512v128h-512zm0 256v-128h512v128h-512z"})),displayName:"ExcelDocumentIcon"}),ExcelDocumentIcon$1=ExcelDocumentIcon,PowerPointDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM368 752v672h150v-226h100q52 0 97-15t78-46 53-72 20-97q0-56-17-97t-50-67-76-39-97-13H368zm1552 1168V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256h1280zM1536 640q79 0 149 30t122 82 83 123 30 149h-384V640zm-128 128v384h384q0 80-30 149t-82 122-123 83-149 30q-33 0-65-6t-63-18V792q31-11 63-17t65-7zm-804 300h-86V883h90q47 0 74 20t27 70q0 52-28 73t-77 22z"})),displayName:"PowerPointDocumentIcon"}),PowerPointDocumentIcon$1=PowerPointDocumentIcon,SkypeCircleCheckIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M1024 0q141 0 272 36t244 104 207 160 161 207 103 245 37 272q0 141-36 272t-104 244-160 207-207 161-245 103-272 37q-141 0-272-36t-244-104-207-160-161-207-103-245-37-272q0-141 36-272t104-244 160-207 207-161T752 37t272-37zM907 1347q22 0 42-8t35-24l429-429q15-15 23-35t8-41q0-22-8-42t-23-34-35-23-42-9q-21 0-41 8t-36 23l-352 352-118-118q-32-32-77-32-22 0-42 8t-35 24-23 34-9 42q0 21 8 41t24 36l195 195q15 15 35 23t42 9z"})),displayName:"SkypeCircleCheckIcon"}),SkypeCircleCheckIcon$1=SkypeCircleCheckIcon,SkypeCircleSlashIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M1024 0q141 0 272 36t244 104 207 160 161 207 103 245 37 272q0 141-36 272t-104 244-160 207-207 161-245 103-272 37q-141 0-272-36t-244-104-207-160-161-207-103-245-37-272q0-141 36-272t104-244 160-207 207-161T752 37t272-37zm432 1349q0-46-31-77L776 623q-31-31-77-31-22 0-41 8t-35 23-23 35-9 42q0 44 32 76l649 649q32 32 76 32 22 0 42-8t34-24 23-34 9-42z"})),displayName:"SkypeCircleSlashIcon"}),SkypeCircleSlashIcon$1=SkypeCircleSlashIcon,WordDocumentIcon=createSvgIcon({svg:({classes:i})=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:i.svg},reactExports.createElement("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM320 1424h161q2-8 9-43t18-83 21-103 22-101 16-76 8-31l7 30q7 30 17 77t23 100 23 103 19 84 10 43h160l148-672H834l-80 438-100-438H502l-96 440-86-440H170l150 672zm320 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm640-1024V768h512v128h-512zm0 256v-128h512v128h-512zm0 256v-128h512v128h-512z"})),displayName:"WordDocumentIcon"}),WordDocumentIcon$1=WordDocumentIcon,FileIcon=({file:i})=>{const e=(i.filename.split(".").pop()||"").toLowerCase();return e==="pdf"?jsxRuntimeExports.jsx(PDFIcon$1,{}):e==="docx"?jsxRuntimeExports.jsx(WordDocumentIcon$1,{}):e==="pptx"?jsxRuntimeExports.jsx(PowerPointDocumentIcon$1,{}):e==="xlsx"?jsxRuntimeExports.jsx(ExcelDocumentIcon$1,{}):e==="docx"?jsxRuntimeExports.jsx(WordDocumentIcon$1,{}):jsxRuntimeExports.jsx(TextDocumentIcon$1,{})},STEPS=["upload_to_local","upload_to_blob","process_doc_intelligence","upload_doc_intelligence","extract_file_metadata","perform_chunking","perform_embedding","postprocess_chunks","upload_to_ai_search","complete"],Progress=({step:i,progress:e})=>{const o=e.find(d=>d.step===i),s=o==null?void 0:o.success,a=s?"bg-green-600":"bg-gray-200",c=i.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ");return jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("div",{className:"flex-0 w-16 relative h-12",children:[jsxRuntimeExports.jsx("div",{className:"absolute border-r border-gray-400 h-12 w-6 left-0 z-10"}),jsxRuntimeExports.jsxs("div",{className:"rounded-full text-center w-8 ml-2 h-8 mt-2 z-20 relative overflow-hidden "+a,children:[s&&jsxRuntimeExports.jsx(SkypeCheckIcon$1,{className:"text-white text-3xl"}),!s&&jsxRuntimeExports.jsx(LoadingSpinner,{})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-1 h-12 text-ellipsis overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"text-xl h-6",children:c}),jsxRuntimeExports.jsx("div",{className:"text-sm h-6 text-ellipsis overflow-hidden text-gray-400",children:o==null?void 0:o.message})]})]})},MetadataViewer=({file:i})=>{var h,g,b;const[e,o]=reactExports.useState(((h=i==null?void 0:i.metadata)==null?void 0:h.specification_id)||""),[s,a]=reactExports.useState(((g=i==null?void 0:i.metadata)==null?void 0:g.title)||""),[c,d]=reactExports.useState(((b=i==null?void 0:i.metadata)==null?void 0:b.revision)||"");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"text-lg",children:"Metadata"}),jsxRuntimeExports.jsxs("div",{className:"flex border rounded border-gray-300 overflow-hidden mb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-32 py-2 px-1 bg-gray-100",children:"Specification ID"}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("input",{className:"px-1 py-2 w-full",type:"text",value:e,onChange:_=>o(_.target.value)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex border rounded border-gray-300 overflow-hidden mb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-32 py-2 px-1 bg-gray-100",children:"Title"}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("input",{className:"px-1 py-2 w-full",type:"text",value:s,onChange:_=>a(_.target.value)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex border rounded border-gray-300 overflow-hidden mb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-32 py-2 px-1 bg-gray-100",children:"Revision"}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("input",{className:"px-1 py-2 w-full",type:"text",value:c,onChange:_=>d(_.target.value)})})]})]})},SingleFile=()=>{const{topicId:i,fileId:e}=useParams(),[o,s]=reactExports.useState(null),[a,c]=reactExports.useState(0),[d,h]=reactExports.useState(!1),g=useNavigate();reactExports.useEffect(()=>{async function _(j,$){if(j&&$){const _e=await fetchFile(j,$);return s(_e),!!_e.processed}}_(i,e).then(j=>{j||setTimeout(()=>c($=>$+1),5e3)})},[i,e,a]);const b=async()=>{!i||!e||(h(!0),await deleteFile(i,e),h(!1),g(`/topics/${i}`))};return!i||!e||!o?jsxRuntimeExports.jsx(LoadingBar,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:i}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1 rounded-t-md bg-gray-100 border border-gray-100",children:[jsxRuntimeExports.jsx(FileIcon,{file:o})," ",o.filename]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-100 p-1",children:[jsxRuntimeExports.jsx("div",{className:"text-lg",children:"File progress"}),jsxRuntimeExports.jsx("div",{className:"progress-container",children:STEPS.map((_,j)=>jsxRuntimeExports.jsx(Progress,{step:_,progress:o.progress},j))}),jsxRuntimeExports.jsx(MetadataViewer,{file:o}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx("button",{className:"btn bg-red-700 text-white p-2 rounded-md hover:bg-red-600",disabled:d,onClick:b,children:d?"...":"Delete this file"})})]})]})]})]})},NewTopic=()=>{const[i,e]=reactExports.useState(""),o=useNavigate(),s=async a=>{e(""),a.preventDefault(),console.log(a);const c=a.target.querySelector("#name").value,d=a.target.querySelector("#description").value,h={name:c,description:d};try{const g=await createTopic(h);console.log(g),o(`/topics/${g.id}`)}catch(g){e(g.message)}};return jsxRuntimeExports.jsx("form",{onSubmit:s,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",placeholder:"Description",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})},NewConversation=()=>{const[i,e]=reactExports.useState(""),{topicId:o}=useParams(),s=useNavigate(),a=async c=>{if(e(""),c.preventDefault(),console.log(c),!o)return console.error("No topicId");const d=c.target.querySelector("#name").value,h=c.target.querySelector("#description").value,g={name:d,description:h};try{const b=await createConversation(o,g);console.log(b),s(`/topics/${o}/conversations/${b.id}`)}catch(b){e(b.message)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:o}),jsxRuntimeExports.jsx("form",{onSubmit:a,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",placeholder:"Description",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})]})},NewFile=()=>{const[i,e]=reactExports.useState(""),[o,s]=reactExports.useState(!1),{topicId:a}=useParams(),c=useNavigate(),d=async h=>{if(e(""),h.preventDefault(),console.log(h),!a)return console.error("No topicId");const g=h.target.querySelector("#file"),b=g.files[0].name,_=await g.files[0].arrayBuffer();console.log({filename:b,data:_});try{s(!0);const j=await createFile(a,b,_);console.log(j),s(!1),c(`/topics/${a}/files/${j.id}`)}catch(j){s(!1),e(j.message)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:a}),jsxRuntimeExports.jsx("form",{onSubmit:d,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"File "}),jsxRuntimeExports.jsx("input",{type:"file",id:"file",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",placeholder:"Description",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",disabled:o,value:o?"...":"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),o&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-blue-100 text-blue-950",children:"Uploading file. Please be patient. Depending on your file size this may take upto 5 minutes."}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})]})},NewUser=()=>{const i=async e=>{e.preventDefault(),console.log(e);const o=e.target.querySelector("#name").value,s=e.target.querySelector("#email").value,c=await createUser({name:o,email:s});console.log(c),localStorage.setItem("userId",c.userId),localStorage.setItem("token",c.userId)};return jsxRuntimeExports.jsxs("form",{onSubmit:i,children:[jsxRuntimeExports.jsxs("label",{children:["Name:",jsxRuntimeExports.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"border border-gray-800"})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("label",{children:["Email:",jsxRuntimeExports.jsx("input",{type:"text",id:"email",placeholder:"Description",className:"border border-gray-800"})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit"})]})};let title=window.TITLE||"";const tmp=document.createElement("div");tmp.innerHTML=title;title=tmp.textContent||title;const Menu=({account:i})=>{var o;const e=((o=i==null?void 0:i.idTokenClaims)==null?void 0:o.roles)||["User"];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-0"}),jsxRuntimeExports.jsx("div",{className:"fixed top-0 right-0 mt-16 min-w-64 rounded-sm shadow-lg bg-white text-blue-950 border border-gray-200",style:{zIndex:9999},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 m-2",children:["You are logged in as",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"italic",children:[" ",i.username]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 m-2",children:["You have the following roles:",jsxRuntimeExports.jsx("ul",{children:e.map((s,a)=>jsxRuntimeExports.jsx("li",{className:"italic",children:s},a))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-gray-100 p-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>handleLogout(!0),className:"border border-gray-700 hover:bg-blue-700 hover:text-white hover:shadow-md bg-white rounded-md p-2",children:"Sign out"})})]})})]})},LoggedInPanel=({account:i})=>{const[e,o]=reactExports.useState(!1),s=()=>o(!e);return jsxRuntimeExports.jsxs("div",{className:"cursor-pointer",onClick:s,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row  hover:bg-blue-200 hover:text-blue-900 transition-all duration-500",children:[jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsx("div",{className:"col1 max-w-48",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full justify-center",children:jsxRuntimeExports.jsx("div",{className:"row1 text-xl overflow-hidden",children:i.name})})}),jsxRuntimeExports.jsx(Avatar,{userId:i.localAccountId,userName:i.name})]}),e&&jsxRuntimeExports.jsx(Menu,{account:i})]})},LoggedOutPanel=()=>jsxRuntimeExports.jsx("div",{className:"w-20 h-12 flex items-center justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>handleLogin(),className:"border border-gray-700 hover:bg-blue-700 hover:text-white hover:shadow-md bg-white rounded-md p-2 text-blue-900",children:"Sign in"})}),Header=()=>{const{instance:i}=useMsal();let e=null;return i&&(e=i.getActiveAccount()),jsxRuntimeExports.jsxs("section",{id:"header",className:"flex flex-row h-16 overflow-hidden items-center bg-blue-950 text-blue-100",children:[jsxRuntimeExports.jsx("div",{className:"flex-grow-0 flex-shrink-0 px-2 text-3xl flex items-center",children:title}),jsxRuntimeExports.jsx(Link,{className:"p-1 underline cursor-pointer transition-all hover:bg-white hover:text-blue-600 items-center flex",to:"/",children:"Home"}),jsxRuntimeExports.jsx(Link,{className:"p-1 underline cursor-pointer transition-all hover:bg-white hover:text-blue-600 items-center flex",to:"/topics",children:"Topics"}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-0",children:[jsxRuntimeExports.jsx(AuthenticatedTemplate,{children:jsxRuntimeExports.jsx(LoggedInPanel,{account:e})}),jsxRuntimeExports.jsx(UnauthenticatedTemplate,{children:jsxRuntimeExports.jsx(LoggedOutPanel,{})})]})]})},NewJob=()=>{const[i,e]=reactExports.useState(""),[o,s]=reactExports.useState([]),{topicId:a}=useParams(),c=useNavigate();reactExports.useEffect(()=>{a&&fetchFiles(a).then(h=>s(h))},[a]);const d=async h=>{if(e(""),h.preventDefault(),!a)return console.error("No topicId");const g=h.target.querySelector("#question").value,b=h.target.querySelector('input[name="llm"]:checked').value,_=o.map($=>({fileId:$.id,pages:"*"})).filter($=>h.target.querySelector(`#file${$.fileId}`).checked),j={question:g,llm:b,selectedFiles:_};try{const $=await createJob(a,j);c(`/topics/${a}/jobs/${$.id}`)}catch($){e($.message)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:a}),jsxRuntimeExports.jsx("form",{onSubmit:d,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Question"}),jsxRuntimeExports.jsx("input",{type:"text",id:"question",placeholder:"Question",className:"bg-blue-50 p-2 w-full flex-1"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Model"}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-2 w-full flex-1",children:[jsxRuntimeExports.jsxs("span",{className:"mr-4",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:"gpt-35-turbo",name:"llm",value:"gpt-35-turbo",defaultChecked:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"gpt-35-turbo",children:"GPT-3.5 Turbo"})]}),jsxRuntimeExports.jsxs("span",{className:"mr-2",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:"gpt-4",name:"llm",value:"gpt-4"}),jsxRuntimeExports.jsx("label",{htmlFor:"gpt-4",children:"GPT-4"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1 border-b shadow-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-0 p-2 w-32",children:"Files"}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 p-2 w-full flex-1",children:o.map(h=>({...h,safe_id:"file"+h.id})).map((h,g)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:h.safe_id,name:h.safe_id,value:h.safe_id}),jsxRuntimeExports.jsx("label",{htmlFor:h.safe_id,children:h.filename})]},g))})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 m-1",children:jsxRuntimeExports.jsx("input",{type:"submit",value:"Submit",className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white"})}),i&&jsxRuntimeExports.jsx("div",{className:"flex-1 bg-red-100 text-red-950",children:i})]})})]})},JobResultEl$1=({result:i,file:e,isEvenRow:o})=>{const[s,a]=reactExports.useState(!1),[c,d]=reactExports.useState(""),h=async()=>{if(console.log("showReferencePopup",i,e),!e||!i)return;const b=await fetchBlobSasToken(i.topicId,e.file);d(b),a(!0)},g=(o?"bg-gray-100":"bg-white")+" whitespace-pre-wrap";return jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-12 text-center",children:jsxRuntimeExports.jsx("button",{className:"text-underline text-blue-500",onClick:h,children:i.page})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("pre",{className:g,children:i.result.answer.join(`

`)})}),s&&e&&reactDomExports.createPortal(jsxRuntimeExports.jsx(ReferencePopup,{path:e.file+"?"+c,page:i.page.toFixed(0),onClose:()=>a(!1)}),document.body)]})},JobResultsRendererV1=({results:i,files:e})=>{const o=i.sort((s,a)=>s.page-a.page).filter(s=>s.result&&s.result.answer&&s.result.answer.length>0);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-12 font-bold",children:"Page"}),jsxRuntimeExports.jsx("div",{className:"flex-1 font-bold",children:"Answer"})]}),o.map((s,a)=>jsxRuntimeExports.jsx(JobResultEl$1,{isEvenRow:a%2==0,result:s,file:e[0]},a))]})},JobResultEl=({result:i,finding:e,file:o,isEvenRow:s})=>{const[a,c]=reactExports.useState(!1),[d,h]=reactExports.useState(""),g=async()=>{if(console.log("showReferencePopup",i,o),!o||!i)return;const _=await fetchBlobSasToken(i.topicId,o.file);h(_),c(!0)},b=(s?"bg-gray-100":"bg-white")+" whitespace-pre-wrap";return jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-12 text-center",children:jsxRuntimeExports.jsx("button",{className:"text-underline text-blue-500",onClick:g,children:i.page})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("pre",{className:b,children:e.clause_address})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("pre",{className:b,children:e.clause})}),a&&o&&reactDomExports.createPortal(jsxRuntimeExports.jsx(ReferencePopup,{path:o.file+"?"+d,page:i.page.toFixed(0),onClose:()=>c(!1)}),document.body)]})},JobResultsRendererV2=({results:i,files:e})=>{const o=i.sort((s,a)=>s.page-a.page).filter(s=>s.result.findings&&s.result.findings.length).map(s=>s.result.findings.map(a=>({finding:a,result:s}))).reduce((s,a)=>s.concat(a),[]);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-0 w-12 font-bold",children:"Page"}),jsxRuntimeExports.jsx("div",{className:"flex-1 font-bold",children:"Clause"}),jsxRuntimeExports.jsx("div",{className:"flex-1 font-bold",children:"Text"})]}),o.map((s,a)=>jsxRuntimeExports.jsx(JobResultEl,{isEvenRow:a%2==0,result:s.result,finding:s.finding,file:e[0]},a))]})},JobStatusIcon=({status:i})=>{const e=i==="finished",o=i==="failed",s=!(e||o);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e&&jsxRuntimeExports.jsx(SkypeCircleCheckIcon$1,{className:"text-green-600 text-3xl"}),o&&jsxRuntimeExports.jsx(SkypeCircleSlashIcon$1,{className:"text-red-600 text-3xl"}),s&&jsxRuntimeExports.jsx(LoadingSpinner,{})]})},SingleJob=()=>{var ft,st,at;const{topicId:i,jobId:e}=useParams(),[o,s]=reactExports.useState(null),[a,c]=reactExports.useState(0),[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState(!1),[_,j]=reactExports.useState([]),$=useNavigate();reactExports.useEffect(()=>{i&&fetchFiles(i).then(j)},[i]),reactExports.useEffect(()=>{!i||!e||fetchJob(i,e).then(Ct=>{s(Ct),Ct.status!=="finished"&&Ct.status!=="failed"&&(console.log("refreshing job",Ct.status),setTimeout(()=>c(yt=>yt+1),5e3))})},[i,e,a]);const _e=async()=>{!i||!e||(h(!0),await deleteJob(i,e),h(!1),$(`/topics/${i}`))},et=async()=>{if(!i||!e)return;b(!0);const Ct=await resubmitJob(i,e);b(!1),s(Ct)},rt=()=>{!i||!e||downloadJobResultsXlsx(i,e)},lt=()=>{if(!o||!o.results)return;const Ct=o.results,yt=[];yt.push("page,answer"),Ct==null||Ct.forEach(Pt=>{Pt.result.answer.forEach(xt=>{yt.push(`${Pt.page},"${xt}"`)})});const pt=yt.join(`
`),gt=new Blob([pt],{type:"text/csv"}),Et=URL.createObjectURL(gt),bt=document.createElement("a");bt.href=Et,bt.download=`job-${e}.csv`,bt.click()},tt=o!=null&&o.results&&((ft=o.results[0])==null?void 0:ft.output_version)==="extract_v2"?rt:lt,nt=o!=null&&o.results&&((st=o.results[0])==null?void 0:st.output_version)==="extract_v2"?JobResultsRendererV2:JobResultsRendererV1,it=(at=o==null?void 0:o.results)==null?void 0:at.map(Ct=>Ct.usage).reduce((Ct,yt)=>({prompt_tokens:Ct.prompt_tokens+yt.prompt_tokens,completion_tokens:Ct.completion_tokens+yt.completion_tokens,total_tokens:Ct.total_tokens+yt.total_tokens}),{prompt_tokens:0,completion_tokens:0,total_tokens:0});return!i||!e||!o?jsxRuntimeExports.jsx(LoadingBar,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackToTopic,{topicId:i}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1 rounded-t-md bg-gray-100 border border-gray-100",children:[jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Question: "}),o.question]}),jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1  bg-gray-10 border border-gray-100",children:[jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Files used: "}),o.selectedFiles.map(Ct=>{var yt;return(yt=_.find(pt=>pt.id===Ct.fileId))==null?void 0:yt.filename}).join(", ")]}),jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1  bg-gray-100 border border-gray-100",children:[jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Language model: "}),o.llm]}),jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1  bg-gray-10 border border-gray-100",children:[jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Job status: "}),jsxRuntimeExports.jsx("span",{className:"inline-block",children:jsxRuntimeExports.jsx(JobStatusIcon,{status:o.status})}),o.status,o.error?jsxRuntimeExports.jsxs("div",{className:"text-red-600",children:["Error: ",o.error]}):null]}),it?jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1  bg-gray-100 border border-gray-100",children:[jsxRuntimeExports.jsx("div",{className:"font-bold",children:"Usage: "}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:["Prompt tokens: ",it.prompt_tokens]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:["Completion tokens: ",it.completion_tokens]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:["Total tokens: ",it.total_tokens]})]}):null,jsxRuntimeExports.jsxs("div",{className:"flex-0 h-full text-lg p-1  bg-gray-10 border border-gray-100",children:[jsxRuntimeExports.jsx("div",{className:"font-bold",children:"Results: "}),o.results?jsxRuntimeExports.jsx(nt,{results:o.results,files:_}):null]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-0 flex flex-col h-full",children:[jsxRuntimeExports.jsx("button",{className:"mb-2 ml-2 btn border border-green-600 text-green-800 p-2 rounded-md hover:bg-green-100",onClick:tt,children:"Download results"}),jsxRuntimeExports.jsx("button",{className:"mb-2 ml-2 btn border border-green-600 text-green-800 p-2 rounded-md hover:bg-green-100",disabled:g,onClick:et,children:g?"...":"Resubmit this job"}),jsxRuntimeExports.jsx("button",{className:"mb-2 ml-2 btn bg-red-700 text-white p-2 rounded-md hover:bg-red-600",disabled:d,onClick:_e,children:d?"...":"Delete this job"})]})]})]})},Footer=()=>{const[i,e]=reactExports.useState(""),[o,s]=reactExports.useState("");return reactExports.useEffect(()=>{getAppVersion().then(a=>{e(a.webapp),s(a.fnapp)})},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:" h-6 bg-slate-700 text-white overflow-hidden text-sm px-6 items-center flex",children:[jsxRuntimeExports.jsx("span",{className:"pr-2 flex-0",children:"App version:"}),jsxRuntimeExports.jsx("span",{title:"Web server",className:"flex-0 cursor-help rounded-full px-1 bg-slate-300 text-slate-700 text-xs",children:i}),jsxRuntimeExports.jsx("span",{className:"px-1",children:"/"}),jsxRuntimeExports.jsx("span",{title:"Frontend",className:"flex-0 cursor-help rounded-full px-1 bg-slate-300 text-slate-700 text-xs",children:"1.7.0"}),jsxRuntimeExports.jsx("span",{className:"px-1",children:"/"}),jsxRuntimeExports.jsx("span",{title:"Batch processor",className:"flex-0 cursor-help rounded-full px-1 bg-slate-300 text-slate-700 text-xs",children:o})]})})};function HomePage(){const[i,e]=reactExports.useState("");return reactExports.useEffect(()=>{wrappedFetch("/settings/homepage",{method:"GET"}).then(o=>e(o.content))},[]),jsxRuntimeExports.jsx("section",{className:"markdown-container",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("div",{className:"flex-0",children:jsxRuntimeExports.jsx(Link,{to:"/topics",children:jsxRuntimeExports.jsx("div",{className:"cursor-pointer rounded-lg border p-2 border-gray-800 hover:bg-blue-950 hover:text-white",children:"Go to topics"})})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:i})})]})})}function App({instance:i}){return jsxRuntimeExports.jsx(MsalProvider,{instance:i,children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen",children:[jsxRuntimeExports.jsx("div",{id:"header",className:"flex-0",children:jsxRuntimeExports.jsx(Header,{})}),jsxRuntimeExports.jsx("div",{id:"content",className:"flex-auto overflow-auto p-2 flex flex-col",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/files/new",element:jsxRuntimeExports.jsx(NewFile,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/files/:fileId",element:jsxRuntimeExports.jsx(SingleFile,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/conversations/new",element:jsxRuntimeExports.jsx(NewConversation,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/conversations/:conversationId",element:jsxRuntimeExports.jsx(SingleConversation,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/jobs/new",element:jsxRuntimeExports.jsx(NewJob,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId/jobs/:jobId",element:jsxRuntimeExports.jsx(SingleJob,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/new",element:jsxRuntimeExports.jsx(NewTopic,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics/:topicId",element:jsxRuntimeExports.jsx(SingleTopic,{})}),jsxRuntimeExports.jsx(Route,{path:"/topics",element:jsxRuntimeExports.jsx(TopicHome,{})}),jsxRuntimeExports.jsx(Route,{path:"/users",element:jsxRuntimeExports.jsx(NewUser,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{})})]})}),jsxRuntimeExports.jsx("div",{id:"footer",children:jsxRuntimeExports.jsx(Footer,{})})]})})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{instance:msalInstance})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-D5ylrvWI.js.map
